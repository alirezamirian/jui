"use strict";(self.webpackChunk_intellij_platform_core=self.webpackChunk_intellij_platform_core||[]).push([[7752,261],{"./src/demo.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ExampleApp:()=>ExampleApp,__namedExportsOrder:()=>__namedExportsOrder,default:()=>demo_stories});var react=__webpack_require__("../../node_modules/react/index.js"),story_helpers=__webpack_require__("./src/story-helpers.tsx"),path_browserify=__webpack_require__("../../node_modules/path-browserify/index.js"),path_browserify_default=__webpack_require__.n(path_browserify),es=__webpack_require__("../../node_modules/recoil/es/index.js"),isomorphic_git=__webpack_require__("../../node_modules/isomorphic-git/index.js"),web=__webpack_require__("../../node_modules/isomorphic-git/http/web/index.js"),KeymapProvider=__webpack_require__("./src/ActionSystem/KeymapProvider.tsx"),ModalWindow=__webpack_require__("./src/ModalWindow/ModalWindow.tsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const WindowsContext=react.createContext({open:()=>{throw new Error("WindowManager not found. Wrap your application with WindowManager to be able to open windows imperatively")}}),useWindowManager=()=>(0,react.useContext)(WindowsContext),WindowManager=({children})=>{const[windows,setWindows]=(0,react.useState)([]),newKeyRef=(0,react.useRef)(0),api=(0,react.useMemo)((()=>({open:function(content){return new Promise((resolve=>{newKeyRef.current++;const close=result=>{setWindows((currentWindows=>currentWindows.filter((aWindow=>aWindow!==window)))),requestAnimationFrame((()=>{resolve(result)}))},window=(0,jsx_runtime.jsx)(ModalWindow.zj.Provider,{value:{onClose:()=>{close()}},children:"function"==typeof content?content({close}):content},newKeyRef.current);setWindows((currentWindows=>currentWindows.concat(window)))}))}})),[]);return(0,jsx_runtime.jsxs)(WindowsContext.Provider,{value:api,children:[children,windows]})};WindowManager.displayName="WindowManager";try{useWindowManager.displayName="useWindowManager",useWindowManager.__docgenInfo={description:"Returns imperative API for showing windows.",displayName:"useWindowManager",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ModalWindow/WindowManager.tsx#useWindowManager"]={docgenInfo:useWindowManager.__docgenInfo,name:"useWindowManager",path:"src/ModalWindow/WindowManager.tsx#useWindowManager"})}catch(__react_docgen_typescript_loader_error){}try{WindowManager.displayName="WindowManager",WindowManager.__docgenInfo={description:"Enables imperative API (via {@link useWindowManager}) for opening windows.\nIt renders windows in a portal appended to `body`, unless `disablePortal` is `true`.",displayName:"WindowManager",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ModalWindow/WindowManager.tsx#WindowManager"]={docgenInfo:WindowManager.__docgenInfo,name:"WindowManager",path:"src/ModalWindow/WindowManager.tsx#WindowManager"})}catch(__react_docgen_typescript_loader_error){}var PopupManager=__webpack_require__("./src/Popup/PopupManager.tsx"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const Img=({darkSrc,...props})=>(0,styled_components_browser_esm.Fg)().dark?(0,jsx_runtime.jsx)("img",{...props,src:darkSrc||props.src}):(0,jsx_runtime.jsx)("img",{...props});Img.displayName="Img";try{Img.displayName="Img",Img.__docgenInfo={description:"Same as default `img`, but theme aware. Meaning that you can specify different sources for normal and dark mode.",displayName:"Img",props:{darkSrc:{defaultValue:null,description:"src for when a dark theme is active. if `darkSrc` doesn't have a non-empty string value, src will be used both\nfor dark and light themes.",name:"darkSrc",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Img.tsx#Img"]={docgenInfo:Img.__docgenInfo,name:"Img",path:"src/Img.tsx#Img"})}catch(__react_docgen_typescript_loader_error){}const loading_namespaceObject=__webpack_require__.p+"static/media/loading.e4ce7cef.gif",loading_dark_namespaceObject=__webpack_require__.p+"static/media/loading_dark.63238210.gif",LoadingGif=props=>(0,jsx_runtime.jsx)(Img,{...props,src:loading_namespaceObject,darkSrc:loading_dark_namespaceObject});LoadingGif.displayName="LoadingGif";try{LoadingGif.displayName="LoadingGif",LoadingGif.__docgenInfo={description:"",displayName:"LoadingGif",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/LoadingGif.tsx#LoadingGif"]={docgenInfo:LoadingGif.__docgenInfo,name:"LoadingGif",path:"../example-app/src/LoadingGif.tsx#LoadingGif"})}catch(__react_docgen_typescript_loader_error){}const Loading=(0,styled_components_browser_esm.ZP)(LoadingGif).withConfig({displayName:"DefaultSuspense__Loading",componentId:"sc-1n9vzm7-0"})(["width:fit-content;margin:auto;"]),DefaultSuspense=({fallback=(0,jsx_runtime.jsx)(Loading,{}),children})=>(0,jsx_runtime.jsx)(react.Suspense,{fallback,children});DefaultSuspense.displayName="DefaultSuspense";try{DefaultSuspense.displayName="DefaultSuspense",DefaultSuspense.__docgenInfo={description:"",displayName:"DefaultSuspense",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/DefaultSuspense.tsx#DefaultSuspense"]={docgenInfo:DefaultSuspense.__docgenInfo,name:"DefaultSuspense",path:"../example-app/src/DefaultSuspense.tsx#DefaultSuspense"})}catch(__react_docgen_typescript_loader_error){}var styled=__webpack_require__("./src/styled.ts"),Button=__webpack_require__("./src/Button/Button.tsx"),AlertDialog=__webpack_require__("./src/AlertDialog/AlertDialog.tsx");function useAlertDialog(){const{open}=useWindowManager();return{confirm:({title,message,okText="Ok",cancelText="Cancel"})=>new Promise((resolve=>{open((({close})=>(0,jsx_runtime.jsx)(AlertDialog.a,{type:"question",body:message,heading:title,buttons:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.z,{onPress:close,children:cancelText}),(0,jsx_runtime.jsx)(Button.z,{variant:"default",onPress:()=>{resolve(!0),close()},children:okText})]}),onClose:()=>resolve(!1)})))}))}}try{useAlertDialog.displayName="useAlertDialog",useAlertDialog.__docgenInfo={description:"Similar to com.intellij.openapi.ui.Messages class in the reference impl, provides helper functions\nto show different types of Alert dialog. The helper functions return a Promise of the selected option,\nwhich makes it easy to use it imperatively, in a flow of statements, regardless of how the UI of the\nalert dialog is handled.\n{@link useAlertDialog} depends on {@link WindowManager }, to imperatively open modal windows.",displayName:"useAlertDialog",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/AlertDialog/useAlertDialog.tsx#useAlertDialog"]={docgenInfo:useAlertDialog.__docgenInfo,name:"useAlertDialog",path:"src/AlertDialog/useAlertDialog.tsx#useAlertDialog"})}catch(__react_docgen_typescript_loader_error){}var BalloonManager=__webpack_require__("./src/Balloon/BalloonManager.tsx"),DefaultToolWindows=__webpack_require__("./src/ToolWindowsImpl/DefaultToolWindows.tsx"),ActionsProvider=__webpack_require__("./src/ActionSystem/ActionsProvider.tsx"),ToolWindowActionIds=__webpack_require__("./src/ToolWindowsImpl/ToolWindowActionIds.ts"),useLatest=__webpack_require__("./src/utils/useLatest.ts"),ContextMenuContainer=__webpack_require__("./src/Menu/ContextMenuContainer.tsx"),Menu=__webpack_require__("./src/Menu/Menu.tsx"),Item=__webpack_require__("./src/Collections/Item.ts"),EditorTabs=__webpack_require__("./src/Tabs/EditorTabs/EditorTabs.tsx"),PlatformIcon=__webpack_require__("./src/Icon/PlatformIcon.tsx"),TabItem=__webpack_require__("./src/Tabs/TabItem.tsx"),MenuItemLayout=__webpack_require__("./src/Menu/MenuItemLayout.tsx"),TooltipTrigger=__webpack_require__("./src/Tooltip/TooltipTrigger.tsx"),ActionTooltip=__webpack_require__("./src/Tooltip/ActionTooltip.tsx"),EditorTabContent=__webpack_require__("./src/Tabs/EditorTabs/EditorTabContent.tsx"),TabCloseButton=__webpack_require__("./src/Tabs/TabCloseButton.tsx"),editor_main=__webpack_require__("../../node_modules/monaco-editor/esm/vs/editor/editor.main.js");const extensionIconMap={editorconfig:"nodes/editorconfig",js:"fileTypes/javaScript",gitignore:"vcs/ignore_file",archive:"fileTypes/archive",as:"fileTypes/as",config:"fileTypes/config",css:"fileTypes/css",dtd:"fileTypes/dtd",hpr:"fileTypes/hprof",htaccess:"fileTypes/htaccess",html:"fileTypes/html",idl:"fileTypes/idl",java:"fileTypes/java",jfr:"fileTypes/jfr",json:"fileTypes/json",jsp:"fileTypes/jsp",jspx:"fileTypes/jspx",manifest:"fileTypes/manifest",properties:"fileTypes/properties",txt:"fileTypes/text",wsdl:"fileTypes/wsdlFile",xhtml:"fileTypes/xhtml",xml:"fileTypes/xml",xsd:"fileTypes/xsdFile",yaml:"fileTypes/yaml"},getIconForFile=filepath=>{const extension=getExtension(filepath);return extensionIconMap[extension]||"fileTypes/text"},getExtension=filepath=>filepath.split(".").pop()||"";function getParentPaths(filepath,upperLimit=path_browserify_default().sep){return getParentPathsRecursive(filepath,upperLimit)}function getParentPathsRecursive(filepath,upperLimit,previousPaths=[]){const dirname=path_browserify_default().dirname(filepath);return dirname!==upperLimit?[dirname].concat(getParentPathsRecursive(dirname,upperLimit,previousPaths)):previousPaths}try{getIconForFile.displayName="getIconForFile",getIconForFile.__docgenInfo={description:"",displayName:"getIconForFile",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/file-utils.tsx#getIconForFile"]={docgenInfo:getIconForFile.__docgenInfo,name:"getIconForFile",path:"../example-app/src/file-utils.tsx#getIconForFile"})}catch(__react_docgen_typescript_loader_error){}var lib_es=__webpack_require__("../../node_modules/@monaco-editor/react/lib/es/index.js");const darculaColorSchemeTokenRules=JSON.parse('{"nG":[{"scope":"emphasis","settings":{"fontStyle":"italic"}},{"scope":"strong","settings":{"fontStyle":"bold"}},{"scope":"header","settings":{"foreground":"#000080"}},{"scope":"comment","settings":{"foreground":"#808080"}},{"scope":"constant.language","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":["constant.numeric"],"settings":{"foreground":"#6897BB"}},{"scope":"constant.regexp","settings":{"foreground":"#646695"}},{"scope":"entity.name.tag","settings":{"foreground":"#FFC66D"}},{"scope":"entity.name.tag.css","settings":{"foreground":"#d7ba7d"}},{"scope":"entity.other.attribute-name","settings":{"foreground":"#BABABA"}},{"scope":["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],"settings":{"foreground":"#d7ba7d"}},{"scope":"invalid","settings":{"foreground":"#f44747"}},{"scope":"markup.underline","settings":{"fontStyle":"underline"}},{"scope":"markup.bold","settings":{"foreground":"#A9B7C6"}},{"scope":"markup.heading","settings":{"foreground":"#A9B7C6"}},{"scope":"markup.italic","settings":{"fontStyle":"italic"}},{"scope":"markup.inserted","settings":{"foreground":"#b5cea8"}},{"scope":"markup.deleted","settings":{"foreground":"#ce9178"}},{"scope":"markup.changed","settings":{"foreground":"#A9B7C6"}},{"scope":"beginning.punctuation.definition.quote.markdown","settings":{"foreground":"#608b4e"}},{"scope":"beginning.punctuation.definition.list.markdown","settings":{"foreground":"#6796e6"}},{"scope":"markup.inline.raw","settings":{"foreground":"#ce9178"}},{"scope":"meta.selector","settings":{"foreground":"#d7ba7d"}},{"name":"brackets of XML/HTML tags","scope":"punctuation.definition.tag","settings":{"foreground":"#FFC66D"}},{"scope":"meta.preprocessor","settings":{"foreground":"#CC7832"}},{"scope":"meta.preprocessor.string","settings":{"foreground":"#ce9178"}},{"scope":"meta.preprocessor.numeric","settings":{"foreground":"#b5cea8"}},{"scope":"meta.structure.dictionary.key.python","settings":{"foreground":"#9876AA"}},{"scope":"meta.diff.header","settings":{"foreground":"#CC7832"}},{"scope":"storage","settings":{"foreground":"#ff0000"}},{"scope":"storage.type","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":["keyword.other.phpdoc.php","keyword.other.type.php","storage.type.class.jsdoc","entity.name.type.instance.jsdoc","variable.other.jsdoc"],"settings":{"foreground":"#808080"}},{"scope":"storage.modifier","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"string","settings":{"foreground":"#6A8759"}},{"scope":"string.tag","settings":{"foreground":"#6A8759"}},{"scope":"string.value","settings":{"foreground":"#6A8759"}},{"scope":"string.regexp","settings":{"foreground":"#6A8759"}},{"name":"JavaScript string interpolation ${}","scope":["punctuation.definition.template-expression.begin.js","punctuation.definition.template-expression.begin.ts","punctuation.definition.template-expression.end.ts","punctuation.definition.template-expression.end.js"],"settings":{"foreground":"#A9B7C6"}},{"scope":["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less"],"settings":{"foreground":"#9876AA"}},{"scope":["variable.other.property","support.variable.property.dom","entity.other.inherited-class"],"settings":{"foreground":"#9876AA"}},{"scope":["variable.other.object","variable.other.object.property","support.class.dom","meta.function-call","entity.name.type.module"],"settings":{"foreground":"#A9B7C6"}},{"scope":["variable.other.readwrite","variable.other.constant.ts","variable.parameter","variable.other.readwrite.alias"],"settings":{"foreground":"#A9B7C6"}},{"scope":"keyword","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"keyword.control","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"keyword.operator","settings":{"foreground":"#A9B7C6"}},{"scope":["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.logical.python"],"settings":{"foreground":"#CC7832"}},{"scope":"keyword.other.unit","settings":{"foreground":"#b5cea8"}},{"scope":["punctuation.section.embedded.begin.metatag.php","punctuation.section.embedded.end.metatag.php"],"settings":{"foreground":"#CC7832"}},{"scope":"support.function.git-rebase","settings":{"foreground":"#9876AA"}},{"scope":"constant.sha.git-rebase","settings":{"foreground":"#b5cea8"}},{"name":"coloring of the Java import and package identifiers","scope":["storage.modifier.import.java","storage.modifier.package.java"],"settings":{"foreground":"#d4d4d4"}},{"name":"this.self","scope":"variable.language","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"name":"Source Python","scope":["source.python"],"settings":{"foreground":"#A9B7C6"}},{"name":"Magic function python","scope":["support.function.magic.python"],"settings":{"foreground":"#9876AA"}},{"name":"Self keyword python","scope":["variable.language.special.self.python","variable.parameter.function.language.special.self.python"],"settings":{"foreground":"#9876AA","fontStyle":""}},{"name":"Function declarations Python","scope":["entity.name.function.python","meta.function-call.generic.python"],"settings":{"foreground":"#FFC66D"}},{"name":"Function declarations","scope":["entity.name.function","support.function","support.constant.handlebars"],"settings":{"foreground":"#FFC66D"}},{"name":"Types declaration and references","scope":["meta.return-type","support.class","support.type","entity.name.type","entity.name.class","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],"settings":{"foreground":"#4EC9B0"}},{"name":"Types declaration and references","scope":["support.class","entity.name.class","support.type","entity.name.type"],"settings":{"foreground":"#FFC66D"}},{"name":"Arrow Function","scope":["storage.type.function.arrow"],"settings":{"foreground":"#A9B7C6"}},{"name":"Types declaration and references, TS grammar specific","scope":["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json"],"settings":{"foreground":"#4EC9B0"}},{"name":"Control flow keywords","scope":"keyword.control","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"name":"Variable and parameter name","scope":["meta.definition.variable.name","support.variable"],"settings":{"foreground":"#A9B7C6"}},{"scope":["variable"],"settings":{"foreground":"#9876AA"}},{"name":"Object keys, TS grammar specific","scope":["meta.object-literal.key","meta.object-literal.key entity.name.function"],"settings":{"foreground":"#9876AA"}},{"name":"CSS property value","scope":["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],"settings":{"foreground":"#CE9178"}},{"scope":"token.info-token","settings":{"foreground":"#6796e6"}},{"scope":"token.warn-token","settings":{"foreground":"#cd9731"}},{"scope":"token.error-token","settings":{"foreground":"#f44747"}},{"scope":"token.debug-token","settings":{"foreground":"#b267e6"}}]}').nG.flatMap((({scope,settings})=>[].concat(scope).flatMap((scope=>scope.split(" "))).map((token=>{const values={token};return Object.keys(settings).forEach((key=>{const value=settings[key];value&&(values[key]=value)})),values})))),StyledEditor=(0,styled.zo)(lib_es.ZP)`
  .monaco-editor {
    .margin-view-overlays .line-numbers {
      text-align: left;
      padding-left: 7px;
    }

    .scrollbar .slider {
      border-radius: 0.25rem;
    }
  }
`,Editor=props=>{const editorTheme=(()=>{const monaco=(0,lib_es.Ik)(),theme=(0,styled_components_browser_esm.Fg)(),[themeName,setThemeName]=(0,react.useState)(theme.dark?"vs-dark":"light");return(0,react.useLayoutEffect)((()=>{if(monaco){const name=`jui-theme-${theme.name.replace(" ","")}`;monaco.editor.defineTheme(name,{base:theme.dark?"vs-dark":"vs",inherit:!0,colors:theme.dark?{"editor.background":"#2B2B2B","editor.lineHighlightBackground":"#323232","editor.lineHighlightBorder":"none","editorLineNumber.foreground":"#606366","editorActiveLineNumber.foreground":"#a4a3a3","editorIndentGuide.background":"#373737","editorIndentGuide.activeBackground":"#505050","editorGutter.background":theme.dark?"#313335":"#f0f0f0"}:{},rules:darculaColorSchemeTokenRules}),setThemeName(name)}}),[monaco,theme]),themeName})();return(0,jsx_runtime.jsx)(StyledEditor,{...props,options:{minimap:{enabled:!1},lineHeight:22,showFoldingControls:"always",renderIndentGuides:!0,overviewRulerBorder:!1,fontFamily:"JetBrains Mono",fontSize:13,scrollbar:{verticalScrollbarSize:14,horizontalScrollbarSize:8,verticalSliderSize:8,horizontalSliderSize:8,horizontal:"auto",vertical:"visible",alwaysConsumeMouseWheel:!1},...props.options},theme:editorTheme})};Editor.displayName="Editor";try{StyledEditor.displayName="StyledEditor",StyledEditor.__docgenInfo={description:"",displayName:"StyledEditor",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/Editor/Editor.tsx#StyledEditor"]={docgenInfo:StyledEditor.__docgenInfo,name:"StyledEditor",path:"../example-app/src/Editor/Editor.tsx#StyledEditor"})}catch(__react_docgen_typescript_loader_error){}try{Editor.displayName="Editor",Editor.__docgenInfo={description:"Monaco Editor styled to look like Intellij Platform's editor.\nTODO:\n - folding controls appearance is different and should be changed\n - highlighting pairs of parens, brackets, etc. is different.\n - context menu look different.\n - selection look different.\n - BUG: height is more than necessary. Needs investigation first.",displayName:"Editor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/Editor/Editor.tsx#Editor"]={docgenInfo:Editor.__docgenInfo,name:"Editor",path:"../example-app/src/Editor/Editor.tsx#Editor"})}catch(__react_docgen_typescript_loader_error){}var sortWith=__webpack_require__("../../node_modules/ramda/es/sortWith.js"),descend=__webpack_require__("../../node_modules/ramda/es/descend.js"),browserfs=__webpack_require__("../../node_modules/browserfs/dist/browserfs.js"),pify=__webpack_require__("../../node_modules/pify/index.js"),pify_default=__webpack_require__.n(pify);async function createIndexedDBFS(storeName="bfs-local-fs"){const idbfs=await createFsBackend((cb=>{browserfs.FileSystem.IndexedDB.Create({storeName},cb)}));return await new Promise((resolve=>idbfs.init(idbfs.store,resolve))),idbfs}function initializeFS(fsBackend){browserfs.initialize(fsBackend);const fsm=browserfs.BFSRequire("fs");return fsm.promises=pify_default()({...fsm,exists:(filePath,cb)=>fsm.exists(filePath,(value=>cb(null,value)))}),fsm}const createFs=backend=>{const fs=new(browserfs.BFSRequire("fs").FS);return fs.initialize(backend),fs};function createFsBackend(fn){return new Promise(((resolve,reject)=>{fn(((err,fs)=>{if(err||!fs)return reject(err);resolve(fs)}))}))}try{createIndexedDBFS.displayName="createIndexedDBFS",createIndexedDBFS.__docgenInfo={description:"",displayName:"createIndexedDBFS",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/fs/browser-fs.tsx#createIndexedDBFS"]={docgenInfo:createIndexedDBFS.__docgenInfo,name:"createIndexedDBFS",path:"../example-app/src/fs/browser-fs.tsx#createIndexedDBFS"})}catch(__react_docgen_typescript_loader_error){}try{initializeFS.displayName="initializeFS",initializeFS.__docgenInfo={description:"",displayName:"initializeFS",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/fs/browser-fs.tsx#initializeFS"]={docgenInfo:initializeFS.__docgenInfo,name:"initializeFS",path:"../example-app/src/fs/browser-fs.tsx#initializeFS"})}catch(__react_docgen_typescript_loader_error){}try{createFs.displayName="createFs",createFs.__docgenInfo={description:"",displayName:"createFs",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/fs/browser-fs.tsx#createFs"]={docgenInfo:createFs.__docgenInfo,name:"createFs",path:"../example-app/src/fs/browser-fs.tsx#createFs"})}catch(__react_docgen_typescript_loader_error){}var esm=__webpack_require__("../../node_modules/caf/dist/esm/index.mjs");const copyFsRecursively=(0,esm.qf)((function*(cancelSignal,params){const{source,target,rootDir,onCopy,force}=params,items=yield source.readdir(rootDir);for(const name of items){const fullPath=path_browserify_default().join(rootDir,name),stat=yield source.stat(fullPath);if(stat.isFile()||stat.isSymbolicLink()){if(!force&&(yield fileExists(target,fullPath)))return;onCopy?.(fullPath);const content=yield source.readFile(fullPath);yield ensureDir(target,path_browserify_default().dirname(fullPath)),yield target.writeFile(fullPath,content)}else stat.isDirectory()?yield copyFsRecursively(cancelSignal,{...params,rootDir:path_browserify_default().join(rootDir,name)}):console.warn("unsupported file system item skipped, when copying:",stat)}})),fileExists=async(fs,filepath)=>await fs.exists(filepath)&&!(await fs.stat(filepath)).isDirectory();async function ensureDir(fs,dirPath){const stat=await fs.stat(dirPath).catch((e=>"ENOENT"!==e.code&&Promise.reject(e)));if(!1===stat){const dirname=path_browserify_default().dirname(dirPath);dirname!==path_browserify_default().dirname(dirname)&&await ensureDir(fs,dirname),await fs.mkdir(dirPath).catch((e=>"EEXIST"===e.code?Promise.resolve():Promise.reject(e)))}else if(!stat.isDirectory())throw new Error(`path is not a directory, but already exists: ${dirPath}`)}const stat=pathname=>fs.promises.stat(pathname).catch((()=>null));let fs;const persistentFsPreference=(key="demo_app_use_persistent_fs",{get:()=>localStorage.getItem(key),set:value=>localStorage.setItem(key,value)});var key;async function switchToPersistentFS({onCopy=console.log,cancelSignal}={}){if(!function isFsInMemory(){return fs.getRootFS()instanceof browserfs.FileSystem.InMemory}())return void console.log("Already on persistent fs. Nothing to do.");console.log("Creating IndexedDB FS"),console.time("creating db");const indexedDbFsBackend=await createIndexedDBFS();await async function copyFs({source,target,cancelSignal,...rest}){await copyFsRecursively(cancelSignal,{...rest,source:pify_default()(source),target:pify_default()(target),rootDir:"/"})}({source:fs,target:await createFs(indexedDbFsBackend),cancelSignal,force:!0,onCopy}),console.timeEnd("creating db"),initializeFS(indexedDbFsBackend),console.log("FS switched to IndexedDB backend",indexedDbFsBackend)}const fsResource=function wrapPromise(promise){let response,status="pending";const suspender=promise.then((res=>{status="success",response=res}),(err=>{status="error",response=err}));return{read:()=>{switch(status){case"pending":throw suspender;case"error":throw response;default:return response}}}}(("yes"===persistentFsPreference.get()?createIndexedDBFS():async function createInMemoryFS(){return await createFsBackend((cb=>{browserfs.FileSystem.InMemory.Create({},cb)}))}()).then(initializeFS).then((theFs=>(window.fs=theFs,fs=theFs))).catch((e=>{throw console.log("could not initialize FS:",e),e}))),WaitForFs=({children})=>(fsResource.read(),children);try{switchToPersistentFS.displayName="switchToPersistentFS",switchToPersistentFS.__docgenInfo={description:"",displayName:"switchToPersistentFS",props:{onCopy:{defaultValue:{value:"console.log"},description:"",name:"onCopy",required:!1,type:{name:"((filepath: string) => void)"}},cancelSignal:{defaultValue:null,description:"",name:"cancelSignal",required:!1,type:{name:"unknown"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/fs/fs.tsx#switchToPersistentFS"]={docgenInfo:switchToPersistentFS.__docgenInfo,name:"switchToPersistentFS",path:"../example-app/src/fs/fs.tsx#switchToPersistentFS"})}catch(__react_docgen_typescript_loader_error){}try{fs.displayName="fs",fs.__docgenInfo={description:"local fs, for when used in browser. Most of the things here would be a noop in node environment.",displayName:"fs",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/fs/fs.tsx#fs"]={docgenInfo:fs.__docgenInfo,name:"fs",path:"../example-app/src/fs/fs.tsx#fs"})}catch(__react_docgen_typescript_loader_error){}try{persistentFsPreference.displayName="persistentFsPreference",persistentFsPreference.__docgenInfo={description:"Global fs preferences for which the file system itself can't be used as storage.",displayName:"persistentFsPreference",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/fs/fs.tsx#persistentFsPreference"]={docgenInfo:persistentFsPreference.__docgenInfo,name:"persistentFsPreference",path:"../example-app/src/fs/fs.tsx#persistentFsPreference"})}catch(__react_docgen_typescript_loader_error){}try{WaitForFs.displayName="WaitForFs",WaitForFs.__docgenInfo={description:"Suspense aware wrapper for waiting for FS to be initialized. initialization API in some fs backends such as\nBrowserFs, is async. That's why it's safe to use this on a high level.",displayName:"WaitForFs",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/fs/fs.tsx#WaitForFs"]={docgenInfo:WaitForFs.__docgenInfo,name:"WaitForFs",path:"../example-app/src/fs/fs.tsx#WaitForFs"})}catch(__react_docgen_typescript_loader_error){}const dirContentState=(0,es.CG)({key:"dirContents",get:path=>async()=>{let fileNames;try{fileNames=await fs.promises.readdir(path)}catch(e){return null}const stats=await Promise.all(fileNames.map((fileName=>{const filePath=`${path}/${fileName}`;return fs.promises.stat(filePath).then((stat=>({...stat,type:stat.isDirectory()?"dir":"file",filePath})))})));return stats.map((stat=>({type:stat.type,name:(0,path_browserify.basename)(stat.filePath),path:stat.filePath,lastModification:stat.mtimeMs,size:stat.size})))}}),reloadFileFromDiskCallback=({reset,refresh})=>async path=>{refresh(readFileContentSelector(path)),reset(fileContentState(path))},readFileContentSelector=(0,es.CG)({key:"readFileContent",get:filepath=>async()=>{if(!filepath)return"";return await fs.promises.exists(filepath)?fs.promises.readFile(filepath,{encoding:"utf8"}):null}}),fileContentState=(0,es.xu)({key:"fileContent",default:readFileContentSelector,effects:filepath=>[({onSet})=>{onSet((async content=>{filepath&&await fs.promises.exists(filepath)&&fs.promises.writeFile(filepath,content??"","utf8").catch((e=>{console.error("failed to sync the file back to the fs",e)}))}))}]});var equals=__webpack_require__("../../node_modules/ramda/es/equals.js");function useLatestRecoilValue(recoilValue){const[state,setState]=(0,react.useState)(null);let loadable=(0,es.$P)(recoilValue);return(0,react.useEffect)((()=>{"hasValue"===loadable.state&&setState(loadable.contents)}),[loadable]),["hasValue"===loadable.state?loadable.getValue():state,loadable.state]}function useExistingLatestRecoilValue(recoilValue){const[state,setState]=(0,react.useState)(null);let loadable=(0,es.$P)(recoilValue);(0,react.useEffect)((()=>{"hasValue"===loadable.state&&setState(loadable.contents)}),[loadable]);const value="hasValue"===loadable.state?loadable.getValue():state;if(null===value)throw loadable.toPromise();return[value,loadable.state]}function useRecoilInitialValue(recoilState,defaultValue){return(0,es._8)((({snapshot})=>()=>snapshot.getLoadable(recoilState).getValue()??defaultValue),[])}const filterPath=({path})=>!path.split("/").includes(".git"),autoClonedRepo_path="/workspace/jui",autoClonedRepo_url="https://github.com/alirezamirian/jui.git",defaultProject={name:"Workspace",path:"/workspace"},currentProjectState=(0,es.cn)({key:"project",default:defaultProject}),projectFilePath=(0,es.CG)({key:"projectFilePath",get:projectRelativePath=>({get})=>path_browserify_default().join(get(currentProjectState).path,projectRelativePath)}),currentProjectFilesState=(0,es.nZ)({key:"project.current.files",get:async({get})=>{const project=get(currentProjectState);return get(projectFilesState(project.path))}}),projectFilesState=(0,es.CG)({key:"project.files",get:projectPath=>async({get})=>{const items=get(dirContentState(projectPath)),files=[],addItem=item=>{if("dir"===item.type){if(filterPath(item)){const childItems=get(dirContentState(item.path));childItems&&childItems.forEach(addItem)}}else files.push({...item,relativePath:path_browserify_default().relative(projectPath,item.path)})};return(items||[]).forEach((item=>addItem(item))),files}}),useRefreshCurrentProjectFiles=()=>(0,es.C)(currentProjectFilesState),activePathsState=(0,es.cn)({key:"project.activePaths",default:[]}),activePathExistsState=(0,es.nZ)({key:"project.activePaths.hasValue",get:({get})=>get(activePathsState).length>0}),useActivePathsProvider=((state,nullValue)=>{let focusedElement=null;return(value,name="unknown")=>{const setValue=(0,es.Zl)(state),elementRef=(0,react.useRef)();return(0,react.useEffect)((()=>{focusedElement===elementRef.current&&setValue((currentValue=>(0,equals.Z)(value,currentValue)?currentValue:value))}),[value]),{onFocus:e=>{elementRef.current=e.currentTarget,focusedElement=e.currentTarget,setValue(value)},onBlur:e=>{e.relatedTarget instanceof Element&&e.relatedTarget?.closest("[data-overlay-container], [role=menu]")||setValue(nullValue)}}}})(activePathsState,[]),projectPopupManagerRefState=(0,es.cn)({key:"project.popupManager",default:(0,react.createRef)(),dangerouslyAllowMutability:!0}),windowManagerRefState=(0,es.cn)({key:"project.windowManager",default:(0,react.createRef)(),dangerouslyAllowMutability:!0}),alertDialogRefState=(0,es.cn)({key:"project.alertDialog",default:(0,react.createRef)(),dangerouslyAllowMutability:!0}),temporaryTabsDefaultValue=(0,es.nZ)({key:"editor.tabs/Default",get:({get})=>(0,sortWith.Z)([(0,descend.Z)((file=>file.path===get(projectFilePath("README.md")))),(0,descend.Z)((file=>file.path.endsWith(".ts"))),(0,descend.Z)((file=>file.path.endsWith(".js")))],get(currentProjectFilesState).filter((item=>"file"===item.type))).filter((file=>!file.path.includes(".idea"))).slice(0,12).map((file=>({filePath:file.path,editorState:{cursorPos:{lineNumber:0,column:0}}})))}),editorTabsState=(0,es.cn)({key:"editor.tabs",default:[],effects:[({getPromise,setSelf,trigger})=>{"get"===trigger&&getPromise(temporaryTabsDefaultValue).then((tabs=>setSelf(tabs)))}]}),activeEditorTabIndexState=(0,es.cn)({key:"editor.activeTabIndex",default:0}),activeEditorTabState=(0,es.nZ)({key:"editor.activeTab",get:({get})=>{const tabs=get(editorTabsState);return tabs[get(activeEditorTabIndexState)]||tabs[0]||null}}),editorCursorPositionState=(0,es.cn)({key:"editor.cursorPosition",default:new editor_main.Ly(0,0)}),editorRefState=(0,es.cn)({key:"editor.focusHandle",default:null}),openPathCallback=({snapshot,set})=>(filePath,shouldFocus=!0)=>{const tabsState=snapshot.getLoadable(editorTabsState).getValue(),index=tabsState.findIndex((tab=>tab.filePath===filePath)),select=index=>{set(activeEditorTabIndexState,index)},focus=()=>{snapshot.getLoadable(editorRefState).valueOrThrow()?.focus()};if(index>-1)select(index);else{const newIndex=tabsState.length;set(editorTabsState,(currentState=>[...currentState,{filePath,editorState:{cursorPos:{lineNumber:0,column:0}}}])),select(newIndex)}shouldFocus&&setTimeout(focus)},closeCallback=({set})=>index=>set(editorTabsState,(tabsState=>tabsState.filter(((_,tabIndex)=>tabIndex!==index)))),closePathCallback=callbackInterface=>filePath=>{const{set,snapshot,transact_UNSTABLE}=callbackInterface,close=closeCallback(callbackInterface),index=snapshot.getLoadable(editorTabsState).getValue().findIndex((tab=>tab.filePath===filePath));index>-1&&transact_UNSTABLE((()=>{close(index),set(activeEditorTabIndexState,Math.max(index-1,0))}))},closeOtherTabsCallback=({set})=>index=>{set(editorTabsState,(tabsState=>tabsState.filter(((_,tabIndex)=>tabIndex===index))))},editor_state_select=({set,snapshot})=>index=>{const numTabs=snapshot.getLoadable(editorTabsState).getValue().length;index>=0&&index<numTabs&&set(activeEditorTabIndexState,index)},editor_state_focus=({snapshot})=>()=>{snapshot.getLoadable(editorRefState).valueOrThrow()?.focus()},editorManagerState=(0,es.nZ)({key:"editor.manager",get:({getCallback})=>({openPath:getCallback(openPathCallback),closeTab:getCallback(closeCallback),closePath:getCallback(closePathCallback),closeOtherTabs:getCallback(closeOtherTabsCallback),select:getCallback(editor_state_select),focus:getCallback(editor_state_focus)})}),useEditorStateManager=()=>(0,es.sJ)(editorManagerState);function convertGitStatus(status){return Array.isArray(status)?1===status[1]?["DELETED","NOT_CHANGED","MODIFIED"][status[2]]:0===status[1]?0===status[3]?"UNKNOWN":"ADDED":"UNKNOWN":"modified"===status||"*modified"===status?"MODIFIED":"deleted"===status||"*deleted"===status?"DELETED":"added"===status?"ADDED":"unmodified"===status?"NOT_CHANGED":"UNKNOWN"}var array_utils=__webpack_require__("./src/utils/array-utils.ts"),recoil_sync_es=__webpack_require__("../../node_modules/recoil-sync/es/index.js");const ensureArray=input=>Array.isArray(input)?input:input?[input]:[];let StorageFiles=function(StorageFiles){return StorageFiles.WORKSPACE_FILE="$WORKSPACE_FILE$",StorageFiles}({});function persistentAtomEffect({componentName,refine,read,update,storageFile=StorageFiles.WORKSPACE_FILE,itemKey=[storageFile,componentName].join("|")}){return(0,recoil_sync_es.ok)({storeKey:"ProjectWorkspace",itemKey,syncDefault:!1,read:async({read:readComponentState})=>read(await readComponentState(itemKey)),write:async({write,read},value)=>{value instanceof es.nY||write(itemKey,update(value))},refine})}persistentAtomEffect.option=({optionName,read,update,...args})=>persistentAtomEffect({...args,itemKey:[args.storageFile,args.componentName,optionName].join("|"),read:settings=>read(ensureArray(settings?.option)?.find((item=>item["@name"]===optionName))),update:value=>currentSettings=>({option:ensureArray(currentSettings?.option).map((option=>{const updates=update(value)(option);return console.log(`updating ${optionName}`,"currentSettings",currentSettings,"updates",updates),option["@name"]===optionName?{"@name":optionName,...updates}:option}))})});var refine_es=__webpack_require__("../../node_modules/@recoiljs/refine/es/index.js");const vcsDirectoryMappingChecker=(0,refine_es.IX)((0,refine_es.Ry)({dir:(0,refine_es.Z_)(),vcs:(0,refine_es.G0)((0,refine_es.i0)("Git"))})),vcsRootsState=(0,es.cn)({key:"vcsRoots",effects:[persistentAtomEffect({storageFile:"vcs.xml",refine:vcsDirectoryMappingChecker,componentName:"VcsDirectoryMappings",read:gitSettings=>{const mappings=ensureArray(gitSettings?.mapping)?.map((item=>({dir:item["@directory"],vcs:item["@vcs"]})));return mappings.length>0?mappings:TMP_findGitRoots()},update:value=>currentValue=>({...currentValue||{},mapping:value.map((({vcs,dir})=>({"@directory":dir,"@vcs":vcs})))})})]}),TMP_findGitRoots=()=>Promise.all(["/workspace/jui","/workspace"].map((async dir=>{if(await fs.promises.exists(dir))return isomorphic_git.ZP.findRoot({fs,filepath:dir}).catch((()=>null))}))).then((roots=>[...new Set(roots.filter(array_utils.N))].map((dir=>({dir,vcs:"Git"}))))),vcsRootForFile=(0,es.CG)({key:"gitRootForFile",get:filepath=>({get})=>(0,isomorphic_git.AY)({fs,filepath}).catch((()=>null))}),fetchRepoStatusFromFs=async repoDir=>{console.time(`statusMatrix ${repoDir}`);const rows=await(0,isomorphic_git.ks)({fs,dir:repoDir});console.timeEnd(`statusMatrix ${repoDir}`);const result={};return rows.forEach((row=>{result[row[0]]=convertGitStatus(row)})),result},repoStatusState=(0,es.xu)({key:"vcs.repoStatus",effects:repoDir=>[({setSelf})=>{setSelf(fetchRepoStatusFromFs(repoDir))}]}),repoStatusUpdatingState=(0,es.cn)({key:"vcs.repoStatus.updating",default:!1}),fileStatusState=(0,es.CG)({key:"vcs.fileStatus",get:filepath=>async({get})=>{const repoRoot=get(vcsRootForFile(filepath));if(repoRoot){const relativePath=path_browserify.relative(repoRoot,filepath),repoStatus=get(repoStatusState(repoRoot));return repoStatus[relativePath]||console.log("file status missing in repo status state, fetching individually",filepath),repoStatus[relativePath]??convertGitStatus(await(async({filepath,...args})=>isomorphic_git.ZP.statusMatrix({...args,filepaths:[filepath]}).then((rows=>rows[0])))({fs,dir:repoRoot,filepath:relativePath}))}return"NOT_CHANGED"}}),refreshFileStatusCallback=({set,snapshot})=>async fullPath=>{const repoRoot=snapshot.getLoadable(vcsRootForFile(fullPath)).getValue();if(repoRoot){const relativePath=path_browserify.relative(repoRoot,fullPath),rows=await isomorphic_git.ZP.statusMatrix({fs,dir:repoRoot,filepaths:[relativePath]});set(repoStatusState(repoRoot),(statusMap=>{const newStatusMap={...statusMap};return 0===rows.length&&delete newStatusMap[relativePath],rows.forEach((row=>{newStatusMap[row[0]]=convertGitStatus(row)})),newStatusMap}))}},useRefreshFileStatus=()=>(0,es._8)(refreshFileStatusCallback),useRefreshRepoStatuses=()=>(0,es._8)((({snapshot,set})=>async()=>{set(repoStatusUpdatingState,!0);try{const gitDirs=await snapshot.getPromise(vcsRootsState);await Promise.all(gitDirs?.map((({dir,vcs})=>fetchRepoStatusFromFs(dir).then((repoStatus=>{set(repoStatusState(dir),repoStatus)})))))}finally{set(repoStatusUpdatingState,!1)}}),[]),useStatusColor=status=>{const theme=(0,styled_components_browser_esm.Fg)();switch(status){case"MODIFIED":return theme.dark?"#6897bb":"#0032a0";case"ADDED":return theme.dark?"#629755":"#0a7700";case"DELETED":return theme.dark?"#6c6c6c":"#616161";case"UNKNOWN":return theme.dark?"#d1675a":"#993300"}},useFileStatusColor=filepath=>{const[fileStatus]=useLatestRecoilValue(fileStatusState(filepath));return useStatusColor(fileStatus??"NOT_CHANGED")},FileStatusColor=({children,filepath})=>{const color=useFileStatusColor(filepath);return(0,jsx_runtime.jsx)("span",{style:{color},children})};FileStatusColor.displayName="FileStatusColor";const StatusColor=({children,status})=>{const color=(0,styled_components_browser_esm.Fg)().currentForegroundAware(useStatusColor(status));return(0,jsx_runtime.jsx)("span",{style:{color},children})};StatusColor.displayName="StatusColor";try{useStatusColor.displayName="useStatusColor",useStatusColor.__docgenInfo={description:"",displayName:"useStatusColor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/FileStatusColor.tsx#useStatusColor"]={docgenInfo:useStatusColor.__docgenInfo,name:"useStatusColor",path:"../example-app/src/VersionControl/FileStatusColor.tsx#useStatusColor"})}catch(__react_docgen_typescript_loader_error){}try{useFileStatusColor.displayName="useFileStatusColor",useFileStatusColor.__docgenInfo={description:"",displayName:"useFileStatusColor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/FileStatusColor.tsx#useFileStatusColor"]={docgenInfo:useFileStatusColor.__docgenInfo,name:"useFileStatusColor",path:"../example-app/src/VersionControl/FileStatusColor.tsx#useFileStatusColor"})}catch(__react_docgen_typescript_loader_error){}try{FileStatusColor.displayName="FileStatusColor",FileStatusColor.__docgenInfo={description:"",displayName:"FileStatusColor",props:{filepath:{defaultValue:null,description:"",name:"filepath",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/FileStatusColor.tsx#FileStatusColor"]={docgenInfo:FileStatusColor.__docgenInfo,name:"FileStatusColor",path:"../example-app/src/VersionControl/FileStatusColor.tsx#FileStatusColor"})}catch(__react_docgen_typescript_loader_error){}try{StatusColor.displayName="StatusColor",StatusColor.__docgenInfo={description:"",displayName:"StatusColor",props:{status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"UNKNOWN"'},{value:'"ADDED"'},{value:'"NOT_CHANGED"'},{value:'"MODIFIED"'},{value:'"DELETED"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/FileStatusColor.tsx#StatusColor"]={docgenInfo:StatusColor.__docgenInfo,name:"StatusColor",path:"../example-app/src/VersionControl/FileStatusColor.tsx#StatusColor"})}catch(__react_docgen_typescript_loader_error){}var mergeProps=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),Link=__webpack_require__("./src/Link/Link.tsx");const _balloonManagerRef={value:null};function notImplemented(){_balloonManagerRef.value?.show({icon:"Warning",title:"Unimplemented action",body:"This action is not implemented yet.",actions:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Link.r,{onPress:notImplemented,children:"Read more..."})})})}try{_balloonManagerRef.displayName="_balloonManagerRef",_balloonManagerRef.__docgenInfo={description:"For ease of use, and to make notImplemented a simple function, not a hook, we set balloon manager in Project.\nIt's intentionally kept in a separate file, to avoid circular dependency caused by many components importing\nProject.tsx\nFIXME(multi-project): this should be scoped to project",displayName:"_balloonManagerRef",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/Project/notImplemented.tsx#_balloonManagerRef"]={docgenInfo:_balloonManagerRef.__docgenInfo,name:"_balloonManagerRef",path:"../example-app/src/Project/notImplemented.tsx#_balloonManagerRef"})}catch(__react_docgen_typescript_loader_error){}var CommonActionIds=__webpack_require__("./src/ActionSystem/CommonActionIds.ts"),ActionShortcut=__webpack_require__("./src/ActionSystem/ActionShortcut.tsx");const StyledContainer=styled.zo.div.attrs({tabIndex:-1})`
  display: flex;
  flex-direction: column;
  height: inherit;
  justify-content: center;
  padding: 0 25%;
  font-size: 1rem;
  outline: none;
`,StyledLine=styled.zo.div`
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
`,StyledShortcut=styled.zo.div`
  color: ${({theme})=>theme.commonColors.linkForegroundEnabled};
`;function EditorZeroState(){return(0,jsx_runtime.jsxs)(StyledContainer,{children:[(0,jsx_runtime.jsx)(ActionTip,{actionId:CommonActionIds.$.GO_TO_FILE}),(0,jsx_runtime.jsx)(ActionTip,{actionId:CommonActionIds.$.GO_TO_ACTION})]})}function ActionTip({actionId}){const getShortcut=(0,ActionShortcut.k)(),action=(0,ActionsProvider.BH)(actionId);return(0,jsx_runtime.jsxs)(StyledLine,{children:[action?.title,(0,jsx_runtime.jsx)(StyledShortcut,{children:getShortcut(actionId)})]})}EditorZeroState.displayName="EditorZeroState",ActionTip.displayName="ActionTip";const editorFullState=(0,es.nZ)({key:"editorState",get:({get})=>{const activeEditorTab=get(activeEditorTabState);return{...activeEditorTab,content:get(fileContentState(activeEditorTab?.filePath))}}}),FileEditor=()=>{const[editorTabs,editorStateManager]=[(0,es.sJ)(editorTabsState),(0,es.sJ)(editorManagerState)],editorRef=(0,react.useRef)(),[active,setActive]=(0,react.useState)(!1),hideAllAction=(0,ActionsProvider.BH)(ToolWindowActionIds.xm),setCursorPositionState=(0,es.Zl)(editorCursorPositionState),[{content,filePath},loadingState]=useExistingLatestRecoilValue(editorFullState),tabActionsRef=(0,useLatest.d)({closePath:editorStateManager.closePath,closeOthersTabs:editorStateManager.closeOtherTabs}),setEditorRef=(0,es.Zl)(editorRefState),setContent=(0,es.Zl)(fileContentState(filePath)),updateFileStatus=useRefreshFileStatus(),activePathsProviderProps=useActivePathsProvider(filePath?[filePath]:[]);return(0,jsx_runtime.jsxs)(StyledFileEditorContainer,{...(0,mergeProps.d)(activePathsProviderProps,{onFocus:()=>{setActive(!0),setEditorRef({focus:()=>editorRef.current?.focus()})}}),children:[editorTabs.length>0?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ContextMenuContainer.X,{renderMenu:()=>(0,jsx_runtime.jsxs)(Menu.v2,{onAction:notImplemented,children:[(0,jsx_runtime.jsx)(Item.c,{children:"Close"},"close"),(0,jsx_runtime.jsx)(Item.c,{children:"Close Other tabs"},"closeOthers"),(0,jsx_runtime.jsx)(Item.c,{children:"Close all tabs"},"closeAll"),(0,jsx_runtime.jsx)(Item.c,{children:"Close tabs to the left"},"closeLeft"),(0,jsx_runtime.jsx)(Item.c,{children:"Close tabs to the right"},"closeRight")]}),children:(0,jsx_runtime.jsx)(EditorTabs.s,{items:editorTabs,active,selectedKey:filePath,onSelectionChange:key=>{editorStateManager.select(editorTabs.findIndex((tab=>tab.filePath===key)))},noBorders:!0,children:tab=>{const filename=path_browserify.basename(tab.filePath),icon=(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:getIconForFile(tab.filePath)});return(0,jsx_runtime.jsx)(TabItem.E,{textValue:filename,inOverflowMenu:(0,jsx_runtime.jsx)(MenuItemLayout._,{content:filename,icon}),children:(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:tab.filePath}),children:(0,jsx_runtime.jsx)(EditorTabContent.X,{icon,title:(0,jsx_runtime.jsx)(FileStatusColor,{filepath:tab.filePath,children:filename}),closeButton:(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Close. Alt-Click to Close Others"}),children:(0,jsx_runtime.jsx)(TabCloseButton.W,{onPress:e=>{e.altKey?tabActionsRef.current.closeOthersTabs(editorTabs.indexOf(tab)):tabActionsRef.current.closePath(tab.filePath)}})}),containerProps:{onDoubleClick:()=>{hideAllAction?.perform()}}})})},tab.filePath)}})}),"string"==typeof content?(0,jsx_runtime.jsx)(Editor,{height:"100%",path:filePath,onMount:(monacoEditor,monaco)=>{monacoEditor.focus(),function enableJsx(monaco){monaco.languages.typescript.typescriptDefaults.setCompilerOptions({jsx:editor_main.Mj.typescript.JsxEmit.React}),monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1})}(monaco),editorRef.current=monacoEditor,monacoEditor.onDidChangeCursorPosition((e=>{setCursorPositionState(e.position)})),monacoEditor.onDidChangeModel((()=>{}))},onChange:(newContent="")=>{setActive(!1),setContent(newContent),filePath&&updateFileStatus(filePath).catch((e=>{console.error("Could not update file status",e)}))},value:content??""}):content&&"UNSUPPORTED CONTENT"]}):(0,jsx_runtime.jsx)(EditorZeroState,{}),"loading"===loadingState&&(0,jsx_runtime.jsx)(FileEditorLoading,{})]})};FileEditor.displayName="FileEditor";const StyledFileEditorContainer=styled.zo.div`
  position: relative;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: ${({theme})=>theme.color("Editor.background",theme.isUnderDarcula()?"rgb(40,40,40)":theme.commonColors.panelBackground)};
`,FileEditorLoading=(0,styled.zo)(LoadingGif)`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`;try{FileEditor.displayName="FileEditor",FileEditor.__docgenInfo={description:"Used as main content in the main ToolWindows. Shows currently opened files tabs and the editor.\n\nTODO: preserve editor state when switching between tabs\nTODO: support multiple editors in split view.",displayName:"FileEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/Editor/FileEditor.tsx#FileEditor"]={docgenInfo:FileEditor.__docgenInfo,name:"FileEditor",path:"../example-app/src/Editor/FileEditor.tsx#FileEditor"})}catch(__react_docgen_typescript_loader_error){}var ToolWindowsState=__webpack_require__("./src/ToolWindows/ToolWindowsState/ToolWindowsState.ts"),DefaultToolWindow=__webpack_require__("./src/ToolWindowsImpl/DefaultToolWindow.tsx"),bundle=__webpack_require__("../../node_modules/xterm-for-react/dist/bundle.js");const StyledXterm=(0,styled_components_browser_esm.ZP)(bundle.O).withConfig({displayName:"Terminal__StyledXterm",componentId:"sc-19jke66-0"})(["height:100%;background:rgb(43,43,43);"]),Terminal=()=>{const[input,setInput]=(0,react.useState)(""),xtermRef=(0,react.useRef)(null),options=(0,react.useMemo)((()=>({theme:{background:"rgb(43,43,43)",selection:"#214283"},fontFamily:"sans-serif",letterSpacing:-8,fontSize:12,lineHeight:1.3,cursorStyle:"block",cursorBlink:!0,cursorWidth:8,rendererType:"dom"})),[]);return(0,react.useEffect)((()=>{setTimeout((()=>{xtermRef.current?.terminal.resize(80,10),xtermRef.current?.terminal.write("$ ")}),3e3)}),[]),(0,jsx_runtime.jsx)(StyledXterm,{ref:xtermRef,options,onData:data=>{const code=data.charCodeAt(0);if(13===code)input.length>0&&xtermRef.current?.terminal.write("\r\nYou typed: '"+input+"'"),xtermRef.current?.terminal.write("\r\n$ "),setInput("");else{if(code<32||127===code)return;xtermRef.current?.terminal.write(data),setInput(input+data)}}})};Terminal.displayName="Terminal";var useTreeActions=__webpack_require__("./src/TreeActions/useTreeActions.tsx"),ActionButton=__webpack_require__("./src/ActionSystem/components/ActionButton.tsx");const foldersOnTopState=(0,es.cn)({key:"projectView.foldersOnTop",default:!0}),expandedKeysState=(0,es.cn)({key:"projectView.expandedKeys",default:(0,es.nZ)({key:"projectView.expandedKeys/default",get:({get})=>new Set(get(vcsRootsState).flatMap((({dir})=>getParentPaths(dir).concat(dir))).concat(get(currentProjectState).path))})}),selectionState=(0,es.cn)({key:"projectView.selection",default:new Set([])}),selectedNodesState=(0,es.nZ)({key:"projectView.selectedKeys",get:({get})=>{const selection=get(selectionState),nodesByKey=get(currentProjectTreeState).byKey;return[..."all"===selection?nodesByKey.keys():selection].map((key=>nodesByKey.get(`${key}`))).filter(array_utils.N)}}),projectViewTreeRefState=(0,es.cn)({key:"projectView.focusHandle",default:react.createRef(),dangerouslyAllowMutability:!0}),currentProjectTreeState=(0,es.nZ)({key:"projectTree",get:({get})=>async function createProjectTree(project,get){const rootItems=get(dirContentState(project.path)),byKey=new Map,mapItem=parent=>async item=>{const node={...item,parent};if("dir"===item.type){if(filterPath(item)){const dirNode={...node,children:[]};return dirNode.children=(await Promise.all((get(dirContentState(item.path))??[]).map(mapItem(dirNode)))).filter(array_utils.N),sortProjectTreeNodes(dirNode.children),byKey.set(dirNode.path,dirNode),dirNode}return null}return byKey.set(node.path,node),node},children=(await Promise.all((rootItems||[]).map(mapItem(null)))).filter(array_utils.N);sortProjectTreeNodes(children);const root={type:"project",path:project.path,name:project.name,parent:null,children};return byKey.set(root.path,root),{root,byKey}}(get(currentProjectState),get)});(0,es.cn)({key:"project.tree.sort",default:"name"});function sortProjectTreeNodes(items){items.sort(((item1,item2)=>item1.name<item2.name?-1:item1.name>item2.name?1:0))}const expandToPathCallback=({snapshot,set})=>path=>{const expandedKeys=snapshot.getLoadable(expandedKeysState).valueOrThrow(),keysToExpand=[snapshot.getLoadable(currentProjectState).valueOrThrow().path].concat(getParentPaths(path));set(expandedKeysState,new Set([...expandedKeys,...keysToExpand]))},selectKeyAndFocusCallback=({snapshot})=>key=>{const treeRef=snapshot.getLoadable(projectViewTreeRefState).valueOrThrow()?.current;treeRef?.replaceSelection(key),treeRef?.focus(key)},useSelectPathInProjectView=()=>{const expandToOpenedFile=(0,es._8)(expandToPathCallback,[]),selectKeyAndFocus=(0,es._8)(selectKeyAndFocusCallback,[]);return path=>{expandToOpenedFile(path),selectKeyAndFocus(path)}};var SpeedSearchTree=__webpack_require__("./src/Tree/SpeedSearchTree/SpeedSearchTree.tsx"),ItemLayout=__webpack_require__("./src/Collections/ItemLayout.tsx"),HighlightedTextValue=__webpack_require__("./src/CollectionSpeedSearch/HighlightedTextValue.tsx"),ItemStateContext=__webpack_require__("./src/Collections/ItemStateContext.tsx"),sortBy=__webpack_require__("../../node_modules/ramda/es/sortBy.js"),identity=__webpack_require__("../../node_modules/ramda/es/identity.js"),ActionsMenu=__webpack_require__("./src/ActionSystem/components/ActionsMenu.tsx"),Divider=__webpack_require__("./src/Collections/Divider.ts");const projectActionIds={NewElement:"NewElement",NewFile:"NewFile",NewDir:"NewDir",CopyReferencePopupGroup:"CopyReferencePopupGroup",CopyPaths:"CopyPaths",CopyFileReference:"CopyFileReference",CopyAbsolutePath:"CopyAbsolutePath",CopySourceRootPath:"CopySourceRootPath",CopyFileName:"CopyFileName"};function ProjectViewContextMenu({getActionContext}){return(0,jsx_runtime.jsx)(ActionsMenu.C,{"aria-label":"Project Tree actions",actionContext:getActionContext,actions:[{...(0,ActionsProvider.BH)(projectActionIds.NewElement),title:"New",shortcut:void 0},new Divider.P,(0,ActionsProvider.BH)(CommonActionIds.$.CUT),(0,ActionsProvider.BH)(CommonActionIds.$.COPY),(0,ActionsProvider.BH)(projectActionIds.CopyReferencePopupGroup),(0,ActionsProvider.BH)(CommonActionIds.$.PASTE),new Divider.P,(0,ActionsProvider.BH)(CommonActionIds.$.DELETE),new Divider.P].filter(array_utils.N)})}ProjectViewContextMenu.displayName="ProjectViewContextMenu";try{ProjectViewContextMenu.displayName="ProjectViewContextMenu",ProjectViewContextMenu.__docgenInfo={description:"",displayName:"ProjectViewContextMenu",props:{getActionContext:{defaultValue:null,description:"",name:"getActionContext",required:!0,type:{name:"() => ActionContext"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/ProjectView/ProjectViewContextMenu.tsx#ProjectViewContextMenu"]={docgenInfo:ProjectViewContextMenu.__docgenInfo,name:"ProjectViewContextMenu",path:"../example-app/src/ProjectView/ProjectViewContextMenu.tsx#ProjectViewContextMenu"})}catch(__react_docgen_typescript_loader_error){}const ProjectViewPane=()=>{const project=(0,es.sJ)(currentProjectState),editor=useEditorStateManager(),treeRef=(0,react.useRef)(null),setProjectViewTreeRef=(0,es.Zl)(projectViewTreeRefState);(0,react.useLayoutEffect)((()=>{setProjectViewTreeRef(treeRef)}),[treeRef]);const[treeState]=useLatestRecoilValue(currentProjectTreeState),[expandedKeys,setExpandedKeys]=(0,es.FV)(expandedKeysState),[selectedKeys,setSelectedKeys]=(0,es.FV)(selectionState),sortItems=(0,es.sJ)(foldersOnTopState)?(0,sortBy.Z)((a=>"dir"===a.type?1:2)):identity.Z,selectedKeysArray="all"===selectedKeys?[]:[...selectedKeys].filter((i=>"string"==typeof i)),activePathsProviderProps=useActivePathsProvider(selectedKeysArray),containerRef=(0,react.useRef)(null),contextMenuTargetKey=(0,react.useRef)(),getActionContext=()=>({element:containerRef.current?.querySelector(`[data-key="${contextMenuTargetKey.current}"]`)??null,event:null});return(0,jsx_runtime.jsx)(DefaultSuspense,{children:treeState?.root&&(0,jsx_runtime.jsx)(ContextMenuContainer.X,{ref:containerRef,style:{height:"100%"},onOpen:({target})=>contextMenuTargetKey.current=target?.closest("[data-key]")?.dataset.key,renderMenu:()=>(0,jsx_runtime.jsx)(ProjectViewContextMenu,{getActionContext}),children:(0,jsx_runtime.jsx)(SpeedSearchTree.b,{"aria-label":"Project structure tree",treeRef,...activePathsProviderProps,items:[treeState.root],onAction:path=>{editor.openPath(`${path}`)},fillAvailableSpace:!0,autoFocus:!0,selectionMode:"multiple",selectedKeys,onSelectionChange:setSelectedKeys,expandedKeys,onExpandedChange:setExpandedKeys,children:item=>(0,jsx_runtime.jsx)(Item.c,{textValue:item.name,childItems:"children"in item?sortItems(item.children):void 0,children:(0,jsx_runtime.jsxs)(ItemLayout.e,{children:[(0,jsx_runtime.jsx)(ProjectViewNodeIcon,{node:item}),"project"===item.type?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("b",{children:(0,jsx_runtime.jsx)(HighlightedTextValue.J,{})}),(0,jsx_runtime.jsx)(ItemLayout.e.Hint,{children:project.path})]}):(0,jsx_runtime.jsx)(FileTreeNodeText,{node:item})]})},item.path)})})})};ProjectViewPane.displayName="ProjectViewPane";const FileTreeNodeText=({node})=>"dir"===node.type?(0,jsx_runtime.jsx)(FileTreeDirNodeText,{node}):(0,jsx_runtime.jsx)(FileTreeFileNodeText,{node}),FileTreeDirNodeText=({})=>(0,jsx_runtime.jsx)(HighlightedTextValue.J,{});FileTreeDirNodeText.displayName="FileTreeDirNodeText";const FileTreeFileNodeText=({node})=>{const state=(0,react.useContext)(ItemStateContext.k);return state?.isSelected&&state?.isContainerFocused?(0,jsx_runtime.jsx)(HighlightedTextValue.J,{}):(0,jsx_runtime.jsx)(FileStatusColor,{filepath:node.path,children:(0,jsx_runtime.jsx)(HighlightedTextValue.J,{})})},nodeTypeIconMap={project:"nodes/folder",dir:"nodes/folder",file:"fileTypes/text"};function ProjectViewNodeIcon({node}){const icon=function findNodeIcon(value){return"file"===value.type?getIconForFile(value.name):nodeTypeIconMap[value.type]??null}(node);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:icon&&(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon})})}var WindowLayout=__webpack_require__("./src/ModalWindow/WindowLayout.tsx"),Checkbox=__webpack_require__("./src/Checkbox/Checkbox.tsx"),HelpTooltip=__webpack_require__("./src/Tooltip/HelpTooltip.tsx");function HelpButton({tooltip="Show help contents",...props}){return(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(HelpTooltip.k,{helpText:tooltip}),children:(0,jsx_runtime.jsx)(Button.z,{variant:"icon","aria-label":"Help","aria-description":"Show help contents",...props,children:(0,jsx_runtime.jsx)("span",{style:{fontSize:18},children:"?"})})})}HelpButton.displayName="HelpButton";try{HelpButton.displayName="HelpButton",HelpButton.__docgenInfo={description:"",displayName:"HelpButton",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},form:{defaultValue:null,description:"",name:"form",required:!1,type:{name:"string"}},preventFocusOnPress:{defaultValue:null,description:"",name:"preventFocusOnPress",required:!1,type:{name:"boolean"}},onPress:{defaultValue:null,description:"Called when the button is pressed, or triggered via mnemonic. If mnemonic is used, there won't be any event\npassed to onPress callback.",name:"onPress",required:!1,type:{name:"((e?: PressEvent) => void)"}},mnemonic:{defaultValue:null,description:"A character to be used as {@link https://jetbrains.design/intellij/principles/mnemonics/ mnemonic} for the button\nIt will be shown as underlined in button text, when mnemonic is activated (by pressing Alt)\nNote: if you use mnemonic, and the direct child of the button is not a string, you should use `MnemonicText`\nto render the button text, to have the underlining behavior.",name:"mnemonic",required:!1,type:{name:"string"}},tooltip:{defaultValue:{value:"Show help contents"},description:"",name:"tooltip",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/HelpButton.tsx#HelpButton"]={docgenInfo:HelpButton.__docgenInfo,name:"HelpButton",path:"../example-app/src/HelpButton.tsx#HelpButton"})}catch(__react_docgen_typescript_loader_error){}function findRootPaths(objects,getPath=identity.Z){return objects.filter((obj=>{const thePath=getPath(obj);return!objects.find((anObject=>anObject!==obj&&function isParentPath(parent,dir){return dir.startsWith(parent+path_browserify_default().sep)}(getPath(anObject),thePath)))}))}const deleteFileCallback=callbackInterface=>async filepath=>{const{refresh,reset,snapshot}=callbackInterface,refreshFileStatus=refreshFileStatusCallback(callbackInterface),releaseSnapshot=snapshot.retain();try{try{await fs.promises.unlink(filepath);const repoDir=await snapshot.getPromise(vcsRootForFile(filepath));repoDir&&(await isomorphic_git.ZP.remove({fs,dir:repoDir,filepath:path_browserify_default().relative(repoDir,filepath)}),await refreshFileStatus(filepath))}catch(e){console.error(`error in deleting file ${filepath}`,e)}finally{(await snapshot.getPromise(editorManagerState)).closePath(filepath),refresh(dirContentState(path_browserify_default().dirname(filepath))),reset(fileContentState(filepath))}}finally{releaseSnapshot()}},deleteFilesCallback=callbackInterface=>async filePaths=>{const deleteFile=deleteFileCallback(callbackInterface);return Promise.all(filePaths.map(deleteFile))},deleteDirCallback=callbackInterface=>async dir=>{const{refresh,reset,snapshot}=callbackInterface,deleteFile=deleteFileCallback(callbackInterface),releaseSnapshot=snapshot.retain(),recursivelyDeleteDir=async dirname=>{const pathnames=await fs.promises.readdir(dirname);await Promise.all(pathnames.map((async pathname=>{const fullpath=path_browserify_default().resolve(dirname,pathname),stat=await fs.promises.stat(fullpath);stat.isFile()?await deleteFile(fullpath):stat.isDirectory()&&await recursivelyDeleteDir(fullpath)}))),await fs.promises.rmdir(dirname),refresh(dirContentState(dir))};try{try{await recursivelyDeleteDir(dir)}catch(e){console.error(`error in deleting directory ${dir}`,e)}finally{refresh(dirContentState(path_browserify_default().dirname(dir)))}}finally{releaseSnapshot()}},createDirectoryCallback=callbackInterface=>async(destination,dirPath)=>{const{snapshot,refresh,reset}=callbackInterface,releaseSnapshot=snapshot.retain(),fullpath=path_browserify_default().join(destination,dirPath);try{if(await fs.promises.exists(fullpath))throw new Error(`File ${fullpath} already exists`);await ensureDir(fs.promises,fullpath),refresh(dirContentState(destination))}finally{releaseSnapshot()}};var core=__webpack_require__("../../node_modules/intl-messageformat/lib/src/core.js");const fileCountMsg=new core.C("{count, plural,\n    =1 {1 file}\n    other {# files}\n  }","en-US"),dirCountMsg=new core.C("{count, plural,\n    =1 {1 directory}\n    other {# directories}\n  }","en-US"),deleteActionState=(0,es.nZ)({key:`action.${CommonActionIds.$.DELETE}`,get:({get,getCallback})=>({id:CommonActionIds.$.DELETE,title:"Delete",description:"Delete selected item",isDisabled:!get(activePathExistsState),actionPerformed:getCallback((({snapshot})=>async()=>{const deleteDir=getCallback(deleteDirCallback),deleteFiles=getCallback(deleteFilesCallback),selectedNodes=snapshot.getLoadable(selectedNodesState).getValue(),windowManager=snapshot.getLoadable(windowManagerRefState).getValue().current,alertDialog=snapshot.getLoadable(alertDialogRefState).getValue().current;if(0===selectedNodes.length)return;const nodesToDelete=findRootPaths(selectedNodes,(node=>node.path)),filePaths=nodesToDelete.filter((node=>"file"===node.type)).map((node=>node.path)),directories=nodesToDelete.filter((node=>"project"===node.type||"dir"===node.type)).map((node=>node.path));if(directories.length>0){const singleDirName=1===directories.length&&0===filePaths.length?path_browserify_default().basename(directories[0]):null;await(alertDialog?.confirm({title:"Delete",okText:"Delete",message:(0,jsx_runtime.jsxs)("div",{style:{width:354},children:["Delete"," ",singleDirName?`"${singleDirName}"`:[{count:directories.length,message:dirCountMsg},{count:filePaths.length,message:fileCountMsg}].filter((({count})=>count>0)).map((({message,count})=>message.format({count}))).join(" and "),"?",(0,jsx_runtime.jsx)("br",{}),"All files and subdirectories in",singleDirName?` "${singleDirName}" `:" the selected directories ","will be deleted. ",(0,jsx_runtime.jsx)("br",{}),"You might not be able to fully undo this operation!"]})}))&&(directories.forEach((pathname=>deleteDir(pathname))),deleteFiles(filePaths))}else windowManager?.open((({close})=>(0,jsx_runtime.jsx)(DeleteFilesConfirmationDialog,{filePaths,close}))).then((confirmed=>{confirmed&&requestAnimationFrame((()=>{deleteFiles(filePaths)}))}))}))})});function DeleteFilesConfirmationDialog({close,filePaths}){return(0,jsx_runtime.jsx)(ModalWindow.Du,{minWidth:"content",minHeight:"content",children:(0,jsx_runtime.jsx)(WindowLayout.b,{header:"Delete",content:(0,jsx_runtime.jsxs)("form",{id:"delete_dialog_form",onSubmit:e=>{e.preventDefault()},style:{padding:"0.75rem 1rem"},children:[(0,jsx_runtime.jsxs)("div",{style:{marginBottom:".5rem"},children:[1===filePaths.length?`Delete file "${path_browserify_default().basename(filePaths[0])}"`:`Delete ${filePaths.length} files`,"?"]}),(0,jsx_runtime.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[(0,jsx_runtime.jsx)(Checkbox.X,{isDisabled:!0,children:"Safe delete (with usage search)"}),(0,jsx_runtime.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,jsx_runtime.jsx)(Checkbox.X,{isDisabled:!0,children:"Search in comments and strings"}),(0,jsx_runtime.jsx)(Checkbox.X,{isDisabled:!0,children:"Search for text occurrences"})]})]})]}),footer:(0,jsx_runtime.jsx)(WindowLayout.b.Footer,{left:(0,jsx_runtime.jsx)(HelpButton,{onPress:()=>notImplemented()}),right:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.z,{onPress:()=>close(),children:"Cancel"}),(0,jsx_runtime.jsx)(Button.z,{autoFocus:!0,type:"submit",form:"delete_dialog_form",variant:"default",onPress:()=>{close(!0)},children:"Ok"})]})})})})}DeleteFilesConfirmationDialog.displayName="DeleteFilesConfirmationDialog";const copyActionState=(0,es.nZ)({key:`action.${CommonActionIds.$.COPY}`,get:({get,getCallback})=>({id:CommonActionIds.$.COPY,title:"Copy",description:"Copy to clipboard",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/copy"}),isDisabled:!get(activePathExistsState),actionPerformed:getCallback((({snapshot})=>async()=>{notImplemented()}))})}),cutActionState=(0,es.nZ)({key:`action.${CommonActionIds.$.CUT}`,get:({get,getCallback})=>({id:CommonActionIds.$.CUT,title:"Cut",description:"Cut to clipboard",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/menu-cut"}),isDisabled:!get(activePathExistsState),actionPerformed:getCallback((({snapshot})=>async()=>{notImplemented()}))})}),pasteActionState=(0,es.nZ)({key:`action.${CommonActionIds.$.PASTE}`,get:({get,getCallback})=>({id:CommonActionIds.$.PASTE,title:"Paste",description:"Paste from clipboard",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/menu-paste"}),isDisabled:!get(activePathExistsState),actionPerformed:getCallback((({snapshot})=>async()=>{notImplemented()}))})}),{SELECT_IN_PROJECT_VIEW}={SELECT_IN_PROJECT_VIEW:"SelectInProjectView"};function ProjectToolWindow(){const treeRef=(0,es.sJ)(projectViewTreeRefState),actions=(0,useTreeActions.x)({treeRef}),projectViewActions=function useProjectViewActions(){const activeTab=(0,es.sJ)(activeEditorTabState),selectPathInProjectView=useSelectPathInProjectView(),selectOpenedFile=()=>{activeTab&&selectPathInProjectView(activeTab.filePath)};return[{id:SELECT_IN_PROJECT_VIEW,title:"Select Opened File",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/locate"}),actionPerformed:selectOpenedFile,isDisabled:!activeTab,description:"Selects a context file in the Project View"},(0,es.sJ)(deleteActionState),(0,es.sJ)(cutActionState),(0,es.sJ)(copyActionState),(0,es.sJ)(pasteActionState)].filter(array_utils.N)}();return(0,jsx_runtime.jsx)(DefaultToolWindow.n,{headerContent:"Project",actions:[...actions,...projectViewActions],additionalActions:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ActionButton.K,{actionId:SELECT_IN_PROJECT_VIEW}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:CommonActionIds.$.EXPAND_ALL}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:CommonActionIds.$.COLLAPSE_ALL})]}),children:(0,jsx_runtime.jsx)(ProjectViewPane,{})})}ProjectToolWindow.displayName="ProjectToolWindow";var MultiViewToolWindow=__webpack_require__("./src/ToolWindowsImpl/MultiViewToolWindow.tsx"),ToolWindowStateProvider=__webpack_require__("./src/ToolWindows/ToolWindowsState/ToolWindowStateProvider.tsx"),utils=__webpack_require__("./src/ToolWindows/utils.ts"),ThreeViewSplitter=__webpack_require__("./src/ThreeViewSplitter/ThreeViewSplitter.tsx");const DEFAULT_LOADING_DELAY_MS=500;function Delayed({children}){const[waitedEnough,setWaitedEnough]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{const timer=setTimeout((()=>{setWaitedEnough(!0)}),DEFAULT_LOADING_DELAY_MS);return()=>clearTimeout(timer)}),[]),waitedEnough?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children}):null}try{Delayed.displayName="Delayed",Delayed.__docgenInfo={description:"",displayName:"Delayed",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/Delayed.tsx#Delayed"]={docgenInfo:Delayed.__docgenInfo,name:"Delayed",path:"../example-app/src/Delayed.tsx#Delayed"})}catch(__react_docgen_typescript_loader_error){}var groupBy=__webpack_require__("../../node_modules/ramda/es/groupBy.js");const Tagged=change=>change;function Change(before,after){return after?before?before.path!==after.path?(0,path_browserify.dirname)(before.path)===(0,path_browserify.dirname)(after.path)?Tagged({type:"RENAMED",before,after}):Tagged({type:"MOVED",before,after}):Tagged({type:"MODIFIED",before,after}):Tagged({type:"ADDED",after}):Tagged({type:"DELETED",before})}Change.Unversioned=revision=>Tagged({type:"UNVERSIONED",after:revision});const changeToFileStatus={ADDED:"ADDED",DELETED:"DELETED",MOVED:"MODIFIED",RENAMED:"MODIFIED",MODIFIED:"MODIFIED",UNVERSIONED:"UNKNOWN"};function revisionEquals(a,b){return a?.path===b?.path&&a.isDir===b.isDir}Change.fileStatus=function(change){return changeToFileStatus[change.type]??"NOT_CHANGED"},Change.path=function(change){return Change.revision(change).path},Change.content=function(change){return"after"in change?change.after.content():"before"in change?change.before.content():Promise.resolve("")},Change.isAddition=function(change){return"ADDED"===change.type},Change.isDeletion=function(change){return"DELETED"===change.type},Change.isRename=function(change){return"RENAMED"===change.type},Change.isMove=function(change){return"MOVED"===change.type},Change.isModified=function(change){return"MODIFIED"===change.type},Change.isUnversioned=function(change){return"UNVERSIONED"===change.type},Change.revision=function(change){return"after"in change?change.after:change.before},Change.equals=function(a,b){const sameBefore="before"in a&&"before"in b?revisionEquals(a.before,b.before):"before"in a=="before"in b,sameAfter="after"in a&&"after"in b?revisionEquals(a.after,b.after):"after"in a=="after"in b;return sameBefore&&sameAfter};const repoChangesState=(0,es.CG)({key:"vcs.repoChanges",get:repoDir=>({get})=>Object.entries(get(repoStatusState(repoDir))).map((([filename,status])=>{const revision={path:path_browserify_default().join(repoDir,filename),isDir:!1,content(){throw new Error("Not implemented")}};return"ADDED"===status?Change(null,revision):"MODIFIED"===status?Change(revision,revision):"DELETED"===status?Change(revision,null):"UNKNOWN"===status?Change.Unversioned(revision):null})).filter(array_utils.N)}),allChangesState=(0,es.nZ)({key:"vcs.allChanges",get:({get})=>get(vcsRootsState).map((({dir})=>get(repoChangesState(dir)))).flat()}),changeListsState=(0,es.cn)({key:"changelists.lists",default:[{id:"some-UUID",name:"Changes",comment:"last modified commit message",changes:[],active:!0},{id:"some-other-UUID",name:"Some other changelist",comment:"Some empty changelist for testing",changes:[],active:!1}]}),activeChangeListState=(0,es.nZ)({key:"changelists.lists/default",get:({get})=>get(changeListsState).find((changeList=>changeList.active))??null}),unversionedChangesState=(0,es.nZ)({key:"changelists.lists/unversioned",get:({get})=>get(allChangesState).filter(Change.isUnversioned)});function SyncChangeListsState(){const changes=(0,es.sJ)(allChangesState),setChangeLists=(0,es.Zl)(changeListsState);return(0,react.useEffect)((()=>{setChangeLists((changeLists=>{const trackedChanges=changes.filter((change=>!Change.isUnversioned(change))),updatedChangeLists=changeLists.map((changeList=>({...changeList,changes:changeList.changes.map((change=>trackedChanges.find((aChange=>Change.equals(aChange,change))))).filter(array_utils.N)}))),existingChanges=updatedChangeLists.flatMap((({changes})=>changes)),newChanges=trackedChanges.filter((change=>!existingChanges.find((anExistingChange=>Change.equals(change,anExistingChange)))));return(updatedChangeLists.find((({active})=>active))??updatedChangeLists[0]).changes.push(...newChanges),updatedChangeLists}))}),[changes]),null}var uniq=__webpack_require__("../../node_modules/ramda/es/uniq.js");const createGroupByDirectory=({getPath,mapNode=identity.Z,createDirectoryNode=i=>i,shouldCollapseDirectories=!1})=>nodes=>{const pathToNodeCache={},rootDirNodes=nodes.map(mapNode).map((node=>{const filepath=getPath(node);return getParentPaths(filepath.startsWith("/")?filepath:`/${filepath}`).reduce(((prevNode,dirPath)=>{pathToNodeCache[dirPath]||(pathToNodeCache[dirPath]=createDirectoryNode({type:"directory",dirPath,parentNodePath:"",children:[]})),isDirectoryNode(prevNode)&&(prevNode.parentNodePath=dirPath);const dirNode=pathToNodeCache[dirPath];return dirNode.children=dirNode.children.includes(prevNode)?dirNode.children:[prevNode,...dirNode.children],dirNode}),node)})),directoryNodes=(0,uniq.Z)(rootDirNodes);return shouldCollapseDirectories?directoryNodes.map((node=>collapseDirectories(createDirectoryNode,node))):directoryNodes};function isDirectoryNode(node){return"type"in node&&"directory"===node.type}function collapseDirectories(createDirectorNode,dirNode){let{children,dirPath,parentNodePath}=dirNode;return 1===dirNode.children.length&&isDirectoryNode(dirNode.children[0])?(dirPath=dirNode.children[0].dirPath,children=dirNode.children[0].children.map((child=>isDirectoryNode(child)?collapseDirectories(createDirectorNode,{...child,parentNodePath:dirPath}):child)),collapseDirectories(createDirectorNode,createDirectorNode({type:"directory",dirPath,parentNodePath,children}))):{...dirNode,children:children.map((child=>isDirectoryNode(child)?collapseDirectories(createDirectorNode,child):child))}}const changesTreeNodeKey=(type,id)=>`${type}_${id}`,getNodeKeyForChange=change=>changesTreeNodeKey("change",Change.path(change)),changeNode=(change,showPath=!0)=>({type:"change",key:getNodeKeyForChange(change),change,showPath}),isGroupNode=node=>"children"in node,isChangeNode=node=>"change"===node.type,getChildren=node=>isGroupNode(node)?node.children:null,VcsActionIds={ROLLBACK:"ChangesView.Revert",REFRESH:"ChangesView.Refresh",SHELVE_SILENTLY:"ChangesView.ShelveSilently",SHELVE:"ChangesView.Shelve",UNSHELVE_SILENTLY:"ChangesView.UnshelveSilently",NEW_CHANGELIST:"ChangesView.NewChangeList",ADD_UNVERSIONED:"ChangesView.AddUnversioned",RENAME_CHANGELIST:"ChangesView.Rename",REMOVE_CHANGELIST:"ChangesView.RemoveChangeList",SET_DEFAULT_CHANGELIST:"ChangesView.SetDefault",MOVE_TO_ANOTHER_CHANGELIST:"ChangesView.Move",SHOW_DIFF:"Diff.ShowDiff",CHECKIN_FILES:"CheckinFiles",CHECKIN_PROJECT:"CheckinProject",JUMP_TO_SOURCE:CommonActionIds.$.EDIT_SOURCE,GROUP_CHANGES_VIEW_POPUP_MENU:"ChangesViewPopupMenu",GROUP_BY_DIRECTORY:"ChangesView.GroupBy.Directory",GIT_ADD:"Git.Add",GIT_INIT:"Git.Init",GIT_CLONE:"Git.Clone",GIT_CREATE_NEW_BRANCH:"Git.CreateNewBranch",GIT_BRANCHES:"Git.Branches",GIT_LOG_HIDE_BRANCHES:"Git.Log.Hide.Branches",GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH:"Git.Log.Branches.Navigate.Log.To.Selected.Branch",GIT_UPDATE_SELECTED:"Git.Update.Selected",FOCUS_TEXT_FILTER:"Vcs.Log.FocusTextFilter",MATCH_CASE:"Vcs.Log.MatchCaseAction",REG_EXP:"Vcs.Log.EnableFilterByRegexAction",COPY_REVISION_NUMBER:"Vcs.CopyRevisionNumberAction",LOG_REFRESH:"Vcs.Log.Refresh",SHOW_DETAILS:"Vcs.Log.ShowDetailsAction",SHOW_DIFF_PREVIEW:"Vcs.Log.ShowDiffPreview",PRESENTATION_SETTINGS:"Vcs.PresentationSettings",FILE_HISTORY_PRESENTATION_SETTINGS:"Vcs.FileHistory.PresentationSettings",CopyPathFromRepositoryRootProvider:"CopyPathFromRepositoryRootProvider"},repositoryGrouping={id:"repository",title:"Repository",isAvailable:(0,es.nZ)({key:"repositoryGrouping/isAvailable",get:({get})=>get(vcsRootsState).length>1}),groupFn:(0,es.nZ)({key:"repositoryGrouping/groupFn",get:({get})=>nodes=>get(vcsRootsState).map((repository=>((repository,children=[])=>({type:"repo",key:changesTreeNodeKey("repo",repository.dir),repository,children}))(repository,nodes.filter((node=>Change.path(node.change)?.startsWith(repository.dir))))))})},directoryGrouping={id:"directory",title:"Directory",isAvailable:!0,useShortcutOf:VcsActionIds.GROUP_BY_DIRECTORY,groupFn:createGroupByDirectory({shouldCollapseDirectories:!0,createDirectoryNode:({dirPath,parentNodePath,children})=>((dirPath,parentNodePath,children=[],keyPrefix="")=>({type:"directory",key:keyPrefix+changesTreeNodeKey("directory",dirPath),dirPath,parentNodePath,children}))(dirPath,parentNodePath,children),mapNode:node=>changeNode(node.change,!1),getPath:node=>Change.path(node.change)})},defaultChangeGroupings=[repositoryGrouping,directoryGrouping],defaultChangeGroupingsState=(0,es.nZ)({key:"changes.availableGroupings",get:({get})=>defaultChangeGroupings.filter((grouping=>(0,es.Oy)(grouping.isAvailable)?get(grouping.isAvailable):grouping.isAvailable))}),recursiveGrouping=(groupingFns,nodes)=>{if(0===groupingFns.length||0===nodes.length)return nodes;const nextGroupingFns=groupingFns.slice(1),changeNodes=nodes.filter(isChangeNode),groupNodes=nodes.filter(isGroupNode),groups=groupingFns[0](changeNodes);return[...groupNodes,...groups].forEach((groupNode=>{groupNode.children=recursiveGrouping(nextGroupingFns,groupNode.children)})),groups.filter((group=>group.children.length>0))},getPrefixedChangesGroupFn=({get,isActive,groupings})=>keyPrefix=>{const resolve=value=>(0,es.Oy)(value)?get(value):value,groupFns=groupings.filter((({id,isAvailable})=>resolve(isAvailable)&&resolve(isActive(id)))).map((({groupFn})=>resolve(groupFn))).map((groupFn=>keyPrefix?(...args)=>groupFn(...args).map((group=>({...group,key:`${keyPrefix}:${group.key}`}))):groupFn));return changes=>recursiveGrouping(groupFns,changes)};var tree_utils=__webpack_require__("./src/utils/tree-utils.ts");function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const collectSelectableItemsRecursive=(item,getChildren,collectedItems=[])=>{const children=getChildren(item);null==children?collectedItems.push(item):children.forEach((child=>collectSelectableItemsRecursive(child,getChildren,collectedItems)))};class NestedSelection{constructor(state,tree){this.state=state,this.tree=tree,_defineProperty(this,"cache",new WeakMap),this.tree=tree,this.state=state}toggle(item){const children=this.tree.getChildren(item),key=this.tree.getKey(item);if(null==children)this.state.toggle(key);else{const state=this.getSelectionState(item),itemsInSubtree=((item,getChildren)=>{const collectedItems=[];return collectSelectableItemsRecursive(item,getChildren,collectedItems),collectedItems})(item,(item=>normalizeChildren(this.tree.getChildren(item)))).map(this.tree.getKey);"Selected"===state?this.state.delete(...itemsInSubtree):this.state.add(...itemsInSubtree)}}getSelectionState(item){const cachedState=this.cache.get(item);if(cachedState)return cachedState;const children=normalizeChildren(this.tree.getChildren(item)),key=this.tree.getKey(item);let state;if(null==children)state=[...this.state.items].includes(key)?"Selected":"NotSelected";else{const allDescendantsStates=children.map((child=>this.getSelectionState(child)));state=allDescendantsStates.every((state=>"NotSelected"===state))?"NotSelected":allDescendantsStates.every((state=>"Selected"===state))?"Selected":"PartiallySelected"}return this.cache.set(item,state),state}}function normalizeChildren(children){return children?[].concat(children):null}var useControlledState=__webpack_require__("../../node_modules/@react-stately/utils/dist/useControlledState.mjs");let _Symbol$iterator;function immutableSet_defineProperty(obj,key,value){return(key=function immutableSet_toPropertyKey(arg){var key=function immutableSet_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}_Symbol$iterator=Symbol.iterator;class ImmutableSet{constructor(values){immutableSet_defineProperty(this,"size",void 0),immutableSet_defineProperty(this,"set",void 0),this.set=new Set(values),this.size=this.set.size}add(...items){return this.setValueWithMutation((newValue=>{items.forEach((item=>{newValue.add(item)}))}))}delete(...items){return this.setValueWithMutation((newValue=>{items.forEach((item=>{newValue.delete(item)}))}))}toggle(...items){return this.setValueWithMutation((newValue=>{items.forEach((item=>{newValue.delete(item)||newValue.add(item)}))}))}clear(){return this.setValueWithMutation((newValue=>{newValue.clear()}))}setValueWithMutation(mutate){const newValue=new Set(this.set);return mutate(newValue),new ImmutableSet(newValue)}forEach(...args){return this.set.forEach(...args)}has(value){return this.set.has(value)}[_Symbol$iterator](){return this.set[Symbol.iterator]()}entries(){return this.set.entries()}keys(){return this.set.keys()}values(){return this.set.values()}}const createSetInterface=set=>({add:(...values)=>set((currentValue=>new Set(new ImmutableSet(currentValue).add(...values)))),delete:(...values)=>set((currentValue=>new Set(new ImmutableSet(currentValue).delete(...values)))),clear:()=>set((currentValue=>new Set(new ImmutableSet(currentValue).clear()))),toggle:(...values)=>set((currentValue=>new Set(new ImmutableSet(currentValue).toggle(...values))))});function useStateSetterForSet(setValue){return(0,react.useMemo)((()=>createSetInterface(setValue)),[setValue])}const isOpen=(0,es.cn)({key:"rollbackView.isOpen",default:!1}),windowBounds=(0,es.cn)({key:"rollbackView.windowBounds",default:{height:500}}),initiallyIncludedChanges=(0,es.cn)({key:"rollbackView.initiallySelectedChanges",default:[]}),rootNodes=(0,es.nZ)({key:"rollbackView.includedRootNodes",get:({get})=>{const selectedChanges=get(initiallyIncludedChanges),{rootNodes}=get(changesTreeNodesState),includedRootNodes=rootNodes.filter((node=>"changelist"===node.type&&selectedChanges.some((change=>node.changeList.changes.includes(change)))));return 0===includedRootNodes.length?rootNodes.filter((node=>"changelist"===node.type&&node.changeList.active)):includedRootNodes}}),rollbackViewState={isOpen,windowBounds,initiallyExpandedKeys:(0,es.nZ)({key:"rollbackView.initiallyExpandedKeys",get:({get})=>{const includedChanges=get(initiallyIncludedChanges),nodes=get(rootNodes),expandedKeys=(0,tree_utils.Bp)((node=>isGroupNode(node)?node.children:null),(node=>node.key),nodes,includedChanges.map(getNodeKeyForChange));return new Set(expandedKeys.length?expandedKeys:(0,tree_utils.Om)((node=>isGroupNode(node)?node.children:null),(node=>node.key),nodes))}}),initiallyIncludedChanges,rootNodes};function changesTreeNodesResult(rootNodes){const fileCountsMap=new Map,byKey=new Map,expandAllKeys=new Set;return(0,tree_utils.Ck)(getChildren,((node,childrenFileCount)=>{if(byKey.set(node.key,node),"children"in node&&expandAllKeys.add(node.key),!childrenFileCount)return 1;const fileCount=childrenFileCount.reduce(((total,count)=>total+count),0);return fileCountsMap.set(node.key,fileCount),fileCount}),rootNodes),{rootNodes,fileCountsMap,byKey,expandAllKeys}}const changeListNode=changeList=>({type:"changelist",key:changesTreeNodeKey("changelist",changeList.id),changeList,children:changeList.changes.map((change=>changeNode(change)))}),showIgnoredFilesState=(0,es.cn)({key:"changesView/showIgnoredFiles",default:!1}),showRelatedFilesState=(0,es.cn)({key:"changesView/showRelatedFiles",default:!1}),changesGroupingActiveState=(0,es.xu)({key:"changesView/isGroupingActive",default:!0}),selectedKeysState=(0,es.cn)({key:"changesView.selectedKeys",default:new Set([])}),resolvedSelectedKeysState=(0,es.nZ)({key:"changesView.resolvedSelectedKeys",get:({get})=>{const selection=get(selectedKeysState);if("all"===selection){const{rootNodes}=get(changesTreeNodesState);return new Set((0,tree_utils.eA)((node=>"children"in node?node.children:[]),((node,parentValue)=>{const nodes=parentValue??[];return nodes.push(node),nodes}),rootNodes).flat().map((node=>node.key)))}return selection}}),ChangesView_state_selectedNodesState=(0,es.nZ)({key:"changesView.selectedNodes",get:({get})=>{const selectedKeys=get(resolvedSelectedKeysState),{byKey}=get(changesTreeNodesState);return new Set([...selectedKeys].map((key=>byKey.get(key))).filter(array_utils.N))}}),changesUnderSelectedKeys=(0,es.nZ)({key:"changesView.selectedKeys.changes",get:({get})=>{const selectedNodes=get(ChangesView_state_selectedNodesState),allChanges=new Set,processNode=node=>{node&&("change"===node.type&&allChanges.add(node.change),isGroupNode(node)&&node.children.forEach(processNode))};return selectedNodes.forEach(processNode),allChanges}}),changeListsUnderSelection=(0,es.nZ)({key:"changesView.selectedChangeLists",get:({get})=>{const selectedNodes=get(ChangesView_state_selectedNodesState),allChangeLists=get(changeListsState),selectedChangeLists=new Set,processNode=node=>{if(node){if("changelist"===node.type&&selectedChangeLists.add(node.changeList),"change"===node.type){const changeList=allChangeLists.find((changeList=>changeList.changes.includes(node.change)));changeList&&selectedChangeLists.add(changeList)}isGroupNode(node)&&node.children.forEach(processNode)}};return selectedNodes.forEach(processNode),selectedChangeLists}}),includedChangeKeysState=(0,es.cn)({key:"changesView.includedChangeKeys",default:new Set([])}),includedChangesState=(0,es.nZ)({key:"changesView.includedChanges",get:({get})=>{const includedChangeKeys=get(includedChangeKeysState);return get(allChangesState).filter((change=>includedChangeKeys.has(getNodeKeyForChange(change))))}}),includedChangesNestedSelection=(0,es.nZ)({key:"changesView.selectedChanges.nestedSelectionState",get:({get,getCallback})=>{const{rootNodes}=get(changesTreeNodesState),includedChangeKeys=get(includedChangeKeysState),setSelectedKeys=getCallback((({set})=>setValue=>set(includedChangeKeysState,setValue)));return new NestedSelection({items:includedChangeKeys,...createSetInterface(setSelectedKeys)},{rootNodes,getChildren:item=>isGroupNode(item)?item.children:null,getKey:item=>item.key})}}),ChangesView_state_expandedKeysState=(0,es.cn)({key:"changesView.expandedKeys",default:(0,es.nZ)({key:"changesView.expandedKeys/temporaryDefault",get:({get})=>new Set(get(changesTreeNodesState).rootNodes.map((node=>[node.key,...node.children.map((child=>child.key))])).flat())})}),changesViewGroupingsState=(0,es.nZ)({key:"changes.groupings",get:({get,getCallback})=>get(defaultChangeGroupingsState).map((grouping=>({...grouping,isActive:get(changesGroupingActiveState(grouping.id))})))}),groupChildren=(node,groupFn)=>({...node,children:groupFn(node.children)}),changesTreeNodesState=(0,es.nZ)({key:"changesView.treeNodes",get:({get})=>{const changeListNodes=(0,sortBy.Z)((({active})=>!active),get(changeListsState)).map(changeListNode),prefixedGroupFn=getPrefixedChangesGroupFn({get,groupings:defaultChangeGroupings,isActive:changesGroupingActiveState}),unversionedChanges=get(unversionedChangesState),rootNodes=changeListNodes.map((changeListNode=>groupChildren(changeListNode,prefixedGroupFn(changeListNode.key))));if(unversionedChanges.length>0){const unversionedChangesNode={key:"unversioned",type:"unversioned",children:unversionedChanges.map((change=>changeNode(change)))};rootNodes.push(groupChildren(unversionedChangesNode,prefixedGroupFn("unversioned")))}return changesTreeNodesResult(rootNodes)}}),commitMessageSizeState=(0,es.xu)({key:"changesView/splitter/commitMessageSize",default:orientation=>"horizontal"===orientation?.4:.3}),amendCommitState=(0,es.cn)({key:"changesView/amendCommit",default:!1}),commitMessageState=(0,es.cn)({key:"changesView/commitMessage",default:""}),commitErrorMessageState=(0,es.cn)({key:"changesView/commitErrorMessage",default:""}),commitTaskIdState=(0,es.cn)({key:"changesView/commitTaskId",default:null}),changesFromActivePathsState=(0,es.nZ)({key:"changesView/changesFromActivePaths",get:({get})=>{const activePaths=get(activePathsState);return get(allChangesState).filter((change=>activePaths.some((activePath=>Change.path(change).startsWith(activePath)))))}}),queueCheckInCallback=({set,snapshot})=>paths=>{const includedChangeKeys=(paths?snapshot.getLoadable(allChangesState).getValue().filter((change=>paths.some((activePath=>Change.path(change).startsWith(activePath))))):snapshot.getLoadable(changesFromActivePathsState).getValue()).map(getNodeKeyForChange);if(set(includedChangeKeysState,new Set(includedChangeKeys)),includedChangeKeys.length>0){const expandedKeys=(0,tree_utils.Bp)((node=>isGroupNode(node)?node.children:null),(node=>node.key),snapshot.getLoadable(changesTreeNodesState).getValue().rootNodes,includedChangeKeys);set(ChangesView_state_expandedKeysState,(currentExpandedKeys=>new Set([..."all"!==currentExpandedKeys?currentExpandedKeys:new Set,...expandedKeys]))),set(selectedKeysState,new Set([includedChangeKeys[0]]))}},openRollbackWindowForSelectionCallback=({set,snapshot})=>(contextual=!0)=>{const activePaths=snapshot.getLoadable(activePathsState).getValue(),changesUnderSelection=snapshot.getLoadable(changesUnderSelectedKeys).getValue(),changesBasedOnActivePaths=contextual&&activePaths.length>0?snapshot.getLoadable(changesFromActivePathsState).getValue():null;set(rollbackViewState.initiallyIncludedChanges,changesBasedOnActivePaths??[...changesUnderSelection]),set(rollbackViewState.isOpen,!0)},SpeedSearchTreeWithCheckboxes=react.forwardRef((({nestedSelection,cacheInvalidation,onNodeKeyDown,...props},ref)=>{const otherInvalidators="object"==typeof cacheInvalidation?cacheInvalidation.invalidators:[];return(0,jsx_runtime.jsx)(SpeedSearchTree.b,{ref,...props,cacheInvalidation:{invalidators:[nestedSelection,...otherInvalidators]},onNodeKeyDown:(event,item)=>{" "===event.key&&item.value&&nestedSelection.toggle(item.value),onNodeKeyDown?.(event,item)}})}));try{SpeedSearchTreeWithCheckboxes.displayName="SpeedSearchTreeWithCheckboxes",SpeedSearchTreeWithCheckboxes.__docgenInfo={description:"Experimental wrapper component around SpeedSearchTree, which allows rendering {@link TreeNodeCheckbox } in nodes.\n\nSee [design-decisions.md](../Tree/design-decisions.md) for more thoughts about how should different features\nlike this be supported.",displayName:"SpeedSearchTreeWithCheckboxes",props:{fillAvailableSpace:{defaultValue:null,description:"",name:"fillAvailableSpace",required:!1,type:{name:"boolean"}},showAsFocused:{defaultValue:null,description:"When true, shows the tree in focused style, even when it's not focused. A common use case is when the tree\nis virtually focused. i.e. the focus is physically on some other element (like a search input) which handles\nkeyboard events as if the tree was focused.",name:"showAsFocused",required:!1,type:{name:"boolean"}},treeRef:{defaultValue:null,description:"",name:"treeRef",required:!1,type:{name:"RefObject<TreeRefValue>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},childExpansionBehaviour:{defaultValue:null,description:"",name:"childExpansionBehaviour",required:!1,type:{name:"enum",value:[{value:'"multi"'},{value:'"single"'}]}},cacheInvalidation:{defaultValue:null,description:"Defines cache invalidation policy for items. By default, the render result is cached based on the item objects.\nThis is equivalent of passing false or not passing anything for `cacheInvalidation`. If `true` is passed, it will\nalways invalidate the render result, causing the collection to be recreated on each re-render. It can\nconsiderably affect performance in large collections. in addition to boolean value, an object with the list of\ninvalidators can also be passed. renderer function is called each time any of the invalidators are changed.\nThink of it as [dependency array in react hooks](https://reactjs.org/docs/hooks-reference.html#usememo). Except\nthat the length of the array can also safely change.",name:"cacheInvalidation",required:!1,type:{name:"boolean | { invalidators: readonly unknown[]; }"}},selectionManagerRef:{defaultValue:null,description:"Gives imperative access to selection manager.",name:"selectionManagerRef",required:!1,type:{name:"RefObject<SelectionManager>"}},onAction:{defaultValue:null,description:"Called when the action associated with a leaf tree node should be taken.\nThe exact UI interaction is abstracted away, but it's either Enter key or double click.",name:"onAction",required:!1,type:{name:"((key: Key) => void)"}},onNodeKeyDown:{defaultValue:null,description:"",name:"onNodeKeyDown",required:!1,type:{name:"((event: KeyboardEvent, node: Node<object>) => void)"}},allowEmptySelection:{defaultValue:null,description:"",name:"allowEmptySelection",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean | FocusStrategy"}},keepSearchActiveOnBlur:{defaultValue:null,description:"",name:"keepSearchActiveOnBlur",required:!1,type:{name:"boolean | ((e: FocusEvent<Element, Element>) => boolean)"}},searchTerm:{defaultValue:null,description:"",name:"searchTerm",required:!1,type:{name:"string"}},isSearchActive:{defaultValue:null,description:"",name:"isSearchActive",required:!1,type:{name:"boolean"}},defaultSearchTerm:{defaultValue:null,description:"",name:"defaultSearchTerm",required:!1,type:{name:"string"}},defaultIsSearchActive:{defaultValue:null,description:"",name:"defaultIsSearchActive",required:!1,type:{name:"boolean"}},onSearchTermChange:{defaultValue:null,description:"",name:"onSearchTermChange",required:!1,type:{name:"((value: string) => void)"}},onIsSearchActiveChange:{defaultValue:null,description:"",name:"onIsSearchActiveChange",required:!1,type:{name:"((value: boolean) => void)"}},hideSpeedSearchPopup:{defaultValue:null,description:"Whether speed search popup should not be shown. Useful when speed search state is controlled, and\na search input is rendered outside the tree.",name:"hideSpeedSearchPopup",required:!1,type:{name:"boolean"}},nestedSelection:{defaultValue:null,description:"",name:"nestedSelection",required:!0,type:{name:"NestedSelectionState<object>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TreeCheckboxes/SpeedSearchTreeWithCheckboxes.tsx#SpeedSearchTreeWithCheckboxes"]={docgenInfo:SpeedSearchTreeWithCheckboxes.__docgenInfo,name:"SpeedSearchTreeWithCheckboxes",path:"src/TreeCheckboxes/SpeedSearchTreeWithCheckboxes.tsx#SpeedSearchTreeWithCheckboxes"})}catch(__react_docgen_typescript_loader_error){}var TreeContext=__webpack_require__("./src/Tree/TreeContext.tsx");const StyledCheckboxWrapper=styled_components_browser_esm.ZP.span.withConfig({displayName:"TreeNodeCheckbox__StyledCheckboxWrapper",componentId:"sc-1dgtqwa-0"})(["margin-right:0.125rem;display:inline-flex;"]),TreeNodeCheckbox=({selectionState,onToggle,selectItemOnPress=!0})=>{const treeContext=(0,react.useContext)(TreeContext.k),itemContext=(0,react.useContext)(ItemStateContext.k);if(!itemContext)throw new Error("TreeNodeCheckbox is rendered outside tree nodes.");return(0,jsx_runtime.jsx)(StyledCheckboxWrapper,{children:(0,jsx_runtime.jsx)(Checkbox.X,{preventFocus:!0,"aria-label":`Select ${itemContext.node.textValue}`,isSelected:"Selected"===selectionState,isIndeterminate:"PartiallySelected"===selectionState,isDisabled:itemContext.isDisabled,onChange:()=>{onToggle(),treeContext&&itemContext&&selectItemOnPress&&(treeContext.state.selectionManager.setFocusedKey(itemContext.node.key),treeContext.state.selectionManager.setFocused(!0),treeContext.state.selectionManager.setSelectedKeys([itemContext.node.key]))}})})};TreeNodeCheckbox.displayName="TreeNodeCheckbox";try{TreeNodeCheckbox.displayName="TreeNodeCheckbox",TreeNodeCheckbox.__docgenInfo={description:"Checkbox to be used with {@link SpeedSearchTreeWithCheckboxes }. `SpeedSearchTreeWithCheckboxes` doesn't add the\ncheckboxes by default to the nodes, which makes it more flexible in terms of which nodes should have checkbox, or\nit's exact placement within the tree rows.\n\nTreeNodeCheckbox renders a Checkbox with a few extras:\n- `aria-label` set based on the encompassing item's textValue\n- `isSelected` and `isIndeterminate` set based on `selectionState`\n- `isDisabled` is set based in disabled state of the item.\n- The encompassing item will be selected upon press, if `selectItemOnPress` is `true` (default is `true`).\n- Small styling adjustment achieved by a wrapper StyledListIconWrapper.",displayName:"TreeNodeCheckbox",props:{selectionState:{defaultValue:null,description:"",name:"selectionState",required:!1,type:{name:"enum",value:[{value:'"NotSelected"'},{value:'"Selected"'},{value:'"PartiallySelected"'}]}},selectItemOnPress:{defaultValue:{value:"true"},description:"",name:"selectItemOnPress",required:!1,type:{name:"boolean"}},onToggle:{defaultValue:null,description:"",name:"onToggle",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TreeCheckboxes/TreeNodeCheckbox.tsx#TreeNodeCheckbox"]={docgenInfo:TreeNodeCheckbox.__docgenInfo,name:"TreeNodeCheckbox",path:"src/TreeCheckboxes/TreeNodeCheckbox.tsx#TreeNodeCheckbox"})}catch(__react_docgen_typescript_loader_error){}const ChangesViewTreeContextMenu=()=>0===[...(0,es.sJ)(selectedKeysState)].length?null:(0,jsx_runtime.jsx)(ActionsMenu.C,{"aria-label":"Changes actions",actions:[(0,ActionsProvider.BH)(VcsActionIds.CHECKIN_FILES),(0,ActionsProvider.BH)(VcsActionIds.ROLLBACK),(0,ActionsProvider.BH)(VcsActionIds.JUMP_TO_SOURCE),new Divider.P,(0,ActionsProvider.BH)(VcsActionIds.SHELVE),new Divider.P,(0,ActionsProvider.BH)(VcsActionIds.NEW_CHANGELIST),(0,ActionsProvider.BH)(VcsActionIds.RENAME_CHANGELIST),(0,ActionsProvider.BH)(VcsActionIds.REMOVE_CHANGELIST),(0,ActionsProvider.BH)(VcsActionIds.SET_DEFAULT_CHANGELIST),(0,ActionsProvider.BH)(VcsActionIds.MOVE_TO_ANOTHER_CHANGELIST),new Divider.P,(0,ActionsProvider.BH)(CommonActionIds.$.REFRESH)].filter(array_utils.N)});async function asyncFilter(predicate,array){const predicateResult=await Promise.all(array.map((item=>predicate(item).catch((()=>!1)))));return array.filter(((item,index)=>predicateResult[index]))}async function getTrackingBranch({fs,dir,localBranchName}){const mergeRef=await isomorphic_git.ZP.getConfig({fs,dir,path:`branch.${localBranchName}.merge`}),remote=await isomorphic_git.ZP.getConfig({fs,dir,path:`branch.${localBranchName}.remote`});return mergeRef&&remote?`${remote}/${mergeRef.replace(/^refs\/heads\//,"")}`:null}ChangesViewTreeContextMenu.displayName="ChangesViewTreeContextMenu";const repoLocalBranchesState=(0,es.CG)({key:"vcs/repoLocalBranches",get:repoRoot=>async({})=>{const branches=await isomorphic_git.ZP.listBranches({fs,dir:repoRoot});return Promise.all(branches.map((async branch=>({name:branch,trackingBranch:await getTrackingBranch({fs,dir:repoRoot,localBranchName:branch})}))))}}),repoRemoteBranchesState=(0,es.CG)({key:"vcs/repoRemoteBranches",get:repoRoot=>async()=>{const remotes=await isomorphic_git.ZP.listRemotes({fs,dir:repoRoot});return(await Promise.all(remotes.map((({remote})=>isomorphic_git.ZP.listBranches({fs,dir:repoRoot,remote}).then((branches=>branches.filter((branch=>"HEAD"!==branch)).map((branch=>({name:branch,remote}))))))))).flat()}}),repoBranchesState=(0,es.CG)({key:"vcs/repoBranches",get:repoRoot=>async({get})=>{const currentBranchName=get(repoCurrentBranchNameState(repoRoot));let localBranches=get(repoLocalBranchesState(repoRoot));return 0===localBranches.length&&currentBranchName&&(localBranches=localBranches.concat({name:currentBranchName,trackingBranch:null})),{repoRoot,currentBranch:localBranches.find((branch=>branch.name===currentBranchName))||null,localBranches,remoteBranches:get(repoRemoteBranchesState(repoRoot))}}}),repoCurrentBranchNameState=(0,es.CG)({key:"vcs/repoCurrentBranch",get:repoRoot=>()=>isomorphic_git.ZP.currentBranch({fs,dir:repoRoot,fullname:!1})}),allBranchesState=(0,es.nZ)({key:"vcs/allBranches",get:({get})=>get(vcsRootsState).map((({dir:repoRoot})=>get(repoBranchesState(repoRoot))))}),branchForPathState=(0,es.CG)({key:"gitBranchForFile",get:filepath=>({get})=>{const root=get(vcsRootForFile(filepath));return console.log(`repo root for ${filepath}`,root,root&&get(repoBranchesState(root))),root&&get(repoBranchesState(root)).currentBranch?.name||null}}),PREDEFINED_FAVORITE_BRANCH_NAMES=[{branchType:"LOCAL",branchName:"master"},{branchType:"REMOTE",branchName:"origin/master"}];function readBranchStorage(branchStorage){return ensureArray(branchStorage?.map).flatMap((entry=>ensureArray(entry?.entry.value.list).map((({"branch-info":{"@source":branchName,"@repo":repoRoot}})=>({branchType:entry?.entry["@type"],branchName,repoRoot})))))||[]}function toBranchStorage(value){const branchesByType=(0,groupBy.Z)((({branchType})=>branchType),value);return{map:Object.entries(branchesByType).map((([branchType,branches])=>({entry:{"@type":branchType,value:{list:branches.map((branch=>({"branch-info":{"@repo":branch.repoRoot,"@source":branch.branchName}})))}}})))}}const branchInfoArrayChecker=(0,refine_es.IX)((0,refine_es.Ry)({branchType:(0,refine_es.G0)((0,refine_es.i0)("LOCAL"),(0,refine_es.i0)("REMOTE")),branchName:(0,refine_es.Z_)(),repoRoot:(0,refine_es.Z_)()})),favoriteBranchesState=(0,es.cn)({key:"vcs/branches/favorite",default:[],effects:[persistentAtomEffect({refine:branchInfoArrayChecker,componentName:"Git.Settings",read:gitSettings=>readBranchStorage(gitSettings?.["favorite-branches"]?.["branch-storage"]),update:value=>currentValue=>({...currentValue||{},"favorite-branches":{"branch-storage":toBranchStorage(value)}})})]}),isFavoriteBranchState=(0,es.CG)({key:"vcs/branches/isFavorite",get:branchInfo=>({get})=>isFavorite(get(favoriteBranchesState),get(excludedFromFavoriteBranchesState),branchInfo)}),excludedFromFavoriteBranchesState=(0,es.cn)({key:"vcs/branches/favorite-excluded",default:[],effects:[persistentAtomEffect({refine:branchInfoArrayChecker,componentName:"Git.Settings",read:gitSettings=>readBranchStorage(gitSettings?.["exclude-from-favorite"]?.["branch-storage"]),update:value=>currentValue=>({...currentValue||{},"exclude-from-favorite":{"branch-storage":toBranchStorage(value)}})})]});function isPredefinedAsFavorite(params){return PREDEFINED_FAVORITE_BRANCH_NAMES.some((({branchType,branchName})=>branchName===params.branchName&&branchType===params.branchType))}const isFavorite=(favoriteBranches,excludedFromFavoriteBranches,params)=>!!favoriteBranches.find((0,equals.Z)(params))||!excludedFromFavoriteBranches.find((0,equals.Z)(params))&&isPredefinedAsFavorite(params);function useToggleFavoriteBranch(){return(0,es._8)((({set,snapshot})=>(params,favorite=!isFavorite(snapshot.getLoadable(favoriteBranchesState).getValue(),snapshot.getLoadable(excludedFromFavoriteBranchesState).getValue(),params))=>{const remove=currentValue=>currentValue.filter((favoriteBranch=>!(0,equals.Z)(favoriteBranch,params))),add=currentValue=>currentValue.some((0,equals.Z)(params))?currentValue:currentValue.concat(params);favorite?(set(excludedFromFavoriteBranchesState,remove),isPredefinedAsFavorite(params)||set(favoriteBranchesState,add)):(set(favoriteBranchesState,remove),isPredefinedAsFavorite(params)&&set(excludedFromFavoriteBranchesState,add))}),[])}function useFavoriteBranches(){const favoriteBranches=(0,es.sJ)(favoriteBranchesState),excludedFromFavoriteBranches=(0,es.sJ)(excludedFromFavoriteBranchesState);return{isFavorite:params=>isFavorite(favoriteBranches,excludedFromFavoriteBranches,params),toggleFavorite:useToggleFavoriteBranch()}}const RepoCurrentBranchName=({repo})=>{const branch=(0,es.sJ)(branchForPathState(repo.dir));return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:branch})};try{RepoCurrentBranchName.displayName="RepoCurrentBranchName",RepoCurrentBranchName.__docgenInfo={description:"",displayName:"RepoCurrentBranchName",props:{repo:{defaultValue:null,description:"",name:"repo",required:!0,type:{name:"VcsDirectoryMapping"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/RepoCurrentBranchName.tsx#RepoCurrentBranchName"]={docgenInfo:RepoCurrentBranchName.__docgenInfo,name:"RepoCurrentBranchName",path:"../example-app/src/VersionControl/RepoCurrentBranchName.tsx#RepoCurrentBranchName"})}catch(__react_docgen_typescript_loader_error){}const StyledRepoColorSquare=styled.zo.span`
  width: 14px;
  height: 14px;
  align-self: center;
  margin-right: 0.2rem;
  position: relative;

  //  after pseudo element is used to create the color mixing implemented here:
  //  https://github.com/JetBrains/intellij-community/blob/82f201386c3f7a339ff25fc8f3389024c8078a87/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/VcsLogColorManagerImpl.java#L60
  &&:after {
    content: "";
    position: absolute;
    inset: 0;
    opacity: 0.75;
    background: ${({theme})=>theme.color("Table.background")||(theme.dark?"#3C3F41":"#fff")};
  }
`,useRepoRootColor=rootPath=>{const index=(0,es.sJ)(vcsRootsState).findIndex((root=>root.dir===rootPath)),theme=(0,styled_components_browser_esm.Fg)(),colors=[theme.commonColors.red,theme.commonColors.blue];return colors[index%colors.length]??colors[0]},RepoColorIcon=react.forwardRef((({rootPath,...props},ref)=>(0,jsx_runtime.jsx)(StyledRepoColorSquare,{ref,...props,style:{...props.style,backgroundColor:useRepoRootColor(rootPath)}})));try{RepoColorIcon.displayName="RepoColorIcon",RepoColorIcon.__docgenInfo={description:"",displayName:"RepoColorIcon",props:{rootPath:{defaultValue:null,description:"",name:"rootPath",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Changes/StyledRepoColorSquare.tsx#RepoColorIcon"]={docgenInfo:RepoColorIcon.__docgenInfo,name:"RepoColorIcon",path:"../example-app/src/VersionControl/Changes/StyledRepoColorSquare.tsx#RepoColorIcon"})}catch(__react_docgen_typescript_loader_error){}const StyledCurrentBranchTag=styled.zo.span`
  display: inline-flex;
  align-self: center;
  height: 1.1rem;
  line-height: 1.1rem;
  padding: 0 0.25rem;

  background: ${({theme})=>theme.currentBackgroundAware(`color-mix(in srgb, ${theme.color("VersionControl.Log.Commit.currentBranchBackground",theme.dark?"rgb(63, 71, 73)":"rgb(228, 250, 255)")}, ${theme.color("VersionControl.RefLabel.backgroundBase",theme.dark?"#fff":"#000")} ${100*(theme.value("VersionControl.RefLabel.backgroundBrightness")??.08)}%)`)};
  color: ${({theme})=>theme.currentForegroundAware(theme.color("VersionControl.RefLabel.foreground",theme.dark?"#909090":"#7a7a7a"))};
`;try{StyledCurrentBranchTag.displayName="StyledCurrentBranchTag",StyledCurrentBranchTag.__docgenInfo={description:"",displayName:"StyledCurrentBranchTag",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Changes/StyledCurrentBranchTag.tsx#StyledCurrentBranchTag"]={docgenInfo:StyledCurrentBranchTag.__docgenInfo,name:"StyledCurrentBranchTag",path:"../example-app/src/VersionControl/Changes/StyledCurrentBranchTag.tsx#StyledCurrentBranchTag"})}catch(__react_docgen_typescript_loader_error){}const changesTreeNodeRenderers_fileCountMsg=new core.C("{fileCount, plural,\n    =0 {No files}\n    =1 {1 file}\n    other {# files}\n  }","en-US");function formatFileCount(fileCount){return changesTreeNodeRenderers_fileCountMsg.format({fileCount})}const ChangeNodeHint=({node})=>(0,jsx_runtime.jsx)(ItemLayout.e.Hint,{children:node.showPath&&path_browserify_default().dirname(Change.path(node.change))});ChangeNodeHint.displayName="ChangeNodeHint";const defaultNodeRenderers={repo:(node,{fileCount})=>({textValue:path_browserify_default().basename(node.repository.dir),rendered:(0,jsx_runtime.jsxs)(ItemLayout.e,{children:[(0,jsx_runtime.jsx)(RepoColorIcon,{rootPath:node.repository.dir}),(0,jsx_runtime.jsx)(HighlightedTextValue.J,{}),(0,jsx_runtime.jsx)(ItemLayout.e.Hint,{children:formatFileCount(fileCount)}),(0,jsx_runtime.jsx)(StyledCurrentBranchTag,{children:(0,jsx_runtime.jsx)(RepoCurrentBranchName,{repo:node.repository})})]})}),directory:(node,{fileCount})=>({textValue:node.parentNodePath?path_browserify_default().relative(node.parentNodePath,node.dirPath):node.dirPath,rendered:(0,jsx_runtime.jsxs)(ItemLayout.e,{children:[(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"nodes/folder"}),(0,jsx_runtime.jsx)(HighlightedTextValue.J,{}),(0,jsx_runtime.jsx)(ItemLayout.e.Hint,{children:formatFileCount(fileCount)})]})}),change:node=>({textValue:path_browserify_default().basename(Change.path(node.change)),rendered:(0,jsx_runtime.jsxs)(ItemLayout.e,{children:[(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:getIconForFile(Change.path(node.change))}),(0,jsx_runtime.jsx)(StatusColor,{status:Change.fileStatus(node.change),children:(0,jsx_runtime.jsx)(HighlightedTextValue.J,{})}),Change.isRename(node.change)?` - renamed from ${path_browserify_default().basename(node.change.before.path)}`:Change.isMove(node.change)&&` - moved from ${path_browserify_default().relative(path_browserify_default().dirname(node.change.after.path),path_browserify_default().dirname(node.change.before.path)).replace(/(\.\.\/){2,}[!.]/g,"..")}/`,(0,jsx_runtime.jsx)(ChangeNodeHint,{node})]})})},simpleGroupingRenderer=getText=>(node,{fileCount})=>({textValue:getText(node),rendered:(0,jsx_runtime.jsxs)(ItemLayout.e,{children:[(0,jsx_runtime.jsx)(HighlightedTextValue.J,{}),(0,jsx_runtime.jsx)(ItemLayout.e.Hint,{children:formatFileCount(fileCount)})]})}),createChangesTreeNodeRenderer=(renderers,defaultRendererOverrides)=>{const nodeRenderers={...defaultNodeRenderers,...defaultRendererOverrides,...renderers},getItemProps=({node,fileCountsMap})=>{const nodeRenderer=nodeRenderers[node.type],{textValue,rendered}=nodeRenderer(node,{fileCount:fileCountsMap.get(node.key)||0,dirCount:0});return{key:node.key,childItems:isGroupNode(node)?node.children:[],hasChildItems:isGroupNode(node)&&node.children?.length>0,textValue,children:rendered}};return{getItemProps,getTextValue:(node,{fileCountsMap})=>(0,nodeRenderers[node.type])(node,{fileCount:fileCountsMap.get(node.key)||0,dirCount:0}).textValue,itemRenderer:({fileCountsMap})=>node=>(0,jsx_runtime.jsx)(Item.c,{...getItemProps({node,fileCountsMap})})}};try{formatFileCount.displayName="formatFileCount",formatFileCount.__docgenInfo={description:"",displayName:"formatFileCount",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Changes/ChangesTree/changesTreeNodeRenderers.tsx#formatFileCount"]={docgenInfo:formatFileCount.__docgenInfo,name:"formatFileCount",path:"../example-app/src/VersionControl/Changes/ChangesTree/changesTreeNodeRenderers.tsx#formatFileCount"})}catch(__react_docgen_typescript_loader_error){}try{simpleGroupingRenderer.displayName="simpleGroupingRenderer",simpleGroupingRenderer.__docgenInfo={description:"",displayName:"simpleGroupingRenderer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Changes/ChangesTree/changesTreeNodeRenderers.tsx#simpleGroupingRenderer"]={docgenInfo:simpleGroupingRenderer.__docgenInfo,name:"simpleGroupingRenderer",path:"../example-app/src/VersionControl/Changes/ChangesTree/changesTreeNodeRenderers.tsx#simpleGroupingRenderer"})}catch(__react_docgen_typescript_loader_error){}function LoadingText(){const loading=(0,es.sJ)(repoStatusUpdatingState);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:loading&&(0,jsx_runtime.jsx)(Delayed,{children:", updating..."})})}const changesViewTreeNodeRenderer=createChangesTreeNodeRenderer({changelist:(node,{fileCount})=>({textValue:node.changeList.name,rendered:(0,jsx_runtime.jsxs)(ItemLayout.e,{children:[(0,jsx_runtime.jsx)("span",{style:{fontWeight:node.changeList.active?"bold":void 0},children:(0,jsx_runtime.jsx)(HighlightedTextValue.J,{})}),(0,jsx_runtime.jsxs)(ItemLayout.e.Hint,{children:[formatFileCount(fileCount),(0,jsx_runtime.jsx)(LoadingText,{})]})]})}),unversioned:(_node,{fileCount})=>({textValue:"Unversioned Files",rendered:(0,jsx_runtime.jsxs)(ItemLayout.e,{children:[(0,jsx_runtime.jsx)(HighlightedTextValue.J,{}),(0,jsx_runtime.jsxs)(ItemLayout.e.Hint,{children:[formatFileCount(fileCount),(0,jsx_runtime.jsx)(LoadingText,{})]})]})})});function findPathsUnderNode(node){return"directory"===node?.type?[node.dirPath]:"change"===node?.type?[Change.path(node.change)]:isGroupNode(node)?node.children.flatMap(findPathsUnderNode):[]}const ChangeViewTree=({treeRef})=>{const{rootNodes,fileCountsMap,byKey}=(0,es.sJ)(changesTreeNodesState),[selectedKeys,setSelectedKeys]=(0,es.FV)(selectedKeysState),[expandedKeys,setExpandedKeys]=(0,es.FV)(ChangesView_state_expandedKeysState),nestedSelection=(0,es.sJ)(includedChangesNestedSelection),{openPath}=useEditorStateManager(),openChangeInEditor=(0,es._8)((({snapshot})=>key=>{const changeNode=snapshot.getLoadable(changesTreeNodesState).getValue().byKey.get(key);return"change"===changeNode?.type&&openPath(Change.path(changeNode.change)),changeNode}),[]),activePathsProviderProps=useActivePathsProvider("all"===selectedKeys?[]:[...selectedKeys].flatMap((key=>{const node=byKey.get(key);return node?findPathsUnderNode(node):[]})));return(0,jsx_runtime.jsx)(ContextMenuContainer.X,{renderMenu:()=>(0,jsx_runtime.jsx)(ChangesViewTreeContextMenu,{}),style:{height:"100%"},children:(0,jsx_runtime.jsx)(SpeedSearchTreeWithCheckboxes,{"aria-label":"Commit changes tree",treeRef,items:rootNodes,selectionMode:"multiple",selectedKeys,expandedKeys,onExpandedChange:setExpandedKeys,onSelectionChange:setSelectedKeys,onAction:openChangeInEditor,nestedSelection,fillAvailableSpace:!0,autoFocus:"first",...activePathsProviderProps,children:node=>{const props=changesViewTreeNodeRenderer.getItemProps({fileCountsMap,node});return(0,jsx_runtime.jsxs)(Item.c,{...props,children:[0!==node.children?.length&&(0,jsx_runtime.jsx)(TreeNodeCheckbox,{selectionState:nestedSelection.getSelectionState(node),onToggle:()=>nestedSelection.toggle(node)}),props.children]})}})})};ChangeViewTree.displayName="ChangeViewTree";try{ChangeViewTree.displayName="ChangeViewTree",ChangeViewTree.__docgenInfo={description:"TODO: unversioned files\nTODO: show diff/source on double click (on action to be more precise)",displayName:"ChangeViewTree",props:{treeRef:{defaultValue:null,description:"",name:"treeRef",required:!0,type:{name:"RefObject<TreeRefValue>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Changes/ChangesView/ChangeViewTree.tsx#ChangeViewTree"]={docgenInfo:ChangeViewTree.__docgenInfo,name:"ChangeViewTree",path:"../example-app/src/VersionControl/Changes/ChangesView/ChangeViewTree.tsx#ChangeViewTree"})}catch(__react_docgen_typescript_loader_error){}var Toolbar=__webpack_require__("./src/Toolbar/Toolbar.tsx"),IconButton=__webpack_require__("./src/IconButton/IconButton.tsx"),MenuTrigger=__webpack_require__("./src/Menu/MenuTrigger.tsx");const ArrowIcon=(0,styled_components_browser_esm.ZP)(PlatformIcon.vq).withConfig({displayName:"IconButtonWithMenu__ArrowIcon",componentId:"sc-t9mrdg-0"})(["position:absolute;right:1px;bottom:1px;"]),IconButtonWithMenu=({renderMenu,children,noArrow=!1,...buttonProps})=>{const previouslyFocusedElementRef=(0,react.useRef)();return(0,jsx_runtime.jsx)(MenuTrigger.b,{renderMenu,onOpenChange:open=>{!open&&previouslyFocusedElementRef.current&&previouslyFocusedElementRef.current.focus()},children:(props,ref)=>(0,jsx_runtime.jsxs)(IconButton.hU,{...(0,mergeProps.d)(buttonProps,props,{onFocus:e=>{e.relatedTarget&&e.relatedTarget instanceof HTMLElement&&(previouslyFocusedElementRef.current=e.relatedTarget)}}),ref,children:[children,!noArrow&&(0,jsx_runtime.jsx)(ArrowIcon,{icon:"general/dropdown.svg"})]})})};IconButtonWithMenu.displayName="IconButtonWithMenu";try{IconButtonWithMenu.displayName="IconButtonWithMenu",IconButtonWithMenu.__docgenInfo={description:"Renders an IconButton which opens a menu. by default a down arrow icon is shown as an overlay on the rendered\nicon, but it can be disabled by passing `noArrow`. It also restores the focus to the previously focused element,\nwhen the menu is closed.",displayName:"IconButtonWithMenu",props:{minSize:{defaultValue:null,description:"The minimum width/height of the button.",name:"minSize",required:!1,type:{name:"number"}},excludeFromTabOrder:{defaultValue:null,description:"Whether the button should be focusable by pressing tab. The default is true for icon buttons (aka. action buttons),\nwhich means they are not included in the tab order.",name:"excludeFromTabOrder",required:!1,type:{name:"boolean"}},renderMenu:{defaultValue:null,description:"",name:"renderMenu",required:!0,type:{name:'(props: { menuProps: Pick<AriaMenuOptions<unknown>, "autoFocus" | "id" | "aria-labelledby" | "onClose">; }) => ReactNode'}},noArrow:{defaultValue:{value:"false"},description:"whether the default arrow should be removed or not. false by default.",name:"noArrow",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/IconButtonWithMenu/IconButtonWithMenu.tsx#IconButtonWithMenu"]={docgenInfo:IconButtonWithMenu.__docgenInfo,name:"IconButtonWithMenu",path:"src/IconButtonWithMenu/IconButtonWithMenu.tsx#IconButtonWithMenu"})}catch(__react_docgen_typescript_loader_error){}var SpeedSearchMenu=__webpack_require__("./src/Menu/SpeedSearchMenu.tsx");const ChangeListsActionButton=()=>{const actions=[(0,ActionsProvider.BH)(VcsActionIds.NEW_CHANGELIST),(0,ActionsProvider.BH)(VcsActionIds.RENAME_CHANGELIST),(0,ActionsProvider.BH)(VcsActionIds.REMOVE_CHANGELIST),(0,ActionsProvider.BH)(VcsActionIds.SET_DEFAULT_CHANGELIST),(0,ActionsProvider.BH)(VcsActionIds.MOVE_TO_ANOTHER_CHANGELIST)].filter(array_utils.N);return(0,jsx_runtime.jsx)(IconButtonWithMenu,{renderMenu:({menuProps})=>(0,jsx_runtime.jsx)(ActionsMenu.C,{actions,children:actionMenuProps=>(0,jsx_runtime.jsx)(SpeedSearchMenu.w,{...menuProps,...actionMenuProps})}),children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"vcs/changelist.svg"})})};ChangeListsActionButton.displayName="ChangeListsActionButton";var Section=__webpack_require__("../../node_modules/@react-stately/collections/dist/Section.mjs");function GroupByActionButton({groupings,onToggle}){return 1===groupings.length&&groupings[0].icon?(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:`Group By ${groupings[0].title}`}),children:(0,jsx_runtime.jsx)(IconButton.hU,{isPressed:groupings[0].isActive,onPress:()=>onToggle(groupings[0].id),children:groupings[0].icon})}):(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Group By"}),children:(0,jsx_runtime.jsx)(IconButtonWithMenu,{renderMenu:({menuProps})=>(0,jsx_runtime.jsx)(Menu.v2,{...menuProps,selectedKeys:groupings.filter((({isActive})=>isActive)).map((({id})=>id)),onAction:key=>{const id=groupings.find((({id})=>id===key))?.id;id&&onToggle(id)},children:(0,jsx_runtime.jsx)(Section.$,{title:"Group By",children:groupings.map((({id,title})=>(0,jsx_runtime.jsx)(Item.c,{children:title},id)))})}),children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/groupBy.svg"})})})}GroupByActionButton.displayName="GroupByActionButton";try{GroupByActionButton.displayName="GroupByActionButton",GroupByActionButton.__docgenInfo={description:"",displayName:"GroupByActionButton",props:{groupings:{defaultValue:null,description:"",name:"groupings",required:!0,type:{name:"Grouping<K>[]"}},onToggle:{defaultValue:null,description:"",name:"onToggle",required:!0,type:{name:"(id: K) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/GroupByActionButton.tsx#GroupByActionButton"]={docgenInfo:GroupByActionButton.__docgenInfo,name:"GroupByActionButton",path:"../example-app/src/GroupByActionButton.tsx#GroupByActionButton"})}catch(__react_docgen_typescript_loader_error){}const ChangesGroupByActionButton=()=>{const groupings=(0,es.sJ)(changesViewGroupingsState),toggleGroup=(0,es._8)((({set})=>id=>{set(changesGroupingActiveState(id),(value=>!value))}),[]);return(0,jsx_runtime.jsx)(GroupByActionButton,{groupings,onToggle:toggleGroup})};ChangesGroupByActionButton.displayName="ChangesGroupByActionButton";const ViewOptionsActionButton=()=>{const[showRelatedFiles,setShowRelatedFiles]=(0,es.FV)(showRelatedFilesState),[showIgnoredFiles,setShowIgnoredFiles]=(0,es.FV)(showIgnoredFilesState),viewOptions={showRelatedFiles,showIgnoredFiles};return(0,jsx_runtime.jsx)(IconButtonWithMenu,{renderMenu:({menuProps})=>(0,jsx_runtime.jsxs)(Menu.v2,{...menuProps,selectedKeys:Object.keys(viewOptions).filter((key=>viewOptions[key])),onAction:key=>{switch(key){case"showIgnoredFiles":return setShowIgnoredFiles((value=>!value));case"showRelatedFiles":return setShowRelatedFiles((value=>!value))}},children:[(0,jsx_runtime.jsx)(Item.c,{children:"Show Ignored Files"},"showIgnoredFiles"),(0,jsx_runtime.jsx)(Item.c,{children:"Show Files Related to Active Changelist"},"showRelatedFiles")]}),children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/show.svg"})})};function ChangesViewToolbar(){return(0,jsx_runtime.jsxs)(Toolbar.o,{border:"bottom",children:[(0,jsx_runtime.jsx)(ActionButton.K,{actionId:CommonActionIds.$.REFRESH}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:VcsActionIds.ROLLBACK}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:VcsActionIds.SHOW_DIFF}),(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Changelists"}),children:(0,jsx_runtime.jsx)(ChangeListsActionButton,{})}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:VcsActionIds.SHELVE_SILENTLY}),(0,jsx_runtime.jsx)(Toolbar.J,{}),(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Group By"}),children:(0,jsx_runtime.jsx)(ChangesGroupByActionButton,{})}),(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"View Options"}),children:(0,jsx_runtime.jsx)(ViewOptionsActionButton,{})}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:CommonActionIds.$.EXPAND_ALL}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:CommonActionIds.$.COLLAPSE_ALL})]})}ViewOptionsActionButton.displayName="ViewOptionsActionButton",ChangesViewToolbar.displayName="ChangesViewToolbar";var useEventCallback=__webpack_require__("./src/utils/useEventCallback.ts");const tasksState=(0,es.cn)({key:"tasks.list",default:[]}),firstTaskState=(0,es.nZ)({key:"tasks.first",get:({get})=>get(tasksState)[0]}),taskCountState=(0,es.nZ)({key:"tasks.count",get:({get})=>get(tasksState).length});let progressSeq=0;const useRunTask=()=>{const setTasksState=(0,es.Zl)(tasksState);return(0,useEventCallback.$)((({title,isCancelable=!1},task)=>{const abortController=new esm.qf.cancelToken,id=++progressSeq;setTasksState((tasks=>[...tasks,{id:progressSeq++,title,abortController,isCancelable,progress:{fraction:0,text:"",secondaryText:"",isIndeterminate:!1}}]));const setTaskProgressState=updates=>{setTasksState((tasks=>tasks.map((task=>task.id===id?{...task,progress:{...task.progress,...updates}}:task))))},taskDefinition="function"==typeof task?{run:task}:task;return Promise.resolve(taskDefinition.run({setFraction(fraction){setTaskProgressState({fraction})},setText(text){setTaskProgressState({text})},setSecondaryText(secondaryText){setTaskProgressState({secondaryText})},setIndeterminate(isIndeterminate){setTaskProgressState({isIndeterminate})}},abortController.signal)).finally((()=>{setTasksState((tasks=>tasks.filter((task=>task.id!==id)))),taskDefinition.onFinished?.()})),id}))},useCancelTask=()=>(0,es._8)((({snapshot})=>id=>{const task=snapshot.getLoadable(tasksState).getValue().find((task=>task.id===id));task&&task.abortController.abort()})),resolvedRefState=(0,es.CG)({key:"vcs/resolved-branche-ref",get:({repoRoot,ref})=>()=>isomorphic_git.ZP.resolveRef({fs,dir:repoRoot,ref,depth:3})});var mapObjIndexed=__webpack_require__("../../node_modules/ramda/es/mapObjIndexed.js");const dateToString=date=>`${date.getMonth()+1}/${date.getDate()}/${date.getFullYear().toString().slice(-2)}`,dateRangeToString=dateRange=>dateRange.from&&dateRange.to?`Between ${dateToString(dateRange.from)} and ${dateToString(dateRange.to)}`:dateRange.from?`since ${dateToString(dateRange.from)}`:dateRange.to?`until ${dateToString(dateRange.to)}`:"",vcsTabKeysState=(0,es.cn)({key:"vcs/log/tabs/keys",default:["MAIN"]}),vcsActiveTabKeyState=(0,es.cn)({key:"vcs/log/tabs/activeKey",default:"MAIN"}),vcsTabTitleState=(0,es.CG)({key:"vcs/logs/tab/title",get:key=>({get})=>{const searchQuery=get(vcsLogFilter.searchQuery(key)),user=get(vcsLogFilter.user(key)),date=get(vcsLogFilter.date(key)),branches=get(vcsLogFilter.branch(key)),parts=[];return branches?.length>0&&parts.push({short:branches.join(", "),long:`on ${branches.join(", ")}`}),date&&parts.push({short:dateRangeToString(date),long:`made ${dateRangeToString(date)}`}),searchQuery&&parts.push({short:`'${searchQuery}'`,long:`containing '${searchQuery}'`}),user&&parts.push({short:user,long:`by ${user}`}),`Log${parts.length>0?": ":""}${1===parts.length?parts[0].short:parts.map((part=>part.long)).join(" ")}`}}),tabStats=[],vcsLogTabState=someAtomFamily=>(tabStats.push(someAtomFamily),someAtomFamily),vcsLogTabShowBranchesState=vcsLogTabState((0,es.xu)({key:"vcs/logs/filter/showBranches",default:!1})),vcsLogTabShowCommitDetailsState=vcsLogTabState((0,es.xu)({key:"vcs/logs/showCommitDetails",default:!0})),vcsLogTabShowCommitDetailsInCurrentTabState=(0,es.nZ)({key:"vcs/logs/showCommitDetails/currentTab",get:({get})=>get(vcsLogTabShowCommitDetailsState(get(vcsActiveTabKeyState)))}),CURRENT_USER_FILTER_VALUE="*",vcsLogFilter={searchQuery:vcsLogTabState((0,es.xu)({key:"vcs/logs/filter/searchQuery",default:""})),matchCase:vcsLogTabState((0,es.xu)({key:"vcs/logs/filter/matchCase",default:!1})),regExp:vcsLogTabState((0,es.xu)({key:"vcs/logs/filter/regExp",default:!1})),user:vcsLogTabState((0,es.xu)({key:"vcs/logs/filter/user",default:null})),date:(0,es.xu)({key:"vcs/logs/filter/date",default:null}),branch:vcsLogTabState((0,es.xu)({key:"vcs/logs/filter/branch",default:[]}))},vcsLogFilterCurrentTab=(0,mapObjIndexed.Z)(((atomFamily,key)=>(0,es.nZ)({key:`vcs/logs/currentTabFilter/${key}`,get:({get})=>get(atomFamily(get(vcsActiveTabKeyState))),set:({set,get},newValue)=>{set(atomFamily(get(vcsActiveTabKeyState)),newValue)}})),vcsLogFilter),useResetFilters=()=>(0,es._8)((({reset})=>tabKey=>{Object.values(vcsLogFilter).map((state=>state(tabKey))).forEach(reset)}),[]),closeTabCallback=({set,snapshot,reset})=>tabKey=>{const tabs=snapshot.getLoadable(vcsTabKeysState).getValue();snapshot.getLoadable(vcsActiveTabKeyState).getValue()===tabKey&&set(vcsActiveTabKeyState,tabs[tabs.findIndex((key=>key===tabKey))-1]||tabs[0]),set(vcsTabKeysState,(keys=>keys.filter((key=>key!==tabKey)))),tabStats.forEach((state=>reset(state(tabKey))))};var sort=__webpack_require__("../../node_modules/ramda/es/sort.js");const cache={},commitDateComparator=(a,b)=>b.commit.committer.timestamp-a.commit.committer.timestamp;var indexBy=__webpack_require__("../../node_modules/ramda/es/indexBy.js");function match(input,query,flags={}){return flags.regExp?new RegExp(query,flags.matchCase?"":"i").test(input):flags.matchCase?input.includes(query):input.toLowerCase().includes(query.toLowerCase())}const allCommitsState=(0,es.nZ)({key:"vcs/allRepoCommits",get:({get})=>async function readCommits(fs,...sources){const allCommits=[],commitsMap={};let commitsToProcess=[];commitsToProcess.forEach((item=>{commitsMap[item.readCommitResult.oid]=item}));const initialCommits=await Promise.all(sources.flatMap((({refs,repoPath,isBare})=>refs.map((async ref=>{const commit=await isomorphic_git.ZP.resolveRef({...getCommonArgs({repoPath,isBare}),ref,depth:3}).then((oid=>isomorphic_git.ZP.readCommit({...getCommonArgs({repoPath,isBare}),oid})));return{repoPath,isBare,commit,refs:new Set([ref])}})))));for((0,sort.Z)((({commit:c1},{commit:c2})=>commitDateComparator(c1,c2)),initialCommits).forEach((({commit,refs,repoPath,isBare})=>addCommit({repoPath,isBare},commit,-1,refs)));commitsToProcess.length>0;){const{readCommitResult:latestCommit,repoPath,isBare,containingRefs}=commitsToProcess.shift();allCommits.push({repoPath,readCommitResult:latestCommit,containingRefs}),(await Promise.all(latestCommit.commit.parent.map((oid=>isomorphic_git.ZP.readCommit({...getCommonArgs({repoPath,isBare}),oid}))))).forEach((commit=>{const index=commitsToProcess.findIndex((({readCommitResult:aCommit})=>commitDateComparator(aCommit,commit)>0));addCommit({repoPath,isBare},commit,index,containingRefs)}))}return allCommits;function addCommit({repoPath,isBare},commit,index,refs){if(commitsMap[commit.oid])commitsMap[commit.oid].containingRefs=new Set([...commitsMap[commit.oid].containingRefs,...refs]);else{const entry={readCommitResult:commit,containingRefs:commitsMap[commit.oid]?new Set([...commitsMap[commit.oid].containingRefs,...refs]):refs,repoPath,isBare};commitsMap[commit.oid]=entry,commitsToProcess.splice(index>=0?index:commitsToProcess.length,0,entry)}}function getCommonArgs({repoPath,isBare}){return{fs,cache,[isBare?"gitdir":"dir"]:repoPath}}}(fs,...get(allBranchesState).map((({repoRoot,localBranches,remoteBranches})=>({repoPath:repoRoot,refs:["HEAD"].concat(localBranches.map((branch=>branch.name))).concat(remoteBranches.map((branch=>`${branch.remote}/${branch.name}`)))}))))}),commitsTableRowsState=(0,es.nZ)({key:"vcs/log/rows",get:({get})=>{const searchQuery=get(vcsLogFilterCurrentTab.searchQuery),branches=get(vcsLogFilterCurrentTab.branch),flags={matchCase:get(vcsLogFilterCurrentTab.matchCase),regExp:get(vcsLogFilterCurrentTab.regExp)},dateFilter=get(vcsLogFilterCurrentTab.date),rows=get(allCommitsState).filter((({containingRefs})=>!branches?.length||branches.some((branch=>containingRefs.has(branch))))).filter((({readCommitResult:{commit}})=>(!dateFilter?.from||1e3*commit.author.timestamp>dateFilter.from.getTime())&&(!dateFilter?.to||1e3*commit.author.timestamp<dateFilter.to.getTime()))).filter((({readCommitResult:{commit}})=>!searchQuery||match(commit.message,searchQuery,flags)||match(commit.tree,searchQuery,{matchCase:!1})));return{rows,byOid:(0,indexBy.Z)((({readCommitResult:commit})=>commit.oid),rows)}}}),allResolvedRefsState=(0,es.nZ)({key:"vcs/logs/all-refs",get:({get})=>{const repoBranches=get(allBranchesState),refs={},addRef=(ref,value)=>{refs[ref]=refs[ref]||[],refs[ref].push(value)};return repoBranches.forEach((({repoRoot})=>{addRef(get(resolvedRefState({repoRoot,ref:"HEAD"})),{type:"head",name:"HEAD"})})),repoBranches.forEach((({repoRoot,localBranches,currentBranch})=>{localBranches.forEach((branch=>{addRef(get(resolvedRefState({repoRoot,ref:branch.name})),{type:"localBranch",name:branch.name,isCurrent:currentBranch?.name===branch.name,trackingBranch:branch.trackingBranch})}))})),repoBranches.forEach((({repoRoot,remoteBranches})=>remoteBranches.forEach((branch=>{const branchName=`${branch.remote}/${branch.name}`;addRef(get(resolvedRefState({repoRoot,ref:branchName})),{type:"remoteBranch",name:branchName})})))),refs}}),commitsSelectionState=(0,es.cn)({key:"vcs/log/commits/selection",default:new Set([])}),selectedCommitOids=(0,es.nZ)({key:`${commitsSelectionState.key}/keys`,get:({get})=>{const selection=get(commitsSelectionState);return"all"===selection?get(commitsTableRowsState).rows.map((({readCommitResult:{oid}})=>oid)):[...selection].map((i=>`${i}`))}}),selectedCommitsState=(0,es.nZ)({key:`${commitsSelectionState.key}/items`,get:({get})=>get(selectedCommitOids).map((oid=>get(commitsTableRowsState).byOid[oid]))}),selectedCommitState=(0,es.nZ)({key:"vcs/log/details/selectedCommit",get:({get})=>{const oid=get(selectedCommitOids)[0];return oid&&get(commitsTableRowsState).byOid[oid]||null}}),vcsTableShowCommitTimestampState=(0,es.cn)({key:"vcs/log/commits/showCommitTimestamp",default:!1}),vcsTableReferencesOnTheLeftState=(0,es.cn)({key:"vcs/log/commits/referencesOnTheLeft",default:!1}),vcsTableHighlightMyCommitsState=(0,es.cn)({key:"vcs/log/commits/highlightMyCommits",default:!1}),authorColumn={id:"Default.Author",name:"Author"},hashColumn={id:"Default.Hash",name:"Hash"},dateColumn={id:"Date.Date",name:"Date"},defaultVisibleColumns=[authorColumn.id,dateColumn.id],vcsTableColumnsVisibilityState=(0,es.xu)({key:"vcs/log/commits/highlightMyCommits",default:id=>defaultVisibleColumns.includes(id)}),commitSuccessfulMessage=new core.C("{count, plural,\n    =1 {1 file committed}\n    other {# files committed}\n  }","en-US");function useCommitChanges(){const refreshFileStatus=useRefreshRepoStatuses(),balloonManager=(0,BalloonManager.L)(),runTask=useRunTask();return(0,es._8)((({snapshot,set,refresh})=>(changes,commitMessage)=>{const taskId=runTask({title:"Committing...",isCancelable:!1},{run:async({setIndeterminate})=>{setIndeterminate(!0);const changesGroupedByRepo=(0,groupBy.Z)((({repoRoot})=>repoRoot),(await Promise.all(changes.map((async change=>{const filePath=Change.path(change),repoRoot=snapshot.getLoadable(vcsRootForFile(filePath)).getValue(),content=await fs.promises.exists(filePath)?await fs.promises.readFile(filePath):null;return repoRoot?{repoRoot,filePath:path_browserify_default().relative(repoRoot,filePath),content}:null})))).filter(array_utils.N));await Promise.all(Object.entries(changesGroupedByRepo).map((async([repoRoot,files])=>{const updates=files.reduce(((soFar,{filePath,content})=>({...soFar,[filePath]:"string"==typeof content?(new TextEncoder).encode(content):content})),{});await async function commitFiles({updates,fs,dir,gitdir,...options}){const headTreeOid=await isomorphic_git.ZP.resolveRef({fs,dir,gitdir,ref:"HEAD"}),entries=(await isomorphic_git.ZP.readTree({fs,dir,gitdir,oid:headTreeOid})).tree;let containsChange=!1;if(await Promise.all(Object.entries(updates).map((async([filePath,blob])=>{const index=entries.findIndex((({path})=>path===filePath));if(null==blob)return void(index>-1&&(containsChange=!0,entries.splice(index,1)));const entry=entries[index],oid=await isomorphic_git.ZP.writeBlob({fs,dir,gitdir,blob});entry?entry.oid=oid:entries.push({type:"blob",mode:"100644",oid,path:filePath}),containsChange=!0}))),!containsChange)throw new Error("Nothing to commit!");const newTreeOid=await isomorphic_git.ZP.writeTree({fs,dir,gitdir,tree:entries}),commitRef=await isomorphic_git.ZP.commit({...options,fs,dir,gitdir,tree:newTreeOid});await Promise.all(Object.keys(updates).map((filepath=>isomorphic_git.ZP.resetIndex({fs,dir,gitdir,filepath,ref:commitRef}))))}({fs,dir:repoRoot,updates,message:commitMessage,author:{name:"Alireza",email:"alireza.mirian@gmail.com"}});const currentBranch=await snapshot.getPromise(repoCurrentBranchNameState(repoRoot));currentBranch&&refresh(resolvedRefState({repoRoot,ref:currentBranch})),refresh(resolvedRefState({repoRoot,ref:"HEAD"}))}))).then((()=>{refresh(allCommitsState),refreshFileStatus().catch(console.error),balloonManager.show({icon:"Info",body:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[`${commitSuccessfulMessage.format({count:changes.length})}: `,commitMessage.split("\n").flatMap(((part,index)=>[(0,jsx_runtime.jsx)("br",{},index),part])).slice(1)]})})}),(e=>{balloonManager.show({icon:"Error",title:"Commit failed!",body:"Could not commit files."}),console.error("Commit error",e)}))},onFinished:()=>{set(commitTaskIdState,null)}});set(commitTaskIdState,taskId)}),[])}try{useCommitChanges.displayName="useCommitChanges",useCommitChanges.__docgenInfo={description:"Returns a commit callback to be used to commit a bunch of changes.\nSyncs all relevant state (like file status, and change lists) after commit.",displayName:"useCommitChanges",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Changes/ChangesView/useCommitChanges.tsx#useCommitChanges"]={docgenInfo:useCommitChanges.__docgenInfo,name:"useCommitChanges",path:"../example-app/src/VersionControl/Changes/ChangesView/useCommitChanges.tsx#useCommitChanges"})}catch(__react_docgen_typescript_loader_error){}const StyledCommitMessageContainer=styled.zo.div`
  background: ${({theme})=>theme.dark?"#2b2b2b":"#fff"};
  height: 100%;
  display: flex;
  flex-direction: column;
`,StyledCommitMessageTextArea=styled.zo.textarea`
  flex: 1;
  background: none;
  padding: 0.25rem 0.375rem;
  color: ${({theme})=>theme.dark?"#a9b7c6":"#000"};
  font-family: inherit;
  border: none;
  resize: none;
  outline: none;
`,StyledCommitActionsRow=styled.zo.div`
  display: flex;
  gap: 0.3rem;
  padding: 0.4rem;
`,StyledErrorMessage=styled.zo.div`
  display: flex;
  align-items: center;
  padding: 0.125rem 0.5rem;
  gap: 0.25rem;
  position: sticky; // prevents commit message scroll jump when message is toggled on and off
  color: ${({theme})=>theme.commonColors.red};
`;function CommitView({editorRef}){const commitMessageTextAreaRef=(0,react.useRef)(null),[commitMessage,setCommitMessage]=(0,es.FV)(commitMessageState),commit=useCommitChanges(),amend=(0,es.sJ)(amendCommitState),balloonManager=(0,BalloonManager.L)(),[errorMessage,setErrorMessage]=(0,es.FV)(commitErrorMessageState),commitTaskId=(0,es.sJ)(commitTaskIdState);(0,react.useEffect)((()=>{commitMessage&&setErrorMessage("")}),[commitMessage]);const commitSelectedChanges=(0,es._8)((({snapshot})=>{const includedChanges=snapshot.getLoadable(includedChangesState).getValue(),commitMessage=snapshot.getLoadable(commitMessageState).getValue();return()=>{0!==includedChanges.length?commitMessage?snapshot.getLoadable(amendCommitState).getValue()?balloonManager.show({icon:"Error",title:"Unsupported action",body:"Amending commits is not yet supported."}):commit(includedChanges,commitMessage):setErrorMessage("Specify commit message"):setErrorMessage("Select files to commit")}}),[]),{hasFocus}=(0,DefaultToolWindow.e)();return(0,react.useImperativeHandle)(editorRef,(()=>({focus:()=>{commitMessageTextAreaRef.current?.focus()}})),[]),(0,jsx_runtime.jsxs)(StyledCommitMessageContainer,{children:[(0,jsx_runtime.jsx)(StyledCommitMessageTextArea,{ref:commitMessageTextAreaRef,value:commitMessage,onChange:event=>{setCommitMessage(event.target.value)},placeholder:"Commit Message","data-gramm":"false"}),errorMessage&&(0,jsx_runtime.jsxs)(StyledErrorMessage,{children:[(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/error.svg"})," ",errorMessage]}),(0,jsx_runtime.jsxs)(StyledCommitActionsRow,{children:[(0,jsx_runtime.jsx)(Button.z,{preventFocusOnPress:!0,variant:hasFocus?"default":void 0,onPress:commitSelectedChanges,isDisabled:null!=commitTaskId,mnemonic:"i",children:amend?"Amend Commit":"Commit"}),(0,jsx_runtime.jsx)(Button.z,{preventFocusOnPress:!0,onPress:notImplemented,mnemonic:"P",children:amend?"Amend Commit and Push...":"Commit and Push..."})]})]})}CommitView.displayName="CommitView";try{CommitView.displayName="CommitView",CommitView.__docgenInfo={description:"Commit message and commit buttons shown in the bottom/right split view of the commit toolwindow",displayName:"CommitView",props:{editorRef:{defaultValue:null,description:"",name:"editorRef",required:!0,type:{name:"RefObject<{ focus: () => void; }>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Changes/ChangesView/CommitView.tsx#CommitView"]={docgenInfo:CommitView.__docgenInfo,name:"CommitView",path:"../example-app/src/VersionControl/Changes/ChangesView/CommitView.tsx#CommitView"})}catch(__react_docgen_typescript_loader_error){}var ActionHelpTooltip=__webpack_require__("./src/Tooltip/ActionHelpTooltip.tsx");const ChangesSummary=({changes})=>{const modifiedCount=changes.filter((change=>"MODIFIED"===Change.fileStatus(change))).length,addedCount=changes.filter(Change.isAddition).length,deletedCount=changes.filter(Change.isDeletion).length;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[addedCount>0&&(0,jsx_runtime.jsxs)(StatusColor,{status:"ADDED",children:[addedCount," added"]}),modifiedCount>0&&(0,jsx_runtime.jsxs)(StatusColor,{status:"MODIFIED",children:[modifiedCount," modified"]}),deletedCount>0&&(0,jsx_runtime.jsxs)(StatusColor,{status:"DELETED",children:[deletedCount," deleted"]})]})};try{ChangesSummary.displayName="ChangesSummary",ChangesSummary.__docgenInfo={description:"",displayName:"ChangesSummary",props:{changes:{defaultValue:null,description:"",name:"changes",required:!0,type:{name:"readonly AnyChange[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Changes/ChangesSummary.tsx#ChangesSummary"]={docgenInfo:ChangesSummary.__docgenInfo,name:"ChangesSummary",path:"../example-app/src/VersionControl/Changes/ChangesSummary.tsx#ChangesSummary"})}catch(__react_docgen_typescript_loader_error){}const StyledActionsRow=styled.zo.div`
  display: flex;
  padding: 0.125rem;
  position: relative;
`,StyledAmendCheckbox=(0,styled.zo)(Checkbox.X)`
  padding-right: 0.625rem;
`,StyledChangesSummaryContainer=styled.zo.span`
  position: absolute;
  right: 0.5rem;
  top: 0.25rem;
  background: ${({theme})=>theme.color("Panel.background")};
  z-index: 1;
`,ChangesViewChangesSummary=()=>{const changes=(0,es.sJ)(includedChangesState);return(0,jsx_runtime.jsx)(ChangesSummary,{changes})};function CommitActionsRow(){const[amend,setAmend]=(0,es.FV)(amendCommitState);return(0,jsx_runtime.jsxs)(StyledActionsRow,{children:[(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionHelpTooltip.h,{actionName:"Amend Commit",helpText:"Modify the latest commit of the current branch"}),children:props=>(0,jsx_runtime.jsx)("span",{...props,children:(0,jsx_runtime.jsx)(StyledAmendCheckbox,{isSelected:amend,onChange:value=>{setAmend(value),focusCommitMessage()},preventFocus:!0,mnemonic:"m",children:"Amend"})})}),(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Show Commit Options"}),children:(0,jsx_runtime.jsx)(IconButton.hU,{onPress:notImplemented,children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/gear.svg"})})}),(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Commit Message History"}),children:(0,jsx_runtime.jsx)(IconButton.hU,{isDisabled:!0,onPress:notImplemented,children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"vcs/historyInline.svg"})})}),(0,jsx_runtime.jsx)(StyledChangesSummaryContainer,{children:(0,jsx_runtime.jsx)(ChangesViewChangesSummary,{})})]})}ChangesViewChangesSummary.displayName="ChangesViewChangesSummary",CommitActionsRow.displayName="CommitActionsRow";try{CommitActionsRow.displayName="CommitActionsRow",CommitActionsRow.__docgenInfo={description:"Amend checkbox, commit message history button, and summary of included changes, shown as a row\nbellow changes tree, in commit tool window.",displayName:"CommitActionsRow",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Changes/ChangesView/CommitActionsRow.tsx#CommitActionsRow"]={docgenInfo:CommitActionsRow.__docgenInfo,name:"CommitActionsRow",path:"../example-app/src/VersionControl/Changes/ChangesView/CommitActionsRow.tsx#CommitActionsRow"})}catch(__react_docgen_typescript_loader_error){}const deleteChangeListMsg=new core.C("Delete {count, plural,\n    =1 {Changelist}\n    other {Changelists}\n  }","en-US"),selectedFilesCountMsg=new core.C("{count, plural,\n    =1 {1 selected file}\n    other {# selected files}\n  }","en-US"),deletablePathsUnderChangesTreeSelectionState=(0,es.nZ)({key:"changesView.selectedKeys.deletablePaths",get:({get})=>[...get(changesUnderSelectedKeys).values()].filter((change=>"DELETED"!==change.type)).map(Change.path)}),useChangesViewActions_deleteActionState=(0,es.nZ)({key:`vcs.changesView.action.${CommonActionIds.$.DELETE}`,get:({get,getCallback})=>({id:CommonActionIds.$.DELETE,title:"Delete",description:"Delete selected item",isDisabled:0===get(deletablePathsUnderChangesTreeSelectionState).length,actionPerformed:getCallback((callbackInterface=>async()=>{const{snapshot}=callbackInterface,deletePaths=deleteFilesCallback(callbackInterface),pathsToDelete=snapshot.getLoadable(deletablePathsUnderChangesTreeSelectionState).getValue(),alertDialog=snapshot.getLoadable(alertDialogRefState).getValue().current;if(0===pathsToDelete.length)return;await(alertDialog?.confirm({title:"Delete",okText:"Delete",message:(0,jsx_runtime.jsx)("div",{style:{width:354},children:`Are you sure you want to delete ${selectedFilesCountMsg.format({count:pathsToDelete.length})}?`})}))&&(console.log(`deleting ${pathsToDelete}`),await deletePaths(pathsToDelete))}))})});function useChangesViewActions(){const selectedChangeLists=(0,es.sJ)(changeListsUnderSelection),setActiveChangeList=(0,es._8)((({set,snapshot})=>changeListId=>{const changeLists=snapshot.getLoadable(changeListsState).getValue(),targetChangeList=changeLists.find((({id})=>id===changeListId));targetChangeList&&set(changeListsState,changeLists.map((changeList=>({...changeList,active:changeList===targetChangeList}))))}),[]),nonActiveSelectedChangeLists=[...selectedChangeLists].filter((list=>!list.active)),refresh=useRefreshRepoStatuses(),actions=[{id:CommonActionIds.$.REFRESH,title:"Refresh",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/refresh.svg"}),actionPerformed:refresh},{id:VcsActionIds.SHELVE_SILENTLY,title:"Shelve Silently",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"vcs/shelveSilent.svg"}),actionPerformed:notImplemented},(0,es.sJ)(useChangesViewActions_deleteActionState)];return 1===selectedChangeLists.size&&actions.push({id:VcsActionIds.RENAME_CHANGELIST,title:"Edit Changelist...",description:"Edit name and description of selected changelist",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/edit.svg"}),actionPerformed:notImplemented}),nonActiveSelectedChangeLists.length>0&&actions.push({id:VcsActionIds.REMOVE_CHANGELIST,title:deleteChangeListMsg.format({count:nonActiveSelectedChangeLists.length}),description:"Remove changelist and move all changes to another",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/remove.svg"}),actionPerformed:notImplemented}),1===nonActiveSelectedChangeLists.length&&actions.push({title:"Set Active Changelist",description:"Set changelist to which new changes are placed by default",id:VcsActionIds.SET_DEFAULT_CHANGELIST,icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/selectall.svg"}),actionPerformed:()=>{setActiveChangeList(nonActiveSelectedChangeLists[0].id)}}),actions}const ChangesViewSplitter_StyledContainer=styled.zo.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,StyledTreeViewWrapper=styled.zo.div`
  flex: 1;
  overflow: auto;
  position: relative;
`,StyledLoadingWrapper=styled.zo.div`
  position: absolute;
  right: 0.125rem;
  top: 0.125rem;
  z-index: 1;
`;let editor=null,focusCommitMessage=()=>{setTimeout((()=>{editor?.focus()}))};const ChangesViewSplitter=()=>{const{state:{anchor}}=(0,ToolWindowStateProvider.j)(),treeRef=(0,react.useRef)(null),editorRef=(0,react.useRef)(null),orientation=(0,utils.Ss)(anchor),updating=(0,es.sJ)(repoStatusUpdatingState),[commitMessageSize,setCommitMessageSize]=(0,es.FV)(commitMessageSizeState(orientation)),changesViewActions=useChangesViewActions(),treeActions=(0,useTreeActions.x)({treeRef});return editor=editorRef.current,(0,jsx_runtime.jsx)(ThreeViewSplitter.D,{orientation,innerView:(0,jsx_runtime.jsx)(ActionsProvider.DG,{actions:[...treeActions,...changesViewActions],children:({shortcutHandlerProps})=>(0,jsx_runtime.jsxs)(ChangesViewSplitter_StyledContainer,{...shortcutHandlerProps,children:[(0,jsx_runtime.jsx)(ChangesViewToolbar,{}),(0,jsx_runtime.jsxs)(StyledTreeViewWrapper,{children:[updating&&(0,jsx_runtime.jsx)(Delayed,{children:(0,jsx_runtime.jsx)(StyledLoadingWrapper,{children:(0,jsx_runtime.jsx)(LoadingGif,{})})}),(0,jsx_runtime.jsx)(ChangeViewTree,{treeRef})]}),(0,jsx_runtime.jsx)(CommitActionsRow,{})]})}),innerViewMinSize:50,lastView:(0,jsx_runtime.jsx)(CommitView,{editorRef}),lastSize:commitMessageSize,onLastResize:setCommitMessageSize})};ChangesViewSplitter.displayName="ChangesViewSplitter";const ChangesViewZeroState_StyledContainer=styled.zo.div`
  min-height: 70%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 50px;
  color: ${({theme})=>theme.commonColors.inactiveTextColor};
  white-space: nowrap;
`;function ChangesViewZeroState(){const performAction=(0,ActionsProvider.DI)();return(0,jsx_runtime.jsx)(ChangesViewZeroState_StyledContainer,{children:(0,jsx_runtime.jsxs)("div",{style:{textAlign:"center"},children:["To commit changes,"," ",(0,jsx_runtime.jsx)(Link.r,{onPress:()=>performAction(VcsActionIds.GIT_INIT),children:"Create Git repository..."}),(0,jsx_runtime.jsx)("br",{}),"For recent changes, see"," ",(0,jsx_runtime.jsx)(Link.r,{onPress:notImplemented,children:"Local History..."}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(PlatformIcon.vq,{style:{verticalAlign:"text-top"},icon:"general/contextHelp.svg"})," ",(0,jsx_runtime.jsx)(Link.r,{onPress:notImplemented,children:"Version Control integration"})," "]})})}ChangesViewZeroState.displayName="ChangesViewZeroState";const ChangesViewPane_StyledContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"ChangesViewPane__StyledContainer",componentId:"sc-1pqba05-0"})(["display:flex;flex-direction:column;height:100%;"]),ChangesViewPane=()=>{const vcsRoots=(0,es.sJ)(vcsRootsState);return(0,jsx_runtime.jsx)(ChangesViewPane_StyledContainer,{children:vcsRoots.length>0?(0,jsx_runtime.jsx)(ChangesViewSplitter,{}):(0,jsx_runtime.jsx)(ChangesViewZeroState,{})})};function TrackingBranchInfo({branches}){return(0,jsx_runtime.jsx)("table",{style:{borderSpacing:0},children:branches.map((({branch,repoRoot})=>{const mapping=branch.trackingBranch?`${branch.name} → ${branch.trackingBranch}`:branches.length>1?`${branch.name} (no tracking branch)`:"No tracking branch";return branches.length>1?(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsxs)("td",{children:[path_browserify_default().basename(repoRoot),":  "]}),(0,jsx_runtime.jsx)("td",{children:mapping})]},repoRoot):(0,jsx_runtime.jsx)("tr",{children:(0,jsx_runtime.jsx)("td",{children:mapping})},repoRoot)}))})}ChangesViewPane.displayName="ChangesViewPane",TrackingBranchInfo.displayName="TrackingBranchInfo";try{TrackingBranchInfo.displayName="TrackingBranchInfo",TrackingBranchInfo.__docgenInfo={description:"",displayName:"TrackingBranchInfo",props:{branches:{defaultValue:null,description:"",name:"branches",required:!0,type:{name:"{ repoRoot: string; branch: LocalBranch; }[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/TrackingBranchInfo.tsx#TrackingBranchInfo"]={docgenInfo:TrackingBranchInfo.__docgenInfo,name:"TrackingBranchInfo",path:"../example-app/src/VersionControl/TrackingBranchInfo.tsx#TrackingBranchInfo"})}catch(__react_docgen_typescript_loader_error){}const changesBranchesState=(0,es.nZ)({key:"vcs/commitToolWindow/changedRepos",get:({get})=>get(allChangesState).map((change=>get(vcsRootForFile(Change.path(change))))).filter(array_utils.N).map((repoRoot=>{const branch=get(repoBranchesState(repoRoot)).currentBranch;return branch?{repoRoot,branch}:null})).filter(array_utils.N)}),CommitToolWindow=()=>{const areChangesGroupedByRepo=(0,es.sJ)(changesGroupingActiveState("repository")),changesBranches=(0,es.sJ)(changesBranchesState),title=!areChangesGroupedByRepo&&changesBranches[0]?`Commit to ${changesBranches[0]?.branch?.name||"!"}`:"Commit";return(0,jsx_runtime.jsx)(MultiViewToolWindow.y,{children:(0,jsx_runtime.jsx)(MultiViewToolWindow.y.View,{tabContent:(0,jsx_runtime.jsx)(TooltipTrigger.a,{isDisabled:areChangesGroupedByRepo||0===changesBranches.length,tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:(0,jsx_runtime.jsx)(TrackingBranchInfo,{branches:changesBranches})}),children:(0,jsx_runtime.jsx)("span",{children:title})}),children:(0,jsx_runtime.jsx)(ChangesViewPane,{})},"commit")})};function UNSAFE_FocusRestoringSuspense({children=null}){return(0,react.useEffect)((()=>{const focusedElement=document.activeElement;return()=>{focusedElement instanceof HTMLElement&&focusedElement!==document.activeElement&&document.activeElement===document.body&&focusedElement.isConnected&&focusedElement.focus()}}),[]),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children})}CommitToolWindow.displayName="CommitToolWindow";try{UNSAFE_FocusRestoringSuspense.displayName="UNSAFE_FocusRestoringSuspense",UNSAFE_FocusRestoringSuspense.__docgenInfo={description:"Works around an issue where the focus is lost after a component rendering the focused element is suspended and\nunsuspended. Haven't tracked down the issue, but it can be the same react 17 issue we worked around in\n{@link UNSAFE_React17SuspenseFix }.",displayName:"UNSAFE_FocusRestoringSuspense",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/UNSAFE_FocusRestoringSuspense.tsx#UNSAFE_FocusRestoringSuspense"]={docgenInfo:UNSAFE_FocusRestoringSuspense.__docgenInfo,name:"UNSAFE_FocusRestoringSuspense",path:"../example-app/src/UNSAFE_FocusRestoringSuspense.tsx#UNSAFE_FocusRestoringSuspense"})}catch(__react_docgen_typescript_loader_error){}var ToolWindowTabContent=__webpack_require__("./src/Tabs/ToolWindowTabs/ToolWindowTabContent.tsx"),useCreateDefaultActionGroup=__webpack_require__("./src/ActionSystem/components/useCreateDefaultActionGroup.tsx"),useActionGroup=__webpack_require__("./src/ActionSystem/useActionGroup.tsx");const ActionGroupMenu=({actionGroup,...props})=>(0,jsx_runtime.jsx)(ActionsMenu.C,{"aria-label":actionGroup.title,actions:actionGroup.children,...props});ActionGroupMenu.displayName="ActionGroupMenu";try{ActionGroupMenu.displayName="ActionGroupMenu",ActionGroupMenu.__docgenInfo={description:"Renders children of an action group as a menu.",displayName:"ActionGroupMenu",props:{children:{defaultValue:null,description:"Allows for rendering a custom menu component, e.g. {@link SpeedSearchMenu }.\nIf not provided, {@link Menu} is rendered, receiving additional props that\nare passed to `ActionsMenu`.\nIf it is provided, additional {@link Menu} props are not allowed, and they\ncan be passed directly to the returned menu element.",name:"children",required:!1,type:{name:"RenderMenu"}},actionContext:{defaultValue:null,description:"Context with which actions should be performed.\nUsually the context by which the ActionsMenu itself is opened.\nPass a function for lazy evaluation when the action is selected from the menu.",name:"actionContext",required:!1,type:{name:"ActionContext | (() => ActionContext)"}},actionGroup:{defaultValue:null,description:"",name:"actionGroup",required:!0,type:{name:"Readonly<MutableActionGroup>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ActionSystem/components/ActionGroupMenu.tsx#ActionGroupMenu"]={docgenInfo:ActionGroupMenu.__docgenInfo,name:"ActionGroupMenu",path:"src/ActionSystem/components/ActionGroupMenu.tsx#ActionGroupMenu"})}catch(__react_docgen_typescript_loader_error){}const StyledHeader=styled.zo.div`
  box-sizing: border-box;
  display: flex;
  align-items: center;
  height: 2.0625rem;
  border-bottom: 1px solid ${({theme})=>theme.commonColors.borderColor};
  flex-shrink: 0;
`,StyledSpacer=styled.zo.div`
  flex-grow: 1;
`,StyledPlaceholderContainer=styled.zo.div`
  color: ${({theme})=>theme.commonColors.inactiveTextColor};
  display: flex;
  flex-direction: column;
  justify-content: end;
  align-items: center;
  gap: 0.25rem;
  min-height: 37%;
  overflow: hidden;
`;var PositionedTooltipTrigger=__webpack_require__("./src/Tooltip/PositionedTooltipTrigger.tsx");const parseCommitMessage=commitMessage=>{const lines=commitMessage.split("\n"),bodyLines=lines.slice(1);return{subject:lines[0],bodyAsString:bodyLines.join("\n"),body:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:bodyLines.map(((line,index)=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[index>0&&(0,jsx_runtime.jsx)("br",{}),line]},index)))})}};function shortenOid(oid){return oid.slice(0,8)}const commitDateTimeFormatter=new Intl.DateTimeFormat([],{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric",hour12:!0}),commitTimeFormatter=new Intl.DateTimeFormat([],{hour:"numeric",minute:"numeric",hour12:!0}),commitDateFormatter=new Intl.DateTimeFormat([],{day:"numeric",month:"numeric",year:"2-digit"});function formatCommitDateTime(date){return commitDateTimeFormatter.format(date).replace(" "," ")}function formatCommitDate(date){return commitDateFormatter.format(date)}function formatCommitTime(date){return commitTimeFormatter.format(date).replace(" "," ")}try{shortenOid.displayName="shortenOid",shortenOid.__docgenInfo={description:"",displayName:"shortenOid",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/commit-utils.tsx#shortenOid"]={docgenInfo:shortenOid.__docgenInfo,name:"shortenOid",path:"../example-app/src/VersionControl/VersionControlToolWindow/commit-utils.tsx#shortenOid"})}catch(__react_docgen_typescript_loader_error){}try{formatCommitDateTime.displayName="formatCommitDateTime",formatCommitDateTime.__docgenInfo={description:"",displayName:"formatCommitDateTime",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/commit-utils.tsx#formatCommitDateTime"]={docgenInfo:formatCommitDateTime.__docgenInfo,name:"formatCommitDateTime",path:"../example-app/src/VersionControl/VersionControlToolWindow/commit-utils.tsx#formatCommitDateTime"})}catch(__react_docgen_typescript_loader_error){}try{formatCommitDate.displayName="formatCommitDate",formatCommitDate.__docgenInfo={description:"",displayName:"formatCommitDate",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/commit-utils.tsx#formatCommitDate"]={docgenInfo:formatCommitDate.__docgenInfo,name:"formatCommitDate",path:"../example-app/src/VersionControl/VersionControlToolWindow/commit-utils.tsx#formatCommitDate"})}catch(__react_docgen_typescript_loader_error){}try{formatCommitTime.displayName="formatCommitTime",formatCommitTime.__docgenInfo={description:"",displayName:"formatCommitTime",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/commit-utils.tsx#formatCommitTime"]={docgenInfo:formatCommitTime.__docgenInfo,name:"formatCommitTime",path:"../example-app/src/VersionControl/VersionControlToolWindow/commit-utils.tsx#formatCommitTime"})}catch(__react_docgen_typescript_loader_error){}try{parseCommitMessage.displayName="parseCommitMessage",parseCommitMessage.__docgenInfo={description:"",displayName:"parseCommitMessage",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/commit-utils.tsx#parseCommitMessage"]={docgenInfo:parseCommitMessage.__docgenInfo,name:"parseCommitMessage",path:"../example-app/src/VersionControl/VersionControlToolWindow/commit-utils.tsx#parseCommitMessage"})}catch(__react_docgen_typescript_loader_error){}const commitChangesTreeNodeRenderer=createChangesTreeNodeRenderer({commitParent:simpleGroupingRenderer((node=>`Changes to ${shortenOid(path_browserify_default().basename(node.oid))} ${node.subject.slice(0,50)}`))},{repo:(node,{fileCount})=>({textValue:path_browserify_default().basename(node.repository.dir),rendered:(0,jsx_runtime.jsxs)(ItemLayout.e,{children:[(0,jsx_runtime.jsx)(RepoColorIcon,{rootPath:node.repository.dir}),(0,jsx_runtime.jsx)(HighlightedTextValue.J,{}),(0,jsx_runtime.jsx)(ItemLayout.e.Hint,{children:formatFileCount(fileCount)})]})})}),getCommitChanges_cache={};async function getCommitChanges({fromRef,toRef,...params}){return(await isomorphic_git.ZP.walk({...params,cache:getCommitChanges_cache,trees:[isomorphic_git.ZP.TREE({ref:fromRef}),isomorphic_git.ZP.TREE({ref:toRef})],map:async function map(filepath,[before,after]){const afterOid=await(after?.oid()),beforeOid=await(before?.oid()),afterType=await(after?.type()),beforeType=await(before?.type());if(afterOid===beforeOid)return null;const afterRevision=afterOid?{hash:afterOid,path:path_browserify_default().join(params.dir||"",filepath),isDir:"tree"===afterType,content:async()=>(new TextDecoder).decode(await(after?.content())??new Uint8Array)}:null,beforeRevision=beforeOid?{hash:beforeOid,path:path_browserify_default().join(params.dir||"",filepath),isDir:"tree"===beforeType,content:async()=>(new TextDecoder).decode(await(before?.content())??new Uint8Array)}:null,change=afterRevision||beforeRevision?Change(beforeRevision,afterRevision):null;return!(!change||Change.revision(change).isDir)&&change}})||[]).filter((item=>item))}try{getCommitChanges.displayName="getCommitChanges",getCommitChanges.__docgenInfo={description:"",displayName:"getCommitChanges",props:{dir:{defaultValue:null,description:"",name:"dir",required:!1,type:{name:"string"}},gitdir:{defaultValue:null,description:"",name:"gitdir",required:!1,type:{name:"string"}},fromRef:{defaultValue:null,description:"",name:"fromRef",required:!0,type:{name:"string"}},toRef:{defaultValue:null,description:"",name:"toRef",required:!0,type:{name:"string"}},fs:{defaultValue:null,description:"",name:"fs",required:!0,type:{name:"CallbackFsClient | PromiseFsClient"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/CommitChanges/getCommitChanges.tsx#getCommitChanges"]={docgenInfo:getCommitChanges.__docgenInfo,name:"getCommitChanges",path:"../example-app/src/VersionControl/VersionControlToolWindow/CommitChanges/getCommitChanges.tsx#getCommitChanges"})}catch(__react_docgen_typescript_loader_error){}var lib=__webpack_require__("../../node_modules/diff/lib/index.mjs");const DEFAULT_SIMILARITY_INDEX=50;async function detectRenames(changes){return async function detectRenamesBasedOnContent(changes){const deletions=changes.filter(Change.isDeletion),additions=changes.filter(Change.isAddition),contents=new Map,getContent=async change=>(contents.get(change)||contents.set(change,await Change.content(change)),contents.get(change)??""),renameMapping=new Map;return await Promise.all(deletions.map((async deletion=>Promise.all(additions.map((async addition=>{const similarity=await async function computeSimilarity(file1Content,file2Content){return new Promise(((resolve,reject)=>{(0,lib.Mp)(file1Content,file2Content,((err,value=[])=>{if(err)return reject(err);const{unchanged,total}=value.reduce((({total,unchanged},change)=>{const count=change.count??0;return{total:total+count,unchanged:unchanged+(change.added||change.removed?0:count)}}),{total:0,unchanged:0});resolve(unchanged/total*100)}))}))}(await getContent(deletion),await getContent(addition)),currentCandidate=renameMapping.get(deletion);similarity>=DEFAULT_SIMILARITY_INDEX&&(!currentCandidate||similarity>currentCandidate.similarity)&&renameMapping.set(deletion,{similarity,to:addition})})))))),mergeRenames(renameMapping,changes)}(function detectRenamesBasedOnHash(changes){const deletions=changes.filter(Change.isDeletion),additions=changes.filter(Change.isAddition);return mergeRenames(new Map(deletions.map((deletion=>{const match=additions.find((({after:{hash}})=>hash===deletion.before.hash));return match?[deletion,{to:match}]:null})).filter(array_utils.N)),changes)}(changes))}function mergeRenames(renameMapping,changes){const renamedChanges=[...renameMapping.values()].map((rename=>rename.to));return changes.map((change=>{if(Change.isDeletion(change)){const candidate=renameMapping.get(change);if(candidate)return Change(change.before,candidate?.to.after)}return change})).filter((change=>!renamedChanges.includes(change)))}const CommitsChangedFiles_state_changesGroupingActiveState=(0,es.xu)({key:"vcs/log/commits/changes/isGroupingActive",default:id=>id===directoryGrouping.id}),commitChangesTreeRefState=(0,es.cn)({key:"vcs/log/commits/changes/treeRef",default:react.createRef(),dangerouslyAllowMutability:!0}),CommitsChangedFiles_state_expandedKeysState=(0,es.cn)({key:"vcs/log/commits/changes/expandedKeys",default:new Set}),CommitsChangedFiles_state_selectionState=(0,es.cn)({key:"vcs/log/commits/changes/selectedKeys",default:new Set}),commitsDiffWithoutRenamesState=(0,es.CG)({key:"vcs/log/commits/diffWithoutRenamesState",get:params=>()=>getCommitChanges({fs,...params})}),commitsDiffState=(0,es.CG)({key:"vcs/log/commits/diffState",get:params=>({get})=>detectRenames(get(commitsDiffWithoutRenamesState(params)))}),getChangedFilesState=state=>async({get})=>{const commitLogItem=get(selectedCommitsState)[0],{byOid}=get(commitsTableRowsState),toRef=commitLogItem?.readCommitResult?.oid,parents=commitLogItem?.readCommitResult.commit.parent;if(toRef&&parents){const groupFn=((...args)=>getPrefixedChangesGroupFn(...args)(""))({get,groupings:defaultChangeGroupings,isActive:CommitsChangedFiles_state_changesGroupingActiveState}),rootNodes=parents?.map((parent=>({type:"commitParent",key:changesTreeNodeKey("commitParent",parent),oid:parent,subject:byOid[parent]?.readCommitResult.commit.message||"",children:groupFn([...get(state({toRef,fromRef:parent,dir:commitLogItem.repoPath}))].map((node=>changeNode(node))))}))),{expandAllKeys,fileCountsMap,...result}=changesTreeNodesResult(1===rootNodes.length?rootNodes[0].children:rootNodes.filter((({children})=>children.length>0)));return(0,tree_utils.kD)((node=>("directory"===node.type?"a_":"b_")+commitChangesTreeNodeRenderer.getTextValue(node,{fileCountsMap}).toLowerCase()),{roots:result.rootNodes,getChildren:node=>"children"in node?node.children:null}),{...result,fileCountsMap,expandAllKeys:new Set([...expandAllKeys].filter((key=>!`${key}`.startsWith("commitParent"))))}}return null},changedFilesWithoutRenamesState=(0,es.nZ)({key:"vcs/log/commits/selection/changesWithoutRename",get:getChangedFilesState(commitsDiffWithoutRenamesState)}),changedFilesState=(0,es.nZ)({key:"vcs/log/commits/selection/changes",get:getChangedFilesState(commitsDiffState)});try{CommitsChangedFiles_state_changesGroupingActiveState.displayName="changesGroupingActiveState",CommitsChangedFiles_state_changesGroupingActiveState.__docgenInfo={description:"",displayName:"changesGroupingActiveState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/CommitChanges/CommitsChangedFiles.state.tsx#changesGroupingActiveState"]={docgenInfo:CommitsChangedFiles_state_changesGroupingActiveState.__docgenInfo,name:"changesGroupingActiveState",path:"../example-app/src/VersionControl/VersionControlToolWindow/CommitChanges/CommitsChangedFiles.state.tsx#changesGroupingActiveState"})}catch(__react_docgen_typescript_loader_error){}try{changedFilesWithoutRenamesState.displayName="changedFilesWithoutRenamesState",changedFilesWithoutRenamesState.__docgenInfo={description:"Changes corresponding to the currently selected commits, before rename detection, which can be slow.",displayName:"changedFilesWithoutRenamesState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/CommitChanges/CommitsChangedFiles.state.tsx#changedFilesWithoutRenamesState"]={docgenInfo:changedFilesWithoutRenamesState.__docgenInfo,name:"changedFilesWithoutRenamesState",path:"../example-app/src/VersionControl/VersionControlToolWindow/CommitChanges/CommitsChangedFiles.state.tsx#changedFilesWithoutRenamesState"})}catch(__react_docgen_typescript_loader_error){}try{changedFilesState.displayName="changedFilesState",changedFilesState.__docgenInfo={description:"Changes corresponding to the currently selected commits.",displayName:"changedFilesState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/CommitChanges/CommitsChangedFiles.state.tsx#changedFilesState"]={docgenInfo:changedFilesState.__docgenInfo,name:"changedFilesState",path:"../example-app/src/VersionControl/VersionControlToolWindow/CommitChanges/CommitsChangedFiles.state.tsx#changedFilesState"})}catch(__react_docgen_typescript_loader_error){}const CommitsChangedFiles_StyledLoadingWrapper=styled.zo.div`
  position: absolute;
  inset: 0;
  gap: 0.5rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
`;function CommitChangedFiles({treeShortcutHandlerProps}){const[selectedCommits]=useLatestRecoilValue(selectedCommitsState),treeRef=(0,es.sJ)(commitChangesTreeRefState),nothingSelected=!selectedCommits?.length,stateLoadable=function useFastestValueLoadable(states){const loadables=states.map((state=>(0,es.$P)(state)));return loadables.find((({state})=>"hasValue"===state))||loadables.slice(-1)[0]}([changedFilesState,changedFilesWithoutRenamesState]),state=stateLoadable.valueMaybe(),[expandedKeys,setExpandedKeys]=(0,es.FV)(CommitsChangedFiles_state_expandedKeysState),[selection,setSelection]=(0,es.FV)(CommitsChangedFiles_state_selectionState);return(0,react.useEffect)((()=>{setExpandedKeys(state?.expandAllKeys??new Set),setSelection(new Set)}),[stateLoadable.state]),nothingSelected?(0,jsx_runtime.jsx)(StyledPlaceholderContainer,{children:"Select commits to to view changes"}):(0,jsx_runtime.jsxs)("div",{...treeShortcutHandlerProps,style:{height:"-webkit-fill-available",position:"relative"},children:["loading"===stateLoadable.state&&(0,jsx_runtime.jsx)(Delayed,{children:(0,jsx_runtime.jsxs)(CommitsChangedFiles_StyledLoadingWrapper,{children:[(0,jsx_runtime.jsx)(LoadingGif,{style:{width:"1.5rem"}}),"Loading..."]})}),state&&(0,jsx_runtime.jsx)(SpeedSearchTree.b,{"aria-label":"Commit changes",treeRef,items:state.rootNodes,selectionMode:"multiple",expandedKeys,onExpandedChange:setExpandedKeys,selectedKeys:selection,onSelectionChange:setSelection,style:{paddingBottom:"1rem"},fillAvailableSpace:!0,children:commitChangesTreeNodeRenderer.itemRenderer({fileCountsMap:state.fileCountsMap})}),selectedCommits.length>1&&(0,jsx_runtime.jsx)(PositionedTooltipTrigger.S,{placement:"top",tooltip:(0,jsx_runtime.jsx)(HelpTooltip.k,{helpText:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Showing diff for more than one commit is not currently supported. Only the first selected commit is taken into account."})}),children:props=>(0,jsx_runtime.jsx)("span",{...props,style:{position:"absolute",right:"0.5rem",bottom:"0.5rem"},children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/warning"})})})]})}CommitChangedFiles.displayName="CommitChangedFiles";try{CommitChangedFiles.displayName="CommitChangedFiles",CommitChangedFiles.__docgenInfo={description:"TODO: handle multiple selected commits (check Changes.ShowChangesFromParents https://github.com/JetBrains/intellij-community/blob/ac57611a0612bd65ba2a19c841a4f95b40591134/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/frame/VcsLogChangesBrowser.java#L255-L254)",displayName:"CommitChangedFiles",props:{treeShortcutHandlerProps:{defaultValue:null,description:"",name:"treeShortcutHandlerProps",required:!0,type:{name:"HTMLAttributes<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/CommitChanges/CommitsChangedFiles.tsx#CommitChangedFiles"]={docgenInfo:CommitChangedFiles.__docgenInfo,name:"CommitChangedFiles",path:"../example-app/src/VersionControl/VersionControlToolWindow/CommitChanges/CommitsChangedFiles.tsx#CommitChangedFiles"})}catch(__react_docgen_typescript_loader_error){}var Tooltip=__webpack_require__("./src/Tooltip/Tooltip.tsx");const labelIcon=(0,jsx_runtime.jsx)("path",{fill:"currentColor",d:"M4.2 4.8 C4.8627 4.8 5.4 5.3373 5.4 6 C5.4 6.6627 4.8627 7.2 4.2 7.2 C3.5373 7.2 3 6.6627 3 6 C3 5.3373 3.5373 4.8 4.2 4.8 ZM0.6 2.4 L0.6 7.2 L7.8 14.4 L12.6 9.6 L5.4 2.4 Z"}),vcsLogStandardColors_TIP={light:"#ffd100",dark:"#e1c731"},vcsLogStandardColors_BRANCH={light:"#3cb45c",dark:"#3cb45c"},vcsLogStandardColors_BRANCH_REF={light:"#9f79b5",dark:"#9f79b5"},vcsLogStandardColors_TAG={light:"#7a7a7a",dark:"#999999"},gitLogColors={head:({theme})=>theme.color("VersionControl.GitLog.headIconColor",vcsLogStandardColors_TIP),localBranch:({theme})=>theme.color("VersionControl.GitLog.localBranchIconColor",vcsLogStandardColors_BRANCH),remoteBranch:({theme})=>theme.color("VersionControl.GitLog.remoteBranchIconColor",vcsLogStandardColors_BRANCH_REF),tag:({theme})=>theme.color("VersionControl.GitLog.tagIconColor",vcsLogStandardColors_TAG)},StyledRef=(0,styled.zo)(StyledCurrentBranchTag)`
  border-radius: 3px;
  align-items: stretch;
  font-size: 0.75rem;
`,StyledLabelSvg=styled.zo.svg.attrs({viewBox:"0 0 14.5 14.5"})`
  width: 1rem;
  height: 1rem;
  stroke: rgba(0, 0, 0, 0.25);
  stroke-width: 0.5px;
  color: ${({type,theme})=>gitLogColors[type]({theme})};
  z-index: 1; // for the right vertical order of grouped labels
  &:not(:first-child) {
    margin-right: -11px;
  }
`,StyledRefIconGroup=styled.zo.span`
  display: inline-flex;
  flex-direction: row-reverse;
`,StyledLabelText=styled.zo.span`
  text-overflow: ellipsis;
  overflow: hidden;
`;function RefIcon({type}){return(0,jsx_runtime.jsx)(StyledLabelSvg,{type,children:labelIcon})}function RefIconGroup({types}){return(0,jsx_runtime.jsx)(StyledRefIconGroup,{children:types.map(((type,index)=>(0,jsx_runtime.jsx)(StyledLabelSvg,{type,children:labelIcon},index)))})}function RefLabel({types,children}){return(0,jsx_runtime.jsxs)(StyledRef,{children:[(0,jsx_runtime.jsx)(RefIconGroup,{types}),(0,jsx_runtime.jsx)(StyledLabelText,{children})]})}RefIcon.displayName="RefIcon",RefIconGroup.displayName="RefIconGroup",RefLabel.displayName="RefLabel";try{RefIcon.displayName="RefIcon",RefIcon.__docgenInfo={description:"",displayName:"RefIcon",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"head"'},{value:'"localBranch"'},{value:'"remoteBranch"'},{value:'"tag"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/RefLabel.tsx#RefIcon"]={docgenInfo:RefIcon.__docgenInfo,name:"RefIcon",path:"../example-app/src/VersionControl/VersionControlToolWindow/RefLabel.tsx#RefIcon"})}catch(__react_docgen_typescript_loader_error){}try{RefIconGroup.displayName="RefIconGroup",RefIconGroup.__docgenInfo={description:"",displayName:"RefIconGroup",props:{types:{defaultValue:null,description:"",name:"types",required:!0,type:{name:'("head" | "localBranch" | "remoteBranch" | "tag")[]'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/RefLabel.tsx#RefIconGroup"]={docgenInfo:RefIconGroup.__docgenInfo,name:"RefIconGroup",path:"../example-app/src/VersionControl/VersionControlToolWindow/RefLabel.tsx#RefIconGroup"})}catch(__react_docgen_typescript_loader_error){}try{RefLabel.displayName="RefLabel",RefLabel.__docgenInfo={description:"",displayName:"RefLabel",props:{types:{defaultValue:null,description:"",name:"types",required:!0,type:{name:'("head" | "localBranch" | "remoteBranch" | "tag")[]'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/RefLabel.tsx#RefLabel"]={docgenInfo:RefLabel.__docgenInfo,name:"RefLabel",path:"../example-app/src/VersionControl/VersionControlToolWindow/RefLabel.tsx#RefLabel"})}catch(__react_docgen_typescript_loader_error){}const CommitDetails_StyledContainer=styled.zo.div`
  padding: 0.875rem;
  cursor: default;
`,StyledCommitMessage=styled.zo.div`
  font-family: "JetBrains Mono", monospace;
  line-height: 1.125rem;
  margin-bottom: 1.25rem;
  margin-right: 1.1875rem;
`,StyledCommitMessageHeader=styled.zo.div`
  font-weight: bold;
`,StyledCommitterInfo=styled.zo.div`
  color: ${({theme})=>theme.commonColors.label({disabled:!0})};
`,StyledCommitInfoRow=styled.zo.div`
  line-height: 1.2;
  display: flex;
  gap: 0.25rem;
  margin-bottom: 0.75rem;
`,StyledRepoColorIcon=(0,styled.zo)(RepoColorIcon)`
  align-self: start;
`,StyledRefsContainer=styled.zo.span`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.25rem;
  margin-bottom: 0.75rem;
`;function CommitDetails(){const[firstSelectedCommit]=useLatestRecoilValue(selectedCommitState),[allResolvedRefs]=useLatestRecoilValue(allResolvedRefsState),isMultiRepo=(0,es.sJ)(vcsRootsState).length>0;if(!firstSelectedCommit)return(0,jsx_runtime.jsx)(StyledPlaceholderContainer,{children:"No commits selected"});const{readCommitResult:{commit,oid},containingRefs,repoPath}=firstSelectedCommit,{subject,body}=parseCommitMessage(commit.message),committerInfo=[];commit.committer.name!==commit.author.name&&committerInfo.push((0,jsx_runtime.jsxs)(react.Fragment,{children:["by ",commit.committer.name," ",(0,jsx_runtime.jsx)(EmailLink,{email:commit.committer.email})]},commit.committer.email)),commit.committer.timestamp!==commit.author.timestamp&&committerInfo.push(formatDateAndTime(1e3*commit.committer.timestamp));const refs=allResolvedRefs?.[oid]||[],refsByType=(0,groupBy.Z)((ref=>ref.type),refs);return(0,jsx_runtime.jsxs)(CommitDetails_StyledContainer,{children:[(0,jsx_runtime.jsxs)(StyledCommitMessage,{children:[(0,jsx_runtime.jsx)(StyledCommitMessageHeader,{children:subject}),body]}),(0,jsx_runtime.jsxs)(StyledCommitInfoRow,{children:[isMultiRepo&&(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(Tooltip.u,{children:repoPath}),children:props=>(0,jsx_runtime.jsx)(StyledRepoColorIcon,{...props,rootPath:repoPath})}),(0,jsx_runtime.jsxs)("div",{children:[`${shortenOid(oid)} ${commit.author.name} `,(0,jsx_runtime.jsx)(EmailLink,{email:commit.author.email})," ",`${formatDateAndTime(new Date(1e3*commit.author.timestamp))}`,committerInfo.length>0&&(0,jsx_runtime.jsxs)(StyledCommitterInfo,{children:["committed ",committerInfo]})]})]}),refs.length>0&&(0,jsx_runtime.jsxs)(StyledRefsContainer,{children:[(0,jsx_runtime.jsx)(RefGroup,{refs:refsByType.head}),(0,jsx_runtime.jsx)(RefGroup,{refs:refsByType.localBranch}),(0,jsx_runtime.jsx)(RefGroup,{refs:refsByType.remoteBranch}),(0,jsx_runtime.jsx)(RefGroup,{refs:refsByType.tag})]}),(0,jsx_runtime.jsxs)("div",{children:["In ",containingRefs.size," branches: ",[...containingRefs].join(", ")]})]})}CommitDetails.displayName="CommitDetails";const StyledRefWithIcon=styled.zo.span`
  display: inline-flex;
  align-items: center;
`;function RefGroup({refs}){return refs?.length?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:refs.map(((ref,index)=>{const name=`${ref.name}${index===refs.length-1?"":","}`;return 0===index?(0,jsx_runtime.jsxs)(StyledRefWithIcon,{children:[(0,jsx_runtime.jsx)(RefIconGroup,{types:refs.map((({type})=>type)).slice(0,2)}),name]}):(0,jsx_runtime.jsx)("span",{children:name})}))}):null}function EmailLink({email}){return(0,jsx_runtime.jsx)("a",{href:`mailto:${email}`,style:{all:"unset"},children:(0,jsx_runtime.jsx)(Link.r,{children:`<${email}>`})})}function formatDateAndTime(date){return`on ${formatCommitDate(date)} at ${formatCommitTime(date)}`}function useRedefineAction(actionId,newId){const action=(0,ActionsProvider.ol)().find((({id})=>id===actionId));return(0,react.useMemo)((()=>{if(!action)return null;const{perform,id,...commonProperties}=action;return{...commonProperties,id:newId,useShortcutsOf:id,isSearchable:!1,actionPerformed:context=>{perform(context)}}}),[action])}EmailLink.displayName="EmailLink";try{useRedefineAction.displayName="useRedefineAction",useRedefineAction.__docgenInfo={description:"Currently, action groups are expected to **define** the child actions, instead of just referencing already defined\nactions. In such model, where groups are not just a grouping of existing actions, this hook allows for redefining\nexisting actions to be used within a group. Kind of a temporary solution while action system evolves.",displayName:"useRedefineAction",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/useRedefineAction.tsx#useRedefineAction"]={docgenInfo:useRedefineAction.__docgenInfo,name:"useRedefineAction",path:"../example-app/src/useRedefineAction.tsx#useRedefineAction"})}catch(__react_docgen_typescript_loader_error){}const splitViewSizeState=(0,es.cn)({key:"vcs/toolwindow/splitViewSize",default:.5}),VcsLogDetailsView_StyledContainer=styled.zo.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,groupingState=(0,es.nZ)({key:"vcs/log/commits/changes/groupingState",get:({get})=>defaultChangeGroupings.filter((grouping=>(0,es.Oy)(grouping.isAvailable)?get(grouping.isAvailable):grouping.isAvailable)).map((grouping=>({...grouping,key:`groupBy:${grouping.id}`,isActive:get(CommitsChangedFiles_state_changesGroupingActiveState(grouping.id))})))}),GROUP_BY_ACTION_GROUP_ID="Vcs.log.detailsView.groupBy",LAYOUT_ACTION_GROUP_ID="Vcs.log.detailsView.layout",VIEW_OPTIONS_ACTION_GROUP_ID="Vcs.log.detailsView.viewOptions",SHOW_DETAILS_ACTION_ID=`${LAYOUT_ACTION_GROUP_ID}.${VcsActionIds.SHOW_DETAILS}`,SHOW_DIFF_PREVIEW_ACTION_ID=`${LAYOUT_ACTION_GROUP_ID}.${VcsActionIds.SHOW_DIFF_PREVIEW}`,groupingActionId=grouping=>`Vcs.log.detailsView.groupBy.${grouping.id}`;function VcsLogDetailsView({tabKey}){const[splitViewSize,setSplitViewSize]=(0,es.FV)(splitViewSizeState),isDetailsVisible=(0,es.sJ)(vcsLogTabShowCommitDetailsState(tabKey)),toggleGroupBy=(0,es._8)((({set})=>id=>{set(CommitsChangedFiles_state_changesGroupingActiveState(id),(currentValue=>!currentValue))})),createActionGroup=(0,useCreateDefaultActionGroup.w)(),availableGroupings=(0,es.sJ)(groupingState),treeRef=(0,es.sJ)(commitChangesTreeRefState),actions=[createActionGroup({id:VIEW_OPTIONS_ACTION_GROUP_ID,title:"View Options",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/groupBy.svg"}),children:[createActionGroup({id:GROUP_BY_ACTION_GROUP_ID,title:"Group By",menuPresentation:"titledSection",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/groupBy.svg"}),children:availableGroupings.map((grouping=>({id:groupingActionId(grouping),useShortcutsOf:grouping.useShortcutOf,title:grouping.title,actionPerformed:()=>{toggleGroupBy(grouping.id)}})))}),createActionGroup({id:LAYOUT_ACTION_GROUP_ID,menuPresentation:"titledSection",title:"Layout",children:[useRedefineAction(VcsActionIds.SHOW_DETAILS,SHOW_DETAILS_ACTION_ID),useRedefineAction(VcsActionIds.SHOW_DIFF_PREVIEW,SHOW_DIFF_PREVIEW_ACTION_ID)].filter(array_utils.N)})]}),...(0,useTreeActions.x)({treeRef})];return(0,jsx_runtime.jsx)(ActionsProvider.DG,{actions,children:({shortcutHandlerProps})=>(0,jsx_runtime.jsxs)(VcsLogDetailsView_StyledContainer,{children:[(0,jsx_runtime.jsxs)(StyledHeader,{children:[(0,jsx_runtime.jsxs)(Toolbar.o,{children:[(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Show Diff",shortcut:"⌘D"}),children:(0,jsx_runtime.jsx)(IconButton.hU,{isDisabled:!0,children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/diff.svg"})})}),(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Revert Selected Changes"}),children:(0,jsx_runtime.jsx)(IconButton.hU,{isDisabled:!0,children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/rollback.svg"})})}),(0,jsx_runtime.jsx)(IconButtonWithMenu,{renderMenu:({menuProps})=>(0,jsx_runtime.jsx)(VcsLogsDetailsViewOptionsMenu,{menuProps}),children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/groupBy.svg"})})]}),(0,jsx_runtime.jsx)(StyledSpacer,{}),(0,jsx_runtime.jsxs)(Toolbar.o,{style:{flexShrink:0},children:[(0,jsx_runtime.jsx)(ActionButton.K,{actionId:CommonActionIds.$.EXPAND_ALL}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:CommonActionIds.$.COLLAPSE_ALL})]})]}),(0,jsx_runtime.jsx)("div",{style:{flex:1,minHeight:0},children:isDetailsVisible?(0,jsx_runtime.jsx)(ThreeViewSplitter.D,{orientation:"vertical",firstSize:splitViewSize,onFirstResize:setSplitViewSize,firstViewMinSize:10,firstView:(0,jsx_runtime.jsx)(CommitChangedFiles,{treeShortcutHandlerProps:shortcutHandlerProps}),innerView:(0,jsx_runtime.jsx)(CommitDetails,{})}):(0,jsx_runtime.jsx)(CommitChangedFiles,{treeShortcutHandlerProps:shortcutHandlerProps})})]})})}VcsLogDetailsView.displayName="VcsLogDetailsView";const toggleActionsState={[SHOW_DETAILS_ACTION_ID]:vcsLogTabShowCommitDetailsInCurrentTabState,...Object.fromEntries(defaultChangeGroupings.map((grouping=>[groupingActionId(grouping),CommitsChangedFiles_state_changesGroupingActiveState(grouping.id)])))},VcsLogDetailsView_selectedKeysState=(0,es.nZ)({key:"vcs/log/commits/detailsView/viewOptionsSelectedKeys",get:({get})=>Object.entries(toggleActionsState).filter((([,state])=>get(state))).map((([actionId])=>actionId))});function VcsLogsDetailsViewOptionsMenu({menuProps}){const group=(0,useActionGroup.y)(VIEW_OPTIONS_ACTION_GROUP_ID),selectedKeys=(0,es.sJ)(VcsLogDetailsView_selectedKeysState);return group&&(0,jsx_runtime.jsx)(ActionGroupMenu,{actionGroup:group,children:actionMenuProps=>(0,jsx_runtime.jsx)(SpeedSearchMenu.w,{...menuProps,...actionMenuProps,selectedKeys})})}try{VcsLogDetailsView.displayName="VcsLogDetailsView",VcsLogDetailsView.__docgenInfo={description:"",displayName:"VcsLogDetailsView",props:{tabKey:{defaultValue:null,description:"",name:"tabKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/DetailsView/VcsLogDetailsView.tsx#VcsLogDetailsView"]={docgenInfo:VcsLogDetailsView.__docgenInfo,name:"VcsLogDetailsView",path:"../example-app/src/VersionControl/VersionControlToolWindow/DetailsView/VcsLogDetailsView.tsx#VcsLogDetailsView"})}catch(__react_docgen_typescript_loader_error){}var v4=__webpack_require__("../../node_modules/uuid/dist/esm-browser/v4.js"),SearchInput=__webpack_require__("./src/SearchInput/SearchInput.tsx"),AutoHoverPlatformIcon=__webpack_require__("./src/Icon/AutoHoverPlatformIcon.tsx"),BareButton=__webpack_require__("./src/Button/BareButton.tsx");const StyledDropdownButton=styled.zo.button`
  all: unset;
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding-left: 0.25rem;
  cursor: pointer;
  background: transparent;
  color: ${({theme})=>theme.commonColors.label({disabled:!0})};

  line-height: 1.5;
  border-radius: 0.25rem;
  white-space: nowrap;
  border: 2px solid transparent;
  &:hover {
    color: ${({theme})=>theme.color("*.foreground")};
  }
  &:focus-visible {
    border-color: ${({theme})=>theme.commonColors.focusRing({focused:!0})};
  }
`,StyledDropdownIcon=styled.zo.span`
  margin-left: -1px;
  line-height: 1.2;
`,StyledValue=styled.zo.span`
  color: ${({theme})=>theme.color("*.foreground")};
  max-width: 8.25rem;
  overflow: hidden;
  text-overflow: ellipsis;
`,FocusableAutoHoverPlatformIcon=(0,styled.zo)(AutoHoverPlatformIcon.v)`
  &:focus-visible {
    outline: 2px solid
      ${({theme})=>theme.commonColors.focusRing({focused:!0})};
    outline-offset: -2px;
  }
`;function VcsFilterDropdown({label,value,onClear,...menuTriggerProps}){return(0,jsx_runtime.jsx)(MenuTrigger.b,{...menuTriggerProps,children:(props,ref)=>(0,jsx_runtime.jsxs)(StyledDropdownButton,{...props,ref,children:[label,value?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[": ",(0,jsx_runtime.jsx)(StyledValue,{children:value}),(0,jsx_runtime.jsx)(BareButton.V,{onPress:onClear,children:(0,jsx_runtime.jsx)(FocusableAutoHoverPlatformIcon,{icon:"actions/close",hoverIcon:"actions/closeHovered"})})]}):(0,jsx_runtime.jsx)(StyledDropdownIcon,{children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/arrowDownSmall.svg"})})]})})}VcsFilterDropdown.displayName="VcsFilterDropdown";try{VcsFilterDropdown.displayName="VcsFilterDropdown",VcsFilterDropdown.__docgenInfo={description:"",displayName:"VcsFilterDropdown",props:{direction:{defaultValue:{value:"'bottom'"},description:"Where the Menu opens relative to its trigger.",name:"direction",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"top"'},{value:'"left"'},{value:'"start"'},{value:'"right"'},{value:'"end"'}]}},align:{defaultValue:{value:"'start'"},description:"Alignment of the menu relative to the trigger.",name:"align",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'}]}},preventFocusOnPress:{defaultValue:null,description:"",name:"preventFocusOnPress",required:!1,type:{name:"boolean"}},restoreFocus:{defaultValue:null,description:"",name:"restoreFocus",required:!1,type:{name:"boolean"}},positioningTargetRef:{defaultValue:null,description:"By default, the menu is positioned relative to the trigger. `positioningTargetRef` can be used to have the menu\npositioned to another element. An example use case is when the menu trigger is a button inside some list item or\ntext box, but the menu semantically belongs to the container list item or text box.",name:"positioningTargetRef",required:!1,type:{name:"RefObject<HTMLElement>"}},renderMenu:{defaultValue:null,description:"",name:"renderMenu",required:!0,type:{name:'(props: { menuProps: Pick<AriaMenuOptions<unknown>, "autoFocus" | "id" | "aria-labelledby" | "onClose">; }) => ReactNode'}},shouldFlip:{defaultValue:{value:"true"},description:"Whether the menu should automatically flip direction when space is limited.",name:"shouldFlip",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"ReactNode"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/CommitsView/VcsLogDropdown.tsx#VcsFilterDropdown"]={docgenInfo:VcsFilterDropdown.__docgenInfo,name:"VcsFilterDropdown",path:"../example-app/src/VersionControl/VersionControlToolWindow/CommitsView/VcsLogDropdown.tsx#VcsFilterDropdown"})}catch(__react_docgen_typescript_loader_error){}const StyledMenuIconButton=styled.zo.span.attrs({role:"button"})`
  display: inline-flex;
`;function BranchFavoriteButton({onClick,isFavorite,isCurrent}){return(0,jsx_runtime.jsx)(StyledMenuIconButton,{onPointerUp:e=>{e.stopPropagation()},onClick,children:isCurrent?(0,jsx_runtime.jsx)(AutoHoverPlatformIcon.v,{icon:isFavorite?"/platform/dvcs-impl/resources/icons/currentBranchFavoriteLabel.svg":"/platform/dvcs-impl/resources/icons/currentBranchLabel.svg",hoverIcon:isFavorite?"nodes/favorite.svg":"nodes/notFavoriteOnHover.svg",hoverContainerSelector:"[role='menuitem']"}):isFavorite?(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"nodes/favorite.svg"}):(0,jsx_runtime.jsx)(AutoHoverPlatformIcon.v,{icon:"nodes/emptyNode.svg",hoverIcon:"nodes/notFavoriteOnHover.svg",hoverContainerSelector:"[role='menuitem']"})})}BranchFavoriteButton.displayName="BranchFavoriteButton";try{BranchFavoriteButton.displayName="BranchFavoriteButton",BranchFavoriteButton.__docgenInfo={description:"",displayName:"BranchFavoriteButton",props:{isCurrent:{defaultValue:null,description:"",name:"isCurrent",required:!1,type:{name:"boolean"}},isFavorite:{defaultValue:null,description:"",name:"isFavorite",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Branches/BranchFavoriteButton.tsx#BranchFavoriteButton"]={docgenInfo:BranchFavoriteButton.__docgenInfo,name:"BranchFavoriteButton",path:"../example-app/src/VersionControl/Branches/BranchFavoriteButton.tsx#BranchFavoriteButton"})}catch(__react_docgen_typescript_loader_error){}function BranchesFilterDropdown({tabKey}){const[selectedBranches,setSelectedBranches]=(0,es.FV)(vcsLogFilter.branch(tabKey)),resetBranches=(0,es.rb)(vcsLogFilter.branch(tabKey));return(0,jsx_runtime.jsx)(VcsFilterDropdown,{value:selectedBranches.length>0?selectedBranches.join("|"):null,onClear:resetBranches,renderMenu:({menuProps})=>(0,jsx_runtime.jsx)(BranchesFilterMenu,{menuProps,onBranchesSelected:setSelectedBranches}),label:"Branch"})}BranchesFilterDropdown.displayName="BranchesFilterDropdown";const groupRepoRoots=branches=>Object.entries((0,groupBy.Z)((({branchName})=>branchName),branches)).map((([branchName,items])=>({branchName,repoRoots:items.map((item=>item.repoRoot))}))),repoGroupedAllBranchesState=(0,es.nZ)({key:"vcs/allBranchesRepoConsolidated",get:({get})=>{const allBranches=get(allBranchesState),allRemoteBranches=allBranches.flatMap((({remoteBranches,repoRoot})=>remoteBranches.map((branch=>({repoRoot,branchName:`${branch.remote}/${branch.name}`}))))),allLocalBranches=allBranches.flatMap((({localBranches,repoRoot})=>localBranches.map((branch=>({repoRoot,branchName:branch.name})))));return{localBranches:groupRepoRoots(allLocalBranches),remoteBranches:groupRepoRoots(allRemoteBranches)}}});function BranchesFilterMenu({menuProps,onBranchesSelected}){const[favoriteBranches,setFavoriteBranches]=(0,react.useState)([]),{toggleFavorite,isFavorite}=useFavoriteBranches(),[repoGroupedAllBranches]=useLatestRecoilValue(repoGroupedAllBranchesState),{localBranches=[],remoteBranches=[]}=repoGroupedAllBranches||{},remoteBranchesByRemote=(0,groupBy.Z)((({branchName})=>branchName.split("/")[0]),remoteBranches);(0,react.useEffect)((()=>{const createLocalBranchItems=(branchType,branches)=>branches.filter((({branchName,repoRoots})=>repoRoots.some((repoRoot=>isFavorite({branchType,branchName,repoRoot}))))).map((({branchName,repoRoots})=>({branchType,branchName,repoRoots})));setFavoriteBranches([{branchType:"LOCAL",branchName:"HEAD",repoRoots:[]}].concat(createLocalBranchItems("LOCAL",localBranches)).concat(createLocalBranchItems("REMOTE",remoteBranches)))}),[]);const renderBranchItem=({branchName,branchType,repoRoots})=>(0,jsx_runtime.jsx)(Item.c,{textValue:branchName,children:(0,jsx_runtime.jsx)(MenuItemLayout._,{content:branchName,icon:(0,jsx_runtime.jsx)(BranchFavoriteButton,{isFavorite:"HEAD"===branchName||repoRoots.some((repoRoot=>isFavorite({branchType,repoRoot,branchName}))),onClick:()=>{"HEAD"!==branchName&&repoRoots.forEach((repoRoot=>{toggleFavorite({branchType,repoRoot,branchName})}))}})})},`branch:${branchName}`);return(0,jsx_runtime.jsx)(SpeedSearchMenu.w,{...menuProps,submenuBehavior:"toggleOnPress",autoFocus:"first",minWidth:250,onAction:key=>{const[type,value]=`${key}`.split(":");"branch"===type&&value?onBranchesSelected([value]):"favorites"===type?onBranchesSelected(favoriteBranches.map((({branchName})=>branchName))):"select"===type&&notImplemented()},children:[(0,jsx_runtime.jsx)(Item.c,{children:"Select..."},"select"),(0,jsx_runtime.jsx)(Item.c,{children:"Favorites"},"favorites"),...favoriteBranches.map(renderBranchItem),(0,jsx_runtime.jsx)(Divider.i,{}),(0,jsx_runtime.jsx)(Item.c,{title:"Local",children:localBranches.map((({branchName,repoRoots})=>renderBranchItem({branchType:"LOCAL",branchName,repoRoots})))},"local"),...Object.entries(remoteBranchesByRemote).map((([origin,branches])=>(0,jsx_runtime.jsx)(Item.c,{title:`${origin}/...`,children:branches.map((({branchName,repoRoots})=>renderBranchItem({branchType:"REMOTE",branchName,repoRoots})))},`remote:${origin}`)))]})}BranchesFilterMenu.displayName="BranchesFilterMenu";try{BranchesFilterDropdown.displayName="BranchesFilterDropdown",BranchesFilterDropdown.__docgenInfo={description:"",displayName:"BranchesFilterDropdown",props:{tabKey:{defaultValue:null,description:"",name:"tabKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/CommitsView/BranchesFilterDropdown.tsx#BranchesFilterDropdown"]={docgenInfo:BranchesFilterDropdown.__docgenInfo,name:"BranchesFilterDropdown",path:"../example-app/src/VersionControl/VersionControlToolWindow/CommitsView/BranchesFilterDropdown.tsx#BranchesFilterDropdown"})}catch(__react_docgen_typescript_loader_error){}var ProgressBar=__webpack_require__("./src/ProgressBar/ProgressBar.tsx"),List=__webpack_require__("./src/List/List.tsx");const NAME_PATTERN="(\\w+)[\\p{Punct}\\s](\\w+)";function getNameInStandardForm(name){const firstAndLastName=function getFirstAndLastName(name){const matches=name.match(NAME_PATTERN);if(matches)return[matches[1],matches[2]];return null}(name);if(null!=firstAndLastName){const[firstName,lastName]=firstAndLastName;return firstName.toLowerCase()+" "+lastName.toLowerCase()}return function nameToLowerCase(name){return name.match(PRINTABLE_ASCII_PATTERN)?name.toLowerCase():name}(name)}const PRINTABLE_ASCII_PATTERN="[ -~]*";const gitRepoUserState=(0,es.CG)({key:"vcs/repo-user",get:repoRoot=>async()=>({name:await isomorphic_git.ZP.getConfig({fs,dir:repoRoot,path:"user.name"})??"",email:await isomorphic_git.ZP.getConfig({fs,dir:repoRoot,path:"user.email"})??""})}),StyledCommitRow=styled.zo.div`
  display: flex;
  height: 1.5rem;
  align-items: center;
  width: 100%;
  --column-width-1: 130px;
  --column-width-2: 130px;
  --column-width-3: 70px;
`,StyledCommitCell=styled.zo.div`
  overflow: hidden;
  padding-left: 0.25rem;
`,CommitsTableRow_StyledRefsContainer=styled.zo.div`
  ${({asOverlay})=>asOverlay?styled.iv`
          flex-shrink: 0;
        `:styled.iv`
          position: absolute;
          right: 0;
          top: 1px;
          max-width: calc(100% - 100px);
        `};

  display: flex;
  gap: 0.25rem;
  overflow: hidden;
  background: ${({theme})=>theme.currentBackgroundAware(theme.color("List.background"))};
`,StyledMessageContainer=styled.zo.div`
  position: relative;
  display: flex;
  gap: 0.25rem;
`,StyledRefTooltipRow=styled.zo.div`
  display: flex;
  align-items: center;
  margin: 0 0.25rem;
  font-size: 0.75rem;
`,useCurrentUserHighlightStyle=({repoRoot,author})=>{const currentUser=(0,es.sJ)(gitRepoUserState(repoRoot)),shouldHighlightCurrentUserCommits=(0,es.sJ)(vcsTableHighlightMyCommitsState),userFilter=(0,es.sJ)(vcsLogFilterCurrentTab.user);return{fontWeight:shouldHighlightCurrentUserCommits&&userFilter!==CURRENT_USER_FILTER_VALUE&&function areSamePerson(user1,user2){return getNameInStandardForm(user1.name)===getNameInStandardForm(user2.name)}(currentUser,author)?"bold":void 0}};function CommitsTableRow({refs,readCommitResult:{oid,commit:{author,committer,message}},repoRoot}){const showCommitTimestamp=(0,es.sJ)(vcsTableShowCommitTimestampState),referencesOnTheLeft=(0,es.sJ)(vcsTableReferencesOnTheLeftState),isAuthorVisible=(0,es.sJ)(vcsTableColumnsVisibilityState(authorColumn.id)),isDateVisible=(0,es.sJ)(vcsTableColumnsVisibilityState(dateColumn.id)),isHashVisible=(0,es.sJ)(vcsTableColumnsVisibilityState(hashColumn.id)),highlightStyles=useCurrentUserHighlightStyle({author,repoRoot});return(0,jsx_runtime.jsxs)(StyledCommitRow,{children:[(0,jsx_runtime.jsx)(StyledCommitCell,{style:{flexBasis:"0%",flexGrow:1,flexShrink:1},children:(0,jsx_runtime.jsxs)(StyledMessageContainer,{children:[refs&&(0,jsx_runtime.jsx)(CommitRefs,{onLeft:referencesOnTheLeft,refs}),(0,jsx_runtime.jsx)("span",{style:highlightStyles,children:parseCommitMessage(message).subject})]})}),isAuthorVisible&&(0,jsx_runtime.jsxs)(StyledCommitCell,{style:{flexBasis:"auto",width:"var(--column-width-1)",flexShrink:1,...highlightStyles},children:[author.name,committer.name!==author.name&&"*"]}),isDateVisible&&(0,jsx_runtime.jsx)(StyledCommitCell,{style:{flexBasis:"auto",width:"var(--column-width-2)",flexShrink:1,...highlightStyles},children:formatCommitDateTime(1e3*(showCommitTimestamp?committer:author).timestamp)}),isHashVisible&&(0,jsx_runtime.jsx)(StyledCommitCell,{style:{flexBasis:"auto",width:"var(--column-width-3)",flexShrink:1,...highlightStyles},children:shortenOid(oid)})]})}function refKey(ref){return`${ref.type}${ref.name}`}function CommitRefs({refs,onLeft}){const{filteredRefs}=(0,react.useMemo)((()=>{const headIsOnABranch=refs.some((ref=>"localBranch"===ref.type&&ref.isCurrent));return{filteredRefs:refs.filter((ref=>!("head"===ref.type&&headIsOnABranch||"remoteBranch"===ref.type&&refs.find((aBranch=>"localBranch"===aBranch.type&&aBranch.trackingBranch===ref.name)))))}}),[refs]);return(0,jsx_runtime.jsx)(TooltipTrigger.a,{placement:"bottom",delay:800,isDisabled:refs.length<2,tooltip:(0,jsx_runtime.jsx)(Tooltip.u,{withPointer:!0,children:refs.map((ref=>(0,jsx_runtime.jsxs)(StyledRefTooltipRow,{children:[(0,jsx_runtime.jsx)(RefIcon,{type:ref.type}),ref.name]},refKey(ref))))}),children:({ref,...tooltipTriggerProps})=>(0,jsx_runtime.jsx)(CommitsTableRow_StyledRefsContainer,{ref,asOverlay:onLeft,...tooltipTriggerProps,children:filteredRefs.filter((ref=>"remoteBranch"!==ref.type||!refs.find((aBranch=>"localBranch"===aBranch.type&&aBranch.trackingBranch===ref.name)))).map((ref=>{let name=ref.name;const types=[ref.type];return"localBranch"===ref.type&&ref.trackingBranch&&(types.unshift("remoteBranch"),name=`${ref.trackingBranch.split("/")[0]} & ${ref.name}`),"localBranch"===ref.type&&ref.isCurrent&&types.push("head"),(0,jsx_runtime.jsx)(RefLabel,{types,children:name},refKey(ref))}))})})}CommitsTableRow.displayName="CommitsTableRow",CommitRefs.displayName="CommitRefs";try{CommitsTableRow.displayName="CommitsTableRow",CommitsTableRow.__docgenInfo={description:"",displayName:"CommitsTableRow",props:{repoRoot:{defaultValue:null,description:"",name:"repoRoot",required:!0,type:{name:"string"}},readCommitResult:{defaultValue:null,description:"",name:"readCommitResult",required:!0,type:{name:"ReadCommitResult"}},refs:{defaultValue:null,description:"",name:"refs",required:!0,type:{name:"GitRef[] | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/CommitsView/CommitsTableRow.tsx#CommitsTableRow"]={docgenInfo:CommitsTableRow.__docgenInfo,name:"CommitsTableRow",path:"../example-app/src/VersionControl/VersionControlToolWindow/CommitsView/CommitsTableRow.tsx#CommitsTableRow"})}catch(__react_docgen_typescript_loader_error){}var StyledListItem=__webpack_require__("./src/List/StyledListItem.tsx");const StyledProgressBar=(0,styled.zo)(ProgressBar.ko)`
  position: absolute;
  width: 100%;
  z-index: 1;
`,CommitsTable_StyledContainer=styled.zo.div`
  position: relative;
  min-height: 0;
  flex: 1;
  ${StyledListItem.o} {
    // the default "min-width: min-content", which is necessary for sizing overlays (e.g. Popup) containing list/tree,
    // results in horizontally scrollable table. Probably not an issue when a proper Table component is implemented.
    min-width: unset;
  }
`,ResolvedRefsContext=react.createContext({});function CommitsTable(){const currentTabKey=(0,es.sJ)(vcsActiveTabKeyState),resetFilters=useResetFilters(),[result,commitRowsState]=useLatestRecoilValue(commitsTableRowsState),rows=result?.rows,[allResolvedRefs]=useLatestRecoilValue(allResolvedRefsState),[selectedCommits,setSelectedCommits]=(0,es.FV)(commitsSelectionState);return(0,jsx_runtime.jsx)(ResolvedRefsContext.Provider,{value:allResolvedRefs??{},children:(0,jsx_runtime.jsxs)(CommitsTable_StyledContainer,{children:["loading"===commitRowsState&&(0,jsx_runtime.jsx)(StyledProgressBar,{"aria-label":"Loading commits",isIndeterminate:!0}),rows&&rows.length>0&&(0,jsx_runtime.jsx)(List.a,{"aria-label":"Commits list",items:rows,fillAvailableSpace:!0,selectionMode:"multiple",selectedKeys:selectedCommits,onSelectionChange:setSelectedCommits,estimatedItemHeight:24,children:({readCommitResult,repoPath})=>(0,jsx_runtime.jsx)(Item.c,{textValue:readCommitResult.commit.message,children:(0,jsx_runtime.jsx)(ResolvedRefsContext.Consumer,{children:refs=>(0,jsx_runtime.jsx)(CommitsTableRow,{readCommitResult,repoRoot:repoPath,refs:refs[readCommitResult.oid]})})},readCommitResult.oid)}),"hasValue"===commitRowsState&&rows&&0===rows.length&&(0,jsx_runtime.jsxs)(StyledPlaceholderContainer,{children:["No commits matching filters",(0,jsx_runtime.jsx)(Link.r,{onPress:()=>resetFilters(currentTabKey),children:"Reset filters"})]})]})})}CommitsTable.displayName="CommitsTable";const showToggleDefs=[{name:"Commit Timestamp",state:vcsTableShowCommitTimestampState},{name:"References on the Left",state:vcsTableReferencesOnTheLeftState}],highlightToggleDefs=[{name:"My Commits",state:vcsTableHighlightMyCommitsState}],columnToggleDefs=[authorColumn,hashColumn,dateColumn].map((({name,id})=>({name,state:vcsTableColumnsVisibilityState(id)}))),useToggleDef=item=>{const[value,set]=(0,es.FV)(item.state);return{...item,key:item.state.key.replace(/"/g,"_"),value,set}};function CommitsTableViewOptionsMenuIconButton(){const showToggles=showToggleDefs.map(useToggleDef),highlightToggles=highlightToggleDefs.map(useToggleDef),columnToggles=columnToggleDefs.map(useToggleDef),allToggles=showToggles.concat(highlightToggles).concat(columnToggles);return(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"View Options"}),children:(0,jsx_runtime.jsx)(IconButtonWithMenu,{renderMenu:({menuProps})=>(0,jsx_runtime.jsxs)(SpeedSearchMenu.w,{...menuProps,selectedKeys:allToggles.filter((({value})=>value)).map((({key})=>key)),onAction:key=>{const toggle=allToggles.find((({key:toggleKey})=>toggleKey===key));toggle?toggle.set((value=>!value)):notImplemented()},children:[(0,jsx_runtime.jsxs)(Section.$,{title:"Show",children:[(0,jsx_runtime.jsx)(Item.c,{children:"Compact References View"}),(0,jsx_runtime.jsx)(Item.c,{children:"Tag Names"}),(0,jsx_runtime.jsx)(Item.c,{children:"Long Edges"}),showToggles.map((({name,key})=>(0,jsx_runtime.jsx)(Item.c,{children:name},key))),(0,jsx_runtime.jsx)(Item.c,{title:"Columns",children:columnToggles.map((({name,key})=>(0,jsx_runtime.jsx)(Item.c,{children:name},key)))})]}),(0,jsx_runtime.jsxs)(Section.$,{title:"Highlight",children:[highlightToggles.map((({name,key})=>(0,jsx_runtime.jsx)(Item.c,{children:name},key))),(0,jsx_runtime.jsx)(Item.c,{children:"Merge Commits"}),(0,jsx_runtime.jsx)(Item.c,{children:"Current Branch"}),(0,jsx_runtime.jsx)(Item.c,{children:"Not Cherry-Picked Commits"})]})]}),children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/groupBy.svg"})})})}CommitsTableViewOptionsMenuIconButton.displayName="CommitsTableViewOptionsMenuIconButton";const StyledSearchInput=(0,styled.zo)(SearchInput.M)`
  border-radius: 2px;
  width: 219px;
  margin-right: 0.0625rem;
  margin-left: 0.2rem;
`,VcsLogCommitsView_StyledContainer=styled.zo.div`
  height: 100%;
  display: flex;
  flex-direction: column;
`,searchHistoryState=(0,es.cn)({key:"vcs/toolwindow/searchHistory",default:[]});function VcsLogCommitsView({tabKey}){const textFilterRef=(0,es.sJ)(searchInputRefState),[searchQuery,setSearchQuery]=(0,es.FV)(vcsLogFilter.searchQuery(tabKey)),[user,setUser]=(0,es.FV)(vcsLogFilter.user(tabKey)),resetUser=(0,es.rb)(vcsLogFilter.user(tabKey)),[dateFilter,setDateFilter]=(0,es.FV)(vcsLogFilter.date(tabKey)),resetDate=(0,es.rb)(vcsLogFilter.date(tabKey)),[searchHistory,setSearchHistory]=(0,es.FV)(searchHistoryState),[searchInputValue,setSearchInputValue]=(0,react.useState)(searchQuery),getActionShortcut=(0,ActionShortcut.k)(),isRegExpOn=(0,es.sJ)(vcsLogFilter.regExp(tabKey)),isMatchCaseOn=(0,es.sJ)(vcsLogFilter.matchCase(tabKey)),submitSearchQuery=(value=searchInputValue)=>{setSearchQuery(value),value&&!searchHistory.includes(value)&&setSearchHistory((searchHistory=>[value,...searchHistory.filter((item=>item!==value))]))};(0,react.useEffect)((()=>{setSearchInputValue(searchQuery)}),[searchQuery]);const createNewTab=(0,es._8)((({set,snapshot})=>()=>{const newTabId=(0,v4.Z)();set(vcsTabKeysState,(value=>[...value,newTabId])),Object.values(vcsLogFilter).forEach((filterState=>{set(filterState(newTabId),snapshot.getLoadable(filterState(snapshot.getLoadable(vcsActiveTabKeyState).getValue())).getValue())})),set(vcsActiveTabKeyState,newTabId)}),[]),today=new Date,sevenDaysAgo=new Date;sevenDaysAgo.setDate(today.getDate()-7);const yesterday=new Date;yesterday.setDate(today.getDate()-1);const predefinedDateRanges=[{name:"Last 24 hours",value:{from:yesterday}},{name:"Last 7 days",value:{from:sevenDaysAgo}}];return(0,jsx_runtime.jsxs)(VcsLogCommitsView_StyledContainer,{children:[(0,jsx_runtime.jsxs)(StyledHeader,{children:[(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Text or Hash Filter",shortcut:getActionShortcut(VcsActionIds.FOCUS_TEXT_FILTER)}),children:(0,jsx_runtime.jsx)(StyledSearchInput,{inputRef:textFilterRef,value:searchInputValue,onChange:setSearchInputValue,onSubmit:submitSearchQuery,onBlur:()=>submitSearchQuery(),onClear:()=>submitSearchQuery(""),searchHistory,addonAfter:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(AutoHoverPlatformIcon.R,{as:ActionButton.K,excludeFromTabOrder:!1,actionId:VcsActionIds.REG_EXP,children:(0,jsx_runtime.jsx)(AutoHoverPlatformIcon.v,{icon:isRegExpOn?"actions/regexSelected":"actions/regex",hoverIcon:isRegExpOn?"actions/regexSelected":"actions/regexHovered"})}),(0,jsx_runtime.jsx)(AutoHoverPlatformIcon.R,{as:ActionButton.K,excludeFromTabOrder:!1,actionId:VcsActionIds.MATCH_CASE,children:isMatchCaseOn?(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/matchCaseSelected"}):(0,jsx_runtime.jsx)(AutoHoverPlatformIcon.v,{icon:"actions/matchCase",hoverIcon:"actions/matchCaseHovered"})})]})})}),(0,jsx_runtime.jsxs)(Toolbar.o,{children:[(0,jsx_runtime.jsx)(BranchesFilterDropdown,{tabKey}),(0,jsx_runtime.jsx)(VcsFilterDropdown,{value:user===CURRENT_USER_FILTER_VALUE?"me":user,onClear:resetUser,renderMenu:({menuProps})=>(0,jsx_runtime.jsxs)(Menu.v2,{...menuProps,onAction:key=>{if("select"===key)return notImplemented();setUser(`${key}`)},children:[(0,jsx_runtime.jsx)(Item.c,{children:"Select..."},"select"),(0,jsx_runtime.jsx)(Item.c,{children:"me"},CURRENT_USER_FILTER_VALUE)]}),label:"User"}),(0,jsx_runtime.jsx)(VcsFilterDropdown,{value:dateFilter&&VcsLogCommitsView_dateRangeToString(dateFilter),onClear:resetDate,renderMenu:({menuProps})=>(0,jsx_runtime.jsx)(Menu.v2,{...menuProps,onAction:key=>{const predefinedDateRange=predefinedDateRanges.find((({name})=>name===key));predefinedDateRange?setDateFilter(predefinedDateRange.value):notImplemented()},children:[(0,jsx_runtime.jsx)(Item.c,{children:"Select..."},"select"),...predefinedDateRanges.map((({name})=>(0,jsx_runtime.jsx)(Item.c,{children:name},name)))]}),label:"Date"}),(0,jsx_runtime.jsx)(VcsFilterDropdown,{renderMenu:({menuProps})=>(0,jsx_runtime.jsxs)(Menu.v2,{...menuProps,onAction:notImplemented,children:[(0,jsx_runtime.jsx)(Item.c,{children:"Select in..."}),(0,jsx_runtime.jsx)(Item.c,{children:"Select in Tree..."})]}),label:"Paths"}),(0,jsx_runtime.jsx)(Toolbar.J,{}),(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Open New Git Log Tab"}),children:(0,jsx_runtime.jsx)(IconButton.hU,{"aria-label":"Checkout",onPress:createNewTab,children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/openNewTab.svg"})})})]}),(0,jsx_runtime.jsx)(StyledSpacer,{}),(0,jsx_runtime.jsxs)(Toolbar.o,{style:{flexShrink:0},children:[(0,jsx_runtime.jsx)(ActionButton.K,{actionId:VcsActionIds.LOG_REFRESH}),(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Cherry-Pick"}),children:(0,jsx_runtime.jsx)(IconButton.hU,{isDisabled:!0,children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"/platform/dvcs-impl/resources/icons/cherryPick.svg"})})}),(0,jsx_runtime.jsx)(CommitsTableViewOptionsMenuIconButton,{}),(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Go To Hash/Branch/Tag",shortcut:"⌘F"}),children:(0,jsx_runtime.jsx)(IconButton.hU,{children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/find"})})})]})]}),(0,jsx_runtime.jsx)(CommitsTable,{})]})}function VcsLogCommitsView_dateRangeToString(dateRange){return dateRange.from&&dateRange.to?`Between ${dateToString(dateRange.from)} and ${dateToString(dateRange.to)}`:dateRange.from?`since ${dateToString(dateRange.from)}`:dateRange.to?`until ${dateToString(dateRange.to)}`:""}VcsLogCommitsView.displayName="VcsLogCommitsView";try{VcsLogCommitsView.displayName="VcsLogCommitsView",VcsLogCommitsView.__docgenInfo={description:"",displayName:"VcsLogCommitsView",props:{tabKey:{defaultValue:null,description:"",name:"tabKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/CommitsView/VcsLogCommitsView.tsx#VcsLogCommitsView"]={docgenInfo:VcsLogCommitsView.__docgenInfo,name:"VcsLogCommitsView",path:"../example-app/src/VersionControl/VersionControlToolWindow/CommitsView/VcsLogCommitsView.tsx#VcsLogCommitsView"})}catch(__react_docgen_typescript_loader_error){}function getLocalBranchNodes(repoBranches,shouldGroupByDirectory){const allLocalBranches=repoBranches.flatMap((({repoRoot,localBranches,currentBranch})=>localBranches.map((branch=>({repoRoot,isCurrent:currentBranch?.name===branch.name,branch}))))),localBranchNodes=Object.entries((0,groupBy.Z)((({branch})=>branch.name),allLocalBranches)).map((([name,branches])=>{const repos=branches.map((({repoRoot})=>(0,path_browserify.basename)(repoRoot)));return{type:"localBranch",key:`localBranch:${repos.join("|")}:${name}`,name,branches,isFavorite:branches.some((({repoRoot,branch})=>isFavoriteBranchState({repoRoot,branchType:"LOCAL",branchName:branch.name}))),isCurrent:branches.some((({isCurrent})=>isCurrent)),repos:repos.length===repoBranches.length?null:repos}}));return shouldGroupByDirectory?groupNodesByDirectory(localBranchNodes):localBranchNodes}function getRemoteBranchNodes(repoBranches,shouldGroupByDirectory){const allRemoteBranches=repoBranches.flatMap((({repoRoot,remoteBranches})=>remoteBranches.map((branch=>({repoRoot,branch}))))),remoteBranchNodes=Object.entries((0,groupBy.Z)((({branch})=>`${branch.remote}/${branch.name}`),allRemoteBranches)).map((([name,branches])=>{const repos=branches.map((({repoRoot})=>(0,path_browserify.basename)(repoRoot)));return{type:"remoteBranch",key:`remoteBranch:${repos.join("|")}:${name}`,name,branches,isFavorite:branches.some((({repoRoot,branch})=>isFavoriteBranchState({repoRoot,branchType:"REMOTE",branchName:branch.name}))),repos:repos.length===repoBranches.length?null:repos}}));return shouldGroupByDirectory?groupNodesByDirectory(remoteBranchNodes):remoteBranchNodes}const branchesTreeNodeState=(0,es.nZ)({key:"vcs/logs/branchesTree/nodes",get:({get})=>{const repoBranches=get(allBranchesState),shouldGroupByDirectory=get(branchTreeGroupingState("directory")),shouldGroupByRepository=get(isGroupByRepositoryAvailableState)&&get(branchTreeGroupingState("repository"));return[{type:"head"},{type:"branchType",branchType:"LOCAL",children:shouldGroupByRepository?repoBranches.map((repoBranches=>({type:"repository",key:`LOCAL:repository:${repoBranches.repoRoot}`,repoRoot:repoBranches.repoRoot,children:getLocalBranchNodes([repoBranches],shouldGroupByDirectory)}))):getLocalBranchNodes(repoBranches,shouldGroupByDirectory)},{type:"branchType",branchType:"REMOTE",children:shouldGroupByRepository?repoBranches.map((repoBranches=>({type:"repository",key:`REMOTE:repository:${repoBranches.repoRoot}`,repoRoot:repoBranches.repoRoot,children:getRemoteBranchNodes([repoBranches],shouldGroupByDirectory)}))):getRemoteBranchNodes(repoBranches,shouldGroupByDirectory)}]}}),groupNodesByDirectory=createGroupByDirectory({shouldCollapseDirectories:!1,getPath:node=>node.name}),branchTreeGroupingState=(0,es.xu)({key:"vcs/logs/branchesTree/grouping",default:!0}),isGroupByRepositoryAvailableState=(0,es.nZ)({key:"vcs/logs/branchesTree/grouping/repo/available",get:({get})=>get(vcsRootsState).length>1}),branchesTreeRefState=vcsLogTabState((0,es.xu)({key:"vcs/logs/branchesTree/ref",default:react.createRef(),dangerouslyAllowMutability:!0})),BranchesTree_state_selectedKeysState=vcsLogTabState((0,es.xu)({key:"vcs/logs/branchesTree/selectedKeys",default:new Set})),BranchesTree_state_expandedKeysState=vcsLogTabState((0,es.xu)({key:"vcs/logs/branchesTree/expandedKeys",default:new Set})),searchInputState=vcsLogTabState((0,es.xu)({key:"vcs/logs/branchesTree/searchInput",default:""})),groupings=[{id:"directory",title:"Directory",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/GroupByPackage.svg"}),isActive:branchTreeGroupingState("directory"),isAvailable:!0},{id:"repository",title:"Repository",isActive:branchTreeGroupingState("repository"),isAvailable:isGroupByRepositoryAvailableState}],availableGroupingsState=(0,es.nZ)({key:"vcs/logs/branchesTree/availableGroupings",get:({get})=>groupings.filter((grouping=>(0,es.Oy)(grouping.isAvailable)?get(grouping.isAvailable):grouping.isAvailable)).map((grouping=>({...grouping,isActive:get(branchTreeGroupingState(grouping.id))})))});try{branchTreeGroupingState.displayName="branchTreeGroupingState",branchTreeGroupingState.__docgenInfo={description:"",displayName:"branchTreeGroupingState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.state.tsx#branchTreeGroupingState"]={docgenInfo:branchTreeGroupingState.__docgenInfo,name:"branchTreeGroupingState",path:"../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.state.tsx#branchTreeGroupingState"})}catch(__react_docgen_typescript_loader_error){}try{branchesTreeRefState.displayName="branchesTreeRefState",branchesTreeRefState.__docgenInfo={description:"",displayName:"branchesTreeRefState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.state.tsx#branchesTreeRefState"]={docgenInfo:branchesTreeRefState.__docgenInfo,name:"branchesTreeRefState",path:"../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.state.tsx#branchesTreeRefState"})}catch(__react_docgen_typescript_loader_error){}try{BranchesTree_state_selectedKeysState.displayName="selectedKeysState",BranchesTree_state_selectedKeysState.__docgenInfo={description:"",displayName:"selectedKeysState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.state.tsx#selectedKeysState"]={docgenInfo:BranchesTree_state_selectedKeysState.__docgenInfo,name:"selectedKeysState",path:"../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.state.tsx#selectedKeysState"})}catch(__react_docgen_typescript_loader_error){}try{BranchesTree_state_expandedKeysState.displayName="expandedKeysState",BranchesTree_state_expandedKeysState.__docgenInfo={description:"",displayName:"expandedKeysState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.state.tsx#expandedKeysState"]={docgenInfo:BranchesTree_state_expandedKeysState.__docgenInfo,name:"expandedKeysState",path:"../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.state.tsx#expandedKeysState"})}catch(__react_docgen_typescript_loader_error){}try{searchInputState.displayName="searchInputState",searchInputState.__docgenInfo={description:"",displayName:"searchInputState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.state.tsx#searchInputState"]={docgenInfo:searchInputState.__docgenInfo,name:"searchInputState",path:"../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.state.tsx#searchInputState"})}catch(__react_docgen_typescript_loader_error){}function BranchesGroupByActionButton(){const toggleGroup=(0,es._8)((({set})=>id=>{set(branchTreeGroupingState(id),(value=>!value))}),[]),availableGroupings=(0,es.sJ)(availableGroupingsState);return(0,jsx_runtime.jsx)(GroupByActionButton,{groupings:availableGroupings,onToggle:toggleGroup})}BranchesGroupByActionButton.displayName="BranchesGroupByActionButton";var useCollectionSearchInput=__webpack_require__("./src/Collections/useCollectionSearchInput.ts");const branchTreeNodeRenderers={branchType:node=>{return(0,jsx_runtime.jsx)(Item.c,{textValue:(input=node.branchType,input[0].toUpperCase()+input.slice(1).toLowerCase()),childItems:node.children,children:(0,jsx_runtime.jsx)(HighlightedTextValue.J,{})},`${node.type}:${node.branchType}`);var input},localBranch:node=>(0,jsx_runtime.jsx)(Item.c,{textValue:(0,path_browserify.basename)(node.name),children:(0,jsx_runtime.jsx)(ItemLayout.e,{children:(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:(0,jsx_runtime.jsx)(TrackingBranchInfo,{branches:node.branches})}),children:props=>(0,jsx_runtime.jsxs)(ItemLayout.e.Group,{...props,children:[node.isCurrent?(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsxs)(Tooltip.u,{children:["Current ",node.isFavorite&&"favorite ","branch"]}),children:props=>(0,jsx_runtime.jsx)(ItemLayout.e.Group,{...props,children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:node.isFavorite?"/platform/dvcs-impl/resources/icons/currentBranchFavoriteLabel.svg":"/platform/dvcs-impl/resources/icons/currentBranchLabel.svg"})})}):(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"vcs/branchNode"}),(0,jsx_runtime.jsx)(HighlightedTextValue.J,{}),node.repos&&(0,jsx_runtime.jsxs)(ItemLayout.e.Hint,{children:["(",node.repos.join(", "),")"]})]})})})},`${node.key}`),remoteBranch:node=>(0,jsx_runtime.jsx)(Item.c,{textValue:(0,path_browserify.basename)(node.name),children:(0,jsx_runtime.jsxs)(ItemLayout.e,{children:[(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:node.isFavorite?"nodes/favorite.svg":"vcs/branchNode"}),(0,jsx_runtime.jsx)(HighlightedTextValue.J,{}),node.repos&&(0,jsx_runtime.jsxs)(ItemLayout.e.Hint,{children:["(",node.repos.join(", "),")"]})]})},`${node.key}`),repository:node=>(0,jsx_runtime.jsx)(Item.c,{textValue:(0,path_browserify.basename)(node.repoRoot),childItems:node.children,children:(0,jsx_runtime.jsxs)(ItemLayout.e,{children:[(0,jsx_runtime.jsx)(RepoColorIcon,{rootPath:node.repoRoot}),(0,jsx_runtime.jsx)(HighlightedTextValue.J,{})]})},`${node.key}`),directory:node=>(0,jsx_runtime.jsx)(Item.c,{textValue:(0,path_browserify.basename)(node.dirPath),childItems:node.children,children:(0,jsx_runtime.jsxs)(ItemLayout.e,{children:[(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"nodes/folder.svg"}),(0,jsx_runtime.jsx)(HighlightedTextValue.J,{})]})},`${node.type}_${node.parentNodePath}${node.dirPath}`),head:node=>(0,jsx_runtime.jsx)(Item.c,{textValue:"HEAD (Current Branch)",children:(0,jsx_runtime.jsx)(HighlightedTextValue.J,{})},`${node.type}`)};const keyToBranch=key=>{const[type,_repo,branchName]=key.split(":");return"head"===type?"HEAD":"localBranch"===type||"remoteBranch"===type?branchName??null:null};try{keyToBranch.displayName="keyToBranch",keyToBranch.__docgenInfo={description:"",displayName:"keyToBranch",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/branchTreeNodeRenderers.tsx#keyToBranch"]={docgenInfo:keyToBranch.__docgenInfo,name:"keyToBranch",path:"../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/branchTreeNodeRenderers.tsx#keyToBranch"})}catch(__react_docgen_typescript_loader_error){}const BranchesTree_StyledSearchInput=styled.zo.input`
  all: unset;
  flex: 1;
  align-self: stretch;
`,BranchesTree_StyledContainer=styled.zo.div`
  min-width: 0; // don't outgrow the container
  flex-grow: 1; // fill the available space
  display: flex;
  flex-direction: column;
`,StyledSearchIconContainer=styled.zo.span`
  display: inline-flex;
  margin-top: -0.0625rem;
  margin-left: 0.7rem;
  margin-right: 0.25rem;
  cursor: text;
`;function BranchesTree({tabKey}){const[branchesTreeNodes]=useLatestRecoilValue(branchesTreeNodeState),[selectedKeys,setSelectedKeys]=(0,es.FV)(BranchesTree_state_selectedKeysState(tabKey)),[expandedKeys,setExpandedKeys]=(0,es.FV)(BranchesTree_state_expandedKeysState(tabKey)),[searchTerm,setSearchTerm]=(0,es.FV)(searchInputState(tabKey)),treeRef=(0,es.sJ)(branchesTreeRefState(tabKey)),ref=(0,react.useRef)(null),searchInputRef=(0,react.useRef)(null),selectionManagerRef=(0,react.useRef)(null),[isInputFocused,setInputFocused]=(0,react.useState)(!1),setBranchFilter=(0,es.Zl)(vcsLogFilterCurrentTab.branch),onAction=key=>{const branch=keyToBranch(`${key}`);branch&&setBranchFilter([branch])},{collectionSearchInputProps}=(0,useCollectionSearchInput.R)({collectionRef:ref,selectionManager:selectionManagerRef.current,onAction});return(0,jsx_runtime.jsxs)(BranchesTree_StyledContainer,{children:[(0,jsx_runtime.jsxs)(StyledHeader,{children:[(0,jsx_runtime.jsx)(StyledSearchIconContainer,{children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/search"})}),(0,jsx_runtime.jsx)(BranchesTree_StyledSearchInput,{ref:searchInputRef,tabIndex:-1,value:searchTerm,onChange:e=>setSearchTerm(e.target.value),...(0,mergeProps.d)(collectionSearchInputProps,{onFocus:()=>{setInputFocused(!0)},onBlur:()=>{setInputFocused(!1)}})})]}),(0,jsx_runtime.jsx)(SpeedSearchTree.b,{ref,treeRef,selectionManagerRef,items:branchesTreeNodes??[],selectionMode:"multiple",selectedKeys,onSelectionChange:setSelectedKeys,expandedKeys,onExpandedChange:setExpandedKeys,onAction,fillAvailableSpace:!0,showAsFocused:isInputFocused,searchTerm,onSearchTermChange:setSearchTerm,keepSearchActiveOnBlur:!0,hideSpeedSearchPopup:!0,isSearchActive:!0,children:node=>branchTreeNodeRenderers[node.type](node)})]})}BranchesTree.displayName="BranchesTree";try{BranchesTree.displayName="BranchesTree",BranchesTree.__docgenInfo={description:"",displayName:"BranchesTree",props:{tabKey:{defaultValue:null,description:"",name:"tabKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.tsx#BranchesTree"]={docgenInfo:BranchesTree.__docgenInfo,name:"BranchesTree",path:"../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/BranchesTree.tsx#BranchesTree"})}catch(__react_docgen_typescript_loader_error){}const DELETE_BRANCH_ACTION_ID="Git.DeleteBranch",SHOW_BRANCH_DIFF_ACTION_ID="Git.Compare.With.Current",SHOW_MY_BRANCHES_ACTION_ID="Git.Show.My.Branches",FETCH_ACTION_ID="Git.Fetch",TOGGLE_FAVORITE_ACTION_ID="Git.Toggle.Favorite",VcsBranchesView_StyledContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"VcsBranchesView__StyledContainer",componentId:"sc-vamle4-0"})(["display:flex;height:100%;"]);function VcsBranchesView({tabKey}){const treeRef=(0,es.sJ)(branchesTreeRefState(tabKey)),actions=[{id:VcsActionIds.GIT_UPDATE_SELECTED,title:"Update Selected",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/checkOut"}),actionPerformed:()=>{notImplemented()}},{id:DELETE_BRANCH_ACTION_ID,title:"Delete branch",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/gc"}),useShortcutsOf:"SafeDelete",actionPerformed:()=>{notImplemented()}},{id:SHOW_BRANCH_DIFF_ACTION_ID,title:"Compare with current",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/diff"}),useShortcutsOf:VcsActionIds.SHOW_DIFF,actionPerformed:()=>{notImplemented()}},{id:SHOW_MY_BRANCHES_ACTION_ID,title:"Show My Branches",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/find"}),actionPerformed:()=>{notImplemented()}},{id:FETCH_ACTION_ID,title:"Fetch All Remotes",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"vcs/fetch"}),actionPerformed:()=>{notImplemented()}},{id:TOGGLE_FAVORITE_ACTION_ID,title:"Mark/Unmark as Favorite",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"nodes/favorite"}),actionPerformed:()=>{notImplemented()}},...(0,useTreeActions.x)({treeRef})];return(0,jsx_runtime.jsx)(ActionsProvider.DG,{actions,children:({shortcutHandlerProps})=>(0,jsx_runtime.jsxs)(VcsBranchesView_StyledContainer,{...shortcutHandlerProps,children:[(0,jsx_runtime.jsx)(VcsLogBranchesViewToolbar,{}),(0,jsx_runtime.jsx)(BranchesTree,{tabKey})]})})}VcsBranchesView.displayName="VcsBranchesView";const StyledToolbar=(0,styled_components_browser_esm.ZP)(Toolbar.o).withConfig({displayName:"VcsBranchesView__StyledToolbar",componentId:"sc-vamle4-1"})(["height:100%;flex-shrink:0;"]);function VcsLogBranchesViewToolbar(){return(0,jsx_runtime.jsxs)(StyledToolbar,{border:"right",orientation:"vertical",children:[(0,jsx_runtime.jsx)(ActionButton.K,{actionId:VcsActionIds.GIT_LOG_HIDE_BRANCHES}),(0,jsx_runtime.jsx)(Toolbar.J,{}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:VcsActionIds.GIT_CREATE_NEW_BRANCH}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:VcsActionIds.GIT_UPDATE_SELECTED}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:DELETE_BRANCH_ACTION_ID}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:SHOW_BRANCH_DIFF_ACTION_ID}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:SHOW_MY_BRANCHES_ACTION_ID}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:FETCH_ACTION_ID}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:TOGGLE_FAVORITE_ACTION_ID}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:VcsActionIds.GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH}),(0,jsx_runtime.jsx)(Toolbar.J,{}),(0,jsx_runtime.jsx)(BranchesGroupByActionButton,{}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:CommonActionIds.$.EXPAND_ALL}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:CommonActionIds.$.COLLAPSE_ALL})]})}VcsLogBranchesViewToolbar.displayName="VcsLogBranchesViewToolbar";try{VcsBranchesView.displayName="VcsBranchesView",VcsBranchesView.__docgenInfo={description:"",displayName:"VcsBranchesView",props:{tabKey:{defaultValue:null,description:"",name:"tabKey",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/VcsBranchesView.tsx#VcsBranchesView"]={docgenInfo:VcsBranchesView.__docgenInfo,name:"VcsBranchesView",path:"../example-app/src/VersionControl/VersionControlToolWindow/BranchesView/VcsBranchesView.tsx#VcsBranchesView"})}catch(__react_docgen_typescript_loader_error){}var clipboard_copy=__webpack_require__("../../node_modules/clipboard-copy/index.js"),clipboard_copy_default=__webpack_require__.n(clipboard_copy);const useCommitsTableActions=()=>{const copyRevisionNumber=(0,es._8)((({snapshot})=>()=>{const selectedCommits=snapshot.getLoadable(selectedCommitOids).getValue();clipboard_copy_default()(selectedCommits.join(" ")).catch(console.error)}),[]),refreshLog=(0,es._8)((({refresh})=>()=>{refresh(allCommitsState)}),[]);return[{id:VcsActionIds.COPY_REVISION_NUMBER,title:"Copy Revision Number",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/copy.svg"}),useShortcutsOf:CommonActionIds.$.COPY_REFERENCE,actionPerformed:copyRevisionNumber},{id:VcsActionIds.LOG_REFRESH,title:"Refresh",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/refresh.svg"}),useShortcutsOf:CommonActionIds.$.REFRESH,actionPerformed:()=>{refreshLog()}}]},VersionControlToolWindowZeroState_StyledContainer=styled.zo.div`
  min-height: 70%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 50px;
  color: ${({theme})=>theme.commonColors.inactiveTextColor};
  white-space: nowrap;
`;function VersionControlToolWindowZeroState(){const performAction=(0,ActionsProvider.DI)();return(0,jsx_runtime.jsx)(VersionControlToolWindowZeroState_StyledContainer,{children:(0,jsx_runtime.jsxs)("div",{style:{textAlign:"center"},children:["To track changes to code:",(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(Link.r,{onPress:()=>performAction(VcsActionIds.GIT_INIT),children:"Create Git repository..."}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(Link.r,{onPress:notImplemented,children:"Use Local History..."}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(PlatformIcon.vq,{style:{verticalAlign:"text-top"},icon:"general/contextHelp.svg"})," ",(0,jsx_runtime.jsx)(Link.r,{onPress:notImplemented,children:"Version Control integration"})," "]})})}VersionControlToolWindowZeroState.displayName="VersionControlToolWindowZeroState";const firstViewSizeState=(0,es.cn)({key:"vcs/toolwindow/firstViewSize",default:.25}),lastViewSizeState=(0,es.cn)({key:"vcs/toolwindow/lastViewSize",default:.35}),StyledToolWindowHeader=styled.zo.span`
  margin: 0 0.5rem 0 0.125rem;
`,VersionControlToolWindow_StyledContainer=styled.zo.div`
  height: 100%;
  display: flex;
  :focus-visible {
    outline: none;
  }
`,searchInputRefState=(0,es.cn)({key:"vcs/toolWindow/searchInputRef",default:react.createRef(),dangerouslyAllowMutability:!0}),VersionControlToolWindow=()=>{const tabKeys=(0,es.sJ)(vcsTabKeysState),[activeTabKey,setActiveTabKey]=(0,es.FV)(vcsActiveTabKeyState);return(0,es.sJ)(vcsRootsState).length>0?(0,jsx_runtime.jsx)(MultiViewToolWindow.y,{headerContent:(0,jsx_runtime.jsx)(StyledToolWindowHeader,{children:"Git:"}),activeKey:activeTabKey,onActiveKeyChange:key=>setActiveTabKey(`${key}`),children:tabKeys.map((key=>(0,jsx_runtime.jsx)(MultiViewToolWindow.y.View,{tabContent:(0,jsx_runtime.jsx)(VcsToolWindowTabTitle,{tabKey:key}),children:(0,jsx_runtime.jsx)(VcsTab,{tabKey:key})},key)))}):(0,jsx_runtime.jsx)(DefaultToolWindow.n,{headerContent:"Version Control",children:(0,jsx_runtime.jsx)(VersionControlToolWindowZeroState,{})})},StyledExpandStripeButton=styled.zo.button.attrs({tabIndex:-1})`
  box-sizing: border-box;
  all: unset;
  width: 1.71875rem;
  align-items: center;
  display: flex;
  flex-direction: column;
  padding: 0.5rem 0;
  gap: 0.625rem;
  background: ${({theme})=>theme.color("*.background")};
  color: ${({theme})=>theme.color("*.foreground")};
  :disabled {
    color: ${({theme})=>theme.color("Button.disabledText")};
  }
  &:hover {
    background: ${({theme})=>theme.color("ToolWindow.Button.hoverBackground",theme.dark?"#0f0f0f28":"#55555528")};
  }
`,StyledShowBranchesButton=(0,styled.zo)(StyledExpandStripeButton)`
  border-right: 1px solid ${({theme})=>theme.commonColors.borderColor};
`,StyledShowBranchesButtonText=styled.zo.span`
  writing-mode: vertical-lr;
  transform: rotateZ(180deg);
  font-size: 0.6875rem;
`;function ShowBranchesButton({onPress}){return(0,jsx_runtime.jsxs)(StyledShowBranchesButton,{onClick:onPress,children:[(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/arrowExpand"}),(0,jsx_runtime.jsx)(StyledShowBranchesButtonText,{children:"Branches"})]})}function VcsTab({tabKey}){const[firstViewSize,setFirstViewSize]=(0,es.FV)(firstViewSizeState),[lastViewSize,setLastViewSize]=(0,es.FV)(lastViewSizeState),actions=function useVcsLogsToolWindowActions(){const textFilterRef=(0,es.sJ)(searchInputRefState),hideBranches=(0,es._8)((({set,snapshot})=>()=>{set(vcsLogTabShowBranchesState(snapshot.getLoadable(vcsActiveTabKeyState).getValue()),!1)}),[]),toggleMatchCase=useToggleCurrentTabSettings(vcsLogFilter.matchCase),toggleRegExp=useToggleCurrentTabSettings(vcsLogFilter.regExp),toggleDetails=useToggleCurrentTabSettings(vcsLogTabShowCommitDetailsState),actions=[...useCommitsTableActions(),{id:VcsActionIds.FOCUS_TEXT_FILTER,title:"Focus Text Filter",actionPerformed:()=>{textFilterRef.current?.focus()}},{id:VcsActionIds.GIT_LOG_HIDE_BRANCHES,title:"Hide Git Branches",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/arrowCollapse"}),actionPerformed:hideBranches},{id:VcsActionIds.MATCH_CASE,title:"Match Case",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/matchCase.svg"}),actionPerformed:toggleMatchCase},{id:VcsActionIds.REG_EXP,title:"Regex",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/regex"}),actionPerformed:toggleRegExp},{id:VcsActionIds.SHOW_DETAILS,title:"Show Details",description:"Display details panel",actionPerformed:toggleDetails},{id:VcsActionIds.SHOW_DIFF_PREVIEW,title:"Show Diff Preview",description:"Show Diff Preview Panel",actionPerformed:()=>notImplemented()}];return actions}(),[showBranches,setShowBranches]=(0,es.FV)(vcsLogTabShowBranchesState(tabKey)),firstViewProps=showBranches?{firstView:(0,jsx_runtime.jsx)(VcsBranchesView,{tabKey}),firstSize:firstViewSize,onFirstResize:setFirstViewSize,firstViewMinSize:85}:{};return(0,jsx_runtime.jsx)(ActionsProvider.DG,{actions,children:({shortcutHandlerProps})=>(0,jsx_runtime.jsxs)(VersionControlToolWindow_StyledContainer,{...shortcutHandlerProps,tabIndex:showBranches?-1:0,children:[!showBranches&&(0,jsx_runtime.jsx)(ShowBranchesButton,{onPress:()=>setShowBranches(!0)}),(0,jsx_runtime.jsx)(ThreeViewSplitter.D,{...firstViewProps,innerView:(0,jsx_runtime.jsx)(VcsLogCommitsView,{tabKey}),innerViewMinSize:200,lastView:(0,jsx_runtime.jsx)(VcsLogDetailsView,{tabKey}),lastSize:lastViewSize,onLastResize:setLastViewSize,lastViewMinSize:40})]})})}function useToggleCurrentTabSettings(toggleState){return(0,es._8)((({set,snapshot})=>()=>{set(toggleState(snapshot.getLoadable(vcsActiveTabKeyState).getValue()),(value=>!value))}),[])}function VcsToolWindowTabTitle({tabKey}){const closeTab=function useCloseVcsTab(){return(0,es._8)(closeTabCallback,[])}();return(0,jsx_runtime.jsx)(ToolWindowTabContent.v,{title:(0,es.sJ)(vcsTabTitleState(tabKey)),closeButton:"MAIN"!==tabKey&&(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Close Tab"}),children:(0,jsx_runtime.jsx)(TabCloseButton.W,{onPress:()=>closeTab(tabKey)})})})}ShowBranchesButton.displayName="ShowBranchesButton",VcsTab.displayName="VcsTab",VcsToolWindowTabTitle.displayName="VcsToolWindowTabTitle";const toolWindows=[{id:"Project",title:"Project",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"toolwindows/toolWindowProject"}),content:(0,jsx_runtime.jsx)(ProjectToolWindow,{}),initialState:(0,ToolWindowsState.x5)({isVisible:!0,weight:.23})},{id:"Terminal",title:"Terminal",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"toolwindows/toolWindowProject"}),content:(0,jsx_runtime.jsx)(DefaultToolWindow.n,{headerContent:"Terminal",children:(0,jsx_runtime.jsx)(Terminal,{})}),initialState:(0,ToolWindowsState.x5)({anchor:"bottom"})},{id:"Commit",title:"Commit",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"toolwindows/toolWindowCommit"}),content:(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(UNSAFE_FocusRestoringSuspense,{}),children:(0,jsx_runtime.jsx)(CommitToolWindow,{})}),initialState:(0,ToolWindowsState.x5)({anchor:"left",isSplit:!0,isVisible:!1})},{id:"Version Control",title:"Version Control",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"toolwindows/toolWindowChanges"}),content:(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(UNSAFE_FocusRestoringSuspense,{}),children:(0,jsx_runtime.jsx)(VersionControlToolWindow,{})}),initialState:(0,ToolWindowsState.x5)({anchor:"bottom",weight:.35})}];var StatusBar=__webpack_require__("./src/StatusBar/StatusBar.tsx"),StatusBarWidget=__webpack_require__("./src/StatusBar/StatusBarWidget.tsx"),ProgressBarStopButton=__webpack_require__("./src/ProgressBar/ProgressBarStopButton.tsx");const showProgressPanelState=(0,es.cn)({key:"ide.statusbar.showProgressPanel",default:!1}),tasksPopupBoundsState=(0,es.cn)({key:"ide.statusbar.tasksPopup",default:null});var StyledSeparator=__webpack_require__("./src/StyledSeparator.tsx"),Popup=__webpack_require__("./src/Popup/Popup.tsx");const StyledPopupTitle=styled_components_browser_esm.ZP.div.withConfig({displayName:"TasksPopup__StyledPopupTitle",componentId:"sc-rjwznj-0"})(["flex:1;text-align:center;overflow:hidden;text-overflow:ellipsis;margin:0 0.625rem;"]);function TasksPopup(){const setShowProgressPanel=(0,es.Zl)(showProgressPanelState),tasks=(0,es.sJ)(tasksState),cancel=useCancelTask(),[bounds,setBounds]=(0,es.FV)(tasksPopupBoundsState);return(0,jsx_runtime.jsx)(Popup.GI,{bounds:bounds||{width:300,left:window.innerWidth-300-150,top:window.innerHeight-80*tasks.length-30-100},onBoundsChange:bounds=>{setBounds(bounds)},minHeight:100,minWidth:300,nonDismissable:!0,interactions:"all",children:(0,jsx_runtime.jsx)(Popup.GI.Layout,{header:(0,jsx_runtime.jsxs)(Popup.GI.Header,{hasControls:!0,children:[(0,jsx_runtime.jsx)(StyledPopupTitle,{children:"Background Tasks"}),(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(Tooltip.u,{children:"Hide"}),children:(0,jsx_runtime.jsx)(IconButton.hU,{preventFocusOnPress:!0,excludeFromTabOrder:!0,onPress:()=>setShowProgressPanel(!1),children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/hideToolWindow"})})})]}),content:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:tasks.map(((task,index)=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(ProgressBar.ko,{style:{margin:".5rem 0.75rem"},name:task.title,isIndeterminate:task.progress.isIndeterminate,"aria-label":`Progress of ${task.title}`,details:task.progress.text||(task.progress.secondaryText?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:" "}):void 0),secondaryDetails:task.progress.secondaryText,value:task.progress.fraction,maxValue:1,button:task.isCancelable&&(0,jsx_runtime.jsx)(ProgressBarStopButton.b,{onPress:()=>cancel(task.id)})}),tasks[index+1]&&(0,jsx_runtime.jsx)(StyledSeparator.lX,{})]},task.id)))})})})}function StatusBarProgress(props){return(0,jsx_runtime.jsx)(ProgressBar.ko,{dense:!0,namePosition:"side",width:146,...props})}TasksPopup.displayName="TasksPopup",StatusBarProgress.displayName="StatusBarProgress";const Spacer=styled_components_browser_esm.ZP.span.withConfig({displayName:"StatusBarTaskProgressBar__Spacer",componentId:"sc-vrkr3d-0"})(["width:0.5rem;"]),StyledProgressBarButton=styled_components_browser_esm.ZP.span.withConfig({displayName:"StatusBarTaskProgressBar__StyledProgressBarButton",componentId:"sc-vrkr3d-1"})(["cursor:pointer;","{cursor:unset;}"],ProgressBar.ko.Container),StatusBarTaskProgressBar=()=>{const firstTask=(0,es.sJ)(firstTaskState),tasksCount=(0,es.sJ)(taskCountState),cancel=useCancelTask(),[showProgressPanel,setShowProgressPanel]=(0,es.FV)(showProgressPanelState);return(0,react.useEffect)((()=>{0===tasksCount&&setShowProgressPanel(!1)}),[tasksCount]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[firstTask&&!showProgressPanel&&(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(Tooltip.u,{children:`${firstTask.title}. Click to see all running background tasks.`}),children:(0,jsx_runtime.jsx)(BareButton.V,{preventFocusOnPress:!0,excludeFromTabOrder:!0,onPress:()=>{setShowProgressPanel(!0)},children:(0,jsx_runtime.jsx)(StyledProgressBarButton,{children:(0,jsx_runtime.jsx)(StatusBarProgress,{name:firstTask.progress.text||firstTask.title,isIndeterminate:firstTask.progress.isIndeterminate,value:firstTask.progress.fraction,maxValue:1,button:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:firstTask.isCancelable&&(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(Tooltip.u,{children:"Cancel"}),children:(0,jsx_runtime.jsx)(ProgressBarStopButton.b,{small:!0,onPress:()=>cancel(firstTask.id)})})})})})})}),(tasksCount>1||showProgressPanel)&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Spacer,{}),(0,jsx_runtime.jsxs)(Link.r,{onPress:()=>setShowProgressPanel((currentValue=>!currentValue)),children:[showProgressPanel?"Hide processes":"Show all"," (",tasksCount,")"]})]}),showProgressPanel&&tasksCount>0&&(0,jsx_runtime.jsx)(TasksPopup,{})]})};try{StatusBarTaskProgressBar.displayName="StatusBarTaskProgressBar",StatusBarTaskProgressBar.__docgenInfo={description:'Intentionally, "processes" haven\'t been abstracted as an extension point for different features, since the focus\nhere is not to create an IDE, but to demo UI components.',displayName:"StatusBarTaskProgressBar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/StatusBar/StatusBarTaskProgressBar.tsx#StatusBarTaskProgressBar"]={docgenInfo:StatusBarTaskProgressBar.__docgenInfo,name:"StatusBarTaskProgressBar",path:"../example-app/src/StatusBar/StatusBarTaskProgressBar.tsx#StatusBarTaskProgressBar"})}catch(__react_docgen_typescript_loader_error){}var PopupTrigger=__webpack_require__("./src/Popup/PopupTrigger.tsx");const activeFileRepoRootState=(0,es.nZ)({key:"vcs/activeFileRepo",get:({get})=>{const activeFile=get(activeEditorTabState)?.filePath;return(activeFile&&get(vcsRootForFile(activeFile)))??get(vcsRootsState)[0]?.dir}}),activeFileRepoBranchesState=(0,es.nZ)({key:"vcs/activeFileRepoBranches",get:({get})=>{const activeFileRepoRoot=get(activeFileRepoRootState);return get(repoBranchesState(activeFileRepoRoot))}}),activeFileCurrentBranchState=(0,es.nZ)({key:"vcs/activeFileCurrentBranch",get:({get})=>{const activeFile=get(activeEditorTabState)?.filePath;return activeFile?branchForPathState(activeFile):null}}),activeFileRepoHeadState=(0,es.nZ)({key:"vcs/activeFileRepoHead",get:async({get})=>{const branch=get(activeFileCurrentBranchState);if(branch)return{detached:!1,head:branch};const repoRoot=get(activeFileRepoRootState);return{detached:!0,head:await(0,isomorphic_git.qq)({fs,dir:repoRoot,ref:"HEAD"})}}});var PopupLayout=__webpack_require__("./src/Popup/PopupLayout.tsx"),Balloon=__webpack_require__("./src/Balloon/Balloon.tsx"),InputField=__webpack_require__("./src/InputField/InputField.tsx");function validateBranchName(branches,newBranchName){return branches.remoteBranches.some((remoteBranch=>`${remoteBranch.remote}/${remoteBranch.name}`===newBranchName))?"CLASHING_WITH_REMOTE":branches.localBranches.some((({name})=>name===newBranchName))?"EXISTING":null}const ILLEGAL_CHARS_PATTERN=new RegExp(`(^\\.)|(^-)|(^/)|(\\.\\.)+|[ ~:^?*\\[\\\\]+|(@\\{)+|[${Array(32).fill(null).map(((_,index)=>String.fromCharCode(index))).join("")}u007F]`);function cleanUpBranchName(branchName){return branchName.replace(ILLEGAL_CHARS_PATTERN,"_")}try{cleanUpBranchName.displayName="cleanUpBranchName",cleanUpBranchName.__docgenInfo={description:"",displayName:"cleanUpBranchName",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Branches/branch-name-utils.tsx#cleanUpBranchName"]={docgenInfo:cleanUpBranchName.__docgenInfo,name:"cleanUpBranchName",path:"../example-app/src/VersionControl/Branches/branch-name-utils.tsx#cleanUpBranchName"})}catch(__react_docgen_typescript_loader_error){}const RenameBranchWindow_StyledContainer=styled.zo.div`
  padding: 0.5rem 1rem;
`,StyledInputField=(0,styled.zo)(InputField.U)`
  width: 100%;
`,ErrorMessages={EXISTING:branchName=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Branch name ",branchName," already exists ",(0,jsx_runtime.jsx)("br",{})]}),CLASHING_WITH_REMOTE:branchName=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Branch name ",branchName," clashes with remote branch ",(0,jsx_runtime.jsx)("br",{}),"with the same name"]})};function RenameBranchWindow({branchName,repoRoot,close}){const[newBranchName,setNewBranchName]=(0,react.useState)(branchName),[touched,setTouched]=(0,react.useState)(!1),balloonManager=(0,BalloonManager.L)(),branches=(0,es.sJ)(repoBranchesState(repoRoot)),renameBranch=function useRenameBranch(){const toggleFavoriteBranch=useToggleFavoriteBranch();return(0,es._8)((({refresh,snapshot})=>async(repoRoot,branchName,newBranchName)=>{await(0,isomorphic_git.R_)({fs,dir:repoRoot,oldref:branchName,ref:newBranchName}),refresh(repoBranchesState(repoRoot));const favoriteBranch={branchType:"LOCAL",branchName,repoRoot};isFavorite(snapshot.getLoadable(favoriteBranchesState).getValue(),snapshot.getLoadable(excludedFromFavoriteBranchesState).getValue(),favoriteBranch)&&(toggleFavoriteBranch(favoriteBranch,!1),toggleFavoriteBranch({...favoriteBranch,branchName:newBranchName},!0))}),[])}(),error=validateBranchName(branches,newBranchName),validationState=error&&touched?"error":"valid";return(0,jsx_runtime.jsx)(ModalWindow.Du,{minWidth:"content",minHeight:"content",children:(0,jsx_runtime.jsx)(WindowLayout.b,{header:`Rename branch ${branchName}`,content:(0,jsx_runtime.jsx)(RenameBranchWindow_StyledContainer,{children:(0,jsx_runtime.jsx)("form",{id:"branch_rename_form",onSubmit:event=>{event.preventDefault(),error?setTouched(!0):renameBranch(branches.repoRoot,branchName,newBranchName).catch((e=>{balloonManager.show({icon:"Error",title:"Unexpected error",body:`Could not rename branch ${branchName} to ${newBranchName}.`}),console.error("Branch rename error: ",e)})).then((()=>{close()}))},children:(0,jsx_runtime.jsx)(StyledInputField,{labelPlacement:"above",label:"New branch name:",value:newBranchName,onChange:newValue=>{setNewBranchName(cleanUpBranchName(newValue)),setTouched(!0)},validationState,validationMessage:error&&"error"===validationState?ErrorMessages[error]?.(branchName):void 0})})}),footer:(0,jsx_runtime.jsx)(WindowLayout.b.Footer,{right:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.z,{onPress:close,children:"Cancel"}),(0,jsx_runtime.jsx)(Button.z,{variant:"default",type:"submit",form:"branch_rename_form",isDisabled:Boolean(error)&&touched,children:"Rename"})]})})})})}RenameBranchWindow.displayName="RenameBranchWindow";try{RenameBranchWindow.displayName="RenameBranchWindow",RenameBranchWindow.__docgenInfo={description:"",displayName:"RenameBranchWindow",props:{branchName:{defaultValue:null,description:"",name:"branchName",required:!0,type:{name:"string"}},repoRoot:{defaultValue:null,description:"",name:"repoRoot",required:!0,type:{name:"string"}},close:{defaultValue:null,description:"",name:"close",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Branches/RenameBranchWindow.tsx#RenameBranchWindow"]={docgenInfo:RenameBranchWindow.__docgenInfo,name:"RenameBranchWindow",path:"../example-app/src/VersionControl/Branches/RenameBranchWindow.tsx#RenameBranchWindow"})}catch(__react_docgen_typescript_loader_error){}const BranchesPopup_StyledHeader=styled.zo.div`
  box-sizing: border-box;
  padding: 0 0.375rem;
  display: flex;
  align-items: center;
  width: 100%;
`,StyledTitle=styled.zo.div`
  flex: 1;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  margin: 0 0.625rem;
`,branchesPopupSizeState=(0,es.cn)({key:"branchesPopup.bounds",default:void 0});function BranchesPopup({close}){const[repoBranches]=useLatestRecoilValue(allBranchesState),[branchesPopupPersistedSize,setBranchesPopupPersistedSize]=(0,es.FV)(branchesPopupSizeState),[branchesPopupBounds,setBranchesPopupBounds]=(0,react.useState)(branchesPopupPersistedSize??{}),newBranchAction=(0,ActionsProvider.BH)(VcsActionIds.GIT_CREATE_NEW_BRANCH),deleteBranch=function useDeleteBranch(){return(0,es._8)((({refresh})=>(repoRoot,branchName)=>(0,isomorphic_git.NA)({fs,dir:repoRoot,ref:branchName}).then((()=>{refresh(repoBranchesState(repoRoot))}))),[])}(),balloonManager=(0,BalloonManager.L)(),windowManager=useWindowManager(),checkoutBranch=function useCheckoutBranch(){return(0,es._8)((callbackInterface=>async(repoRoot,branchName,remote)=>{const{refresh,snapshot,set}=callbackInterface,reloadFileFromDisk=reloadFileFromDiskCallback(callbackInterface);await(0,isomorphic_git.JE)({fs,dir:repoRoot,remote,ref:branchName}),refresh(repoBranchesState(repoRoot)),refresh(dirContentState(repoRoot));const openedFiles=snapshot.getLoadable(editorTabsState).getValue(),existingOpenedFile=await asyncFilter((async({filePath})=>{const exists=await fs.promises.exists(filePath);return exists&&await reloadFileFromDisk(filePath),exists}),openedFiles);set(editorTabsState,existingOpenedFile)}),[])}(),{isFavorite,toggleFavorite}=useFavoriteBranches();if(!repoBranches)return null;const title=1===repoBranches.length?`Git Branches in ${path_browserify_default().basename(repoBranches[0].repoRoot)}`:"Git Branches";return(0,jsx_runtime.jsx)(Popup.GI,{interactions:"all",minHeight:55,minWidth:300,bounds:branchesPopupBounds,onBoundsChange:(bounds,interactionType)=>{"resize"===interactionType&&setBranchesPopupPersistedSize({width:bounds.width,height:bounds.height}),setBranchesPopupBounds(bounds)},children:(0,jsx_runtime.jsx)(PopupLayout.F,{header:(0,jsx_runtime.jsx)(Popup.GI.Header,{hasControls:!0,children:(0,jsx_runtime.jsxs)(BranchesPopup_StyledHeader,{children:[(0,jsx_runtime.jsx)(StyledTitle,{children:title}),(0,jsx_runtime.jsxs)(Toolbar.o,{children:[(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Fetch"}),children:(0,jsx_runtime.jsx)(IconButton.hU,{onPress:()=>{notImplemented(),close()},children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"vcs/fetch.svg"})})}),(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Restore Popup Size"}),children:(0,jsx_runtime.jsx)(IconButton.hU,{isDisabled:void 0===branchesPopupPersistedSize,onPress:()=>{setBranchesPopupPersistedSize(void 0),setBranchesPopupBounds((({width,height,...currentBounds})=>({...currentBounds})))},children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/fitContent.svg"})})})]})]})}),content:(0,jsx_runtime.jsxs)(SpeedSearchMenu.w,{"aria-label":title,submenuBehavior:"toggleOnPress",fillAvailableSpace:!0,autoFocus:"first",disabledKeys:repoBranches.flatMap((({localBranches,repoRoot})=>localBranches.filter((({trackingBranch})=>!trackingBranch)).map((({name})=>`${repoRoot}/pull-${name}`)))),onAction:key=>{const[repoRoot,branch,operation]=`${key}`.split("//");async function tryCheckout(checkout){try{await checkout()}catch(e){e instanceof isomorphic_git.D1.CheckoutConflictError?balloonManager.show({icon:"Error",title:"Git Checkout Problem",body:e.message}):balloonManager.show({icon:"Error",title:"Checkout failed",body:`Could not checkout branch ${branch}`})}}if(key===newBranchAction?.id)return newBranchAction?.perform();switch(operation){case"delete":return deleteBranch(repoRoot,branch).then((()=>{balloonManager.show({title:`Deleted branch: ${branch}`,icon:"Info",actions:(0,jsx_runtime.jsx)(Balloon.g,{onPress:notImplemented,children:"Restore"})})}),(()=>{balloonManager.show({title:`Could not deleted branch: ${branch}`,icon:"Error"})}));case"rename":return windowManager.open((({close})=>(0,jsx_runtime.jsx)(RenameBranchWindow,{repoRoot,branchName:branch,close})));case"checkout":return function checkoutLocalBranch(){return tryCheckout((()=>checkoutBranch(repoRoot,branch)))}();case"remote-checkout":return function checkoutRemoteBranch(){const remoteBranch=repoBranches?.find((({repoRoot:aRepoRoot})=>aRepoRoot===repoRoot))?.remoteBranches.find((({name,remote})=>`${remote}/${name}`===branch));if(remoteBranch)return tryCheckout((()=>checkoutBranch(repoRoot,remoteBranch.name,remoteBranch.remote)))}();default:return notImplemented()}},onClose:close,children:[newBranchAction&&(0,jsx_runtime.jsx)(Item.c,{textValue:newBranchAction.title,children:(0,jsx_runtime.jsx)(MenuItemLayout._,{icon:newBranchAction.icon,content:newBranchAction.title})},newBranchAction.id),(0,jsx_runtime.jsx)(Item.c,{children:"Checkout Tag or Revision..."},"checkout_revision"),repoBranches.flatMap((({remoteBranches,localBranches,repoRoot,currentBranch})=>{const getSectionLabel=(label,repoRoot)=>repoBranches.length>1?`${label} in ${path_browserify_default().basename(repoRoot)}`:label,compareActions=(branchName,isCurrent)=>[!isCurrent&&(0,jsx_runtime.jsx)(Item.c,{children:`Compare with '${branchName}'`},`${repoRoot}//${branchName}//compare-with-branch`),(0,jsx_runtime.jsx)(Item.c,{children:"Show Diff with Working Tree"},`${repoRoot}//${branchName}//show-diff-with-working-tree`),(0,jsx_runtime.jsx)(Divider.i,{},"compare-actions-divider")],mergeActions=(branchName,currentBranch)=>currentBranch&&branchName!==currentBranch&&[(0,jsx_runtime.jsx)(Item.c,{children:`Rebase '${currentBranch}' onto '${branchName}'`},`${repoRoot}//${branchName}//rebase-current-onto`),(0,jsx_runtime.jsx)(Item.c,{children:`Merge '${branchName}' onto '${currentBranch}'`},`${repoRoot}//${branchName}//merge-into-current`),(0,jsx_runtime.jsx)(Divider.i,{},"merge-actions-divider")];return[(0,jsx_runtime.jsx)(Section.$,{title:getSectionLabel("Local Branches",repoRoot),children:localBranches.map((({name,trackingBranch})=>{const isCurrent=name===currentBranch?.name,favoriteBranchArgs={branchName:name,branchType:"LOCAL",repoRoot};return(0,jsx_runtime.jsxs)(Item.c,{textValue:name,title:(0,jsx_runtime.jsx)(MenuItemLayout._,{content:name,icon:(0,jsx_runtime.jsx)(BranchFavoriteButton,{isFavorite:isFavorite(favoriteBranchArgs),isCurrent,onClick:()=>{toggleFavorite(favoriteBranchArgs)}}),shortcut:trackingBranch&&(0,jsx_runtime.jsx)(ItemLayout.e.Hint,{small:!0,children:trackingBranch})}),children:[!isCurrent&&(0,jsx_runtime.jsx)(Item.c,{children:"Checkout"},`${repoRoot}//${name}//checkout`),(0,jsx_runtime.jsx)(Item.c,{children:`New Branch from '${name}'...`},`${repoRoot}//${name}//new-branch-from`),!isCurrent&&(0,jsx_runtime.jsx)(Item.c,{children:`Checkout and rebase onto '${name}'`},`${repoRoot}//${name}//checkout-and-rebase-onto`),(0,jsx_runtime.jsx)(Divider.i,{},"new-branch-actions-divider"),compareActions(name,isCurrent),mergeActions(name,currentBranch?.name),(0,jsx_runtime.jsx)(Item.c,{children:"Update"},`${repoRoot}//${name}//pull`),(0,jsx_runtime.jsx)(Item.c,{children:"Push..."},`${repoRoot}//${name}//push`),(0,jsx_runtime.jsx)(Divider.i,{},"push-divider"),(0,jsx_runtime.jsx)(Item.c,{children:"Rename..."},`${repoRoot}//${name}//rename`),!isCurrent&&(0,jsx_runtime.jsx)(Item.c,{children:"Delete"},`${repoRoot}//${name}//delete`)]},`${repoRoot}//${name}`)}))},`${repoRoot}//local_branches`),(0,jsx_runtime.jsx)(Section.$,{title:getSectionLabel("Remote Branches",repoRoot),children:remoteBranches.map((branch=>{const branchName=`${branch.remote}/${branch.name}`,favoriteBranchArgs={branchName,branchType:"REMOTE",repoRoot};return(0,jsx_runtime.jsxs)(Item.c,{textValue:branchName,title:(0,jsx_runtime.jsx)(MenuItemLayout._,{content:branchName,icon:(0,jsx_runtime.jsx)(BranchFavoriteButton,{isFavorite:isFavorite(favoriteBranchArgs),onClick:()=>{toggleFavorite(favoriteBranchArgs)}})}),children:[(0,jsx_runtime.jsx)(Item.c,{children:"Checkout"},`${repoRoot}//${branchName}//remote-checkout`),(0,jsx_runtime.jsx)(Item.c,{children:`New Branch from '${branchName}'...`},`${repoRoot}//${branchName}//new-branch-from`),(0,jsx_runtime.jsx)(Item.c,{children:`Checkout and rebase onto '${branchName}'`},`${repoRoot}//${branchName}//checkout-and-rebase-onto`),(0,jsx_runtime.jsx)(Divider.i,{},"new-branch-actions-divider"),compareActions(branchName,!1),mergeActions(branchName,currentBranch?.name),(0,jsx_runtime.jsx)(Item.c,{children:`Pull into '${branchName}' Using Merge`},`${repoRoot}//${branchName}//pull-into-using-merge`),(0,jsx_runtime.jsx)(Item.c,{children:`Pull into '${branchName}' Using Rebase`},`${repoRoot}//${branchName}//pull-into-using-rebase`),(0,jsx_runtime.jsx)(Divider.i,{}),(0,jsx_runtime.jsx)(Item.c,{children:"Delete"},`${repoRoot}//${branchName}//delete`)]},`${repoRoot}//${branchName}`)}))},`${repoRoot}//remote_branches`)]}))]})})})}BranchesPopup.displayName="BranchesPopup";try{BranchesPopup.displayName="BranchesPopup",BranchesPopup.__docgenInfo={description:"",displayName:"BranchesPopup",props:{close:{defaultValue:null,description:"",name:"close",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Branches/BranchesPopup.tsx#BranchesPopup"]={docgenInfo:BranchesPopup.__docgenInfo,name:"BranchesPopup",path:"../example-app/src/VersionControl/Branches/BranchesPopup.tsx#BranchesPopup"})}catch(__react_docgen_typescript_loader_error){}let notified=!1;function BranchPopupTrigger(){const[gitRepoHead]=useLatestRecoilValue(activeFileRepoHeadState),maybeShowGitCloneTip=(()=>{const balloonManager=(0,BalloonManager.L)(),vcsRoots=(0,es.sJ)(vcsRootsState),performAction=(0,ActionsProvider.DI)();return(0,es._8)((({reset})=>async()=>{vcsRoots.length<2&&!notified&&(notified=!0,balloonManager.showSticky({title:"Clone another repository",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/quickfixOffBulb.svg"}),body:"Git integration in the example app supports multiple repos within the same project. See it in action by cloning another repo",actions:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Balloon.g,{onPress:()=>{performAction("ExampleApp.cloneExampleRepo")},children:"Clone another repo"})})}))}),[])})();return gitRepoHead&&(0,jsx_runtime.jsx)(PopupTrigger.q,{placement:"top",onOpenChange:isOpen=>{isOpen||setTimeout(maybeShowGitCloneTip,500)},popup:({close})=>(0,jsx_runtime.jsx)(BranchesPopup,{close}),children:(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:gitRepoHead.detached?"Git: Detached HEAD doesn't point to any branch":`Git Branch: ${gitRepoHead.head}`}),children:(0,jsx_runtime.jsx)(StatusBarWidget.V,{icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:gitRepoHead.detached?"general/warning.svg":"vcs/branch.svg"}),label:gitRepoHead.head.slice(0,gitRepoHead.detached?8:void 0)})})})}const StyledLastMessage=styled_components_browser_esm.ZP.div.withConfig({displayName:"IdeStatusBar__StyledLastMessage",componentId:"sc-1hz1fp-0"})(["margin-left:0.75rem;cursor:pointer;"]),IdeStatusBar=()=>{const cursorPosition=(0,es.sJ)(editorCursorPositionState);return(0,jsx_runtime.jsx)(StatusBar.A,{left:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/tbHidden.svg",role:"button",onClick:notImplemented}),(0,jsx_runtime.jsx)(StyledLastMessage,{children:"Tooltip content or last message will show up here."})]}),right:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StatusBarTaskProgressBar,{}),(0,jsx_runtime.jsx)(StatusBarWidget.V,{onPress:notImplemented,label:"LF"}),(0,jsx_runtime.jsx)(StatusBarWidget.V,{onPress:notImplemented,label:`${cursorPosition.lineNumber},${cursorPosition.column}`}),(0,jsx_runtime.jsx)(StatusBarWidget.V,{label:"UTF-8"}),(0,jsx_runtime.jsx)(MenuTrigger.b,{renderMenu:({menuProps})=>(0,jsx_runtime.jsxs)(Menu.v2,{...menuProps,onAction:notImplemented,children:[(0,jsx_runtime.jsx)(Item.c,{children:"Configure Indents for Typescript"}),(0,jsx_runtime.jsx)(Item.c,{children:"Disable Indents Detection for Project"})]}),children:(props,ref)=>(0,jsx_runtime.jsx)(StatusBarWidget.V,{...props,ref,label:"2 spaces"})}),(0,jsx_runtime.jsx)(MenuTrigger.b,{renderMenu:({menuProps})=>(0,jsx_runtime.jsxs)(Menu.v2,{...menuProps,onAction:notImplemented,children:[(0,jsx_runtime.jsxs)(Item.c,{title:"Compile",children:[(0,jsx_runtime.jsx)(Item.c,{children:"packages/jui/tsconfig.json"}),(0,jsx_runtime.jsx)(Item.c,{children:"packages/jui/src/StatusBar/StatusBar.stories.tsx"}),(0,jsx_runtime.jsx)(Item.c,{children:"Compile All"})]}),(0,jsx_runtime.jsx)(Divider.i,{}),(0,jsx_runtime.jsx)(Item.c,{children:(0,jsx_runtime.jsx)(MenuItemLayout._,{icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"javaee/updateRunningApplication.svg"}),content:"Restart Typescript Service"})}),(0,jsx_runtime.jsx)(Item.c,{children:(0,jsx_runtime.jsx)(MenuItemLayout._,{icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/settings.svg"}),content:"Configure Typescript..."})})]}),children:(props,ref)=>(0,jsx_runtime.jsx)(StatusBarWidget.V,{...props,ref,label:"TypeScript 4.4.3"})}),(0,jsx_runtime.jsx)(BranchPopupTrigger,{}),(0,jsx_runtime.jsx)(StatusBarWidget.V,{icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"ide/readwrite.svg"})}),(0,jsx_runtime.jsx)(StatusBarWidget.V,{icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"ide/fatalError.svg"})})]})})};IdeStatusBar.displayName="IdeStatusBar";const useNestedSelectionState=(tree,{selectedKeys:selectedKeysProp,defaultSelectedKeys,onSelectedKeysChange})=>{const[selectedKeys,selectedKeysSetter]=((valueProp,defaultValue=new Set,onChange)=>{const[value,setValue]=(0,useControlledState.z)(valueProp,defaultValue,onChange);return[value,useStateSetterForSet(setValue)]})(selectedKeysProp,defaultSelectedKeys||new Set,onSelectedKeysChange),treeRef=(0,useLatest.d)(tree);return(0,react.useMemo)((()=>new NestedSelection({items:selectedKeys,...selectedKeysSetter},treeRef.current)),[selectedKeys,tree.rootNodes])},RollbackTreeContextMenu=()=>(0,jsx_runtime.jsx)(Menu.v2,{disabledKeys:["showDiff"],"aria-label":"Context menu",onAction:notImplemented,children:(0,jsx_runtime.jsx)(Item.c,{textValue:"Show Diff",children:(0,jsx_runtime.jsx)(MenuItemLayout._,{icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/diff.svg"}),content:"Show Diff"})},"showDiff")});RollbackTreeContextMenu.displayName="RollbackTreeContextMenu";const RollbackWindow_StyledContainer=styled.zo.div`
  box-sizing: border-box;
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 1rem 0.75rem 0;
`,StyledFrame=styled.zo.div`
  border: 1px solid ${({theme})=>theme.commonColors.contrastBorder};
  flex: 1;
  overflow: auto;
`,RollbackWindow_StyledLine=styled.zo.div`
  &:not(:empty) {
    line-height: 1.5;
    padding-left: 0.375rem;
    margin-bottom: 0.75rem;
  }
`;function RollbackWindow(){const defaultExpandedKeys=(0,es.sJ)(rollbackViewState.initiallyExpandedKeys),initiallyIncludedChangeKeys=(0,es.sJ)(rollbackViewState.initiallyIncludedChanges).map(getNodeKeyForChange),{fileCountsMap}=(0,es.sJ)(changesTreeNodesState),[windowBounds,setWindowBounds]=(0,es.FV)(rollbackViewState.windowBounds),rootNodes=(0,es.sJ)(rollbackViewState.rootNodes),[selectedKeys,setSelectedKeys]=(0,react.useState)(new Set(initiallyIncludedChangeKeys.slice(0,1))),[expandedKeys,setExpandedKeys]=(0,react.useState)(defaultExpandedKeys),[includedChangeKeys,setIncludedChangeKeys]=(0,react.useState)(new Set(initiallyIncludedChangeKeys)),nestedSelection=useNestedSelectionState({rootNodes,getKey:node=>node.key,getChildren:node=>isGroupNode(node)?node.children:null},{selectedKeys:includedChangeKeys,onSelectedKeysChange:setIncludedChangeKeys}),includedChanges=(0,es.sJ)(allChangesState).filter((change=>includedChangeKeys.has(getNodeKeyForChange(change)))),rollbackChanges=(()=>{const updateFileStatus=useRefreshFileStatus();return(0,es._8)((callbackInterface=>async(changes,deleteAddedFiles)=>{const{snapshot,refresh}=callbackInterface,reloadFileFromDisk=reloadFileFromDiskCallback(callbackInterface),changesWithRepoRoots=(await Promise.all(changes.filter((change=>!Change.revision(change).isDir)).map((async change=>{const repoRoot=await snapshot.getPromise(vcsRootForFile(Change.path(change)));if(repoRoot)return{repoRoot,change,relativePath:path_browserify_default().relative(repoRoot,Change.path(change))}})))).filter(array_utils.N),groupedChanges=(0,groupBy.Z)((({repoRoot})=>repoRoot),changesWithRepoRoots);await Promise.all(Object.entries(groupedChanges).map((async([repoRoot,items])=>{const{toReset=[],toCheckout=[]}=(0,groupBy.Z)((({change:{type}})=>"ADDED"!==type||deleteAddedFiles?"toCheckout":"toReset"),items);if(await Promise.allSettled(toReset.map((({relativePath})=>(0,isomorphic_git.us)({fs,dir:repoRoot,filepath:relativePath})))),toCheckout.length>0&&(await isomorphic_git.ZP.resolveRef({fs,dir:repoRoot,ref:"HEAD"}).catch((()=>null))?await(0,isomorphic_git.JE)({fs,dir:repoRoot,force:!0,filepaths:toCheckout.map((({relativePath,change:{type}})=>relativePath))}):await Promise.all(toCheckout.filter((({change})=>"ADDED"===change.type)).map((({change})=>{const fullPath=Change.path(change);return fs.promises.unlink(fullPath)})))),deleteAddedFiles){const editor=await snapshot.getPromise(editorManagerState);changes.filter(Change.isAddition).forEach((change=>{editor.closePath(Change.path(change))}))}findRootPaths(items.flatMap((({change})=>"MODIFIED"===change.type?[]:"MOVED"===change.type?[change.before.path,change.after.path]:Change.path(change)))).map(path_browserify_default().dirname).forEach((pathToRefresh=>refresh(dirContentState(pathToRefresh)))),await Promise.allSettled(items.map((async({relativePath,change})=>{const fullPath=Change.path(change);await reloadFileFromDisk(fullPath),await(0,isomorphic_git.us)({fs,dir:repoRoot,filepath:relativePath}),await updateFileStatus(fullPath)})))})))}),[])})(),balloons=(0,BalloonManager.L)(),setOpen=(0,es.Zl)(rollbackViewState.isOpen),close=()=>setOpen(!1),treeRef=(0,react.useRef)(null),treeActions=(0,useTreeActions.x)({treeRef}),[deleteAddedFiles,setDeleteAddedFiles]=(0,react.useState)(!1),atLeastOneNewFileSelected=includedChanges.some((change=>"ADDED"===change.type));return(0,jsx_runtime.jsx)(ModalWindow.Du,{onClose:close,bounds:windowBounds,onBoundsChange:setWindowBounds,minHeight:200,minWidth:275,children:(0,jsx_runtime.jsx)(WindowLayout.b,{header:"Rollback changes",content:(0,jsx_runtime.jsx)(ActionsProvider.DG,{actions:treeActions,children:({shortcutHandlerProps})=>(0,jsx_runtime.jsxs)(RollbackWindow_StyledContainer,{...shortcutHandlerProps,children:[(0,jsx_runtime.jsxs)("div",{style:{display:"flex"},children:[(0,jsx_runtime.jsxs)(Toolbar.o,{children:[(0,jsx_runtime.jsx)(IconButton.hU,{isDisabled:!0,children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/diff"})}),(0,jsx_runtime.jsx)(IconButtonWithMenu,{renderMenu:({menuProps})=>(0,jsx_runtime.jsx)(Menu.v2,{...menuProps,selectedKeys:[],onAction:notImplemented,children:(0,jsx_runtime.jsx)(Section.$,{title:"Group By",children:defaultChangeGroupings.map((grouping=>(0,jsx_runtime.jsx)(Item.c,{children:grouping.title},grouping.id)))})}),children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/groupBy.svg"})})]}),(0,jsx_runtime.jsx)("span",{style:{flex:1}}),(0,jsx_runtime.jsxs)(Toolbar.o,{children:[(0,jsx_runtime.jsx)(ActionButton.K,{actionId:CommonActionIds.$.EXPAND_ALL}),(0,jsx_runtime.jsx)(ActionButton.K,{actionId:CommonActionIds.$.COLLAPSE_ALL})]})]}),(0,jsx_runtime.jsx)(StyledFrame,{children:(0,jsx_runtime.jsx)(ContextMenuContainer.X,{renderMenu:()=>(0,jsx_runtime.jsx)(RollbackTreeContextMenu,{}),style:{height:"100%"},children:(0,jsx_runtime.jsx)(SpeedSearchTreeWithCheckboxes,{treeRef,items:rootNodes,selectionMode:"multiple",selectedKeys,onSelectionChange:setSelectedKeys,expandedKeys,onExpandedChange:setExpandedKeys,nestedSelection,fillAvailableSpace:!0,children:node=>{const props=changesViewTreeNodeRenderer.getItemProps({node,fileCountsMap});return(0,jsx_runtime.jsxs)(Item.c,{...props,children:[0!==node.children?.length&&(0,jsx_runtime.jsx)(TreeNodeCheckbox,{selectionState:nestedSelection.getSelectionState(node),onToggle:()=>nestedSelection.toggle(node)}),props.children]})}})})})]})}),footer:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{style:{padding:".5rem 0.75rem 0",display:"flex",flexDirection:"column"},children:[(0,jsx_runtime.jsx)(RollbackWindow_StyledLine,{children:(0,jsx_runtime.jsx)(ChangesSummary,{changes:includedChanges})}),(0,jsx_runtime.jsx)(Checkbox.X,{isDisabled:!atLeastOneNewFileSelected,isSelected:deleteAddedFiles,onChange:setDeleteAddedFiles,mnemonic:"D",children:"Delete local copies of the added files"})]}),(0,jsx_runtime.jsx)(WindowLayout.b.Footer,{right:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.z,{onPress:close,mnemonic:"C",children:"Close"}),(0,jsx_runtime.jsx)(Button.z,{variant:"default",mnemonic:"R",isDisabled:0===includedChanges.length,onPress:()=>{rollbackChanges(includedChanges,deleteAddedFiles).catch((e=>{balloons.show({title:"Reverting changes failed",icon:"Error",body:"Could not revert selected changes. See console for more info"}),console.error("Git revert error:",e)})).finally(close)},children:"Rollback"})]})})]})})})}RollbackWindow.displayName="RollbackWindow";const toolWindowsState=(0,es.cn)({key:"toolWindows",default:new ToolWindowsState.iC(Object.fromEntries(toolWindows.map((({id,initialState})=>[id,initialState]))),{removedFromSideBarIds:toolWindows.filter((({showStripeButton})=>!1===showStripeButton)).map((({id})=>id))})});var Tabs=__webpack_require__("./src/Tabs/Tabs.tsx"),FocusScope=__webpack_require__("../../node_modules/@react-aria/focus/dist/FocusScope.mjs"),shortcutToString=__webpack_require__("./src/ActionSystem/shortcutToString.ts");const tips=[{actionId:CommonActionIds.$.EXPAND_SELECTION,title:"Press $shortcut to expand selection"},{actionId:CommonActionIds.$.SHRINK_SELECTION,title:"Press $shortcut to shrink selection"}],useTips=()=>{const keymap=(0,KeymapProvider.og)(),renderedTips=(0,react.useMemo)((()=>tips.map((({actionId,title})=>({keyboardShortcut:keymap?.[actionId]?.find((shortcut=>"keyboard"===shortcut.type)),title}))).filter((({keyboardShortcut})=>keyboardShortcut)).map((({keyboardShortcut,title})=>title.replace("$shortcut",(0,shortcutToString.W)(keyboardShortcut))))),[keymap]),[index,setIndex]=(0,react.useState)(Math.floor(Math.random()*renderedTips.length));return{current:renderedTips[index],next:()=>{const tmpIndex=Math.floor(Math.random()*(renderedTips.length-1)),newIndex=tmpIndex<index?tmpIndex:tmpIndex+1;console.log("changing index to",newIndex,"tmpIndex",tmpIndex),setIndex(newIndex)}}};var useObjectRef=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),useFocusable=__webpack_require__("../../node_modules/@react-aria/focus/dist/useFocusable.mjs");const Input=react.forwardRef((function Input(props,forwardedRef){const ref=(0,useObjectRef.B)(forwardedRef),{focusableProps}=(0,useFocusable.k)({autoFocus:props.autoFocus},ref);return(0,jsx_runtime.jsx)("input",{...(0,mergeProps.d)(focusableProps,props),ref})}));try{Input.displayName="Input",Input.__docgenInfo={description:"",displayName:"Input",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/SearchEverywhere/Input.tsx#Input"]={docgenInfo:Input.__docgenInfo,name:"Input",path:"../example-app/src/SearchEverywhere/Input.tsx#Input"})}catch(__react_docgen_typescript_loader_error){}const searchEverywhereState={isOpen:(0,es.cn)({key:"search.everywhere.isOpen",default:!1}),tab:(0,es.cn)({key:"search.everywhere.tab",default:"All"}),contextElement:(0,es.cn)({key:"search.everywhere.contextElement",default:void 0}),initialSearchQuery:(0,es.xu)({key:"search.everywhere.initialQuery",default:""}),bounds:(0,es.cn)({key:"search.everywhere.bounds",default:null})};function ContentAwarePopup({hasContent,persistedBoundsState,noContentHeight,minHeight,...otherProps}){const persistBounds=(0,es.Zl)(persistedBoundsState),getInitBounds=useRecoilInitialValue(persistedBoundsState,{top:150,height:Math.max(200,window.innerHeight-300)}),[bounds,setBounds]=(0,react.useState)(getInitBounds),heightToRestoreRef=(0,react.useRef)(bounds.height);return(0,react.useEffect)((()=>{setBounds((bounds=>({...bounds,height:hasContent?heightToRestoreRef.current:noContentHeight})))}),[hasContent]),(0,jsx_runtime.jsx)(Popup.GI,{...otherProps,bounds,onBoundsChange:bounds=>{hasContent&&(heightToRestoreRef.current=bounds.height,persistBounds(bounds)),setBounds(bounds)},minHeight:hasContent?minHeight:noContentHeight})}ContentAwarePopup.displayName="ContentAwarePopup";try{ContentAwarePopup.displayName="ContentAwarePopup",ContentAwarePopup.__docgenInfo={description:"A special type of popup, where the content can be toggled on and off. Needed only for SearchEveryWhere at the moment,\nbut extracted as a component, to collocate related pieces, rather than leave them with the rest of the code in the\ncomponent.\n- Updates persisted {@param boundsState}, when the bounds are changed, only if the content is shown when the bounds\n  is changed.\n- Minimizes the popup into {@param noContentHeight}, when {@param hasContent} is `false`.\n- Restores the popup height to it's latest value, or based on content, when {@param hasContent} changes to `true`.\n- Returns the right to be applied based on the input {@param minHeight} and {@param hasContent}.",displayName:"ContentAwarePopup",props:{hasContent:{defaultValue:null,description:"Whether the popup has content. If `false`, the popup is minimized to `noContentHeight`.",name:"hasContent",required:!0,type:{name:"boolean"}},noContentHeight:{defaultValue:null,description:"The minimized height of the popup, when there is no content.",name:"noContentHeight",required:!0,type:{name:"number"}},persistedBoundsState:{defaultValue:null,description:"Persisted state of the popup bounds, in form of a recoil state.",name:"persistedBoundsState",required:!0,type:{name:"RecoilState<Partial<Bounds> | null>"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},minHeight:{defaultValue:null,description:"",name:"minHeight",required:!1,type:{name:'number | "content"'}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:'number | "content"'}},positioning:{defaultValue:null,description:"Used to position the popup relative to a target element, if there is no positioning information in the input\n`bounds`/`defaultBounds`.",name:"positioning",required:!1,type:{name:'{ targetRef: RefObject<HTMLElement>; placement?: "bottom" | "top"; }'}},nonDismissable:{defaultValue:null,description:"",name:"nonDismissable",required:!1,type:{name:"boolean"}},allowScroll:{defaultValue:null,description:"By default, Popup prevents scrolling on the scrollable ancestor, if popup is positioned relative to a target\nelement. Allowing or disallowing scroll can be forced by passing boolean value.",name:"allowScroll",required:!1,type:{name:'boolean | "auto"'}},onBoundsChanging:{defaultValue:null,description:"For performance reason, overlay bounds is kept in a local state during a resize or move interaction, and\n`onBoundsChange` is called once at the end of interaction. `onBoundsChanging` gives a chance of rectifying\nbounds changes during an interaction to for example apply custom size/placement constraints.",name:"onBoundsChanging",required:!1,type:{name:'((newBounds: Bounds, interactionType: "move" | "resize") => Bounds)'}},defaultBounds:{defaultValue:null,description:"Default bounds in uncontrolled mode. Can be a partially specified bounds.\n- If `top` not specified, the returned bounds will be centered vertically.\n- If `left` not specified, the returned bounds will be centered horizontally.\n- If `width` not specified, the width of the bounds will be based on content width.\n- If `height` not specified, the height of the bounds will be based on content height.\nNote that regardless of `defaultBounds`, `onBoundsChange` always receives a full `bounds` object which is solely\nbased on the bounds of the overlay, at the end of an interaction.",name:"defaultBounds",required:!1,type:{name:"Partial<Bounds>"}},interactions:{defaultValue:{value:'"all"'},description:'Allowed interactions:\n- "all": both resizable and movable\n- "move": movable, but not resizable\n- "none": fixed size and position\nThe reason there are no `resizable` and `movable` boolean props is that resizable=true,movable=false doesn\'t make\nsense from UX perspective.',name:"interactions",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"all"'},{value:'"move"'}]}},observeContentResize:{defaultValue:null,description:"When the size is not specified by `bounds` or `defaultBounds` props, the content size is measured and used in the\nreturned bounds. By default, the content size is measured initially. If `observeContentSize` is true, the DOM\nmutations will be observed and the content is re-measured as changes are observed.",name:"observeContentResize",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/SearchEverywhere/ContentAwarePopup.tsx#ContentAwarePopup"]={docgenInfo:ContentAwarePopup.__docgenInfo,name:"ContentAwarePopup",path:"../example-app/src/SearchEverywhere/ContentAwarePopup.tsx#ContentAwarePopup"})}catch(__react_docgen_typescript_loader_error){}var minusculeMatch=__webpack_require__("./src/minusculeMatch.ts"),TextWithHighlights=__webpack_require__("./src/TextWithHighlights/TextWithHighlights.tsx"),ActionGroup=__webpack_require__("./src/ActionSystem/ActionGroup.tsx");const StyledIconWrapper=styled.zo.span`
  width: 0.9375rem;
  margin-right: 0.25rem;
  display: inline-flex;
  justify-content: center;
`,StyledItemLayout=(0,styled.zo)(ItemLayout.e)`
  min-height: 1.375rem;
  width: 100%;
  padding: 0;
`,StyledTitleWrapper=styled.zo.span`
  color: ${({theme,isDisabled})=>isDisabled&&theme.currentForegroundAware(theme.commonColors.inactiveTextColor)};
`;try{StyledIconWrapper.displayName="StyledIconWrapper",StyledIconWrapper.__docgenInfo={description:"",displayName:"StyledIconWrapper",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/SearchEverywhere/contributors/ItemHelpers.tsx#StyledIconWrapper"]={docgenInfo:StyledIconWrapper.__docgenInfo,name:"StyledIconWrapper",path:"../example-app/src/SearchEverywhere/contributors/ItemHelpers.tsx#StyledIconWrapper"})}catch(__react_docgen_typescript_loader_error){}try{StyledItemLayout.displayName="StyledItemLayout",StyledItemLayout.__docgenInfo={description:"",displayName:"StyledItemLayout",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/SearchEverywhere/contributors/ItemHelpers.tsx#StyledItemLayout"]={docgenInfo:StyledItemLayout.__docgenInfo,name:"StyledItemLayout",path:"../example-app/src/SearchEverywhere/contributors/ItemHelpers.tsx#StyledItemLayout"})}catch(__react_docgen_typescript_loader_error){}try{StyledTitleWrapper.displayName="StyledTitleWrapper",StyledTitleWrapper.__docgenInfo={description:"",displayName:"StyledTitleWrapper",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/SearchEverywhere/contributors/ItemHelpers.tsx#StyledTitleWrapper"]={docgenInfo:StyledTitleWrapper.__docgenInfo,name:"StyledTitleWrapper",path:"../example-app/src/SearchEverywhere/contributors/ItemHelpers.tsx#StyledTitleWrapper"})}catch(__react_docgen_typescript_loader_error){}const ActionItem_StyledSpacer=styled.zo.div`
  flex: 1;
`;function ActionItem({action,highlights}){const{isSelected}=(0,react.useContext)(ItemStateContext.k)||{};return(0,jsx_runtime.jsxs)(StyledItemLayout,{children:[(0,jsx_runtime.jsx)(StyledIconWrapper,{children:action.icon}),(0,jsx_runtime.jsx)(StyledTitleWrapper,{isDisabled:action.isDisabled,children:isSelected?(0,jsx_runtime.jsx)(TextWithHighlights.x,{highlights,children:action.title}):action.title}),(0,jsx_runtime.jsx)(ItemLayout.e.Hint,{style:{fontSize:".85em",fontWeight:"bold"},children:action.shortcut}),(0,jsx_runtime.jsx)(ActionItem_StyledSpacer,{}),(0,jsx_runtime.jsx)(ItemLayout.e.Hint,{style:{marginRight:"-0.375rem"},children:getActionBreadcrumb(action,"title").join(" | ")})]})}function getActionBreadcrumb(action,field){let parent=(0,ActionGroup.nf)(action)?action.parent:null;const breadcrumb=[];for(;parent;)breadcrumb.unshift(field?parent[field]:parent),parent=parent.parent;return breadcrumb}ActionItem.displayName="ActionItem";try{ActionItem.displayName="ActionItem",ActionItem.__docgenInfo={description:"UI of actions in SearchEverywhere list",displayName:"ActionItem",props:{action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"Readonly<MutableAction>"}},highlights:{defaultValue:null,description:"",name:"highlights",required:!0,type:{name:"TextRange[] | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/SearchEverywhere/contributors/action/ActionItem.tsx#ActionItem"]={docgenInfo:ActionItem.__docgenInfo,name:"ActionItem",path:"../example-app/src/SearchEverywhere/contributors/action/ActionItem.tsx#ActionItem"})}catch(__react_docgen_typescript_loader_error){}const actionsSearchContributor={id:"Actions",title:"Actions",actionId:CommonActionIds.$.GO_TO_ACTION,use:({everyWhereAutoSet})=>{const contextElement=(0,es.sJ)(searchEverywhereState.contextElement),[showDisabledActions,setShowDisabledActions]=(0,react.useState)(null),allActions=(0,react.useMemo)((()=>contextElement?(0,ActionsProvider.C9)(contextElement):[]),[contextElement]),shouldIncludeDisabledActions=showDisabledActions??everyWhereAutoSet,actions=[{id:CommonActionIds.$.SHOW_INTENTION_ACTIONS,title:"Assign a shortcut",actionPerformed:notImplemented}];return{search:query=>{const allResults=allActions.map((action=>({highlights:(0,minusculeMatch.M)(action.title,query),action}))).filter((({action,highlights})=>highlights||(0,minusculeMatch.M)(action.description||"",query)));return shouldIncludeDisabledActions?allResults:allResults.filter((({action})=>!action.isDisabled))},searchDeps:[shouldIncludeDisabledActions],isEverywhere:shouldIncludeDisabledActions,toggleEverywhere:()=>{setShowDisabledActions((currentValue=>!currentValue))},searchAdvertiser:(0,jsx_runtime.jsx)(ActionShortcut.i,{actionId:CommonActionIds.$.SHOW_INTENTION_ACTIONS,children:shortcut=>`Press ${shortcut} to assign a shortcut`}),headerFilters:(0,jsx_runtime.jsx)(Checkbox.X,{preventFocus:!0,isSelected:shouldIncludeDisabledActions,onChange:value=>{setShowDisabledActions(value)},children:"Include disabled actions"}),actions,processSelectedItem({action}){action?.perform({event:null,element:contextElement})},getKey:({action})=>action.id,getItemText:({action:{title}})=>title,renderItem:({action,highlights})=>(0,jsx_runtime.jsx)(ActionItem,{action,highlights})}}};var splitWhen=__webpack_require__("../../node_modules/ramda/es/splitWhen.js");function FileItem({file,matches}){const{isSelected}=(0,react.useContext)(ItemStateContext.k)||{},title=file.name,dir=path_browserify_default().dirname(file.relativePath),[dirMatches,filenameMatches]=(0,splitWhen.Z)((match=>match.from>=dir.length),matches||[]),titleMatches=filenameMatches.map((({from,to})=>({from:from-dir.length,to:to-dir.length})));return(0,jsx_runtime.jsxs)(StyledItemLayout,{children:[(0,jsx_runtime.jsx)(StyledIconWrapper,{children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:getIconForFile(file.path)})}),(0,jsx_runtime.jsx)(StyledTitleWrapper,{children:isSelected?(0,jsx_runtime.jsx)(TextWithHighlights.x,{highlights:titleMatches,children:title}):title}),(0,jsx_runtime.jsx)(ItemLayout.e.Hint,{children:isSelected?(0,jsx_runtime.jsx)(TextWithHighlights.x,{highlights:dirMatches,children:dir}):dir})]})}FileItem.displayName="FileItem";try{FileItem.displayName="FileItem",FileItem.__docgenInfo={description:"UI of paths in SearchEverywhere list.",displayName:"FileItem",props:{file:{defaultValue:null,description:"",name:"file",required:!0,type:{name:"ProjectFsItem"}},matches:{defaultValue:null,description:"matches on file.relativePath",name:"matches",required:!0,type:{name:"TextRange[] | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/SearchEverywhere/contributors/file/FileItem.tsx#FileItem"]={docgenInfo:FileItem.__docgenInfo,name:"FileItem",path:"../example-app/src/SearchEverywhere/contributors/file/FileItem.tsx#FileItem"})}catch(__react_docgen_typescript_loader_error){}const filesSearchContributor={id:"Files",title:"Files",actionId:CommonActionIds.$.GO_TO_FILE,use:()=>{const getProjectFiles=(0,es._8)((({snapshot})=>()=>snapshot.getLoadable(currentProjectFilesState).getValue()),[]),{openPath}=useEditorStateManager(),selectPathInProjectView=useSelectPathInProjectView();return{search:query=>getProjectFiles().map((file=>({matches:(0,minusculeMatch.M)(file.relativePath,query),file}))).filter((({matches})=>matches?.length)),searchDeps:[],isEverywhere:!0,processSelectedItem({file}){"file"===file?.type&&openPath(file.path,!0),"dir"===file?.type&&selectPathInProjectView(file.path)},getKey:({file})=>file.path,renderItem:({file,matches})=>(0,jsx_runtime.jsx)(FileItem,{file,matches}),getItemText:({file:{relativePath}})=>relativePath}}},SearchEverywhereActionIds_PREVIOUS_TAB="SearchEverywhere.PrevTab",SearchEverywhereActionIds_NEXT_TAB="SearchEverywhere.NextTab",SearchEverywherePopup_StyledHeader=styled.zo.div`
  display: flex;
  width: 100%;
  background: ${({theme})=>theme.color("SearchEverywhere.Header.background")};
  border-bottom: 1px solid
    ${({theme})=>theme.color("SearchEverywhere.SearchField.borderColor")};
`,StyledTab=styled.zo.button`
  all: unset;
  background: ${({theme,selected})=>selected&&theme.color("SearchEverywhere.Tab.selectedBackground")};
  color: ${({theme})=>theme.color("SearchEverywhere.Tab.selectedForeground")};
  opacity: ${({disabled})=>disabled&&".5"};
`,StyledTabContent=styled.zo.span`
  display: flex;
  padding: 0 0.75rem;
  height: 1.8rem;
  align-items: center;
`,StyledTabs=styled.zo.div`
  line-height: normal;
  border-bottom: none;
`,StyledSearchFieldContainer=styled.zo.div`
  display: flex;
  flex-shrink: 0;
  height: 1.85rem;
  align-items: center;
  padding: 0 0.75rem 0;
  gap: 0.75rem;

  input {
    all: unset;
    flex: 1;
    line-height: 1.25;

    &::selection {
      color: ${({theme})=>theme.color("*.selectionForeground")};
      background: ${({theme})=>theme.color("*.selectionBackground")};
    }
  }
`,StyledSearchResultsContainer=styled.zo.div`
  height: 24rem;
  flex: 1;
  min-height: 0; // for it to properly fill the remaining height and not to exceed that
`,StyledDivider=styled.zo.hr`
  all: unset;
  height: 1px;
  width: 100%;
  border-bottom: 1px solid
    ${({theme})=>theme.color("SearchEverywhere.SearchField.borderColor")};
`,StyledSearchFieldHint=styled.zo.div`
  color: ${({theme})=>theme.color("SearchEverywhere.SearchField.infoForeground")};
  white-space: nowrap;
`,StyledLoadMore=styled.zo.div`
  color: ${({theme})=>theme.currentForegroundAware(theme.color("SearchEverywhere.SearchField.infoForeground"))};
  font-size: 0.7rem;
  min-height: 1.375rem;
`,StyledPlaceholder=styled.zo.div`
  color: ${({theme})=>theme.commonColors.inactiveTextColor};
  position: absolute;
  text-align: center;
  width: 100%;
  top: 50%;
`,contributors=[actionsSearchContributor,filesSearchContributor],LOAD_MORE_ITEM={};function SearchEverywherePopup(){const setOpen=(0,es.Zl)(searchEverywhereState.isOpen),[tab,setTab]=(0,es.FV)(searchEverywhereState.tab),[everyWhereAutoSet,setEveryWhereAutoSet]=(0,react.useState)(!1),[pattern,setPattern]=(0,react.useState)(useRecoilInitialValue(searchEverywhereState.initialSearchQuery(tab))),persistInitialSearchQuery=(0,es.Zl)(searchEverywhereState.initialSearchQuery(tab)),getShortcut=(0,ActionShortcut.k)(),[selectedKeys,setSelectedKeys]=(0,react.useState)(new Set),idToContributor={};contributors.forEach((contributor=>{idToContributor[contributor.id]={...contributor,...contributor.use({everyWhereAutoSet})}}));const activeContributors=contributors.filter((contributor=>""===tab||contributor.id===tab)).map((({id})=>idToContributor[id])),[searchResultLimit,setSearchResultLimit]=(0,react.useState)(30),{searchResult}=(0,react.useMemo)((()=>({searchResult:activeContributors.flatMap((contributor=>contributor.search(pattern).map((item=>({key:`${contributor.id}_${contributor.getKey(item)}`,contributor,item})))))})),[pattern,tab,...activeContributors.flatMap((({searchDeps})=>searchDeps))]),currentTabContributor=idToContributor[tab],visibleSearchResult=(0,react.useMemo)((()=>{const visibleSearchResult=searchResult.slice(0,searchResultLimit);return searchResult.length>visibleSearchResult.length&&visibleSearchResult.push({key:"LOAD_MORE_ITEM_KEY",item:LOAD_MORE_ITEM,contributor:null}),visibleSearchResult}),[searchResultLimit,searchResult]),notFoundPatternRef=(0,react.useRef)(null);(0,react.useEffect)((()=>{pattern&&persistInitialSearchQuery(pattern)}),[pattern,tab]),(0,react.useEffect)((()=>{if(searchResult[0]){const{key}=searchResult[0];setSelectedKeys(new Set([key])),selectionManagerRef.current?.setFocusedKey(key),requestAnimationFrame((()=>{selectionManagerRef.current?.setFocusedKey(key)}))}setSearchResultLimit(30)}),[searchResult]);const localActions=[{id:SearchEverywhereActionIds_PREVIOUS_TAB,title:"Prev tab",description:"Switch to previous tab in Search Everywhere dialog",actionPerformed:()=>{const currentContributorIndex=contributors.findIndex((({id})=>tab===id));setTab(""===tab?contributors.slice(-1)[0].id:contributors[currentContributorIndex-1]?.id||"")}},{id:SearchEverywhereActionIds_NEXT_TAB,title:"Next tab",description:"Switch to next tab in Search Everywhere dialog",actionPerformed:()=>{const currentContributorIndex=contributors.findIndex((({id})=>tab===id));setTab(contributors[currentContributorIndex+1]?.id||"")}}],contributorActions=contributors.flatMap((({id,actionId,title})=>actionId?[{id:actionId,title:`Find ${title}`,description:`Quickly go to ${title} by name`,actionPerformed:()=>{tab!==id?setTab(id):currentTabContributor?.toggleEverywhere?.()}}]:[])),close=()=>setOpen(!1),collectionRef=(0,react.useRef)(null),selectionManagerRef=(0,react.useRef)(null),onAction=key=>{if("LOAD_MORE_ITEM_KEY"===key){setSearchResultLimit((limit=>limit+30));const nextItem=searchResult[visibleSearchResult.length+1];nextItem&&setTimeout((()=>{setSelectedKeys(new Set([nextItem.key])),selectionManagerRef.current?.setFocusedKey(nextItem.key)}))}else close(),setTimeout((()=>{const itemWrapper=searchResult.find((item=>item.key===key));itemWrapper?.contributor.processSelectedItem(itemWrapper.item)}),50)},{collectionSearchInputProps}=(0,useCollectionSearchInput.R)({collectionRef,onAction,selectionManager:selectionManagerRef.current}),tips=useTips();return(0,jsx_runtime.jsx)(ContentAwarePopup,{persistedBoundsState:searchEverywhereState.bounds,hasContent:Boolean(pattern),noContentHeight:59,minWidth:670,minHeight:160,interactions:"all",onClose:close,children:(0,jsx_runtime.jsx)(ActionsProvider.DG,{actions:[...currentTabContributor?.actions||[],...contributorActions,...localActions],children:({shortcutHandlerProps})=>(0,jsx_runtime.jsx)("div",{...shortcutHandlerProps,style:{height:"inherit"},children:(0,jsx_runtime.jsx)(Popup.GI.Layout,{header:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Popup.GI.Header,{hasControls:!0,children:(0,jsx_runtime.jsxs)(SearchEverywherePopup_StyledHeader,{children:[(0,jsx_runtime.jsx)("div",{style:{flex:1},children:(0,jsx_runtime.jsxs)(Tabs.m,{TabComponent:StyledTab,TabsComponent:StyledTabs,selectedKey:tab,onSelectionChange:key=>setTab(key),children:[(0,jsx_runtime.jsx)(Item.c,{children:(0,jsx_runtime.jsx)(StyledTabContent,{children:"All"})},""),contributors.map((contributor=>{const shortcut=getShortcut(contributor.actionId),title=(0,jsx_runtime.jsx)(StyledTabContent,{children:contributor.title});return(0,jsx_runtime.jsx)(Item.c,{children:shortcut?(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(Tooltip.u,{children:shortcut}),children:(0,jsx_runtime.jsx)("span",{children:title})}):title},contributor.id)}))]})}),currentTabContributor?.headerFilters,(0,jsx_runtime.jsx)(IconButton.hU,{style:{margin:"0 0.5rem"},isDisabled:!0,children:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/moveToLeftBottom"})})]})}),(0,jsx_runtime.jsxs)(StyledSearchFieldContainer,{children:[(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/search"}),(0,jsx_runtime.jsx)(FocusScope.MT,{contain:!0,children:(0,jsx_runtime.jsx)(Input,{...collectionSearchInputProps,autoFocus:!0,onFocus:event=>{event.target.select()},value:pattern,onChange:e=>(newPattern=>{const newPatternContainsPrevious=notFoundPatternRef.current&&newPattern.includes(notFoundPatternRef.current);currentTabContributor?.isEverywhere&&!newPatternContainsPrevious&&setEveryWhereAutoSet(!1),setPattern(newPattern)})(e.currentTarget.value)})}),(0,jsx_runtime.jsx)(StyledSearchFieldHint,{children:currentTabContributor?.searchAdvertiser})]})]}),content:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StyledDivider,{}),pattern&&(0,jsx_runtime.jsxs)(StyledSearchResultsContainer,{children:[(0,jsx_runtime.jsx)(List.a,{ref:collectionRef,selectionManagerRef,items:visibleSearchResult,selectionMode:"single",showAsFocused:!0,shouldFocusWrap:!0,fillAvailableSpace:!0,selectedKeys,onSelectionChange:setSelectedKeys,onAction,children:({key,item,contributor})=>{if("LOAD_MORE_ITEM_KEY"===key)return(0,jsx_runtime.jsx)(Item.c,{children:(0,jsx_runtime.jsx)(StyledLoadMore,{children:"...more"})},"LOAD_MORE_ITEM_KEY");const itemText=contributor.getItemText(item);return(0,jsx_runtime.jsx)(Item.c,{textValue:itemText,"aria-label":itemText,children:contributor.renderItem(item)},key)}}),0===searchResult.length&&(0,jsx_runtime.jsx)(StyledPlaceholder,{children:"No actions with such name found"})]})]}),footer:(0,jsx_runtime.jsxs)(Popup.GI.Hint,{children:[tips.current," ",(0,jsx_runtime.jsx)(Link.r,{onPress:tips.next,children:"Next Tip"})]})})})})})}SearchEverywherePopup.displayName="SearchEverywherePopup";try{SearchEverywherePopup.displayName="SearchEverywherePopup",SearchEverywherePopup.__docgenInfo={description:"TODO: implement history navigation",displayName:"SearchEverywherePopup",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/SearchEverywhere/SearchEverywherePopup.tsx#SearchEverywherePopup"]={docgenInfo:SearchEverywherePopup.__docgenInfo,name:"SearchEverywherePopup",path:"../example-app/src/SearchEverywhere/SearchEverywherePopup.tsx#SearchEverywherePopup"})}catch(__react_docgen_typescript_loader_error){}const gitAddCallback=callbackInterface=>async filepath=>{const refreshFileStatus=refreshFileStatusCallback(callbackInterface),dir=await isomorphic_git.ZP.findRoot({fs,filepath});await isomorphic_git.ZP.add({fs,dir,filepath:path_browserify_default().relative(dir,filepath)}),await refreshFileStatus(filepath)};try{gitAddCallback.displayName="gitAddCallback",gitAddCallback.__docgenInfo={description:"",displayName:"gitAddCallback",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/gitAddCallback.tsx#gitAddCallback"]={docgenInfo:gitAddCallback.__docgenInfo,name:"gitAddCallback",path:"../example-app/src/VersionControl/gitAddCallback.tsx#gitAddCallback"})}catch(__react_docgen_typescript_loader_error){}var InputField_Input=__webpack_require__("./src/InputField/Input.tsx"),ValidationTooltip=__webpack_require__("./src/Tooltip/ValidationTooltip.tsx");const StyledInput=(0,styled.zo)(InputField_Input.I)`
  width: 20.5rem;
  /**
     * To have the validation box shadow not clipped by the popup.
     * Maybe it should be an option on input to make sure margin is always in sync with the box-shadow thickness
     */
  margin: 3px;

  input {
    padding-top: 1px;
    padding-bottom: 1px;
  }
`,NewItemPopup_StyledHeader=(0,styled.zo)(Popup.GI.Header)`
  border-bottom: 1px solid ${({theme})=>theme.commonColors.border()};
`;function NewItemPopup({title,inputName="Name",onSubmit,validationMessage,validationType="error",value,onChange}){const[hideMessage,setHideMessage]=(0,react.useState)(!1);return(0,jsx_runtime.jsx)(Popup.GI,{children:(0,jsx_runtime.jsx)(PopupLayout.F,{header:(0,jsx_runtime.jsx)(NewItemPopup_StyledHeader,{children:title}),content:(0,jsx_runtime.jsx)("form",{onSubmit:e=>{e.preventDefault(),onSubmit()},onMouseDown:()=>{setHideMessage(!0)},children:(0,jsx_runtime.jsx)(PositionedTooltipTrigger.S,{isOpen:Boolean(validationMessage)&&!hideMessage,placement:"top start",offset:6,crossOffset:-6,tooltip:(0,jsx_runtime.jsx)(ValidationTooltip.p,{type:validationType,children:validationMessage}),children:(0,jsx_runtime.jsx)(StyledInput,{appearance:"embedded",validationState:validationMessage?validationType:void 0,placeholder:inputName,value,onChange:e=>{setHideMessage(!1),onChange(e.target.value)}})})})})})}NewItemPopup.displayName="NewItemPopup";try{NewItemPopup.displayName="NewItemPopup",NewItemPopup.__docgenInfo={description:"A simple Popup with an input, used in actions such as create file, or create directory",displayName:"NewItemPopup",props:{inputName:{defaultValue:{value:"Name"},description:"",name:"inputName",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"ReactNode"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"() => void"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: string) => void"}},validationMessage:{defaultValue:null,description:"",name:"validationMessage",required:!1,type:{name:"string"}},validationType:{defaultValue:{value:"error"},description:"",name:"validationType",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/Project/actions/NewItemPopup.tsx#NewItemPopup"]={docgenInfo:NewItemPopup.__docgenInfo,name:"NewItemPopup",path:"../example-app/src/Project/actions/NewItemPopup.tsx#NewItemPopup"})}catch(__react_docgen_typescript_loader_error){}const createFileActionState=(0,es.nZ)({key:`action.${projectActionIds.NewFile}`,get:({get,getCallback})=>({id:projectActionIds.NewFile,icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"fileTypes/text"}),title:"File",description:"Create new file",isDisabled:!get(activePathExistsState),actionPerformed:getCallback((({snapshot,refresh})=>async()=>{const activePaths=snapshot.getLoadable(activePathsState).getValue();if(0===activePaths.length)return;const popupManager=snapshot.getLoadable(projectPopupManagerRefState).getValue().current,destinationDir=(await fs.promises.stat(activePaths[0])).isDirectory()?activePaths[0]:path_browserify_default().dirname(activePaths[0]);if(!popupManager)throw new Error("Could not find popup manager");popupManager.show((({close})=>(0,jsx_runtime.jsx)(NewFilePopup,{close,destinationDir})))}))})});function NewFilePopup({destinationDir,close}){const createFile=(0,es._8)((callbackInterface=>{const createFile=(callbackInterface=>{const refreshFileStatus=refreshFileStatusCallback(callbackInterface);return async(destinationDir,filename)=>{const filePath=path_browserify_default().join(destinationDir,filename),{snapshot,refresh,reset}=callbackInterface,releaseSnapshot=snapshot.retain();try{if(await ensureDir(fs.promises,path_browserify_default().dirname(filePath)),await fs.promises.exists(filePath))throw new Error(`File ${filePath} already exists`);await fs.promises.writeFile(filePath,"","utf-8"),reset(fileContentState(filePath)),(await snapshot.getPromise(editorManagerState)).openPath(filePath),await refreshFileStatus(filePath),refresh(dirContentState(destinationDir))}finally{releaseSnapshot()}}})(callbackInterface);return async(destination,filename)=>{const fullpath=path_browserify_default().join(destinationDir,filename),{snapshot}=callbackInterface,editorManager=snapshot.getLoadable(editorManagerState).getValue(),windowManager=snapshot.getLoadable(windowManagerRefState).getValue().current,repoDir=await snapshot.getPromise(vcsRootForFile(fullpath));await createFile(destinationDir,filename),close(),editorManager.focus(),await waitUntil((()=>document.activeElement instanceof HTMLTextAreaElement)),repoDir&&windowManager?.open((({close})=>(0,jsx_runtime.jsx)(AddFileToGitWindow,{filepath:fullpath,close})))}}),[close]),[filename,setFilename]=(0,react.useState)(""),[validationMessage,setValidationMessage]=(0,react.useState)("");return(0,jsx_runtime.jsx)(NewItemPopup,{title:"New File",onSubmit:()=>{filename&&(async()=>{const fullPath=path_browserify_default().join(destinationDir,filename),stats=await stat(fullPath);stats?.isFile()?setValidationMessage(`A file with the name '${path_browserify_default().basename(filename)}' already exists`):stats?.isDirectory()?setValidationMessage(`A directory with the name '${path_browserify_default().basename(filename)}' already exists`):await createFile(destinationDir,filename)})()},value:filename,onChange:newValue=>{setValidationMessage(""),setFilename(newValue)},validationMessage})}function AddFileToGitWindow({close,filepath}){const addToGit=function useAddToGit(){return(0,es._8)(gitAddCallback,[])}();return(0,jsx_runtime.jsx)(ModalWindow.Du,{minWidth:"content",minHeight:"content",children:(0,jsx_runtime.jsx)(WindowLayout.b,{header:"Add File to Git",content:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("div",{style:{display:"flex",gap:"1rem",padding:"0.75rem 0.75rem 0rem"},children:[(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/questionDialog.svg",size:32}),(0,jsx_runtime.jsxs)("div",{children:["Do you want to add the following file to Git?",(0,jsx_runtime.jsx)("br",{}),filepath,(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)("br",{}),"If you choose Cancel, you can still add it later manually."]})]})}),footer:(0,jsx_runtime.jsx)(WindowLayout.b.Footer,{left:(0,jsx_runtime.jsx)(Checkbox.X,{isDisabled:!0,children:"Don't ask again"}),right:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.z,{onPress:close,children:"Cancel"}),(0,jsx_runtime.jsx)(Button.z,{autoFocus:!0,variant:"default",onPress:()=>{addToGit(filepath).then(close)},children:"Add"})]})})})})}async function waitUntil(criteria,timeoutInMs=2e3){criteria()||timeoutInMs<0||(await new Promise((resolve=>setTimeout(resolve,50))),await waitUntil(criteria,timeoutInMs-50))}NewFilePopup.displayName="NewFilePopup",AddFileToGitWindow.displayName="AddFileToGitWindow";const createDirectoryActionState=(0,es.nZ)({key:`action.${projectActionIds.NewDir}`,get:({get,getCallback})=>({id:projectActionIds.NewDir,icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"nodes/folder"}),title:"Directory",description:"Create new directory",isDisabled:!get(activePathExistsState),actionPerformed:getCallback((({snapshot,refresh})=>async()=>{const activePaths=snapshot.getLoadable(activePathsState).getValue();if(0===activePaths.length)return;const popupManager=snapshot.getLoadable(projectPopupManagerRefState).getValue().current,destinationDir=(await fs.promises.stat(activePaths[0])).isDirectory()?activePaths[0]:path_browserify_default().dirname(activePaths[0]);if(!popupManager)throw new Error("Could not find popup manager");popupManager.show((({close})=>(0,jsx_runtime.jsx)(NewDirectoryPopup,{close,destinationDir})))}))})});function NewDirectoryPopup({destinationDir,close}){const createDirectory=(0,es._8)(createDirectoryCallback,[]),[dirName,setDirName]=(0,react.useState)(""),[validationResult,setValidationResult]=(0,react.useState)(null),updateValidation=(asyncCallback=>{const cancelToken=(0,react.useRef)(null),callbackRef=(0,react.useRef)(asyncCallback);return callbackRef.current=asyncCallback,(...args)=>{cancelToken.current?.abort(),cancelToken.current=new esm.qf.cancelToken,(0,esm.qf)((function(signal,...args){return callbackRef.current(...args)}))(cancelToken.current,...args)}})((function*(destinationDir,dirName){setValidationResult(yield validate(destinationDir,dirName))}));(0,react.useEffect)((()=>{updateValidation(destinationDir,dirName)}),[destinationDir,dirName]);return(0,jsx_runtime.jsx)(NewItemPopup,{title:"New Directory",onSubmit:()=>{dirName&&(async()=>{null==await validate(destinationDir,dirName)&&(await createDirectory(destinationDir,dirName),close())})()},value:dirName,onChange:setDirName,validationMessage:validationResult?.message,validationType:validationResult?.type})}NewDirectoryPopup.displayName="NewDirectoryPopup";const validate=async function(destinationDir,dirName){const fullPath=path_browserify_default().join(destinationDir,dirName);if(!dirName)return null;if(dirName.includes("."))return{type:"warning",message:'Note: "." in the name is treated as a regular character. Use "/" instead if you mean to create nested directories'};let stats=await stat(fullPath);return stats?.isFile()?{type:"error",message:`A file with the name '${dirName}' already exists`}:stats?.isDirectory()?{type:"error",message:`A directory with the name '${dirName}' already exists`}:null},copyFilenameActionState=(0,es.nZ)({key:`action.${projectActionIds.CopyFileName}`,get:({get,getCallback})=>({id:projectActionIds.CopyFileName,title:"File Name",isDisabled:!get(activePathExistsState),actionPerformed:getCallback((({snapshot})=>async()=>{notImplemented();snapshot.getLoadable(activePathsState).getValue().length}))})}),copyAbsolutePathActionState=(0,es.nZ)({key:`action.${projectActionIds.CopyAbsolutePath}`,get:({get,getCallback})=>({id:projectActionIds.CopyAbsolutePath,title:"Absolute Path",isDisabled:!get(activePathExistsState),useShortcutsOf:"CopyPaths",actionPerformed:getCallback((({snapshot})=>async()=>{notImplemented();snapshot.getLoadable(activePathsState).getValue().length}))})}),copyPathFromRepositoryRootActionState=(0,es.nZ)({key:`action.${VcsActionIds.CopyPathFromRepositoryRootProvider}`,get:({get,getCallback})=>({id:VcsActionIds.CopyPathFromRepositoryRootProvider,title:"Path From Repository Root",isDisabled:!get(activePathExistsState),actionPerformed:getCallback((({snapshot,refresh})=>async()=>{notImplemented();snapshot.getLoadable(activePathsState).getValue().length}))})});function useProjectActions(){const openSearchEverywhere=(0,es._8)((({set})=>({element},tab)=>{element&&(set(searchEverywhereState.isOpen,!0),set(searchEverywhereState.tab,tab),set(searchEverywhereState.contextElement,element))}),[]),createDefaultActionGroup=(0,useCreateDefaultActionGroup.w)(),newElementActionGroup=createDefaultActionGroup({id:"NewElement",title:"New...",description:"Create new class, interface, file or directory",isSearchable:!0,children:[(0,es.sJ)(createFileActionState),(0,es.sJ)(createDirectoryActionState)]}),copyReferencePopupGroup=createDefaultActionGroup({id:projectActionIds.CopyReferencePopupGroup,title:"Copy Path/Reference...",menuPresentation:"none",children:[createDefaultActionGroup({id:projectActionIds.CopyFileReference,title:"Copy File Reference",isSearchable:!1,menuPresentation:"section",children:[(0,es.sJ)(copyAbsolutePathActionState),(0,es.sJ)(copyFilenameActionState),(0,es.sJ)(copyPathFromRepositoryRootActionState)]})]});return[{id:CommonActionIds.$.GO_TO_ACTION,title:"Find Action",description:"Quickly navigate to action by name",actionPerformed:event=>{openSearchEverywhere(event,"Actions")}},{id:CommonActionIds.$.GO_TO_FILE,title:"Go to file",description:"Quickly navigate to file by name",actionPerformed:event=>{openSearchEverywhere(event,"Files")}},newElementActionGroup,copyReferencePopupGroup]}const ToolWindowsRefContext=react.createContext(null),useToolWindowManager=()=>{const toolWindowRef=(0,react.useContext)(ToolWindowsRefContext);return{open:key=>{toolWindowRef?.current?.changeState((state=>state.show(key))),toolWindowRef?.current?.focus(key)}}},useChangesViewActionDefinitions=()=>{const openRollbackWindow=(0,es._8)(openRollbackWindowForSelectionCallback,[]),refresh=useRefreshRepoStatuses();return[useCheckInActionDefinition(),useCheckInProjectAction(),useJumpToSourceAction(),{id:VcsActionIds.ROLLBACK,title:"Rollback...",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/rollback.svg"}),actionPerformed:event=>{openRollbackWindow(Boolean(event))}},{id:VcsActionIds.REFRESH,title:"Refresh VCS Changes",description:"Refresh VCS Changes",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/refresh.svg"}),actionPerformed:refresh},{id:VcsActionIds.SHOW_DIFF,title:"Show Diff",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/diff.svg"}),actionPerformed:notImplemented},{id:VcsActionIds.SHELVE,title:"Shelve Changes...",description:"Save changes to an external patch file and remove them from the code",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"vcs/shelve.svg"}),actionPerformed:notImplemented},...useChangeListActionDefinitions()]},commitFileMsg=new core.C("{count, plural,\n    =1 {Commit File...}\n    other {Commit Files...}\n  }","en-US"),commitDirMsg=new core.C("{count, plural,\n    =1 {Commit Directory...}\n    other {Commit Directories...}\n  }","en-US");function useCheckInActionDefinition(){const queueCheckIn=(0,es._8)(queueCheckInCallback,[]),toolWindowManager=useToolWindowManager(),activePaths=(0,es.sJ)(activePathsState),[projectFiles]=useLatestRecoilValue(currentProjectFilesState),roots=findRootPaths(activePaths),allChanges=(0,es.sJ)(allChangesState),containsChange=roots.some((root=>allChanges.find((change=>function isPathInside(parent,dir){const relative=path_browserify_default().relative(parent,dir);return!relative||!relative.startsWith("..")&&!path_browserify_default().isAbsolute(relative)}(root,Change.path(change)))))),selectedPathsAreDirectories=roots.every((path=>projectFiles?.some((item=>"dir"===item.type&&item.path===path))));return{id:VcsActionIds.CHECKIN_FILES,title:selectedPathsAreDirectories?commitDirMsg.format({count:roots.length}):commitFileMsg.format({count:roots.length}),isDisabled:!containsChange,actionPerformed:()=>{queueCheckIn(),toolWindowManager.open("Commit"),focusCommitMessage()}}}function useCheckInProjectAction(){const toolWindowManager=useToolWindowManager(),queueChanges=(0,es._8)((({snapshot,set})=>()=>{const includedChangesKeys=snapshot.getLoadable(includedChangeKeysState).getValue();let keyToSelect=includedChangesKeys.values().next().value;if(0===includedChangesKeys.size){const allKeys=snapshot.getLoadable(activeChangeListState).getValue()?.changes.map(getNodeKeyForChange);set(includedChangeKeysState,new Set(allKeys)),keyToSelect=allKeys?.[0]}if(keyToSelect){const{rootNodes}=snapshot.getLoadable(changesTreeNodesState).getValue();set(ChangesView_state_expandedKeysState,new Set([...snapshot.getLoadable(ChangesView_state_expandedKeysState).getValue(),...(0,tree_utils.Bp)((node=>isGroupNode(node)?node.children:null),(node=>node.key),rootNodes,[keyToSelect])])),set(selectedKeysState,new Set([keyToSelect]))}}),[]);return{id:VcsActionIds.CHECKIN_PROJECT,title:"Commit",actionPerformed:()=>{queueChanges(),toolWindowManager.open("Commit"),focusCommitMessage()}}}function useJumpToSourceAction(){const editorStateManager=useEditorStateManager(),selectedChanges=(0,es.sJ)(changesUnderSelectedKeys);return{id:VcsActionIds.JUMP_TO_SOURCE,title:"Jump to source",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"actions/editSource.svg"}),actionPerformed:()=>{[...selectedChanges].forEach(((change,index,arr)=>{const changePath=Change.path(change);changePath||editorStateManager.openPath(changePath,index===arr.length-1)}))}}}function useChangeListActionDefinitions(){const selectedChanges=(0,es.sJ)(changesUnderSelectedKeys),actions=[{id:VcsActionIds.NEW_CHANGELIST,title:"New Changelist...",description:"Create new changelist",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/add.svg"}),actionPerformed:notImplemented}];return selectedChanges.size>0&&actions.push({title:"Move to Another Changelist...",description:"Move selected changes to another changelist",id:VcsActionIds.MOVE_TO_ANOTHER_CHANGELIST,actionPerformed:notImplemented}),actions}const CreateNewBranchWindow_StyledContainer=styled.zo.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  padding: 1rem 0.875rem 0.25rem;
  gap: 0.6rem;
`,StyledCheckboxesContainer=styled.zo.div`
  margin-left: -0.25rem; // to align with the field. Maybe something to look into in checkbox.
  display: flex;
  gap: 0.75rem;
`,CreateNewBranchWindow_ErrorMessages={EXISTING:branchName=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Branch name ",branchName," already exists. ",(0,jsx_runtime.jsx)("br",{}),"Change the name or overwrite existing branch"]}),CLASHING_WITH_REMOTE:branchName=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Branch name ",branchName," clashes with remote branch ",(0,jsx_runtime.jsx)("br",{}),"with the same name"]})};function CreateNewBranchWindow({close}){const[checkout,setCheckout]=(0,react.useState)(!0),[overwrite,setOverwrite]=(0,react.useState)(!1),branches=(0,es.sJ)(activeFileRepoBranchesState),[isErrorVisible,setIsErrorVisible]=(0,react.useState)(!1),balloonManager=(0,BalloonManager.L)(),createBranch=function useCreateBranch(){return(0,es._8)((({refresh})=>(repoRoot,branchName,checkout=!0)=>(0,isomorphic_git.WY)({fs,dir:repoRoot,checkout,ref:branchName}).then((()=>{refresh(repoBranchesState(repoRoot))}))),[])}(),currentBranchName=branches.currentBranch?.name,[branchName,setBranchName]=(0,react.useState)(currentBranchName||""),error=validateBranchName(branches,branchName),isValid=!error||"EXISTING"===error&&overwrite,validationState=!isValid&&isErrorVisible?"error":"valid";return(0,jsx_runtime.jsx)(ModalWindow.Du,{minWidth:"content",minHeight:"content",children:(0,jsx_runtime.jsx)(WindowLayout.b,{header:"Create New Branch",content:(0,jsx_runtime.jsxs)(CreateNewBranchWindow_StyledContainer,{id:"create_branch_form",as:"form",onSubmit:e=>{e.preventDefault(),isValid?createBranch(branches.repoRoot,branchName,checkout).catch((e=>{e instanceof isomorphic_git.D1.AlreadyExistsError?balloonManager.show({icon:"Error",title:"Unimplemented action",body:"Overwrite option is currently not supported."}):balloonManager.show({icon:"Error",title:"Unexpected error",body:`Could not create branch ${branchName}.`}),console.error("Branch creation error: ",e)})).then((()=>{close()})):setIsErrorVisible(!0)},children:[(0,jsx_runtime.jsx)(InputField.U,{autoFocus:!0,autoSelect:!0,value:branchName,onChange:newValue=>{setBranchName(cleanUpBranchName(newValue)),setIsErrorVisible(!0)},validationState,validationMessage:"error"===validationState&&error&&CreateNewBranchWindow_ErrorMessages[error](branchName),label:"New branch name:",labelPlacement:"above"}),(0,jsx_runtime.jsxs)(StyledCheckboxesContainer,{children:[(0,jsx_runtime.jsx)(Checkbox.X,{isSelected:checkout,onChange:setCheckout,children:"Checkout branch"}),(0,jsx_runtime.jsx)(Checkbox.X,{isSelected:overwrite,isDisabled:!isErrorVisible||"EXISTING"!==error,onChange:setOverwrite,children:"Overwrite existing branch"})]})]}),footer:(0,jsx_runtime.jsx)(WindowLayout.b.Footer,{right:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.z,{onPress:close,children:"Cancel"}),(0,jsx_runtime.jsx)(Button.z,{variant:"default",type:"submit",form:"create_branch_form",isDisabled:"error"===validationState,children:"Create"})]})})})})}CreateNewBranchWindow.displayName="CreateNewBranchWindow";try{CreateNewBranchWindow.displayName="CreateNewBranchWindow",CreateNewBranchWindow.__docgenInfo={description:"",displayName:"CreateNewBranchWindow",props:{close:{defaultValue:null,description:"",name:"close",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/Branches/CreateNewBranchWindow.tsx#CreateNewBranchWindow"]={docgenInfo:CreateNewBranchWindow.__docgenInfo,name:"CreateNewBranchWindow",path:"../example-app/src/VersionControl/Branches/CreateNewBranchWindow.tsx#CreateNewBranchWindow"})}catch(__react_docgen_typescript_loader_error){}const createAction=({isSearchable,isDisabled,actionPerformed,...params})=>(0,es.nZ)({key:`action.${params.id}`,get:({get,getCallback})=>{const resolve=value=>(0,es.Oy)(value)?get(value):value;return{...params,isDisabled:resolve(isDisabled),isSearchable:resolve(isSearchable),actionPerformed:getCallback(actionPerformed)}}});try{createAction.displayName="createAction",createAction.__docgenInfo={description:"Creates an action based on a recoil state and callbacks.\nThe action is created as a recoil selector, which means it only\nupdates when recoil values used in properties like isDisabled\nare changed.",displayName:"createAction",props:{id:{defaultValue:null,description:"The unique identifier for the action. Used to assign shortcuts to the action, via a {@link Keymap }.",name:"id",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"The title of an action.\nThis value will be used as the text in UI display for the action.",name:"title",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"An optional description for an action.\nIf provided, it can be displayed as additional information about the action in the UI.",name:"description",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"An optional icon for an action.\nIf provided, it will be displayed along with the title in the UI.",name:"icon",required:!1,type:{name:"ReactNode"}},useShortcutsOf:{defaultValue:null,description:"Allows reusing the shortcut of another action, if no shortcut is set for this action.",name:"useShortcutsOf",required:!1,type:{name:"string"}},actionPerformed:{defaultValue:null,description:"",name:"actionPerformed",required:!0,type:{name:"(callbackInterface: CallbackInterface) => (context: ActionContext) => T"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"MaybeRecoilValue<boolean>"}},isSearchable:{defaultValue:null,description:"",name:"isSearchable",required:!1,type:{name:"MaybeRecoilValue<boolean>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/createAction.tsx#createAction"]={docgenInfo:createAction.__docgenInfo,name:"createAction",path:"../example-app/src/createAction.tsx#createAction"})}catch(__react_docgen_typescript_loader_error){}const pathsToAddState=(0,es.nZ)({key:`vcs.action.${VcsActionIds.GIT_ADD}.pathsToAdd`,get:async({get})=>asyncFilter((async activePath=>{const repoDir=get(vcsRootForFile(activePath));if(repoDir){const isIgnored=await isomorphic_git.ZP.isIgnored({fs,dir:repoDir,filepath:path_browserify_default().relative(repoDir,activePath)}),isFile=await fs.promises.stat(activePath).then((stat=>stat.isFile())).catch((()=>!1)),isUnchangedFile=isFile&&"NOT_CHANGED"===get(fileStatusState(activePath));return!isIgnored&&!isUnchangedFile}return!1}),get(activePathsState))}),gitAddDisabledState=(0,es.nZ)({key:`vcs.action.${VcsActionIds.GIT_ADD}.disabled`,get:({get})=>0===get(pathsToAddState).length}),gitAddActionSelector=createAction({id:VcsActionIds.GIT_ADD,title:"Add",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/add.svg"}),useShortcutsOf:VcsActionIds.ADD_UNVERSIONED,isDisabled:gitAddDisabledState,actionPerformed:callbackInterface=>async()=>{const addToGit=gitAddCallback(callbackInterface),{snapshot}=callbackInterface,pathsToAdd=await snapshot.getPromise(pathsToAddState);return Promise.all(pathsToAdd.map(addToGit))}});try{gitAddActionSelector.displayName="gitAddActionSelector",gitAddActionSelector.__docgenInfo={description:"FIXME: action is not enabled on repo roots.\nFIXME(maybe): if repo status is being updated, action either remains disabled or just doesn't work (didn't check which)\n Maybe not much to do here if the action remains disabled because of unknown status, though.\nTODO: task API can be used to make this a task.",displayName:"gitAddActionSelector",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/actions/gitAddAction.tsx#gitAddActionSelector"]={docgenInfo:gitAddActionSelector.__docgenInfo,name:"gitAddActionSelector",path:"../example-app/src/VersionControl/actions/gitAddAction.tsx#gitAddActionSelector"})}catch(__react_docgen_typescript_loader_error){}const gitInitActionSelector=createAction({id:VcsActionIds.GIT_INIT,title:"Create Git Repository...",actionPerformed:({snapshot,set})=>async()=>{const dir=(await snapshot.getPromise(currentProjectState)).path;await isomorphic_git.ZP.init({fs,dir}),set(vcsRootsState,(roots=>roots.filter((root=>root.dir!==dir)).concat({vcs:"Git",dir})))}});try{gitInitActionSelector.displayName="gitInitActionSelector",gitInitActionSelector.__docgenInfo={description:"FIXME: action is not enabled on repo roots.\nFIXME(maybe): if repo status is being updated, action either remains disabled or just doesn't work (didn't check which)\n Maybe not much to do here if the action remains disabled because of unknown status.\nTODO: task API can be used to make this a task.",displayName:"gitInitActionSelector",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/VersionControl/actions/gitInitAction.tsx#gitInitActionSelector"]={docgenInfo:gitInitActionSelector.__docgenInfo,name:"gitInitActionSelector",path:"../example-app/src/VersionControl/actions/gitInitAction.tsx#gitInitActionSelector"})}catch(__react_docgen_typescript_loader_error){}var Label=__webpack_require__("./src/Field/Label.tsx"),ComboBox=__webpack_require__("./src/Dropdown/ComboBox.tsx");const visitedUrlsChecker=(0,refine_es.IX)((0,refine_es.Ry)({url:(0,refine_es.Z_)(),username:(0,refine_es.Z_)()})),gitVisitedUrlsState=(0,es.cn)({key:"git.rememberedInputs.visitedUrls",default:[],effects:[persistentAtomEffect.option({storageFile:"vcs.xml",componentName:"GitRememberedInputs",optionName:"visitedUrls",refine:visitedUrlsChecker,read:option=>ensureArray(option?.list?.UrlAndUserName).map((({option})=>({url:ensureArray(option).find((option=>"url"===option["@name"]))?.["@value"],username:ensureArray(option).find((option=>"userName"===option["@name"]))?.["@value"]}))).filter((i=>i.url)),update:value=>option=>({...option,list:{UrlAndUserName:value.map((({url,username})=>({option:[{"@name":"url","@value":url},{"@name":"userName","@value":username??""}]})))}})})]}),cloneParentDirState=(0,es.cn)({key:"git.rememberedInputs.cloneParentDir",default:"",effects:[persistentAtomEffect.option({storageFile:"vcs.xml",componentName:"GitRememberedInputs",optionName:"cloneParentDir",refine:(0,refine_es.Z_)(),read:option=>option?.["@value"]??"",update:value=>option=>({...option,"@value":value})})]});var StyledPopupContainer=__webpack_require__("./src/Popup/StyledPopupContainer.tsx");const defaultWorkspaceFiles={".idea/vcs.xml":'<?xml version="1.0" encoding="UTF-8"?>\n<project version="4">\n  <component name="GitRememberedInputs">\n    <option name="visitedUrls">\n      <list>\n        <UrlAndUserName>\n          <option name="url" value="https://github.com/alirezamirian/jui.git"></option>\n          <option name="userName" value=""></option>\n        </UrlAndUserName>\n        <UrlAndUserName>\n          <option name="url" value="https://github.com/thurwitz/example-branches.git"></option>\n          <option name="userName" value=""></option>\n        </UrlAndUserName>\n      </list>\n    </option>\n    <option name="cloneParentDir" value="/workspace"></option>\n  </component>\n  <component name="VcsDirectoryMappings"></component>\n</project>\n\n'};async function isSuccessfullyCloned(dir){try{if(!(await fs.promises.stat(dir)).isDirectory())return console.info(`Already cloned repo was not found. "${dir}" is not a directory.`),!1;const files=await fs.promises.readdir(dir);if(1===files.length&&".git"===files[0])return console.info(`Already cloned repo was not found at "${dir}". ".git" folder exists, but it's not successfully unpacked.`),!1}catch(e){return console.info(`Already cloned repo was not found at "${dir}".`),!1}return!0}const defaultInitializer=async()=>{await ensureDir(fs.promises,defaultProject.path),await Promise.all(Object.entries(defaultWorkspaceFiles).map((async([filename,content])=>{const fullPath=path_browserify_default().join(defaultProject.path,filename);await fs.promises.exists(fullPath)||(await ensureDir(fs.promises,path_browserify_default().dirname(fullPath)),await fs.promises.writeFile(fullPath,content,"utf-8"))})))},InlinePopup=(0,styled.zo)(StyledPopupContainer.e)`
  min-width: ${({minWidth})=>minWidth?`${minWidth}px`:""};
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`,ProjectInitializer=({children,autoCloneSampleRepo=!1})=>{const[cloneProgress,setCloneProgress]=(0,react.useState)(null),[state,setState]=(0,react.useState)("uninitialized");(0,react.useEffect)((()=>{!async function init(){const initializer=window.INITIALIZE_APP??defaultInitializer;try{await initializer({fs,git:isomorphic_git.ZP,path:path_browserify_default(),projectDir:defaultProject.path}),autoCloneSampleRepo&&await async function ensureSampleRepo(dir,repoUrl){await isSuccessfullyCloned(dir)||(setState("cloning"),await cloneRepo({dir,url:repoUrl,onProgress:setCloneProgress}))}(autoClonedRepo_path,autoClonedRepo_url),console.log("demo repo initialized"),setState("initialized")}catch(e){console.error("could not initialize the demo repo",e),setState("error")}}()}),[]);const fraction=cloneProgress?.total?cloneProgress.loaded/cloneProgress.total:0;switch(state){case"uninitialized":return null;case"initialized":return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children});case"cloning":return(0,jsx_runtime.jsx)(InlinePopup,{minWidth:450,children:(0,jsx_runtime.jsx)(Popup.GI.Layout,{header:"Cloning sample git repository",content:(0,jsx_runtime.jsx)("div",{style:{padding:"1rem"},children:(0,jsx_runtime.jsx)(ProgressBar.ko,{name:`Cloning repository ${autoClonedRepo_url}`,isIndeterminate:!cloneProgress,details:fraction?`${cloneProgress?.phase}: ${Math.round(100*fraction)}% ${cloneProgress?.loaded}/${cloneProgress?.total}`:cloneProgress?.phase,"aria-label":"Progress of cloning sample repo",value:cloneProgress?cloneProgress.loaded/cloneProgress.total:0,maxValue:1})})})});case"error":return(0,jsx_runtime.jsx)(AlertDialog.a,{type:"error",heading:"Something went wrong!",body:"Could not initialize example app",buttons:(0,jsx_runtime.jsx)(Button.z,{variant:"default",onPress:()=>{window.location.reload()},children:"Reload"})})}};async function cloneRepo({dir,url,onProgress}){console.log("cloning repo: "),await(0,isomorphic_git.d9)({fs,url,http:web.Z,corsProxy:"https://cors.isomorphic-git.org",dir,onProgress,singleBranch:!0})}try{isSuccessfullyCloned.displayName="isSuccessfullyCloned",isSuccessfullyCloned.__docgenInfo={description:"",displayName:"isSuccessfullyCloned",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/ProjectInitializer.tsx#isSuccessfullyCloned"]={docgenInfo:isSuccessfullyCloned.__docgenInfo,name:"isSuccessfullyCloned",path:"../example-app/src/ProjectInitializer.tsx#isSuccessfullyCloned"})}catch(__react_docgen_typescript_loader_error){}try{cloneRepo.displayName="cloneRepo",cloneRepo.__docgenInfo={description:"",displayName:"cloneRepo",props:{dir:{defaultValue:null,description:"",name:"dir",required:!0,type:{name:"string"}},onProgress:{defaultValue:null,description:"",name:"onProgress",required:!1,type:{name:"ProgressCallback"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/ProjectInitializer.tsx#cloneRepo"]={docgenInfo:cloneRepo.__docgenInfo,name:"cloneRepo",path:"../example-app/src/ProjectInitializer.tsx#cloneRepo"})}catch(__react_docgen_typescript_loader_error){}try{ProjectInitializer.displayName="ProjectInitializer",ProjectInitializer.__docgenInfo={description:"",displayName:"ProjectInitializer",props:{autoCloneSampleRepo:{defaultValue:{value:"false"},description:"",name:"autoCloneSampleRepo",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/ProjectInitializer.tsx#ProjectInitializer"]={docgenInfo:ProjectInitializer.__docgenInfo,name:"ProjectInitializer",path:"../example-app/src/ProjectInitializer.tsx#ProjectInitializer"})}catch(__react_docgen_typescript_loader_error){}const gitCloneActionSelector=createAction({id:VcsActionIds.GIT_CLONE,title:"Clone...",actionPerformed:({snapshot})=>async()=>{const windowManager=await snapshot.getPromise(windowManagerRefState);windowManager.current?.open((({close})=>(0,jsx_runtime.jsx)(GitCloneWindow,{close})))}}),cloneAnotherRepoActionSelector=createAction({id:"ExampleApp.cloneExampleRepo",title:"Clone another repository...",isSearchable:!1,actionPerformed:({snapshot})=>async()=>{const windowManager=await snapshot.getPromise(windowManagerRefState);windowManager.current?.open((({close})=>(0,jsx_runtime.jsx)(GitCloneWindow,{close,url:"https://github.com/thurwitz/example-branches.git"})))}}),gitCloneAction_StyledContainer=styled.zo.div`
  padding: 1rem;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 0.75rem;
`;function GitCloneWindow({close,url:urlProp}){const[url,setUrl]=(0,react.useState)(urlProp??""),parentDir=(0,es.sJ)(cloneParentDirState),[directory,setDirectory]=(0,react.useState)(getAutoFillDir(url)),[autoFillDirectory,setAutoFillDirectory]=(0,react.useState)(!0),[showValidationErrors,setShowValidationErrors]=(0,react.useState)(!1),setCloneParentDirState=(0,es.Zl)(cloneParentDirState),[visitedUrls,setVisitedUrls]=(0,es.FV)(gitVisitedUrlsState),urlInputRef=(0,react.useRef)(null),dirInputRef=(0,react.useRef)(null),urlError=function validateRepoUrl(url){url=function sanitizeCloneUrl(url){return removePrefix(removePrefix(url.trim(),"git clone"),"hg clone")}(url);try{return new URL(url),null}catch(e){if(SSH_URL_PATTERN.test(url))return null}return"Repository URL is a malformed URL"}(url),[dirError,setDirError]=(0,react.useState)(""),clone=function useClone(){const runTask=useRunTask(),refreshProjectFiles=useRefreshCurrentProjectFiles(),setVcsRoots=(0,es.Zl)(vcsRootsState);return(0,react.useCallback)((({url,dir,onSuccess})=>{runTask({title:`Cloning source repository ${url}`},{onFinished:onSuccess,run:async({setIndeterminate,setFraction,setSecondaryText})=>{await cloneRepo({dir,url,onProgress:progress=>{if(progress.total){const fraction=progress.loaded/progress.total;setFraction(fraction),setSecondaryText(`${progress.phase}: ${Math.round(100*fraction)}% ${progress.loaded}/${progress.total}`)}else setSecondaryText(progress.phase),setIndeterminate(!0)}}).then((()=>{setVcsRoots((roots=>roots.find((root=>root.dir===dir))?roots:roots.concat({vcs:"Git",dir}))),refreshProjectFiles()}),(e=>{console.log("e",e),_balloonManagerRef.value?.show({icon:"Error",title:"Clone failed",body:`Failed to clone git repo "${url} into ${dir}: ${e}"`})}))}})}),[])}();function getAutoFillDir(value){const repoName=value.split(/\/{1,2}/).pop()?.replace(/\.git$/,"")??"";return repoName?path_browserify_default().join(parentDir,repoName):parentDir}return(0,jsx_runtime.jsx)(ModalWindow.Du,{minWidth:600,children:(0,jsx_runtime.jsx)(WindowLayout.b,{header:"Get from Version Control",content:(0,jsx_runtime.jsx)(Label.O,{children:(0,jsx_runtime.jsx)("form",{id:"clone_form",onSubmit:async e=>{e.preventDefault(),setShowValidationErrors(!0);const dirValidationError=await async function validateCloneDirectory(directory){const stats=await stat(directory);if(!stats)return null;if(!stats.isDirectory())return"Destination is not a directory";const entries=await fs.promises.readdir(directory);return entries.length>0?"The directory already exists and is not empty":null}(directory);if(dirValidationError)return setDirError(dirValidationError),void dirInputRef.current?.focus();urlError?urlInputRef.current?.focus():(setCloneParentDirState(path_browserify_default().dirname(directory)),setVisitedUrls((urls=>urls.find((visitedUrl=>visitedUrl.url===url))?urls:urls.concat({url}))),clone({url,dir:directory,onSuccess:()=>{setVisitedUrls((visitedUrls=>visitedUrls.map((({url})=>url)).includes(url)?visitedUrls:[...visitedUrls,{url,username:""}]))}}),close())},children:(0,jsx_runtime.jsxs)(gitCloneAction_StyledContainer,{children:[(0,jsx_runtime.jsx)(ComboBox.C,{inputRef:urlInputRef,autoFocus:!0,label:"URL:",value:url,validationState:urlError&&showValidationErrors?"error":"valid",validationMessage:showValidationErrors&&urlError,onValueChange:value=>{setUrl(value),autoFillDirectory&&setDirectory(getAutoFillDir(value))},items:visitedUrls,children:({url})=>(0,jsx_runtime.jsx)(Item.c,{children:url},url)}),(0,jsx_runtime.jsx)(InputField.U,{inputRef:dirInputRef,label:"Directory:",value:directory,validationState:dirError&&showValidationErrors?"error":"valid",validationMessage:showValidationErrors&&dirError,addonAfter:(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:"Browse... (⇧⏎)"}),children:props=>(0,jsx_runtime.jsx)(AutoHoverPlatformIcon.v,{...props,style:{marginRight:".2rem"},role:"button",onClick:notImplemented,icon:"general/openDisk.svg"})}),onChange:value=>{setDirectory(value),setAutoFillDirectory(!1),setDirError("")}})]})})}),footer:(0,jsx_runtime.jsx)(WindowLayout.b.Footer,{right:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.z,{onPress:close,children:"Cancel"}),(0,jsx_runtime.jsx)(Button.z,{variant:"default",isDisabled:!directory||!url,type:"submit",form:"clone_form",children:"Clone"})]})})})})}GitCloneWindow.displayName="GitCloneWindow";const SSH_URL_PATTERN=new RegExp("^git@[\\w.-]+:[\\w./-]+\\.git$");function removePrefix(str,prefix){return str.startsWith(prefix)?str.slice(prefix.length):str}function useVcsActions(){const popupManager=(0,PopupManager.U)(),windowManager=useWindowManager(),[gitAddAction]=useExistingLatestRecoilValue(gitAddActionSelector),[gitInitAction]=useExistingLatestRecoilValue(gitInitActionSelector),[gitCloneAction]=useExistingLatestRecoilValue(gitCloneActionSelector),[cloneAnotherRepoAction]=useExistingLatestRecoilValue(cloneAnotherRepoActionSelector);return[...useChangesViewActionDefinitions(),gitAddAction,gitCloneAction,cloneAnotherRepoAction,...0===(0,es.sJ)(vcsRootsState).length?[gitInitAction]:[],{id:VcsActionIds.GIT_CREATE_NEW_BRANCH,title:"New Branch…",description:"Create new branch starting from the selected commit",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/add.svg"}),actionPerformed:()=>{windowManager.open((({close})=>(0,jsx_runtime.jsx)(CreateNewBranchWindow,{close})))}},{id:VcsActionIds.GIT_BRANCHES,title:"Branches…",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"vcs/branch.svg"}),actionPerformed:()=>{popupManager.show((({close})=>(0,jsx_runtime.jsx)(BranchesPopup,{close})))}},{id:VcsActionIds.GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH,title:"Navigate Log to Selected Branch Head",useShortcutsOf:"SelectIn",icon:(0,jsx_runtime.jsx)(PlatformIcon.vq,{icon:"general/locate.svg"}),actionPerformed:()=>{notImplemented()}}]}var fxp=__webpack_require__("../../node_modules/fast-xml-parser/src/fxp.js");const WORKSPACE_XML_PARSE_OPTIONS={attributeNamePrefix:"@",ignoreAttributes:!1,isArray:(tagName,jPath)=>"project.component"===jPath},WORKSPACE_XML_BUILD_OPTIONS={format:!0,attributeNamePrefix:"@",ignoreAttributes:!1};async function readWorkspace(storageFile){const xmlParser=new fxp.XMLParser(WORKSPACE_XML_PARSE_OPTIONS);if(!await fs.promises.exists(storageFile))return null;const xmlData=await fs.promises.readFile(storageFile,{encoding:"utf8"}),workspace=xmlParser.parse(xmlData);return workspace.project=workspace.project||{},workspace.project.component=ensureArray(workspace.project.component),workspace}async function writeWorkspace(storageFile,workspaceState){const xmlString=new fxp.XMLBuilder(WORKSPACE_XML_BUILD_OPTIONS).build(workspaceState);await ensureDir(fs.promises,path_browserify_default().dirname(storageFile)),await fs.promises.writeFile(storageFile,xmlString)}const storageFileMapping={[StorageFiles.WORKSPACE_FILE]:"workspace.xml"};function PersistentStateProvider({children}){const containerDirectory=path_browserify_default().join((0,es.sJ)(currentProjectState).path,".idea"),resolveStorageFile=storageFile=>path_browserify_default().join(containerDirectory,storageFileMapping[storageFile]||storageFile),getWorkspace=storageFile=>readWorkspace(resolveStorageFile(storageFile));return(0,react.useEffect)((()=>{getWorkspace(StorageFiles.WORKSPACE_FILE)}),[]),(0,jsx_runtime.jsx)(recoil_sync_es.J1,{storeKey:"ProjectWorkspace",read:async key=>{const[storageFile,componentName]=key.split("|"),workspace=await getWorkspace(storageFile);return workspace?.project.component.find((({"@name":name})=>name===componentName))},write:async({diff})=>{const changesByFile=(0,groupBy.Z)((({storageFile})=>storageFile),[...diff.entries()].map((([key,value])=>{const[storageFile,componentName]=key.split("|");return{storageFile,componentName,value}})));for(const storageFile in changesByFile){const changes=changesByFile[storageFile],workspace=await readWorkspace(resolveStorageFile(storageFile))||{"?xml":{"@version":"1.0","@encoding":"UTF-8"},project:{"@version":"4",component:[]}};for(const{value,componentName}of changes){const components=workspace.project.component,index=components.findIndex((({"@name":name})=>name===componentName)),componentState="function"==typeof value?value(components[index]||null):value;components.splice(index,index>=0?1:0,{"@name":componentName,...componentState})}await writeWorkspace(resolveStorageFile(storageFile),workspace)}},children})}PersistentStateProvider.displayName="PersistentStateProvider";try{PersistentStateProvider.displayName="PersistentStateProvider",PersistentStateProvider.__docgenInfo={description:"",displayName:"PersistentStateProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/Project/persistence/PersistentStateProvider.tsx#PersistentStateProvider"]={docgenInfo:PersistentStateProvider.__docgenInfo,name:"PersistentStateProvider",path:"../example-app/src/Project/persistence/PersistentStateProvider.tsx#PersistentStateProvider"})}catch(__react_docgen_typescript_loader_error){}function useTestActions(){const runTask=useRunTask();return[{id:"AddTestProcessAction",title:"Add Test Process",actionPerformed:()=>{runTask({title:"Test process",isCancelable:!0},(async({setText,setSecondaryText,setFraction},abortSignal)=>{setText("Welcome!"),await(0,esm.qf)((function*(){for(let each=0;each<1e3;each++)setText(getProcessName(each)),setFraction(each/1e3),yield sleep(100),setSecondaryText("Bla bla bla")}))(abortSignal)}))}}]}async function sleep(durationInMs){return new Promise((resolve=>setTimeout(resolve,durationInMs)))}function getProcessName(num){return num/10==Math.round(num/10)?"":"Found: "+Math.round(num/20)+1}const StyledWindowFrame=styled.zo.div`
  display: flex;
  flex-direction: column;
  height: 100vh;
  min-height: 0;
`,Project=({height})=>{const toolWindowRef=(0,react.useRef)(null),[state,setState]=(0,es.FV)(toolWindowsState),isRollbackWindowOpen=(0,es.sJ)(rollbackViewState.isOpen),isSearchEveryWhereOpen=(0,es.sJ)(searchEverywhereState.isOpen);return(0,es.sJ)(projectPopupManagerRefState).current=(0,PopupManager.U)(),(0,es.sJ)(windowManagerRefState).current=useWindowManager(),(0,es.sJ)(alertDialogRefState).current=useAlertDialog(),(0,jsx_runtime.jsxs)(PersistentStateProvider,{children:[(0,jsx_runtime.jsx)(SyncChangeListsState,{}),(0,jsx_runtime.jsxs)(BalloonManager.a,{disablePortal:!0,children:[(0,jsx_runtime.jsx)(SetBalloonManagerRef,{}),(0,jsx_runtime.jsx)(UsePersistentFsNotification,{}),(0,jsx_runtime.jsx)(ToolWindowsRefContext.Provider,{value:toolWindowRef,children:(0,jsx_runtime.jsxs)(StyledWindowFrame,{style:{height},children:[(0,jsx_runtime.jsx)(ProjectActionProvider,{children:({shortcutHandlerProps})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DefaultToolWindows.u,{ref:toolWindowRef,toolWindowsState:state,onToolWindowStateChange:newState=>{setState(newState)},windows:toolWindows,containerProps:shortcutHandlerProps,children:(0,jsx_runtime.jsx)(FileEditor,{})}),(0,jsx_runtime.jsx)(IdeStatusBar,{})]})}),isSearchEveryWhereOpen&&(0,jsx_runtime.jsx)(SearchEverywherePopup,{}),isRollbackWindowOpen&&(0,jsx_runtime.jsx)(RollbackWindow,{})]})})]})]})};function ProjectActionProvider(props){const allActions=[...useProjectActions(),...useVcsActions(),...useTestActions()];return(0,jsx_runtime.jsx)(ActionsProvider.DG,{...props,actions:allActions,useCapture:!0})}function SetBalloonManagerRef(){return _balloonManagerRef.value=(0,BalloonManager.L)(),null}function UsePersistentFsNotification(){return function usePersistenceFsNotification(){const balloons=(0,BalloonManager.L)(),runTask=useRunTask();(0,react.useEffect)((()=>{const timeoutId=setTimeout((()=>{null==persistentFsPreference.get()&&balloons.showSticky({title:"Switch to IndexedDB filesystem",body:"By default an in-memory filesystem is used to have a faster git clone. But it means all changes will be lost upon refresh. You can switch in the background to a persistence fs implementation which uses IndexedDB to store files.",actions:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Balloon.g,{onPress:()=>{runTask({title:"Switching to IndexedDB FS",isCancelable:!0},(async({setIndeterminate,setText},cancelSignal)=>{setText("Copying ..."),setIndeterminate(!0),await switchToPersistentFS({cancelSignal,onCopy:filepath=>{setText(`Copying ${path_browserify_default().dirname(filepath)}`)}}).then((()=>{persistentFsPreference.set("yes")})).catch((()=>{}))}))},children:"Switch to IndexedDB FS"}),(0,jsx_runtime.jsx)(Balloon.g,{onPress:()=>persistentFsPreference.set("no"),children:"Don't ask again"})]})})}),3e3);return()=>clearTimeout(timeoutId)}),[])}(),null}Project.displayName="Project",ProjectActionProvider.displayName="ProjectActionProvider";try{Project.displayName="Project",Project.__docgenInfo={description:"",displayName:"Project",props:{height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"Height<string | number> | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/Project/Project.tsx#Project"]={docgenInfo:Project.__docgenInfo,name:"Project",path:"../example-app/src/Project/Project.tsx#Project"})}catch(__react_docgen_typescript_loader_error){}const exampleAppKeymap={ActivateProjectWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit1",modifiers:["Meta"]}}],ActivateCommitWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit0",modifiers:["Meta"]}}],ActivateVersionControlWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit9",modifiers:["Meta"]}}],ActivateTerminalWindow:[{type:"keyboard",firstKeyStroke:{code:"F12",modifiers:["Alt"]}}],[VcsActionIds.ROLLBACK]:[{type:"keyboard",firstKeyStroke:{code:"KeyZ",modifiers:["Alt","Meta"]}}],[VcsActionIds.SHOW_DIFF]:[{type:"keyboard",firstKeyStroke:{code:"KeyD",modifiers:["Meta"]}}],[VcsActionIds.SHELVE_SILENTLY]:[{type:"keyboard",firstKeyStroke:{code:"KeyH",modifiers:["Meta","Shift"]}}],[VcsActionIds.UNSHELVE_SILENTLY]:[{type:"keyboard",firstKeyStroke:{code:"KeyU",modifiers:["Meta","Alt"]}}],[SearchEverywhereActionIds_PREVIOUS_TAB]:[{type:"keyboard",firstKeyStroke:{code:"Tab",modifiers:["Shift"]}}],[SearchEverywhereActionIds_NEXT_TAB]:[{type:"keyboard",firstKeyStroke:{code:"Tab"}}],[VcsActionIds.RENAME_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{code:"F2"}}],[VcsActionIds.MOVE_TO_ANOTHER_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyM"}}],[VcsActionIds.SET_DEFAULT_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{modifiers:["Control"],code:"Space"}}],[VcsActionIds.REMOVE_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{code:"Backspace"}}],[VcsActionIds.CHECKIN_PROJECT]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyK"}}],[VcsActionIds.ADD_UNVERSIONED]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"KeyA"}}],[VcsActionIds.FOCUS_TEXT_FILTER]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyL"}}],[VcsActionIds.GROUP_BY_DIRECTORY]:[{type:"keyboard",firstKeyStroke:{modifiers:["Control"],code:"KeyP"}}],SafeDelete:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"Backspace"}}],CopyPaths:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyC"}}],NewElement:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyN"}}]};var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("../../node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("../../node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),jetbrains_mono_font=__webpack_require__("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!../example-app/src/jetbrains-mono-font.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(jetbrains_mono_font.Z,options);jetbrains_mono_font.Z&&jetbrains_mono_font.Z.locals&&jetbrains_mono_font.Z.locals;window.git=isomorphic_git.ZP,window.fs=fs,window.path=path_browserify,window.http=web.Z;const App=({height,autoCloneSampleRepo})=>(0,jsx_runtime.jsx)(DefaultSuspense,{children:(0,jsx_runtime.jsx)(WaitForFs,{children:(0,jsx_runtime.jsx)(ProjectInitializer,{autoCloneSampleRepo,children:(0,jsx_runtime.jsx)(KeymapProvider.ur,{keymap:exampleAppKeymap,children:(0,jsx_runtime.jsx)(es.Wh,{children:(0,jsx_runtime.jsx)(WindowManager,{children:(0,jsx_runtime.jsx)(PopupManager.q,{children:(0,jsx_runtime.jsx)(Project,{height})})})})})})})});App.displayName="App";try{App.displayName="App",App.__docgenInfo={description:"Example app root component. It expects ThemeProvider to be provided based on where it's rendered.",displayName:"App",props:{height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"Height<string | number>"}},autoCloneSampleRepo:{defaultValue:null,description:"",name:"autoCloneSampleRepo",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../example-app/src/App.tsx#App"]={docgenInfo:App.__docgenInfo,name:"App",path:"../example-app/src/App.tsx#App"})}catch(__react_docgen_typescript_loader_error){}const demo_stories={title:"Demos/Example App"},ExampleApp={render:()=>(0,jsx_runtime.jsx)(App,{}),parameters:{layout:"fullscreen",controls:{exclude:story_helpers.q}}};ExampleApp.parameters={...ExampleApp.parameters,docs:{...ExampleApp.parameters?.docs,source:{originalSource:'{\n  render: () => <App />,\n  parameters: {\n    layout: "fullscreen",\n    controls: {\n      exclude: styledComponentsControlsExclude\n    }\n  }\n}',...ExampleApp.parameters?.docs?.source}}};const __namedExportsOrder=["ExampleApp"]},"./src/AlertDialog/AlertDialog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>AlertDialog});__webpack_require__("../../node_modules/react/index.js");var _intellij_platform_core_ModalWindow__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/ModalWindow/ModalWindow.tsx"),_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/Overlay/OverlayMoveHandle.tsx"),_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/Icon/PlatformIcon.tsx"),_intellij_platform_core_ButtonGroup__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/ButtonGroup/ButtonGroup.tsx"),_intellij_platform_core_utils_interaction_utils_useMove__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/utils/interaction-utils/useMove.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledModalWindow=(0,_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(_intellij_platform_core_ModalWindow__WEBPACK_IMPORTED_MODULE_3__.Du)`
  ${_intellij_platform_core_ModalWindow__WEBPACK_IMPORTED_MODULE_3__.dt} {
    border-radius: 0;
    outline: 0.5px solid rgba(0, 0, 0, 0.85); // FIXME
  }
`,StyledContainer=_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  padding: 1.25rem;
  display: grid;
  grid-template-columns: auto 1fr;
  grid-template-rows: auto auto;
  align-items: center;
  gap: 0.875rem;
`,StyledHeading=_styled__WEBPACK_IMPORTED_MODULE_2__.zo.h2`
  margin: 0;
  font-size: 0.875rem;
  line-height: 1.25rem;
  font-weight: bold;
`,StyledBody=_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  line-height: 1.2;
`,StyledContent=_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  cursor: default;
`,StyledCheckbox=_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  padding: 0.375rem 0;
  // to align the checkbox with the content, since the box has a padding. Maybe Checkbox should not have any padding.
  margin-left: -0.25rem;
`,StyledButtons=(0,_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(_intellij_platform_core_ButtonGroup__WEBPACK_IMPORTED_MODULE_4__.h)`
  display: flex;
  justify-self: end;
  gap: 1rem;
`,StyledIcon=_styled__WEBPACK_IMPORTED_MODULE_2__.zo.span`
  align-self: start;
`,StyledHelpIcon=_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  justify-self: center;
`,AlertDialog=({type="question",heading,body,checkbox,helpButton,buttons,minWidth=370,...otherProps})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledModalWindow,{role:"alertdialog",interactions:"move",minWidth,defaultBounds:{top:window.innerHeight/4},observeContentResize:!0,...otherProps,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_5__.F,{dragThreshold:6,canMoveStart:_intellij_platform_core_utils_interaction_utils_useMove__WEBPACK_IMPORTED_MODULE_6__.z,children:({moveHandleProps})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledContainer,{...moveHandleProps,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledIcon,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_7__.vq,{size:32,icon:`general/${type}Dialog`})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledContent,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledHeading,{children:heading}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledBody,{children:body}),checkbox&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledCheckbox,{children:checkbox})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledHelpIcon,{children:helpButton}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledButtons,{children:buttons})]})})});AlertDialog.displayName="AlertDialog";try{AlertDialog.displayName="AlertDialog",AlertDialog.__docgenInfo={description:"A modal dialog implementing [Alert](https://jetbrains.github.io/ui/controls/alert), which is the\n[notification](https://jetbrains.github.io/ui/controls/notifications/) pattern for use cases where\nimmediate user action is required.\nSince the use cases are quite specific, and the component is expected to be used with pretty specific\ncontent items, the layout is not implemented as a separate component, the way it is in components like\n{@link ModalWindow} or {@link Menu }",displayName:"AlertDialog",props:{heading:{defaultValue:null,description:"Content slot for the heading, aka. title of the dialog. Typically plain text.",name:"heading",required:!1,type:{name:"ReactNode"}},body:{defaultValue:null,description:"Content slot for the body, aka. message of the dialog. Typically plain text.",name:"body",required:!1,type:{name:"ReactNode"}},checkbox:{defaultValue:null,description:'Content slot for the checkbox ("Do not ask again").\n@example ```jsx\n<AlertDialog checkbox={<Checkbox>Do not ask again</Checkbox>} />\n```\n@see Checkbox',name:"checkbox",required:!1,type:{name:"ReactNode"}},type:{defaultValue:{value:"question"},description:"Type of the alert dialog. The icon is set based on type.",name:"type",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"information"'},{value:'"question"'}]}},buttons:{defaultValue:null,description:'Content slot for buttons.\n@example ```jsx\n<AlertDialog\n  buttons={\n    <>\n      <Button>Cancel</Button>\n      <Button variant="default">Ok</Button>\n    </>\n  }\n/>\n```\n@see Button',name:"buttons",required:!1,type:{name:"ReactNode"}},helpButton:{defaultValue:null,description:'Content slot for help icon button in the footer.\n@example ```jsx\n<AlertDialog\n  helpButton={\n    <TooltipTrigger tooltip={<HelpTooltip helpText="Show Help Contents" />}>\n      <Button variant="icon">\n        <PlatformIcon icon="actions/help"></PlatformIcon>\n      </Button>\n    </TooltipTrigger>\n  }\n/>\n```\n@see Button',name:"helpButton",required:!1,type:{name:"ReactNode"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},minWidth:{defaultValue:{value:"370"},description:"",name:"minWidth",required:!1,type:{name:'number | "content"'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/AlertDialog/AlertDialog.tsx#AlertDialog"]={docgenInfo:AlertDialog.__docgenInfo,name:"AlertDialog",path:"src/AlertDialog/AlertDialog.tsx#AlertDialog"})}catch(__react_docgen_typescript_loader_error){}},"./src/Balloon/Balloon.styled.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CD:()=>StyledBalloonFooter,EQ:()=>StyledToggleIconContainer,Fx:()=>StyledToggleExpandButtonContainer,GE:()=>StyledBalloonHeader,H7:()=>StyledIconContainer,NY:()=>StyledBalloonContainer,Of:()=>StyledHeaderActions,VT:()=>StyledBalloonBody,cU:()=>StyledToggleExpandButtonFooterContainer});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/styled.ts");const bgColor=({theme})=>theme.color("Notification.background",theme.dark?"#4E5052":"rgb(242,242,242)"),StyledHeaderActions=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo.div`
  position: absolute;
  right: 0;
  top: 0;
  background: inherit;
  padding: 0.375rem 0.5rem 0;
  &::before {
    content: "";
    position: absolute;
    right: 100%;
    background: linear-gradient(90deg, transparent, ${bgColor});
    width: 20px;
    height: 100%;
    z-index: 1;
    top: 0;
  }
`,StyledBalloonContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo.div`
  line-height: 1.2;
  box-sizing: border-box;
  overflow: hidden; // header actions overflows a little at the top right rounded corner
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); // shadow doesn't seem to be themed
  padding: 0.5rem 0;
  border: 1px solid
    ${({theme})=>theme.color("Notification.borderColor",theme.dark?"#565A5CCD":"#B2B2B2CD")};
  border-radius: ${({theme})=>(theme.value("Notification.arc")??12)/2+"px"};
  //display: inline-flex;
  width: 23.3125rem;
  position: relative;
  background-color: ${bgColor};
  color: ${({theme})=>theme.color("Notification.foreground",theme.dark?"rgb(191,191,191)":"#000")};

  ${StyledHeaderActions} {
    display: none;
  }
  &:hover ${StyledHeaderActions} {
    display: initial;
  }
`,StyledIconContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo.span`
  position: absolute;
  left: 0.75rem;
  top: 0.5rem;
`,StyledBalloonHeader=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo.div`
  line-height: 1rem;
  font-weight: bold;
  margin: 0 2.125rem 0.25rem;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis; // this is not the case in original impl, but it's a clear improvement
`,StyledBalloonBody=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo.div`
  margin: 0 2.125rem 0 2.125rem;
  line-height: 1rem;
  display: inline;
  -webkit-line-clamp: ${({lineClamp})=>lineClamp};
  word-break: ${({lineClamp})=>1===lineClamp&&"break-all"};
  text-overflow: ellipsis;
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  word-wrap: break-word;
`,StyledBalloonFooter=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo.div`
  margin: 0.375rem 1.875rem 0 2.125rem;
  display: inline-flex;
  white-space: nowrap;
  overflow: hidden;
  gap: 1rem;

  // could be -webkit-fill-available too, if it has good support. Probably it doesn't tho
  max-width: calc(100% - 3.5rem);
`,StyledToggleIconContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo.span`
  display: inline-flex;
  position: absolute;
  right: 0.5rem;
  bottom: 0;
  background-color: ${bgColor};
  padding-left: 0.5rem;
`,StyledToggleExpandButtonContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo.span`
  display: block;
  position: relative; // for icon absolute positioning
  cursor: pointer;
  flex: 1;
`,StyledToggleExpandButtonFooterContainer=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo)(StyledToggleExpandButtonContainer)`
  min-height: 1.5rem;
  margin: -0.5rem 0;
  position: relative;
  z-index: 1;
  ${StyledToggleIconContainer} {
    bottom: 0.5rem;
  }
  ${StyledBalloonFooter} {
    margin-top: 0.875rem;
    margin-bottom: 0.5rem;
  }
  ${StyledBalloonFooter}:hover + * .icon[data-hover] {
    display: none;
  }
  ${StyledBalloonFooter}:hover + * .icon {
    display: unset;
  }
`;try{StyledHeaderActions.displayName="StyledHeaderActions",StyledHeaderActions.__docgenInfo={description:"",displayName:"StyledHeaderActions",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/Balloon.styled.tsx#StyledHeaderActions"]={docgenInfo:StyledHeaderActions.__docgenInfo,name:"StyledHeaderActions",path:"src/Balloon/Balloon.styled.tsx#StyledHeaderActions"})}catch(__react_docgen_typescript_loader_error){}try{StyledBalloonContainer.displayName="StyledBalloonContainer",StyledBalloonContainer.__docgenInfo={description:"",displayName:"StyledBalloonContainer",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/Balloon.styled.tsx#StyledBalloonContainer"]={docgenInfo:StyledBalloonContainer.__docgenInfo,name:"StyledBalloonContainer",path:"src/Balloon/Balloon.styled.tsx#StyledBalloonContainer"})}catch(__react_docgen_typescript_loader_error){}try{StyledIconContainer.displayName="StyledIconContainer",StyledIconContainer.__docgenInfo={description:"",displayName:"StyledIconContainer",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/Balloon.styled.tsx#StyledIconContainer"]={docgenInfo:StyledIconContainer.__docgenInfo,name:"StyledIconContainer",path:"src/Balloon/Balloon.styled.tsx#StyledIconContainer"})}catch(__react_docgen_typescript_loader_error){}try{StyledBalloonHeader.displayName="StyledBalloonHeader",StyledBalloonHeader.__docgenInfo={description:"",displayName:"StyledBalloonHeader",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/Balloon.styled.tsx#StyledBalloonHeader"]={docgenInfo:StyledBalloonHeader.__docgenInfo,name:"StyledBalloonHeader",path:"src/Balloon/Balloon.styled.tsx#StyledBalloonHeader"})}catch(__react_docgen_typescript_loader_error){}try{StyledBalloonBody.displayName="StyledBalloonBody",StyledBalloonBody.__docgenInfo={description:"",displayName:"StyledBalloonBody",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},lineClamp:{defaultValue:null,description:"",name:"lineClamp",required:!0,type:{name:"number | false"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/Balloon.styled.tsx#StyledBalloonBody"]={docgenInfo:StyledBalloonBody.__docgenInfo,name:"StyledBalloonBody",path:"src/Balloon/Balloon.styled.tsx#StyledBalloonBody"})}catch(__react_docgen_typescript_loader_error){}try{StyledBalloonFooter.displayName="StyledBalloonFooter",StyledBalloonFooter.__docgenInfo={description:"",displayName:"StyledBalloonFooter",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/Balloon.styled.tsx#StyledBalloonFooter"]={docgenInfo:StyledBalloonFooter.__docgenInfo,name:"StyledBalloonFooter",path:"src/Balloon/Balloon.styled.tsx#StyledBalloonFooter"})}catch(__react_docgen_typescript_loader_error){}try{StyledToggleIconContainer.displayName="StyledToggleIconContainer",StyledToggleIconContainer.__docgenInfo={description:"",displayName:"StyledToggleIconContainer",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/Balloon.styled.tsx#StyledToggleIconContainer"]={docgenInfo:StyledToggleIconContainer.__docgenInfo,name:"StyledToggleIconContainer",path:"src/Balloon/Balloon.styled.tsx#StyledToggleIconContainer"})}catch(__react_docgen_typescript_loader_error){}try{StyledToggleExpandButtonContainer.displayName="StyledToggleExpandButtonContainer",StyledToggleExpandButtonContainer.__docgenInfo={description:"",displayName:"StyledToggleExpandButtonContainer",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/Balloon.styled.tsx#StyledToggleExpandButtonContainer"]={docgenInfo:StyledToggleExpandButtonContainer.__docgenInfo,name:"StyledToggleExpandButtonContainer",path:"src/Balloon/Balloon.styled.tsx#StyledToggleExpandButtonContainer"})}catch(__react_docgen_typescript_loader_error){}try{StyledToggleExpandButtonFooterContainer.displayName="StyledToggleExpandButtonFooterContainer",StyledToggleExpandButtonFooterContainer.__docgenInfo={description:"",displayName:"StyledToggleExpandButtonFooterContainer",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/Balloon.styled.tsx#StyledToggleExpandButtonFooterContainer"]={docgenInfo:StyledToggleExpandButtonFooterContainer.__docgenInfo,name:"StyledToggleExpandButtonFooterContainer",path:"src/Balloon/Balloon.styled.tsx#StyledToggleExpandButtonFooterContainer"})}catch(__react_docgen_typescript_loader_error){}},"./src/Balloon/Balloon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>BalloonActionLink,y:()=>Balloon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/Icon/PlatformIcon.tsx"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/Icon/AutoHoverPlatformIcon.tsx"),_react_stately_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-stately/utils/dist/useControlledState.mjs"),_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/Balloon/Balloon.styled.tsx"),_intellij_platform_core_Link__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Link/Link.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const BalloonContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(null),BalloonActionLink=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((({onPress,...props},ref)=>{const context=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BalloonContext);if(null===context)throw new Error("BalloonActionLink should only be rendered inside Balloon notifications");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Link__WEBPACK_IMPORTED_MODULE_2__.r,{ref,...props,onPress:(...args)=>(context?.onClose?.(),onPress?.(...args))})})),Balloon=({icon:iconProp="Info",expanded:expandedProp,defaultExpanded=!1,onExpandedChange,title,headerActions,onClose,body,actions,...containerProps})=>{const bodyRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[expandable,setExpandable]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[expanded,setExpanded]=(0,_react_stately_utils__WEBPACK_IMPORTED_MODULE_3__.z)(expandedProp,defaultExpanded,onExpandedChange),maxLinesWhenNotExpanded=1+(title?0:1)+(actions?0:1);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const bodyElem=bodyRef.current;setExpandable(!!bodyElem&&(expanded?function getNumLines(bodyElem){return bodyElem.clientHeight/parseFloat(getComputedStyle(bodyElem).lineHeight)}(bodyElem)>maxLinesWhenNotExpanded:bodyElem.scrollHeight>bodyElem.clientHeight))}),[expanded]);const icon="string"==typeof iconProp?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_4__.vq,{icon:`general/notification${["Error","Warning","Info"].find(((iconType,index,arr)=>iconType===iconProp||index===arr.length-1))}.svg`}):iconProp,toggle=()=>setExpanded((expanded=>!expanded)),effectiveExpanded=expanded&&Boolean(body);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(BalloonContext.Provider,{value:{onClose},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_5__.NY,{"data-testid":"balloon",...containerProps,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_5__.H7,{children:icon}),title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_5__.GE,{children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_5__.Of,{children:[headerActions,onClose&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_6__.v,{icon:"ide/notification/close.svg",onClick:onClose,role:"button","data-testid":"close-btn",style:{marginLeft:"0.75rem"}})]}),body&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ToggleWrapper,{expanded:effectiveExpanded,enabled:expandable&&!effectiveExpanded,onToggle:toggle,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_5__.VT,{lineClamp:!effectiveExpanded&&maxLinesWhenNotExpanded,ref:bodyRef,children:body})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ToggleWrapper,{expanded:effectiveExpanded,enabled:expandable&&effectiveExpanded,onToggle:toggle,Component:_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_5__.cU,children:actions&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_5__.CD,{onClick:e=>e.stopPropagation(),children:actions})})]})})};Balloon.displayName="Balloon";const ToggleWrapper=({children,onToggle,expanded,enabled,Component=_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_5__.Fx})=>{const iconName=expanded?"collapse":"expand",toggleIcon=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_5__.EQ,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_6__.v,{hoverContainerSelector:`${Component}`,icon:`ide/notification/${iconName}.svg`,className:"icon"})});return enabled?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(Component,{onClick:onToggle,role:"button","data-testid":(expanded?"collapse":"expand")+"-btn",children:[children,toggleIcon]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children})};try{BalloonActionLink.displayName="BalloonActionLink",BalloonActionLink.__docgenInfo={description:"A tiny wrapper around {@link Link} component, to be used for actions in Balloon.\nIt closes the balloon when pressed.",displayName:"BalloonActionLink",props:{isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},preventFocusOnPress:{defaultValue:null,description:"",name:"preventFocusOnPress",required:!1,type:{name:"boolean"}},excludeFromTabOrder:{defaultValue:null,description:"",name:"excludeFromTabOrder",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/Balloon.tsx#BalloonActionLink"]={docgenInfo:BalloonActionLink.__docgenInfo,name:"BalloonActionLink",path:"src/Balloon/Balloon.tsx#BalloonActionLink"})}catch(__react_docgen_typescript_loader_error){}try{Balloon.displayName="Balloon",Balloon.__docgenInfo={description:'[Balloon notification](https://jetbrains.github.io/ui/controls/balloon/) UI.\n\nNotes and TODO:\n- Add support for "error" variant: https://github.com/JetBrains/intellij-community/blob/48c024fcd38bd8d1eccdada05489a8952a494270/platform/platform-impl/src/com/intellij/diagnostic/IdeMessagePanel.java#L215\n- Add support for timeout. Although if the auto close behaviour is only timeout-based, maybe there is not much value in adding a prop for it and calling onClose on timeout.\n- BalloonActions component to be used for rendering a bunch of links in the actions. It should encapsulate the\n  behaviour of moving actions into a menu when there is not enough room.',displayName:"Balloon",props:{expanded:{defaultValue:null,description:"",name:"expanded",required:!1,type:{name:"boolean"}},defaultExpanded:{defaultValue:{value:"false"},description:"",name:"defaultExpanded",required:!1,type:{name:"boolean"}},onExpandedChange:{defaultValue:null,description:"",name:"onExpandedChange",required:!1,type:{name:"((value: boolean) => void)"}},icon:{defaultValue:null,description:"Icon rendered in the top left",name:"icon",required:!1,type:{name:'"Info" | "Warning" | "Error" | ReactElement<IconProps, string | JSXElementConstructor<any>>'}},headerActions:{defaultValue:null,description:'Rendered beside close button. Can be used for rendering a "notification settings" icon button.',name:"headerActions",required:!1,type:{name:"ReactNode"}},onClose:{defaultValue:null,description:"Called when the close button is clicked. If not passed, close button will not be rendered.",name:"onClose",required:!1,type:{name:"(() => void)"}},actions:{defaultValue:null,description:"Actions rendered in the footer.",name:"actions",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"ReactNode"}},body:{defaultValue:null,description:"",name:"body",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/Balloon.tsx#Balloon"]={docgenInfo:Balloon.__docgenInfo,name:"Balloon",path:"src/Balloon/Balloon.tsx#Balloon"})}catch(__react_docgen_typescript_loader_error){}},"./src/Balloon/BalloonManager.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>BalloonManager,L:()=>useBalloonManager});var react=__webpack_require__("../../node_modules/react/index.js"),react_dom=__webpack_require__("../../node_modules/react-dom/index.js"),Balloon=__webpack_require__("./src/Balloon/Balloon.tsx"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Balloon_styled=__webpack_require__("./src/Balloon/Balloon.styled.tsx");const StyledBalloonsStack=styled_components_browser_esm.ZP.div.withConfig({displayName:"StyledBalloonsStack",componentId:"sc-mzizjy-0"})(["position:fixed;z-index:1;bottom:42px;right:26px;","{margin-bottom:12px;}"],Balloon_styled.NY);try{StyledBalloonsStack.displayName="StyledBalloonsStack",StyledBalloonsStack.__docgenInfo={description:"Container component for stacking a number of Balloons in an overlay placed on the bottom right of where it's rendered.",displayName:"StyledBalloonsStack",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/StyledBalloonsStack.tsx#StyledBalloonsStack"]={docgenInfo:StyledBalloonsStack.__docgenInfo,name:"StyledBalloonsStack",path:"src/Balloon/StyledBalloonsStack.tsx#StyledBalloonsStack"})}catch(__react_docgen_typescript_loader_error){}var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const NotImplementedFn=()=>{throw new Error("You must render a BalloonManager...")},BalloonsContext=react.createContext({show:NotImplementedFn,showSticky:NotImplementedFn}),useBalloonManager=()=>(0,react.useContext)(BalloonsContext),BalloonManager=({children,disablePortal,BalloonsContainer=StyledBalloonsStack})=>{const[balloons,setBalloons]=(0,react.useState)([]),timeoutIdsRef=(0,react.useRef)([]),lastIdRef=(0,react.useRef)(0),api=(0,react.useMemo)((()=>{const show=(props,timeout=1e4)=>{lastIdRef.current++;const onClose=()=>{setBalloons((balloons=>balloons.filter((aBalloon=>aBalloon!==balloon))))},balloon=(0,jsx_runtime.jsx)(Balloon.y,{...props,title:props.title,onClose},lastIdRef.current);return setBalloons((balloons=>{if(timeout>0){const timeoutId=window.setTimeout((()=>{onClose(),timeoutIdsRef.current=timeoutIdsRef.current.filter((aTimeoutId=>aTimeoutId!==timeoutId))}),timeout);timeoutIdsRef.current=[...timeoutIdsRef.current,timeoutId]}return balloons.concat(balloon)})),onClose};return{show,showSticky:props=>show(props,0)}}),[]);(0,react.useEffect)((()=>()=>{timeoutIdsRef.current.forEach((id=>{window.clearTimeout(id)}))}),[]);const notificationsStack=(0,jsx_runtime.jsx)(BalloonsContainer,{style:{position:disablePortal?"absolute":void 0},children:balloons});return(0,jsx_runtime.jsxs)(BalloonsContext.Provider,{value:api,children:[children,disablePortal?notificationsStack:react_dom.createPortal(notificationsStack,document.body)]})};BalloonManager.displayName="BalloonManager";try{BalloonManager.displayName="BalloonManager",BalloonManager.__docgenInfo={description:"Enables imperative API (via {@link useBalloonManager}) for showing Balloon notifications on the bottom right of the screen.\nIt renders notifications in a portal appended to `body`, unless `disablePortal` is `true`.",displayName:"BalloonManager",props:{disablePortal:{defaultValue:null,description:"",name:"disablePortal",required:!1,type:{name:"boolean"}},BalloonsContainer:{defaultValue:{value:"styled.div`\n  position: fixed;\n  z-index: 1;\n  bottom: 42px;\n  right: 26px;\n  ${StyledBalloonContainer} {\n    margin-bottom: 12px;\n  }\n`"},description:"",name:"BalloonsContainer",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Balloon/BalloonManager.tsx#BalloonManager"]={docgenInfo:BalloonManager.__docgenInfo,name:"BalloonManager",path:"src/Balloon/BalloonManager.tsx#BalloonManager"})}catch(__react_docgen_typescript_loader_error){}},"./src/Button/Button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>Button});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/button/dist/useButton.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/utils/dist/filterDOMProps.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_intellij_platform_core_Button_StyledButton__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Button/StyledButton.tsx"),_intellij_platform_core_Mnemonic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/Mnemonic/MnemonicTrigger.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const variants={default:_intellij_platform_core_Button_StyledButton__WEBPACK_IMPORTED_MODULE_2__.Pi,icon:_intellij_platform_core_Button_StyledButton__WEBPACK_IMPORTED_MODULE_2__.Qh},Button=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function Button({variant,style,className,mnemonic,...props},forwardedRef){const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__.B)(forwardedRef),{buttonProps}=(0,_react_aria_button__WEBPACK_IMPORTED_MODULE_4__.U)(props,ref),domProps=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__.z)(props),{autoFocus,form}=props,Component=variant&&variants[variant]||_intellij_platform_core_Button_StyledButton__WEBPACK_IMPORTED_MODULE_2__.Sn;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Component,{...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__.d)(domProps,buttonProps,{autoFocus,form}),style,className,ref,children:mnemonic?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Mnemonic__WEBPACK_IMPORTED_MODULE_7__.Y,{mnemonic,isDisabled:props.isDisabled,onTriggered:props.onPress,children:props.children}):props.children})}));try{Button.displayName="Button",Button.__docgenInfo={description:'https://jetbrains.github.io/ui/controls/button/\n\nTODO:\n- Support for "default" button behaviour. it\'s kind of similar to a <button type="submit" /> in html, but textarea\nbehaviour is different from what is explained here: https://jetbrains.github.io/ui/controls/button/#16\nCmd+Enter should always trigger onPress. Plus, maybe it should work independent of "form" being used? or maybe it\'s\nnot a big deal to expect an ancestor "form" element, when variant is "default"?\n- "Default" style differences in Windows.\n- Gradient colors (low hanging fruit, but negligible added value).\n\nKnown issues:\n- In the original impl, default button looks the same as normal button, when focus is not within the same area that\nthe button is. For example in the commit tool window, "Commit" button which is default, is not blue, unless the\n"Commit" tool window is focused. This particular case can easily be achieved by conditionally setting variant to,\n"default" based on tool window focus state, which is accessible via useDefaultToolWindowContext(), if\nDefaultToolWindow is used. But we need to see if the same requirement exists in various places.\nNOTE: this item is related to the first item in the to-do list above. There can be a container kind of component,\nwhich enables "default" behaviour and look. Maybe it can be FocusScope or at least related to FocusScope.\n- In the original impl, there is no visual clue for pressed state, which is poor accessibility. For now, the same\nbehaviour is followed here too. But we may reconsider deviating from the original impl for an improvement here.',displayName:"Button",props:{variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"icon"'}]}},preventFocusOnPress:{defaultValue:null,description:"",name:"preventFocusOnPress",required:!1,type:{name:"boolean"}},form:{defaultValue:null,description:"",name:"form",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},mnemonic:{defaultValue:null,description:"A character to be used as {@link https://jetbrains.design/intellij/principles/mnemonics/ mnemonic} for the button\nIt will be shown as underlined in button text, when mnemonic is activated (by pressing Alt)\nNote: if you use mnemonic, and the direct child of the button is not a string, you should use `MnemonicText`\nto render the button text, to have the underlining behavior.",name:"mnemonic",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onPress:{defaultValue:null,description:"Called when the button is pressed, or triggered via mnemonic. If mnemonic is used, there won't be any event\npassed to onPress callback.",name:"onPress",required:!1,type:{name:"((e?: PressEvent) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Button/Button.tsx#Button"]={docgenInfo:Button.__docgenInfo,name:"Button",path:"src/Button/Button.tsx#Button"})}catch(__react_docgen_typescript_loader_error){}},"./src/Button/StyledButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Pi:()=>StyledDefaultButton,Qh:()=>StyledIconButton,Sn:()=>StyledButton});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/styled.ts");const StyledButton=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo.button`
  box-sizing: border-box;
  min-width: 4.5rem; // https://jetbrains.github.io/ui/controls/button/#28
  padding: 0 0.875rem; // https://jetbrains.github.io/ui/controls/button/#28
  height: 1.5rem;
  font-family: inherit;
  background-color: ${({theme,disabled})=>disabled?"transparent":theme.color("Button.startBackground")};
  color: ${({theme,disabled})=>disabled?theme.color("Button.disabledText"):theme.color("Button.foreground")};
  border: 1px solid
    ${({theme,disabled})=>disabled?theme.color("Button.disabledBorderColor"):theme.color("Button.startBorderColor")};
  border-radius: ${({theme})=>(theme.value("Button.arc")??6)/2}px;
  box-shadow: ${({theme})=>theme.value("Button.paintShadow")?`0 0 0 ${theme.value("Button.shadowWidth")??2}px ${theme.color("Button.shadowColor")??(theme.dark?"#36363680":"#a6a6a633")}`:""};
  white-space: nowrap; // https://jetbrains.github.io/ui/controls/button/#29

  flex-shrink: 0; // button should not shrink when rendered in a flex container

  &:focus,
  &.focus /* for testing purposes*/ {
    border-color: ${({theme})=>theme.color("Button.focusedBorderColor","#87afda")};
    outline: none;
    box-shadow: ${({theme})=>`0 0 0 2px ${theme.color("Component.focusColor")??theme.color("Focus.borderColor","#8ab2eb")}`};
  }
`,StyledDefaultButton=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo)(StyledButton)`
  background-color: ${({theme,disabled})=>!disabled&&theme.color("Button.default.startBackground","#384f6b")};
  color: ${({theme,disabled})=>!disabled&&theme.color("Button.default.foreground")};
  border-color: ${({theme,disabled})=>!disabled&&theme.color("Button.default.startBorderColor","#BFBFBF")};
  &:focus,
  &.focus /* for testing purposes*/ {
    border-color: ${({theme})=>theme.color("Button.default.focusedBorderColor","#87afda")};
  }
`,StyledIconButton=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo)(StyledButton)`
  border-radius: 1000px;
  padding: 0;
  line-height: 0;
  min-width: 0;
  height: 1.5rem;
  width: 1.5rem;
`;try{StyledButton.displayName="StyledButton",StyledButton.__docgenInfo={description:"",displayName:"StyledButton",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Button/StyledButton.tsx#StyledButton"]={docgenInfo:StyledButton.__docgenInfo,name:"StyledButton",path:"src/Button/StyledButton.tsx#StyledButton"})}catch(__react_docgen_typescript_loader_error){}try{StyledDefaultButton.displayName="StyledDefaultButton",StyledDefaultButton.__docgenInfo={description:"",displayName:"StyledDefaultButton",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Button/StyledButton.tsx#StyledDefaultButton"]={docgenInfo:StyledDefaultButton.__docgenInfo,name:"StyledDefaultButton",path:"src/Button/StyledButton.tsx#StyledDefaultButton"})}catch(__react_docgen_typescript_loader_error){}try{StyledIconButton.displayName="StyledIconButton",StyledIconButton.__docgenInfo={description:"",displayName:"StyledIconButton",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Button/StyledButton.tsx#StyledIconButton"]={docgenInfo:StyledIconButton.__docgenInfo,name:"StyledIconButton",path:"src/Button/StyledButton.tsx#StyledIconButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/ButtonGroup/ButtonGroup.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>ButtonGroup});__webpack_require__("../../node_modules/react/index.js");var _react_aria_focus__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/focus/dist/FocusScope.mjs"),_react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/interactions/dist/useKeyboard.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_intellij_platform_core_utils_keyboard_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/utils/keyboard-utils.ts"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledButtonGroup=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
`;function ButtonGroup(props){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_react_aria_focus__WEBPACK_IMPORTED_MODULE_3__.MT,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(HorizontalArrowKeyNavigation,{children:arrowKeyNavigationProps=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledButtonGroup,{...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__.d)(props,arrowKeyNavigationProps)})})})}function HorizontalArrowKeyNavigation({children}){const focusManager=(0,_react_aria_focus__WEBPACK_IMPORTED_MODULE_3__.bO)(),{keyboardProps}=(0,_react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__.v)({onKeyDown:e=>{if(!(0,_intellij_platform_core_utils_keyboard_utils__WEBPACK_IMPORTED_MODULE_6__.a)(e)){if("ArrowLeft"===e.key)return focusManager?.focusPrevious({wrap:!0});if("ArrowRight"===e.key)return focusManager?.focusNext({wrap:!0})}e.continuePropagation()}});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:children(keyboardProps)})}ButtonGroup.displayName="ButtonGroup";try{ButtonGroup.displayName="ButtonGroup",ButtonGroup.__docgenInfo={description:"`ButtonGroup` should be used as a wrapper around related {@link Button Buttons}, in places such as the\nfooter of a dialog. It does two things:\n- allows for moving the focus between the buttons with left/right arrow keys.\n- applies the right spacing between the buttons",displayName:"ButtonGroup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ButtonGroup/ButtonGroup.tsx#ButtonGroup"]={docgenInfo:ButtonGroup.__docgenInfo,name:"ButtonGroup",path:"src/ButtonGroup/ButtonGroup.tsx#ButtonGroup"})}catch(__react_docgen_typescript_loader_error){}},"./src/Checkbox/Checkbox.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>Checkbox});var react=__webpack_require__("../../node_modules/react/index.js"),useToggleState=__webpack_require__("../../node_modules/@react-stately/toggle/dist/useToggleState.mjs"),dist_module=__webpack_require__("../../node_modules/@react-aria/checkbox/dist/module.js"),useFocusRing=__webpack_require__("../../node_modules/@react-aria/focus/dist/useFocusRing.mjs"),mergeProps=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),styled=__webpack_require__("./src/styled.ts"),LafIcon=__webpack_require__("./src/Icon/LafIcon.tsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const CheckboxIcon=({isDisabled,isFocused,isIndeterminate,isSelected,...otherProps})=>(0,jsx_runtime.jsx)(LafIcon.J,{...otherProps,size:20,icon:{name:isIndeterminate?"checkBoxIndeterminate":"checkBox",modifiers:{Disabled:isDisabled,Selected:isSelected||isIndeterminate,Focused:isFocused}}});CheckboxIcon.displayName="CheckboxIcon";try{CheckboxIcon.displayName="CheckboxIcon",CheckboxIcon.__docgenInfo={description:"Renders checkbox UI in different states (focused, selected, indeterminate, etc.), without having anything to do\nwith the interactions",displayName:"CheckboxIcon",props:{children:{defaultValue:null,description:"Additional node going into the icon wrapper. Such as indicators.",name:"children",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},themePath:{defaultValue:null,description:"A theme key that can optionally override the icon.",name:"themePath",required:!1,type:{name:"string"}},isIndeterminate:{defaultValue:null,description:"",name:"isIndeterminate",required:!0,type:{name:"boolean | undefined"}},isFocused:{defaultValue:null,description:"",name:"isFocused",required:!0,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!0,type:{name:"boolean | undefined"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Checkbox/CheckboxIcon.tsx#CheckboxIcon"]={docgenInfo:CheckboxIcon.__docgenInfo,name:"CheckboxIcon",path:"src/Checkbox/CheckboxIcon.tsx#CheckboxIcon"})}catch(__react_docgen_typescript_loader_error){}var MnemonicTrigger=__webpack_require__("./src/Mnemonic/MnemonicTrigger.tsx");const StyledWrapperLabel=styled.zo.label`
  position: relative;
  display: inline-flex;
  align-items: center;
`,StyledCheckboxLabelText=styled.zo.span`
  margin-left: 0.25rem;
  color: ${({theme,isDisabled})=>isDisabled?theme.color("CheckBox.disabledText","#808080"):theme.color("*.foreground")};
`,StyledInput=styled.zo.input`
  opacity: 0.0001;
  position: absolute;
  z-index: 1;
  inset: 0;
  cursor: default;
  &:disabled {
    cursor: default;
  }
`,Checkbox=({preventFocus,className,disableFocusAlwaysVisible,mnemonic,...props})=>{const state=(0,useToggleState.l)(props),ref=react.useRef(null),{inputProps}=(0,dist_module.O)(props,state,ref),{isFocusVisible,isFocused,focusProps}=(0,useFocusRing.F)({autoFocus:props.autoFocus}),focusDisabledProps=preventFocus?{onFocusCapture:event=>{event.stopPropagation(),event.preventDefault(),event.relatedTarget instanceof HTMLElement?event.relatedTarget.focus():event.target.blur()},tabIndex:-1}:{};return(0,jsx_runtime.jsxs)(StyledWrapperLabel,{className,children:[(0,jsx_runtime.jsx)(StyledInput,{...(0,mergeProps.d)(inputProps,focusProps,focusDisabledProps),ref}),(0,jsx_runtime.jsx)(CheckboxIcon,{isIndeterminate:props.isIndeterminate,isFocused:disableFocusAlwaysVisible?isFocusVisible:isFocused,isSelected:props.isIndeterminate||state.isSelected,isDisabled:props.isDisabled,"aria-hidden":"true",style:{pointerEvents:"none"}}),props.children&&(0,jsx_runtime.jsx)(StyledCheckboxLabelText,{isDisabled:props.isDisabled,children:mnemonic?(0,jsx_runtime.jsx)(MnemonicTrigger.Y,{mnemonic,isDisabled:props.isDisabled,onTriggered:state.toggle,children:props.children}):props.children})]})};Checkbox.displayName="Checkbox";try{Checkbox.displayName="Checkbox",Checkbox.__docgenInfo={description:"Checkbox component to be used with or without a label.\n\nWhile the checkbox without the label + preventFocus makes it usable in tree/list, it might be more optimized to\nuse a more lightweight component like ListItemCheckbox, which uses CheckboxIcon with a simple press handle. Without\nany input, state, etc.",displayName:"Checkbox",props:{preventFocus:{defaultValue:null,description:'If set to true, the checkbox won\'t be focusable.\nCommon use cases:\n- When checkbox is rendered in a focusable container, like a list item where the focus should not be taken away\n  from that container.\n- "Amend" checkbox in "Commit" tool window. The focus is kept in the commit message or changes tree, perhaps, for\n  a questionably better UX.\nNote: Passing {@link excludeFromTabOrder} will still let the checkbox be focusable, while `preventFocus`, doesn\'t\nlet the component get focused at all.\nTODO(potential): it might be nicer to have a `preventFocusOnPress` prop consistent with IconButton, instead.\n In that case preventing focus completely would be achieved with `preventFocusOnPres` and `excludeFromTabOrder`.',name:"preventFocus",required:!1,type:{name:"boolean"}},disableFocusAlwaysVisible:{defaultValue:null,description:"By default, focus ring is always shown when the checkbox is focused, independent of the interaction method.\nif set to false, the focus will be only visible if the interaction is done via keyboard or screen readers.\nSimilar to how [:focus-visible](https://developer.mozilla.org/en-US/docs/Web/CSS/:focus-visible) works.",name:"disableFocusAlwaysVisible",required:!1,type:{name:"boolean"}},isIndeterminate:{defaultValue:null,description:"Indeterminism is presentational only.\nThe indeterminate visual representation remains regardless of user interaction.",name:"isIndeterminate",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The label for the element.",name:"children",required:!1,type:{name:"ReactNode"}},defaultSelected:{defaultValue:null,description:"Whether the element should be selected (uncontrolled).",name:"defaultSelected",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"Whether the element should be selected (controlled).",name:"isSelected",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"Handler that is called when the element's selection state changes.",name:"onChange",required:!1,type:{name:"((isSelected: boolean) => void)"}},value:{defaultValue:null,description:"The value of the input element, used when submitting an HTML form. See [MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#htmlattrdefvalue).",name:"value",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"The name of the input element, used when submitting an HTML form. See [MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#htmlattrdefname).",name:"name",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},mnemonic:{defaultValue:null,description:"A character to be used as {@link https://jetbrains.design/intellij/principles/mnemonics/ mnemonic} for the button\nIt will be shown as underlined in button text, when mnemonic is activated (by pressing Alt)\nNote: if you use mnemonic, and the direct child of the button is not a string, you should use `Mnemonic.Text`\nto render the button text, to have the underlining behavior.",name:"mnemonic",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Checkbox/Checkbox.tsx#Checkbox"]={docgenInfo:Checkbox.__docgenInfo,name:"Checkbox",path:"src/Checkbox/Checkbox.tsx#Checkbox"})}catch(__react_docgen_typescript_loader_error){}},"./src/Collections/ItemLayout.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>ItemLayout});__webpack_require__("../../node_modules/react/index.js");var _styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Menu_ContextMenuContainer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Menu/ContextMenuContainer.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledItemLayout=_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  display: flex;
  align-items: center;
  padding-right: 0.25rem;
  gap: ${"0.1875rem"};
`,StyledHint=_styled__WEBPACK_IMPORTED_MODULE_2__.zo.span`
  display: inline-flex;
  color: ${({theme})=>theme.currentForegroundAware(theme.commonColors.inactiveTextColor)};
  padding-left: 0.1rem;
  font-size: ${({small})=>small&&"0.9em"};
`,StyledGroup=_styled__WEBPACK_IMPORTED_MODULE_2__.zo.span.attrs({role:"presentation"})`
  display: inline-flex;
  display: flex;
  align-items: center;
  gap: ${"0.1875rem"};
`,ItemLayout=props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledItemLayout,{[_intellij_platform_core_Menu_ContextMenuContainer__WEBPACK_IMPORTED_MODULE_3__.U]:!0,...props});ItemLayout.displayName="ItemLayout",ItemLayout.Hint=StyledHint,ItemLayout.Group=StyledGroup;try{ItemLayout.displayName="ItemLayout",ItemLayout.__docgenInfo={description:"Generic layout component capturing common use cases of tree or list items.\nIt handles the spacing between parts, and provides styled components for parts that need specific styling.\nFor more flexibility over the order of various pieces of content in list/tree items, there is no specific props\nfor parts. Different parts should just be rendered in children.",displayName:"ItemLayout",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Collections/ItemLayout.tsx#ItemLayout"]={docgenInfo:ItemLayout.__docgenInfo,name:"ItemLayout",path:"src/Collections/ItemLayout.tsx#ItemLayout"})}catch(__react_docgen_typescript_loader_error){}try{Hint.displayName="ItemLayout.Hint",Hint.__docgenInfo={description:"A more subtle text usually rendered next to the main text in the item.",displayName:"ItemLayout.Hint",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}},small:{defaultValue:null,description:"",name:"small",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Collections/ItemLayout.tsx#ItemLayout.Hint"]={docgenInfo:ItemLayout.Hint.__docgenInfo,name:"ItemLayout.Hint",path:"src/Collections/ItemLayout.tsx#ItemLayout.Hint"})}catch(__react_docgen_typescript_loader_error){}try{Group.displayName="ItemLayout.Group",Group.__docgenInfo={description:"Useful when a number of items need to be grouped by a wrapper, e.g. to have a tooltip.",displayName:"ItemLayout.Group",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Collections/ItemLayout.tsx#ItemLayout.Group"]={docgenInfo:ItemLayout.Group.__docgenInfo,name:"ItemLayout.Group",path:"src/Collections/ItemLayout.tsx#ItemLayout.Group"})}catch(__react_docgen_typescript_loader_error){}},"./src/Collections/useCollectionSearchInput.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>useCollectionSearchInput});var _intellij_platform_core_utils_useEventCallback__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/useEventCallback.ts");const useCollectionSearchInput=({collectionRef,selectionManager,onAction})=>{const relayEventsToCollection=(0,_intellij_platform_core_utils_useEventCallback__WEBPACK_IMPORTED_MODULE_0__.$)((event=>{"keydown"!==event.type||"ArrowUp"!==event.key&&"ArrowDown"!==event.key?"keydown"===event.type&&"Enter"===event.key&&null!=selectionManager?.focusedKey&&event.currentTarget.addEventListener("keyup",(event=>{"Enter"===event.key&&null!=selectionManager?.focusedKey&&onAction?.(selectionManager?.focusedKey)}),{once:!0,capture:!0}):(event.preventDefault(),event.stopPropagation(),collectionRef.current?.dispatchEvent(new KeyboardEvent(event.type,event.nativeEvent)))}));return{collectionSearchInputProps:{onKeyDown:relayEventsToCollection,onKeyPress:relayEventsToCollection}}}},"./src/Dropdown/ComboBox.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>ComboBox});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_react_aria_combobox__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@react-aria/combobox/dist/useComboBox.mjs"),_react_stately_combobox__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-stately/combobox/dist/useComboBoxState.mjs"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Button__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/Button/BareButton.tsx"),_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/Overlay/Popover.tsx"),_StatelessListBox__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/Dropdown/StatelessListBox.tsx"),_StyledContainer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Dropdown/StyledContainer.tsx"),_Field_Label__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/Field/Label.tsx"),_StyledDropdownArrowIcon__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/Dropdown/StyledDropdownArrowIcon.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/Tooltip/PositionedTooltipTrigger.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/Tooltip/ValidationTooltip.tsx"),_intellij_platform_core_Field_ContextHelp__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/Field/ContextHelp.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledComboBoxContainer=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(_StyledContainer__WEBPACK_IMPORTED_MODULE_3__.P)`
  padding: 0;
  color: ${({theme,disabled})=>disabled?theme.color("TextField.disabledForeground"):theme.color("TextField.foreground")};
`,StyledComboBoxInput=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.input`
  flex: 1;
  background: none;
  border: none;
  outline: none;
  color: inherit;
  padding: ${({theme})=>theme.inset("ComboBox.padding")??"1px 6px 1px 6px"};
  height: 100%;
`,StyledDropdownButton=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.button`
  // Resetting default styles
  appearance: none;
  border: none;
  background: ${({theme})=>theme.color("ComboBox.ArrowButton.background")};
  outline: none;
  font: inherit;
  padding: 0;

  // Custom styles
  border-left: 1px solid ${({theme})=>theme.commonColors.border()};
  height: 100%;
  aspect-ratio: 1;
  /**
   * In the reference impl, the clickable area exceeds the left border by a
   * few pixels. The following trick implements that
   */
  position: relative;
  ::before {
    content: "";
    position: absolute;
    left: -4px;
    top: 0;
    bottom: 0;
    width: 4px;
  }
`,ComboBox=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((({labelPlacement,style,className,value,defaultValue,onValueChange,validationState,validationMessage,contextHelp,contextHelpPlacement,inputProps,inputRef:inputRefProp,...props},forwardedRef)=>{const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__.B)(forwardedRef),buttonRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),inputRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__.B)(inputRefProp),dropdownContainerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),popoverRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),listBoxRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),isInvalid=Boolean(validationState)&&"valid"!==validationState,state=(0,_react_stately_combobox__WEBPACK_IMPORTED_MODULE_5__.P)({menuTrigger:"manual",allowsCustomValue:!0,inputValue:value,defaultInputValue:defaultValue,onInputChange:onValueChange,isInvalid,...props}),{descriptionProps,errorMessageProps,labelProps,inputProps:comboboxInputProps,listBoxProps,buttonProps}=(0,_react_aria_combobox__WEBPACK_IMPORTED_MODULE_6__.E)({...props,allowsCustomValue:!0,buttonRef,inputRef,popoverRef,listBoxRef},state),minWidth=dropdownContainerRef.current?dropdownContainerRef.current?.offsetWidth+2:void 0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_Field_Label__WEBPACK_IMPORTED_MODULE_7__.w,{ref,isDisabled:props.isDisabled,label:props.label,labelPlacement,labelProps,className,style,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Field_ContextHelp__WEBPACK_IMPORTED_MODULE_8__.y,{contextHelp,contextHelpPlacement,descriptionProps,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledComboBoxContainer,{ref:dropdownContainerRef,validationState,disabled:props.isDisabled,className:state.isFocused?"is-focus":"",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_9__.S,{placement:"top",showOnFocus:!0,isDisabled:!validationMessage,triggerRef:inputRef,tooltip:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_10__.p,{type:"valid"!==validationState?validationState:void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{...errorMessageProps,children:validationMessage})}),delay:0,children:tooltipTriggerProps=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledComboBoxInput,{...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_11__.d)(comboboxInputProps,inputProps,tooltipTriggerProps)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Button__WEBPACK_IMPORTED_MODULE_12__.V,{...buttonProps,ref:buttonRef,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledDropdownButton,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_StyledDropdownArrowIcon__WEBPACK_IMPORTED_MODULE_13__.q,{disabled:props.isDisabled,size:20,icon:"general/arrowDown.svg"})})})]})})}),state.isOpen&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_14__.J,{ref:popoverRef,state,triggerRef:dropdownContainerRef,placement:"bottom start",containerPadding:0,offset:2,crossOffset:-1,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_StatelessListBox__WEBPACK_IMPORTED_MODULE_15__.U,{...listBoxProps,ref:listBoxRef,state,minWidth})})]})}));try{ComboBox.displayName="ComboBox",ComboBox.__docgenInfo={description:"[Combobox](https://plugins.jetbrains.com/docs/intellij/combo-box.html) implementation.\nKnown differences with the reference impl:\n- selected key doesn't focus when opened the dropdown manually.\n  Opening the dropdown by pressing ArrowDown does focus the previously selected item.",displayName:"ComboBox",props:{labelPlacement:{defaultValue:null,description:"",name:"labelPlacement",required:!1,type:{name:"enum",value:[{value:'"above"'},{value:'"before"'}]}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"valid"'}]}},validationMessage:{defaultValue:null,description:"Validation message shown as a {@link ValidationTooltip} above the component.\n{@link ValidationTooltipProps#type } is defined based on `validationState`.",name:"validationMessage",required:!1,type:{name:"ReactNode"}},inputProps:{defaultValue:null,description:"props to apply on input, excluding value that's controlled by the component",name:"inputProps",required:!1,type:{name:'Omit<HTMLProps<HTMLInputElement>, "as" | "defaultValue" | "value">'}},inputRef:{defaultValue:null,description:"",name:"inputRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},"aria-label":{defaultValue:null,description:"Defines a string value that labels the current element.",name:"aria-label",required:!1,type:{name:"string"}},"aria-labelledby":{defaultValue:null,description:"Identifies the element (or elements) that labels the current element.",name:"aria-labelledby",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"Identifies the element (or elements) that describes the object.",name:"aria-describedby",required:!1,type:{name:"string"}},"aria-details":{defaultValue:null,description:"Identifies the element (or elements) that provide a detailed, extended description for the object.",name:"aria-details",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string"}},onValueChange:{defaultValue:null,description:"",name:"onValueChange",required:!1,type:{name:"((value: string) => void)"}},contextHelp:{defaultValue:null,description:"Context help, shown below the input.\nA typical use case is\n[to provide example values](https://jetbrains.github.io/ui/principles/context_help/#07).",name:"contextHelp",required:!1,type:{name:"ReactNode"}},contextHelpPlacement:{defaultValue:null,description:"Placement of the contextHelp text with respect to the control.\nSee more: https://plugins.jetbrains.com/docs/intellij/inline-help-text.html#placement",name:"contextHelpPlacement",required:!1,type:{name:"enum",value:[{value:'"below"'},{value:'"after"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Dropdown/ComboBox.tsx#ComboBox"]={docgenInfo:ComboBox.__docgenInfo,name:"ComboBox",path:"src/Dropdown/ComboBox.tsx#ComboBox"})}catch(__react_docgen_typescript_loader_error){}},"./src/Dropdown/StatelessListBox.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>StatelessListBox});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_listbox__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/listbox/dist/useListBox.mjs"),_react_aria_listbox__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/listbox/dist/useOption.mjs"),_react_aria_listbox__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/@react-aria/listbox/dist/useListBoxSection.mjs"),_intellij_platform_core_List_StyledListItem__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/List/StyledListItem.tsx"),_intellij_platform_core_List_StyledList__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/List/StyledList.tsx"),_intellij_platform_core_StyledSeparator__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/StyledSeparator.tsx"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/styled.ts"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StatelessListBox=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function StatelessListBox({state,minWidth,...props},forwardedRef){const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.B)(forwardedRef),{listBoxProps,labelProps}=(0,_react_aria_listbox__WEBPACK_IMPORTED_MODULE_3__.c)(props,state,ref);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{...labelProps,children:props.label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_List_StyledList__WEBPACK_IMPORTED_MODULE_4__.C,{...listBoxProps,ref,style:{minWidth},children:[...state.collection].map((item=>"section"===item.type?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ListBoxSection,{section:item,state},item.key):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Option,{item,state},item.key)))})]})}));function Option({item,state}){const ref=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),{optionProps}=(0,_react_aria_listbox__WEBPACK_IMPORTED_MODULE_5__.F)({key:item.key},state,ref);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_List_StyledListItem__WEBPACK_IMPORTED_MODULE_6__.o,{...optionProps,ref,disabled:state.disabledKeys.has(item.key),selected:state.selectionManager.focusedKey===item.key,containerFocused:!0,children:item.rendered})}Option.displayName="Option";const StyledSectionHeading=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_7__.zo.div`
  font-size: 0.6875rem;
  padding: 0 0.5rem;
  color: ${({theme})=>theme.commonColors.inactiveTextColor}; // not verified
`,StyledSection=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_7__.zo.div`
  padding: 0;
  margin: 0;
  list-style: none;
`;function ListBoxSection({section,state}){let{itemProps,headingProps,groupProps}=(0,_react_aria_listbox__WEBPACK_IMPORTED_MODULE_8__.T)({heading:section.rendered,"aria-label":section["aria-label"]});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[section.key!==state.collection.getFirstKey()&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_StyledSeparator__WEBPACK_IMPORTED_MODULE_9__.lX,{role:"presentation"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("li",{...itemProps,children:[section.rendered&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledSectionHeading,{...headingProps,children:section.rendered}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledSection,{...groupProps,children:[...state.collection.getChildren?.(section.key)??section.childNodes].map((node=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Option,{item:node,state},node.key)))})]})]})}try{StatelessListBox.displayName="StatelessListBox",StatelessListBox.__docgenInfo={description:"",displayName:"StatelessListBox",props:{state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"ListState<object>"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Dropdown/StatelessListBox.tsx#StatelessListBox"]={docgenInfo:StatelessListBox.__docgenInfo,name:"StatelessListBox",path:"src/Dropdown/StatelessListBox.tsx#StatelessListBox"})}catch(__react_docgen_typescript_loader_error){}},"./src/Dropdown/StyledContainer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>StyledContainer});const StyledContainer=__webpack_require__("./src/styled.ts").zo.div`
  box-sizing: border-box;
  display: flex;
  width: 100%;
  align-items: center;
  height: 1.5rem;
  background: ${({theme,disabled})=>disabled?theme.color("ComboBox.disabledBackground"):theme.color("ComboBox.background")};
  color: ${({theme,disabled})=>disabled?theme.color("ComboBox.disabledForeground"):theme.color("ComboBox.foreground")};
  border: 1px solid
    ${({theme,disabled,validationState})=>theme.commonColors.border({disabled,validationState})};
  // The focus style is applied unconditionally in the reference impl, so no use of focus-visible or js-based focus visible detection

  box-shadow: 0 0 0 0.125rem
    ${({theme,validationState})=>theme.commonColors.focusRing({validationState,focused:!1})};
  &:focus,
  &.is-focus {
    border-color: ${({theme,validationState})=>theme.commonColors.border({focused:!0,validationState})};
    outline: none;
    box-shadow: 0 0 0 0.125rem
      ${({theme,validationState})=>theme.commonColors.focusRing({validationState,focused:!0})};
  }

  border-radius: ${({theme})=>theme.borderRadius.default}px;
`;try{StyledContainer.displayName="StyledContainer",StyledContainer.__docgenInfo={description:"",displayName:"StyledContainer",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"valid"'}]}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Dropdown/StyledContainer.tsx#StyledContainer"]={docgenInfo:StyledContainer.__docgenInfo,name:"StyledContainer",path:"src/Dropdown/StyledContainer.tsx#StyledContainer"})}catch(__react_docgen_typescript_loader_error){}},"./src/Dropdown/StyledDropdownArrowIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>StyledDropdownArrowIcon});var _intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Icon/PlatformIcon.tsx");const StyledDropdownArrowIcon=(0,__webpack_require__("./src/styled.ts").zo)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_1__.vq).attrs({"aria-hidden":"true"})`
  // NOTE: "ArrowButton.nonEditableBackground" theme key is used in the reference impl, but it doesn't seem necessary to allow
  // for a separate arrow background in Dropdown (aka non-editable combobox), since the arrow is not really a
  // separate button, but a visual indicator for the whole trigger. Also there is no mention of it in designs
  // There is also separate theme properties for color and disabled color, but inheriting it (via currentColor)
  // makes more sense

  * {
    fill: ${({theme,disabled})=>disabled?theme.color("ComboBox.ArrowButton.disabledIconColor"):theme.color("ComboBox.ArrowButton.iconColor")};
  }
`;try{StyledDropdownArrowIcon.displayName="StyledDropdownArrowIcon",StyledDropdownArrowIcon.__docgenInfo={description:"",displayName:"StyledDropdownArrowIcon",props:{children:{defaultValue:null,description:"Additional node going into the icon wrapper. Such as indicators.",name:"children",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}},icon:{defaultValue:null,description:'Icon path in intellij platform repo.\nIf starts with "/", the path will be from the repo root. Otherwise, it\'s relative to "platform/icons/src".\n".svg" extension is optional.',name:"icon",required:!0,type:{name:"string"}},darkIcon:{defaultValue:null,description:"Similar to icon, but for dark themes.",name:"darkIcon",required:!1,type:{name:"string"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Dropdown/StyledDropdownArrowIcon.tsx#StyledDropdownArrowIcon"]={docgenInfo:StyledDropdownArrowIcon.__docgenInfo,name:"StyledDropdownArrowIcon",path:"src/Dropdown/StyledDropdownArrowIcon.tsx#StyledDropdownArrowIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/Field/ContextHelp.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>WithInlineContextHelp});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=(__webpack_require__("../../node_modules/react/index.js"),__webpack_require__("../../node_modules/react/jsx-runtime.js"));const StyledContextHelp=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  color: ${({theme})=>theme.commonColors.contextHelpForeground};
`,StyledContextHelpWrapper=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  font-size: 0.75rem; // 12px, in new UI. It's 11px in the old UI.
  display: flex;
  flex-direction: column;
  align-items: start;
  gap: 0.25rem; /* Not checked with the reference impl */
  ${({placement})=>"after"===placement&&_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.iv`
      flex-direction: row;
      align-items: center;
      gap: 1rem; /* Not checked with the reference impl */
    `}
  flex-grow: 1; /* Needed for when the control is inside a flex layout */
`,WithInlineContextHelp=({children,descriptionProps,contextHelpPlacement,contextHelp})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledContextHelpWrapper,{placement:contextHelpPlacement,children:[children,contextHelp&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledContextHelp,{...descriptionProps,children:contextHelp})]});WithInlineContextHelp.displayName="WithInlineContextHelp";try{WithInlineContextHelp.displayName="WithInlineContextHelp",WithInlineContextHelp.__docgenInfo={description:"Implements [inline context help](https://plugins.jetbrains.com/docs/intellij/inline-help-text.html),\nfor its children.",displayName:"WithInlineContextHelp",props:{descriptionProps:{defaultValue:null,description:"Props to apply on the context help wrapper, to make the connected control\ndescribed by the context help.",name:"descriptionProps",required:!0,type:{name:"DOMAttributes<FocusableElement>"}},contextHelp:{defaultValue:null,description:"Context help, shown below the input.\nA typical use case is\n[to provide example values](https://jetbrains.github.io/ui/principles/context_help/#07).",name:"contextHelp",required:!1,type:{name:"ReactNode"}},contextHelpPlacement:{defaultValue:null,description:"Placement of the contextHelp text with respect to the control.\nSee more: https://plugins.jetbrains.com/docs/intellij/inline-help-text.html#placement",name:"contextHelpPlacement",required:!1,type:{name:"enum",value:[{value:'"below"'},{value:'"after"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Field/ContextHelp.tsx#WithInlineContextHelp"]={docgenInfo:WithInlineContextHelp.__docgenInfo,name:"WithInlineContextHelp",path:"src/Field/ContextHelp.tsx#WithInlineContextHelp"})}catch(__react_docgen_typescript_loader_error){}},"./src/Field/Label.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>LabeledControlsAlignmentProvider,w:()=>WithLabel});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledLabelContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  display: inline-flex;
  flex-direction: ${({labelPlacement})=>"above"===labelPlacement?"column":"row"};
  align-items: start;
  gap: 0.375rem;
`,StyledLabel=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.label`
  color: ${({theme,isDisabled:disabled})=>theme.commonColors.label({disabled})};
  margin-top: 0.25rem;
  line-height: 1.2;
`,WithLabel=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function WithLabel({label,labelPlacement,labelProps,children,isDisabled,...props},forwardedRef){const labelRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);return function useAlignedLabels({ref,enabled}){const{applyLabelWidth,commonWidth}=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(LabelAlignmentContext);(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{const apply=()=>{const width=ref.current?.offsetWidth;return!!width&&(applyLabelWidth(width),!0)};apply()||setTimeout(apply,0)})),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{ref.current&&(ref.current.style.width=commonWidth&&enabled?`${commonWidth}px`:"")}),[commonWidth,enabled])}({ref:labelRef,enabled:"above"!==labelPlacement}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledLabelContainer,{...props,labelPlacement,ref:forwardedRef,children:[label&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledLabel,{...labelProps,isDisabled,ref:labelRef,children:label}),children]})}));const LabelAlignmentContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({commonWidth:null,applyLabelWidth:()=>{}});function LabeledControlsAlignmentProvider({children}){const[commonWidth,setCommonWidth]=react__WEBPACK_IMPORTED_MODULE_0__.useState(null);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(LabelAlignmentContext.Provider,{value:{commonWidth,applyLabelWidth:width=>{setCommonWidth((currentWidth=>width>(currentWidth??0)?width+1:currentWidth))}},children})}LabeledControlsAlignmentProvider.displayName="LabeledControlsAlignmentProvider";try{LabeledControlsAlignmentProvider.displayName="LabeledControlsAlignmentProvider",LabeledControlsAlignmentProvider.__docgenInfo={description:"Provides a context for\n[labeled input controls](https://jetbrains.github.io/ui/principles/layout/#labeled-input-controls)\nwith side-positioned labels to have their input boxes aligned.\nIt doesn't render anything in DOM and only provides a context used\nby labeled controls to set a common width on labels so that the input boxes\nalign.\nLabeled input controls are:\n- {@link InputField }\n- {@link ComboBox }\n- {@link Dropdown }",displayName:"LabeledControlsAlignmentProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Field/Label.tsx#LabeledControlsAlignmentProvider"]={docgenInfo:LabeledControlsAlignmentProvider.__docgenInfo,name:"LabeledControlsAlignmentProvider",path:"src/Field/Label.tsx#LabeledControlsAlignmentProvider"})}catch(__react_docgen_typescript_loader_error){}try{WithLabel.displayName="WithLabel",WithLabel.__docgenInfo={description:"Implements [label](https://jetbrains.github.io/ui/controls/input_field/#label),\nfor elements like Input, Dropdown, etc.",displayName:"WithLabel",props:{isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!0,type:{name:"boolean | undefined"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"ReactNode"}},labelPlacement:{defaultValue:null,description:"",name:"labelPlacement",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"above"'},{value:'"before"'}]}},labelProps:{defaultValue:null,description:"",name:"labelProps",required:!1,type:{name:"DOMAttributes<FocusableElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Field/Label.tsx#WithLabel"]={docgenInfo:WithLabel.__docgenInfo,name:"WithLabel",path:"src/Field/Label.tsx#WithLabel"})}catch(__react_docgen_typescript_loader_error){}},"./src/InputField/Input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>Input});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_react_aria_focus__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/focus/dist/useFocusable.mjs"),_react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/interactions/dist/useFocusWithin.mjs"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledInputBox=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  box-sizing: border-box;
  display: inline-flex;
  min-width: 4rem; // https://jetbrains.github.io/ui/controls/input_field/#28
  background: ${({theme,disabled})=>disabled?theme.color("TextField.disabledBackground"):theme.color("TextField.background")};
  border: 1px solid
    ${({theme,focused,disabled,validationState})=>theme.commonColors.border({focused,disabled,validationState})};
  box-shadow: 0 0 0 0.125rem
    ${({theme,focused=!1,validationState,disabled})=>disabled?"transparent":theme.commonColors.focusRing({validationState,focused})};
  border-radius: 1px;
  cursor: text; // the whole box moves focus to the input
  overflow: hidden;
  ${({appearance,validationState,disabled})=>"embedded"===appearance&&_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.iv`
      border-color: ${"error"!==validationState&&"transparent"};
      box-shadow: ${"error"!==validationState&&"none"};
      background: ${!disabled&&"transparent"};
    `};
`,StyledInput=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.input`
  all: unset;
  padding: 0.1875rem 0.375rem;
  flex: 1; // fill in the available space within the input box
  min-width: 0;
  line-height: 1rem;
  color: ${({theme})=>theme.color("TextField.foreground")};
  color: ${({theme,disabled})=>disabled&&theme.color("TextField.inactiveForeground")};

  caret-color: ${({theme})=>theme.color("TextField.caretForeground")};
  &::selection {
    background: ${({theme})=>theme.color("*.selectionBackground")}; // Not checked with the reference impl
    color: ${({theme})=>theme.color("*.selectionForeground")}; // Not checked with the reference impl
  }
  &::placeholder {
    color: ${({theme})=>theme.commonColors.inactiveTextColor};
  }
`,StyledAddons=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  display: inline-flex;
  align-items: center;
  gap: 0.25rem; /* TODO: check */
  padding: 1px 0;
`,StyledRightAddons=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(StyledAddons)`
  margin-right: 0.125rem; /* TODO: check */
`,StyledLeftAddons=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(StyledAddons)`
  margin-left: 0.375rem; /* TODO: check */
`,Input=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function Input({validationState,autoSelect,addonBefore,addonAfter,style,className,inputRef:inputRefProp,onKeyDown,onKeyUp,onFocus,onBlur,autoFocus,appearance,...props},forwardedRef){const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__.B)(forwardedRef),inputRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__.B)(inputRefProp),{focusableProps}=(0,_react_aria_focus__WEBPACK_IMPORTED_MODULE_4__.k)({isDisabled:props.disabled,autoFocus,onFocus,onBlur,onKeyDown,onKeyUp},inputRef),[isFocused,setIsFocused]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),{focusWithinProps}=(0,_react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__.L)({onFocusWithinChange:setIsFocused});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{autoSelect&&inputRef.current?.select()}),[autoSelect]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledInputBox,{ref,spellCheck:!1,appearance,...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__.d)(focusWithinProps,{className,style,onMouseDown:event=>{event.target!==inputRef.current&&(event.preventDefault(),inputRef.current?.focus())}}),focused:isFocused,validationState,disabled:props.disabled,children:[addonBefore&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledLeftAddons,{children:addonBefore}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledInput,{ref:inputRef,...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__.d)(props,focusableProps)}),addonAfter&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledRightAddons,{children:addonAfter})]})}));try{Input.displayName="Input",Input.__docgenInfo={description:'Bare input, themed, and with a few extra features:\n- Support for "error" and "warning" state ({@param validationState}\n- Support for autoSelect.\n- Disables spell check by default. It can be overwritten.\nUse {@link InputField } for more features like an associated label, error message and context help.',displayName:"Input",props:{validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"valid"'}]}},autoSelect:{defaultValue:null,description:"Whether to auto select the value initially",name:"autoSelect",required:!1,type:{name:"boolean"}},addonAfter:{defaultValue:null,description:"Rendered inside the input box and after the input element.\nUsed to render [Built-in buttons](https://jetbrains.github.io/ui/controls/built_in_button/).",name:"addonAfter",required:!1,type:{name:"ReactNode"}},addonBefore:{defaultValue:null,description:"Rendered inside the input box and before the input element.",name:"addonBefore",required:!1,type:{name:"ReactNode"}},inputRef:{defaultValue:null,description:"Ref to the underlying input element",name:"inputRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},appearance:{defaultValue:{value:'"box"'},description:'Appearance of the input.\n- "ghost": Without the border and shadow in valid state.\n- "boxed" With the border and shadow.',name:"appearance",required:!1,type:{name:"enum",value:[{value:'"embedded"'},{value:'"box"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/InputField/Input.tsx#Input"]={docgenInfo:Input.__docgenInfo,name:"Input",path:"src/InputField/Input.tsx#Input"})}catch(__react_docgen_typescript_loader_error){}},"./src/InputField/InputField.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>InputField});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_label__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/label/dist/useField.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/Tooltip/PositionedTooltipTrigger.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/Tooltip/ValidationTooltip.tsx"),_intellij_platform_core_InputField_Input__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/InputField/Input.tsx"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Field_ContextHelp__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/Field/ContextHelp.tsx"),_intellij_platform_core_Field_Label__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/Field/Label.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledInput=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(_intellij_platform_core_InputField_Input__WEBPACK_IMPORTED_MODULE_3__.I)`
  width: 100%;
`,InputField=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function InputField({validationState,validationMessage,className,style,labelPlacement="before",contextHelp,contextHelpPlacement,inputProps={},addonBefore,addonAfter,inputRef,...props},forwardedRef){const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__.B)(forwardedRef),{fieldProps,errorMessageProps,labelProps,descriptionProps}=(0,_react_aria_label__WEBPACK_IMPORTED_MODULE_5__.U)({...props,errorMessage:validationMessage,validationState:"error"===validationState||"warning"===validationState?"invalid":"valid"});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Field_Label__WEBPACK_IMPORTED_MODULE_6__.w,{ref,label:props.label,labelPlacement,isDisabled:props.isDisabled,labelProps,className,style,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Field_ContextHelp__WEBPACK_IMPORTED_MODULE_7__.y,{contextHelp,contextHelpPlacement,descriptionProps,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_8__.S,{placement:"top start",crossOffset:36,showOnFocus:!0,isDisabled:!validationMessage,tooltip:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_9__.p,{type:"valid"!==validationState?validationState:void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{...errorMessageProps,children:validationMessage})}),delay:0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledInput,{inputRef,placeholder:props.placeholder,disabled:props.isDisabled,validationState,autoSelect:props.autoSelect,autoFocus:props.autoFocus,addonAfter,addonBefore,...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_10__.d)(fieldProps,inputProps,{value:props.value,defaultValue:props.defaultValue,onChange:e=>props.onChange?.(e.target.value)})})})})})}));try{InputField.displayName="InputField",InputField.__docgenInfo={description:"An input box with an associated label, error message, and context help.",displayName:"InputField",props:{className:{defaultValue:null,description:"className applied on the field's wrapper div.",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"style applied on the field's wrapper div.",name:"style",required:!1,type:{name:"CSSProperties"}},label:{defaultValue:null,description:"Label to be associated with the input.",name:"label",required:!1,type:{name:"ReactNode"}},labelPlacement:{defaultValue:{value:"before"},description:"Placement of the label with respect to the input box.",name:"labelPlacement",required:!1,type:{name:"enum",value:[{value:'"above"'},{value:'"before"'}]}},isDisabled:{defaultValue:null,description:"Whether the input is disabled. Use this prop",name:"isDisabled",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Convenient prop to be used instead of inputProps.placeholder",name:"placeholder",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"Convenient prop to be used instead of inputProps.value",name:"value",required:!1,type:{name:"string | number | readonly string[]"}},defaultValue:{defaultValue:null,description:"Convenient prop to be used instead of inputProps.defaultValue",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},onChange:{defaultValue:null,description:"Convenient prop to be used instead of inputProps.onChange. It also calls the passed callback with the\nchange value instead of input.",name:"onChange",required:!1,type:{name:"((newValue: string) => void)"}},inputProps:{defaultValue:{value:"{}"},description:"Props to be passed to the underlying input element.",name:"inputProps",required:!1,type:{name:'Omit<HTMLProps<HTMLInputElement>, "as" | "ref" | "disabled">'}},autoSelect:{defaultValue:null,description:"Whether to auto select the value initially",name:"autoSelect",required:!1,type:{name:"boolean"}},validationMessage:{defaultValue:null,description:"Validation message shown as a {@link ValidationTooltip} above the field.\n{@link ValidationTooltipProps#type } is defined based on `validationState`.",name:"validationMessage",required:!1,type:{name:"ReactNode"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"valid"'}]}},addonAfter:{defaultValue:null,description:"Rendered inside the input box and after the input element.\nUsed to render [Built-in buttons](https://jetbrains.github.io/ui/controls/built_in_button/).",name:"addonAfter",required:!1,type:{name:"ReactNode"}},addonBefore:{defaultValue:null,description:"Rendered inside the input box and before the input element.",name:"addonBefore",required:!1,type:{name:"ReactNode"}},inputRef:{defaultValue:null,description:"Ref to the underlying input element",name:"inputRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},contextHelp:{defaultValue:null,description:"Context help, shown below the input.\nA typical use case is\n[to provide example values](https://jetbrains.github.io/ui/principles/context_help/#07).",name:"contextHelp",required:!1,type:{name:"ReactNode"}},contextHelpPlacement:{defaultValue:null,description:"Placement of the contextHelp text with respect to the control.\nSee more: https://plugins.jetbrains.com/docs/intellij/inline-help-text.html#placement",name:"contextHelpPlacement",required:!1,type:{name:"enum",value:[{value:'"below"'},{value:'"after"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/InputField/InputField.tsx#InputField"]={docgenInfo:InputField.__docgenInfo,name:"InputField",path:"src/InputField/InputField.tsx#InputField"})}catch(__react_docgen_typescript_loader_error){}},"./src/Link/Link.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>Link});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_utils_useForwardedRef__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/useForwardedRef.ts"),_react_aria_focus__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/focus/dist/useFocusable.mjs"),_react_aria_focus__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/@react-aria/focus/dist/FocusRing.mjs"),_intellij_platform_core_Link_StyledLink__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/Link/StyledLink.tsx"),_react_aria_interactions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/interactions/dist/usePress.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/utils/dist/filterDOMProps.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const Link=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(((props,forwardedRef)=>{const ref=(0,_intellij_platform_core_utils_useForwardedRef__WEBPACK_IMPORTED_MODULE_2__.Z)(forwardedRef),{focusableProps}=(0,_react_aria_focus__WEBPACK_IMPORTED_MODULE_3__.k)(props,ref),{pressProps,isPressed}=(0,_react_aria_interactions__WEBPACK_IMPORTED_MODULE_4__.r)({...props,ref}),domProps=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__.z)(props,{labelable:!0}),interactionHandlers=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__.d)(focusableProps,pressProps);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_react_aria_focus__WEBPACK_IMPORTED_MODULE_7__.t,{focusRingClass:"focus-visible",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Link_StyledLink__WEBPACK_IMPORTED_MODULE_8__.F,{...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__.d)(focusableProps,interactionHandlers,domProps),as:"span",role:"link",ref,className:`${props.isDisabled?"disabled":""} ${isPressed?"active":""} ${props.className||""}`,"aria-disabled":props.isDisabled||void 0,tabIndex:props.isDisabled?void 0:props.excludeFromTabOrder?-1:0,children:props.children})})}));try{Link.displayName="Link",Link.__docgenInfo={description:"A focusable span in style of [Link](https://jetbrains.github.io/ui/controls/link/) and with accessibility role of link.\n\nTODO and known issues:\n- in the reference impl, Space presses the link, Enter doesn't. It's vice versa here, because of how usePress is implemented.\n- Support for External links\n- Support for Anchor elements?\n\nUnknowns:\n- What are ActionLink and DefaultLinkButtonUI?\n- What is HyperLinkLabel compared to LabelLink (which was looked into in implementation of this component)?",displayName:"Link",props:{isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},preventFocusOnPress:{defaultValue:null,description:"",name:"preventFocusOnPress",required:!1,type:{name:"boolean"}},excludeFromTabOrder:{defaultValue:null,description:"",name:"excludeFromTabOrder",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Link/Link.tsx#Link"]={docgenInfo:Link.__docgenInfo,name:"Link",path:"src/Link/Link.tsx#Link"})}catch(__react_docgen_typescript_loader_error){}},"./src/Link/StyledLink.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>StyledLink});const StyledLink=__webpack_require__("./src/styled.ts").zo.a`
  cursor: pointer;
  text-decoration: none;
  outline: none;
  // &:focus-visible didn't work as expected, so FocusRing is used
  &.focus-visible {
    outline: 1px solid
      ${({theme})=>theme.color("Link.focusedBorderColor",theme.commonColors.focusBorderColor)};
    border-radius: 2px; // Registry.intValue("ide.link.button.focus.round.arc", 4)
  }
  color: ${({theme})=>theme.commonColors.linkForegroundEnabled};

  &:hover,
  &.hover /* for testing purposes*/ {
    text-decoration: underline;
    color: ${({theme})=>theme.color("Link.hoverForeground",theme.color("link.hover.foreground",""))};
  }
  &:active,
  &.active {
    color: ${({theme})=>theme.color("Link.pressedForeground",theme.color("link.pressed.foreground",theme.dark?"#BA6F25":"#F00000"))};
  }
  &:disabled,
  &.disabled {
    cursor: default;
    text-decoration: none;
    color: ${({theme})=>theme.color("Link.disabledForeground",theme.color("Label.disabledForeground",theme.color("Label.disabledText","#999")))};
  }
  // We may need to refine this to allow passing visited as a prop for links that don't have href, and not apply the
  // styles in that case, since it seems no href is considered visited by default. Although, in all main themes
  // Link.visitedForeground is set to the default link color.
  &:visited,
  &.visited {
    color: ${({theme})=>theme.color("Link.visitedForeground",theme.color("link.visited.foreground",theme.dark?"#9776A9":"#800080"))};
  }
`;try{StyledLink.displayName="StyledLink",StyledLink.__docgenInfo={description:"",displayName:"StyledLink",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLAnchorElement | null) => void) | RefObject<HTMLAnchorElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Link/StyledLink.tsx#StyledLink"]={docgenInfo:StyledLink.__docgenInfo,name:"StyledLink",path:"src/Link/StyledLink.tsx#StyledLink"})}catch(__react_docgen_typescript_loader_error){}},"./src/List/List.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>List});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_useList__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/List/useList.ts"),_ListItem__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/List/ListItem.tsx"),_StyledList__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/List/StyledList.tsx"),_useListState__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/List/useListState.ts"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/@react-aria/utils/dist/filterDOMProps.mjs"),_react_aria_virtualizer__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/@react-aria/virtualizer/dist/module.js"),_intellij_platform_core_List_useListVirtualizer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/List/useListVirtualizer.tsx"),_intellij_platform_core_List_ListContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/List/ListContext.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const List=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function List({allowEmptySelection=!1,fillAvailableSpace=!1,estimatedItemHeight,className,...inputProps},forwardedRef){const props={...inputProps,disallowEmptySelection:!allowEmptySelection},ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.B)(forwardedRef),state=(0,_useListState__WEBPACK_IMPORTED_MODULE_3__.n)(props),{listProps,listContext}=(0,_useList__WEBPACK_IMPORTED_MODULE_4__.s)({...props,isVirtualized:!0},state,ref),{virtualizerProps:{children:renderNode,...virtualizerProps}}=(0,_intellij_platform_core_List_useListVirtualizer__WEBPACK_IMPORTED_MODULE_5__.g)({state,estimatedItemHeight,renderItem:item=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_ListItem__WEBPACK_IMPORTED_MODULE_6__.H,{item},item.key)});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_List_ListContext__WEBPACK_IMPORTED_MODULE_7__.Z.Provider,{value:listContext,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_StyledList__WEBPACK_IMPORTED_MODULE_8__.C,{as:_react_aria_virtualizer__WEBPACK_IMPORTED_MODULE_9__.dM,...virtualizerProps,...listProps,...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_10__.z)(props,{labelable:!0}),fillAvailableSpace,className,ref,children:renderNode})})}));try{List.displayName="List",List.__docgenInfo={description:"List view",displayName:"List",props:{selectionManagerRef:{defaultValue:null,description:"Gives imperative access to selection manager.",name:"selectionManagerRef",required:!1,type:{name:"RefObject<SelectionManager>"}},fillAvailableSpace:{defaultValue:{value:"false"},description:"fills the available horizontal or vertical space, when rendered in a flex container.",name:"fillAvailableSpace",required:!1,type:{name:"boolean"}},showAsFocused:{defaultValue:null,description:"When true, shows the list in focused style, even when it's not focused. A common use case is when the list\nis virtually focused. i.e. the focus is physically on some other element (like a search input) which handles\nkeyboard events as if the list was focused.\nAnother (maybe questionable) use case is master detail views, where the master view is shown as focused, even\nwhen the details view has physical focus.",name:"showAsFocused",required:!1,type:{name:"boolean"}},allowEmptySelection:{defaultValue:{value:"false"},description:"",name:"allowEmptySelection",required:!1,type:{name:"boolean"}},estimatedItemHeight:{defaultValue:null,description:"Useful when list items have a custom height, to hint layout calculation logic about the item height which\nincreases rendering efficiency and also prevents flash of items with wrong height.",name:"estimatedItemHeight",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/List/List.tsx#List"]={docgenInfo:List.__docgenInfo,name:"List",path:"src/List/List.tsx#List"})}catch(__react_docgen_typescript_loader_error){}},"./src/Mnemonic/MnemonicTrigger.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>MnemonicTrigger,i:()=>MnemonicText});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_utils_useEventCallback__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/useEventCallback.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const MnemonicContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({character:null,active:!1,rendered:()=>{}}),MnemonicTrigger=({children,mnemonic,isDisabled,onTriggered:onTriggeredProp=(()=>{})})=>{const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),onTriggered=(0,_intellij_platform_core_utils_useEventCallback__WEBPACK_IMPORTED_MODULE_2__.$)(onTriggeredProp),[active,setActive]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),keydownListener=(0,_intellij_platform_core_utils_useEventCallback__WEBPACK_IMPORTED_MODULE_2__.$)((e=>{if(!isDisabled){if(active&&!e.repeat){const character=e.code.match(/Key([A-Z])/)?.[1];character&&character.toLowerCase()===mnemonic.toLowerCase()&&onTriggered()}"Alt"===e.key&&ref.current&&function isAccessible(element){return!element.closest("[aria-hidden]")&&null!==element.parentElement&&function isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}(element.parentElement)}(ref.current)&&setActive(!0)}}));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{function onBlur(){setActive(!1)}function keyupListener(e){"Alt"===e.key&&setActive(!1)}return document.addEventListener("keydown",keydownListener),document.addEventListener("keyup",keyupListener),window.addEventListener("blur",onBlur),()=>{document.removeEventListener("keydown",keydownListener),document.removeEventListener("keyup",keyupListener),window.removeEventListener("blur",onBlur)}}),[]);const renderedMnemonicRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)("");return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const timerId=setTimeout((()=>{renderedMnemonicRef.current!==mnemonic&&console.warn(`Mnemonic ${mnemonic} was set but not rendered to the user. \nMake sure the specified character is rendered directly in MnemonicTrigger, or wrapped by MnemonicText inside MnemonicTrigger children. \nElement:`,ref.current?.parentElement)}));return()=>{clearTimeout(timerId)}}),[mnemonic]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(MnemonicContext.Provider,{value:{character:mnemonic,active,rendered:()=>{renderedMnemonicRef.current=mnemonic}},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{hidden:!0,ref}),"string"==typeof children?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(MnemonicText,{children}):children]})};function MnemonicText({children}){const{character,active,rendered}=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MnemonicContext);if(character){const index=children.toLowerCase().indexOf(character.toLowerCase()),found=index>-1;if(found&&rendered(),found&&active)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[children.slice(0,index),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("u",{children:children.slice(index,index+1)}),children.slice(index+1)]})}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children})}MnemonicTrigger.displayName="MnemonicTrigger";try{MnemonicText.displayName="MnemonicText",MnemonicText.__docgenInfo={description:"Used inside MnemonicTrigger children, when the direct child can't be a string.",displayName:"MnemonicText",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Mnemonic/MnemonicTrigger.tsx#MnemonicText"]={docgenInfo:MnemonicText.__docgenInfo,name:"MnemonicText",path:"src/Mnemonic/MnemonicTrigger.tsx#MnemonicText"})}catch(__react_docgen_typescript_loader_error){}try{MnemonicTrigger.displayName="MnemonicTrigger",MnemonicTrigger.__docgenInfo={description:"",displayName:"MnemonicTrigger",props:{mnemonic:{defaultValue:null,description:"Character to be used as {@link https://jetbrains.design/intellij/principles/mnemonics/ mnemonic}.",name:"mnemonic",required:!0,type:{name:"string"}},onTriggered:{defaultValue:null,description:"Called when mnemonic key is pressed with the activator key",name:"onTriggered",required:!1,type:{name:"(() => void)"}},isDisabled:{defaultValue:null,description:"Whether the mnemonic is disabled. Useful when setting mnemonic on disable-able components, to just pass\nisDisabled prop down to MnemonicTrigger",name:"isDisabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Mnemonic/MnemonicTrigger.tsx#MnemonicTrigger"]={docgenInfo:MnemonicTrigger.__docgenInfo,name:"MnemonicTrigger",path:"src/Mnemonic/MnemonicTrigger.tsx#MnemonicTrigger"})}catch(__react_docgen_typescript_loader_error){}},"./src/ModalWindow/ModalWindow.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Du:()=>ModalWindow,dt:()=>StyledWindowContainer,zj:()=>WindowControllerContext});var react=__webpack_require__("../../node_modules/react/index.js"),useOverlayTriggerState=__webpack_require__("../../node_modules/@react-stately/overlays/dist/useOverlayTriggerState.mjs"),useModalOverlay=__webpack_require__("../../node_modules/@react-aria/overlays/dist/useModalOverlay.mjs"),usePreventScroll=__webpack_require__("../../node_modules/@react-aria/overlays/dist/usePreventScroll.mjs"),FocusScope=__webpack_require__("../../node_modules/@react-aria/focus/dist/FocusScope.mjs"),focusSafely=__webpack_require__("../../node_modules/@react-aria/focus/dist/focusSafely.mjs"),dist_module=__webpack_require__("../../node_modules/@react-aria/dialog/dist/module.js"),styled=__webpack_require__("./src/styled.ts"),style_constants=__webpack_require__("./src/style-constants.ts"),mergeProps=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),useResizableMovableOverlay=__webpack_require__("./src/Overlay/useResizableMovableOverlay.tsx"),OverlayInteractionHandler=__webpack_require__("./src/Overlay/OverlayInteractionHandler.tsx"),OverlayResizeHandles=__webpack_require__("./src/Overlay/OverlayResizeHandles.tsx"),WindowContext=__webpack_require__("./src/ModalWindow/WindowContext.ts"),useEventCallback=__webpack_require__("./src/utils/useEventCallback.ts"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function UNSAFE_React17SuspenseFix({measureContentSize,children}){return react.version.startsWith("17")?(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(NullSuspenseFallback,{afterUnsuspended:measureContentSize}),children}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children})}function NullSuspenseFallback({afterSuspended:afterSuspendedProp=(()=>{}),afterUnsuspended:afterUnsuspendedProp=(()=>{})}){const afterSuspended=(0,useEventCallback.$)(afterSuspendedProp),afterUnsuspended=(0,useEventCallback.$)(afterUnsuspendedProp);return(0,react.useEffect)((()=>(afterSuspended?.(),()=>{afterUnsuspended?.()})),[]),null}try{UNSAFE_React17SuspenseFix.displayName="UNSAFE_React17SuspenseFix",UNSAFE_React17SuspenseFix.__docgenInfo={description:"A workaround for an issue in measuring overlay size, caused by a limitation/bug in how React 17 runs effects when\nchildren suspend rendering: https://github.com/facebook/react/issues/21510\n\nHere is a simplified demonstration of the issue:\nExpected behavior (React 18): https://codesandbox.io/s/parent-effects-suspense-v18-38m8p7?file=/src/App.tsx\nBroken behavior (React 17): https://codesandbox.io/s/parent-effects-suspense-v17-h39g4g\n\nThe overlay content size measuring runs in an effect, and that effect won't run when the content is rendered after\nsuspense.",displayName:"UNSAFE_React17SuspenseFix",props:{measureContentSize:{defaultValue:null,description:"",name:"measureContentSize",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Overlay/UNSAFE_React17SuspenseFix.tsx#UNSAFE_React17SuspenseFix"]={docgenInfo:UNSAFE_React17SuspenseFix.__docgenInfo,name:"UNSAFE_React17SuspenseFix",path:"src/Overlay/UNSAFE_React17SuspenseFix.tsx#UNSAFE_React17SuspenseFix"})}catch(__react_docgen_typescript_loader_error){}const StyledWindowUnderlay=styled.zo.div`
  position: fixed;
  z-index: 1000; // FIXME: z-index should not be hard-coded like this
  inset: 0;
`,StyledWindowContainer=styled.zo.div`
  position: fixed;
  // not checked if there should be a better substitute for * in the following colors. Maybe "Component"?
  background-color: ${({theme})=>theme.color("*.background")};
  color: ${({theme})=>theme.color("*.foreground")};
  border-radius: 8px;
  ${style_constants.s}; // FIXME: OS-dependant style?
  outline: 1px solid #555; // FIXME
`,StyledWindowInnerContainer=styled.zo.div`
  height: inherit;
  overflow: hidden;
  display: flex;
  flex-direction: column;
`,WindowControllerContext=react.createContext({}),ModalWindow=({interactions="all",minWidth=50,minHeight=24,className,...props})=>{const{children}=props,propsContext=(0,react.useContext)(WindowControllerContext),ref=react.useRef(null),{modalProps,underlayProps}=(0,useModalOverlay.N)({isDismissable:!1,isKeyboardDismissDisabled:!1},(0,useOverlayTriggerState.d)({isOpen:!0,onOpenChange:isOpen=>{isOpen||(propsContext.onClose?.(),props.onClose?.())}}),ref);(0,usePreventScroll.t)();const{dialogProps,titleProps}=(0,dist_module.R)(props,ref),{bounds:style,overlayInteractionHandlerProps,UNSAFE_measureContentSize}=(0,useResizableMovableOverlay.t)(ref,{...props,minHeight,minWidth}),{focusContainmentFixProps}=function useFocusContainmentFix(){const lastFocusedElementRef=(0,react.useRef)(null);return{focusContainmentFixProps:{onFocus:e=>{lastFocusedElementRef.current=e.target},onBlur:e=>{const probablyFocusedElement=e.relatedTarget;if(!probablyFocusedElement||probablyFocusedElement instanceof Element&&!e.currentTarget.contains(probablyFocusedElement)){const elementToFocus=lastFocusedElementRef.current;elementToFocus&&(0,focusSafely.e)(elementToFocus)}}}}}();return(0,jsx_runtime.jsx)(StyledWindowUnderlay,{...underlayProps,className,children:(0,jsx_runtime.jsx)(OverlayInteractionHandler.Z,{...overlayInteractionHandlerProps,children:(0,jsx_runtime.jsx)(FocusScope.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,jsx_runtime.jsxs)(StyledWindowContainer,{...(0,mergeProps.d)(dialogProps,modalProps,focusContainmentFixProps,{style}),ref,children:[(0,jsx_runtime.jsx)(StyledWindowInnerContainer,{children:(0,jsx_runtime.jsx)(WindowContext.H.Provider,{value:{isActive:!0,titleProps,movable:"none"!==interactions},children:(0,jsx_runtime.jsx)(UNSAFE_React17SuspenseFix,{measureContentSize:UNSAFE_measureContentSize,children})})}),"all"===interactions&&(0,jsx_runtime.jsx)(OverlayResizeHandles.S,{})]})})})})};ModalWindow.displayName="ModalWindow";try{StyledWindowContainer.displayName="StyledWindowContainer",StyledWindowContainer.__docgenInfo={description:"",displayName:"StyledWindowContainer",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ModalWindow/ModalWindow.tsx#StyledWindowContainer"]={docgenInfo:StyledWindowContainer.__docgenInfo,name:"StyledWindowContainer",path:"src/ModalWindow/ModalWindow.tsx#StyledWindowContainer"})}catch(__react_docgen_typescript_loader_error){}try{ModalWindow.displayName="ModalWindow",ModalWindow.__docgenInfo={description:'A movable/resizable modal window. The window header which holds the title, can be used to drag the window around.\nIn the reference impl, modal windows are os-native, and contain os-level buttons for minimize/close/maximise, which\nare not relevant here since they wouldn\'t be os-native windows. A close button is still relevant (and kind of\nnecessary) and will be added in next iterations.\n\nThe content container doesn\'t come with any padding. Other related components should be used for common layouts in\nmodal windows.\nExample use cases: Window for git operations such as push, update, revert, new branch, etc.\n\n![img.png](https://user-images.githubusercontent.com/3150694/181095858-968c5c66-2ae7-4e40-84e3-e6df43cd4aa4.png)\n\nNOTE: The part regarding rendering OverlayInteractionHandler, and rendering as a dialog with a focus scope, in an\noverlay container could be extracted into a component which is then used to create custom resizable/movable overlay\ndialogs, like "Branches", or "Search Everywhere".\n\nTODO: show close button (maybe os-aware styles?)',displayName:"ModalWindow",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},onBoundsChange:{defaultValue:null,description:"",name:"onBoundsChange",required:!1,type:{name:'((bounds: Bounds, interactionType: "move" | "resize") => void)'}},onBoundsChanging:{defaultValue:null,description:"For performance reason, overlay bounds is kept in a local state during a resize or move interaction, and\n`onBoundsChange` is called once at the end of interaction. `onBoundsChanging` gives a chance of rectifying\nbounds changes during an interaction to for example apply custom size/placement constraints.",name:"onBoundsChanging",required:!1,type:{name:'((newBounds: Bounds, interactionType: "move" | "resize") => Bounds)'}},bounds:{defaultValue:null,description:"Controlled bounds. Can be a partially specified bounds.\n- If `top` not specified, the returned bounds will be centered vertically.\n- If `left` not specified, the returned bounds will be centered horizontally.\n- If `width` not specified, the width of the bounds will be based on content width.\n- If `height` not specified, the height of the bounds will be based on content height.\nNote that regardless of `bounds`, `onBoundsChange` always receives a full `bounds` object which is solely\nbased on the bounds of the overlay, at the end of an interaction.",name:"bounds",required:!1,type:{name:"Partial<Bounds>"}},defaultBounds:{defaultValue:null,description:"Default bounds in uncontrolled mode. Can be a partially specified bounds.\n- If `top` not specified, the returned bounds will be centered vertically.\n- If `left` not specified, the returned bounds will be centered horizontally.\n- If `width` not specified, the width of the bounds will be based on content width.\n- If `height` not specified, the height of the bounds will be based on content height.\nNote that regardless of `defaultBounds`, `onBoundsChange` always receives a full `bounds` object which is solely\nbased on the bounds of the overlay, at the end of an interaction.",name:"defaultBounds",required:!1,type:{name:"Partial<Bounds>"}},minWidth:{defaultValue:{value:"50"},description:"",name:"minWidth",required:!1,type:{name:'number | "content"'}},minHeight:{defaultValue:{value:"24"},description:"",name:"minHeight",required:!1,type:{name:'number | "content"'}},interactions:{defaultValue:{value:"all"},description:'Allowed interactions:\n- "all": both resizable and movable\n- "move": movable, but not resizable\n- "none": fixed size and position\nThe reason there are no `resizable` and `movable` boolean props is that resizable=true,movable=false doesn\'t make\nsense from UX perspective.',name:"interactions",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"all"'},{value:'"move"'}]}},observeContentResize:{defaultValue:null,description:"When the size is not specified by `bounds` or `defaultBounds` props, the content size is measured and used in the\nreturned bounds. By default, the content size is measured initially. If `observeContentSize` is true, the DOM\nmutations will be observed and the content is re-measured as changes are observed.",name:"observeContentResize",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ModalWindow/ModalWindow.tsx#ModalWindow"]={docgenInfo:ModalWindow.__docgenInfo,name:"ModalWindow",path:"src/ModalWindow/ModalWindow.tsx#ModalWindow"})}catch(__react_docgen_typescript_loader_error){}},"./src/ModalWindow/WindowContext.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>WindowContext});const WindowContext=__webpack_require__("../../node_modules/react/index.js").createContext({isActive:!1,movable:!0,titleProps:{}})},"./src/ModalWindow/WindowLayout.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>WindowLayout});var styled=__webpack_require__("./src/styled.ts"),react=__webpack_require__("../../node_modules/react/index.js"),OverlayMoveHandle=__webpack_require__("./src/Overlay/OverlayMoveHandle.tsx"),WindowContext=__webpack_require__("./src/ModalWindow/WindowContext.ts"),mergeProps=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledWindowTitle=styled.zo.h1`
  margin: 0;
  text-align: center;
  font-size: 13px; // not rem! intentional
  line-height: 24px; // Double check
  cursor: default;
  user-select: none;
  padding: 0 8px;
`,WindowHeader=({children})=>{const{movable,titleProps}=(0,react.useContext)(WindowContext.H),renderTitle=(otherProps={})=>(0,jsx_runtime.jsx)(StyledWindowTitle,{...(0,mergeProps.d)(titleProps,otherProps),children:children||(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:" "})});return movable?(0,jsx_runtime.jsx)(OverlayMoveHandle.F,{children:({moveHandleProps})=>renderTitle(moveHandleProps)}):renderTitle()};try{WindowHeader.displayName="WindowHeader",WindowHeader.__docgenInfo={description:"Implements appearance of Window header, and also acts as a handle for moving the window.\nExpected to be used with {@link WindowLayout }:",displayName:"WindowHeader",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ModalWindow/WindowHeader.tsx#WindowHeader"]={docgenInfo:WindowHeader.__docgenInfo,name:"WindowHeader",path:"src/ModalWindow/WindowHeader.tsx#WindowHeader"})}catch(__react_docgen_typescript_loader_error){}var ButtonGroup=__webpack_require__("./src/ButtonGroup/ButtonGroup.tsx");const StyledFooter=styled.zo.div`
  padding: 0.625rem 0.875rem;
  display: flex;
  gap: 0.5rem;
  justify-content: space-between;
  align-items: center;
  border-top: 1px solid transparent;
  border-color: ${({hasBorder,theme})=>hasBorder&&theme.commonColors.contrastBorder};
`,StyledFooterSide=styled.zo.div`
  display: flex;
  gap: 0.75rem;
`;function WindowFooter({left,right,hasBorder}){return(0,jsx_runtime.jsxs)(StyledFooter,{hasBorder,children:[(0,jsx_runtime.jsx)(StyledFooterSide,{children:left}),(0,jsx_runtime.jsx)(StyledFooterSide,{children:(0,jsx_runtime.jsx)(ButtonGroup.h,{children:right})})]})}WindowFooter.displayName="WindowFooter";try{WindowFooter.displayName="WindowFooter",WindowFooter.__docgenInfo={description:"Implements the common layout for window footer, to be used in {@link ModalWindowProps#footer }.\nFooter has a left and a right side. There is a standard gap between the children of each side.",displayName:"WindowFooter",props:{left:{defaultValue:null,description:"The content to go to the left side the footer. A help icon button is very common on the left side.",name:"left",required:!1,type:{name:"ReactNode"}},right:{defaultValue:null,description:"The content to go to the right side the footer.\n{@link Button }s are usually used inside the right content.\nA {@link ButtonGroup} is rendered around the content to allow for keyboard navigation with arrow keys.",name:"right",required:!1,type:{name:"ReactNode"}},hasBorder:{defaultValue:null,description:"Whether to show top border for footer or not",name:"hasBorder",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ModalWindow/WindowFooter.tsx#WindowFooter"]={docgenInfo:WindowFooter.__docgenInfo,name:"WindowFooter",path:"src/ModalWindow/WindowFooter.tsx#WindowFooter"})}catch(__react_docgen_typescript_loader_error){}const StyledWindowFooter=styled.zo.div`
  min-height: min-content;
`,StyledWindowContentWrapper=styled.zo.div`
  overflow: auto;
  flex: 1;
`;function WindowLayout({header,footer,content}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[header&&("string"==typeof header?(0,jsx_runtime.jsx)(WindowHeader,{children:header}):header),(0,jsx_runtime.jsx)(StyledWindowContentWrapper,{children:content}),footer&&(0,jsx_runtime.jsx)(StyledWindowFooter,{children:footer})]})}WindowLayout.Footer=WindowFooter,WindowLayout.Header=WindowHeader;try{WindowLayout.displayName="WindowLayout",WindowLayout.__docgenInfo={description:"Window content layout, supporting fixed `header` and `footer` sections, and a scrollable `content` area.",displayName:"WindowLayout",props:{header:{defaultValue:null,description:"Fixed position header of the window at the top. Use {@link WindowLayout.Header} for the default window header,\nwhich also acts as a move handle for the window. If a string is passed, it will be wrapped by\n{@link WindowLayout.Header} automatically.",name:"header",required:!0,type:{name:"ReactNode"}},content:{defaultValue:null,description:"Scrollable content of the window.",name:"content",required:!0,type:{name:"ReactNode"}},footer:{defaultValue:null,description:"An area at the bottom of the window which is not scrolled as opposed to `content`. Use {@link WindowLayout.Footer}\nfor rendering the common layout of a window footer.",name:"footer",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ModalWindow/WindowLayout.tsx#WindowLayout"]={docgenInfo:WindowLayout.__docgenInfo,name:"WindowLayout",path:"src/ModalWindow/WindowLayout.tsx#WindowLayout"})}catch(__react_docgen_typescript_loader_error){}try{Footer.displayName="WindowLayout.Footer",Footer.__docgenInfo={description:"Implements the common layout for window footer, to be used in {@link ModalWindowProps#footer }.\nFooter has a left and a right side. There is a standard gap between the children of each side.",displayName:"WindowLayout.Footer",props:{left:{defaultValue:null,description:"The content to go to the left side the footer. A help icon button is very common on the left side.",name:"left",required:!1,type:{name:"ReactNode"}},right:{defaultValue:null,description:"The content to go to the right side the footer.\n{@link Button }s are usually used inside the right content.\nA {@link ButtonGroup} is rendered around the content to allow for keyboard navigation with arrow keys.",name:"right",required:!1,type:{name:"ReactNode"}},hasBorder:{defaultValue:null,description:"Whether to show top border for footer or not",name:"hasBorder",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ModalWindow/WindowLayout.tsx#WindowLayout.Footer"]={docgenInfo:WindowLayout.Footer.__docgenInfo,name:"WindowLayout.Footer",path:"src/ModalWindow/WindowLayout.tsx#WindowLayout.Footer"})}catch(__react_docgen_typescript_loader_error){}try{Header.displayName="WindowLayout.Header",Header.__docgenInfo={description:"Implements appearance of Window header, and also acts as a handle for moving the window.\nExpected to be used with {@link WindowLayout }:",displayName:"WindowLayout.Header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ModalWindow/WindowLayout.tsx#WindowLayout.Header"]={docgenInfo:WindowLayout.Header.__docgenInfo,name:"WindowLayout.Header",path:"src/ModalWindow/WindowLayout.tsx#WindowLayout.Header"})}catch(__react_docgen_typescript_loader_error){}},"./src/Overlay/Popover.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>Popover});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/usePopover.mjs"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/Overlay.mjs"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/DismissButton.mjs"),_intellij_platform_core_style_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/style-constants.ts"),_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledPopover=_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  box-sizing: border-box;
  // not checked if there should be a better substitute for * in the following colors. Maybe "Component"?
  background-color: ${({theme})=>theme.color("*.background")};
  color: ${({theme})=>theme.color("*.foreground")};
  outline: none; // Focus will be reflected in header. No need for outline or any other focus style on the container
  ${_intellij_platform_core_style_constants__WEBPACK_IMPORTED_MODULE_3__.s}; // FIXME: OS-dependant style?
`,Popover=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function Popover({children,state,offset=8,...props},forwardedRef){const popoverRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__.B)(forwardedRef),{popoverProps}=(0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_5__.S)({...props,offset,popoverRef},state);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_react_aria_overlays__WEBPACK_IMPORTED_MODULE_6__.aV,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledPopover,{...popoverProps,ref:popoverRef,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_react_aria_overlays__WEBPACK_IMPORTED_MODULE_7__.U,{onDismiss:state.close}),children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_react_aria_overlays__WEBPACK_IMPORTED_MODULE_7__.U,{onDismiss:state.close})]})})}));try{Popover.displayName="Popover",Popover.__docgenInfo={description:"",displayName:"Popover",props:{state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"OverlayTriggerState"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Overlay/Popover.tsx#Popover"]={docgenInfo:Popover.__docgenInfo,name:"Popover",path:"src/Overlay/Popover.tsx#Popover"})}catch(__react_docgen_typescript_loader_error){}},"./src/Popup/PopupTrigger.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>PopupTrigger});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/useOverlayTrigger.mjs"),_react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/interactions/dist/PressResponder.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_stately_overlays__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-stately/overlays/dist/useOverlayTriggerState.mjs"),_PopupContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/Popup/PopupContext.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const PopupTrigger=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function PopupTrigger({placement,children,popup,...props},forwardedRef){const state=(0,_react_stately_overlays__WEBPACK_IMPORTED_MODULE_2__.d)(props),triggerRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__.B)(forwardedRef),{overlayProps,triggerProps}=(0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_4__.I)({type:props.type||"menu"},state,triggerRef);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__.N,{ref:triggerRef,...triggerProps,children}),state.isOpen&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_PopupContext__WEBPACK_IMPORTED_MODULE_6__.V.Provider,{value:{overlayProps,positioning:{targetRef:triggerRef,placement},onClose:state.close},children:"function"==typeof popup?popup({close:state.close}):popup})]})}));try{PopupTrigger.displayName="PopupTrigger",PopupTrigger.__docgenInfo={description:"Popup opened by a trigger. `trigger` can be an element of any pressable component (such as {@link Button } or\n{@link IconButton }), and is rendered in place. Similar to {@link Popup component}, `children` defines the content\nof Popup.",displayName:"PopupTrigger",props:{placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"top"'}]}},popup:{defaultValue:null,description:"",name:"popup",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>> | (({ close }: { close: () => void; }) => ReactNode)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Popup/PopupTrigger.tsx#PopupTrigger"]={docgenInfo:PopupTrigger.__docgenInfo,name:"PopupTrigger",path:"src/Popup/PopupTrigger.tsx#PopupTrigger"})}catch(__react_docgen_typescript_loader_error){}},"./src/ProgressBar/ProgressBar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h9:()=>useProgressBarPauseIconButton,ko:()=>ProgressBar,th:()=>useProgressBarIconButton});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_react_aria_progress__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-aria/progress/dist/module.js"),_react_aria_interactions__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@react-aria/interactions/dist/useHover.mjs"),_react_aria_button__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/button/dist/useButton.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/styled.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const ProgressBar=({value=0,maxValue=100,minValue=0,name,namePosition="top",details,secondaryDetails,button,width,dense,className,style,valueLabel,showValueLabel=Boolean(valueLabel),...props})=>{const{progressBarProps,labelProps}=(0,_react_aria_progress__WEBPACK_IMPORTED_MODULE_2__.D)({...props,label:name,value,valueLabel,maxValue,minValue}),percentage=(value/maxValue*100).toFixed(0),[forcedDetails,setForcedDetails]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[tooltip,setTooltip]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),contextValue=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({setForcedDetails,setTooltip})),[]),label=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledProgressBarLabel,{...labelProps,children:name}),effectiveDetails=details?tooltip||forcedDetails||details:null;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledProgressBarContainer,{style,className,children:["top"===namePosition&&label,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledProgressBarLineContainer,{dense,hasTopMargin:Boolean(name)&&"top"===namePosition,hasBottomMargin:Boolean(effectiveDetails),children:["side"===namePosition&&label,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledProgressBarTrack,{style:{width},...progressBarProps,indeterminate:props.isIndeterminate,children:!props.isIndeterminate&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledProgressBarProgress,{style:{width:`${percentage}%`}})}),showValueLabel&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{children:valueLabel??`${percentage}%`}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ProgressBarContext.Provider,{value:contextValue,children:button})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledProgressBarDetails,{children:effectiveDetails}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledProgressBarDetails,{children:secondaryDetails})]})};ProgressBar.displayName="ProgressBar";const ProgressBarContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(null),StyledProgressBarContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_3__.zo.div`
  color: ${({theme})=>theme.commonColors.labelForeground};
  cursor: default; // prevent cursor on text
`,StyledProgressBarLineContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_3__.zo.div`
  display: flex;
  align-items: center;
  gap: ${({dense})=>dense?"0.5rem":"0.625rem"};
  height: 4px;
  // spacing is based on the reference impl and figma designs. top and bottom spacing is inverted in the spec document
  // figma: https://www.figma.com/file/nfDfMAdV7j2fnQlpYNAOfP/IntelliJ-Platform-UI-Kit-(Community)?node-id=75426%3A16650
  // spec document: https://jetbrains.github.io/ui/controls/progress_bar/#25
  margin-top: ${({hasTopMargin})=>hasTopMargin&&"0.375rem"};
  margin-bottom: ${({hasBottomMargin})=>hasBottomMargin&&"0.25rem"};
`,StyledProgressBarLabel=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_3__.zo.div`
  white-space: nowrap;
  max-width: calc(100% - 2rem);
  overflow: hidden;
`,StyledProgressBarDetails=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_3__.zo.div`
  color: ${({theme})=>theme.commonColors.contextHelpForeground};
  font-size: 0.82em;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  max-width: calc(100% - 2rem); // not the best way
`,StyledProgressBarTrack=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_3__.zo.div`
  height: inherit;
  border-radius: 2px;
  overflow: hidden;
  display: flex;

  // In case used in flex layout
  min-width: 0;
  flex: 1;

  background: ${({theme})=>theme.color("ProgressBar.trackColor",theme.dark?"rgb(85,85,85)":"rgb(196,196,196)")};
  ${({indeterminate})=>indeterminate&&_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_3__.iv`
      background: linear-gradient(
        90deg,
        ${getIndeterminateStartColor} 0%,
        ${getIndeterminateEndColor} 50%,
        ${getIndeterminateStartColor} 100%
      );
      background-size: 96px auto;
      animation: 800ms ${indeterminateBackgroundAnimation} linear infinite;
    `}
`,getIndeterminateStartColor=({theme})=>theme.color("ProgressBar.indeterminateStartColor"),getIndeterminateEndColor=({theme})=>theme.color("ProgressBar.indeterminateEndColor"),indeterminateBackgroundAnimation=(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.F4)(["0%{background-position:0;}100%{background-position:96px;}"]),StyledProgressBarProgress=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_3__.zo.div`
  height: 100%;
  background: ${({theme})=>theme.color("ProgressBar.progressColor",theme.dark?"rgb(160,160,160)":"rgb(128,128,128)")};
`;function useProgressBarIconButton({onPress,hoverTooltip},ref){const{buttonProps}=(0,_react_aria_button__WEBPACK_IMPORTED_MODULE_5__.U)({onPress,elementType:"span",excludeFromTabOrder:!0,preventFocusOnPress:!0},ref),context=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ProgressBarContext),{hoverProps,isHovered}=(0,_react_aria_interactions__WEBPACK_IMPORTED_MODULE_6__.X)({});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{context?.setTooltip(isHovered?hoverTooltip:null)}),[hoverTooltip,isHovered]),{buttonProps:(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_7__.d)(buttonProps,hoverProps)}}function useProgressBarPauseIconButton({paused,...props},ref){const context=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ProgressBarContext);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{context?.setForcedDetails(paused?"Paused":null)}),[paused]),useProgressBarIconButton(props,ref)}ProgressBar.Container=StyledProgressBarContainer,ProgressBar.Label=StyledProgressBarLabel,ProgressBar.LineContainer=StyledProgressBarLineContainer,ProgressBar.Track=StyledProgressBarTrack,ProgressBar.Progress=StyledProgressBarProgress,ProgressBar.Details=StyledProgressBarDetails;try{useProgressBarIconButton.displayName="useProgressBarIconButton",useProgressBarIconButton.__docgenInfo={description:"Accessibility and functionality of progress bar icon buttons",displayName:"useProgressBarIconButton",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ProgressBar/ProgressBar.tsx#useProgressBarIconButton"]={docgenInfo:useProgressBarIconButton.__docgenInfo,name:"useProgressBarIconButton",path:"src/ProgressBar/ProgressBar.tsx#useProgressBarIconButton"})}catch(__react_docgen_typescript_loader_error){}try{ProgressBar.displayName="ProgressBar",ProgressBar.__docgenInfo={description:"",displayName:"ProgressBar",props:{name:{defaultValue:null,description:"Process name, shown above or to the left of the progress bar. Placement is controlled by {@link namePosition}.\n@see https://jetbrains.github.io/ui/controls/progress_bar/#process-name",name:"name",required:!1,type:{name:"ReactNode"}},namePosition:{defaultValue:{value:"top"},description:'Process name position with respect to the progress bar.\nIf `namePosition` is "side", {@link name} is **not** automatically appended with a colon.',name:"namePosition",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"side"'}]}},details:{defaultValue:null,description:"Process details, placed bellow the progress bar, with a de-emphasized color.\n@see https://jetbrains.github.io/ui/controls/progress_bar/#process-details",name:"details",required:!1,type:{name:"ReactNode"}},secondaryDetails:{defaultValue:null,description:"A second line of details. Not an officially documented feature, but it's supported in the reference impl.",name:"secondaryDetails",required:!1,type:{name:"ReactNode"}},button:{defaultValue:null,description:"Placed next to and aligned with the progress bar, used for\n[process control](https://jetbrains.github.io/ui/controls/progress_bar/#process-control) buttons.",name:"button",required:!1,type:{name:"ReactNode"}},width:{defaultValue:null,description:"Progress bar track width.",name:"width",required:!1,type:{name:"Width<string | number>"}},dense:{defaultValue:null,description:"Not supported in [the official specs](https://jetbrains.github.io/ui/controls/progress_bar/#25), but the progress\nbar in status bar has a denser spacing. It still won't be a pixel perfect match with the progress bar in the\nstatus bar.",name:"dense",required:!1,type:{name:"boolean"}},showValueLabel:{defaultValue:{value:"Boolean(valueLabel)"},description:"Whether the value's label is displayed. True by default if there's a label, false by default if not.",name:"showValueLabel",required:!1,type:{name:"boolean"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ProgressBar/ProgressBar.tsx#ProgressBar"]={docgenInfo:ProgressBar.__docgenInfo,name:"ProgressBar",path:"src/ProgressBar/ProgressBar.tsx#ProgressBar"})}catch(__react_docgen_typescript_loader_error){}try{Container.displayName="ProgressBar.Container",Container.__docgenInfo={description:"Experimenting with an idea of exposing parts on each component, to maximize styling customizability, similar to\n[classes](https://mui.com/joy-ui/api/button/#classes) API in MUI components. But instead of passing classes prop,\none would be able to create custom versions of a component by doing something like this:\nconst CustomComponent = styled(Component)`\n  ${Component.part1} {\n    // custom style here\n  }\n`;\nThe question is if this type of customizability is actually a good thing in the balance between flexibility for\ncatering for different use cases and not stepping out of the design system boundaries.\nAnother potential downside is that the public API expands to the anatomy of the component.",displayName:"ProgressBar.Container",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ProgressBar/ProgressBar.tsx#ProgressBar.Container"]={docgenInfo:ProgressBar.Container.__docgenInfo,name:"ProgressBar.Container",path:"src/ProgressBar/ProgressBar.tsx#ProgressBar.Container"})}catch(__react_docgen_typescript_loader_error){}try{Label.displayName="ProgressBar.Label",Label.__docgenInfo={description:"",displayName:"ProgressBar.Label",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ProgressBar/ProgressBar.tsx#ProgressBar.Label"]={docgenInfo:ProgressBar.Label.__docgenInfo,name:"ProgressBar.Label",path:"src/ProgressBar/ProgressBar.tsx#ProgressBar.Label"})}catch(__react_docgen_typescript_loader_error){}try{LineContainer.displayName="ProgressBar.LineContainer",LineContainer.__docgenInfo={description:"",displayName:"ProgressBar.LineContainer",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},dense:{defaultValue:null,description:"",name:"dense",required:!1,type:{name:"boolean"}},hasTopMargin:{defaultValue:null,description:"",name:"hasTopMargin",required:!1,type:{name:"boolean"}},hasBottomMargin:{defaultValue:null,description:"",name:"hasBottomMargin",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ProgressBar/ProgressBar.tsx#ProgressBar.LineContainer"]={docgenInfo:ProgressBar.LineContainer.__docgenInfo,name:"ProgressBar.LineContainer",path:"src/ProgressBar/ProgressBar.tsx#ProgressBar.LineContainer"})}catch(__react_docgen_typescript_loader_error){}try{Track.displayName="ProgressBar.Track",Track.__docgenInfo={description:"",displayName:"ProgressBar.Track",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},indeterminate:{defaultValue:null,description:"",name:"indeterminate",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ProgressBar/ProgressBar.tsx#ProgressBar.Track"]={docgenInfo:ProgressBar.Track.__docgenInfo,name:"ProgressBar.Track",path:"src/ProgressBar/ProgressBar.tsx#ProgressBar.Track"})}catch(__react_docgen_typescript_loader_error){}try{Progress.displayName="ProgressBar.Progress",Progress.__docgenInfo={description:"",displayName:"ProgressBar.Progress",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ProgressBar/ProgressBar.tsx#ProgressBar.Progress"]={docgenInfo:ProgressBar.Progress.__docgenInfo,name:"ProgressBar.Progress",path:"src/ProgressBar/ProgressBar.tsx#ProgressBar.Progress"})}catch(__react_docgen_typescript_loader_error){}try{Details.displayName="ProgressBar.Details",Details.__docgenInfo={description:"",displayName:"ProgressBar.Details",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ProgressBar/ProgressBar.tsx#ProgressBar.Details"]={docgenInfo:ProgressBar.Details.__docgenInfo,name:"ProgressBar.Details",path:"src/ProgressBar/ProgressBar.tsx#ProgressBar.Details"})}catch(__react_docgen_typescript_loader_error){}},"./src/ProgressBar/ProgressBarStopButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>ProgressBarStopButton});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Icon/AutoHoverPlatformIcon.tsx"),_ProgressBar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/ProgressBar/ProgressBar.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const ProgressBarStopButton=({small,onPress})=>{const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),{buttonProps}=(0,_ProgressBar__WEBPACK_IMPORTED_MODULE_2__.th)({onPress,hoverTooltip:"Cancel"},ref);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_3__.v,{ref,...buttonProps,icon:`process/stop${small?"Small":""}.svg`,hoverIcon:`process/stop${small?"Small":""}Hovered.svg`})};ProgressBarStopButton.displayName="ProgressBarStopButton";try{ProgressBarStopButton.displayName="ProgressBarStopButton",ProgressBarStopButton.__docgenInfo={description:"Stop (cancel) icon button for progress bar, to be used in {@link ProgressBarProps#button }.",displayName:"ProgressBarStopButton",props:{small:{defaultValue:null,description:"whether small icon should be used.",name:"small",required:!1,type:{name:"boolean"}},onPress:{defaultValue:null,description:"",name:"onPress",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ProgressBar/ProgressBarStopButton.tsx#ProgressBarStopButton"]={docgenInfo:ProgressBarStopButton.__docgenInfo,name:"ProgressBarStopButton",path:"src/ProgressBar/ProgressBarStopButton.tsx#ProgressBarStopButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/SearchInput/SearchInput.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>SearchInput});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_react_stately_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-stately/utils/dist/useControlledState.mjs"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/ActionSystem/CommonActionIds.ts"),_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/ActionSystem/ActionShortcut.tsx"),_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/ActionSystem/ActionsProvider.tsx"),_intellij_platform_core_InputField__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/InputField/Input.tsx"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/Icon/PlatformIcon.tsx"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/Icon/AutoHoverPlatformIcon.tsx"),_intellij_platform_core_Menu__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/Menu/MenuTrigger.tsx"),_intellij_platform_core_Menu__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/Menu/Menu.tsx"),_intellij_platform_core_Collections__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/Collections/Item.ts"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/Tooltip/TooltipTrigger.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/Tooltip/ActionTooltip.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledInput=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(_intellij_platform_core_InputField__WEBPACK_IMPORTED_MODULE_3__.I)`
  input[type="search"] {
    -webkit-appearance: none;
    &::-webkit-search-cancel-button {
      -webkit-appearance: none;
    }
    &::-webkit-search-decoration {
      -webkit-appearance: none;
    }
  }
`,SearchInput=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function SearchInput({addonBefore,addonAfter,searchHistory,onClear,onSubmit,onHistoryItemSelected,historyButtonTitle="Recent Search",value:valueProp,defaultValue="",onChange,type="search",inputRef:inputRefProp,...props},forwardedRef){const[value,setValue]=(0,_react_stately_utils__WEBPACK_IMPORTED_MODULE_4__.z)(valueProp,defaultValue,onChange),inputContainerRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__.B)(forwardedRef),inputRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__.B)(inputRefProp),[isSearchHistoryOpen,setSearchHistoryOpen]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),showSearchHistoryAction={id:_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_6__.$.SHOW_SEARCH_HISTORY,title:historyButtonTitle,actionPerformed:()=>{setSearchHistoryOpen(!0)}},getShortcut=(0,_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_7__.k)(),searchIcon=searchHistory?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Menu__WEBPACK_IMPORTED_MODULE_8__.b,{isOpen:isSearchHistoryOpen,onOpenChange:setSearchHistoryOpen,positioningTargetRef:inputContainerRef,renderMenu:({menuProps})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Menu__WEBPACK_IMPORTED_MODULE_9__.v2,{...menuProps,autoFocus:"first",onAction:key=>{const historyItemText=searchHistory[parseInt(`${key}`.split("_")[0])];void 0!==historyItemText&&(setValue(historyItemText),onHistoryItemSelected?.(historyItemText,value),inputRef.current?.focus())},children:searchHistory.map(((historyItem,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Collections__WEBPACK_IMPORTED_MODULE_10__.c,{children:historyItem},`${index}_${historyItem}`)))}),children:(menuTriggerProps,ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_11__.a,{tooltip:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_12__.M,{actionName:historyButtonTitle,shortcut:getShortcut(_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_6__.$.SHOW_SEARCH_HISTORY)}),children:tooltipTriggerProps=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_13__.vq,{...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_14__.d)(tooltipTriggerProps,menuTriggerProps),ref,icon:"actions/searchWithHistory.svg",role:"button","aria-label":historyButtonTitle})})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_13__.vq,{icon:"actions/search.svg"}),clear=()=>{setValue(""),onClear?.(value)},inputProps=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_14__.d)(props,{ref:inputContainerRef,inputRef,value,type,onChange:event=>{setValue(event.target.value)},addonBefore:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[searchIcon,addonBefore]}),addonAfter:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[value&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_15__.v,{onClick:clear,role:"button","aria-label":"Clear search",icon:"actions/close",hoverIcon:"actions/closeHovered"}),addonAfter]}),onKeyDown:event=>{event.repeat||("Enter"===event.key?onSubmit?.(event.currentTarget.value):"Escape"===event.key&&clear())}});return searchHistory?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_16__.DG,{actions:[showSearchHistoryAction],children:({shortcutHandlerProps})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledInput,{...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_14__.d)(inputProps,shortcutHandlerProps)})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledInput,{...inputProps})}));try{SearchInput.displayName="SearchInput",SearchInput.__docgenInfo={description:"A wrapper around {@link Input} with a few additions:\n- A Search icon, added as an {@link InputProps#addonBefore addonBefore}.\n- A clear button, added as an {@link InputProps#addonAfter addonAfter}, when the input has value.\n  {@link SearchInputProps#onClear onClear} is called when the clear button is clicked.\n- A list of search queries shown as a menu, when the search icon is clicked,\n  if {@link SearchInputProps#searchHistory searchHistory} is provided.\n- An action provided on the input element, to open the search history via\n  {@link CommonActionId.SHOW_SEARCH_HISTORY} shortcut.\n- Search submission callback ({@link SearchInputProps#onSubmit onSubmit}) called when search is submitted by pressing Enter\n\n{@link InputProps#onChange onChange} and {@link InputProps#onSubmit onSubmit} props are also different in SearchInput, compared to\nthe corresponding props of the native input.\n\nCaveat: If the width is not set (either explicitly or via the entailing layout), the width of the input will change when clear button shows/hides.",displayName:"SearchInput",props:{searchHistory:{defaultValue:null,description:"Search history to be shown as a menu when the search icon is pressed.",name:"searchHistory",required:!1,type:{name:"string[]"}},historyButtonTitle:{defaultValue:{value:"Recent Search"},description:'The content of "show history" button tooltip, and the corresponding action title.',name:"historyButtonTitle",required:!1,type:{name:"string"}},onClear:{defaultValue:null,description:"Called when the search input is cleared by either clear button or `Escape` key.\n`onChange` is also called with an empty string, whenever the input is cleared,\nso there is no need for updating the state using `onClear`, when the value is controlled.\n@param clearedValue the value before clearing.",name:"onClear",required:!1,type:{name:"((clearedValue: string) => void)"}},onSubmit:{defaultValue:null,description:"Called when the search is submitted by pressing `Enter`\n@param value submitted text",name:"onSubmit",required:!1,type:{name:"((value: string) => void)"}},value:{defaultValue:null,description:"Controlled value of the search input",name:"value",required:!1,type:{name:"string"}},defaultValue:{defaultValue:{value:""},description:"Default value of the search input, used for initialization when value is uncontrolled.",name:"defaultValue",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Called when the value is changed.",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onHistoryItemSelected:{defaultValue:null,description:"Called when a history item is selected. `onChange` is called with the selected text, so\nthere is no need for updating the state using `onHistoryItemSelected`, when the value is controlled.\n@param value text selected from history.\n@param previousValue the value of the input before the history item was selected.",name:"onHistoryItemSelected",required:!1,type:{name:"((value: string, previousValue: string) => void)"}},validationState:{defaultValue:null,description:"",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'},{value:'"valid"'}]}},autoSelect:{defaultValue:null,description:"Whether to auto select the value initially",name:"autoSelect",required:!1,type:{name:"boolean"}},addonAfter:{defaultValue:null,description:"Rendered inside the input box and after the input element.\nUsed to render [Built-in buttons](https://jetbrains.github.io/ui/controls/built_in_button/).",name:"addonAfter",required:!1,type:{name:"ReactNode"}},addonBefore:{defaultValue:null,description:"Rendered inside the input box and before the input element.",name:"addonBefore",required:!1,type:{name:"ReactNode"}},inputRef:{defaultValue:null,description:"Ref to the underlying input element",name:"inputRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},appearance:{defaultValue:{value:'"box"'},description:'Appearance of the input.\n- "ghost": Without the border and shadow in valid state.\n- "boxed" With the border and shadow.',name:"appearance",required:!1,type:{name:"enum",value:[{value:'"embedded"'},{value:'"box"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/SearchInput/SearchInput.tsx#SearchInput"]={docgenInfo:SearchInput.__docgenInfo,name:"SearchInput",path:"src/SearchInput/SearchInput.tsx#SearchInput"})}catch(__react_docgen_typescript_loader_error){}},"./src/StatusBar/StatusBar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>StatusBar});__webpack_require__("../../node_modules/react/index.js");var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StatusBar=({left,right})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledStatusBar,{onMouseDown:e=>{e.preventDefault()},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledStatusBarLeft,{children:left}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledStatusBarRight,{children:right})]});StatusBar.displayName="StatusBar";const StyledStatusBar=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  box-sizing: border-box;
  padding: 0 0.25rem;
  display: flex;
  width: 100%;
  align-items: center;
  justify-content: space-between; // because there is left and right sides
  background-color: ${({theme})=>theme.color("StatusBar.background",theme.color("Panel.background"))||"#fff"};
  color: ${({theme})=>theme.color("StatusBar.Widget.foreground",theme.commonColors.labelForeground)};
  border-top: 1px solid
    ${({theme})=>theme.color("StatusBar.borderColor","rgb(145, 145, 145)")};
  height: calc(1.25rem + 1px /* border*/);
  line-height: 1.25rem;
  font-size: 0.656rem; // not verified
  cursor: default;
`,StyledStatusBarSection=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  display: flex;
  align-items: center;
  white-space: nowrap;
`,StyledStatusBarRight=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(StyledStatusBarSection)`
  flex-shrink: 0;
`,StyledStatusBarLeft=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(StyledStatusBarSection)`
  flex-shrink: 1;
  min-width: 0;
  overflow: hidden;
`;try{StatusBar.displayName="StatusBar",StatusBar.__docgenInfo={description:"Status bar rendered at the bottom of the main window. In the reference implementation, there are three slots for\ncontent: left, right and center. It doesn't seem center is really necessary, so only left and right are supported\nfor now.",displayName:"StatusBar",props:{left:{defaultValue:null,description:"",name:"left",required:!0,type:{name:"ReactNode"}},right:{defaultValue:null,description:"",name:"right",required:!0,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/StatusBar/StatusBar.tsx#StatusBar"]={docgenInfo:StatusBar.__docgenInfo,name:"StatusBar",path:"src/StatusBar/StatusBar.tsx#StatusBar"})}catch(__react_docgen_typescript_loader_error){}},"./src/StatusBar/StatusBarWidget.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>StatusBarWidget});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/interactions/dist/usePress.mjs"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/styled.ts"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_react_aria_focus__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/focus/dist/useFocusable.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StatusBarWidget=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function StatusBarWidget(props,forwardedRef){const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.B)(forwardedRef),{pressProps,isPressed}=(0,_react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__.r)({ref,...props,preventFocusOnPress:!0}),{focusableProps}=(0,_react_aria_focus__WEBPACK_IMPORTED_MODULE_4__.k)({excludeFromTabOrder:!0},ref),StyledWrapper=props.label?StyledStatusBarWidget:StyledStatusBarIconWidget;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledWrapper,{...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__.d)(pressProps,focusableProps),className:isPressed?"pressed":"",ref,children:[props.icon,props.icon&&props.label&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:" "}),props.label]})})),StyledStatusBarWidget=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_6__.zo.span`
  display: inline-flex;
  align-items: center;
  padding: ${({theme})=>theme.inset("StatusBar.Widget.widgetInsets")??"0 0.375rem"};
  height: 1.125rem;
  white-space: nowrap;
  &:hover {
    background-color: ${({theme})=>theme.color("StatusBar.Widget.hoverBackground",theme.color("ActionButton.hoverBackground","#dfdfdf"))};
    color: ${({theme})=>theme.color("StatusBar.Widget.hoverForeground",theme.commonColors.labelForeground)};
  }
  &.pressed {
    background-color: ${({theme})=>theme.color("StatusBar.Widget.pressedBackground",theme.color("ActionButton.pressedBackground","#cfcfcf"))};
    color: ${({theme})=>theme.color("StatusBar.Widget.pressedForeground",theme.commonColors.labelForeground)};
  }
`,StyledStatusBarIconWidget=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_6__.zo)(StyledStatusBarWidget)`
  padding: ${({theme})=>theme.inset("StatusBar.Widget.widgetInsets")??"0 0.25rem"};
`;try{StatusBarWidget.displayName="StatusBarWidget",StatusBarWidget.__docgenInfo={description:"Status bar button (aka widget), with the right hover and pressed appearance.\nIt doesn't get focused when pressed, and is excluded from tab order.\nDisabled style is not couldn't be found, so it's skipped at the moment.",displayName:"StatusBarWidget",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/StatusBar/StatusBarWidget.tsx#StatusBarWidget"]={docgenInfo:StatusBarWidget.__docgenInfo,name:"StatusBarWidget",path:"src/StatusBar/StatusBarWidget.tsx#StatusBarWidget"})}catch(__react_docgen_typescript_loader_error){}},"./src/Tabs/EditorTabs/EditorTabContent.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>EditorTabContent});__webpack_require__("../../node_modules/react/index.js");var _intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/Icon/PlatformIcon.tsx"),_intellij_platform_core_Tabs_TabContentLayout__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Tabs/TabContentLayout.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Tooltip/TooltipTrigger.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/Tooltip/ActionTooltip.tsx"),_intellij_platform_core_Button__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/Button/BareButton.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const EditorTabContent=({icon,title,closeButton,onUnpin,pinned,containerProps})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tabs_TabContentLayout__WEBPACK_IMPORTED_MODULE_2__.X,{startIcon:icon,title,containerProps,endIcon:pinned?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_3__.a,{tooltip:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_4__.M,{actionName:"Unpin Tab"}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Button__WEBPACK_IMPORTED_MODULE_5__.V,{onPress:onUnpin,excludeFromTabOrder:!0,preventFocusOnPress:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_6__.vq,{icon:"actions/pinTab"})})}):closeButton});EditorTabContent.displayName="EditorTabContent";try{EditorTabContent.displayName="EditorTabContent",EditorTabContent.__docgenInfo={description:"For rendering the content of Editor tabs. supports for file icon which is shown on the left and close or unpin\nbutton shown on the right.",displayName:"EditorTabContent",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"ReactNode"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"ReactNode"}},closeButton:{defaultValue:null,description:'Close button, shown in place of "pin" button if not pinned. Use {@link TabCloseButton} to render the close button\nfor the tab.\n@example ```tsx\n<EditorTabContent\n  closeButton={\n    <TooltipTrigger\n      tooltip={<ActionTooltip actionName="Close Tab" shortcut="^⇧F4" />}\n    >\n      <TabCloseButton onPress={}></TabCloseButton>\n    </TooltipTrigger>\n  }\n/>\n```',name:"closeButton",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},onUnpin:{defaultValue:null,description:"",name:"onUnpin",required:!1,type:{name:"(() => void)"}},pinned:{defaultValue:null,description:"",name:"pinned",required:!1,type:{name:"boolean"}},containerProps:{defaultValue:null,description:"",name:"containerProps",required:!1,type:{name:'Omit<HTMLProps<HTMLDivElement>, "as" | "ref">'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Tabs/EditorTabs/EditorTabContent.tsx#EditorTabContent"]={docgenInfo:EditorTabContent.__docgenInfo,name:"EditorTabContent",path:"src/Tabs/EditorTabs/EditorTabContent.tsx#EditorTabContent"})}catch(__react_docgen_typescript_loader_error){}},"./src/Tabs/EditorTabs/EditorTabs.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>EditorTabs});var _intellij_platform_core_Tabs_Tabs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Tabs/Tabs.tsx"),_StyledEditorTab__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Tabs/EditorTabs/StyledEditorTab.ts"),_StyledEditorTabs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/Tabs/EditorTabs/StyledEditorTabs.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=(__webpack_require__("../../node_modules/react/index.js"),__webpack_require__("../../node_modules/react/jsx-runtime.js"));const EditorTabs=props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tabs_Tabs__WEBPACK_IMPORTED_MODULE_2__.m,{...props,TabComponent:_StyledEditorTab__WEBPACK_IMPORTED_MODULE_3__.o,TabsComponent:_StyledEditorTabs__WEBPACK_IMPORTED_MODULE_4__.p,focusable:!1});EditorTabs.displayName="EditorTabs";try{EditorTabs.displayName="EditorTabs",EditorTabs.__docgenInfo={description:"",displayName:"EditorTabs",props:{shouldSelectOnPressUp:{defaultValue:{value:"false."},description:"Whether selected tab should change on press up instead of press down.",name:"shouldSelectOnPressUp",required:!1,type:{name:"boolean"}},active:{defaultValue:null,description:'Enables "active" style on tabs. Is usually related to a container having focus.',name:"active",required:!1,type:{name:"boolean"}},noBorders:{defaultValue:{value:"false"},description:"Removes the top and bottom border when passed.\nIt's still not clear whether such option makes sense or not, but\nat least in common use cases like in tool windows, it seems borders are already there and there should be a way\nof removing tab borders. On the other hand, when Tabs is used without any assumption about the surrounding UI,\nit kind of makes sense to have the top and bottom borders by default. So that's why this is made an option for\nnow, maybe until things are clearer.",name:"noBorders",required:!1,type:{name:"boolean"}},multiRow:{defaultValue:{value:"false"},description:"If set to true, tabs will be wrapped into multiple rows if needed.\nNOTE: In the original implementation, in multi row mode, rows are separated by a border. It's not easy to achieve\nthis when we are implementing this feature with a simple `flex-wrap: wrap` css rule. It doesn't seem that\nimportant, but we can achieve something similar by some css tricks like the ones suggested here:\nhttps://stackoverflow.com/questions/36128333/row-lines-for-flex-container-css",name:"multiRow",required:!1,type:{name:"boolean"}},noOverflowMenu:{defaultValue:null,description:"Only effective when {@link multiRow } is not true.\nWhen set to true, tabs that couldn't be fitted into the available space, are either shrunk (if {@link noScroll }\nis set to true), or are just accessible by scroll.",name:"noOverflowMenu",required:!1,type:{name:"boolean"}},noScroll:{defaultValue:{value:"false"},description:"Only effective when {@link multiRow } is not true.\nIf set to true and multiRow is not true, it will prevent horizontal scroll of tabs. Depending on the value of\nIn this case:\n- if {@link noOverflowMenu } is not set to true, tabs that can't be fitted into the available space will be\n  accessible via an overflow menu.\n- if {@link noOverflowMenu } is set to true, the tabs will be fitted into the available space, and they will\n  be shrunk when needed.\n@todo : not implemented yet.",name:"noScroll",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Tabs/EditorTabs/EditorTabs.tsx#EditorTabs"]={docgenInfo:EditorTabs.__docgenInfo,name:"EditorTabs",path:"src/Tabs/EditorTabs/EditorTabs.tsx#EditorTabs"})}catch(__react_docgen_typescript_loader_error){}},"./src/Tabs/EditorTabs/StyledEditorTab.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>editorTabTheme,o:()=>StyledEditorTab});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Tabs_StyledDefaultTab__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Tabs/StyledDefaultTab.ts"),_intellij_platform_core_Tabs_TabTheme__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Tabs/TabTheme.ts");const editorTabTheme=({theme})=>({borderColor:theme.color("EditorTabs.borderColor"),underlineHeight:theme.value("EditorTabs.underlineHeight"),background:theme.color("EditorTabs.background"),underlinedTabInactiveBackground:theme.color("EditorTabs.underlinedTabBackground"),underlinedTabBackground:theme.color("EditorTabs.underlinedTabBackground"),hoverInactiveBackground:theme.color("EditorTabs.hoverInactiveBackground"),hoverBackground:theme.color("EditorTabs.hoverBackground"),inactiveUnderlineColor:theme.color("EditorTabs.inactiveUnderlineColor"),underlineColor:theme.color("EditorTabs.underlineColor"),underlinedTabInactiveForeground:theme.color("EditorTabs.underlinedTabForeground"),underlinedTabForeground:theme.color("EditorTabs.underlinedTabForeground")}),StyledEditorTab=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo)(_intellij_platform_core_Tabs_StyledDefaultTab__WEBPACK_IMPORTED_MODULE_1__.z)`
  font-size: 0.7rem;
  ${({theme})=>(0,_intellij_platform_core_Tabs_TabTheme__WEBPACK_IMPORTED_MODULE_2__.s)(editorTabTheme({theme}))};
`},"./src/Tabs/EditorTabs/StyledEditorTabs.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>StyledEditorTabs});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Tabs_TabTheme__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Tabs/TabTheme.ts"),_intellij_platform_core_Tabs_StyledDefaultTabs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Tabs/StyledDefaultTabs.ts"),_StyledEditorTab__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Tabs/EditorTabs/StyledEditorTab.ts");const StyledEditorTabs=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.zo)(_intellij_platform_core_Tabs_StyledDefaultTabs__WEBPACK_IMPORTED_MODULE_1__.f)`
  ${({theme})=>(0,_intellij_platform_core_Tabs_TabTheme__WEBPACK_IMPORTED_MODULE_2__.N)((0,_StyledEditorTab__WEBPACK_IMPORTED_MODULE_3__.K)({theme}))};
`},"./src/ToolWindowsImpl/DefaultToolWindows.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u:()=>DefaultToolWindows});var react=__webpack_require__("../../node_modules/react/index.js"),indexBy=__webpack_require__("./node_modules/ramda/es/indexBy.js"),useObjectRef=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),mergeProps=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),ToolWindows=__webpack_require__("./src/ToolWindows/ToolWindows.tsx"),ToolWindowsState=__webpack_require__("./src/ToolWindows/ToolWindowsState/ToolWindowsState.ts"),ToolWindowActionIds=__webpack_require__("./src/ToolWindowsImpl/ToolWindowActionIds.ts");const getActivateToolWindowActionId=id=>`Activate${id.replace(" ","")}Window`;function useToolWindowsActions({toolWindowsState,toolWindowsRef,getPresentation}){const isAnySideWindowWindowOpen=state=>Object.values(state.windows).some((({isVisible,viewMode})=>isVisible&&"float"!==(0,ToolWindowsState.Qy)(viewMode)));return[...Object.keys(toolWindowsState.windows).map((key=>`${key}`)).map(((id,index)=>{const{title,icon}=getPresentation?.(id)||{};return{id:getActivateToolWindowActionId(id),title:title||`${getOrdinal(index)} window`,icon,description:`Activate ${title||getOrdinal(index)} window`,actionPerformed:()=>{toolWindowsState.windows[id]?.isVisible&&!toolWindowsRef.current?.hasFocus(id)?toolWindowsRef.current?.focus(id):toolWindowsRef.current?.changeState((state=>state.toggle(id)))}}})),{id:ToolWindowActionIds.xm,title:isAnySideWindowWindowOpen(toolWindowsState)?"Hide All Windows":"Restore windows",actionPerformed:()=>{toolWindowsRef.current?.changeState((state=>isAnySideWindowWindowOpen(state)?state.hideAll():state.restoreWindows())),setTimeout((()=>{toolWindowsRef.current?.focusMainContent()}))}},{id:ToolWindowActionIds.Dw,title:"Jump to Last Tool Window",isDisabled:null==toolWindowsState.lastFocusedKey,actionPerformed:()=>{toolWindowsRef.current?.focusLastActiveWindow()}}]}function getOrdinal(n){let ord=["st","nd","rd"];return n+(null==ord[n%10-1]||[11,12,13].includes(n%100)?"th":ord[n%10-1])}try{useToolWindowsActions.displayName="useToolWindowsActions",useToolWindowsActions.__docgenInfo={description:"Provides default tool windows actions:\n- Hide all tool windows\n- Activate{id}Window action for each window\n- Jump to last tool window",displayName:"useToolWindowsActions",props:{toolWindowsState:{defaultValue:null,description:"",name:"toolWindowsState",required:!0,type:{name:"Readonly<ToolWindowsState>"}},toolWindowsRef:{defaultValue:null,description:"",name:"toolWindowsRef",required:!0,type:{name:"RefObject<ToolWindowRefValue>"}},getPresentation:{defaultValue:null,description:"Used when creating ActivateToolWindow action for each tool window.",name:"getPresentation",required:!1,type:{name:"((key: Key) => { title: string; icon: ReactNode; })"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ToolWindowsImpl/useToolWindowsActions.tsx#useToolWindowsActions"]={docgenInfo:useToolWindowsActions.__docgenInfo,name:"useToolWindowsActions",path:"src/ToolWindowsImpl/useToolWindowsActions.tsx#useToolWindowsActions"})}catch(__react_docgen_typescript_loader_error){}try{getActivateToolWindowActionId.displayName="getActivateToolWindowActionId",getActivateToolWindowActionId.__docgenInfo={description:"",displayName:"getActivateToolWindowActionId",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ToolWindowsImpl/useToolWindowsActions.tsx#getActivateToolWindowActionId"]={docgenInfo:getActivateToolWindowActionId.__docgenInfo,name:"getActivateToolWindowActionId",path:"src/ToolWindowsImpl/useToolWindowsActions.tsx#getActivateToolWindowActionId"})}catch(__react_docgen_typescript_loader_error){}var ActionsProvider=__webpack_require__("./src/ActionSystem/ActionsProvider.tsx"),TooltipTrigger=__webpack_require__("./src/Tooltip/TooltipTrigger.tsx"),ActionTooltip=__webpack_require__("./src/Tooltip/ActionTooltip.tsx"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const getToolWindowNumberFromShortcut=shortcut=>{const num="keyboard"===shortcut.type&&1===shortcut.firstKeyStroke.modifiers?.length&&["Alt","Meta","Control"].includes(shortcut.firstKeyStroke.modifiers[0])&&shortcut.firstKeyStroke.code.match(/^(Digit|Numpad)([0-9])$/)?.[2];return num?parseInt(num):null},StyledWrapper=styled_components_browser_esm.ZP.span.withConfig({displayName:"DefaultToolWindowToolbarButton__StyledWrapper",componentId:"sc-1dsisfo-0"})(["display:flex;"]),DefaultToolWindowToolbarButton=({id,title,icon,showNumber=!0})=>{const action=(0,ActionsProvider.BH)(getActivateToolWindowActionId(`${id}`)),number=action?.shortcuts?.map(getToolWindowNumberFromShortcut).find(Number.isInteger);return(0,jsx_runtime.jsx)(TooltipTrigger.a,{tooltip:(0,jsx_runtime.jsx)(ActionTooltip.M,{actionName:title,shortcut:action?.shortcut}),children:(0,jsx_runtime.jsxs)(StyledWrapper,{children:[icon," ",null!=number&&showNumber?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("u",{children:number}),": "]}):null,title]})})};DefaultToolWindowToolbarButton.displayName="DefaultToolWindowToolbarButton";try{DefaultToolWindowToolbarButton.displayName="DefaultToolWindowToolbarButton",DefaultToolWindowToolbarButton.__docgenInfo={description:"Default UI for the toolbar button (aka. stripe button) of the tool window.\n- Renders the title and icon for the tool window\n- Optionally shows the number before the title, if a numeric shortcut is set for the corresponding ActivateToolWindow\n  action, in the currently applied keymap.\n- Adds an Action Tooltip",displayName:"DefaultToolWindowToolbarButton",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"Key"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"ReactNode"}},showNumber:{defaultValue:{value:"true"},description:"",name:"showNumber",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ToolWindowsImpl/DefaultToolWindowToolbarButton.tsx#DefaultToolWindowToolbarButton"]={docgenInfo:DefaultToolWindowToolbarButton.__docgenInfo,name:"DefaultToolWindowToolbarButton",path:"src/ToolWindowsImpl/DefaultToolWindowToolbarButton.tsx#DefaultToolWindowToolbarButton"})}catch(__react_docgen_typescript_loader_error){}const DefaultToolWindows=react.forwardRef((function DefaultToolWindows({windows:toolWindows,toolWindowsState,showNumbers,...props},forwardedRef){const toolWindowsRef=(0,useObjectRef.B)(forwardedRef),windowById=(0,indexBy.Z)((({id})=>id),toolWindows),actions=useToolWindowsActions({toolWindowsRef,toolWindowsState,getPresentation:id=>windowById[id]});return(0,jsx_runtime.jsx)(ActionsProvider.DG,{actions,children:({shortcutHandlerProps})=>(0,jsx_runtime.jsx)(ToolWindows.n,{...props,ref:toolWindowsRef,toolWindowsState,windows:toolWindows.map((({id,icon,content,title})=>({id,toolbarButton:(0,jsx_runtime.jsx)(DefaultToolWindowToolbarButton,{id,icon,title,showNumber:showNumbers}),content}))),containerProps:(0,mergeProps.d)(props.containerProps||{},shortcutHandlerProps)})})}));try{DefaultToolWindows.displayName="DefaultToolWindows",DefaultToolWindows.__docgenInfo={description:"A wrapper around ToolWindows, which provides default actions. It also expects windows to have a `title` and an `icon`\ninstead of more generic `toolbarButton`. The `title` and `icon` are then used in toolbar button, and also in the\nactions that are dynamically created for each window to toggle/focus the tool window.",displayName:"DefaultToolWindows",props:{height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"Height<string | number>"}},containerProps:{defaultValue:null,description:"props to be passed to the container element.",name:"containerProps",required:!1,type:{name:'Omit<HTMLProps<HTMLDivElement>, "as">'}},minHeight:{defaultValue:null,description:"",name:"minHeight",required:!1,type:{name:"MinHeight<string | number>"}},margin:{defaultValue:null,description:"",name:"margin",required:!1,type:{name:"Margin<string | number>"}},hideToolWindowBars:{defaultValue:null,description:"Whether stripe buttons should be hidden or not.\n`hideToolStripes` UISettings in Intellij Platform",name:"hideToolWindowBars",required:!1,type:{name:"boolean"}},useWidescreenLayout:{defaultValue:null,description:"`wideScreenSupport` in UISettings in Intellij Platform",name:"useWidescreenLayout",required:!1,type:{name:"boolean"}},toolWindowsState:{defaultValue:null,description:"",name:"toolWindowsState",required:!0,type:{name:"Readonly<ToolWindowsState>"}},onToolWindowStateChange:{defaultValue:null,description:"",name:"onToolWindowStateChange",required:!0,type:{name:"(newState: ToolWindowsState) => void"}},mainContentMinWidth:{defaultValue:{value:"50"},description:"min width applied to the main content (children).",name:"mainContentMinWidth",required:!1,type:{name:"number"}},windows:{defaultValue:null,description:"",name:"windows",required:!0,type:{name:"DefaultToolWindow[]"}},showNumbers:{defaultValue:null,description:"",name:"showNumbers",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ToolWindowsImpl/DefaultToolWindows.tsx#DefaultToolWindows"]={docgenInfo:DefaultToolWindows.__docgenInfo,name:"DefaultToolWindows",path:"src/ToolWindowsImpl/DefaultToolWindows.tsx#DefaultToolWindows"})}catch(__react_docgen_typescript_loader_error){}},"./src/Tooltip/ActionHelpTooltip.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>ActionHelpTooltip});__webpack_require__("../../node_modules/react/index.js");var _intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Tooltip/Tooltip.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const ActionHelpTooltip=({actionName,helpText,shortcut,link,...tooltipProps})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__.u,{multiline:!0,...tooltipProps,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__.u.Header,{children:[actionName,shortcut&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__.u.Shortcut,{children:shortcut})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__.u.Description,{children:helpText}),link&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__.u.Link,{children:link})]});ActionHelpTooltip.displayName="ActionHelpTooltip";try{ActionHelpTooltip.displayName="ActionHelpTooltip",ActionHelpTooltip.__docgenInfo={description:'Tooltip of type "Action Help"',displayName:"ActionHelpTooltip",props:{actionName:{defaultValue:null,description:"",name:"actionName",required:!0,type:{name:"ReactNode"}},helpText:{defaultValue:null,description:"",name:"helpText",required:!0,type:{name:"ReactNode"}},shortcut:{defaultValue:null,description:"",name:"shortcut",required:!1,type:{name:"ReactNode"}},link:{defaultValue:null,description:"",name:"link",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},withPointer:{defaultValue:null,description:"Whether (and in what position) the arrow pointer should be shown.\nWhen using {@link TooltipTrigger } or {@link PositionedTooltipTrigger }, the position of the pointer is calculated\nbased on the target element, and a boolean value to define whether the arrow should be shown or not would suffice.\n\nTooltips with pointer have slight style difference.\n{@see https://www.figma.com/file/nfDfMAdV7j2fnQlpYNAOfP/IntelliJ-Platform-UI-Kit-(Community)?type=design&node-id=15-51&mode=design&t=7PplrxG8ZfXB4hIK-0}\n@example <Tooltip withPointer />\n// shows the pointer in the position controlled by {@link TooltipTrigger } or {@link PositionedTooltipTrigger }// If there is not `TooltipTrigger` or `PositionedTooltipTrigger`, the arrow is shown on top center by default.\n@example <Tooltip withPointer={{side: 'top', offset: 30}} />\n// shows the pointer on the top side, with horizontal offset of 30px from the left of tooltip, regardless\n// of whether `TooltipTrigger` or `PositionedTooltipTrigger` is used.\n@example <Tooltip withPointer={{side: 'left', offset: -30}} />\n// shows the pointer on the left side, with vertidcal offset of 30px from the bottom of the tooltip, regardless\n// of whether `TooltipTrigger` or `PositionedTooltipTrigger` is used.",name:"withPointer",required:!1,type:{name:"boolean | TooltipPointerPosition"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Tooltip/ActionHelpTooltip.tsx#ActionHelpTooltip"]={docgenInfo:ActionHelpTooltip.__docgenInfo,name:"ActionHelpTooltip",path:"src/Tooltip/ActionHelpTooltip.tsx#ActionHelpTooltip"})}catch(__react_docgen_typescript_loader_error){}},"./src/Tooltip/HelpTooltip.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>HelpTooltip});__webpack_require__("../../node_modules/react/index.js");var _intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Tooltip/Tooltip.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const HelpTooltip=({helpText,shortcut,link,...tooltipProps})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__.u,{multiline:!0,...tooltipProps,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__.u.Header,{children:helpText}),shortcut&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__.u.Shortcut,{children:shortcut})}),link&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__.u.Link,{children:link})]});HelpTooltip.displayName="HelpTooltip";try{HelpTooltip.displayName="HelpTooltip",HelpTooltip.__docgenInfo={description:'Tooltip of type "Help"',displayName:"HelpTooltip",props:{helpText:{defaultValue:null,description:"",name:"helpText",required:!0,type:{name:"ReactNode"}},shortcut:{defaultValue:null,description:"",name:"shortcut",required:!1,type:{name:"ReactNode"}},link:{defaultValue:null,description:"",name:"link",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},withPointer:{defaultValue:null,description:"Whether (and in what position) the arrow pointer should be shown.\nWhen using {@link TooltipTrigger } or {@link PositionedTooltipTrigger }, the position of the pointer is calculated\nbased on the target element, and a boolean value to define whether the arrow should be shown or not would suffice.\n\nTooltips with pointer have slight style difference.\n{@see https://www.figma.com/file/nfDfMAdV7j2fnQlpYNAOfP/IntelliJ-Platform-UI-Kit-(Community)?type=design&node-id=15-51&mode=design&t=7PplrxG8ZfXB4hIK-0}\n@example <Tooltip withPointer />\n// shows the pointer in the position controlled by {@link TooltipTrigger } or {@link PositionedTooltipTrigger }// If there is not `TooltipTrigger` or `PositionedTooltipTrigger`, the arrow is shown on top center by default.\n@example <Tooltip withPointer={{side: 'top', offset: 30}} />\n// shows the pointer on the top side, with horizontal offset of 30px from the left of tooltip, regardless\n// of whether `TooltipTrigger` or `PositionedTooltipTrigger` is used.\n@example <Tooltip withPointer={{side: 'left', offset: -30}} />\n// shows the pointer on the left side, with vertidcal offset of 30px from the bottom of the tooltip, regardless\n// of whether `TooltipTrigger` or `PositionedTooltipTrigger` is used.",name:"withPointer",required:!1,type:{name:"boolean | TooltipPointerPosition"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Tooltip/HelpTooltip.tsx#HelpTooltip"]={docgenInfo:HelpTooltip.__docgenInfo,name:"HelpTooltip",path:"src/Tooltip/HelpTooltip.tsx#HelpTooltip"})}catch(__react_docgen_typescript_loader_error){}},"./src/Tooltip/PositionedTooltipTrigger.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>PositionedTooltipTrigger});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_stately_tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-stately/tooltip/dist/module.js"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/useOverlayPosition.mjs"),_TooltipTriggerAndOverlay__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/Tooltip/TooltipTriggerAndOverlay.tsx"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const PositionedTooltipTrigger=({tooltip,children,delay=500,offset=8,showOnFocus,triggerRef:inputTriggerRef,...props})=>{const state=(0,_react_stately_tooltip__WEBPACK_IMPORTED_MODULE_2__.O)({...props,delay}),overlayRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),fallbackRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__.B)(inputTriggerRef),triggerRef=inputTriggerRef||fallbackRef,positionAria=(0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_4__.t)({...props,overlayRef,targetRef:triggerRef,offset,isOpen:state.isOpen,onClose:state.close});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{state.isOpen&&requestAnimationFrame(positionAria.updatePosition)}),[state.isOpen]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_TooltipTriggerAndOverlay__WEBPACK_IMPORTED_MODULE_5__.t,{tooltip,positionAria,trigger:children,state,overlayRef,triggerRef,showOnFocus,isDisabled:props.isDisabled})};PositionedTooltipTrigger.displayName="PositionedTooltipTrigger";try{PositionedTooltipTrigger.displayName="PositionedTooltipTrigger",PositionedTooltipTrigger.__docgenInfo={description:"Sets {@param tooltip} for its {@param children}. Tooltip will be positioned based relative to the trigger.\nThe default tooltip positioning is based on cursor, which is implemented by {@link TooltipTrigger }",displayName:"PositionedTooltipTrigger",props:{tooltip:{defaultValue:null,description:"Tooltip content. The value should be an element of type {@link Tooltip }.",name:"tooltip",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},children:{defaultValue:null,description:"Either a focusable component, or a render function which accepts trigger props and passes it to some component.",name:"children",required:!0,type:{name:"ReactNode | ((props: HTMLAttributes<HTMLElement> & { ref: RefObject<T>; }) => ReactNode)"}},showOnFocus:{defaultValue:null,description:"Whether to show the tooltip on trigger's focus. By default, tooltip is shown only when the trigger\nis hovered, but it can improve accessibility to show the tooltip on focus as well.",name:"showOnFocus",required:!1,type:{name:"boolean"}},triggerRef:{defaultValue:null,description:"Ref to trigger.\nIf not provided, a ref will be created internally.\nUseful for when a ref to the trigger is necessary where PositionedTooltipTrigger\nis used.",name:"triggerRef",required:!1,type:{name:"RefObject<T>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Tooltip/PositionedTooltipTrigger.tsx#PositionedTooltipTrigger"]={docgenInfo:PositionedTooltipTrigger.__docgenInfo,name:"PositionedTooltipTrigger",path:"src/Tooltip/PositionedTooltipTrigger.tsx#PositionedTooltipTrigger"})}catch(__react_docgen_typescript_loader_error){}},"./src/Tooltip/ValidationTooltip.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>ValidationTooltip});__webpack_require__("../../node_modules/react/index.js");var _intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Tooltip/Tooltip.tsx"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledValidationTooltip=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_3__.u)`
  box-shadow: none;
  padding: 0.25rem 0.5rem; // from ComponentValidator class in the reference impl
  max-width: ${({theme})=>`${theme.value("ValidationTooltip.maxWidth")}px`};
  background: ${({theme})=>theme.color("ValidationTooltip.errorBackground")};
  border: 1px solid
    ${({theme})=>theme.color("ValidationTooltip.errorBorderColor")};
`,StyledWarningValidationTooltip=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(StyledValidationTooltip)`
  background: ${({theme})=>theme.color("ValidationTooltip.warningBackground")};
  border-color: ${({theme})=>theme.color("ValidationTooltip.warningBorderColor")};
`,ValidationTooltip=({type="error",children})=>{const Component="error"===type?StyledValidationTooltip:StyledWarningValidationTooltip;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Component,{multiline:!0,children})};ValidationTooltip.displayName="ValidationTooltip";try{ValidationTooltip.displayName="ValidationTooltip",ValidationTooltip.__docgenInfo={description:"Tooltip to be used for validation error messages",displayName:"ValidationTooltip",props:{type:{defaultValue:{value:"error"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"warning"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Tooltip/ValidationTooltip.tsx#ValidationTooltip"]={docgenInfo:ValidationTooltip.__docgenInfo,name:"ValidationTooltip",path:"src/Tooltip/ValidationTooltip.tsx#ValidationTooltip"})}catch(__react_docgen_typescript_loader_error){}},"./src/TreeActions/useTreeActions.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>useTreeActions});__webpack_require__("../../node_modules/react/index.js");var _intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/ActionSystem/CommonActionIds.ts"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Icon/PlatformIcon.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function useTreeActions({treeRef}){return[{id:_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_2__.$.EXPAND_ALL,title:"Expand All",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_3__.vq,{icon:"actions/expandall"}),actionPerformed:()=>{treeRef.current?.expandAll()}},{id:_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_2__.$.COLLAPSE_ALL,title:"Collapse All",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_3__.vq,{icon:"actions/collapseall"}),actionPerformed:()=>{treeRef.current?.collapseAll()}},{id:_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_2__.$.EXPAND_SELECTION,title:"Expand Selection",actionPerformed:()=>{treeRef.current?.expandSelection()}},{id:_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_2__.$.SHRINK_SELECTION,title:"Shrink Selection",actionPerformed:()=>{treeRef.current?.shrinkSelection()}}]}try{useTreeActions.displayName="useTreeActions",useTreeActions.__docgenInfo={description:"Returns action definitions object for common tree actions\nTODO: add example in docs",displayName:"useTreeActions",props:{treeRef:{defaultValue:null,description:"",name:"treeRef",required:!0,type:{name:"RefObject<TreeRefValue>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/TreeActions/useTreeActions.tsx#useTreeActions"]={docgenInfo:useTreeActions.__docgenInfo,name:"useTreeActions",path:"src/TreeActions/useTreeActions.tsx#useTreeActions"})}catch(__react_docgen_typescript_loader_error){}},"./src/story-helpers.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>styledComponentsControlsExclude});const styledComponentsControlsExclude=["theme","as","forwardedAs","ref"]},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!../example-app/src/jetbrains-mono-font.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"@import url(https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@100..800&display=swap);"]),___CSS_LOADER_EXPORT___.push([module.id,"\n","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=":module=>{module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII="},"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAL0lEQVQoz2NgCD3x//9/BhBYBWdhgFVAiVW4JBFKGIa4AqD0//9D3pt4I4tAdAMAHTQ/j5Zom30AAAAASUVORK5CYII=":module=>{module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAL0lEQVQoz2NgCD3x//9/BhBYBWdhgFVAiVW4JBFKGIa4AqD0//9D3pt4I4tAdAMAHTQ/j5Zom30AAAAASUVORK5CYII="},"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAz0lEQVRIx2NgYGBY/R8I/vx5eelX3n82IJ9FxGf6tksvf/8FiTMQAcAGQMDvSwu09abffY8QYSAScNk45G198eX//yev73/4///701eh//kZSARckrNBRvz//+8+6ZohwCzjGNjdgQxkAg7B9WADeBjIBqtJCbhRA0YNoIkBSNmaPEMoNmA0FkYNoFKhapJ6FGyAH3nauaSmPfwI0v/3OukVi0CIZ+F25KrtYcx/CTIy0e+rC7R1Z4KMICVTQQ14feVXIbR695u14+Ir4gwAAD49E54wc1kWAAAAAElFTkSuQmCC":module=>{module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAz0lEQVRIx2NgYGBY/R8I/vx5eelX3n82IJ9FxGf6tksvf/8FiTMQAcAGQMDvSwu09abffY8QYSAScNk45G198eX//yev73/4///701eh//kZSARckrNBRvz//+8+6ZohwCzjGNjdgQxkAg7B9WADeBjIBqtJCbhRA0YNoIkBSNmaPEMoNmA0FkYNoFKhapJ6FGyAH3nauaSmPfwI0v/3OukVi0CIZ+F25KrtYcx/CTIy0e+rC7R1Z4KMICVTQQ14feVXIbR695u14+Ir4gwAAD49E54wc1kWAAAAAElFTkSuQmCC"},"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC4wMzY0IDQuMDEwNDJINC4wMDc3OUw0LjAwNzc5IDMyLjAyODZINDguMDM2NFY0LjAxMDQyWk00LjAwNzc5IDAuMDA3ODEyNUMxLjc5NzIxIDAuMDA3ODEyNSAwLjAwNTE4Nzk5IDEuNzk5ODQgMC4wMDUxODc5OSA0LjAxMDQyVjMyLjAyODZDMC4wMDUxODc5OSAzNC4yMzkyIDEuNzk3MjEgMzYuMDMxMiA0LjAwNzc5IDM2LjAzMTJINDguMDM2NEM1MC4yNDcgMzYuMDMxMiA1Mi4wMzkgMzQuMjM5MiA1Mi4wMzkgMzIuMDI4NlY0LjAxMDQyQzUyLjAzOSAxLjc5OTg0IDUwLjI0NyAwLjAwNzgxMjUgNDguMDM2NCAwLjAwNzgxMjVINC4wMDc3OVpNOC4wMTA0MiA4LjAxMzAySDEyLjAxM1YxMi4wMTU2SDguMDEwNDJWOC4wMTMwMlpNMjAuMDE4MiA4LjAxMzAySDE2LjAxNTZWMTIuMDE1NkgyMC4wMTgyVjguMDEzMDJaTTI0LjAyMDggOC4wMTMwMkgyOC4wMjM0VjEyLjAxNTZIMjQuMDIwOFY4LjAxMzAyWk0zNi4wMjg2IDguMDEzMDJIMzIuMDI2VjEyLjAxNTZIMzYuMDI4NlY4LjAxMzAyWk00MC4wMzEyIDguMDEzMDJINDQuMDMzOVYxMi4wMTU2SDQwLjAzMTJWOC4wMTMwMlpNMTYuMDE1NiAxNi4wMTgySDguMDEwNDJWMjAuMDIwOEgxNi4wMTU2VjE2LjAxODJaTTIwLjAxODIgMTYuMDE4MkgyNC4wMjA4VjIwLjAyMDhIMjAuMDE4MlYxNi4wMTgyWk0zMi4wMjYgMTYuMDE4MkgyOC4wMjM0VjIwLjAyMDhIMzIuMDI2VjE2LjAxODJaTTQ0LjAzMzkgMTYuMDE4MlYyMC4wMjA4SDM2LjAyODZWMTYuMDE4Mkg0NC4wMzM5Wk0xMi4wMTMgMjQuMDIzNEg4LjAxMDQyVjI4LjAyNkgxMi4wMTNWMjQuMDIzNFpNMTYuMDE1NiAyNC4wMjM0SDM2LjAyODZWMjguMDI2SDE2LjAxNTZWMjQuMDIzNFpNNDQuMDMzOSAyNC4wMjM0SDQwLjAzMTJWMjguMDI2SDQ0LjAzMzlWMjQuMDIzNFoiIGZpbGw9IiM0MjQyNDIiLz4NCjwvZz4NCjxkZWZzPg0KPGNsaXBQYXRoIGlkPSJjbGlwMCI+DQo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+DQo8L2NsaXBQYXRoPg0KPC9kZWZzPg0KPC9zdmc+DQo=":module=>{module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC4wMzY0IDQuMDEwNDJINC4wMDc3OUw0LjAwNzc5IDMyLjAyODZINDguMDM2NFY0LjAxMDQyWk00LjAwNzc5IDAuMDA3ODEyNUMxLjc5NzIxIDAuMDA3ODEyNSAwLjAwNTE4Nzk5IDEuNzk5ODQgMC4wMDUxODc5OSA0LjAxMDQyVjMyLjAyODZDMC4wMDUxODc5OSAzNC4yMzkyIDEuNzk3MjEgMzYuMDMxMiA0LjAwNzc5IDM2LjAzMTJINDguMDM2NEM1MC4yNDcgMzYuMDMxMiA1Mi4wMzkgMzQuMjM5MiA1Mi4wMzkgMzIuMDI4NlY0LjAxMDQyQzUyLjAzOSAxLjc5OTg0IDUwLjI0NyAwLjAwNzgxMjUgNDguMDM2NCAwLjAwNzgxMjVINC4wMDc3OVpNOC4wMTA0MiA4LjAxMzAySDEyLjAxM1YxMi4wMTU2SDguMDEwNDJWOC4wMTMwMlpNMjAuMDE4MiA4LjAxMzAySDE2LjAxNTZWMTIuMDE1NkgyMC4wMTgyVjguMDEzMDJaTTI0LjAyMDggOC4wMTMwMkgyOC4wMjM0VjEyLjAxNTZIMjQuMDIwOFY4LjAxMzAyWk0zNi4wMjg2IDguMDEzMDJIMzIuMDI2VjEyLjAxNTZIMzYuMDI4NlY4LjAxMzAyWk00MC4wMzEyIDguMDEzMDJINDQuMDMzOVYxMi4wMTU2SDQwLjAzMTJWOC4wMTMwMlpNMTYuMDE1NiAxNi4wMTgySDguMDEwNDJWMjAuMDIwOEgxNi4wMTU2VjE2LjAxODJaTTIwLjAxODIgMTYuMDE4MkgyNC4wMjA4VjIwLjAyMDhIMjAuMDE4MlYxNi4wMTgyWk0zMi4wMjYgMTYuMDE4MkgyOC4wMjM0VjIwLjAyMDhIMzIuMDI2VjE2LjAxODJaTTQ0LjAzMzkgMTYuMDE4MlYyMC4wMjA4SDM2LjAyODZWMTYuMDE4Mkg0NC4wMzM5Wk0xMi4wMTMgMjQuMDIzNEg4LjAxMDQyVjI4LjAyNkgxMi4wMTNWMjQuMDIzNFpNMTYuMDE1NiAyNC4wMjM0SDM2LjAyODZWMjguMDI2SDE2LjAxNTZWMjQuMDIzNFpNNDQuMDMzOSAyNC4wMjM0SDQwLjAzMTJWMjguMDI2SDQ0LjAzMzlWMjQuMDIzNFoiIGZpbGw9IiM0MjQyNDIiLz4NCjwvZz4NCjxkZWZzPg0KPGNsaXBQYXRoIGlkPSJjbGlwMCI+DQo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+DQo8L2NsaXBQYXRoPg0KPC9kZWZzPg0KPC9zdmc+DQo="},"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC4wMzY0IDQuMDEwNDJINC4wMDc3OUw0LjAwNzc5IDMyLjAyODZINDguMDM2NFY0LjAxMDQyWk00LjAwNzc5IDAuMDA3ODEyNUMxLjc5NzIxIDAuMDA3ODEyNSAwLjAwNTE4Nzk5IDEuNzk5ODQgMC4wMDUxODc5OSA0LjAxMDQyVjMyLjAyODZDMC4wMDUxODc5OSAzNC4yMzkyIDEuNzk3MjEgMzYuMDMxMiA0LjAwNzc5IDM2LjAzMTJINDguMDM2NEM1MC4yNDcgMzYuMDMxMiA1Mi4wMzkgMzQuMjM5MiA1Mi4wMzkgMzIuMDI4NlY0LjAxMDQyQzUyLjAzOSAxLjc5OTg0IDUwLjI0NyAwLjAwNzgxMjUgNDguMDM2NCAwLjAwNzgxMjVINC4wMDc3OVpNOC4wMTA0MiA4LjAxMzAySDEyLjAxM1YxMi4wMTU2SDguMDEwNDJWOC4wMTMwMlpNMjAuMDE4MiA4LjAxMzAySDE2LjAxNTZWMTIuMDE1NkgyMC4wMTgyVjguMDEzMDJaTTI0LjAyMDggOC4wMTMwMkgyOC4wMjM0VjEyLjAxNTZIMjQuMDIwOFY4LjAxMzAyWk0zNi4wMjg2IDguMDEzMDJIMzIuMDI2VjEyLjAxNTZIMzYuMDI4NlY4LjAxMzAyWk00MC4wMzEyIDguMDEzMDJINDQuMDMzOVYxMi4wMTU2SDQwLjAzMTJWOC4wMTMwMlpNMTYuMDE1NiAxNi4wMTgySDguMDEwNDJWMjAuMDIwOEgxNi4wMTU2VjE2LjAxODJaTTIwLjAxODIgMTYuMDE4MkgyNC4wMjA4VjIwLjAyMDhIMjAuMDE4MlYxNi4wMTgyWk0zMi4wMjYgMTYuMDE4MkgyOC4wMjM0VjIwLjAyMDhIMzIuMDI2VjE2LjAxODJaTTQ0LjAzMzkgMTYuMDE4MlYyMC4wMjA4SDM2LjAyODZWMTYuMDE4Mkg0NC4wMzM5Wk0xMi4wMTMgMjQuMDIzNEg4LjAxMDQyVjI4LjAyNkgxMi4wMTNWMjQuMDIzNFpNMTYuMDE1NiAyNC4wMjM0SDM2LjAyODZWMjguMDI2SDE2LjAxNTZWMjQuMDIzNFpNNDQuMDMzOSAyNC4wMjM0SDQwLjAzMTJWMjguMDI2SDQ0LjAzMzlWMjQuMDIzNFoiIGZpbGw9IiNDNUM1QzUiLz4NCjwvZz4NCjxkZWZzPg0KPGNsaXBQYXRoIGlkPSJjbGlwMCI+DQo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+DQo8L2NsaXBQYXRoPg0KPC9kZWZzPg0KPC9zdmc+DQo=":module=>{module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC4wMzY0IDQuMDEwNDJINC4wMDc3OUw0LjAwNzc5IDMyLjAyODZINDguMDM2NFY0LjAxMDQyWk00LjAwNzc5IDAuMDA3ODEyNUMxLjc5NzIxIDAuMDA3ODEyNSAwLjAwNTE4Nzk5IDEuNzk5ODQgMC4wMDUxODc5OSA0LjAxMDQyVjMyLjAyODZDMC4wMDUxODc5OSAzNC4yMzkyIDEuNzk3MjEgMzYuMDMxMiA0LjAwNzc5IDM2LjAzMTJINDguMDM2NEM1MC4yNDcgMzYuMDMxMiA1Mi4wMzkgMzQuMjM5MiA1Mi4wMzkgMzIuMDI4NlY0LjAxMDQyQzUyLjAzOSAxLjc5OTg0IDUwLjI0NyAwLjAwNzgxMjUgNDguMDM2NCAwLjAwNzgxMjVINC4wMDc3OVpNOC4wMTA0MiA4LjAxMzAySDEyLjAxM1YxMi4wMTU2SDguMDEwNDJWOC4wMTMwMlpNMjAuMDE4MiA4LjAxMzAySDE2LjAxNTZWMTIuMDE1NkgyMC4wMTgyVjguMDEzMDJaTTI0LjAyMDggOC4wMTMwMkgyOC4wMjM0VjEyLjAxNTZIMjQuMDIwOFY4LjAxMzAyWk0zNi4wMjg2IDguMDEzMDJIMzIuMDI2VjEyLjAxNTZIMzYuMDI4NlY4LjAxMzAyWk00MC4wMzEyIDguMDEzMDJINDQuMDMzOVYxMi4wMTU2SDQwLjAzMTJWOC4wMTMwMlpNMTYuMDE1NiAxNi4wMTgySDguMDEwNDJWMjAuMDIwOEgxNi4wMTU2VjE2LjAxODJaTTIwLjAxODIgMTYuMDE4MkgyNC4wMjA4VjIwLjAyMDhIMjAuMDE4MlYxNi4wMTgyWk0zMi4wMjYgMTYuMDE4MkgyOC4wMjM0VjIwLjAyMDhIMzIuMDI2VjE2LjAxODJaTTQ0LjAzMzkgMTYuMDE4MlYyMC4wMjA4SDM2LjAyODZWMTYuMDE4Mkg0NC4wMzM5Wk0xMi4wMTMgMjQuMDIzNEg4LjAxMDQyVjI4LjAyNkgxMi4wMTNWMjQuMDIzNFpNMTYuMDE1NiAyNC4wMjM0SDM2LjAyODZWMjguMDI2SDE2LjAxNTZWMjQuMDIzNFpNNDQuMDMzOSAyNC4wMjM0SDQwLjAzMTJWMjguMDI2SDQ0LjAzMzlWMjQuMDIzNFoiIGZpbGw9IiNDNUM1QzUiLz4NCjwvZz4NCjxkZWZzPg0KPGNsaXBQYXRoIGlkPSJjbGlwMCI+DQo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+DQo8L2NsaXBQYXRoPg0KPC9kZWZzPg0KPC9zdmc+DQo="}}]);
//# sourceMappingURL=demo-stories.3be2860c.iframe.bundle.js.map