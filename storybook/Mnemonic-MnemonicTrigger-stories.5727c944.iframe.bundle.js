"use strict";(self.webpackChunk_intellij_platform_core=self.webpackChunk_intellij_platform_core||[]).push([[3623],{"./src/Mnemonic/MnemonicTrigger.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Multiple:()=>Multiple,NonTextContent:()=>NonTextContent,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("../../node_modules/react/index.js");var _intellij_platform_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Mnemonic/MnemonicTrigger.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledContainer=_intellij_platform_core__WEBPACK_IMPORTED_MODULE_2__.zo.div`
  color: ${({theme})=>theme.color("*.foreground")};
`,__WEBPACK_DEFAULT_EXPORT__={title:"Components/Mnemonic",component:_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_3__.Y,args:{children:"Disconnect",mnemonic:"D",onTriggered:()=>alert("Triggered!")},render:props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledContainer,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_3__.Y,{...props})}),argTypes:{}},Default={},NonTextContent={args:{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_3__.i,{children:"Disconnect"})})}},Multiple={render:()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledContainer,{style:{display:"flex",gap:"1rem"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_3__.Y,{mnemonic:"C",onTriggered:()=>alert('Triggered "Cancel"'),children:"Cancel"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_3__.Y,{mnemonic:"D",onTriggered:()=>alert('Triggered "Disconnect"'),children:"Disconnect"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_3__.Y,{mnemonic:"T",onTriggered:()=>alert('Triggered "Terminate"'),children:"Terminate"})})]})};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}},NonTextContent.parameters={...NonTextContent.parameters,docs:{...NonTextContent.parameters?.docs,source:{originalSource:"{\n  args: {\n    children: <span>\n        <MnemonicText>Disconnect</MnemonicText>\n      </span>\n  }\n}",...NonTextContent.parameters?.docs?.source}}},Multiple.parameters={...Multiple.parameters,docs:{...Multiple.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    return <StyledContainer style={{\n      display: "flex",\n      gap: "1rem"\n    }}>\n        <span>\n          <MnemonicTrigger mnemonic="C" onTriggered={() => alert(\'Triggered "Cancel"\')}>\n            Cancel\n          </MnemonicTrigger>\n        </span>\n        <span>\n          <MnemonicTrigger mnemonic="D" onTriggered={() => alert(\'Triggered "Disconnect"\')}>\n            Disconnect\n          </MnemonicTrigger>\n        </span>\n        <span>\n          <MnemonicTrigger mnemonic="T" onTriggered={() => alert(\'Triggered "Terminate"\')}>\n            Terminate\n          </MnemonicTrigger>\n        </span>\n      </StyledContainer>;\n  }\n}',...Multiple.parameters?.docs?.source}}};const __namedExportsOrder=["Default","NonTextContent","Multiple"]},"./src/Mnemonic/MnemonicTrigger.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>MnemonicTrigger,i:()=>MnemonicText});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_utils_useEventCallback__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/useEventCallback.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const MnemonicContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({character:null,active:!1,rendered:()=>{}}),MnemonicTrigger=({children,mnemonic,isDisabled,onTriggered:onTriggeredProp=(()=>{})})=>{const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),onTriggered=(0,_intellij_platform_core_utils_useEventCallback__WEBPACK_IMPORTED_MODULE_2__.$)(onTriggeredProp),[active,setActive]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),keydownListener=(0,_intellij_platform_core_utils_useEventCallback__WEBPACK_IMPORTED_MODULE_2__.$)((e=>{if(!isDisabled){if(active&&!e.repeat){const character=e.code.match(/Key([A-Z])/)?.[1];character&&character.toLowerCase()===mnemonic.toLowerCase()&&onTriggered()}"Alt"===e.key&&ref.current&&function isAccessible(element){return!element.closest("[aria-hidden]")&&null!==element.parentElement&&function isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}(element.parentElement)}(ref.current)&&setActive(!0)}}));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{function onBlur(){setActive(!1)}function keyupListener(e){"Alt"===e.key&&setActive(!1)}return document.addEventListener("keydown",keydownListener),document.addEventListener("keyup",keyupListener),window.addEventListener("blur",onBlur),()=>{document.removeEventListener("keydown",keydownListener),document.removeEventListener("keyup",keyupListener),window.removeEventListener("blur",onBlur)}}),[]);const renderedMnemonicRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)("");return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const timerId=setTimeout((()=>{renderedMnemonicRef.current!==mnemonic&&console.warn(`Mnemonic ${mnemonic} was set but not rendered to the user. \nMake sure the specified character is rendered directly in MnemonicTrigger, or wrapped by MnemonicText inside MnemonicTrigger children. \nElement:`,ref.current?.parentElement)}));return()=>{clearTimeout(timerId)}}),[mnemonic]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(MnemonicContext.Provider,{value:{character:mnemonic,active,rendered:()=>{renderedMnemonicRef.current=mnemonic}},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{hidden:!0,ref}),"string"==typeof children?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(MnemonicText,{children}):children]})};function MnemonicText({children}){const{character,active,rendered}=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MnemonicContext);if(character){const index=children.toLowerCase().indexOf(character.toLowerCase()),found=index>-1;if(found&&rendered(),found&&active)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[children.slice(0,index),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("u",{children:children.slice(index,index+1)}),children.slice(index+1)]})}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children})}MnemonicTrigger.displayName="MnemonicTrigger";try{MnemonicText.displayName="MnemonicText",MnemonicText.__docgenInfo={description:"Used inside MnemonicTrigger children, when the direct child can't be a string.",displayName:"MnemonicText",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Mnemonic/MnemonicTrigger.tsx#MnemonicText"]={docgenInfo:MnemonicText.__docgenInfo,name:"MnemonicText",path:"src/Mnemonic/MnemonicTrigger.tsx#MnemonicText"})}catch(__react_docgen_typescript_loader_error){}try{MnemonicTrigger.displayName="MnemonicTrigger",MnemonicTrigger.__docgenInfo={description:"",displayName:"MnemonicTrigger",props:{mnemonic:{defaultValue:null,description:"Character to be used as {@link https://jetbrains.design/intellij/principles/mnemonics/ mnemonic}.",name:"mnemonic",required:!0,type:{name:"string"}},onTriggered:{defaultValue:null,description:"Called when mnemonic key is pressed with the activator key",name:"onTriggered",required:!1,type:{name:"(() => void)"}},isDisabled:{defaultValue:null,description:"Whether the mnemonic is disabled. Useful when setting mnemonic on disable-able components, to just pass\nisDisabled prop down to MnemonicTrigger",name:"isDisabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Mnemonic/MnemonicTrigger.tsx#MnemonicTrigger"]={docgenInfo:MnemonicTrigger.__docgenInfo,name:"MnemonicTrigger",path:"src/Mnemonic/MnemonicTrigger.tsx#MnemonicTrigger"})}catch(__react_docgen_typescript_loader_error){}},"./src/styled.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Fg:()=>useTheme,iv:()=>css,zo:()=>styled});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const styled=styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP,useTheme=styled_components__WEBPACK_IMPORTED_MODULE_0__.Fg,css=styled_components__WEBPACK_IMPORTED_MODULE_0__.iv;styled_components__WEBPACK_IMPORTED_MODULE_0__.Sf},"./src/utils/useEventCallback.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>useEventCallback});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js");function useEventCallback(fn){let ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{ref.current=fn}));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(((...args)=>ref.current?.apply(null,args)),[])}}}]);