(self.webpackChunk_intellij_platform_core=self.webpackChunk_intellij_platform_core||[]).push([[4650,9761],{"./src/demo.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ExampleApp:()=>ExampleApp,__namedExportsOrder:()=>__namedExportsOrder,default:()=>demo_stories});var react=__webpack_require__("../../node_modules/react/index.js"),story_helpers=__webpack_require__("./src/story-helpers.tsx"),path_browserify=__webpack_require__("../../node_modules/path-browserify/index.js"),path_browserify_default=__webpack_require__.n(path_browserify),isomorphic_git=__webpack_require__("../../node_modules/isomorphic-git/index.js"),web=__webpack_require__("../../node_modules/isomorphic-git/http/web/index.js"),styled=__webpack_require__("./src/styled.ts"),LoadingSpinner=__webpack_require__("./src/LoadingSpinner/LoadingSpinner.tsx"),KeymapProvider=__webpack_require__("./src/ActionSystem/KeymapProvider.tsx"),ModalWindow=__webpack_require__("./src/ModalWindow/ModalWindow.tsx");const WindowsContext=react.createContext({open:()=>{throw new Error("WindowManager not found. Wrap your application with WindowManager to be able to open windows imperatively")}}),useWindowManager=()=>(0,react.useContext)(WindowsContext),WindowManager=({children})=>{const[windows,setWindows]=(0,react.useState)([]),newKeyRef=(0,react.useRef)(0),api=(0,react.useMemo)((()=>({open:function(content){return new Promise((resolve=>{newKeyRef.current++;const close=result=>{setWindows((currentWindows=>currentWindows.filter((aWindow=>aWindow!==window)))),requestAnimationFrame((()=>{resolve(result)}))},window=react.createElement(ModalWindow.Gq.Provider,{value:{onClose:()=>{close()}},key:newKeyRef.current},"function"==typeof content?content({close}):content);setWindows((currentWindows=>currentWindows.concat(window)))}))}})),[]);return react.createElement(WindowsContext.Provider,{value:api},children,windows)};WindowManager.__docgenInfo={description:"Enables imperative API (via {@link useWindowManager}) for opening windows.\nIt renders windows in a portal appended to `body`, unless `disablePortal` is `true`.",methods:[],displayName:"WindowManager",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""}}};var PopupManager=__webpack_require__("./src/Popup/PopupManager.tsx"),esm_react=__webpack_require__("../../node_modules/jotai/esm/react.mjs"),Button=__webpack_require__("./src/Button/Button.tsx"),AlertDialog=__webpack_require__("./src/AlertDialog/AlertDialog.tsx");var BalloonManager=__webpack_require__("./src/Balloon/BalloonManager.tsx"),DefaultToolWindows=__webpack_require__("./src/ToolWindowsImpl/DefaultToolWindows.tsx"),ActionsProvider=__webpack_require__("./src/ActionSystem/ActionsProvider.tsx"),ToolWindowActionIds=__webpack_require__("./src/ToolWindowsImpl/ToolWindowActionIds.ts"),useLatest=__webpack_require__("./src/utils/useLatest.ts"),ContextMenuContainer=__webpack_require__("./src/Menu/ContextMenuContainer.tsx"),Menu=__webpack_require__("./src/Menu/Menu.tsx"),Item=__webpack_require__("./src/Collections/Item.ts"),EditorTabs=__webpack_require__("./src/Tabs/EditorTabs/EditorTabs.tsx"),PlatformIcon=__webpack_require__("./src/Icon/PlatformIcon.tsx"),TabItem=__webpack_require__("./src/Tabs/TabItem.tsx"),MenuItemLayout=__webpack_require__("./src/Menu/MenuItemLayout.tsx"),TooltipTrigger=__webpack_require__("./src/Tooltip/TooltipTrigger.tsx"),ActionTooltip=__webpack_require__("./src/Tooltip/ActionTooltip.tsx"),EditorTabContent=__webpack_require__("./src/Tabs/EditorTabs/EditorTabContent.tsx"),TabCloseButton=__webpack_require__("./src/Tabs/TabCloseButton.tsx"),MenuOverlayFromOrigin=__webpack_require__("./src/Menu/MenuOverlayFromOrigin.tsx"),useActionGroup=__webpack_require__("./src/ActionSystem/useActionGroup.tsx"),ActionsMenu=__webpack_require__("./src/ActionSystem/components/ActionsMenu.tsx");const ActionGroupMenu=({actionGroup,...props})=>react.createElement(ActionsMenu.$,{"aria-label":actionGroup.title,actions:actionGroup.children,...props});ActionGroupMenu.__docgenInfo={description:"Renders children of an action group as a menu.",methods:[],displayName:"ActionGroupMenu",props:{actionGroup:{required:!0,tsType:{name:"Readonly",elements:[{name:"MutableActionGroup"}],raw:"Readonly<MutableActionGroup>"},description:""}}};var mergeProps=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),editor_main=__webpack_require__("../../node_modules/monaco-editor/esm/vs/editor/editor.main.js"),vanilla=__webpack_require__("../../node_modules/jotai/esm/vanilla.mjs");const DIR_ICON="nodes/folder",extensionIconMap={editorconfig:"nodes/editorconfig",js:"fileTypes/javaScript",gitignore:"vcs/ignore_file",archive:"fileTypes/archive",as:"fileTypes/as",config:"fileTypes/config",css:"fileTypes/css",dtd:"fileTypes/dtd",hpr:"fileTypes/hprof",htaccess:"fileTypes/htaccess",html:"fileTypes/html",idl:"fileTypes/idl",java:"fileTypes/java",jfr:"fileTypes/jfr",json:"fileTypes/json",jsp:"fileTypes/jsp",jspx:"fileTypes/jspx",manifest:"fileTypes/manifest",properties:"fileTypes/properties",txt:"fileTypes/text",wsdl:"fileTypes/wsdlFile",xhtml:"fileTypes/xhtml",xml:"fileTypes/xml",xsd:"fileTypes/xsdFile",yaml:"fileTypes/yaml"},getIconForFile=filepath=>{const extension=getExtension(filepath);return extensionIconMap[extension]||"fileTypes/text"},getExtension=filepath=>filepath.split(".").pop()||"";function getParentPaths(filepath,upperLimit=path_browserify_default().sep){return getParentPathsRecursive(filepath,upperLimit)}function getParentPathsRecursive(filepath,upperLimit,previousPaths=[]){const dirname=path_browserify_default().dirname(filepath);return dirname!==upperLimit?[dirname].concat(getParentPathsRecursive(dirname,upperLimit,previousPaths)):previousPaths}var styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const Img=({darkSrc,...props})=>(0,styled_components_browser_esm.DP)().dark?react.createElement("img",{...props,src:darkSrc||props.src}):react.createElement("img",props);Img.__docgenInfo={description:"Same as default `img`, but theme aware. Meaning that you can specify different sources for normal and dark mode.",methods:[],displayName:"Img",props:{darkSrc:{required:!1,tsType:{name:"string"},description:"src for when a dark theme is active. if `darkSrc` doesn't have a non-empty string value, src will be used both\nfor dark and light themes."}}};const loading_namespaceObject=__webpack_require__.p+"static/media/loading.e4ce7cef.gif",loading_dark_namespaceObject=__webpack_require__.p+"static/media/loading_dark.63238210.gif",LoadingGif=props=>react.createElement(Img,{...props,src:loading_namespaceObject,darkSrc:loading_dark_namespaceObject});LoadingGif.__docgenInfo={description:"",methods:[],displayName:"LoadingGif"};var utils=__webpack_require__("../../node_modules/jotai/esm/vanilla/utils.mjs");const refreshDepsMap=new WeakMap,refreshableAtoms=new WeakSet;function atomWithRefresh(read,write){const refreshAtom=(0,vanilla.eU)(0),refreshableAtom=(0,vanilla.eU)(((get,options)=>{get(refreshAtom);const deps=new Set,value=read(((...args)=>{const atom=args[0];return refreshableAtoms.has(atom)&&deps.add(atom),get(...args)}),options);return refreshDepsMap.set(value,deps),value}),((get,set,...args)=>{if(0===args.length){const currentValue=get(refreshableAtom);for(const dep of refreshDepsMap.get(currentValue)??[])set(dep);set(refreshAtom,(c=>c+1))}else if(write)return write(get,set,...args)}));return refreshableAtoms.add(refreshableAtom),refreshableAtom}var browserfs=__webpack_require__("../../node_modules/browserfs/dist/browserfs.js"),pify=__webpack_require__("../../node_modules/pify/index.js"),pify_default=__webpack_require__.n(pify);async function createIndexedDBFS(storeName="bfs-local-fs"){const idbfs=await createFsBackend((cb=>{browserfs.FileSystem.IndexedDB.Create({storeName},cb)}));return await new Promise((resolve=>idbfs.init(idbfs.store,resolve))),idbfs}function initializeFS(fsBackend){browserfs.initialize(fsBackend);const fsm=browserfs.BFSRequire("fs");return fsm.promises=pify_default()({...fsm,exists:(filePath,cb)=>fsm.exists(filePath,(value=>cb(null,value)))}),fsm}const createFs=backend=>{const fs=new(browserfs.BFSRequire("fs").FS);return fs.initialize(backend),fs};function createFsBackend(fn){return new Promise(((resolve,reject)=>{fn(((err,fs)=>{if(err||!fs)return reject(err);resolve(fs)}))}))}var esm=__webpack_require__("../../node_modules/caf/dist/esm/index.mjs");const copyFsRecursively=(0,esm.Ni)((function*(cancelSignal,params){const{source,target,rootDir,onCopy,force}=params,items=yield source.readdir(rootDir);for(const name of items){const fullPath=path_browserify_default().join(rootDir,name),stat=yield source.stat(fullPath);if(stat.isFile()||stat.isSymbolicLink()){if(!force&&(yield fileExists(target,fullPath)))return;onCopy?.(fullPath);const content=yield source.readFile(fullPath);yield ensureDir(target,path_browserify_default().dirname(fullPath)),yield target.writeFile(fullPath,content)}else stat.isDirectory()?yield copyFsRecursively(cancelSignal,{...params,rootDir:path_browserify_default().join(rootDir,name)}):console.warn("unsupported file system item skipped, when copying:",stat)}})),fileExists=async(fs,filepath)=>await fs.exists(filepath)&&!(await fs.stat(filepath)).isDirectory();async function ensureDir(fs,dirPath){const stat=await fs.stat(dirPath).catch((e=>"ENOENT"!==e.code&&Promise.reject(e)));if(!1===stat){const dirname=path_browserify_default().dirname(dirPath);dirname!==path_browserify_default().dirname(dirname)&&await ensureDir(fs,dirname),await fs.mkdir(dirPath).catch((e=>"EEXIST"===e.code?Promise.resolve():Promise.reject(e)))}else if(!stat.isDirectory())throw new Error(`path is not a directory, but already exists: ${dirPath}`)}const stat=pathname=>fs.promises.stat(pathname).catch((()=>null));let fs;const persistentFsPreference=(key="demo_app_use_persistent_fs",{get:()=>localStorage.getItem(key),set:value=>localStorage.setItem(key,value)});var key;async function switchToPersistentFS({onCopy=console.log,cancelSignal}={}){if(!function isFsInMemory(){return fs.getRootFS()instanceof browserfs.FileSystem.InMemory}())return void console.log("Already on persistent fs. Nothing to do.");console.log("Creating IndexedDB FS"),console.time("creating db");const indexedDbFsBackend=await createIndexedDBFS();await async function copyFs({source,target,cancelSignal,...rest}){await copyFsRecursively(cancelSignal,{...rest,source:pify_default()(source),target:pify_default()(target),rootDir:"/"})}({source:fs,target:await createFs(indexedDbFsBackend),cancelSignal,force:!0,onCopy}),console.timeEnd("creating db"),initializeFS(indexedDbFsBackend),console.log("FS switched to IndexedDB backend",indexedDbFsBackend)}const fsResource=function wrapPromise(promise){let response,status="pending";const suspender=promise.then((res=>{status="success",response=res}),(err=>{status="error",response=err}));return{read:()=>{switch(status){case"pending":throw suspender;case"error":throw response;default:return response}}}}(("yes"===persistentFsPreference.get()?createIndexedDBFS():async function createInMemoryFS(){return await createFsBackend((cb=>{browserfs.FileSystem.InMemory.Create({},cb)}))}()).then(initializeFS).then((theFs=>(window.fs=theFs,fs=theFs))).catch((e=>{throw console.log("could not initialize FS:",e),e}))),WaitForFs=({children})=>(fsResource.read(),children);const dirContentAtom=(0,utils.Iz)((path=>{const atom=atomWithRefresh((()=>(async path=>{let fileNames;try{fileNames=await fs.promises.readdir(path)}catch(e){return null}const stats=await Promise.all(fileNames.map((fileName=>{const filePath=`${path}/${fileName}`;return fs.promises.stat(filePath).then((stat=>({...stat,type:stat.isDirectory()?"dir":"file",filePath})))})));return stats.map((stat=>({type:stat.type,name:(0,path_browserify.basename)(stat.filePath),path:stat.filePath,lastModification:stat.mtimeMs,size:stat.size})))})(path)));return atom.debugLabel=`DirContent(${path})`,atom})),reloadFileFromDiskCallback=(_get,set)=>async path=>{await set(fileContentAtom(path))},fileContentAtom=(0,utils.Iz)((filepath=>{const readFile=async()=>{if(!filepath)return"";return await fs.promises.exists(filepath)?fs.promises.readFile(filepath,{encoding:"utf8"}):null},fileContentAtom=(0,utils.Wj)(readFile);return(0,vanilla.eU)((async get=>get(fileContentAtom)),(async(_get,set,...args)=>{const content=args[0]??"";if(0===args.length)return set(fileContentAtom,readFile());set(fileContentAtom,Promise.resolve(content)),filepath&&await fs.promises.writeFile(filepath,content??"","utf8").catch((e=>{console.error("failed to sync the file back to the fs",e)}))}))}));var react_utils=__webpack_require__("../../node_modules/jotai/esm/react/utils.mjs"),index_modern=__webpack_require__("../../node_modules/jotai-effect/dist/index.modern.js"),lib=__webpack_require__("../../node_modules/zod/lib/index.mjs");function convertGitStatus(status){return Array.isArray(status)?1===status[1]?["DELETED","NOT_CHANGED","MODIFIED"][status[2]]:0===status[1]?0===status[3]?"UNKNOWN":"ADDED":"UNKNOWN":"modified"===status||"*modified"===status?"MODIFIED":"deleted"===status||"*deleted"===status?"DELETED":"added"===status?"ADDED":"unmodified"===status?"NOT_CHANGED":"UNKNOWN"}var fxp=__webpack_require__("../../node_modules/fast-xml-parser/src/fxp.js"),identity=__webpack_require__("../../node_modules/ramda/es/identity.js"),equals=__webpack_require__("../../node_modules/ramda/es/equals.js"),useFocusWithin=__webpack_require__("../../node_modules/@react-aria/interactions/dist/useFocusWithin.mjs");const filterPath=({path})=>!path.split("/").includes(".git"),autoClonedRepo_path="/workspace/jui",autoClonedRepo_url="https://github.com/alirezamirian/jui.git",defaultProject={name:"Workspace",path:"/workspace"},currentProjectAtom=(0,vanilla.eU)(defaultProject),projectFilePath=(0,utils.Iz)((projectRelativePath=>(0,vanilla.eU)((get=>path_browserify_default().join(get(currentProjectAtom).path,projectRelativePath))))),currentProjectFilesAtom=(0,vanilla.eU)((async get=>{const project=get(currentProjectAtom);return get(projectFilesAtom(project.path))})),projectFilesAtom=(0,utils.Iz)((projectPath=>(0,vanilla.eU)((async get=>{const items=await get(dirContentAtom(projectPath)),files=[],addItem=async item=>{if("dir"===item.type){if(filterPath(item)){const childItems=await get(dirContentAtom(item.path));childItems&&childItems.forEach(addItem)}}else files.push({...item,relativePath:path_browserify_default().relative(projectPath,item.path)})};return await Promise.all((items||[]).map((item=>addItem(item)))),files})))),activePathsAtom=(0,vanilla.eU)([]),activePathExistsAtom=(0,vanilla.eU)((get=>get(activePathsAtom).length>0)),useActivePathsProvider=((atom,nullValue)=>{let focusedElement=null;return(value,name="unknown")=>{const setValue=function useStableSetAtom(atom,options){const store=(0,esm_react.Pj)(options),setAtom=(0,esm_react.Xr)(atom);return(0,react.useCallback)((value=>{const currentValue=store.get(atom),newValue="function"==typeof value?value(currentValue):value;return newValue!==currentValue&&setAtom(newValue),newValue}),[esm_react.Xr,store])}(atom),elementRef=(0,react.useRef)();return(0,react.useEffect)((()=>{focusedElement===elementRef.current&&setValue((currentValue=>(0,equals.A)(value,currentValue)?currentValue:value))}),[value]),(0,useFocusWithin.R)({onFocusWithin:e=>{elementRef.current=e.currentTarget,focusedElement=e.currentTarget,setValue(value)},onBlurWithin:e=>{e.relatedTarget instanceof Element&&e.relatedTarget?.closest("[data-overlay-container], [role=menu]")||setValue(nullValue)}}).focusWithinProps}})(activePathsAtom,[]),projectPopupManagerRefAtom=(0,vanilla.eU)((0,react.createRef)()),windowManagerRefAtom=(0,vanilla.eU)((0,react.createRef)()),alertDialogRefAtom=(0,vanilla.eU)((0,react.createRef)());var StoragePathMacros=function(StoragePathMacros){return StoragePathMacros.WORKSPACE_FILE="$WORKSPACE_FILE$",StoragePathMacros.PRODUCT_WORKSPACE_FILE="$PRODUCT_WORKSPACE_FILE$",StoragePathMacros.NON_ROAMABLE_FILE="other.xml",StoragePathMacros}({});const storagePaths=(0,utils.Iz)((storageFile=>(0,vanilla.eU)((get=>{const storageFileDir=path_browserify_default().join(get(currentProjectAtom).path,".idea");switch(storageFile){case"$PRODUCT_WORKSPACE_FILE$":case"$WORKSPACE_FILE$":return path_browserify_default().join(storageFileDir,"workspace.xml");case"other.xml":return path_browserify_default().join("/user/test/.JUIExample2025.1","options",storageFile);default:return path_browserify_default().join(storageFileDir,storageFile)}})))),persistentStateStoreAtoms=(0,utils.Iz)((storageFile=>{const cacheAtom=(0,vanilla.eU)(null),storageContentAtom=(0,vanilla.eU)((get=>async function readStorageFile(storageFile){const xmlParser=new fxp.XMLParser(WORKSPACE_XML_PARSE_OPTIONS),storageFileExists=await fs.promises.exists(storageFile);if(!storageFileExists)return EMPTY_STORAGE_STATE;const xmlData=await fs.promises.readFile(storageFile,{encoding:"utf8"}),workspace=Object.assign({...EMPTY_STORAGE_STATE},xmlParser.parse(xmlData));return workspace.project.component=workspace.project.component??[],workspace}(get(storagePaths(storageFile)))));let ensureDirPromise,fsWriteTimer=null;return(0,vanilla.eU)((get=>get(cacheAtom)??get(storageContentAtom)),(async(get,set,update)=>{const storageFilepath=get(storagePaths(storageFile)),state=get(cacheAtom)??await get(storageContentAtom);set(cacheAtom,(currentState=>update(currentState??state))),null!==fsWriteTimer&&clearTimeout(fsWriteTimer),ensureDirPromise||(ensureDirPromise=ensureDir(fs.promises,path_browserify_default().dirname(storageFilepath))),fsWriteTimer=setTimeout((()=>{ensureDirPromise.then((()=>set(fileContentAtom(storageFilepath),function serializeState(state){return new fxp.XMLBuilder(WORKSPACE_XML_BUILD_OPTIONS).build(state)}(get(cacheAtom)))))}),1e3)}))}));function atomWithPersistence(initialValue,config){const baseAtom=(0,vanilla.eU)(initialValue),persistenceAtom=function createPersistedStateAtom({storageFile="$WORKSPACE_FILE$",componentName,schema,...args}){const write="write"in args?args.write:v=>v,read="read"in args?args.read:identity.A;return(0,vanilla.eU)((async get=>{const state=await get(persistentStateStoreAtoms(storageFile)),componentState=state?.project.component.find((component=>component["@name"]===componentName)),output=schema.safeParse(componentState);return output.error&&console.error(`Error parsing persisted state for component ${componentName} in file ${storageFile}:`,output.error),await read(output.data)??void 0}),(async(get,set,action)=>{if("update"===action.type)return set(persistentStateStoreAtoms(storageFile),(state=>{const{value}=action,components=[...state.project.component],index=components.findIndex((component=>component["@name"]===componentName));return components.splice(index,index>=0?1:0,{"@name":componentName,...write(value,components[index])}),{...state,project:{...state.project,component:components}}}))}))}(config),syncEffect=(0,index_modern.$)(((get,set)=>{get.peek(persistenceAtom).then((persistedValue=>{void 0!==persistedValue&&set(baseAtom,persistedValue)}))}));return(0,vanilla.eU)((get=>(get(syncEffect),get(baseAtom))),(async(get,set,action)=>{const newValue="function"==typeof action?action(await get(baseAtom)):action;set(baseAtom,newValue),await set(persistenceAtom,{type:"update",value:newValue})}))}atomWithPersistence({x:2},{componentName:"test",storageFile:"test.xml",schema:lib.z.object({whatever:lib.z.number()}).optional(),read:s=>({x:s?.whatever??2}),write:(v,s)=>({...s,whatever:v.x})}),atomWithPersistence({y:3},{componentName:"test2",storageFile:"test.xml",schema:lib.z.object({y:lib.z.number()})});const WORKSPACE_XML_PARSE_OPTIONS={attributeNamePrefix:"@",ignoreAttributes:!1,cdataPropName:"__cdata",isArray:(tagName,jPath)=>"project.component"===jPath},WORKSPACE_XML_BUILD_OPTIONS={format:!0,attributeNamePrefix:"@",cdataPropName:"__cdata",ignoreAttributes:!1},EMPTY_STORAGE_STATE={"?xml":{"@version":"1.0","@encoding":"UTF-8"},project:{"@version":"4",component:[]}};const maybeArray=type=>lib.z.union([type,type.array()]).transform((value=>Array.isArray(value)?value:[value])),list=(item,itemTagName)=>{const itemSchema=maybeArray(item);return lib.z.object({[itemTagName]:itemSchema})},vcsRootsAtom=atomWithPersistence([],{componentName:"VcsDirectoryMappings",schema:lib.z.object({mapping:maybeArray(lib.z.object({"@directory":lib.z.string(),"@vcs":lib.z.enum(["Git"])})).optional()}).optional(),storageFile:"vcs.xml",read:state=>state?.mapping?.map((item=>({dir:item["@directory"],vcs:item["@vcs"]})))??Promise.all(["/workspace/jui","/workspace"].map((async dir=>{if(await fs.promises.exists(dir))return isomorphic_git.Ay.findRoot({fs,filepath:dir}).catch((()=>null))}))).then((roots=>[...new Set(roots.filter((i=>null!=i)))].map((dir=>({dir,vcs:"Git"}))))),write:(value,state)=>({...state||{},mapping:value?.map((({vcs,dir})=>({"@directory":dir,"@vcs":vcs})))??[]})}),vcsFootForFileAtom=(0,utils.Iz)((filepath=>(0,vanilla.eU)((()=>(0,isomorphic_git.wg)({fs,filepath}).catch((()=>null)))))),fetchRepoStatusFromFs=async repoDir=>{console.time(`statusMatrix ${repoDir}`);const rows=await(0,isomorphic_git.qr)({fs,dir:repoDir});console.timeEnd(`statusMatrix ${repoDir}`);const result={};return rows.forEach((row=>{result[row[0]]=convertGitStatus(row)})),result},repoStatusAtoms=(0,utils.Iz)((repoDir=>{const targetAtom=(0,vanilla.eU)({});return(0,index_modern.s)(targetAtom,((_get,set)=>{fetchRepoStatusFromFs(repoDir).then((repoStatus=>{set(targetAtom,repoStatus)}))}))})),isRepoStatusUpdatingAtom=(0,utils.Iz)((_repoRoot=>(0,vanilla.eU)(!1))),isAnyRepoStatusUpdatingAtom=(0,vanilla.eU)((get=>get(vcsRootsAtom).some((({dir})=>get(isRepoStatusUpdatingAtom(dir)))))),fileStatusAtoms=(0,utils.Iz)((filepath=>atomWithRefresh((async get=>{const repoRoot=await get(vcsFootForFileAtom(filepath));if(repoRoot){const relativePath=path_browserify.relative(repoRoot,filepath),repoStatus=get(repoStatusAtoms(repoRoot));return repoStatus[relativePath]||console.log("file status missing in repo status state, fetching individually",filepath),repoStatus[relativePath]??convertGitStatus(await(async({filepath,...args})=>isomorphic_git.Ay.statusMatrix({...args,filepaths:[filepath]}).then((rows=>rows[0])))({fs,dir:repoRoot,filepath:relativePath}))}return"NOT_CHANGED"})))),refreshFileStatusCallback=async(get,set,fullPath)=>{const repoRoot=await get(vcsFootForFileAtom(fullPath));if(repoRoot){const relativePath=path_browserify.relative(repoRoot,fullPath),rows=await isomorphic_git.Ay.statusMatrix({fs,dir:repoRoot,filepaths:[relativePath]});set(repoStatusAtoms(repoRoot),(statusMap=>{const newStatusMap={...statusMap};return 0===rows.length&&delete newStatusMap[relativePath],rows.forEach((row=>{newStatusMap[row[0]]=convertGitStatus(row)})),newStatusMap}))}},refreshRepoStatusesCallback=async(get,set)=>{get(vcsRootsAtom)?.forEach((({dir})=>{set(isRepoStatusUpdatingAtom(dir),!0),fetchRepoStatusFromFs(dir).then((repoStatus=>{console.log("setting repo status for git dirs:",dir,repoStatus),set(repoStatusAtoms(dir),repoStatus)})).finally((()=>{set(isRepoStatusUpdatingAtom(dir),!1)}))}))},useRefreshRepoStatuses=()=>(0,react_utils.yF)(refreshRepoStatusesCallback),useStatusColor=status=>{const theme=(0,styled_components_browser_esm.DP)();switch(status){case"MODIFIED":return theme.dark?"#6897bb":"#0032a0";case"ADDED":return theme.dark?"#629755":"#0a7700";case"DELETED":return theme.dark?"#6c6c6c":"#616161";case"UNKNOWN":return theme.dark?"#d1675a":"#993300"}},FileStatusColor=({children,filepath})=>{const color=(filepath=>{const fileStatus=(0,esm_react.md)((0,utils.oA)(fileStatusAtoms(filepath)));return useStatusColor(fileStatus??"NOT_CHANGED")})(filepath);return react.createElement("span",{style:{color}},children)},StatusColor=({children,status})=>{const color=(0,styled_components_browser_esm.DP)().currentForegroundAware(useStatusColor(status));return react.createElement("span",{style:{color}},children)};FileStatusColor.__docgenInfo={description:"",methods:[],displayName:"FileStatusColor",props:{filepath:{required:!0,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}},StatusColor.__docgenInfo={description:"",methods:[],displayName:"StatusColor",props:{status:{required:!0,tsType:{name:"union",raw:'| "UNKNOWN"\n| "ADDED"\n| "NOT_CHANGED"\n| "MODIFIED"\n| "DELETED"',elements:[{name:"literal",value:'"UNKNOWN"'},{name:"literal",value:'"ADDED"'},{name:"literal",value:'"NOT_CHANGED"'},{name:"literal",value:'"MODIFIED"'},{name:"literal",value:'"DELETED"'}]},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};var Link=__webpack_require__("./src/Link/Link.tsx");const _balloonManagerRef={value:null};function notImplemented(){_balloonManagerRef.value?.show({icon:"Warning",title:"Unimplemented action",body:"This action is not implemented yet.",actions:react.createElement(react.Fragment,null,react.createElement(Link.N,{onPress:notImplemented},"Read more..."))})}var CommonActionIds=__webpack_require__("./src/ActionSystem/CommonActionIds.ts"),ActionShortcut=__webpack_require__("./src/ActionSystem/ActionShortcut.tsx");const StyledContainer=styled.I4.div.attrs({tabIndex:-1})`
  display: flex;
  flex-direction: column;
  height: inherit;
  justify-content: center;
  padding: 0 25%;
  font-size: 1rem;
  outline: none;
`,StyledLine=styled.I4.div`
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
`,StyledShortcut=styled.I4.div`
  color: ${({theme})=>theme.commonColors.linkForegroundEnabled};
`;function EditorZeroState(){return react.createElement(StyledContainer,{"data-testid":"EditorZeroState"},react.createElement(ActionTip,{actionId:CommonActionIds.j.GO_TO_FILE}),react.createElement(ActionTip,{actionId:CommonActionIds.j.GO_TO_ACTION}))}function ActionTip({actionId}){const getShortcut=(0,ActionShortcut.a)(),action=(0,ActionsProvider.y3)(actionId);return react.createElement(StyledLine,null,action?.title,react.createElement(StyledShortcut,null,getShortcut(actionId)))}EditorZeroState.__docgenInfo={description:"",methods:[],displayName:"EditorZeroState"};var clipboard_copy=__webpack_require__("../../node_modules/clipboard-copy/index.js"),clipboard_copy_default=__webpack_require__.n(clipboard_copy),useCreateDefaultActionGroup=__webpack_require__("./src/ActionSystem/components/useCreateDefaultActionGroup.tsx");const AppActionIds_PASTE_MULTIPLE="PasteMultiple",AppActionIds_GENERATE="Generate",editorActionIds={EXPAND_REGION:"ExpandRegion",EXPAND_REGION_RECURSIVELY:"ExpandRegionRecursively",EXPAND_ALL_REGIONS:"ExpandAllRegions",EXPAND_ALL_TO_LEVEL:"ExpandToLevel",EXPAND_ALL_TO_LEVEL1:"ExpandToLevel1",EXPAND_ALL_TO_LEVEL2:"ExpandToLevel2",EXPAND_ALL_TO_LEVEL3:"ExpandToLevel3",EXPAND_ALL_TO_LEVEL4:"ExpandToLevel4",EXPAND_ALL_TO_LEVEL5:"ExpandToLevel5",COLLAPSE_REGION:"CollapseRegion",COLLAPSE_REGION_RECURSIVELY:"CollapseRegionRecursively",COLLAPSE_ALL_REGIONS:"CollapseAllRegions",COLLAPSE_DOC_COMMENTS:"CollapseDocComments",TOGGLE_FOLDING:"ToggleFolding",EDITOR_LANG_POPUP_MENU:"EditorLangPopupMenu",CompareClipboardWithSelection:"CompareClipboardWithSelection"};function source(context){return context.event?context.event?.type?.includes("key")?"keyboard":"mouse":""}var sortWith=__webpack_require__("../../node_modules/ramda/es/sortWith.js"),descend=__webpack_require__("../../node_modules/ramda/es/descend.js");const getCallbackAtom=(0,vanilla.eU)(((_get,{setSelf})=>callback=>(...args)=>{const{get,set}=setSelf();return callback(get,set,...args)}),((get,set)=>({get,set}))),editorTabsAtom=(0,index_modern.s)((0,vanilla.eU)([]),((get,set)=>{get.peek(currentProjectFilesAtom).then((currentProjectFiles=>{set(editorTabsAtom,(0,sortWith.A)([(0,descend.A)((file=>file.path===get(projectFilePath("README.md")))),(0,descend.A)((file=>file.path.endsWith(".ts"))),(0,descend.A)((file=>file.path.endsWith(".js")))],currentProjectFiles.filter((item=>"file"===item.type))).filter((file=>!file.path.includes(".idea"))).slice(0,12).map((file=>({filePath:file.path,editorState:{cursorPos:{lineNumber:0,column:0}}}))))}))})),activeEditorTabIndexState=(0,vanilla.eU)(0),activeEditorTabAtom=(0,vanilla.eU)((get=>{const tabs=get(editorTabsAtom);return tabs[get(activeEditorTabIndexState)]||tabs[0]||null})),editorCursorPositionState=(0,vanilla.eU)(new editor_main.yX(0,0)),editorRefAtom=(0,vanilla.eU)(null),openPathCallback=(get,set,filePath,shouldFocus=!0)=>{const tabsState=get(editorTabsAtom),index=tabsState.findIndex((tab=>tab.filePath===filePath)),select=index=>{set(activeEditorTabIndexState,index)},focus=()=>{get(editorRefAtom)?.focus()};if(index>-1)select(index);else{const newIndex=tabsState.length;set(editorTabsAtom,(currentState=>[...currentState,{filePath,editorState:{cursorPos:{lineNumber:0,column:0}}}])),select(newIndex)}shouldFocus&&setTimeout(focus)},closeCallback=(_get,set,index)=>set(editorTabsAtom,(tabsState=>tabsState.filter(((_,tabIndex)=>tabIndex!==index)))),closePathCallback=(get,set,filePath)=>{const index=get(editorTabsAtom).findIndex((tab=>tab.filePath===filePath));index>-1&&(closeCallback(0,set,index),set(activeEditorTabIndexState,Math.max(index-1,0)))},closeOtherTabsCallback=(get,set,index)=>{set(editorTabsAtom,(tabsState=>tabsState.filter(((_,tabIndex)=>tabIndex===index))))},selectTabCallback=(get,set,index)=>{const numTabs=get(editorTabsAtom).length;index>=0&&index<numTabs&&set(activeEditorTabIndexState,index)},focusTabCallback=(get,set)=>{get(editorRefAtom)?.focus()},editorManagerAtom=(read=(_get,{getCallback})=>({openPath:getCallback(openPathCallback),closeTab:getCallback(closeCallback),select:getCallback(selectTabCallback),focus:getCallback(focusTabCallback),closeOtherTabs:getCallback(closeOtherTabsCallback),closePath:getCallback(closePathCallback)}),(0,vanilla.eU)(((get,options)=>{const getCallback=get(getCallbackAtom);return read(get,Object.assign(options,{getCallback}))})));var read;const useEditorStateManager=()=>(0,esm_react.md)(editorManagerAtom);var dist=__webpack_require__("../../node_modules/@monaco-editor/react/dist/index.mjs");const darculaColorSchemeTokenRules=JSON.parse('{"Gb":[{"scope":"emphasis","settings":{"fontStyle":"italic"}},{"scope":"strong","settings":{"fontStyle":"bold"}},{"scope":"header","settings":{"foreground":"#000080"}},{"scope":"comment","settings":{"foreground":"#808080"}},{"scope":"constant.language","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":["constant.numeric"],"settings":{"foreground":"#6897BB"}},{"scope":"constant.regexp","settings":{"foreground":"#646695"}},{"scope":"entity.name.tag","settings":{"foreground":"#FFC66D"}},{"scope":"entity.name.tag.css","settings":{"foreground":"#d7ba7d"}},{"scope":"entity.other.attribute-name","settings":{"foreground":"#BABABA"}},{"scope":["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],"settings":{"foreground":"#d7ba7d"}},{"scope":"invalid","settings":{"foreground":"#f44747"}},{"scope":"markup.underline","settings":{"fontStyle":"underline"}},{"scope":"markup.bold","settings":{"foreground":"#A9B7C6"}},{"scope":"markup.heading","settings":{"foreground":"#A9B7C6"}},{"scope":"markup.italic","settings":{"fontStyle":"italic"}},{"scope":"markup.inserted","settings":{"foreground":"#b5cea8"}},{"scope":"markup.deleted","settings":{"foreground":"#ce9178"}},{"scope":"markup.changed","settings":{"foreground":"#A9B7C6"}},{"scope":"beginning.punctuation.definition.quote.markdown","settings":{"foreground":"#608b4e"}},{"scope":"beginning.punctuation.definition.list.markdown","settings":{"foreground":"#6796e6"}},{"scope":"markup.inline.raw","settings":{"foreground":"#ce9178"}},{"scope":"meta.selector","settings":{"foreground":"#d7ba7d"}},{"name":"brackets of XML/HTML tags","scope":"punctuation.definition.tag","settings":{"foreground":"#FFC66D"}},{"scope":"meta.preprocessor","settings":{"foreground":"#CC7832"}},{"scope":"meta.preprocessor.string","settings":{"foreground":"#ce9178"}},{"scope":"meta.preprocessor.numeric","settings":{"foreground":"#b5cea8"}},{"scope":"meta.structure.dictionary.key.python","settings":{"foreground":"#9876AA"}},{"scope":"meta.diff.header","settings":{"foreground":"#CC7832"}},{"scope":"storage","settings":{"foreground":"#ff0000"}},{"scope":"storage.type","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":["keyword.other.phpdoc.php","keyword.other.type.php","storage.type.class.jsdoc","entity.name.type.instance.jsdoc","variable.other.jsdoc"],"settings":{"foreground":"#808080"}},{"scope":"storage.modifier","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"string","settings":{"foreground":"#6A8759"}},{"scope":"string.tag","settings":{"foreground":"#6A8759"}},{"scope":"string.value","settings":{"foreground":"#6A8759"}},{"scope":"string.regexp","settings":{"foreground":"#6A8759"}},{"name":"JavaScript string interpolation ${}","scope":["punctuation.definition.template-expression.begin.js","punctuation.definition.template-expression.begin.ts","punctuation.definition.template-expression.end.ts","punctuation.definition.template-expression.end.js"],"settings":{"foreground":"#A9B7C6"}},{"scope":["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less"],"settings":{"foreground":"#9876AA"}},{"scope":["variable.other.property","support.variable.property.dom","entity.other.inherited-class"],"settings":{"foreground":"#9876AA"}},{"scope":["variable.other.object","variable.other.object.property","support.class.dom","meta.function-call","entity.name.type.module"],"settings":{"foreground":"#A9B7C6"}},{"scope":["variable.other.readwrite","variable.other.constant.ts","variable.parameter","variable.other.readwrite.alias"],"settings":{"foreground":"#A9B7C6"}},{"scope":"keyword","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"keyword.control","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"keyword.operator","settings":{"foreground":"#A9B7C6"}},{"scope":["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.logical.python"],"settings":{"foreground":"#CC7832"}},{"scope":"keyword.other.unit","settings":{"foreground":"#b5cea8"}},{"scope":["punctuation.section.embedded.begin.metatag.php","punctuation.section.embedded.end.metatag.php"],"settings":{"foreground":"#CC7832"}},{"scope":"support.function.git-rebase","settings":{"foreground":"#9876AA"}},{"scope":"constant.sha.git-rebase","settings":{"foreground":"#b5cea8"}},{"name":"coloring of the Java import and package identifiers","scope":["storage.modifier.import.java","storage.modifier.package.java"],"settings":{"foreground":"#d4d4d4"}},{"name":"this.self","scope":"variable.language","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"name":"Source Python","scope":["source.python"],"settings":{"foreground":"#A9B7C6"}},{"name":"Magic function python","scope":["support.function.magic.python"],"settings":{"foreground":"#9876AA"}},{"name":"Self keyword python","scope":["variable.language.special.self.python","variable.parameter.function.language.special.self.python"],"settings":{"foreground":"#9876AA","fontStyle":""}},{"name":"Function declarations Python","scope":["entity.name.function.python","meta.function-call.generic.python"],"settings":{"foreground":"#FFC66D"}},{"name":"Function declarations","scope":["entity.name.function","support.function","support.constant.handlebars"],"settings":{"foreground":"#FFC66D"}},{"name":"Types declaration and references","scope":["meta.return-type","support.class","support.type","entity.name.type","entity.name.class","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],"settings":{"foreground":"#4EC9B0"}},{"name":"Types declaration and references","scope":["support.class","entity.name.class","support.type","entity.name.type"],"settings":{"foreground":"#FFC66D"}},{"name":"Arrow Function","scope":["storage.type.function.arrow"],"settings":{"foreground":"#A9B7C6"}},{"name":"Types declaration and references, TS grammar specific","scope":["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json"],"settings":{"foreground":"#4EC9B0"}},{"name":"Control flow keywords","scope":"keyword.control","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"name":"Variable and parameter name","scope":["meta.definition.variable.name","support.variable"],"settings":{"foreground":"#A9B7C6"}},{"scope":["variable"],"settings":{"foreground":"#9876AA"}},{"name":"Object keys, TS grammar specific","scope":["meta.object-literal.key","meta.object-literal.key entity.name.function"],"settings":{"foreground":"#9876AA"}},{"name":"CSS property value","scope":["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],"settings":{"foreground":"#CE9178"}},{"scope":"token.info-token","settings":{"foreground":"#6796e6"}},{"scope":"token.warn-token","settings":{"foreground":"#cd9731"}},{"scope":"token.error-token","settings":{"foreground":"#f44747"}},{"scope":"token.debug-token","settings":{"foreground":"#b267e6"}}]}').Gb.flatMap((({scope,settings})=>[].concat(scope).flatMap((scope=>scope.split(" "))).map((token=>{const values={token};return Object.keys(settings).forEach((key=>{const value=settings[key];value&&(values[key]=value)})),values})))),StyledEditor=(0,styled.I4)(dist.Ay)`
  .monaco-editor {
    .margin-view-overlays .line-numbers {
      text-align: left;
      padding-left: 7px;
    }

    .scrollbar .slider {
      border-radius: 0.25rem;
    }
  }
`,Editor=props=>{const editorTheme=(()=>{const monaco=(0,dist.dJ)(),theme=(0,styled_components_browser_esm.DP)(),[themeName,setThemeName]=(0,react.useState)(void 0);return(0,react.useLayoutEffect)((()=>{if(monaco){const name=`jui-theme-${theme.name.replace(" ","")}`,bracketColor=theme.dark?"#dcdcdc":"#000";monaco.editor.defineTheme(name,{base:theme.dark?"vs-dark":"vs",inherit:!0,colors:theme.dark?{"editor.background":"#2B2B2B","editor.lineHighlightBackground":"#323232","editorLineNumber.foreground":"#606366","editorActiveLineNumber.foreground":"#a4a3a3","editorIndentGuide.background":"#373737","editorIndentGuide.activeBackground":"#505050","editorGutter.background":theme.dark?"#313335":"#f0f0f0","editorBracketHighlight.foreground1":bracketColor,"editorBracketHighlight.foreground2":bracketColor,"editorBracketHighlight.foreground3":bracketColor,"editorBracketHighlight.foreground4":bracketColor,"editorBracketMatch.background":"#43454b","editorBracketMatch.border":"#00000000"}:{},rules:darculaColorSchemeTokenRules}),setThemeName(name)}}),[monaco,theme]),themeName})();return react.createElement(react.Fragment,null,editorTheme&&react.createElement(StyledEditor,{...props,options:{minimap:{enabled:!1},lineHeight:22,showFoldingControls:"always",guides:{indentation:!0},overviewRulerBorder:!1,fontFamily:"JetBrains Mono",fontSize:13,scrollbar:{verticalScrollbarSize:14,horizontalScrollbarSize:8,verticalSliderSize:8,horizontalSliderSize:8,horizontal:"auto",vertical:"visible",alwaysConsumeMouseWheel:!1},...props.options},theme:editorTheme}))};function getCached(c,m,k){return(m.has(k)?m:m.set(k,c())).get(k)}Editor.__docgenInfo={description:"Monaco Editor styled to look like Intellij Platform's editor.\nTODO:\n - folding controls appearance is different and should be changed\n - highlighting pairs of parens, brackets, etc. is different.\n - context menu look different.\n - selection look different.\n - BUG: height is more than necessary. Needs investigation first.",methods:[],displayName:"Editor"};const cache1=new WeakMap,memo2=(create,dep1,dep2)=>{const cache2=getCached((()=>"object"==typeof dep2?new WeakMap:new Map),cache1,dep1);return getCached(create,cache2,dep2)},nullObj={};function unwrapLatestWithLoading(anAtom,defaultValue){return memo2((()=>{const freshAtom=(0,vanilla.eU)((async get=>({value:await get(anAtom),isLoading:!1}))),unwrappedAtom=(0,utils.oA)(freshAtom,(prev=>{const fallback=void 0===prev?defaultValue:prev.value;return void 0!==fallback?{value:fallback,isLoading:!0}:void 0}));return(0,vanilla.eU)((get=>get(unwrappedAtom)??get(freshAtom)))}),anAtom,defaultValue??nullObj)}const editorFullStateAtom=unwrapLatestWithLoading((0,vanilla.eU)((async get=>{const activeEditorTab=get(activeEditorTabAtom);return{...activeEditorTab,content:await get(fileContentAtom(activeEditorTab?.filePath??null))}}))),FileEditor=()=>{const[editorTabs,editorStateManager]=[(0,esm_react.md)(editorTabsAtom),(0,esm_react.md)(editorManagerAtom)],editorRef=(0,react.useRef)(),[active,setActive]=(0,react.useState)(!1),[contextMenu,setContextMenu]=(0,react.useState)(null),hideAllAction=(0,ActionsProvider.y3)(ToolWindowActionIds.yF),setCursorPositionState=(0,esm_react.Xr)(editorCursorPositionState),{value:{content,filePath},isLoading:isContentLoading}=(0,esm_react.md)(editorFullStateAtom),tabActionsRef=(0,useLatest.F)({closePath:editorStateManager.closePath,closeOthersTabs:editorStateManager.closeOtherTabs}),setEditorRef=(0,esm_react.Xr)(editorRefAtom),setContent=(0,esm_react.Xr)(fileContentAtom(filePath??null)),updateFileStatus=(0,react_utils.yF)(refreshFileStatusCallback),editorActionGroupDefinition=function useEditorActionGroup(editorRef){const createDefaultActionGroup=(0,useCreateDefaultActionGroup.Q)(),editor=editorRef.current,selection=editor?.getSelection(),selectedText=selection?editor?.getModel()?.getValueInRange(selection):"";return createDefaultActionGroup({id:"EditorPopupMenu",title:"Editor Popup Menu",description:"Editor Popup Menu",children:[createDefaultActionGroup({id:"ShowIntentionsGroup",title:"Show Intentions Group",isSearchable:!1,menuPresentation:"section",children:[{id:"ShowIntentionActions",title:"Show Context Actions",icon:react.createElement(PlatformIcon.jE,{icon:"actions/intentionBulbGrey.svg"}),actionPerformed:()=>{notImplemented()}}]}),selectedText?{id:CommonActionIds.j.COPY,title:"Copy",icon:react.createElement(PlatformIcon.jE,{icon:"actions/copy"}),actionPerformed:()=>{const selection=editor?.getSelection(),selectedText=selection?editor?.getModel()?.getValueInRange(selection):"";selectedText&&clipboard_copy_default()(selectedText)}}:null,{id:CommonActionIds.j.PASTE,title:"Paste",icon:react.createElement(PlatformIcon.jE,{icon:"actions/menu-paste"}),actionPerformed:()=>{editor?.focus(),editor?.trigger("keyboard","editor.action.clipboardPasteAction",{})}},createDefaultActionGroup({id:"Copy.Paste.Special",title:"Copy / Paste Special",description:"Copy / Paste Special Editor Actions",menuPresentation:"submenu",children:[{id:CommonActionIds.j.COPY_REFERENCE,title:"Copy Reference",description:"Copy reference to selected class, method or function, or a relative path to selected file",actionPerformed:()=>{notImplemented()}},{id:AppActionIds_PASTE_MULTIPLE,title:"Paste from history",description:"Paste from recent clipboards",actionPerformed:()=>{notImplemented()}}]}),"divider",createDefaultActionGroup({id:"FoldingGroup",title:"Folding",menuPresentation:"submenu",children:[{id:editorActionIds.EXPAND_REGION,title:"Expand",actionPerformed:context=>{editorRef.current?.trigger(source(context),"editor.unfold",{})}},{id:editorActionIds.EXPAND_REGION_RECURSIVELY,title:"Expand Recursively",actionPerformed:context=>{editorRef.current?.trigger(source(context),"editor.unfoldRecursively",{})}},{id:editorActionIds.EXPAND_ALL_REGIONS,title:"Expand All",actionPerformed:context=>{editorRef.current?.trigger(source(context),"editor.unfoldAll",{})}},"divider",{id:editorActionIds.COLLAPSE_REGION,title:"Collapse",actionPerformed:context=>{editorRef.current?.trigger(source(context),"editor.fold",{})}},{id:editorActionIds.COLLAPSE_REGION_RECURSIVELY,title:"Collapse Recursively",actionPerformed:context=>{editorRef.current?.trigger(source(context),"editor.foldRecursively",{})}},{id:editorActionIds.COLLAPSE_ALL_REGIONS,title:"Collapse All",actionPerformed:context=>{editorRef.current?.trigger(source(context),"editor.foldAll",{})}},"divider",createDefaultActionGroup({id:editorActionIds.EXPAND_ALL_TO_LEVEL,title:"Expand all to level",menuPresentation:"submenu",children:[1,2,3,4,5].map((level=>({id:editorActionIds[`EXPAND_ALL_TO_LEVEL${level}`],title:`${level}`,actionPerformed:context=>{editorRef.current?.trigger(source(context),`editor.foldLevel${level}`,{})}})))}),"divider",{id:editorActionIds.COLLAPSE_DOC_COMMENTS,title:"Collapse Doc Comments",actionPerformed:context=>{editorRef.current?.trigger(source(context),"editor.foldAllBlockComments",{})}},"divider",{id:editorActionIds.TOGGLE_FOLDING,title:"Toggle Folding",actionPerformed:context=>{editorRef.current?.trigger(source(context),"editor.toggleFold",{})}}]}),createDefaultActionGroup({id:"EditorLangPopupMenu",title:"EditorLangPopupMenu",menuPresentation:"section",children:[{id:AppActionIds_GENERATE,title:"Generate...",actionPerformed:()=>{notImplemented()}}]}),"divider",{id:editorActionIds.CompareClipboardWithSelection,title:"Compare with Clipboard",description:"Compare current selection with clipboard",icon:react.createElement(PlatformIcon.jE,{icon:"actions/diffWithClipboard.svg"}),actionPerformed:()=>{notImplemented()}}].filter((i=>null!=i))})}(editorRef),updateContent=(newContent="")=>{setActive(!1),setContent(newContent),filePath&&updateFileStatus(filePath).catch((e=>{console.error("Could not update file status",e)}))},activePathsProviderProps=useActivePathsProvider(filePath?[filePath]:[]);return react.createElement(ActionsProvider.Be,{actions:[editorActionGroupDefinition]},(({shortcutHandlerProps})=>react.createElement(StyledFileEditorContainer,(0,mergeProps.v)(activePathsProviderProps,shortcutHandlerProps,{onFocus:()=>{setActive(!0),setEditorRef({focus:()=>editorRef.current?.focus()})}}),editorTabs.length>0?react.createElement(react.Fragment,null,react.createElement(ContextMenuContainer.y,{renderMenu:()=>react.createElement(Menu.W1,{onAction:notImplemented},react.createElement(Item.q,{key:"close"},"Close"),react.createElement(Item.q,{key:"closeOthers"},"Close Other tabs"),react.createElement(Item.q,{key:"closeAll"},"Close all tabs"),react.createElement(Item.q,{key:"closeLeft"},"Close tabs to the left"),react.createElement(Item.q,{key:"closeRight"},"Close tabs to the right"))},react.createElement(EditorTabs.U,{items:editorTabs,active,selectedKey:filePath,onSelectionChange:key=>{editorStateManager.select(editorTabs.findIndex((tab=>tab.filePath===key)))},noBorders:!0},(tab=>{const filename=path_browserify.basename(tab.filePath),icon=react.createElement(PlatformIcon.jE,{icon:getIconForFile(tab.filePath)});return react.createElement(TabItem.V,{key:tab.filePath,textValue:filename,inOverflowMenu:react.createElement(MenuItemLayout.T,{content:filename,icon})},react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:tab.filePath})},react.createElement(EditorTabContent.i,{icon,title:react.createElement(FileStatusColor,{filepath:tab.filePath},filename),closeButton:react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Close. Alt-Click to Close Others"})},react.createElement(TabCloseButton.E,{onPress:e=>{e.altKey?tabActionsRef.current.closeOthersTabs(editorTabs.indexOf(tab)):tabActionsRef.current.closePath(tab.filePath)}})),containerProps:{onDoubleClick:()=>{hideAllAction?.perform()}}})))}))),"string"==typeof content?react.createElement(Editor,{height:"100%",path:filePath,options:{contextmenu:!1},onMount:(monacoEditor,monaco)=>{monacoEditor.focus(),monacoEditor.onContextMenu((c=>{c.event.preventDefault(),Promise.resolve().then((()=>{setContextMenu(c)}))})),monacoEditor.onDidScrollChange((()=>{setContextMenu(null)})),function enableJsx(monaco){monaco.languages.typescript.typescriptDefaults.setCompilerOptions({jsx:editor_main.eo.typescript.JsxEmit.React}),monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1})}(monaco),editorRef.current=monacoEditor,monacoEditor.onDidChangeCursorPosition((e=>{setCursorPositionState(e.position)})),monacoEditor.onDidChangeModel((()=>{}))},onChange:updateContent,value:content??""}):content&&"UNSUPPORTED CONTENT"):react.createElement(EditorZeroState,null),isContentLoading&&react.createElement(FileEditorLoading,null),contextMenu&&react.createElement(MenuOverlayFromOrigin._,{origin:contextMenu.event.browserEvent,onClose:()=>setContextMenu(null)},react.createElement(EditorActionGroupMenu,null)))))};function EditorActionGroupMenu(){const actionGroup=(0,useActionGroup.n)("EditorPopupMenu");return actionGroup?react.createElement(ActionGroupMenu,{actionGroup},(menuProps=>react.createElement(Menu.W1,{autoFocus:!0,...menuProps}))):null}const StyledFileEditorContainer=styled.I4.div`
  position: relative;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: ${({theme})=>theme.color("Editor.background",theme.isUnderDarcula()?"rgb(40,40,40)":theme.commonColors.panelBackground)};
`,FileEditorLoading=(0,styled.I4)(LoadingGif)`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`;FileEditor.__docgenInfo={description:"Used as main content in the main ToolWindows. Shows currently opened files tabs and the editor.\n\nTODO: preserve editor state when switching between tabs\nTODO: support multiple editors in split view.",methods:[],displayName:"FileEditor"};var ToolWindowsState=__webpack_require__("./src/ToolWindows/ToolWindowsState/ToolWindowsState.ts"),DefaultToolWindow=__webpack_require__("./src/ToolWindowsImpl/DefaultToolWindow.tsx"),bundle=__webpack_require__("../../node_modules/xterm-for-react/dist/bundle.js");const StyledXterm=(0,styled_components_browser_esm.Ay)(bundle.V)`
  height: 100%;
  background: rgb(43, 43, 43); // CONSOLE_BACKGROUND_KEY from color scheme
`,Terminal=()=>{const[input,setInput]=(0,react.useState)(""),xtermRef=(0,react.useRef)(null),options=(0,react.useMemo)((()=>({theme:{background:"rgb(43,43,43)",selection:"#214283"},fontFamily:"sans-serif",letterSpacing:-8,fontSize:12,lineHeight:1.3,cursorStyle:"block",cursorBlink:!0,cursorWidth:8,rendererType:"dom"})),[]);return(0,react.useEffect)((()=>{setTimeout((()=>{xtermRef.current?.terminal.resize(80,10),xtermRef.current?.terminal.write("$ ")}),3e3)}),[]),react.createElement(StyledXterm,{ref:xtermRef,options,onData:data=>{const code=data.charCodeAt(0);if(13===code)input.length>0&&xtermRef.current?.terminal.write("\r\nYou typed: '"+input+"'"),xtermRef.current?.terminal.write("\r\n$ "),setInput("");else{if(code<32||127===code)return;xtermRef.current?.terminal.write(data),setInput(input+data)}}})};Terminal.__docgenInfo={description:"",methods:[],displayName:"Terminal"};var useTreeActions=__webpack_require__("./src/TreeActions/useTreeActions.tsx"),ActionButton=__webpack_require__("./src/ActionSystem/components/ActionButton.tsx");const foldersOnTopState=(0,vanilla.eU)(!0),expandedKeysAtom=(0,utils.t_)((get=>new Set(get(vcsRootsAtom).flatMap((({dir})=>getParentPaths(dir).concat(dir))).concat(get(currentProjectAtom).path)))),selectionAtom=(0,vanilla.eU)(new Set([])),selectedNodesAtom=(0,vanilla.eU)((async get=>{const selection=get(selectionAtom),nodesByKey=(await get(currentProjectTreeAtom)).byKey;return[..."all"===selection?nodesByKey.keys():selection].map((key=>nodesByKey.get(`${key}`))).filter((i=>null!=i))})),projectViewTreeRefAtom=(0,vanilla.eU)(react.createRef()),currentProjectTreeAtom=(0,vanilla.eU)((get=>async function createProjectTree(project,get){const rootItems=await get(dirContentAtom(project.path)),byKey=new Map,mapItem=parent=>async item=>{const node={...item,parent};if("dir"===item.type){if(filterPath(item)){const dirNode={...node,children:[]};return dirNode.children=(await Promise.all((await get(dirContentAtom(item.path))??[]).map(mapItem(dirNode)))).filter((i=>null!=i)),sortProjectTreeNodes(dirNode.children),byKey.set(dirNode.path,dirNode),dirNode}return null}return byKey.set(node.path,node),node},children=(await Promise.all((rootItems||[]).map(mapItem(null)))).filter((i=>null!=i));sortProjectTreeNodes(children);const root={type:"project",path:project.path,name:project.name,parent:null,children};return byKey.set(root.path,root),{root,byKey}}(get(currentProjectAtom),get)));(0,vanilla.eU)("name");function sortProjectTreeNodes(items){items.sort(((item1,item2)=>item1.name<item2.name?-1:item1.name>item2.name?1:0))}const expandToPathCallback=(get,set,path)=>{const expandedKeys=get(expandedKeysAtom),keysToExpand=[get(currentProjectAtom).path].concat(getParentPaths(path));set(expandedKeysAtom,new Set([...expandedKeys,...keysToExpand]))},selectKeyAndFocusCallback=(get,set,key)=>{const treeRef=get(projectViewTreeRefAtom)?.current;treeRef?.replaceSelection(key),treeRef?.focus(key)},useSelectPathInProjectView=()=>{const expandToOpenedFile=(0,react_utils.yF)(expandToPathCallback),selectKeyAndFocus=(0,react_utils.yF)(selectKeyAndFocusCallback);return path=>{expandToOpenedFile(path),setTimeout((()=>{selectKeyAndFocus(path)}))}};var SpeedSearchTree=__webpack_require__("./src/Tree/SpeedSearchTree/SpeedSearchTree.tsx"),ItemLayout=__webpack_require__("./src/Collections/ItemLayout.tsx"),HighlightedTextValue=__webpack_require__("./src/CollectionSpeedSearch/HighlightedTextValue.tsx"),ItemStateContext=__webpack_require__("./src/Collections/ItemStateContext.tsx"),sortBy=__webpack_require__("../../node_modules/ramda/es/sortBy.js");const Loading=(0,styled_components_browser_esm.Ay)(LoadingSpinner.kt)`
  width: fit-content;
  display: block;
  margin: auto;
`,DefaultSuspense=({fallback=react.createElement(Loading,null),children})=>react.createElement(react.Suspense,{fallback},children);DefaultSuspense.__docgenInfo={description:"",methods:[],displayName:"DefaultSuspense",props:{fallback:{defaultValue:{value:"<Loading />",computed:!1},required:!1}}};var Divider=__webpack_require__("./src/Collections/Divider.ts");const projectActionIds={NewElement:"NewElement",NewFile:"NewFile",NewDir:"NewDir",CopyReferencePopupGroup:"CopyReferencePopupGroup",CopyPaths:"CopyPaths",CopyFileReference:"CopyFileReference",CopyAbsolutePath:"CopyAbsolutePath",CopySourceRootPath:"CopySourceRootPath",CopyFileName:"CopyFileName"};function ProjectViewContextMenu({getActionContext}){return react.createElement(ActionsMenu.$,{"aria-label":"Project Tree actions",actionContext:getActionContext,actions:[{...(0,ActionsProvider.y3)(projectActionIds.NewElement),title:"New",shortcut:void 0},new Divider.V,(0,ActionsProvider.y3)(CommonActionIds.j.CUT),(0,ActionsProvider.y3)(CommonActionIds.j.COPY),(0,ActionsProvider.y3)(projectActionIds.CopyReferencePopupGroup),(0,ActionsProvider.y3)(CommonActionIds.j.PASTE),new Divider.V,(0,ActionsProvider.y3)(CommonActionIds.j.DELETE),new Divider.V].filter((i=>null!=i))})}ProjectViewContextMenu.__docgenInfo={description:"",methods:[],displayName:"ProjectViewContextMenu",props:{getActionContext:{required:!0,tsType:{name:"signature",type:"function",raw:"() => ActionContext",signature:{arguments:[],return:{name:"ActionContext"}}},description:""}}};const memoized=fn=>{const _cache=new WeakMap;return arg1=>{let result=_cache.get(arg1);return void 0===result&&(result=fn(arg1),_cache.set(arg1,result)),result}},unwrapLatest=memoized((anAtom=>{const unwrappedAtom=(0,utils.oA)(anAtom,(prev=>prev));return(0,vanilla.eU)((get=>get(unwrappedAtom)??get(anAtom)))})),unwrapLatestOrNull=memoized((anAtom=>(0,utils.oA)(anAtom,(prev=>prev??null)))),ProjectViewPane=()=>{const project=(0,esm_react.md)(currentProjectAtom),editor=useEditorStateManager(),treeRef=(0,react.useRef)(null),setProjectViewTreeRef=(0,esm_react.Xr)(projectViewTreeRefAtom);(0,react.useLayoutEffect)((()=>{setProjectViewTreeRef(treeRef)}),[treeRef]);const treeState=(0,esm_react.md)(unwrapLatest(currentProjectTreeAtom)),[expandedKeys,setExpandedKeys]=(0,esm_react.fp)(expandedKeysAtom),[selectedKeys,setSelectedKeys]=(0,esm_react.fp)(selectionAtom),sortItems=(0,esm_react.fp)(foldersOnTopState)?(0,sortBy.A)((a=>"dir"===a.type?1:2)):identity.A,selectedKeysArray="all"===selectedKeys?[]:[...selectedKeys].filter((i=>"string"==typeof i)),activePathsProviderProps=useActivePathsProvider(selectedKeysArray),containerRef=(0,react.useRef)(null),contextMenuTargetKey=(0,react.useRef)(),getActionContext=()=>({element:contextMenuTargetKey.current?containerRef.current?.querySelector(`[data-key="${CSS.escape(contextMenuTargetKey.current)}"]`)??null:null,event:null});return react.createElement(DefaultSuspense,null,treeState.root&&react.createElement(ContextMenuContainer.y,{ref:containerRef,style:{height:"100%"},onOpen:({target})=>contextMenuTargetKey.current=target?.closest("[data-key]")?.dataset.key,renderMenu:()=>react.createElement(ProjectViewContextMenu,{getActionContext})},react.createElement(SpeedSearchTree.K,{"aria-label":"Project structure tree",treeRef,...activePathsProviderProps,items:[treeState.root],onAction:path=>{"file"===treeState.byKey?.get(`${path}`)?.type&&editor.openPath(`${path}`)},fillAvailableSpace:!0,autoFocus:!0,selectionMode:"multiple",selectedKeys,onSelectionChange:setSelectedKeys,expandedKeys,onExpandedChange:setExpandedKeys},(item=>react.createElement(Item.q,{key:item.path,textValue:item.name,childItems:"children"in item?sortItems(item.children):void 0},react.createElement(ItemLayout.E,null,react.createElement(ProjectViewNodeIcon,{node:item}),"project"===item.type?react.createElement(react.Fragment,null,react.createElement("b",null,react.createElement(HighlightedTextValue.Y,null)),react.createElement(ItemLayout.E.Hint,null,project.path)):react.createElement(FileTreeNodeText,{node:item})))))))},FileTreeNodeText=({node})=>"dir"===node.type?react.createElement(FileTreeDirNodeText,{node}):react.createElement(FileTreeFileNodeText,{node}),FileTreeDirNodeText=({})=>react.createElement(HighlightedTextValue.Y,null),FileTreeFileNodeText=({node})=>{const state=(0,react.useContext)(ItemStateContext.k);return state?.isSelected&&state?.isContainerFocused?react.createElement(HighlightedTextValue.Y,null):react.createElement(FileStatusColor,{filepath:node.path},react.createElement(HighlightedTextValue.Y,null))},nodeTypeIconMap={project:"nodes/folder",dir:DIR_ICON,file:"fileTypes/text"};function ProjectViewNodeIcon({node}){const icon=function findNodeIcon(value){return"file"===value.type?getIconForFile(value.name):nodeTypeIconMap[value.type]??null}(node);return react.createElement(react.Fragment,null,icon&&react.createElement(PlatformIcon.jE,{icon}))}ProjectViewPane.__docgenInfo={description:"",methods:[],displayName:"ProjectViewPane"};var WindowLayout=__webpack_require__("./src/ModalWindow/WindowLayout.tsx"),Checkbox=__webpack_require__("./src/Checkbox/Checkbox.tsx"),HelpTooltip=__webpack_require__("./src/Tooltip/HelpTooltip.tsx");function HelpButton({tooltip="Show help contents",...props}){return react.createElement(TooltipTrigger.k,{tooltip:react.createElement(HelpTooltip.V,{helpText:tooltip})},react.createElement(Button.$,{variant:"icon","aria-label":"Help","aria-description":"Show help contents",...props},react.createElement("span",{style:{fontSize:18}},"?")))}function findRootPaths(objects,getPath=identity.A){return objects.filter((obj=>{const thePath=getPath(obj);return!objects.find((anObject=>anObject!==obj&&function isParentPath(parent,dir){return dir.startsWith(parent+path_browserify_default().sep)}(getPath(anObject),thePath)))}))}HelpButton.__docgenInfo={description:"",methods:[],displayName:"HelpButton",props:{tooltip:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Show help contents"',computed:!1}}}};const deleteFileCallback=async(get,set,filepath)=>{try{await fs.promises.unlink(filepath);const repoDir=await get(vcsFootForFileAtom(filepath));repoDir&&(await isomorphic_git.Ay.remove({fs,dir:repoDir,filepath:path_browserify_default().relative(repoDir,filepath)}),await refreshFileStatusCallback(get,set,filepath))}catch(e){console.error(`error in deleting file ${filepath}`,e)}finally{get(editorManagerAtom).closePath(filepath),set(dirContentAtom(path_browserify_default().dirname(filepath))),set(fileContentAtom(filepath))}},deleteFilesCallback=async(get,set,filePaths)=>Promise.all(filePaths.map((filePath=>deleteFileCallback(get,set,filePath)))),createDirectoryCallback=async(_get,set,destination,dirPath)=>{const fullpath=path_browserify_default().join(destination,dirPath);if(await fs.promises.exists(fullpath))throw new Error(`File ${fullpath} already exists`);await ensureDir(fs.promises,fullpath),set(dirContentAtom(destination))};var core=__webpack_require__("../../node_modules/intl-messageformat/lib/src/core.js");const isAtom=value=>"object"==typeof value&&null!==value&&"read"in value,actionAtom=({isSearchable:isSearchableValue,isDisabled:isDisabledValue,actionPerformed,...params})=>{const isDisabled=isAtom(isDisabledValue)?(0,utils.oA)(isDisabledValue,(()=>!0)):isDisabledValue,isSearchable=isAtom(isSearchableValue)?(0,utils.oA)(isSearchableValue,(()=>!1)):isSearchableValue;return(0,vanilla.eU)(((get,{setSelf})=>{const resolve=maybeAtom=>isAtom(maybeAtom)?get(maybeAtom):maybeAtom;return{...params,isDisabled:resolve(isDisabled),isSearchable:resolve(isSearchable),actionPerformed:setSelf}}),(async(get,set,...args)=>actionPerformed({get,set},...args)))},fileCountMsg=new core.S("{count, plural,\n    =1 {1 file}\n    other {# files}\n  }","en-US"),dirCountMsg=new core.S("{count, plural,\n    =1 {1 directory}\n    other {# directories}\n  }","en-US"),deleteActionAtom=actionAtom({id:CommonActionIds.j.DELETE,title:"Delete",description:"Delete selected item",isDisabled:(0,vanilla.eU)((get=>!get(activePathExistsAtom))),actionPerformed:async({get,set})=>{const selectedNodes=await get(selectedNodesAtom),windowManager=get(windowManagerRefAtom).current,alertDialog=get(alertDialogRefAtom).current;if(0===selectedNodes.length)return;const nodesToDelete=findRootPaths(selectedNodes,(node=>node.path)),filePaths=nodesToDelete.filter((node=>"file"===node.type)).map((node=>node.path)),directories=nodesToDelete.filter((node=>"project"===node.type||"dir"===node.type)).map((node=>node.path));if(directories.length>0){const singleDirName=1===directories.length&&0===filePaths.length?path_browserify_default().basename(directories[0]):null;await(alertDialog?.confirm({title:"Delete",okText:"Delete",message:react.createElement("div",{style:{width:354}},"Delete"," ",singleDirName?`"${singleDirName}"`:[{count:directories.length,message:dirCountMsg},{count:filePaths.length,message:fileCountMsg}].filter((({count})=>count>0)).map((({message,count})=>message.format({count}))).join(" and "),"?",react.createElement("br",null),"All files and subdirectories in",singleDirName?` "${singleDirName}" `:" the selected directories ","will be deleted. ",react.createElement("br",null),"You might not be able to fully undo this operation!")}))&&await Promise.all([...directories.map((pathname=>(async(get,set,dir)=>{const recursivelyDeleteDir=async dirname=>{const pathnames=await fs.promises.readdir(dirname);await Promise.all(pathnames.map((async pathname=>{const fullpath=path_browserify_default().resolve(dirname,pathname),stat=await fs.promises.stat(fullpath);stat.isFile()?await deleteFileCallback(get,set,fullpath):stat.isDirectory()&&await recursivelyDeleteDir(fullpath)}))),await fs.promises.rmdir(dirname),set(dirContentAtom(dir))};try{await recursivelyDeleteDir(dir)}catch(e){console.error(`error in deleting directory ${dir}`,e)}finally{set(dirContentAtom(path_browserify_default().dirname(dir)))}})(get,set,pathname))),deleteFilesCallback(get,set,filePaths)])}else windowManager?.open((({close})=>react.createElement(DeleteFilesConfirmationDialog,{filePaths,close}))).then((confirmed=>{confirmed&&requestAnimationFrame((()=>{deleteFilesCallback(get,set,filePaths)}))}))}});function DeleteFilesConfirmationDialog({close,filePaths}){return react.createElement(ModalWindow.QI,{minWidth:"content",minHeight:"content"},react.createElement(WindowLayout.$,{header:"Delete",content:react.createElement("form",{id:"delete_dialog_form",onSubmit:e=>{e.preventDefault()},style:{padding:"0.75rem 1rem"}},react.createElement("div",{style:{marginBottom:".5rem"}},1===filePaths.length?`Delete file "${path_browserify_default().basename(filePaths[0])}"`:`Delete ${filePaths.length} files`,"?"),react.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"}},react.createElement(Checkbox.S,{isDisabled:!0},"Safe delete (with usage search)"),react.createElement("div",{style:{display:"flex",gap:"1rem"}},react.createElement(Checkbox.S,{isDisabled:!0},"Search in comments and strings"),react.createElement(Checkbox.S,{isDisabled:!0},"Search for text occurrences")))),footer:react.createElement(WindowLayout.$.Footer,{left:react.createElement(HelpButton,{onPress:()=>notImplemented()}),right:react.createElement(react.Fragment,null,react.createElement(Button.$,{onPress:()=>close()},"Cancel"),react.createElement(Button.$,{autoFocus:!0,type:"submit",form:"delete_dialog_form",variant:"default",onPress:()=>{close(!0)}},"Ok"))})}))}const copyActionAtom=actionAtom({id:CommonActionIds.j.COPY,title:"Copy",description:"Copy to clipboard",icon:react.createElement(PlatformIcon.jE,{icon:"actions/copy"}),isDisabled:(0,vanilla.eU)((get=>!get(activePathExistsAtom))),actionPerformed:async()=>{notImplemented()}}),cutActionAtom=actionAtom({id:CommonActionIds.j.CUT,title:"Cut",description:"Cut to clipboard",icon:react.createElement(PlatformIcon.jE,{icon:"actions/menu-cut"}),isDisabled:(0,vanilla.eU)((get=>!get(activePathExistsAtom))),actionPerformed:async()=>{notImplemented()}}),pasteActionAtom=actionAtom({id:CommonActionIds.j.PASTE,title:"Paste",description:"Paste from clipboard",icon:react.createElement(PlatformIcon.jE,{icon:"actions/menu-paste"}),isDisabled:(0,vanilla.eU)((get=>!get(activePathExistsAtom))),actionPerformed:async()=>{notImplemented()}}),{SELECT_IN_PROJECT_VIEW}={SELECT_IN_PROJECT_VIEW:"SelectInProjectView"};function ProjectToolWindow(){const treeRef=(0,esm_react.md)(projectViewTreeRefAtom),actions=(0,useTreeActions.T)({treeRef}),projectViewActions=function useProjectViewActions(){const activeTab=(0,esm_react.md)(activeEditorTabAtom),selectPathInProjectView=useSelectPathInProjectView(),selectOpenedFile=()=>{activeTab&&selectPathInProjectView(activeTab.filePath)};return[{id:SELECT_IN_PROJECT_VIEW,title:"Select Opened File",icon:react.createElement(PlatformIcon.jE,{icon:"general/locate"}),actionPerformed:selectOpenedFile,isDisabled:!activeTab,description:"Selects a context file in the Project View"},(0,esm_react.md)(deleteActionAtom),(0,esm_react.md)(cutActionAtom),(0,esm_react.md)(copyActionAtom),(0,esm_react.md)(pasteActionAtom)]}();return react.createElement(DefaultToolWindow.s,{headerContent:"Project",actions:[...actions,...projectViewActions],additionalActions:react.createElement(react.Fragment,null,react.createElement(ActionButton.r,{actionId:SELECT_IN_PROJECT_VIEW}),react.createElement(ActionButton.r,{actionId:CommonActionIds.j.EXPAND_ALL}),react.createElement(ActionButton.r,{actionId:CommonActionIds.j.COLLAPSE_ALL}))},react.createElement(ProjectViewPane,null))}ProjectToolWindow.__docgenInfo={description:"",methods:[],displayName:"ProjectToolWindow"};var MultiViewToolWindow=__webpack_require__("./src/ToolWindowsImpl/MultiViewToolWindow.tsx"),ToolWindowStateProvider=__webpack_require__("./src/ToolWindows/ToolWindowsState/ToolWindowStateProvider.tsx"),ToolWindows_utils=__webpack_require__("./src/ToolWindows/utils.ts"),ThreeViewSplitter=__webpack_require__("./src/ThreeViewSplitter/ThreeViewSplitter.tsx");const DEFAULT_LOADING_DELAY_MS=500;function Delayed({children}){const[waitedEnough,setWaitedEnough]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{const timer=setTimeout((()=>{setWaitedEnough(!0)}),DEFAULT_LOADING_DELAY_MS);return()=>clearTimeout(timer)}),[]),waitedEnough?react.createElement(react.Fragment,null,children):null}Delayed.__docgenInfo={description:"",methods:[],displayName:"Delayed",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};var groupBy=__webpack_require__("../../node_modules/ramda/es/groupBy.js");const Tagged=change=>change;function Change(before,after){return after?before?before.path!==after.path?(0,path_browserify.dirname)(before.path)===(0,path_browserify.dirname)(after.path)?Tagged({type:"RENAMED",before,after}):Tagged({type:"MOVED",before,after}):Tagged({type:"MODIFIED",before,after}):Tagged({type:"ADDED",after}):Tagged({type:"DELETED",before})}Change.Unversioned=revision=>Tagged({type:"UNVERSIONED",after:revision});const changeToFileStatus={ADDED:"ADDED",DELETED:"DELETED",MOVED:"MODIFIED",RENAMED:"MODIFIED",MODIFIED:"MODIFIED",UNVERSIONED:"UNKNOWN"};function revisionEquals(a,b){return a?.path===b?.path&&a.isDir===b.isDir}Change.fileStatus=function(change){return changeToFileStatus[change.type]??"NOT_CHANGED"},Change.path=function(change){return Change.revision(change).path},Change.content=function(change){return"after"in change?change.after.content():"before"in change?change.before.content():Promise.resolve("")},Change.isAddition=function(change){return"ADDED"===change.type},Change.isDeletion=function(change){return"DELETED"===change.type},Change.isRename=function(change){return"RENAMED"===change.type},Change.isMove=function(change){return"MOVED"===change.type},Change.isModified=function(change){return"MODIFIED"===change.type},Change.isUnversioned=function(change){return"UNVERSIONED"===change.type},Change.revision=function(change){return"after"in change?change.after:change.before},Change.equals=function(a,b){const sameBefore="before"in a&&"before"in b?revisionEquals(a.before,b.before):"before"in a=="before"in b,sameAfter="after"in a&&"after"in b?revisionEquals(a.after,b.after):"after"in a=="after"in b;return sameBefore&&sameAfter};const repoChangesAtoms=(0,utils.Iz)((repoDir=>(0,vanilla.eU)((get=>Object.entries(get(repoStatusAtoms(repoDir))).map((([filename,status])=>{const revision={path:path_browserify_default().join(repoDir,filename),isDir:!1,content(){throw new Error("Not implemented")}};return"ADDED"===status?Change(null,revision):"MODIFIED"===status?Change(revision,revision):"DELETED"===status?Change(revision,null):"UNKNOWN"===status?Change.Unversioned(revision):null})).filter((i=>null!=i)))))),allChangesAtom=(0,vanilla.eU)((get=>get(vcsRootsAtom).map((({dir})=>get(repoChangesAtoms(dir)))).flat())),rollbackChangesCallback=async(get,set,changes,deleteAddedFiles)=>{const reloadFileFromDisk=reloadFileFromDiskCallback(get,set),changesWithRepoRoots=(await Promise.all(changes.filter((change=>!Change.revision(change).isDir)).map((async change=>{const repoRoot=await get(vcsFootForFileAtom(Change.path(change)));if(repoRoot)return{repoRoot,change,relativePath:path_browserify_default().relative(repoRoot,Change.path(change))}})))).filter((i=>null!=i)),groupedChanges=(0,groupBy.A)((({repoRoot})=>repoRoot),changesWithRepoRoots);await Promise.all(Object.entries(groupedChanges).map((async([repoRoot,items])=>{const{toReset=[],toCheckout=[]}=(0,groupBy.A)((({change:{type}})=>"ADDED"!==type||deleteAddedFiles?"toCheckout":"toReset"),items);if(await Promise.allSettled(toReset.map((({relativePath})=>(0,isomorphic_git.gn)({fs,dir:repoRoot,filepath:relativePath})))),toCheckout.length>0){await isomorphic_git.Ay.resolveRef({fs,dir:repoRoot,ref:"HEAD"}).catch((()=>null))?await(0,isomorphic_git.Pt)({fs,dir:repoRoot,force:!0,filepaths:toCheckout.map((({relativePath,change:{type}})=>relativePath))}):await Promise.all(toCheckout.filter((({change})=>"ADDED"===change.type)).map((({change})=>{const fullPath=Change.path(change);return fs.promises.unlink(fullPath)})))}if(deleteAddedFiles){const editor=get(editorManagerAtom);changes.filter(Change.isAddition).forEach((change=>{editor.closePath(Change.path(change))}))}findRootPaths(items.flatMap((({change})=>"MODIFIED"===change.type?[]:"MOVED"===change.type?[change.before.path,change.after.path]:Change.path(change)))).map(path_browserify_default().dirname).forEach((pathToRefresh=>set(dirContentAtom(pathToRefresh)))),await Promise.allSettled(items.map((async({relativePath,change})=>{const fullPath=Change.path(change);await reloadFileFromDisk(fullPath),await(0,isomorphic_git.gn)({fs,dir:repoRoot,filepath:relativePath}),await refreshFileStatusCallback(get,set,fullPath)})))})))},changeListsAtom=(0,vanilla.eU)([{id:"some-UUID",name:"Changes",comment:"last modified commit message",changes:[],active:!0},{id:"some-other-UUID",name:"Some other changelist",comment:"Some empty changelist for testing",changes:[],active:!1}]),activeChangeListState=(0,vanilla.eU)((get=>get(changeListsAtom).find((changeList=>changeList.active))??null)),unversionedChangesAtom=(0,vanilla.eU)((get=>get(allChangesAtom).filter(Change.isUnversioned)));function SyncChangeListsState(){const changes=(0,esm_react.md)(allChangesAtom),setChangeLists=(0,esm_react.Xr)(changeListsAtom);return(0,react.useEffect)((()=>{setChangeLists((changeLists=>{const trackedChanges=changes.filter((change=>!Change.isUnversioned(change))),updatedChangeLists=changeLists.map((changeList=>({...changeList,changes:changeList.changes.map((change=>trackedChanges.find((aChange=>Change.equals(aChange,change))))).filter((i=>null!=i))}))),existingChanges=updatedChangeLists.flatMap((({changes})=>changes)),newChanges=trackedChanges.filter((change=>!existingChanges.find((anExistingChange=>Change.equals(change,anExistingChange)))));return(updatedChangeLists.find((({active})=>active))??updatedChangeLists[0]).changes.push(...newChanges),updatedChangeLists}))}),[changes]),null}var uniq=__webpack_require__("../../node_modules/ramda/es/uniq.js");const createGroupByDirectory=({getPath,mapNode=identity.A,createDirectoryNode=i=>i,shouldCollapseDirectories=!1})=>nodes=>{const pathToNodeCache={},rootDirNodes=nodes.map(mapNode).map((node=>{const filepath=getPath(node);return getParentPaths(filepath.startsWith("/")?filepath:`/${filepath}`).reduce(((prevNode,dirPath)=>{pathToNodeCache[dirPath]||(pathToNodeCache[dirPath]=createDirectoryNode({type:"directory",dirPath,parentNodePath:"",children:[]})),isDirectoryNode(prevNode)&&(prevNode.parentNodePath=dirPath);const dirNode=pathToNodeCache[dirPath];return dirNode.children=dirNode.children.includes(prevNode)?dirNode.children:[prevNode,...dirNode.children],dirNode}),node)})),directoryNodes=(0,uniq.A)(rootDirNodes);return shouldCollapseDirectories?directoryNodes.map((node=>collapseDirectories(createDirectoryNode,node))):directoryNodes};function isDirectoryNode(node){return"type"in node&&"directory"===node.type}function collapseDirectories(createDirectorNode,dirNode){let{children,dirPath,parentNodePath}=dirNode;return 1===dirNode.children.length&&isDirectoryNode(dirNode.children[0])?(dirPath=dirNode.children[0].dirPath,children=dirNode.children[0].children.map((child=>isDirectoryNode(child)?collapseDirectories(createDirectorNode,{...child,parentNodePath:dirPath}):child)),collapseDirectories(createDirectorNode,createDirectorNode({type:"directory",dirPath,parentNodePath,children}))):{...dirNode,children:children.map((child=>isDirectoryNode(child)?collapseDirectories(createDirectorNode,child):child))}}const VcsActionIds={ROLLBACK:"ChangesView.Revert",REFRESH:"ChangesView.Refresh",SHELVE_SILENTLY:"ChangesView.ShelveSilently",SHELVE:"ChangesView.Shelve",UNSHELVE_SILENTLY:"ChangesView.UnshelveSilently",NEW_CHANGELIST:"ChangesView.NewChangeList",ADD_UNVERSIONED:"ChangesView.AddUnversioned",RENAME_CHANGELIST:"ChangesView.Rename",REMOVE_CHANGELIST:"ChangesView.RemoveChangeList",SET_DEFAULT_CHANGELIST:"ChangesView.SetDefault",MOVE_TO_ANOTHER_CHANGELIST:"ChangesView.Move",GROUP_BY_DIRECTORY:"ChangesView.GroupBy.Directory",CREATE_PATCH_FROM_CHANGES:"ChangesView.CreatePatchFromChanges",SHOW_DIFF:"Diff.ShowDiff",SHOW_DIFF_STANDALONE:"Diff.ShowStandaloneDiff",CHECKIN_FILES:"CheckinFiles",CHECKIN_PROJECT:"CheckinProject",JUMP_TO_SOURCE:CommonActionIds.j.EDIT_SOURCE,GROUP_CHANGES_VIEW_POPUP_MENU:"ChangesViewPopupMenu",GIT_ADD:"Git.Add",GIT_INIT:"Git.Init",GIT_PUSH:"Vcs.Push",GIT_CLONE:"Git.Clone",GIT_CREATE_NEW_BRANCH:"Git.CreateNewBranch",GIT_BRANCHES:"Git.Branches",GIT_LOG_HIDE_BRANCHES:"Git.Log.Hide.Branches",GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH:"Git.Log.Branches.Navigate.Log.To.Selected.Branch",GIT_UPDATE_SELECTED:"Git.Update.Selected",FOCUS_TEXT_FILTER:"Vcs.Log.FocusTextFilter",MATCH_CASE:"Vcs.Log.MatchCaseAction",REG_EXP:"Vcs.Log.EnableFilterByRegexAction",COPY_REVISION_NUMBER:"Vcs.CopyRevisionNumberAction",LOG_REFRESH:"Vcs.Log.Refresh",SHOW_DETAILS:"Vcs.Log.ShowDetailsAction",SHOW_DIFF_PREVIEW:"Vcs.Log.ShowDiffPreview",VCS_LOG_CONTEXT_MENU:"Vcs.Log.ContextMenu",PRESENTATION_SETTINGS:"Vcs.PresentationSettings",FILE_HISTORY_PRESENTATION_SETTINGS:"Vcs.FileHistory.PresentationSettings",COMPARE_WITH_LOCAL:"Vcs.ShowDiffWithLocal",CopyPathFromRepositoryRootProvider:"CopyPathFromRepositoryRootProvider"},changesTreeNodeKey=(type,id)=>`${type}_${id}`,getNodeKeyForChange=change=>changesTreeNodeKey("change",Change.path(change)),changeNode=(change,showPath=!0)=>({type:"change",key:getNodeKeyForChange(change),change,showPath}),isGroupNode=node=>"children"in node,isChangeNode=node=>"change"===node.type,getChildren=node=>isGroupNode(node)?node.children:null,repositoryGrouping={id:"repository",title:"Repository",isAvailable:(0,vanilla.eU)((get=>get(vcsRootsAtom).length>1)),groupFn:(0,vanilla.eU)((get=>nodes=>get(vcsRootsAtom).map((repository=>((repository,children=[])=>({type:"repo",key:changesTreeNodeKey("repo",repository.dir),repository,children}))(repository,nodes.filter((node=>Change.path(node.change)?.startsWith(repository.dir))))))))},directoryGrouping={id:"directory",title:"Directory",isAvailable:!0,useShortcutOf:VcsActionIds.GROUP_BY_DIRECTORY,groupFn:createGroupByDirectory({shouldCollapseDirectories:!0,createDirectoryNode:({dirPath,parentNodePath,children})=>((dirPath,parentNodePath,children=[],keyPrefix="")=>({type:"directory",key:keyPrefix+changesTreeNodeKey("directory",dirPath),dirPath,parentNodePath,children}))(dirPath,parentNodePath,children),mapNode:node=>changeNode(node.change,!1),getPath:node=>Change.path(node.change)})},defaultChangeGroupings=[repositoryGrouping,directoryGrouping],defaultChangeGroupingsAtom=(0,vanilla.eU)((get=>defaultChangeGroupings.filter((grouping=>isAtom(grouping.isAvailable)?get(grouping.isAvailable):grouping.isAvailable)))),recursiveGrouping=(groupingFns,nodes)=>{if(0===groupingFns.length||0===nodes.length)return nodes;const nextGroupingFns=groupingFns.slice(1),changeNodes=nodes.filter(isChangeNode),groupNodes=nodes.filter(isGroupNode),groups=groupingFns[0](changeNodes);return[...groupNodes,...groups].forEach((groupNode=>{groupNode.children=recursiveGrouping(nextGroupingFns,groupNode.children)})),groups.filter((group=>group.children.length>0))},getPrefixedChangesGroupFn=({get,isActive,groupings})=>keyPrefix=>{const resolve=value=>isAtom(value)?get(value):value,groupFns=groupings.filter((({id,isAvailable})=>resolve(isAvailable)&&resolve(isActive(id)))).map((({groupFn})=>resolve(groupFn))).map((groupFn=>keyPrefix?(...args)=>groupFn(...args).map((group=>({...group,key:`${keyPrefix}:${group.key}`}))):groupFn));return changes=>recursiveGrouping(groupFns,changes)};var tree_utils=__webpack_require__("./src/utils/tree-utils.ts");const collectSelectableItemsRecursive=(item,getChildren,collectedItems=[])=>{const children=getChildren(item);null==children?collectedItems.push(item):children.forEach((child=>collectSelectableItemsRecursive(child,getChildren,collectedItems)))};class NestedSelection{state;tree;cache;constructor(state,tree){this.state=state,this.tree=tree,this.cache=new WeakMap,this.tree=tree,this.state=state}toggle(item){const children=this.tree.getChildren(item),key=this.tree.getKey(item);if(null==children)this.state.toggle(key);else{const state=this.getSelectionState(item),itemsInSubtree=((item,getChildren)=>{const collectedItems=[];return collectSelectableItemsRecursive(item,getChildren,collectedItems),collectedItems})(item,(item=>normalizeChildren(this.tree.getChildren(item)))).map(this.tree.getKey);"Selected"===state?this.state.delete(...itemsInSubtree):this.state.add(...itemsInSubtree)}}getSelectionState(item){const cachedState=this.cache.get(item);if(cachedState)return cachedState;const children=normalizeChildren(this.tree.getChildren(item)),key=this.tree.getKey(item);let state;if(null==children)state=[...this.state.items].includes(key)?"Selected":"NotSelected";else{const allDescendantsStates=children.map((child=>this.getSelectionState(child)));state=allDescendantsStates.every((state=>"NotSelected"===state))?"NotSelected":allDescendantsStates.every((state=>"Selected"===state))?"Selected":"PartiallySelected"}return this.cache.set(item,state),state}}function normalizeChildren(children){return children?[].concat(children):null}var useControlledState=__webpack_require__("../../node_modules/@react-stately/utils/dist/useControlledState.mjs");class ImmutableSet{size;set;constructor(values){this.set=new Set(values),this.size=this.set.size}add(...items){return this.setValueWithMutation((newValue=>{items.forEach((item=>{newValue.add(item)}))}))}delete(...items){return this.setValueWithMutation((newValue=>{items.forEach((item=>{newValue.delete(item)}))}))}toggle(...items){return this.setValueWithMutation((newValue=>{items.forEach((item=>{newValue.delete(item)||newValue.add(item)}))}))}clear(){return this.setValueWithMutation((newValue=>{newValue.clear()}))}setValueWithMutation(mutate){const newValue=new Set(this.set);return mutate(newValue),new ImmutableSet(newValue)}forEach(...args){return this.set.forEach(...args)}has(value){return this.set.has(value)}[Symbol.iterator](){return this.set[Symbol.iterator]()}entries(){return this.set.entries()}keys(){return this.set.keys()}values(){return this.set.values()}}const createSetInterface=set=>({add:(...values)=>set((currentValue=>new Set(new ImmutableSet(currentValue).add(...values)))),delete:(...values)=>set((currentValue=>new Set(new ImmutableSet(currentValue).delete(...values)))),clear:()=>set((currentValue=>new Set(new ImmutableSet(currentValue).clear()))),toggle:(...values)=>set((currentValue=>new Set(new ImmutableSet(currentValue).toggle(...values))))});function useStateSetterForSet(setValue){return(0,react.useMemo)((()=>createSetInterface(setValue)),[setValue])}const isOpenAtom=(0,vanilla.eU)(!1),windowBoundsAtom=(0,vanilla.eU)({height:500}),initiallyIncludedChangesAtom=(0,vanilla.eU)([]),rootNodesAtom=(0,vanilla.eU)((get=>{const selectedChanges=get(initiallyIncludedChangesAtom),{rootNodes}=get(changesTreeNodesAtom),includedRootNodes=rootNodes.filter((node=>"changelist"===node.type&&selectedChanges.some((change=>node.changeList.changes.includes(change)))));return 0===includedRootNodes.length?rootNodes.filter((node=>"changelist"===node.type&&node.changeList.active)):includedRootNodes})),rollbackViewState={isOpenAtom,windowBoundsAtom,initiallyExpandedKeysAtom:(0,vanilla.eU)((get=>{const includedChanges=get(initiallyIncludedChangesAtom),nodes=get(rootNodesAtom),expandedKeys=(0,tree_utils.Gw)((node=>isGroupNode(node)?node.children:null),(node=>node.key),nodes,includedChanges.map(getNodeKeyForChange));return new Set(expandedKeys.length?expandedKeys:(0,tree_utils.MM)((node=>isGroupNode(node)?node.children:null),(node=>node.key),nodes))})),initiallyIncludedChangesAtom,rootNodesAtom};function changesTreeNodesResult(rootNodes){const fileCountsMap=new Map,byKey=new Map,expandAllKeys=new Set;return(0,tree_utils.Rh)(getChildren,((node,childrenFileCount)=>{if(byKey.set(node.key,node),"children"in node&&expandAllKeys.add(node.key),!childrenFileCount)return 1;const fileCount=childrenFileCount.reduce(((total,count)=>total+count),0);return fileCountsMap.set(node.key,fileCount),fileCount}),rootNodes),{rootNodes,fileCountsMap,byKey,expandAllKeys}}const changeListNode=changeList=>({type:"changelist",key:changesTreeNodeKey("changelist",changeList.id),changeList,children:changeList.changes.map((change=>changeNode(change)))}),showIgnoredFilesAtom=(0,vanilla.eU)(!1),showRelatedFilesAtom=(0,vanilla.eU)(!1),changesGroupingActiveState=(0,utils.Iz)((name=>(0,vanilla.eU)(!0))),selectedKeysAtom=(0,vanilla.eU)(new Set([])),resolvedSelectedKeysAtom=(0,vanilla.eU)((get=>{const selection=get(selectedKeysAtom);if("all"===selection){const{rootNodes}=get(changesTreeNodesAtom);return new Set((0,tree_utils.Ni)((node=>"children"in node?node.children:[]),((node,parentValue)=>{const nodes=parentValue??[];return nodes.push(node),nodes}),rootNodes).flat().map((node=>node.key)))}return selection})),ChangesView_state_selectedNodesAtom=(0,vanilla.eU)((get=>{const selectedKeys=get(resolvedSelectedKeysAtom),{byKey}=get(changesTreeNodesAtom);return new Set([...selectedKeys].map((key=>byKey.get(key))).filter((i=>null!=i)))})),changesUnderSelectedKeysAtom=(0,vanilla.eU)((get=>{const selectedNodes=get(ChangesView_state_selectedNodesAtom),allChanges=new Set,processNode=node=>{node&&("change"===node.type&&allChanges.add(node.change),isGroupNode(node)&&node.children.forEach(processNode))};return selectedNodes.forEach(processNode),allChanges})),changeListsUnderSelection=(0,vanilla.eU)((get=>{const selectedNodes=get(ChangesView_state_selectedNodesAtom),allChangeLists=get(changeListsAtom),selectedChangeLists=new Set,processNode=node=>{if(node){if("changelist"===node.type&&selectedChangeLists.add(node.changeList),"change"===node.type){const changeList=allChangeLists.find((changeList=>changeList.changes.includes(node.change)));changeList&&selectedChangeLists.add(changeList)}isGroupNode(node)&&node.children.forEach(processNode)}};return selectedNodes.forEach(processNode),selectedChangeLists})),includedChangeKeysAtom=(0,vanilla.eU)(new Set([])),includedChangesAtom=(0,vanilla.eU)((get=>{const includedChangeKeys=get(includedChangeKeysAtom);return get(allChangesAtom).filter((change=>includedChangeKeys.has(getNodeKeyForChange(change))))})),includedChangesNestedSelectionAtom=(0,vanilla.eU)(((get,{setSelf})=>{const{rootNodes}=get(changesTreeNodesAtom),includedChangeKeys=get(includedChangeKeysAtom);return new NestedSelection({items:includedChangeKeys,...createSetInterface(setSelf)},{rootNodes,getChildren:item=>isGroupNode(item)?item.children:null,getKey:item=>item.key})}),((_get,set,updater)=>{set(includedChangeKeysAtom,updater)})),ChangesView_state_expandedKeysAtom=(0,utils.t_)((get=>new Set(get(changesTreeNodesAtom).rootNodes.map((node=>[node.key,...node.children.map((child=>child.key))])).flat()))),changesViewGroupingsState=(0,vanilla.eU)((get=>get(defaultChangeGroupingsAtom).map((grouping=>({...grouping,isActive:get(changesGroupingActiveState(grouping.id))}))))),groupChildren=(node,groupFn)=>({...node,children:groupFn(node.children)}),changesTreeNodesAtom=(0,vanilla.eU)((get=>{const changeListNodes=(0,sortBy.A)((({active})=>!active),get(changeListsAtom)).map(changeListNode),prefixedGroupFn=getPrefixedChangesGroupFn({get,groupings:defaultChangeGroupings,isActive:changesGroupingActiveState}),unversionedChanges=get(unversionedChangesAtom),rootNodes=changeListNodes.map((changeListNode=>groupChildren(changeListNode,prefixedGroupFn(changeListNode.key))));if(unversionedChanges.length>0){const unversionedChangesNode={key:"unversioned",type:"unversioned",children:unversionedChanges.map((change=>changeNode(change)))};rootNodes.push(groupChildren(unversionedChangesNode,prefixedGroupFn("unversioned")))}return changesTreeNodesResult(rootNodes)})),commitMessageSizeState=(0,utils.Iz)((orientation=>(0,vanilla.eU)("horizontal"===orientation?.4:.3))),amendCommitAtom=(0,vanilla.eU)(!1),commitMessageAtom=(0,vanilla.eU)(""),commitErrorMessageAtom=(0,vanilla.eU)(""),commitTaskIdAtom=(0,vanilla.eU)(null),changesFromActivePathsAtom=(0,vanilla.eU)((get=>{const activePaths=get(activePathsAtom);return get(allChangesAtom).filter((change=>activePaths.some((activePath=>Change.path(change).startsWith(activePath)))))})),queueCheckInCallback=(get,set,paths)=>{const includedChangeKeys=(paths?get(allChangesAtom).filter((change=>paths.some((activePath=>Change.path(change).startsWith(activePath))))):get(changesFromActivePathsAtom)).map(getNodeKeyForChange);if(set(includedChangeKeysAtom,new Set(includedChangeKeys)),includedChangeKeys.length>0){const expandedKeys=(0,tree_utils.Gw)((node=>isGroupNode(node)?node.children:null),(node=>node.key),get(changesTreeNodesAtom).rootNodes,includedChangeKeys);set(ChangesView_state_expandedKeysAtom,(currentExpandedKeys=>new Set([...currentExpandedKeys??new Set,...expandedKeys]))),set(selectedKeysAtom,new Set([includedChangeKeys[0]]))}},openRollbackWindowForSelectionCallback=(get,set,contextual=!0)=>{const activePaths=get(activePathsAtom),changesUnderSelection=get(changesUnderSelectedKeysAtom),changesBasedOnActivePaths=contextual&&activePaths.length>0?get(changesFromActivePathsAtom):null;set(rollbackViewState.initiallyIncludedChangesAtom,changesBasedOnActivePaths??[...changesUnderSelection]),set(rollbackViewState.isOpenAtom,!0)},SpeedSearchTreeWithCheckboxes=react.forwardRef((({nestedSelection,cacheInvalidation,onNodeKeyDown,...props},ref)=>{const otherInvalidators="object"==typeof cacheInvalidation?cacheInvalidation.invalidators:[];return react.createElement(SpeedSearchTree.K,{ref,...props,cacheInvalidation:{invalidators:[nestedSelection,...otherInvalidators]},onNodeKeyDown:(event,item)=>{" "===event.key&&item.value&&nestedSelection.toggle(item.value),onNodeKeyDown?.(event,item)}})}));SpeedSearchTreeWithCheckboxes.__docgenInfo={description:"Experimental wrapper component around SpeedSearchTree, which allows rendering {@link TreeNodeCheckbox} in nodes.\n\nSee [design-decisions.md](../Tree/design-decisions.md) for more thoughts about how should different features\nlike this be supported.\n\n@alpha",methods:[],displayName:"SpeedSearchTreeWithCheckboxes",props:{cacheInvalidation:{required:!1,tsType:{name:"union",raw:"boolean | { invalidators: ReadonlyArray<unknown> }",elements:[{name:"boolean"},{name:"signature",type:"object",raw:"{ invalidators: ReadonlyArray<unknown> }",signature:{properties:[{key:"invalidators",value:{name:"ReadonlyArray",elements:[{name:"unknown"}],raw:"ReadonlyArray<unknown>",required:!0}}]}}]},description:"Defines cache invalidation policy for items. By default, the render result is cached based on the item objects.\nThis is equivalent of passing false or not passing anything for `cacheInvalidation`. If `true` is passed, it will\nalways invalidate the render result, causing the collection to be recreated on each re-render. It can\nconsiderably affect performance in large collections. in addition to boolean value, an object with the list of\ninvalidators can also be passed. renderer function is called each time any of the invalidators are changed.\nThink of it as [dependency array in react hooks](https://reactjs.org/docs/hooks-reference.html#usememo). Except\nthat the length of the array can also safely change."},fillAvailableSpace:{required:!1,tsType:{name:"boolean"},description:""},showAsFocused:{required:!1,tsType:{name:"boolean"},description:"When true, shows the tree in focused style, even when it's not focused. A common use case is when the tree\nis virtually focused. i.e. the focus is physically on some other element (like a search input) which handles\nkeyboard events as if the tree was focused."},treeRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"TreeRefValue"}],raw:"RefObject<TreeRefValue>"},description:""},className:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},keepSearchActiveOnBlur:{required:!1,tsType:{name:"union",raw:"boolean | ((e: React.FocusEvent) => boolean)",elements:[{name:"boolean"},{name:"unknown"}]},description:""},hideSpeedSearchPopup:{required:!1,tsType:{name:"boolean"},description:"Whether speed search popup should not be shown. Useful when speed search state is controlled, and\na search input is rendered outside the tree."},nestedSelection:{required:!0,tsType:{name:"NestedSelectionState",elements:[{name:"T"}],raw:"NestedSelectionState<T>"},description:""}},composes:["Omit"]};var TreeContext=__webpack_require__("./src/Tree/TreeContext.tsx");const StyledCheckboxWrapper=styled_components_browser_esm.Ay.span`
  margin-right: 0.125rem;
  display: inline-flex;
`,TreeNodeCheckbox=({selectionState,onToggle,selectItemOnPress=!0})=>{const treeContext=(0,react.useContext)(TreeContext.U),itemContext=(0,react.useContext)(ItemStateContext.k);if(!itemContext)throw new Error("TreeNodeCheckbox is rendered outside tree nodes.");return react.createElement(StyledCheckboxWrapper,null,react.createElement(Checkbox.S,{preventFocus:!0,"aria-label":`Select ${itemContext.node.textValue}`,isSelected:"Selected"===selectionState,isIndeterminate:"PartiallySelected"===selectionState,isDisabled:itemContext.isDisabled,onChange:()=>{onToggle(),treeContext&&itemContext&&selectItemOnPress&&(treeContext.state.selectionManager.setFocusedKey(itemContext.node.key),treeContext.state.selectionManager.setFocused(!0),treeContext.state.selectionManager.setSelectedKeys([itemContext.node.key]))}}))};TreeNodeCheckbox.__docgenInfo={description:"Checkbox to be used with {@link SpeedSearchTreeWithCheckboxes}. `SpeedSearchTreeWithCheckboxes` doesn't add the\ncheckboxes by default to the nodes, which makes it more flexible in terms of which nodes should have checkbox, or\nit's exact placement within the tree rows.\n\nTreeNodeCheckbox renders a Checkbox with a few extras:\n- `aria-label` set based on the encompassing item's textValue\n- `isSelected` and `isIndeterminate` set based on `selectionState`\n- `isDisabled` is set based in disabled state of the item.\n- The encompassing item will be selected upon press, if `selectItemOnPress` is `true` (default is `true`).\n- Small styling adjustment achieved by a wrapper StyledListIconWrapper.\n\n@see SpeedSearchTreeWithCheckboxes\n@see useNestedSelectionState\n\nNOTE: this component currently uses TreeContext, to get a hold of selectionManager. If a more abstract component\nlike CollectionCheckbox is needed in the future, we can refactor TreeContext also to something more abstract like\nCollectionContext which is provided by all such components like List, Tree or Table.",methods:[],displayName:"TreeNodeCheckbox",props:{selectionState:{required:!1,tsType:{name:"union",raw:'"NotSelected" | "Selected" | "PartiallySelected"',elements:[{name:"literal",value:'"NotSelected"'},{name:"literal",value:'"Selected"'},{name:"literal",value:'"PartiallySelected"'}]},description:""},selectItemOnPress:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},onToggle:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ChangesViewTreeContextMenu=()=>0===[...(0,esm_react.md)(selectedKeysAtom)].length?null:react.createElement(ActionsMenu.$,{"aria-label":"Changes actions",actions:[(0,ActionsProvider.y3)(VcsActionIds.CHECKIN_FILES),(0,ActionsProvider.y3)(VcsActionIds.ROLLBACK),(0,ActionsProvider.y3)(VcsActionIds.JUMP_TO_SOURCE),new Divider.V,(0,ActionsProvider.y3)(VcsActionIds.SHELVE),new Divider.V,(0,ActionsProvider.y3)(VcsActionIds.NEW_CHANGELIST),(0,ActionsProvider.y3)(VcsActionIds.RENAME_CHANGELIST),(0,ActionsProvider.y3)(VcsActionIds.REMOVE_CHANGELIST),(0,ActionsProvider.y3)(VcsActionIds.SET_DEFAULT_CHANGELIST),(0,ActionsProvider.y3)(VcsActionIds.MOVE_TO_ANOTHER_CHANGELIST),new Divider.V,(0,ActionsProvider.y3)(CommonActionIds.j.REFRESH)].filter((i=>null!=i))});ChangesViewTreeContextMenu.__docgenInfo={description:"",methods:[],displayName:"ChangesViewTreeContextMenu"};var focusAtom=__webpack_require__("../../node_modules/jotai-optics/dist/focusAtom.js");async function asyncFilter(predicate,array){const predicateResult=await Promise.all(array.map((item=>predicate(item).catch((()=>!1)))));return array.filter(((item,index)=>predicateResult[index]))}async function getTrackingBranch({fs,dir,localBranchName}){const mergeRef=await isomorphic_git.Ay.getConfig({fs,dir,path:`branch.${localBranchName}.merge`}),remote=await isomorphic_git.Ay.getConfig({fs,dir,path:`branch.${localBranchName}.remote`});return mergeRef&&remote?`${remote}/${mergeRef.replace(/^refs\/heads\//,"")}`:null}const repoLocalBranchesAtom=(0,utils.Iz)((repoRoot=>atomWithRefresh((async({})=>{const branches=await isomorphic_git.Ay.listBranches({fs,dir:repoRoot});return Promise.all(branches.map((async branch=>({name:branch,trackingBranch:await getTrackingBranch({fs,dir:repoRoot,localBranchName:branch})}))))})))),repoRemotesAtoms=(0,utils.Iz)((repoRoot=>atomWithRefresh((()=>isomorphic_git.Ay.listRemotes({fs,dir:repoRoot}))))),repoRemoteBranchesAtoms=(0,utils.Iz)((repoRoot=>atomWithRefresh((async get=>{const remotes=await get(repoRemotesAtoms(repoRoot));return(await Promise.all(remotes.map((({remote})=>isomorphic_git.Ay.listBranches({fs,dir:repoRoot,remote}).then((branches=>branches.filter((branch=>"HEAD"!==branch)).map((branch=>({name:branch,remote}))))))))).flat()})))),repoBranchesAtom=(0,utils.Iz)((repoRoot=>atomWithRefresh((async get=>{const currentBranchName=await get(repoCurrentBranchNameAtom(repoRoot));let localBranches=await get(repoLocalBranchesAtom(repoRoot));return 0===localBranches.length&&currentBranchName&&(localBranches=localBranches.concat({name:currentBranchName,trackingBranch:null})),{repoRoot,currentBranch:localBranches.find((branch=>branch.name===currentBranchName))||null,localBranches,remoteBranches:await get(repoRemoteBranchesAtoms(repoRoot))}})))),repoCurrentBranchNameAtom=(0,utils.Iz)((repoRoot=>atomWithRefresh((()=>isomorphic_git.Ay.currentBranch({fs,dir:repoRoot,fullname:!1}))))),allBranchesAtom=(0,vanilla.eU)((async get=>{const repoRoots=get(vcsRootsAtom);return Promise.all(repoRoots.map((({dir:repoRoot})=>get(repoBranchesAtom(repoRoot)))))})),branchForPathAtoms=(0,utils.Iz)((filepath=>(0,vanilla.eU)((async get=>{const root=await get(vcsFootForFileAtom(filepath)),repoRoot=root?await get(repoBranchesAtom(root)):null;return console.log(`repo root for ${filepath}`,root,root&&repoRoot),root&&repoRoot?.currentBranch?.name||null})))),PREDEFINED_FAVORITE_BRANCH_NAMES=[{branchType:"LOCAL",branchName:"master"},{branchType:"REMOTE",branchName:"origin/master"}];function readBranchStorage(branchStorage){return branchStorage?.map.entry.flatMap((entry=>entry?.value.list["branch-info"].map((({"@source":branchName,"@repo":repoRoot})=>({branchType:entry["@type"],branchName,repoRoot})))))||[]}function writeBranchStorage(value){const branchesByType=(0,groupBy.A)((({branchType})=>branchType),value);return{map:{entry:Object.entries(branchesByType).map((([branchType,branches])=>({"@type":branchType,value:{list:{"branch-info":branches.map((branch=>({"@repo":branch.repoRoot,"@source":branch.branchName})))}}})))}}}const branchStorage=lib.z.object({"branch-storage":lib.z.object({map:(keyAttribute=lib.z.enum(["LOCAL","REMOTE"]),value=lib.z.object({list:list(lib.z.object({"@repo":lib.z.string(),"@source":lib.z.string()}),"branch-info")}),lib.z.object({entry:maybeArray(lib.z.object({"@type":keyAttribute,value}))}))})});var keyAttribute,value;const gitSettingsAtom=atomWithPersistence({branches:[],excludedBranches:[]},{schema:lib.z.object({"favorite-branches":branchStorage.optional(),"exclude-from-favorite":branchStorage.optional()}).optional(),componentName:"Git.Settings",read:componentState=>({branches:readBranchStorage(componentState?.["favorite-branches"]?.["branch-storage"]),excludedBranches:readBranchStorage(componentState?.["exclude-from-favorite"]?.["branch-storage"])}),write:(value,state)=>{const newState={...state};return value.branches.length>0?newState["favorite-branches"]={"branch-storage":writeBranchStorage(value.branches)}:delete newState["favorite-branches"],value.excludedBranches.length>0?newState["exclude-from-favorite"]={"branch-storage":writeBranchStorage(value.excludedBranches)}:delete newState["exclude-from-favorite"],newState}}),favoriteBranchesAtom=(0,focusAtom.I)(gitSettingsAtom,(optic=>optic.prop("branches"))),excludedFromFavoriteBranchesAtom=(0,focusAtom.I)(gitSettingsAtom,(optic=>optic.prop("excludedBranches"))),isFavoriteBranchAtoms=(0,utils.Iz)((branchInfo=>(0,vanilla.eU)((get=>isFavorite(get(favoriteBranchesAtom),get(excludedFromFavoriteBranchesAtom),branchInfo)))),equals.A);function isPredefinedAsFavorite(params){return PREDEFINED_FAVORITE_BRANCH_NAMES.some((({branchType,branchName})=>branchName===params.branchName&&branchType===params.branchType))}const isFavorite=(favoriteBranches,excludedFromFavoriteBranches,params)=>!!favoriteBranches.find((0,equals.A)(params))||!excludedFromFavoriteBranches.find((0,equals.A)(params))&&isPredefinedAsFavorite(params);function useToggleFavoriteBranch(){return(0,react_utils.yF)((0,react.useCallback)(((get,set,params,favorite=!isFavorite(get(favoriteBranchesAtom),get(excludedFromFavoriteBranchesAtom),params))=>{const remove=currentValue=>currentValue.filter((favoriteBranch=>!(0,equals.A)(favoriteBranch,params))),add=currentValue=>currentValue.some((0,equals.A)(params))?currentValue:currentValue.concat(params);favorite?(set(excludedFromFavoriteBranchesAtom,remove),isPredefinedAsFavorite(params)||set(favoriteBranchesAtom,add)):(set(favoriteBranchesAtom,remove),isPredefinedAsFavorite(params)&&set(excludedFromFavoriteBranchesAtom,add))}),[]))}function useFavoriteBranches(){const favoriteBranches=(0,esm_react.md)(favoriteBranchesAtom),excludedFromFavoriteBranches=(0,esm_react.md)(excludedFromFavoriteBranchesAtom);return{isFavorite:params=>isFavorite(favoriteBranches,excludedFromFavoriteBranches,params),toggleFavorite:useToggleFavoriteBranch()}}const RepoCurrentBranchName=({repo})=>{const branch=(0,esm_react.md)(branchForPathAtoms(repo.dir));return react.createElement(react.Fragment,null,branch)};RepoCurrentBranchName.__docgenInfo={description:"",methods:[],displayName:"RepoCurrentBranchName",props:{repo:{required:!0,tsType:{name:"VcsDirectoryMapping"},description:""}}};const StyledRepoColorSquare=styled.I4.span`
  width: 14px;
  height: 14px;
  align-self: center;
  margin-right: 0.2rem;
  position: relative;

  //  after pseudo element is used to create the color mixing implemented here:
  //  https://github.com/JetBrains/intellij-community/blob/82f201386c3f7a339ff25fc8f3389024c8078a87/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/VcsLogColorManagerImpl.java#L60
  &&:after {
    content: "";
    position: absolute;
    inset: 0;
    opacity: 0.75;
    background: ${({theme})=>theme.color("Table.background")||(theme.dark?"#3C3F41":"#fff")};
  }
`,useRepoRootColor=rootPath=>{const index=(0,esm_react.md)(vcsRootsAtom).findIndex((root=>root.dir===rootPath)),theme=(0,styled_components_browser_esm.DP)(),colors=[theme.commonColors.red,theme.commonColors.blue];return colors[index%colors.length]??colors[0]},RepoColorIcon=react.forwardRef((({rootPath,...props},ref)=>react.createElement(StyledRepoColorSquare,{ref,...props,style:{...props.style,backgroundColor:useRepoRootColor(rootPath)}})));RepoColorIcon.__docgenInfo={description:"",methods:[],displayName:"RepoColorIcon",props:{rootPath:{required:!0,tsType:{name:"string"},description:""}}};const StyledCurrentBranchTag=styled.I4.span`
  display: inline-flex;
  align-self: center;
  height: 1.1rem;
  line-height: 1.1rem;
  padding: 0 0.25rem;

  background: ${({theme})=>theme.currentBackgroundAware(`color-mix(in srgb, ${theme.color("VersionControl.Log.Commit.currentBranchBackground",theme.dark?"rgb(63, 71, 73)":"rgb(228, 250, 255)")}, ${theme.color("VersionControl.RefLabel.backgroundBase",theme.dark?"#fff":"#000")} ${100*(theme.value("VersionControl.RefLabel.backgroundBrightness")??.08)}%)`)};
  color: ${({theme})=>theme.currentForegroundAware(theme.color("VersionControl.RefLabel.foreground",theme.dark?"#909090":"#7a7a7a"))};
`,changesTreeNodeRenderers_fileCountMsg=new core.S("{fileCount, plural,\n    =0 {No files}\n    =1 {1 file}\n    other {# files}\n  }","en-US");function formatFileCount(fileCount){return changesTreeNodeRenderers_fileCountMsg.format({fileCount})}const ChangeNodeHint=({node})=>react.createElement(ItemLayout.E.Hint,null,node.showPath&&path_browserify_default().dirname(Change.path(node.change))),defaultNodeRenderers={repo:(node,{fileCount})=>({textValue:path_browserify_default().basename(node.repository.dir),rendered:react.createElement(ItemLayout.E,null,react.createElement(RepoColorIcon,{rootPath:node.repository.dir}),react.createElement(HighlightedTextValue.Y,null),react.createElement(ItemLayout.E.Hint,null,formatFileCount(fileCount)),react.createElement(StyledCurrentBranchTag,null,react.createElement(RepoCurrentBranchName,{repo:node.repository})))}),directory:(node,{fileCount})=>({textValue:node.parentNodePath?path_browserify_default().relative(node.parentNodePath,node.dirPath):node.dirPath,rendered:react.createElement(ItemLayout.E,null,react.createElement(PlatformIcon.jE,{icon:DIR_ICON}),react.createElement(HighlightedTextValue.Y,null),react.createElement(ItemLayout.E.Hint,null,formatFileCount(fileCount)))}),change:node=>({textValue:path_browserify_default().basename(Change.path(node.change)),rendered:react.createElement(ItemLayout.E,null,react.createElement(PlatformIcon.jE,{icon:getIconForFile(Change.path(node.change))}),react.createElement(StatusColor,{status:Change.fileStatus(node.change)},react.createElement(HighlightedTextValue.Y,null)),Change.isRename(node.change)?` - renamed from ${path_browserify_default().basename(node.change.before.path)}`:Change.isMove(node.change)&&` - moved from ${path_browserify_default().relative(path_browserify_default().dirname(node.change.after.path),path_browserify_default().dirname(node.change.before.path)).replace(/(\.\.\/){2,}[!.]/g,"..")}/`,react.createElement(ChangeNodeHint,{node}))})},createChangesTreeNodeRenderer=(renderers,defaultRendererOverrides)=>{const nodeRenderers={...defaultNodeRenderers,...defaultRendererOverrides,...renderers},getItemProps=({node,fileCountsMap})=>{const nodeRenderer=nodeRenderers[node.type],{textValue,rendered}=nodeRenderer(node,{fileCount:fileCountsMap.get(node.key)||0,dirCount:0});return{key:node.key,childItems:isGroupNode(node)?node.children:[],hasChildItems:isGroupNode(node)&&node.children?.length>0,textValue,children:rendered}};return{getItemProps,getTextValue:(node,{fileCountsMap})=>(0,nodeRenderers[node.type])(node,{fileCount:fileCountsMap.get(node.key)||0,dirCount:0}).textValue,itemRenderer:({fileCountsMap})=>node=>react.createElement(Item.q,getItemProps({node,fileCountsMap}))}};function LoadingText(){const loading=(0,esm_react.md)(isAnyRepoStatusUpdatingAtom);return react.createElement(react.Fragment,null,loading&&react.createElement(Delayed,null,", updating..."))}const changesViewTreeNodeRenderer=createChangesTreeNodeRenderer({changelist:(node,{fileCount})=>({textValue:node.changeList.name,rendered:react.createElement(ItemLayout.E,null,react.createElement("span",{style:{fontWeight:node.changeList.active?"bold":void 0}},react.createElement(HighlightedTextValue.Y,null)),react.createElement(ItemLayout.E.Hint,null,formatFileCount(fileCount),react.createElement(LoadingText,null)))}),unversioned:(_node,{fileCount})=>({textValue:"Unversioned Files",rendered:react.createElement(ItemLayout.E,null,react.createElement(HighlightedTextValue.Y,null),react.createElement(ItemLayout.E.Hint,null,formatFileCount(fileCount),react.createElement(LoadingText,null)))})});function findPathsUnderNode(node){return"directory"===node?.type?[node.dirPath]:"change"===node?.type?[Change.path(node.change)]:isGroupNode(node)?node.children.flatMap(findPathsUnderNode):[]}const ChangeViewTree=({treeRef})=>{const{rootNodes,fileCountsMap,byKey}=(0,esm_react.md)(changesTreeNodesAtom),[selectedKeys,setSelectedKeys]=(0,esm_react.fp)(selectedKeysAtom),[expandedKeys,setExpandedKeys]=(0,esm_react.fp)(ChangesView_state_expandedKeysAtom),nestedSelection=(0,esm_react.md)(includedChangesNestedSelectionAtom),{openPath}=useEditorStateManager(),openChangeInEditor=(0,react_utils.yF)((0,react.useCallback)(((get,_set,key)=>{const changeNode=get(changesTreeNodesAtom).byKey.get(key);return"change"===changeNode?.type&&openPath(Change.path(changeNode.change)),changeNode}),[])),activePathsProviderProps=useActivePathsProvider("all"===selectedKeys?[]:[...selectedKeys].flatMap((key=>{const node=byKey.get(key);return node?findPathsUnderNode(node):[]})));return react.createElement(ContextMenuContainer.y,{renderMenu:()=>react.createElement(ChangesViewTreeContextMenu,null),style:{height:"100%"}},react.createElement(SpeedSearchTreeWithCheckboxes,{"aria-label":"Commit changes tree",treeRef,items:rootNodes,selectionMode:"multiple",selectedKeys,expandedKeys,onExpandedChange:setExpandedKeys,onSelectionChange:setSelectedKeys,onAction:openChangeInEditor,nestedSelection,fillAvailableSpace:!0,autoFocus:"first",...activePathsProviderProps},(node=>{const props=changesViewTreeNodeRenderer.getItemProps({fileCountsMap,node});return react.createElement(Item.q,props,0!==node.children?.length&&react.createElement(TreeNodeCheckbox,{selectionState:nestedSelection.getSelectionState(node),onToggle:()=>nestedSelection.toggle(node)}),props.children)})))};ChangeViewTree.__docgenInfo={description:"TODO: unversioned files\nTODO: show diff/source on double click (on action to be more precise)",methods:[],displayName:"ChangeViewTree",props:{treeRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"TreeRefValue"}],raw:"RefObject<TreeRefValue>"},description:""}}};var Toolbar=__webpack_require__("./src/Toolbar/Toolbar.tsx"),IconButton=__webpack_require__("./src/IconButton/IconButton.tsx"),MenuTrigger=__webpack_require__("./src/Menu/MenuTrigger.tsx");const ArrowIcon=(0,styled_components_browser_esm.Ay)(PlatformIcon.jE)`
  position: absolute;
  right: 1px;
  bottom: 1px;
`,IconButtonWithMenu=({renderMenu,children,noArrow=!1,...buttonProps})=>{const previouslyFocusedElementRef=(0,react.useRef)();return react.createElement(MenuTrigger.c,{renderMenu,onOpenChange:open=>{!open&&previouslyFocusedElementRef.current&&previouslyFocusedElementRef.current.focus()}},((props,ref)=>react.createElement(IconButton.K0,{...(0,mergeProps.v)(buttonProps,props,{onFocus:e=>{e.relatedTarget&&e.relatedTarget instanceof HTMLElement&&(previouslyFocusedElementRef.current=e.relatedTarget)}}),ref},children,!noArrow&&react.createElement(ArrowIcon,{icon:"general/dropdown.svg"}))))};IconButtonWithMenu.__docgenInfo={description:"Renders an IconButton which opens a menu. by default a down arrow icon is shown as an overlay on the rendered\nicon, but it can be disabled by passing `noArrow`. It also restores the focus to the previously focused element,\nwhen the menu is closed.\n@param renderMenu: render prop for rendering the menu\n@param children: the content of the icon button\n@param noArrow: whether the default arrow should be removed or not. false by default.\n@param buttonProps: the rest of the props that will be passed down to IconButton\n\nTODO: Add story and write test for focus restoration, noArrow, and basic functionality.",methods:[],displayName:"IconButtonWithMenu",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},minSize:{required:!1,tsType:{name:"number"},description:"The minimum width/height of the button."},excludeFromTabOrder:{required:!1,tsType:{name:"boolean"},description:"Whether the button should be focusable by pressing tab. The default is true for icon buttons (aka. action buttons),\nwhich means they are not included in the tab order."},noArrow:{required:!1,tsType:{name:"boolean"},description:"whether the default arrow should be removed or not. false by default.",defaultValue:{value:"false",computed:!1}}},composes:["PressProps","Pick"]};var SpeedSearchMenu=__webpack_require__("./src/Menu/SpeedSearchMenu.tsx");const ChangeListsActionButton=()=>{const actions=[(0,ActionsProvider.y3)(VcsActionIds.NEW_CHANGELIST),(0,ActionsProvider.y3)(VcsActionIds.RENAME_CHANGELIST),(0,ActionsProvider.y3)(VcsActionIds.REMOVE_CHANGELIST),(0,ActionsProvider.y3)(VcsActionIds.SET_DEFAULT_CHANGELIST),(0,ActionsProvider.y3)(VcsActionIds.MOVE_TO_ANOTHER_CHANGELIST)].filter((i=>null!=i));return react.createElement(IconButtonWithMenu,{renderMenu:({menuProps})=>react.createElement(ActionsMenu.$,{actions},(actionMenuProps=>react.createElement(SpeedSearchMenu.V,{...menuProps,...actionMenuProps})))},react.createElement(PlatformIcon.jE,{icon:"vcs/changelist.svg"}))};ChangeListsActionButton.__docgenInfo={description:"",methods:[],displayName:"ChangeListsActionButton"};var Section=__webpack_require__("../../node_modules/@react-stately/collections/dist/Section.mjs");function GroupByActionButton({groupings,onToggle}){return 1===groupings.length&&groupings[0].icon?react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:`Group By ${groupings[0].title}`})},react.createElement(IconButton.K0,{isPressed:groupings[0].isActive,onPress:()=>onToggle(groupings[0].id)},groupings[0].icon)):react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Group By"})},react.createElement(IconButtonWithMenu,{renderMenu:({menuProps})=>react.createElement(Menu.W1,{...menuProps,selectedKeys:groupings.filter((({isActive})=>isActive)).map((({id})=>id)),onAction:key=>{const id=groupings.find((({id})=>id===key))?.id;id&&onToggle(id)}},react.createElement(Section.w,{title:"Group By"},groupings.map((({id,title})=>react.createElement(Item.q,{key:id},title)))))},react.createElement(PlatformIcon.jE,{icon:"actions/groupBy.svg"})))}GroupByActionButton.__docgenInfo={description:"",methods:[],displayName:"GroupByActionButton",props:{groupings:{required:!0,tsType:{name:"Array",elements:[{name:"Grouping",elements:[{name:"K"}],raw:"Grouping<K>"}],raw:"Array<Grouping<K>>"},description:""},onToggle:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: K) => void",signature:{arguments:[{type:{name:"K"},name:"id"}],return:{name:"void"}}},description:""}}};const ChangesGroupByActionButton=()=>{const groupings=(0,esm_react.md)(changesViewGroupingsState),toggleGroup=(0,react_utils.yF)((0,react.useCallback)(((_get,set,id)=>{set(changesGroupingActiveState(id),(value=>!value))}),[]));return react.createElement(GroupByActionButton,{groupings,onToggle:toggleGroup})};ChangesGroupByActionButton.__docgenInfo={description:"",methods:[],displayName:"ChangesGroupByActionButton"};const ViewOptionsActionButton=()=>{const[showRelatedFiles,setShowRelatedFiles]=(0,esm_react.fp)(showRelatedFilesAtom),[showIgnoredFiles,setShowIgnoredFiles]=(0,esm_react.fp)(showIgnoredFilesAtom),viewOptions={showRelatedFiles,showIgnoredFiles};return react.createElement(IconButtonWithMenu,{renderMenu:({menuProps})=>react.createElement(Menu.W1,{...menuProps,selectedKeys:Object.keys(viewOptions).filter((key=>viewOptions[key])),onAction:key=>{switch(key){case"showIgnoredFiles":return setShowIgnoredFiles((value=>!value));case"showRelatedFiles":return setShowRelatedFiles((value=>!value))}}},react.createElement(Item.q,{key:"showIgnoredFiles"},"Show Ignored Files"),react.createElement(Item.q,{key:"showRelatedFiles"},"Show Files Related to Active Changelist"))},react.createElement(PlatformIcon.jE,{icon:"actions/show.svg"}))};function ChangesViewToolbar(){return react.createElement(Toolbar.M,{border:"bottom"},react.createElement(ActionButton.r,{actionId:CommonActionIds.j.REFRESH}),react.createElement(ActionButton.r,{actionId:VcsActionIds.ROLLBACK}),react.createElement(ActionButton.r,{actionId:VcsActionIds.SHOW_DIFF}),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Changelists"})},react.createElement(ChangeListsActionButton,null)),react.createElement(ActionButton.r,{actionId:VcsActionIds.SHELVE_SILENTLY}),react.createElement(Toolbar.l,null),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Group By"})},react.createElement(ChangesGroupByActionButton,null)),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"View Options"})},react.createElement(ViewOptionsActionButton,null)),react.createElement(ActionButton.r,{actionId:CommonActionIds.j.EXPAND_ALL}),react.createElement(ActionButton.r,{actionId:CommonActionIds.j.COLLAPSE_ALL}))}ViewOptionsActionButton.__docgenInfo={description:"",methods:[],displayName:"ViewOptionsActionButton"},ChangesViewToolbar.__docgenInfo={description:"",methods:[],displayName:"ChangesViewToolbar"};const tasksAtom=(0,vanilla.eU)([]),firstTaskAtom=(0,vanilla.eU)((get=>get(tasksAtom)[0])),taskCountAtom=(0,vanilla.eU)((get=>get(tasksAtom).length));let progressSeq=0;const createTaskCallback=(_get,set,options,task)=>{const{title,isCancelable=!1}=options,abortController=new esm.Ni.cancelToken,id=++progressSeq;set(tasksAtom,(tasks=>[...tasks,{id:progressSeq++,title,abortController,isCancelable,progress:{fraction:0,text:"",secondaryText:"",isIndeterminate:!1}}]));const setTaskProgressState=updates=>{set(tasksAtom,(tasks=>tasks.map((task=>task.id===id?{...task,progress:{...task.progress,...updates}}:task))))},taskDefinition="function"==typeof task?{run:task}:task;return Promise.resolve(taskDefinition.run({setFraction(fraction){setTaskProgressState({fraction})},setText(text){setTaskProgressState({text})},setSecondaryText(secondaryText){setTaskProgressState({secondaryText})},setIndeterminate(isIndeterminate){setTaskProgressState({isIndeterminate})}},abortController.signal)).finally((()=>{set(tasksAtom,(tasks=>tasks.filter((task=>task.id!==id)))),taskDefinition.onFinished?.()})),id},useRunTask=()=>(0,react_utils.yF)(createTaskCallback),useCancelTask=()=>(0,react_utils.yF)((0,react.useCallback)(((get,_set,id)=>{const task=get(tasksAtom).find((task=>task.id===id));task&&task.abortController.abort()}),[])),resolvedRefAtoms=(0,utils.Iz)((({repoRoot,ref})=>atomWithRefresh((()=>isomorphic_git.Ay.resolveRef({fs,dir:repoRoot,ref,depth:3}).catch((e=>null))))),equals.A);var indexBy=__webpack_require__("../../node_modules/ramda/es/indexBy.js"),mapObjIndexed=__webpack_require__("../../node_modules/ramda/es/mapObjIndexed.js");const dateToString=date=>`${date.getMonth()+1}/${date.getDate()}/${date.getFullYear().toString().slice(-2)}`,dateRangeToString=dateRange=>dateRange.from&&dateRange.to?`Between ${dateToString(dateRange.from)} and ${dateToString(dateRange.to)}`:dateRange.from?`since ${dateToString(dateRange.from)}`:dateRange.to?`until ${dateToString(dateRange.to)}`:"",vcsTabKeysAtom=(0,vanilla.eU)(["MAIN"]),vcsActiveTabKeyAtom=(0,vanilla.eU)("MAIN"),vcsTabTitleAtoms=(0,utils.Iz)((key=>(0,vanilla.eU)((get=>{const searchQuery=get(vcsLogFilter.searchQuery(key)),user=get(vcsLogFilter.user(key)),date=get(vcsLogFilter.date(key)),branches=get(vcsLogFilter.branch(key)),parts=[];return branches?.length>0&&parts.push({short:branches.join(", "),long:`on ${branches.join(", ")}`}),date&&parts.push({short:dateRangeToString(date),long:`made ${dateRangeToString(date)}`}),searchQuery&&parts.push({short:`'${searchQuery}'`,long:`containing '${searchQuery}'`}),user&&parts.push({short:user,long:`by ${user}`}),`Log${parts.length>0?": ":""}${1===parts.length?parts[0].short:parts.map((part=>part.long)).join(" ")}`})))),tabAtomFamilies=[],vcsLogAtomFamily=defaultValue=>{const result=(0,utils.Iz)((_tab=>(0,utils.tx)(defaultValue)));return tabAtomFamilies.push(result),result},vcsLogTabShowBranchesAtoms=vcsLogAtomFamily(!1),vcsLogTabShowCommitDetailsAtoms=vcsLogAtomFamily(!0),vcsLogTabShowCommitDetailsInCurrentTabAtom=(0,vanilla.eU)((get=>get(vcsLogTabShowCommitDetailsAtoms(get(vcsActiveTabKeyAtom))))),CURRENT_USER_FILTER_VALUE="*",vcsLogFilter={searchQuery:vcsLogAtomFamily(""),matchCase:vcsLogAtomFamily(!1),regExp:vcsLogAtomFamily(!1),user:vcsLogAtomFamily(null),date:vcsLogAtomFamily(null),branch:vcsLogAtomFamily([])},vcsLogFilterCurrentTab=(0,mapObjIndexed.A)(((atomFamily,key)=>(0,vanilla.eU)((get=>get(atomFamily(get(vcsActiveTabKeyAtom)))),((get,set,newValue)=>{set(atomFamily(get(vcsActiveTabKeyAtom)),newValue)}))),vcsLogFilter),useResetFilters=()=>(0,react_utils.yF)((0,react.useCallback)(((get,set,tabKey)=>{Object.values(vcsLogFilter).map((getAtom=>getAtom(tabKey))).forEach((atom=>set(atom,utils.Ut)))}),[])),closeTabCallback=(get,set,tabKey)=>{const tabs=get(vcsTabKeysAtom);get(vcsActiveTabKeyAtom)===tabKey&&set(vcsActiveTabKeyAtom,tabs[tabs.findIndex((key=>key===tabKey))-1]||tabs[0]),set(vcsTabKeysAtom,(keys=>keys.filter((key=>key!==tabKey)))),tabAtomFamilies.forEach((atomFamily=>atomFamily.remove(tabKey)))};var sort=__webpack_require__("../../node_modules/ramda/es/sort.js"),es_map=__webpack_require__("../../node_modules/ramda/es/map.js");const cache={},commitDateComparator=(a,b)=>b.commit.committer.timestamp-a.commit.committer.timestamp;async function readCommits(fs,...sources){const allCommits=[],commitsMap={};let commitsToProcess=[];const initialCommits=(await Promise.all(sources.flatMap((({refs,notRefs,repoPath,isBare})=>{const prepareRef=type=>async ref=>{const oid=await isomorphic_git.Ay.resolveRef({...getCommonArgs({repoPath,isBare}),ref,depth:3}).catch((e=>null));if(null===oid)return null;const commit=await isomorphic_git.Ay.readCommit({...getCommonArgs({repoPath,isBare}),oid});return{repoPath,isBare,commit,refs:new Set([ref]),type}};return refs.map(prepareRef("whitelist")).concat(notRefs?.map(prepareRef("blacklist"))??[])})))).filter((i=>null!==i));(0,sort.A)((({commit:c1},{commit:c2})=>commitDateComparator(c1,c2)),initialCommits).forEach((({commit,refs,repoPath,isBare,type})=>queueCommit(type,{repoPath,isBare},commit,-1,refs)));const repoToBlackListRefs=(0,es_map.A)((value=>value.flatMap((({notRefs})=>notRefs??[]))),(0,groupBy.A)((source=>source.repoPath),sources));for(;commitsToProcess.length>0;){const{readCommitResult:latestCommit,repoPath,isBare,type,containingRefs}=commitsToProcess.shift();if("whitelist"===type){if(repoToBlackListRefs[repoPath]?.some((ref=>containingRefs.has(ref))))continue;allCommits.push({repoPath,readCommitResult:latestCommit,containingRefs})}(await Promise.all(latestCommit.commit.parent.map((oid=>isomorphic_git.Ay.readCommit({...getCommonArgs({repoPath,isBare}),oid}))))).forEach((commit=>{const index=commitsToProcess.findIndex((({readCommitResult:aCommit})=>commitDateComparator(aCommit,commit)>0));queueCommit(type,{repoPath,isBare},commit,index,containingRefs)}))}return allCommits;function queueCommit(type,{repoPath,isBare},commit,index,refs){if(commitsMap[commit.oid])commitsMap[commit.oid].containingRefs=new Set([...commitsMap[commit.oid].containingRefs,...refs]);else{const entry={type,readCommitResult:commit,containingRefs:commitsMap[commit.oid]?new Set([...commitsMap[commit.oid].containingRefs,...refs]):refs,repoPath,isBare};commitsMap[commit.oid]=entry,commitsToProcess.splice(index>=0?index:commitsToProcess.length,0,entry)}}function getCommonArgs({repoPath,isBare}){return{fs,cache,[isBare?"gitdir":"dir"]:repoPath}}}function match(input,query,flags={}){return flags.regExp?new RegExp(query,flags.matchCase?"":"i").test(input):flags.matchCase?input.includes(query):input.toLowerCase().includes(query.toLowerCase())}const allCommitsAtom=atomWithRefresh((async get=>readCommits(fs,...(await get(allBranchesAtom)).map((({repoRoot,localBranches,remoteBranches})=>({repoPath:repoRoot,refs:["HEAD"].concat(localBranches.map((branch=>branch.name))).concat(remoteBranches.map((branch=>`${branch.remote}/${branch.name}`)))})))))),commitsTableRowsAtom=(0,vanilla.eU)((async get=>{const searchQuery=get(vcsLogFilterCurrentTab.searchQuery),branches=get(vcsLogFilterCurrentTab.branch),flags={matchCase:get(vcsLogFilterCurrentTab.matchCase),regExp:get(vcsLogFilterCurrentTab.regExp)},dateFilter=get(vcsLogFilterCurrentTab.date),rows=(await get(allCommitsAtom)).filter((({containingRefs})=>!branches?.length||branches.some((branch=>containingRefs.has(branch))))).filter((({readCommitResult:{commit}})=>(!dateFilter?.from||1e3*commit.author.timestamp>dateFilter.from.getTime())&&(!dateFilter?.to||1e3*commit.author.timestamp<dateFilter.to.getTime()))).filter((({readCommitResult:{commit}})=>!searchQuery||match(commit.message,searchQuery,flags)||match(commit.tree,searchQuery,{matchCase:!1})));return{rows,byOid:(0,indexBy.A)((({readCommitResult:commit})=>commit.oid),rows)}})),allResolvedRefsAtom=(0,vanilla.eU)((async get=>{const repoBranches=await get(allBranchesAtom),refs={},addRef=(ref,value)=>{refs[ref]=refs[ref]||[],refs[ref].push(value)};(await Promise.all(repoBranches.map((({repoRoot})=>get(resolvedRefAtoms({repoRoot,ref:"HEAD"})))))).filter((ref=>null!==ref)).forEach((resolvedRef=>{addRef(resolvedRef,{type:"head",name:"HEAD"})}));for(const{repoRoot,localBranches,currentBranch}of repoBranches)for(const branch of localBranches){const ref=await get(resolvedRefAtoms({repoRoot,ref:branch.name}));ref&&addRef(ref,{type:"localBranch",name:branch.name,isCurrent:currentBranch?.name===branch.name,trackingBranch:branch.trackingBranch})}for(const{repoRoot,remoteBranches}of repoBranches)for(const branch of remoteBranches){const branchName=`${branch.remote}/${branch.name}`,ref=await get(resolvedRefAtoms({repoRoot,ref:branchName}));ref&&addRef(ref,{type:"remoteBranch",name:branchName})}return refs})),commitsSelectionAtom=(0,vanilla.eU)(new Set([])),selectedCommitOids=(0,vanilla.eU)((async get=>{const selection=get(commitsSelectionAtom);return"all"===selection?(await get(commitsTableRowsAtom)).rows.map((({readCommitResult:{oid}})=>oid)):[...selection].map((i=>`${i}`))})),selectedCommitsAtom=(0,vanilla.eU)((async get=>Promise.all((await get(selectedCommitOids)).map((async oid=>(await get(commitsTableRowsAtom)).byOid[oid]))))),selectedCommitAtom=(0,vanilla.eU)((async get=>{const oid=(await get(selectedCommitOids))[0];return oid&&(await get(commitsTableRowsAtom)).byOid[oid]||null})),vcsTableShowCommitTimestampAtom=(0,vanilla.eU)(!1),vcsTableReferencesOnTheLeftAtom=(0,vanilla.eU)(!1),vcsTableHighlightMyCommitsAtom=(0,vanilla.eU)(!1),authorColumn={id:"Default.Author",name:"Author"},hashColumn={id:"Default.Hash",name:"Hash"},dateColumn={id:"Date.Date",name:"Date"},defaultVisibleColumns=[authorColumn.id,dateColumn.id],vcsTableColumnsVisibilityAtoms=(0,utils.Iz)((id=>(0,vanilla.eU)(defaultVisibleColumns.includes(id)))),commitSuccessfulMessage=new core.S("{count, plural,\n    =1 {1 file committed}\n    other {# files committed}\n  }","en-US");function useCommitChanges(){const refreshFileStatus=useRefreshRepoStatuses(),balloonManager=(0,BalloonManager.c)(),runTask=useRunTask();return(0,react_utils.yF)((0,react.useCallback)(((get,set,changes,commitMessage)=>{const taskId=runTask({title:"Committing...",isCancelable:!1},{run:async({setIndeterminate})=>{setIndeterminate(!0);const changesGroupedByRepo=(0,groupBy.A)((({repoRoot})=>repoRoot),(await Promise.all(changes.map((async change=>{const filePath=Change.path(change),repoRoot=await get(vcsFootForFileAtom(filePath)),content=await fs.promises.exists(filePath)?await fs.promises.readFile(filePath):null;return repoRoot?{repoRoot,filePath:path_browserify_default().relative(repoRoot,filePath),content}:null})))).filter((i=>null!=i)));await Promise.all(Object.entries(changesGroupedByRepo).map((async([repoRoot,files])=>{const updates=files.reduce(((soFar,{filePath,content})=>({...soFar,[filePath]:"string"==typeof content?(new TextEncoder).encode(content):content})),{});await async function commitFiles({updates,fs,dir,gitdir,...options}){const headTreeOid=await isomorphic_git.Ay.resolveRef({fs,dir,gitdir,ref:"HEAD"}),entries=(await isomorphic_git.Ay.readTree({fs,dir,gitdir,oid:headTreeOid})).tree;let containsChange=!1;if(await Promise.all(Object.entries(updates).map((async([filePath,blob])=>{const index=entries.findIndex((({path})=>path===filePath));if(null==blob)return void(index>-1&&(containsChange=!0,entries.splice(index,1)));const entry=entries[index],oid=await isomorphic_git.Ay.writeBlob({fs,dir,gitdir,blob});entry?entry.oid=oid:entries.push({type:"blob",mode:"100644",oid,path:filePath}),containsChange=!0}))),!containsChange)throw new Error("Nothing to commit!");const newTreeOid=await isomorphic_git.Ay.writeTree({fs,dir,gitdir,tree:entries}),commitRef=await isomorphic_git.Ay.commit({...options,fs,dir,gitdir,tree:newTreeOid});await Promise.all(Object.keys(updates).map((filepath=>isomorphic_git.Ay.resetIndex({fs,dir,gitdir,filepath,ref:commitRef}))))}({fs,dir:repoRoot,updates,message:commitMessage,author:{name:"Alireza",email:"alireza.mirian@gmail.com"}});const currentBranch=await get(repoCurrentBranchNameAtom(repoRoot));currentBranch&&set(resolvedRefAtoms({repoRoot,ref:currentBranch})),set(resolvedRefAtoms({repoRoot,ref:"HEAD"}))}))).then((()=>{set(allCommitsAtom),refreshFileStatus().catch(console.error),balloonManager.show({icon:"Info",body:react.createElement(react.Fragment,null,`${commitSuccessfulMessage.format({count:changes.length})}: `,commitMessage.split("\n").flatMap(((part,index)=>[react.createElement("br",{key:index}),part])).slice(1))})}),(e=>{balloonManager.show({icon:"Error",title:"Commit failed!",body:"Could not commit files."}),console.error("Commit error",e)}))},onFinished:()=>{set(commitTaskIdAtom,null)}});set(commitTaskIdAtom,taskId)}),[]))}const StyledCommitMessageContainer=styled.I4.div`
  background: ${({theme})=>theme.dark?"#2b2b2b":"#fff"};
  height: 100%;
  display: flex;
  flex-direction: column;
`,StyledCommitMessageTextArea=styled.I4.textarea`
  flex: 1;
  background: none;
  padding: 0.25rem 0.375rem;
  color: ${({theme})=>theme.dark?"#a9b7c6":"#000"};
  font-family: inherit;
  border: none;
  resize: none;
  outline: none;
`,StyledCommitActionsRow=styled.I4.div`
  display: flex;
  gap: 0.3rem;
  padding: 0.4rem;
`,StyledErrorMessage=styled.I4.div`
  display: flex;
  align-items: center;
  padding: 0.125rem 0.5rem;
  gap: 0.25rem;
  position: sticky; // prevents commit message scroll jump when message is toggled on and off
  color: ${({theme})=>theme.commonColors.red};
`;function CommitView({editorRef}){const commitMessageTextAreaRef=(0,react.useRef)(null),[commitMessage,setCommitMessage]=(0,esm_react.fp)(commitMessageAtom),commit=useCommitChanges(),amend=(0,esm_react.md)(amendCommitAtom),balloonManager=(0,BalloonManager.c)(),[errorMessage,setErrorMessage]=(0,esm_react.fp)(commitErrorMessageAtom),commitTaskId=(0,esm_react.md)(commitTaskIdAtom);(0,react.useEffect)((()=>{commitMessage&&setErrorMessage("")}),[commitMessage]);const commitSelectedChanges=(0,react_utils.yF)((0,react.useCallback)((get=>{const includedChanges=get(includedChangesAtom),commitMessage=get(commitMessageAtom);0!==includedChanges.length?commitMessage?get(amendCommitAtom)?balloonManager.show({icon:"Error",title:"Unsupported action",body:"Amending commits is not yet supported."}):commit(includedChanges,commitMessage):setErrorMessage("Specify commit message"):setErrorMessage("Select files to commit")}),[])),{hasFocus}=(0,DefaultToolWindow.S)();return(0,react.useImperativeHandle)(editorRef,(()=>({focus:()=>{commitMessageTextAreaRef.current?.focus()}})),[]),react.createElement(StyledCommitMessageContainer,null,react.createElement(StyledCommitMessageTextArea,{ref:commitMessageTextAreaRef,value:commitMessage,onChange:event=>{setCommitMessage(event.target.value)},placeholder:"Commit Message","data-gramm":"false"}),errorMessage&&react.createElement(StyledErrorMessage,null,react.createElement(PlatformIcon.jE,{icon:"general/error.svg"})," ",errorMessage),react.createElement(StyledCommitActionsRow,null,react.createElement(Button.$,{preventFocusOnPress:!0,variant:hasFocus?"default":void 0,onPress:commitSelectedChanges,isDisabled:null!=commitTaskId,mnemonic:"i"},amend?"Amend Commit":"Commit"),react.createElement(Button.$,{preventFocusOnPress:!0,onPress:notImplemented,mnemonic:"P"},amend?"Amend Commit and Push...":"Commit and Push...")))}CommitView.__docgenInfo={description:"Commit message and commit buttons shown in the bottom/right split view of the commit toolwindow",methods:[{name:"focus",docblock:null,modifiers:[],params:[],returns:null}],displayName:"CommitView",props:{editorRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<{ focus: () => void }>",elements:[{name:"signature",type:"object",raw:"{ focus: () => void }",signature:{properties:[{key:"focus",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!0}}]}}]},description:""}}};var ActionHelpTooltip=__webpack_require__("./src/Tooltip/ActionHelpTooltip.tsx");const ChangesSummary=({changes})=>{const modifiedCount=changes.filter((change=>"MODIFIED"===Change.fileStatus(change))).length,addedCount=changes.filter(Change.isAddition).length,deletedCount=changes.filter(Change.isDeletion).length;return react.createElement(react.Fragment,null,addedCount>0&&react.createElement(StatusColor,{status:"ADDED"},addedCount," added"),modifiedCount>0&&react.createElement(StatusColor,{status:"MODIFIED"},modifiedCount," modified"),deletedCount>0&&react.createElement(StatusColor,{status:"DELETED"},deletedCount," deleted"))};ChangesSummary.__docgenInfo={description:"",methods:[],displayName:"ChangesSummary",props:{changes:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"union",raw:"| AdditionChange\n| MoveChange\n| RenameChange\n| ModificationChange\n| DeletionChange\n| UnversionedChange",elements:[{name:"intersection",raw:'T & {\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',elements:[{name:"signature",type:"object",raw:'{\n  type: "ADDED";\n  after: Revision;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"ADDED"',required:!0}},{key:"after",value:{name:"signature",type:"object",raw:"{\n  path: string;\n  isDir: boolean;\n  hash?: string;\n  content(): Promise<string>;\n}",signature:{properties:[{key:"path",value:{name:"string",required:!0}},{key:"isDir",value:{name:"boolean",required:!0}},{key:"hash",value:{name:"string",required:!1}},{key:"content",value:{name:"Promise",elements:[{name:"string"}],raw:"Promise<string>",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',signature:{properties:[{key:"@computed#__tag",value:{name:"any",required:!0},description:'A non-exported tag is used to make opaque types that can only be created by Change function, following\n"parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\npresence and properties of the before and after revisions.'}]}}]},{name:"intersection",raw:'T & {\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',elements:[{name:"signature",type:"object",raw:'{\n  type: "ADDED";\n  after: Revision;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"ADDED"',required:!0}},{key:"after",value:{name:"signature",type:"object",raw:"{\n  path: string;\n  isDir: boolean;\n  hash?: string;\n  content(): Promise<string>;\n}",signature:{properties:[{key:"path",value:{name:"string",required:!0}},{key:"isDir",value:{name:"boolean",required:!0}},{key:"hash",value:{name:"string",required:!1}},{key:"content",value:{name:"Promise",elements:[{name:"string"}],raw:"Promise<string>",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',signature:{properties:[{key:"@computed#__tag",value:{name:"any",required:!0},description:'A non-exported tag is used to make opaque types that can only be created by Change function, following\n"parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\npresence and properties of the before and after revisions.'}]}}]},{name:"intersection",raw:'T & {\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',elements:[{name:"signature",type:"object",raw:'{\n  type: "ADDED";\n  after: Revision;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"ADDED"',required:!0}},{key:"after",value:{name:"signature",type:"object",raw:"{\n  path: string;\n  isDir: boolean;\n  hash?: string;\n  content(): Promise<string>;\n}",signature:{properties:[{key:"path",value:{name:"string",required:!0}},{key:"isDir",value:{name:"boolean",required:!0}},{key:"hash",value:{name:"string",required:!1}},{key:"content",value:{name:"Promise",elements:[{name:"string"}],raw:"Promise<string>",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',signature:{properties:[{key:"@computed#__tag",value:{name:"any",required:!0},description:'A non-exported tag is used to make opaque types that can only be created by Change function, following\n"parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\npresence and properties of the before and after revisions.'}]}}]},{name:"intersection",raw:'T & {\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',elements:[{name:"signature",type:"object",raw:'{\n  type: "ADDED";\n  after: Revision;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"ADDED"',required:!0}},{key:"after",value:{name:"signature",type:"object",raw:"{\n  path: string;\n  isDir: boolean;\n  hash?: string;\n  content(): Promise<string>;\n}",signature:{properties:[{key:"path",value:{name:"string",required:!0}},{key:"isDir",value:{name:"boolean",required:!0}},{key:"hash",value:{name:"string",required:!1}},{key:"content",value:{name:"Promise",elements:[{name:"string"}],raw:"Promise<string>",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',signature:{properties:[{key:"@computed#__tag",value:{name:"any",required:!0},description:'A non-exported tag is used to make opaque types that can only be created by Change function, following\n"parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\npresence and properties of the before and after revisions.'}]}}]},{name:"intersection",raw:'T & {\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',elements:[{name:"signature",type:"object",raw:'{\n  type: "ADDED";\n  after: Revision;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"ADDED"',required:!0}},{key:"after",value:{name:"signature",type:"object",raw:"{\n  path: string;\n  isDir: boolean;\n  hash?: string;\n  content(): Promise<string>;\n}",signature:{properties:[{key:"path",value:{name:"string",required:!0}},{key:"isDir",value:{name:"boolean",required:!0}},{key:"hash",value:{name:"string",required:!1}},{key:"content",value:{name:"Promise",elements:[{name:"string"}],raw:"Promise<string>",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',signature:{properties:[{key:"@computed#__tag",value:{name:"any",required:!0},description:'A non-exported tag is used to make opaque types that can only be created by Change function, following\n"parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\npresence and properties of the before and after revisions.'}]}}]},{name:"intersection",raw:'T & {\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',elements:[{name:"signature",type:"object",raw:'{\n  type: "ADDED";\n  after: Revision;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"ADDED"',required:!0}},{key:"after",value:{name:"signature",type:"object",raw:"{\n  path: string;\n  isDir: boolean;\n  hash?: string;\n  content(): Promise<string>;\n}",signature:{properties:[{key:"path",value:{name:"string",required:!0}},{key:"isDir",value:{name:"boolean",required:!0}},{key:"hash",value:{name:"string",required:!1}},{key:"content",value:{name:"Promise",elements:[{name:"string"}],raw:"Promise<string>",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:'{\n  /**\n   * A non-exported tag is used to make opaque types that can only be created by Change function, following\n   * "parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\n   * presence and properties of the before and after revisions.\n   */\n  readonly [__tag]: any;\n}',signature:{properties:[{key:"@computed#__tag",value:{name:"any",required:!0},description:'A non-exported tag is used to make opaque types that can only be created by Change function, following\n"parse, don\'t validate" rule, enforcing certain rules that defines the change type based on the\npresence and properties of the before and after revisions.'}]}}]}]}],raw:"ReadonlyArray<AnyChange>"},description:""}}};const StyledActionsRow=styled.I4.div`
  display: flex;
  padding: 0.125rem;
  position: relative;
`,StyledAmendCheckbox=(0,styled.I4)(Checkbox.S)`
  padding-right: 0.625rem;
`,StyledChangesSummaryContainer=styled.I4.span`
  position: absolute;
  right: 0.5rem;
  top: 0.25rem;
  background: ${({theme})=>theme.color("Panel.background")};
  z-index: 1;
`,ChangesViewChangesSummary=()=>{const changes=(0,esm_react.md)(includedChangesAtom);return react.createElement(ChangesSummary,{changes})};function CommitActionsRow(){const[amend,setAmend]=(0,esm_react.fp)(amendCommitAtom),focusCommitMessage=(0,esm_react.Xr)(focusCommitMessageAtom);return react.createElement(StyledActionsRow,null,react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionHelpTooltip.P,{actionName:"Amend Commit",helpText:"Modify the latest commit of the current branch"})},(props=>react.createElement("span",props,react.createElement(StyledAmendCheckbox,{isSelected:amend,onChange:value=>{setAmend(value),focusCommitMessage()},preventFocus:!0,mnemonic:"m"},"Amend")))),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Show Commit Options"})},react.createElement(IconButton.K0,{onPress:notImplemented},react.createElement(PlatformIcon.jE,{icon:"general/gear.svg"}))),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Commit Message History"})},react.createElement(IconButton.K0,{isDisabled:!0,onPress:notImplemented},react.createElement(PlatformIcon.jE,{icon:"vcs/historyInline.svg"}))),react.createElement(StyledChangesSummaryContainer,null,react.createElement(ChangesViewChangesSummary,null)))}CommitActionsRow.__docgenInfo={description:"Amend checkbox, commit message history button, and summary of included changes, shown as a row\nbellow changes tree, in commit tool window.",methods:[],displayName:"CommitActionsRow"};const deleteChangeListMsg=new core.S("Delete {count, plural,\n    =1 {Changelist}\n    other {Changelists}\n  }","en-US"),selectedFilesCountMsg=new core.S("{count, plural,\n    =1 {1 selected file}\n    other {# selected files}\n  }","en-US"),deletablePathsUnderChangesTreeSelectionState=(0,vanilla.eU)((get=>[...get(changesUnderSelectedKeysAtom).values()].filter((change=>"DELETED"!==change.type)).map(Change.path))),useChangesViewActions_deleteActionAtom=actionAtom({id:CommonActionIds.j.DELETE,title:"Delete",description:"Delete selected item",isDisabled:(0,vanilla.eU)((get=>0===get(deletablePathsUnderChangesTreeSelectionState).length)),actionPerformed:async({get,set})=>{const pathsToDelete=get(deletablePathsUnderChangesTreeSelectionState),alertDialog=get(alertDialogRefAtom).current;if(0===pathsToDelete.length)return;await(alertDialog?.confirm({title:"Delete",okText:"Delete",message:react.createElement("div",{style:{width:354}},`Are you sure you want to delete ${selectedFilesCountMsg.format({count:pathsToDelete.length})}?`)}))&&(console.log(`deleting ${pathsToDelete}`),await deleteFilesCallback(get,set,pathsToDelete))}});function useChangesViewActions(){const selectedChangeLists=(0,esm_react.md)(changeListsUnderSelection),setActiveChangeList=(0,react_utils.yF)((0,react.useCallback)(((get,set,changeListId)=>{const changeLists=get(changeListsAtom),targetChangeList=changeLists.find((({id})=>id===changeListId));targetChangeList&&set(changeListsAtom,changeLists.map((changeList=>({...changeList,active:changeList===targetChangeList}))))}),[])),nonActiveSelectedChangeLists=[...selectedChangeLists].filter((list=>!list.active)),refresh=useRefreshRepoStatuses(),actions=[{id:CommonActionIds.j.REFRESH,title:"Refresh",icon:react.createElement(PlatformIcon.jE,{icon:"actions/refresh.svg"}),actionPerformed:refresh},{id:VcsActionIds.SHELVE_SILENTLY,title:"Shelve Silently",icon:react.createElement(PlatformIcon.jE,{icon:"vcs/shelveSilent.svg"}),actionPerformed:notImplemented},(0,esm_react.md)(useChangesViewActions_deleteActionAtom)];return 1===selectedChangeLists.size&&actions.push({id:VcsActionIds.RENAME_CHANGELIST,title:"Edit Changelist...",description:"Edit name and description of selected changelist",icon:react.createElement(PlatformIcon.jE,{icon:"actions/edit.svg"}),actionPerformed:notImplemented}),nonActiveSelectedChangeLists.length>0&&actions.push({id:VcsActionIds.REMOVE_CHANGELIST,title:deleteChangeListMsg.format({count:nonActiveSelectedChangeLists.length}),description:"Remove changelist and move all changes to another",icon:react.createElement(PlatformIcon.jE,{icon:"general/remove.svg"}),actionPerformed:notImplemented}),1===nonActiveSelectedChangeLists.length&&actions.push({title:"Set Active Changelist",description:"Set changelist to which new changes are placed by default",id:VcsActionIds.SET_DEFAULT_CHANGELIST,icon:react.createElement(PlatformIcon.jE,{icon:"actions/selectall.svg"}),actionPerformed:()=>{setActiveChangeList(nonActiveSelectedChangeLists[0].id)}}),actions}const ChangesViewSplitter_StyledContainer=styled.I4.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,StyledTreeViewWrapper=styled.I4.div`
  flex: 1;
  overflow: auto;
  position: relative;
`,StyledLoadingWrapper=styled.I4.div`
  position: absolute;
  right: 0.125rem;
  top: 0.125rem;
  z-index: 1;
`,_focusCommitMessageAtom=(0,vanilla.eU)(!1),focusCommitMessageAtom=(0,vanilla.eU)(null,((_get,set)=>{set(_focusCommitMessageAtom,!0)})),ChangesViewSplitter=()=>{const{state:{anchor}}=(0,ToolWindowStateProvider.G)(),treeRef=(0,react.useRef)(null),editorRef=(0,react.useRef)(null),orientation=(0,ToolWindows_utils.K6)(anchor),updating=(0,esm_react.md)(isAnyRepoStatusUpdatingAtom),[commitMessageSize,setCommitMessageSize]=(0,esm_react.fp)(commitMessageSizeState(orientation)),[focusCommitMessage,setFocusCommitMessage]=(0,esm_react.fp)(_focusCommitMessageAtom),changesViewActions=useChangesViewActions(),treeActions=(0,useTreeActions.T)({treeRef});return(0,react.useEffect)((()=>{focusCommitMessage&&(setTimeout((()=>{editorRef.current?.focus()})),setFocusCommitMessage(!1))}),[focusCommitMessage]),react.createElement(ThreeViewSplitter.v,{orientation,innerView:react.createElement(ActionsProvider.Be,{actions:[...treeActions,...changesViewActions]},(({shortcutHandlerProps})=>react.createElement(ChangesViewSplitter_StyledContainer,shortcutHandlerProps,react.createElement(ChangesViewToolbar,null),react.createElement(StyledTreeViewWrapper,null,updating&&react.createElement(Delayed,null,react.createElement(StyledLoadingWrapper,null,react.createElement(LoadingGif,null))),react.createElement(ChangeViewTree,{treeRef})),react.createElement(CommitActionsRow,null)))),innerViewMinSize:50,lastView:react.createElement(CommitView,{editorRef}),lastSize:commitMessageSize,onLastResize:setCommitMessageSize})};ChangesViewSplitter.__docgenInfo={description:"",methods:[],displayName:"ChangesViewSplitter"};const ChangesViewZeroState_StyledContainer=styled.I4.div`
  min-height: 70%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 50px;
  color: ${({theme})=>theme.commonColors.inactiveTextColor};
  white-space: nowrap;
`;function ChangesViewZeroState(){const performAction=(0,ActionsProvider.Bj)();return react.createElement(ChangesViewZeroState_StyledContainer,null,react.createElement("div",{style:{textAlign:"center"}},"To commit changes,"," ",react.createElement(Link.N,{onPress:()=>performAction(VcsActionIds.GIT_INIT)},"Create Git repository..."),react.createElement("br",null),"For recent changes, see"," ",react.createElement(Link.N,{onPress:notImplemented},"Local History..."),react.createElement("br",null),react.createElement("br",null),react.createElement(PlatformIcon.jE,{style:{verticalAlign:"text-top"},icon:"general/contextHelp.svg"})," ",react.createElement(Link.N,{onPress:notImplemented},"Version Control integration")," "))}ChangesViewZeroState.__docgenInfo={description:"",methods:[],displayName:"ChangesViewZeroState"};const ChangesViewPane_StyledContainer=styled_components_browser_esm.Ay.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,ChangesViewPane=()=>{const vcsRoots=(0,esm_react.md)(vcsRootsAtom);return react.createElement(ChangesViewPane_StyledContainer,null,vcsRoots.length>0?react.createElement(ChangesViewSplitter,null):react.createElement(ChangesViewZeroState,null))};function TrackingBranchInfo({branches}){return react.createElement("table",{style:{borderSpacing:0}},branches.map((({branch,repoRoot})=>{const mapping=branch.trackingBranch?`${branch.name} → ${branch.trackingBranch}`:branches.length>1?`${branch.name} (no tracking branch)`:"No tracking branch";return branches.length>1?react.createElement("tr",{key:repoRoot},react.createElement("td",null,path_browserify_default().basename(repoRoot),":  "),react.createElement("td",null,mapping)):react.createElement("tr",{key:repoRoot},react.createElement("td",null,mapping))})))}ChangesViewPane.__docgenInfo={description:"",methods:[],displayName:"ChangesViewPane"},TrackingBranchInfo.__docgenInfo={description:"",methods:[],displayName:"TrackingBranchInfo",props:{branches:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ repoRoot: string; branch: LocalBranch }",signature:{properties:[{key:"repoRoot",value:{name:"string",required:!0}},{key:"branch",value:{name:"signature",type:"object",raw:"{\n  name: string;\n  trackingBranch: string | null;\n}",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"trackingBranch",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]},required:!0}}]}}],raw:"Array<{ repoRoot: string; branch: LocalBranch }>"},description:""}}};const changesBranchesAtom=(0,vanilla.eU)((async get=>{const changesRepoRoots=(await Promise.all(get(allChangesAtom).map((change=>get(vcsFootForFileAtom(Change.path(change))))))).filter((i=>null!=i));return(await Promise.all(changesRepoRoots.map((async repoRoot=>{const branch=(await get(repoBranchesAtom(repoRoot))).currentBranch;return branch?{repoRoot,branch}:null})))).filter((i=>null!=i))})),CommitToolWindow=()=>{const areChangesGroupedByRepo=(0,esm_react.md)(changesGroupingActiveState("repository")),changesBranches=(0,esm_react.md)(changesBranchesAtom),title=!areChangesGroupedByRepo&&changesBranches[0]?`Commit to ${changesBranches[0]?.branch?.name||"!"}`:"Commit";return react.createElement(MultiViewToolWindow.X,null,react.createElement(MultiViewToolWindow.X.View,{tabContent:react.createElement(TooltipTrigger.k,{isDisabled:areChangesGroupedByRepo||0===changesBranches.length,tooltip:react.createElement(ActionTooltip.m,{actionName:react.createElement(TrackingBranchInfo,{branches:changesBranches})})},react.createElement("span",null,title)),key:"commit"},react.createElement(ChangesViewPane,null)))};CommitToolWindow.__docgenInfo={description:"",methods:[],displayName:"CommitToolWindow"};var ToolWindowTabContent=__webpack_require__("./src/Tabs/ToolWindowTabs/ToolWindowTabContent.tsx");const StyledHeader=styled.I4.div`
  box-sizing: border-box;
  display: flex;
  align-items: center;
  height: 2.0625rem;
  border-bottom: 1px solid ${({theme})=>theme.commonColors.borderColor};
  flex-shrink: 0;
`,StyledSpacer=styled.I4.div`
  flex-grow: 1;
`,StyledPlaceholderContainer=styled.I4.div`
  color: ${({theme})=>theme.commonColors.inactiveTextColor};
  display: flex;
  flex-direction: column;
  justify-content: end;
  align-items: center;
  gap: 0.25rem;
  min-height: 37%;
  overflow: hidden;
`;var PositionedTooltipTrigger=__webpack_require__("./src/Tooltip/PositionedTooltipTrigger.tsx");const parseCommitMessage=commitMessage=>{const lines=commitMessage.split("\n"),bodyLines=lines.slice(1);return{subject:lines[0],bodyAsString:bodyLines.join("\n"),body:react.createElement(react.Fragment,null,bodyLines.map(((line,index)=>react.createElement(react.Fragment,{key:index},index>0&&react.createElement("br",null),line))))}};function shortenOid(oid){return oid.slice(0,8)}const commitDateTimeFormatter=new Intl.DateTimeFormat([],{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric",hour12:!0}),commitTimeFormatter=new Intl.DateTimeFormat([],{hour:"numeric",minute:"numeric",hour12:!0}),commitDateFormatter=new Intl.DateTimeFormat([],{day:"numeric",month:"numeric",year:"2-digit"});function formatCommitDate(date){return commitDateFormatter.format(date)}function formatCommitTime(date){return commitTimeFormatter.format(date).replace(" "," ")}var getText;const commitChangesTreeNodeRenderer=createChangesTreeNodeRenderer({commitParent:(getText=node=>`Changes to ${shortenOid(path_browserify_default().basename(node.oid))} ${node.subject.slice(0,50)}`,(node,{fileCount})=>({textValue:getText(node),rendered:react.createElement(ItemLayout.E,null,react.createElement(HighlightedTextValue.Y,null),react.createElement(ItemLayout.E.Hint,null,formatFileCount(fileCount)))}))},{repo:(node,{fileCount})=>({textValue:path_browserify_default().basename(node.repository.dir),rendered:react.createElement(ItemLayout.E,null,react.createElement(RepoColorIcon,{rootPath:node.repository.dir}),react.createElement(HighlightedTextValue.Y,null),react.createElement(ItemLayout.E.Hint,null,formatFileCount(fileCount)))})}),getCommitChanges_cache={};var diff_lib=__webpack_require__("../../node_modules/diff/lib/index.mjs");const DEFAULT_SIMILARITY_INDEX=50;async function detectRenames(changes){return async function detectRenamesBasedOnContent(changes){const deletions=changes.filter(Change.isDeletion),additions=changes.filter(Change.isAddition),contents=new Map,getContent=async change=>(contents.get(change)||contents.set(change,await Change.content(change)),contents.get(change)??""),renameMapping=new Map;return await Promise.all(deletions.map((async deletion=>Promise.all(additions.map((async addition=>{const similarity=await async function computeSimilarity(file1Content,file2Content){return new Promise(((resolve,reject)=>{(0,diff_lib.Pp)(file1Content,file2Content,((err,value=[])=>{if(err)return reject(err);const{unchanged,total}=value.reduce((({total,unchanged},change)=>{const count=change.count??0;return{total:total+count,unchanged:unchanged+(change.added||change.removed?0:count)}}),{total:0,unchanged:0});resolve(unchanged/total*100)}))}))}(await getContent(deletion),await getContent(addition)),currentCandidate=renameMapping.get(deletion);similarity>=DEFAULT_SIMILARITY_INDEX&&(!currentCandidate||similarity>currentCandidate.similarity)&&renameMapping.set(deletion,{similarity,to:addition})})))))),mergeRenames(renameMapping,changes)}(function detectRenamesBasedOnHash(changes){const deletions=changes.filter(Change.isDeletion),additions=changes.filter(Change.isAddition);return mergeRenames(new Map(deletions.map((deletion=>{const match=additions.find((({after:{hash}})=>hash===deletion.before.hash));return match?[deletion,{to:match}]:null})).filter((i=>null!=i))),changes)}(changes))}function mergeRenames(renameMapping,changes){const renamedChanges=[...renameMapping.values()].map((rename=>rename.to));return changes.map((change=>{if(Change.isDeletion(change)){const candidate=renameMapping.get(change);if(candidate)return Change(change.before,candidate?.to.after)}return change})).filter((change=>!renamedChanges.includes(change)))}const commitsDiffWithoutRenamesAtoms=(0,utils.Iz)((params=>(0,vanilla.eU)((()=>async function getCommitChanges({fromRef,toRef,...params}){return(await isomorphic_git.Ay.walk({...params,cache:getCommitChanges_cache,trees:[isomorphic_git.Ay.TREE({ref:fromRef}),isomorphic_git.Ay.TREE({ref:toRef})],map:async function map(filepath,[before,after]){const afterOid=await(after?.oid()),beforeOid=await(before?.oid()),afterType=await(after?.type()),beforeType=await(before?.type());if(afterOid===beforeOid)return null;const afterRevision=afterOid?{hash:afterOid,path:path_browserify_default().join(params.dir||"",filepath),isDir:"tree"===afterType,content:async()=>(new TextDecoder).decode(await(after?.content())??new Uint8Array)}:null,beforeRevision=beforeOid?{hash:beforeOid,path:path_browserify_default().join(params.dir||"",filepath),isDir:"tree"===beforeType,content:async()=>(new TextDecoder).decode(await(before?.content())??new Uint8Array)}:null,change=afterRevision||beforeRevision?Change(beforeRevision,afterRevision):null;return!(!change||Change.revision(change).isDir)&&change}})||[]).filter((item=>item))}({fs,...params})))),equals.A),commitsDiffAtoms=(0,utils.Iz)((params=>(0,vanilla.eU)((async get=>detectRenames(await get(commitsDiffWithoutRenamesAtoms(params)))))),equals.A);function createCommitsChangesTreeState(selectedCommitsAtom){const isGroupingActiveAtom=(0,utils.Iz)((id=>(0,vanilla.eU)(id===directoryGrouping.id))),treeRefAtom=(0,vanilla.eU)(react.createRef()),expandedKeysAtom=(0,vanilla.eU)(new Set),selectionAtom=(0,vanilla.eU)(new Set),getChangedFilesAtom=atomForCommitsDiff=>async get=>{const includedCommitIds=await get(selectedCommitsAtom),{oid,repoPath}=includedCommitIds[0],toRef=oid,{commit}=await(0,isomorphic_git.kN)({fs,dir:repoPath,oid}),parents=commit.parent;if(toRef&&parents){const groupFn=((...args)=>getPrefixedChangesGroupFn(...args)(""))({get,groupings:defaultChangeGroupings,isActive:isGroupingActiveAtom}),rootNodes=await Promise.all(parents?.map((async parent=>({type:"commitParent",key:changesTreeNodeKey("commitParent",parent),oid:parent,subject:commit.message||"",children:groupFn([...await get(atomForCommitsDiff({toRef,fromRef:parent,dir:repoPath}))].map((node=>changeNode(node))))})))),{expandAllKeys,fileCountsMap,...result}=changesTreeNodesResult(1===rootNodes.length?rootNodes[0].children:rootNodes.filter((({children})=>children.length>0)));return(0,tree_utils.Ml)((node=>("directory"===node.type?"a_":"b_")+commitChangesTreeNodeRenderer.getTextValue(node,{fileCountsMap}).toLowerCase()),{roots:result.rootNodes,getChildren:node=>"children"in node?node.children:null}),{...result,fileCountsMap,expandAllKeys:new Set([...expandAllKeys].filter((key=>!`${key}`.startsWith("commitParent"))))}}return null},changedFilesWithoutRenamesAtom=(0,vanilla.eU)(getChangedFilesAtom(commitsDiffWithoutRenamesAtoms)),loadableChangedFilesAtom=[(0,vanilla.eU)(getChangedFilesAtom(commitsDiffAtoms)),changedFilesWithoutRenamesAtom].map(utils.Rq),changedFilesLoadableAtom=(0,vanilla.eU)((get=>get(loadableChangedFilesAtom.find((atom=>"hasData"===get(atom).state))??loadableChangedFilesAtom.slice(-1)[0])));return{isGroupingActiveAtom,treeRefAtom,expandedKeysAtom,selectionAtom,changedFilesLoadableAtom}}const gitLogCommitsChangesTreeState=createCommitsChangesTreeState((0,vanilla.eU)((get=>get(selectedCommitsAtom).then((selectedCommits=>selectedCommits.map((({readCommitResult:{oid},repoPath})=>({oid,repoPath})))))))),CommitsChangedFiles_StyledLoadingWrapper=styled.I4.div`
  position: absolute;
  inset: 0;
  gap: 0.5rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
`;function CommitChangedFiles({treeShortcutHandlerProps}){const selectedCommits=(0,esm_react.md)(unwrapLatestOrNull(selectedCommitsAtom)),treeRef=(0,esm_react.md)(gitLogCommitsChangesTreeState.treeRefAtom),nothingSelected=!selectedCommits?.length,stateLoadable=(0,esm_react.md)(gitLogCommitsChangesTreeState.changedFilesLoadableAtom),state="hasData"===stateLoadable.state?stateLoadable.data:null,[expandedKeys,setExpandedKeys]=(0,esm_react.fp)(gitLogCommitsChangesTreeState.expandedKeysAtom),[selection,setSelection]=(0,esm_react.fp)(gitLogCommitsChangesTreeState.selectionAtom);return(0,react.useEffect)((()=>{setExpandedKeys(state?.expandAllKeys??new Set),setSelection(new Set)}),[stateLoadable.state]),nothingSelected?react.createElement(StyledPlaceholderContainer,null,"Select commits to to view changes"):react.createElement("div",{...treeShortcutHandlerProps,style:{height:"-webkit-fill-available",position:"relative"}},"loading"===stateLoadable.state&&react.createElement(Delayed,null,react.createElement(CommitsChangedFiles_StyledLoadingWrapper,null,react.createElement(LoadingGif,{style:{width:"1.5rem"}}),"Loading...")),state&&react.createElement(SpeedSearchTree.K,{"aria-label":"Commit changes",treeRef,items:state.rootNodes,selectionMode:"multiple",expandedKeys,onExpandedChange:setExpandedKeys,selectedKeys:selection,onSelectionChange:setSelection,style:{paddingBottom:"1rem"},fillAvailableSpace:!0},commitChangesTreeNodeRenderer.itemRenderer({fileCountsMap:state.fileCountsMap})),selectedCommits.length>1&&react.createElement(PositionedTooltipTrigger.O,{placement:"top",tooltip:react.createElement(HelpTooltip.V,{helpText:react.createElement(react.Fragment,null,"Showing diff for more than one commit is not currently supported. Only the first selected commit is taken into account.")})},(props=>react.createElement("span",{...props,style:{position:"absolute",right:"0.5rem",bottom:"0.5rem"}},react.createElement(PlatformIcon.jE,{icon:"general/warning"})))))}CommitChangedFiles.__docgenInfo={description:"TODO: handle multiple selected commits (check Changes.ShowChangesFromParents https://github.com/JetBrains/intellij-community/blob/ac57611a0612bd65ba2a19c841a4f95b40591134/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/frame/VcsLogChangesBrowser.java#L255-L254)",methods:[],displayName:"CommitChangedFiles",props:{treeShortcutHandlerProps:{required:!0,tsType:{name:"HTMLAttributes",elements:[{name:"HTMLElement"}],raw:"HTMLAttributes<HTMLElement>"},description:""}}};var Tooltip=__webpack_require__("./src/Tooltip/Tooltip.tsx");const labelIcon=react.createElement("path",{fill:"currentColor",d:"M4.2 4.8 C4.8627 4.8 5.4 5.3373 5.4 6 C5.4 6.6627 4.8627 7.2 4.2 7.2 C3.5373 7.2 3 6.6627 3 6 C3 5.3373 3.5373 4.8 4.2 4.8 ZM0.6 2.4 L0.6 7.2 L7.8 14.4 L12.6 9.6 L5.4 2.4 Z"}),vcsLogStandardColors_TIP={light:"#ffd100",dark:"#e1c731"},vcsLogStandardColors_BRANCH={light:"#3cb45c",dark:"#3cb45c"},vcsLogStandardColors_BRANCH_REF={light:"#9f79b5",dark:"#9f79b5"},vcsLogStandardColors_TAG={light:"#7a7a7a",dark:"#999999"},gitLogColors={head:({theme})=>theme.color("VersionControl.GitLog.headIconColor",vcsLogStandardColors_TIP),localBranch:({theme})=>theme.color("VersionControl.GitLog.localBranchIconColor",vcsLogStandardColors_BRANCH),remoteBranch:({theme})=>theme.color("VersionControl.GitLog.remoteBranchIconColor",vcsLogStandardColors_BRANCH_REF),tag:({theme})=>theme.color("VersionControl.GitLog.tagIconColor",vcsLogStandardColors_TAG)},StyledRef=(0,styled.I4)(StyledCurrentBranchTag)`
  border-radius: 3px;
  align-items: stretch;
  font-size: 0.75rem;
`,StyledLabelSvg=styled.I4.svg.attrs({viewBox:"0 0 14.5 14.5"})`
  width: 1rem;
  height: 1rem;
  stroke: rgba(0, 0, 0, 0.25);
  stroke-width: 0.5px;
  color: ${({type,theme})=>gitLogColors[type]({theme})};
  z-index: 1; // for the right vertical order of grouped labels
  &:not(:first-child) {
    margin-right: -11px;
  }
`,StyledRefIconGroup=styled.I4.span`
  display: inline-flex;
  flex-direction: row-reverse;
`,StyledLabelText=styled.I4.span`
  text-overflow: ellipsis;
  overflow: hidden;
`;function RefIcon({type}){return react.createElement(StyledLabelSvg,{type},labelIcon)}function RefIconGroup({types}){return react.createElement(StyledRefIconGroup,null,types.map(((type,index)=>react.createElement(StyledLabelSvg,{key:index,type},labelIcon))))}function RefLabel({types,children}){return react.createElement(StyledRef,null,react.createElement(RefIconGroup,{types}),react.createElement(StyledLabelText,null,children))}RefIcon.__docgenInfo={description:"",methods:[],displayName:"RefIcon",props:{type:{required:!0,tsType:{name:'union["type"]',raw:'GitRef["type"]'},description:""}}},RefIconGroup.__docgenInfo={description:"",methods:[],displayName:"RefIconGroup",props:{types:{required:!0,tsType:{name:"Array",elements:[{name:'union["type"]',raw:'GitRef["type"]'}],raw:'Array<GitRef["type"]>'},description:""}}},RefLabel.__docgenInfo={description:"",methods:[],displayName:"RefLabel",props:{types:{required:!0,tsType:{name:"Array",elements:[{name:'union["type"]',raw:'GitRef["type"]'}],raw:'Array<GitRef["type"]>'},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const CommitDetails_StyledContainer=styled.I4.div`
  padding: 0.875rem;
  cursor: default;
`,StyledCommitMessage=styled.I4.div`
  font-family: "JetBrains Mono", monospace;
  line-height: 1.125rem;
  margin-bottom: 1.25rem;
  margin-right: 1.1875rem;
`,StyledCommitMessageHeader=styled.I4.div`
  font-weight: bold;
`,StyledCommitterInfo=styled.I4.div`
  color: ${({theme})=>theme.commonColors.label({disabled:!0})};
`,StyledCommitInfoRow=styled.I4.div`
  line-height: 1.2;
  display: flex;
  gap: 0.25rem;
  margin-bottom: 0.75rem;
`,StyledRepoColorIcon=(0,styled.I4)(RepoColorIcon)`
  align-self: start;
`,StyledRefsContainer=styled.I4.span`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.25rem;
  margin-bottom: 0.75rem;
`;function CommitDetails(){const firstSelectedCommit=(0,esm_react.md)(unwrapLatestOrNull(selectedCommitAtom)),allResolvedRefs=(0,esm_react.md)(unwrapLatestOrNull(allResolvedRefsAtom)),isMultiRepo=(0,esm_react.md)(vcsRootsAtom).length>0;if(!firstSelectedCommit)return react.createElement(StyledPlaceholderContainer,null,"No commits selected");const{readCommitResult:{commit,oid},containingRefs,repoPath}=firstSelectedCommit,{subject,body}=parseCommitMessage(commit.message),committerInfo=[];commit.committer.name!==commit.author.name&&committerInfo.push(react.createElement(react.Fragment,{key:commit.committer.email},"by ",commit.committer.name," ",react.createElement(EmailLink,{email:commit.committer.email}))),commit.committer.timestamp!==commit.author.timestamp&&committerInfo.push(formatDateAndTime(1e3*commit.committer.timestamp));const refs=allResolvedRefs?.[oid]||[],refsByType=(0,groupBy.A)((ref=>ref.type),refs);return react.createElement(CommitDetails_StyledContainer,null,react.createElement(StyledCommitMessage,null,react.createElement(StyledCommitMessageHeader,null,subject),body),react.createElement(StyledCommitInfoRow,null,isMultiRepo&&react.createElement(TooltipTrigger.k,{tooltip:react.createElement(Tooltip.m_,null,repoPath)},(props=>react.createElement(StyledRepoColorIcon,{...props,rootPath:repoPath}))),react.createElement("div",null,`${shortenOid(oid)} ${commit.author.name} `,react.createElement(EmailLink,{email:commit.author.email})," ",`${formatDateAndTime(new Date(1e3*commit.author.timestamp))}`,committerInfo.length>0&&react.createElement(StyledCommitterInfo,null,"committed ",committerInfo))),refs.length>0&&react.createElement(StyledRefsContainer,null,react.createElement(RefGroup,{refs:refsByType.head}),react.createElement(RefGroup,{refs:refsByType.localBranch}),react.createElement(RefGroup,{refs:refsByType.remoteBranch}),react.createElement(RefGroup,{refs:refsByType.tag})),react.createElement("div",null,"In ",containingRefs.size," branches: ",[...containingRefs].join(", ")))}const StyledRefWithIcon=styled.I4.span`
  display: inline-flex;
  align-items: center;
`;function RefGroup({refs}){return refs?.length?react.createElement(react.Fragment,null,refs.map(((ref,index)=>{const name=`${ref.name}${index===refs.length-1?"":","}`;return 0===index?react.createElement(StyledRefWithIcon,null,react.createElement(RefIconGroup,{types:refs.map((({type})=>type)).slice(0,2)}),name):react.createElement("span",null,name)}))):null}function EmailLink({email}){return react.createElement("a",{href:`mailto:${email}`,style:{all:"unset"}},react.createElement(Link.N,null,`<${email}>`))}function formatDateAndTime(date){return`on ${formatCommitDate(date)} at ${formatCommitTime(date)}`}function useRedefineAction(actionId,newId){const action=(0,ActionsProvider.dN)().find((({id})=>id===actionId));return(0,react.useMemo)((()=>{if(!action)return null;const{perform,id,...commonProperties}=action;return{...commonProperties,id:newId,useShortcutsOf:id,isSearchable:!1,actionPerformed:context=>{perform(context)}}}),[action])}CommitDetails.__docgenInfo={description:"",methods:[],displayName:"CommitDetails"};const splitViewSizeState=(0,vanilla.eU)(.5),VcsLogDetailsView_StyledContainer=styled.I4.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,groupingAtom=(0,vanilla.eU)((get=>defaultChangeGroupings.filter((grouping=>isAtom(grouping.isAvailable)?get(grouping.isAvailable):grouping.isAvailable)).map((grouping=>({...grouping,key:`groupBy:${grouping.id}`,isActive:get(gitLogCommitsChangesTreeState.isGroupingActiveAtom(grouping.id))}))))),GROUP_BY_ACTION_GROUP_ID="Vcs.log.detailsView.groupBy",LAYOUT_ACTION_GROUP_ID="Vcs.log.detailsView.layout",VIEW_OPTIONS_ACTION_GROUP_ID="Vcs.log.detailsView.viewOptions",SHOW_DETAILS_ACTION_ID=`${LAYOUT_ACTION_GROUP_ID}.${VcsActionIds.SHOW_DETAILS}`,SHOW_DIFF_PREVIEW_ACTION_ID=`${LAYOUT_ACTION_GROUP_ID}.${VcsActionIds.SHOW_DIFF_PREVIEW}`,groupingActionId=grouping=>`Vcs.log.detailsView.groupBy.${grouping.id}`;function VcsLogDetailsView({tabKey}){const[splitViewSize,setSplitViewSize]=(0,esm_react.fp)(splitViewSizeState),isDetailsVisible=(0,esm_react.md)(vcsLogTabShowCommitDetailsAtoms(tabKey)),toggleGroupBy=(0,react_utils.yF)((0,react.useCallback)(((get,set,id)=>{set(gitLogCommitsChangesTreeState.isGroupingActiveAtom(id),(currentValue=>!currentValue))}),[])),createActionGroup=(0,useCreateDefaultActionGroup.Q)(),availableGroupings=(0,esm_react.md)(groupingAtom),treeRef=(0,esm_react.md)(gitLogCommitsChangesTreeState.treeRefAtom),actions=[createActionGroup({id:VIEW_OPTIONS_ACTION_GROUP_ID,title:"View Options",icon:react.createElement(PlatformIcon.jE,{icon:"actions/groupBy.svg"}),children:[createActionGroup({id:GROUP_BY_ACTION_GROUP_ID,title:"Group By",menuPresentation:"titledSection",icon:react.createElement(PlatformIcon.jE,{icon:"actions/groupBy.svg"}),children:availableGroupings.map((grouping=>({id:groupingActionId(grouping),useShortcutsOf:grouping.useShortcutOf,title:grouping.title,actionPerformed:()=>{toggleGroupBy(grouping.id)}})))}),createActionGroup({id:LAYOUT_ACTION_GROUP_ID,menuPresentation:"titledSection",title:"Layout",children:[useRedefineAction(VcsActionIds.SHOW_DETAILS,SHOW_DETAILS_ACTION_ID),useRedefineAction(VcsActionIds.SHOW_DIFF_PREVIEW,SHOW_DIFF_PREVIEW_ACTION_ID)].filter((i=>null!=i))})]}),...(0,useTreeActions.T)({treeRef})];return react.createElement(ActionsProvider.Be,{actions},(({shortcutHandlerProps})=>react.createElement(VcsLogDetailsView_StyledContainer,null,react.createElement(StyledHeader,null,react.createElement(Toolbar.M,null,react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Show Diff",shortcut:"⌘D"})},react.createElement(IconButton.K0,{isDisabled:!0},react.createElement(PlatformIcon.jE,{icon:"actions/diff.svg"}))),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Revert Selected Changes"})},react.createElement(IconButton.K0,{isDisabled:!0},react.createElement(PlatformIcon.jE,{icon:"actions/rollback.svg"}))),react.createElement(IconButtonWithMenu,{renderMenu:({menuProps})=>react.createElement(VcsLogsDetailsViewOptionsMenu,{menuProps})},react.createElement(PlatformIcon.jE,{icon:"actions/groupBy.svg"}))),react.createElement(StyledSpacer,null),react.createElement(Toolbar.M,{style:{flexShrink:0}},react.createElement(ActionButton.r,{actionId:CommonActionIds.j.EXPAND_ALL}),react.createElement(ActionButton.r,{actionId:CommonActionIds.j.COLLAPSE_ALL}))),react.createElement("div",{style:{flex:1,minHeight:0}},isDetailsVisible?react.createElement(ThreeViewSplitter.v,{orientation:"vertical",firstSize:splitViewSize,onFirstResize:setSplitViewSize,firstViewMinSize:10,firstView:react.createElement(CommitChangedFiles,{treeShortcutHandlerProps:shortcutHandlerProps}),innerView:react.createElement(CommitDetails,null)}):react.createElement(CommitChangedFiles,{treeShortcutHandlerProps:shortcutHandlerProps})))))}const toggleActionAtoms={[SHOW_DETAILS_ACTION_ID]:vcsLogTabShowCommitDetailsInCurrentTabAtom,...Object.fromEntries(defaultChangeGroupings.map((grouping=>[groupingActionId(grouping),gitLogCommitsChangesTreeState.isGroupingActiveAtom(grouping.id)])))},VcsLogDetailsView_selectedKeysAtom=(0,vanilla.eU)((get=>Object.entries(toggleActionAtoms).filter((([,state])=>get(state))).map((([actionId])=>actionId))));function VcsLogsDetailsViewOptionsMenu({menuProps}){const group=(0,useActionGroup.n)(VIEW_OPTIONS_ACTION_GROUP_ID),selectedKeys=(0,esm_react.md)(VcsLogDetailsView_selectedKeysAtom);return group&&react.createElement(ActionGroupMenu,{actionGroup:group},(actionMenuProps=>react.createElement(SpeedSearchMenu.V,{...menuProps,...actionMenuProps,selectedKeys})))}VcsLogDetailsView.__docgenInfo={description:"",methods:[],displayName:"VcsLogDetailsView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};var v4=__webpack_require__("../../node_modules/uuid/dist/esm-browser/v4.js"),SearchInput=__webpack_require__("./src/SearchInput/SearchInput.tsx"),AutoHoverPlatformIcon=__webpack_require__("./src/Icon/AutoHoverPlatformIcon.tsx"),BareButton=__webpack_require__("./src/Button/BareButton.tsx");const StyledDropdownButton=styled.I4.button`
  all: unset;
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding-left: 0.25rem;
  cursor: pointer;
  background: transparent;
  color: ${({theme})=>theme.commonColors.label({disabled:!0})};

  line-height: 1.5;
  border-radius: 0.25rem;
  white-space: nowrap;
  border: 2px solid transparent;
  &:hover {
    color: ${({theme})=>theme.color("*.foreground")};
  }
  &:focus-visible {
    border-color: ${({theme})=>theme.commonColors.focusRing({focused:!0})};
  }
`,StyledDropdownIcon=styled.I4.span`
  margin-left: -1px;
  line-height: 1.2;
`,StyledValue=styled.I4.span`
  color: ${({theme})=>theme.color("*.foreground")};
  max-width: 8.25rem;
  overflow: hidden;
  text-overflow: ellipsis;
`,FocusableAutoHoverPlatformIcon=(0,styled.I4)(AutoHoverPlatformIcon.i)`
  &:focus-visible {
    outline: 2px solid
      ${({theme})=>theme.commonColors.focusRing({focused:!0})};
    outline-offset: -2px;
  }
`;function VcsFilterDropdown({label,value,onClear,...menuTriggerProps}){return react.createElement(MenuTrigger.c,menuTriggerProps,((props,ref)=>react.createElement(StyledDropdownButton,{...props,ref},label,value?react.createElement(react.Fragment,null,": ",react.createElement(StyledValue,null,value),react.createElement(BareButton.l,{onPress:onClear},react.createElement(FocusableAutoHoverPlatformIcon,{icon:"actions/close",hoverIcon:"actions/closeHovered"}))):react.createElement(StyledDropdownIcon,null,react.createElement(PlatformIcon.jE,{icon:"general/arrowDownSmall.svg"})))))}VcsFilterDropdown.__docgenInfo={description:"",methods:[],displayName:"VcsFilterDropdown",props:{label:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},value:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const StyledMenuIconButton=styled.I4.span.attrs({role:"button"})`
  display: inline-flex;
`;function BranchFavoriteButton({onClick,isFavorite,isCurrent}){return react.createElement(StyledMenuIconButton,{onPointerUp:e=>{e.stopPropagation()},onClick},isCurrent?react.createElement(AutoHoverPlatformIcon.i,{icon:isFavorite?"/platform/dvcs-impl/resources/icons/currentBranchFavoriteLabel.svg":"/platform/dvcs-impl/resources/icons/currentBranchLabel.svg",hoverIcon:isFavorite?"nodes/favorite.svg":"nodes/notFavoriteOnHover.svg",hoverContainerSelector:"[role='menuitem']"}):isFavorite?react.createElement(PlatformIcon.jE,{icon:"nodes/favorite.svg"}):react.createElement(AutoHoverPlatformIcon.i,{icon:"nodes/emptyNode.svg",hoverIcon:"nodes/notFavoriteOnHover.svg",hoverContainerSelector:"[role='menuitem']"}))}function BranchesFilterDropdown({tabKey}){const[selectedBranches,setSelectedBranches]=(0,esm_react.fp)(vcsLogFilter.branch(tabKey)),resetBranches=(0,react_utils.AY)(vcsLogFilter.branch(tabKey));return react.createElement(VcsFilterDropdown,{value:selectedBranches.length>0?selectedBranches.join("|"):null,onClear:resetBranches,renderMenu:({menuProps})=>react.createElement(BranchesFilterMenu,{menuProps,onBranchesSelected:setSelectedBranches}),label:"Branch"})}BranchFavoriteButton.__docgenInfo={description:"",methods:[],displayName:"BranchFavoriteButton",props:{isCurrent:{required:!1,tsType:{name:"boolean"},description:""},isFavorite:{required:!0,tsType:{name:"boolean"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const groupRepoRoots=branches=>Object.entries((0,groupBy.A)((({branchName})=>branchName),branches)).map((([branchName,items])=>({branchName,repoRoots:items.map((item=>item.repoRoot))}))),repoGroupedAllBranchesState=(0,vanilla.eU)((async get=>{const allBranches=await get(allBranchesAtom),allRemoteBranches=allBranches.flatMap((({remoteBranches,repoRoot})=>remoteBranches.map((branch=>({repoRoot,branchName:`${branch.remote}/${branch.name}`}))))),allLocalBranches=allBranches.flatMap((({localBranches,repoRoot})=>localBranches.map((branch=>({repoRoot,branchName:branch.name})))));return{localBranches:groupRepoRoots(allLocalBranches),remoteBranches:groupRepoRoots(allRemoteBranches)}}));function BranchesFilterMenu({menuProps,onBranchesSelected}){const[favoriteBranches,setFavoriteBranches]=(0,react.useState)([]),{toggleFavorite,isFavorite}=useFavoriteBranches(),repoGroupedAllBranches=(0,esm_react.md)(unwrapLatestOrNull(repoGroupedAllBranchesState)),{localBranches=[],remoteBranches=[]}=repoGroupedAllBranches||{},remoteBranchesByRemote=(0,groupBy.A)((({branchName})=>branchName.split("/")[0]),remoteBranches);(0,react.useEffect)((()=>{const createLocalBranchItems=(branchType,branches)=>branches.filter((({branchName,repoRoots})=>repoRoots.some((repoRoot=>isFavorite({branchType,branchName,repoRoot}))))).map((({branchName,repoRoots})=>({branchType,branchName,repoRoots})));setFavoriteBranches([{branchType:"LOCAL",branchName:"HEAD",repoRoots:[]}].concat(createLocalBranchItems("LOCAL",localBranches)).concat(createLocalBranchItems("REMOTE",remoteBranches)))}),[]);const renderBranchItem=({branchName,branchType,repoRoots})=>react.createElement(Item.q,{key:`branch:${branchName}`,textValue:branchName},react.createElement(MenuItemLayout.T,{content:branchName,icon:react.createElement(BranchFavoriteButton,{isFavorite:"HEAD"===branchName||repoRoots.some((repoRoot=>isFavorite({branchType,repoRoot,branchName}))),onClick:()=>{"HEAD"!==branchName&&repoRoots.forEach((repoRoot=>{toggleFavorite({branchType,repoRoot,branchName})}))}})}));return react.createElement(SpeedSearchMenu.V,{...menuProps,submenuBehavior:"toggleOnPress",autoFocus:"first",minWidth:250,onAction:key=>{const[type,value]=`${key}`.split(":");"branch"===type&&value?onBranchesSelected([value]):"favorites"===type?onBranchesSelected(favoriteBranches.map((({branchName})=>branchName))):"select"===type&&notImplemented()}},[react.createElement(Item.q,{key:"select"},"Select..."),react.createElement(Item.q,{key:"favorites"},"Favorites"),...favoriteBranches.map(renderBranchItem),react.createElement(Divider.c,null),react.createElement(Item.q,{key:"local",title:"Local"},localBranches.map((({branchName,repoRoots})=>renderBranchItem({branchType:"LOCAL",branchName,repoRoots})))),...Object.entries(remoteBranchesByRemote).map((([origin,branches])=>react.createElement(Item.q,{key:`remote:${origin}`,title:`${origin}/...`},branches.map((({branchName,repoRoots})=>renderBranchItem({branchType:"REMOTE",branchName,repoRoots}))))))])}BranchesFilterDropdown.__docgenInfo={description:"",methods:[],displayName:"BranchesFilterDropdown",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};var ProgressBar=__webpack_require__("./src/ProgressBar/ProgressBar.tsx"),List=__webpack_require__("./src/List/List.tsx"),StyledListItem=__webpack_require__("./src/List/StyledListItem.tsx");const NAME_PATTERN="(\\w+)[\\p{Punct}\\s](\\w+)";function getNameInStandardForm(name){const firstAndLastName=function getFirstAndLastName(name){const matches=name.match(NAME_PATTERN);if(matches)return[matches[1],matches[2]];return null}(name);if(null!=firstAndLastName){const[firstName,lastName]=firstAndLastName;return firstName.toLowerCase()+" "+lastName.toLowerCase()}return function nameToLowerCase(name){return name.match(PRINTABLE_ASCII_PATTERN)?name.toLowerCase():name}(name)}const PRINTABLE_ASCII_PATTERN="[ -~]*";const gitRepoUserAtoms=(0,utils.Iz)((repoRoot=>(0,vanilla.eU)((async()=>({name:await isomorphic_git.Ay.getConfig({fs,dir:repoRoot,path:"user.name"})??"",email:await isomorphic_git.Ay.getConfig({fs,dir:repoRoot,path:"user.email"})??""}))))),StyledCommitRow=styled.I4.div`
  display: flex;
  height: 1.5rem;
  align-items: center;
  width: 100%;
  --column-width-1: 130px;
  --column-width-2: 130px;
  --column-width-3: 70px;
`,StyledCommitCell=styled.I4.div`
  overflow: hidden;
  padding-left: 0.25rem;
`,CommitsTableRow_StyledRefsContainer=styled.I4.div`
  ${({asOverlay})=>asOverlay?styled.AH`
          flex-shrink: 0;
        `:styled.AH`
          position: absolute;
          right: 0;
          top: 1px;
          max-width: calc(100% - 100px);
        `};

  display: flex;
  gap: 0.25rem;
  overflow: hidden;
  background: ${({theme})=>theme.currentBackgroundAware(theme.color("List.background"))};
`,StyledMessageContainer=styled.I4.div`
  position: relative;
  display: flex;
  gap: 0.25rem;
`,StyledRefTooltipRow=styled.I4.div`
  display: flex;
  align-items: center;
  margin: 0 0.25rem;
  font-size: 0.75rem;
`,useCurrentUserHighlightStyle=({repoRoot,author})=>{const currentUser=(0,esm_react.md)(gitRepoUserAtoms(repoRoot)),shouldHighlightCurrentUserCommits=(0,esm_react.md)(vcsTableHighlightMyCommitsAtom),userFilter=(0,esm_react.md)(vcsLogFilterCurrentTab.user);return{fontWeight:shouldHighlightCurrentUserCommits&&userFilter!==CURRENT_USER_FILTER_VALUE&&function areSamePerson(user1,user2){return getNameInStandardForm(user1.name)===getNameInStandardForm(user2.name)}(currentUser,author)?"bold":void 0}};function CommitsTableRow({refs,readCommitResult:{oid,commit:{author,committer,message}},repoRoot}){const showCommitTimestamp=(0,esm_react.md)(vcsTableShowCommitTimestampAtom),referencesOnTheLeft=(0,esm_react.md)(vcsTableReferencesOnTheLeftAtom),isAuthorVisible=(0,esm_react.md)(vcsTableColumnsVisibilityAtoms(authorColumn.id)),isDateVisible=(0,esm_react.md)(vcsTableColumnsVisibilityAtoms(dateColumn.id)),isHashVisible=(0,esm_react.md)(vcsTableColumnsVisibilityAtoms(hashColumn.id)),highlightStyles=useCurrentUserHighlightStyle({author,repoRoot});return react.createElement(StyledCommitRow,null,react.createElement(StyledCommitCell,{style:{flexBasis:"0%",flexGrow:1,flexShrink:1}},react.createElement(StyledMessageContainer,null,refs&&react.createElement(CommitRefs,{onLeft:referencesOnTheLeft,refs}),react.createElement("span",{style:highlightStyles},parseCommitMessage(message).subject))),isAuthorVisible&&react.createElement(StyledCommitCell,{style:{flexBasis:"auto",width:"var(--column-width-1)",flexShrink:1,...highlightStyles}},author.name,committer.name!==author.name&&"*"),isDateVisible&&react.createElement(StyledCommitCell,{style:{flexBasis:"auto",width:"var(--column-width-2)",flexShrink:1,...highlightStyles}},function formatCommitDateTime(date){return commitDateTimeFormatter.format(date).replace(" "," ")}(1e3*(showCommitTimestamp?committer:author).timestamp)),isHashVisible&&react.createElement(StyledCommitCell,{style:{flexBasis:"auto",width:"var(--column-width-3)",flexShrink:1,...highlightStyles}},shortenOid(oid)))}function refKey(ref){return`${ref.type}${ref.name}`}function CommitRefs({refs,onLeft}){const{filteredRefs}=(0,react.useMemo)((()=>{const headIsOnABranch=refs.some((ref=>"localBranch"===ref.type&&ref.isCurrent));return{filteredRefs:refs.filter((ref=>!("head"===ref.type&&headIsOnABranch||"remoteBranch"===ref.type&&refs.find((aBranch=>"localBranch"===aBranch.type&&aBranch.trackingBranch===ref.name)))))}}),[refs]);return react.createElement(TooltipTrigger.k,{placement:"bottom",delay:800,isDisabled:refs.length<2,tooltip:react.createElement(Tooltip.m_,{withPointer:!0},refs.map((ref=>react.createElement(StyledRefTooltipRow,{key:refKey(ref)},react.createElement(RefIcon,{type:ref.type}),ref.name))))},(({ref,...tooltipTriggerProps})=>react.createElement(CommitsTableRow_StyledRefsContainer,{ref,asOverlay:onLeft,...tooltipTriggerProps},filteredRefs.filter((ref=>"remoteBranch"!==ref.type||!refs.find((aBranch=>"localBranch"===aBranch.type&&aBranch.trackingBranch===ref.name)))).map((ref=>{let name=ref.name;const types=[ref.type];return"localBranch"===ref.type&&ref.trackingBranch&&(types.unshift("remoteBranch"),name=`${ref.trackingBranch.split("/")[0]} & ${ref.name}`),"localBranch"===ref.type&&ref.isCurrent&&types.push("head"),react.createElement(RefLabel,{key:refKey(ref),types},name)})))))}CommitsTableRow.__docgenInfo={description:"",methods:[],displayName:"CommitsTableRow",props:{repoRoot:{required:!0,tsType:{name:"string"},description:""},readCommitResult:{required:!0,tsType:{name:"ReadCommitResult"},description:""},refs:{required:!0,tsType:{name:"union",raw:"GitRef[] | undefined",elements:[{name:"Array",elements:[{name:"union",raw:'| {\n    type: "head";\n    name: "HEAD" /* just so name consistently exist on all types which makes it more convenient to work it*/;\n  }\n| {\n    type: "localBranch";\n    name: string;\n    trackingBranch: string | null;\n    isCurrent: boolean;\n  }\n| { type: "remoteBranch"; name: string }\n| { type: "tag"; name: string }',elements:[{name:"signature",type:"object",raw:'{\n  type: "head";\n  name: "HEAD" /* just so name consistently exist on all types which makes it more convenient to work it*/;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"head"',required:!0}},{key:"name",value:{name:"literal",value:'"HEAD"',required:!0}}]}},{name:"signature",type:"object",raw:'{\n  type: "localBranch";\n  name: string;\n  trackingBranch: string | null;\n  isCurrent: boolean;\n}',signature:{properties:[{key:"type",value:{name:"literal",value:'"localBranch"',required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"trackingBranch",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}},{key:"isCurrent",value:{name:"boolean",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "remoteBranch"; name: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"remoteBranch"',required:!0}},{key:"name",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:'{ type: "tag"; name: string }',signature:{properties:[{key:"type",value:{name:"literal",value:'"tag"',required:!0}},{key:"name",value:{name:"string",required:!0}}]}}]}],raw:"GitRef[]"},{name:"undefined"}]},description:""}}};const StyledProgressBar=(0,styled.I4)(ProgressBar.z2)`
  position: absolute;
  width: 100%;
  z-index: 1;
`,CommitsTable_StyledContainer=styled.I4.div`
  position: relative;
  min-height: 0;
  flex: 1;
  ${StyledListItem.H} {
    // the default "min-width: min-content", which is necessary for sizing overlays (e.g. Popup) containing list/tree,
    // results in horizontally scrollable table. Probably not an issue when a proper Table component is implemented.
    min-width: unset;
  }
`,ResolvedRefsContext=react.createContext({});function CommitsTable(){const currentTabKey=(0,esm_react.md)(vcsActiveTabKeyAtom),resetFilters=useResetFilters(),{value:result,isLoading}=(0,esm_react.md)(unwrapLatestWithLoading(commitsTableRowsAtom,null)),rows=result?.rows,allResolvedRefs=(0,esm_react.md)(unwrapLatestOrNull(allResolvedRefsAtom)),[selectedCommits,setSelectedCommits]=(0,esm_react.fp)(commitsSelectionAtom);return react.createElement(ResolvedRefsContext.Provider,{value:allResolvedRefs??{}},react.createElement(CommitsTable_StyledContainer,null,isLoading&&react.createElement(StyledProgressBar,{"aria-label":"Loading commits",isIndeterminate:!0}),rows&&rows.length>0&&react.createElement(List.B,{"aria-label":"Commits list",items:rows,fillAvailableSpace:!0,selectionMode:"multiple",selectedKeys:selectedCommits,onSelectionChange:setSelectedCommits,estimatedItemHeight:24},(({readCommitResult,repoPath})=>react.createElement(Item.q,{key:readCommitResult.oid,textValue:readCommitResult.commit.message},react.createElement(ResolvedRefsContext.Consumer,null,(refs=>react.createElement(CommitsTableRow,{readCommitResult,repoRoot:repoPath,refs:refs[readCommitResult.oid]})))))),rows&&0===rows.length&&react.createElement(StyledPlaceholderContainer,null,"No commits matching filters",react.createElement(Link.N,{onPress:()=>resetFilters(currentTabKey)},"Reset filters"))))}CommitsTable.__docgenInfo={description:"",methods:[],displayName:"CommitsTable"};const showToggleDefs=[{key:"commitTimestamp",name:"Commit Timestamp",atom:vcsTableShowCommitTimestampAtom},{key:"referencesOnLeft",name:"References on the Left",atom:vcsTableReferencesOnTheLeftAtom}],highlightToggleDefs=[{key:"myCommits",name:"My Commits",atom:vcsTableHighlightMyCommitsAtom}],columnToggleDefs=[authorColumn,hashColumn,dateColumn].map((({name,id})=>({name,key:id,atom:vcsTableColumnsVisibilityAtoms(id)}))),useToggleDef=item=>{const[value,set]=(0,esm_react.fp)(item.atom);return{...item,value,set}};function CommitsTableViewOptionsMenuIconButton(){const showToggles=showToggleDefs.map(useToggleDef),highlightToggles=highlightToggleDefs.map(useToggleDef),columnToggles=columnToggleDefs.map(useToggleDef),allToggles=showToggles.concat(highlightToggles).concat(columnToggles);return react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"View Options"})},react.createElement(IconButtonWithMenu,{renderMenu:({menuProps})=>react.createElement(SpeedSearchMenu.V,{...menuProps,selectedKeys:allToggles.filter((({value})=>value)).map((({name})=>name)),onAction:key=>{const toggle=allToggles.find((({name:toggleKey})=>toggleKey===key));toggle?toggle.set((value=>!value)):notImplemented()}},react.createElement(Section.w,{title:"Show"},react.createElement(Item.q,null,"Compact References View"),react.createElement(Item.q,null,"Tag Names"),react.createElement(Item.q,null,"Long Edges"),showToggles.map((({name,key})=>react.createElement(Item.q,{key},name))),react.createElement(Item.q,{title:"Columns"},columnToggles.map((({name,key})=>react.createElement(Item.q,{key},name))))),react.createElement(Section.w,{title:"Highlight"},highlightToggles.map((({name,key})=>react.createElement(Item.q,{key},name))),react.createElement(Item.q,null,"Merge Commits"),react.createElement(Item.q,null,"Current Branch"),react.createElement(Item.q,null,"Not Cherry-Picked Commits")))},react.createElement(PlatformIcon.jE,{icon:"actions/groupBy.svg"})))}CommitsTableViewOptionsMenuIconButton.__docgenInfo={description:"",methods:[],displayName:"CommitsTableViewOptionsMenuIconButton"};const StyledSearchInput=(0,styled.I4)(SearchInput.D)`
  border-radius: 2px;
  width: 219px;
  margin-right: 0.0625rem;
  margin-left: 0.2rem;
`,VcsLogCommitsView_StyledContainer=styled.I4.div`
  height: 100%;
  display: flex;
  flex-direction: column;
`,searchHistoryState=(0,vanilla.eU)([]);function VcsLogCommitsView({tabKey}){const textFilterRef=(0,esm_react.md)(searchInputRefAtom),[searchQuery,setSearchQuery]=(0,esm_react.fp)(vcsLogFilter.searchQuery(tabKey)),[user,setUser]=(0,esm_react.fp)(vcsLogFilter.user(tabKey)),resetUser=(0,react_utils.AY)(vcsLogFilter.user(tabKey)),[dateFilter,setDateFilter]=(0,esm_react.fp)(vcsLogFilter.date(tabKey)),resetDate=(0,react_utils.AY)(vcsLogFilter.date(tabKey)),[searchHistory,setSearchHistory]=(0,esm_react.fp)(searchHistoryState),[searchInputValue,setSearchInputValue]=(0,react.useState)(searchQuery),getActionShortcut=(0,ActionShortcut.a)(),isRegExpOn=(0,esm_react.md)(vcsLogFilter.regExp(tabKey)),isMatchCaseOn=(0,esm_react.md)(vcsLogFilter.matchCase(tabKey)),submitSearchQuery=(value=searchInputValue)=>{setSearchQuery(value),value&&!searchHistory.includes(value)&&setSearchHistory((searchHistory=>[value,...searchHistory.filter((item=>item!==value))]))};(0,react.useEffect)((()=>{setSearchInputValue(searchQuery)}),[searchQuery]);const createNewTab=(0,react_utils.yF)((0,react.useCallback)(((get,set)=>{const newTabId=(0,v4.A)();set(vcsTabKeysAtom,(value=>[...value,newTabId])),Object.values(vcsLogFilter).forEach((getTabFilterAtom=>{set(getTabFilterAtom(newTabId),get(getTabFilterAtom(get(vcsActiveTabKeyAtom))))})),set(vcsActiveTabKeyAtom,newTabId)}),[])),today=new Date,sevenDaysAgo=new Date;sevenDaysAgo.setDate(today.getDate()-7);const yesterday=new Date;yesterday.setDate(today.getDate()-1);const predefinedDateRanges=[{name:"Last 24 hours",value:{from:yesterday}},{name:"Last 7 days",value:{from:sevenDaysAgo}}];return react.createElement(VcsLogCommitsView_StyledContainer,null,react.createElement(StyledHeader,null,react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Text or Hash Filter",shortcut:getActionShortcut(VcsActionIds.FOCUS_TEXT_FILTER)})},react.createElement(StyledSearchInput,{inputRef:textFilterRef,value:searchInputValue,onChange:setSearchInputValue,onSubmit:submitSearchQuery,onBlur:()=>submitSearchQuery(),onClear:()=>submitSearchQuery(""),searchHistory,addonAfter:react.createElement(react.Fragment,null,react.createElement(AutoHoverPlatformIcon.d,{as:ActionButton.r,excludeFromTabOrder:!1,actionId:VcsActionIds.REG_EXP},react.createElement(AutoHoverPlatformIcon.i,{icon:isRegExpOn?"actions/regexSelected":"actions/regex",hoverIcon:isRegExpOn?"actions/regexSelected":"actions/regexHovered"})),react.createElement(AutoHoverPlatformIcon.d,{as:ActionButton.r,excludeFromTabOrder:!1,actionId:VcsActionIds.MATCH_CASE},isMatchCaseOn?react.createElement(PlatformIcon.jE,{icon:"actions/matchCaseSelected"}):react.createElement(AutoHoverPlatformIcon.i,{icon:"actions/matchCase",hoverIcon:"actions/matchCaseHovered"})))})),react.createElement(Toolbar.M,null,react.createElement(BranchesFilterDropdown,{tabKey}),react.createElement(VcsFilterDropdown,{value:user===CURRENT_USER_FILTER_VALUE?"me":user,onClear:resetUser,renderMenu:({menuProps})=>react.createElement(Menu.W1,{...menuProps,onAction:key=>{if("select"===key)return notImplemented();setUser(`${key}`)}},react.createElement(Item.q,{key:"select"},"Select..."),react.createElement(Item.q,{key:CURRENT_USER_FILTER_VALUE},"me")),label:"User"}),react.createElement(VcsFilterDropdown,{value:dateFilter&&VcsLogCommitsView_dateRangeToString(dateFilter),onClear:resetDate,renderMenu:({menuProps})=>react.createElement(Menu.W1,{...menuProps,onAction:key=>{const predefinedDateRange=predefinedDateRanges.find((({name})=>name===key));predefinedDateRange?setDateFilter(predefinedDateRange.value):notImplemented()}},[react.createElement(Item.q,{key:"select"},"Select..."),...predefinedDateRanges.map((({name})=>react.createElement(Item.q,{key:name},name)))]),label:"Date"}),react.createElement(VcsFilterDropdown,{renderMenu:({menuProps})=>react.createElement(Menu.W1,{...menuProps,onAction:notImplemented},react.createElement(Item.q,null,"Select in..."),react.createElement(Item.q,null,"Select in Tree...")),label:"Paths"}),react.createElement(Toolbar.l,null),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Open New Git Log Tab"})},react.createElement(IconButton.K0,{"aria-label":"Checkout",onPress:createNewTab},react.createElement(PlatformIcon.jE,{icon:"actions/openNewTab.svg"})))),react.createElement(StyledSpacer,null),react.createElement(Toolbar.M,{style:{flexShrink:0}},react.createElement(ActionButton.r,{actionId:VcsActionIds.LOG_REFRESH}),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Cherry-Pick"})},react.createElement(IconButton.K0,{isDisabled:!0},react.createElement(PlatformIcon.jE,{icon:"/platform/dvcs-impl/resources/icons/cherryPick.svg"}))),react.createElement(CommitsTableViewOptionsMenuIconButton,null),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Go To Hash/Branch/Tag",shortcut:"⌘F"})},react.createElement(IconButton.K0,null,react.createElement(PlatformIcon.jE,{icon:"actions/find"}))))),react.createElement(CommitsTable,null))}function VcsLogCommitsView_dateRangeToString(dateRange){return dateRange.from&&dateRange.to?`Between ${dateToString(dateRange.from)} and ${dateToString(dateRange.to)}`:dateRange.from?`since ${dateToString(dateRange.from)}`:dateRange.to?`until ${dateToString(dateRange.to)}`:""}function getLocalBranchNodes(repoBranches,shouldGroupByDirectory){const allLocalBranches=repoBranches.flatMap((({repoRoot,localBranches,currentBranch})=>localBranches.map((branch=>({repoRoot,isCurrent:currentBranch?.name===branch.name,branch}))))),localBranchNodes=Object.entries((0,groupBy.A)((({branch})=>branch.name),allLocalBranches)).map((([name,branches])=>{const repos=branches.map((({repoRoot})=>(0,path_browserify.basename)(repoRoot)));return{type:"localBranch",key:`localBranch:${repos.join("|")}:${name}`,name,branches,isFavorite:branches.some((({repoRoot,branch})=>isFavoriteBranchAtoms({repoRoot,branchType:"LOCAL",branchName:branch.name}))),isCurrent:branches.some((({isCurrent})=>isCurrent)),repos:repos.length===repoBranches.length?null:repos}}));return shouldGroupByDirectory?groupNodesByDirectory(localBranchNodes):localBranchNodes}function getRemoteBranchNodes(repoBranches,shouldGroupByDirectory){const allRemoteBranches=repoBranches.flatMap((({repoRoot,remoteBranches})=>remoteBranches.map((branch=>({repoRoot,branch}))))),remoteBranchNodes=Object.entries((0,groupBy.A)((({branch})=>`${branch.remote}/${branch.name}`),allRemoteBranches)).map((([name,branches])=>{const repos=branches.map((({repoRoot})=>(0,path_browserify.basename)(repoRoot)));return{type:"remoteBranch",key:`remoteBranch:${repos.join("|")}:${name}`,name,branches,isFavorite:branches.some((({repoRoot,branch})=>isFavoriteBranchAtoms({repoRoot,branchType:"REMOTE",branchName:branch.name}))),repos:repos.length===repoBranches.length?null:repos}}));return shouldGroupByDirectory?groupNodesByDirectory(remoteBranchNodes):remoteBranchNodes}VcsLogCommitsView.__docgenInfo={description:"",methods:[],displayName:"VcsLogCommitsView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};const branchesTreeNodeAtom=(0,vanilla.eU)((async get=>{const repoBranches=await get(allBranchesAtom),shouldGroupByDirectory=get(branchTreeGroupingAtoms("directory")),shouldGroupByRepository=get(isGroupByRepositoryAvailableAtom)&&get(branchTreeGroupingAtoms("repository"));return[{type:"head"},{type:"branchType",branchType:"LOCAL",children:shouldGroupByRepository?repoBranches.map((repoBranches=>({type:"repository",key:`LOCAL:repository:${repoBranches.repoRoot}`,repoRoot:repoBranches.repoRoot,children:getLocalBranchNodes([repoBranches],shouldGroupByDirectory)}))):getLocalBranchNodes(repoBranches,shouldGroupByDirectory)},{type:"branchType",branchType:"REMOTE",children:shouldGroupByRepository?repoBranches.map((repoBranches=>({type:"repository",key:`REMOTE:repository:${repoBranches.repoRoot}`,repoRoot:repoBranches.repoRoot,children:getRemoteBranchNodes([repoBranches],shouldGroupByDirectory)}))):getRemoteBranchNodes(repoBranches,shouldGroupByDirectory)}]})),groupNodesByDirectory=createGroupByDirectory({shouldCollapseDirectories:!1,getPath:node=>node.name}),branchTreeGroupingAtoms=(0,utils.Iz)((_param=>(0,vanilla.eU)(!1))),isGroupByRepositoryAvailableAtom=(0,vanilla.eU)((get=>get(vcsRootsAtom).length>1)),branchesTreeRefAtoms=vcsLogAtomFamily(react.createRef()),selectedKeysAtoms=vcsLogAtomFamily(new Set),expandedKeysAtoms=vcsLogAtomFamily(new Set),searchInputAtoms=vcsLogAtomFamily(""),groupings=[{id:"directory",title:"Directory",icon:react.createElement(PlatformIcon.jE,{icon:"actions/GroupByPackage.svg"}),isActive:branchTreeGroupingAtoms("directory"),isAvailable:!0},{id:"repository",title:"Repository",isActive:branchTreeGroupingAtoms("repository"),isAvailable:isGroupByRepositoryAvailableAtom}],availableGroupingsAtom=(0,vanilla.eU)((get=>groupings.filter((grouping=>"boolean"!=typeof grouping.isAvailable?get(grouping.isAvailable):grouping.isAvailable)).map((grouping=>({...grouping,isActive:get(branchTreeGroupingAtoms(grouping.id))})))));function BranchesGroupByActionButton(){const toggleGroup=(0,react_utils.yF)((0,react.useCallback)(((get,set)=>id=>{set(branchTreeGroupingAtoms(id),(value=>!value))}),[])),availableGroupings=(0,esm_react.md)(availableGroupingsAtom);return react.createElement(GroupByActionButton,{groupings:availableGroupings,onToggle:toggleGroup})}BranchesGroupByActionButton.__docgenInfo={description:"",methods:[],displayName:"BranchesGroupByActionButton"};const branchTreeNodeRenderers={branchType:node=>{return react.createElement(Item.q,{key:`${node.type}:${node.branchType}`,textValue:(input=node.branchType,input[0].toUpperCase()+input.slice(1).toLowerCase()),childItems:node.children},react.createElement(HighlightedTextValue.Y,null));var input},localBranch:node=>react.createElement(Item.q,{key:`${node.key}`,textValue:(0,path_browserify.basename)(node.name)},react.createElement(ItemLayout.E,null,react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:react.createElement(TrackingBranchInfo,{branches:node.branches})})},(props=>react.createElement(ItemLayout.E.Group,props,node.isCurrent?react.createElement(TooltipTrigger.k,{tooltip:react.createElement(Tooltip.m_,null,"Current ",node.isFavorite&&"favorite ","branch")},(props=>react.createElement(ItemLayout.E.Group,props,react.createElement(PlatformIcon.jE,{icon:node.isFavorite?"/platform/dvcs-impl/resources/icons/currentBranchFavoriteLabel.svg":"/platform/dvcs-impl/resources/icons/currentBranchLabel.svg"})))):react.createElement(PlatformIcon.jE,{icon:"vcs/branchNode"}),react.createElement(HighlightedTextValue.Y,null),node.repos&&react.createElement(ItemLayout.E.Hint,null,"(",node.repos.join(", "),")")))))),remoteBranch:node=>react.createElement(Item.q,{key:`${node.key}`,textValue:(0,path_browserify.basename)(node.name)},react.createElement(ItemLayout.E,null,react.createElement(PlatformIcon.jE,{icon:node.isFavorite?"nodes/favorite.svg":"vcs/branchNode"}),react.createElement(HighlightedTextValue.Y,null),node.repos&&react.createElement(ItemLayout.E.Hint,null,"(",node.repos.join(", "),")"))),repository:node=>react.createElement(Item.q,{key:`${node.key}`,textValue:(0,path_browserify.basename)(node.repoRoot),childItems:node.children},react.createElement(ItemLayout.E,null,react.createElement(RepoColorIcon,{rootPath:node.repoRoot}),react.createElement(HighlightedTextValue.Y,null))),directory:node=>react.createElement(Item.q,{key:`${node.type}_${node.parentNodePath}${node.dirPath}`,textValue:(0,path_browserify.basename)(node.dirPath),childItems:node.children},react.createElement(ItemLayout.E,null,react.createElement(PlatformIcon.jE,{icon:"nodes/folder.svg"}),react.createElement(HighlightedTextValue.Y,null))),head:node=>react.createElement(Item.q,{key:`${node.type}`,textValue:"HEAD (Current Branch)"},react.createElement(HighlightedTextValue.Y,null))};const keyToBranch=key=>{const[type,_repo,branchName]=key.split(":");return"head"===type?"HEAD":"localBranch"===type||"remoteBranch"===type?branchName??null:null},BranchesTree_StyledSearchInput=styled.I4.input`
  all: unset;
  flex: 1;
  align-self: stretch;
`,BranchesTree_StyledContainer=styled.I4.div`
  min-width: 0; // don't outgrow the container
  flex-grow: 1; // fill the available space
  display: flex;
  flex-direction: column;
`,StyledSearchIconContainer=styled.I4.span`
  display: inline-flex;
  margin-top: -0.0625rem;
  margin-left: 0.7rem;
  margin-right: 0.25rem;
  cursor: text;
`;function BranchesTree({tabKey}){const branchesTreeNodes=(0,esm_react.md)(unwrapLatestOrNull(branchesTreeNodeAtom)),[selectedKeys,setSelectedKeys]=(0,esm_react.fp)(selectedKeysAtoms(tabKey)),[expandedKeys,setExpandedKeys]=(0,esm_react.fp)(expandedKeysAtoms(tabKey)),[searchTerm,setSearchTerm]=(0,esm_react.fp)(searchInputAtoms(tabKey)),treeRef=(0,esm_react.md)(branchesTreeRefAtoms(tabKey)),ref=(0,react.useRef)(null),searchInputRef=(0,react.useRef)(null),[isInputFocused,setInputFocused]=(0,react.useState)(!1),setBranchFilter=(0,esm_react.Xr)(vcsLogFilterCurrentTab.branch);return react.createElement(BranchesTree_StyledContainer,null,react.createElement(StyledHeader,null,react.createElement(StyledSearchIconContainer,null,react.createElement(PlatformIcon.jE,{icon:"actions/search"})),react.createElement(BranchesTree_StyledSearchInput,{ref:searchInputRef,tabIndex:-1,value:searchTerm,onChange:e=>setSearchTerm(e.target.value),onFocus:()=>{setInputFocused(!0)},onBlur:()=>{setInputFocused(!1)}})),react.createElement(SpeedSearchTree.K,{ref,treeRef,focusProxyRef:searchInputRef,items:branchesTreeNodes??[],selectionMode:"multiple",selectedKeys,onSelectionChange:setSelectedKeys,expandedKeys,onExpandedChange:setExpandedKeys,onAction:key=>{const branch=keyToBranch(`${key}`);branch&&setBranchFilter([branch])},fillAvailableSpace:!0,showAsFocused:isInputFocused,searchTerm,onSearchTermChange:setSearchTerm,keepSearchActiveOnBlur:!0,hideSpeedSearchPopup:!0,isSearchActive:!0},(node=>branchTreeNodeRenderers[node.type](node))))}BranchesTree.__docgenInfo={description:"",methods:[],displayName:"BranchesTree",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};const DELETE_BRANCH_ACTION_ID="Git.DeleteBranch",SHOW_BRANCH_DIFF_ACTION_ID="Git.Compare.With.Current",SHOW_MY_BRANCHES_ACTION_ID="Git.Show.My.Branches",FETCH_ACTION_ID="Git.Fetch",TOGGLE_FAVORITE_ACTION_ID="Git.Toggle.Favorite",VcsBranchesView_StyledContainer=styled_components_browser_esm.Ay.div`
  display: flex;
  height: 100%;
`;function VcsBranchesView({tabKey}){const treeRef=(0,esm_react.md)(branchesTreeRefAtoms(tabKey)),actions=[{id:VcsActionIds.GIT_UPDATE_SELECTED,title:"Update Selected",icon:react.createElement(PlatformIcon.jE,{icon:"actions/checkOut"}),actionPerformed:()=>{notImplemented()}},{id:DELETE_BRANCH_ACTION_ID,title:"Delete branch",icon:react.createElement(PlatformIcon.jE,{icon:"actions/gc"}),useShortcutsOf:"SafeDelete",actionPerformed:()=>{notImplemented()}},{id:SHOW_BRANCH_DIFF_ACTION_ID,title:"Compare with current",icon:react.createElement(PlatformIcon.jE,{icon:"actions/diff"}),useShortcutsOf:VcsActionIds.SHOW_DIFF,actionPerformed:()=>{notImplemented()}},{id:SHOW_MY_BRANCHES_ACTION_ID,title:"Show My Branches",icon:react.createElement(PlatformIcon.jE,{icon:"actions/find"}),actionPerformed:()=>{notImplemented()}},{id:FETCH_ACTION_ID,title:"Fetch All Remotes",icon:react.createElement(PlatformIcon.jE,{icon:"vcs/fetch"}),actionPerformed:()=>{notImplemented()}},{id:TOGGLE_FAVORITE_ACTION_ID,title:"Mark/Unmark as Favorite",icon:react.createElement(PlatformIcon.jE,{icon:"nodes/favorite"}),actionPerformed:()=>{notImplemented()}},...(0,useTreeActions.T)({treeRef})];return react.createElement(ActionsProvider.Be,{actions},(({shortcutHandlerProps})=>react.createElement(VcsBranchesView_StyledContainer,shortcutHandlerProps,react.createElement(VcsLogBranchesViewToolbar,null),react.createElement(BranchesTree,{tabKey}))))}const StyledToolbar=(0,styled_components_browser_esm.Ay)(Toolbar.M)`
  height: 100%;
  flex-shrink: 0;
`;function VcsLogBranchesViewToolbar(){return react.createElement(StyledToolbar,{border:"right",orientation:"vertical"},react.createElement(ActionButton.r,{actionId:VcsActionIds.GIT_LOG_HIDE_BRANCHES}),react.createElement(Toolbar.l,null),react.createElement(ActionButton.r,{actionId:VcsActionIds.GIT_CREATE_NEW_BRANCH}),react.createElement(ActionButton.r,{actionId:VcsActionIds.GIT_UPDATE_SELECTED}),react.createElement(ActionButton.r,{actionId:DELETE_BRANCH_ACTION_ID}),react.createElement(ActionButton.r,{actionId:SHOW_BRANCH_DIFF_ACTION_ID}),react.createElement(ActionButton.r,{actionId:SHOW_MY_BRANCHES_ACTION_ID}),react.createElement(ActionButton.r,{actionId:FETCH_ACTION_ID}),react.createElement(ActionButton.r,{actionId:TOGGLE_FAVORITE_ACTION_ID}),react.createElement(ActionButton.r,{actionId:VcsActionIds.GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH}),react.createElement(Toolbar.l,null),react.createElement(BranchesGroupByActionButton,null),react.createElement(ActionButton.r,{actionId:CommonActionIds.j.EXPAND_ALL}),react.createElement(ActionButton.r,{actionId:CommonActionIds.j.COLLAPSE_ALL}))}VcsBranchesView.__docgenInfo={description:"",methods:[],displayName:"VcsBranchesView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};const createCopyRevisionNumberActionAtom=revisionNumbersAtom=>{const latestRevisionNumbersAtom=unwrapLatestOrNull(revisionNumbersAtom);return actionAtom({id:VcsActionIds.COPY_REVISION_NUMBER,title:"Copy Revision Number",icon:react.createElement(PlatformIcon.jE,{icon:"actions/copy.svg"}),isDisabled:(0,vanilla.eU)((get=>!get(latestRevisionNumbersAtom)?.length)),useShortcutsOf:CommonActionIds.j.COPY_REFERENCE,actionPerformed:async({get})=>{const selectedCommits=await get(revisionNumbersAtom);clipboard_copy_default()(selectedCommits.join(" ")).catch(console.error)}})},refreshLogActionAtom=actionAtom({id:VcsActionIds.LOG_REFRESH,title:"Refresh",icon:react.createElement(PlatformIcon.jE,{icon:"actions/refresh.svg"}),useShortcutsOf:CommonActionIds.j.REFRESH,actionPerformed:({set})=>{set(allCommitsAtom)}}),copyRevisionNumberActionAtom=createCopyRevisionNumberActionAtom(selectedCommitOids),useCommitsTableActions=()=>[(0,esm_react.md)(copyRevisionNumberActionAtom),(0,esm_react.md)(refreshLogActionAtom)],VersionControlToolWindowZeroState_StyledContainer=styled.I4.div`
  min-height: 70%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 50px;
  color: ${({theme})=>theme.commonColors.inactiveTextColor};
  white-space: nowrap;
`;function VersionControlToolWindowZeroState(){const performAction=(0,ActionsProvider.Bj)();return react.createElement(VersionControlToolWindowZeroState_StyledContainer,null,react.createElement("div",{style:{textAlign:"center"}},"To track changes to code:",react.createElement("br",null),react.createElement(Link.N,{onPress:()=>performAction(VcsActionIds.GIT_INIT)},"Create Git repository..."),react.createElement("br",null),react.createElement(Link.N,{onPress:notImplemented},"Use Local History..."),react.createElement("br",null),react.createElement("br",null),react.createElement(PlatformIcon.jE,{style:{verticalAlign:"text-top"},icon:"general/contextHelp.svg"})," ",react.createElement(Link.N,{onPress:notImplemented},"Version Control integration")," "))}VersionControlToolWindowZeroState.__docgenInfo={description:"",methods:[],displayName:"VersionControlToolWindowZeroState"};const firstViewSizeState=(0,vanilla.eU)(.25),lastViewSizeState=(0,vanilla.eU)(.35),StyledToolWindowHeader=styled.I4.span`
  margin: 0 0.5rem 0 0.125rem;
`,VersionControlToolWindow_StyledContainer=styled.I4.div`
  height: 100%;
  display: flex;
  :focus-visible {
    outline: none;
  }
`,searchInputRefAtom=(0,vanilla.eU)(react.createRef()),VersionControlToolWindow=()=>{const tabKeys=(0,esm_react.md)(vcsTabKeysAtom),[activeTabKey,setActiveTabKey]=(0,esm_react.fp)(vcsActiveTabKeyAtom);return(0,esm_react.md)(vcsRootsAtom).length>0?react.createElement(MultiViewToolWindow.X,{headerContent:react.createElement(StyledToolWindowHeader,null,"Git:"),activeKey:activeTabKey,onActiveKeyChange:key=>setActiveTabKey(`${key}`)},tabKeys.map((key=>react.createElement(MultiViewToolWindow.X.View,{tabContent:react.createElement(VcsToolWindowTabTitle,{tabKey:key}),key},react.createElement(VcsTab,{tabKey:key}))))):react.createElement(DefaultToolWindow.s,{headerContent:"Version Control"},react.createElement(VersionControlToolWindowZeroState,null))},StyledExpandStripeButton=styled.I4.button.attrs({tabIndex:-1})`
  box-sizing: border-box;
  all: unset;
  width: 1.71875rem;
  align-items: center;
  display: flex;
  flex-direction: column;
  padding: 0.5rem 0;
  gap: 0.625rem;
  background: ${({theme})=>theme.color("*.background")};
  color: ${({theme})=>theme.color("*.foreground")};
  :disabled {
    color: ${({theme})=>theme.color("Button.disabledText")};
  }
  &:hover {
    background: ${({theme})=>theme.color("ToolWindow.Button.hoverBackground",theme.dark?"#0f0f0f28":"#55555528")};
  }
`,StyledShowBranchesButton=(0,styled.I4)(StyledExpandStripeButton)`
  border-right: 1px solid ${({theme})=>theme.commonColors.borderColor};
`,StyledShowBranchesButtonText=styled.I4.span`
  writing-mode: vertical-lr;
  transform: rotateZ(180deg);
  font-size: 0.6875rem;
`;function ShowBranchesButton({onPress}){return react.createElement(StyledShowBranchesButton,{onClick:onPress},react.createElement(PlatformIcon.jE,{icon:"actions/arrowExpand"}),react.createElement(StyledShowBranchesButtonText,null,"Branches"))}function VcsTab({tabKey}){const[firstViewSize,setFirstViewSize]=(0,esm_react.fp)(firstViewSizeState),[lastViewSize,setLastViewSize]=(0,esm_react.fp)(lastViewSizeState),actions=function useVcsLogsToolWindowActions(){const actions=[...useCommitsTableActions(),(0,esm_react.md)(focusTextFilterAction),(0,esm_react.md)(hideBranchesAction),(0,esm_react.md)(toggleMatchCaseAction),(0,esm_react.md)(toggleRegExpAction),(0,esm_react.md)(toggleDetailsAction),showDiffPreviewAction];return actions}(),[showBranches,setShowBranches]=(0,esm_react.fp)(vcsLogTabShowBranchesAtoms(tabKey)),firstViewProps=showBranches?{firstView:react.createElement(VcsBranchesView,{tabKey}),firstSize:firstViewSize,onFirstResize:setFirstViewSize,firstViewMinSize:85}:{};return react.createElement(ActionsProvider.Be,{actions},(({shortcutHandlerProps})=>react.createElement(VersionControlToolWindow_StyledContainer,{...shortcutHandlerProps,tabIndex:showBranches?-1:0},!showBranches&&react.createElement(ShowBranchesButton,{onPress:()=>setShowBranches(!0)}),react.createElement(ThreeViewSplitter.v,{...firstViewProps,innerView:react.createElement(VcsLogCommitsView,{tabKey}),innerViewMinSize:200,lastView:react.createElement(VcsLogDetailsView,{tabKey}),lastSize:lastViewSize,onLastResize:setLastViewSize,lastViewMinSize:40}))))}const toggleMatchCaseAction=actionAtom({id:VcsActionIds.MATCH_CASE,title:"Match Case",icon:react.createElement(PlatformIcon.jE,{icon:"actions/matchCase.svg"}),actionPerformed:({get,set})=>{set(vcsLogFilter.matchCase(get(vcsActiveTabKeyAtom)),(value=>!value))}}),hideBranchesAction=actionAtom({id:VcsActionIds.GIT_LOG_HIDE_BRANCHES,title:"Hide Git Branches",icon:react.createElement(PlatformIcon.jE,{icon:"actions/arrowCollapse"}),actionPerformed:({get,set})=>{set(vcsLogTabShowBranchesAtoms(get(vcsActiveTabKeyAtom)),!1)}}),toggleRegExpAction=actionAtom({id:VcsActionIds.REG_EXP,title:"Regex",icon:react.createElement(PlatformIcon.jE,{icon:"actions/regex"}),actionPerformed:({get,set})=>{set(vcsLogFilter.regExp(get(vcsActiveTabKeyAtom)),(value=>!value))}}),toggleDetailsAction=actionAtom({id:VcsActionIds.SHOW_DETAILS,title:"Show Details",description:"Display details panel",actionPerformed:({get,set})=>{set(vcsLogTabShowCommitDetailsAtoms(get(vcsActiveTabKeyAtom)),(value=>!value))}}),focusTextFilterAction=actionAtom({id:VcsActionIds.FOCUS_TEXT_FILTER,title:"Focus Text Filter",actionPerformed:({get})=>{get(searchInputRefAtom).current?.focus()}}),showDiffPreviewAction={id:VcsActionIds.SHOW_DIFF_PREVIEW,title:"Show Diff Preview",description:"Show Diff Preview Panel",actionPerformed:()=>notImplemented()};function VcsToolWindowTabTitle({tabKey}){const closeTab=function useCloseVcsTab(){return(0,react_utils.yF)(closeTabCallback)}();return react.createElement(ToolWindowTabContent.P,{title:(0,esm_react.md)(vcsTabTitleAtoms(tabKey)),closeButton:"MAIN"!==tabKey&&react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Close Tab"})},react.createElement(TabCloseButton.E,{onPress:()=>closeTab(tabKey)}))})}VersionControlToolWindow.__docgenInfo={description:"",methods:[],displayName:"VersionControlToolWindow"};const toolWindows=[{id:"Project",title:"Project",icon:react.createElement(PlatformIcon.jE,{icon:"toolwindows/toolWindowProject"}),content:react.createElement(ProjectToolWindow,null),initialState:(0,ToolWindowsState.o$)({isVisible:!0,weight:.23})},{id:"Terminal",title:"Terminal",icon:react.createElement(PlatformIcon.jE,{icon:"toolwindows/toolWindowProject"}),content:react.createElement(DefaultToolWindow.s,{headerContent:"Terminal"},react.createElement(Terminal,null)),initialState:(0,ToolWindowsState.o$)({anchor:"bottom"})},{id:"Commit",title:"Commit",icon:react.createElement(PlatformIcon.jE,{icon:"toolwindows/toolWindowCommit"}),content:react.createElement(react.Suspense,null,react.createElement(CommitToolWindow,null)),initialState:(0,ToolWindowsState.o$)({anchor:"left",isSplit:!0,isVisible:!1})},{id:"Version Control",title:"Version Control",icon:react.createElement(PlatformIcon.jE,{icon:"toolwindows/toolWindowChanges"}),content:react.createElement(react.Suspense,null,react.createElement(VersionControlToolWindow,null)),initialState:(0,ToolWindowsState.o$)({anchor:"bottom",weight:.35})}];var StatusBar=__webpack_require__("./src/StatusBar/StatusBar.tsx"),StatusBarWidget=__webpack_require__("./src/StatusBar/StatusBarWidget.tsx"),ProgressBarStopButton=__webpack_require__("./src/ProgressBar/ProgressBarStopButton.tsx");const showProgressPanelAtom=(0,vanilla.eU)(!1),tasksPopupBoundsAtom=(0,vanilla.eU)(null);var StyledSeparator=__webpack_require__("./src/StyledSeparator.tsx"),Popup=__webpack_require__("./src/Popup/Popup.tsx");const StyledPopupTitle=styled_components_browser_esm.Ay.div`
  flex: 1;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  margin: 0 0.625rem;
`;function TasksPopup(){const setShowProgressPanel=(0,esm_react.Xr)(showProgressPanelAtom),tasks=(0,esm_react.md)(tasksAtom),cancel=useCancelTask(),[bounds,setBounds]=(0,esm_react.fp)(tasksPopupBoundsAtom);return react.createElement(Popup.zD,{bounds:bounds||{width:300,left:window.innerWidth-300-150,top:window.innerHeight-80*tasks.length-30-100},onBoundsChange:bounds=>{setBounds(bounds)},minHeight:100,minWidth:300,nonDismissable:!0,interactions:"all"},react.createElement(Popup.zD.Layout,{header:react.createElement(Popup.zD.Header,{hasControls:!0},react.createElement(StyledPopupTitle,null,"Background Tasks"),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(Tooltip.m_,null,"Hide")},react.createElement(IconButton.K0,{preventFocusOnPress:!0,excludeFromTabOrder:!0,onPress:()=>setShowProgressPanel(!1)},react.createElement(PlatformIcon.jE,{icon:"general/hideToolWindow"})))),content:react.createElement(react.Fragment,null,tasks.map(((task,index)=>react.createElement(react.Fragment,{key:task.id},react.createElement(ProgressBar.z2,{style:{margin:".5rem 0.75rem"},name:task.title,isIndeterminate:task.progress.isIndeterminate,"aria-label":`Progress of ${task.title}`,details:task.progress.text||(task.progress.secondaryText?react.createElement(react.Fragment,null," "):void 0),secondaryDetails:task.progress.secondaryText,value:task.progress.fraction,maxValue:1,button:task.isCancelable&&react.createElement(ProgressBarStopButton.D,{onPress:()=>cancel(task.id)})}),tasks[index+1]&&react.createElement(StyledSeparator.tj,null)))))}))}function StatusBarProgress(props){return react.createElement(ProgressBar.z2,{dense:!0,namePosition:"side",width:146,...props})}TasksPopup.__docgenInfo={description:"",methods:[],displayName:"TasksPopup"};const Spacer=styled_components_browser_esm.Ay.span`
  width: 0.5rem;
`,StyledProgressBarButton=styled_components_browser_esm.Ay.span`
  cursor: pointer;

  ${ProgressBar.z2.Container} {
    cursor: unset;
  }
`,StatusBarTaskProgressBar=()=>{const firstTask=(0,esm_react.md)(firstTaskAtom),tasksCount=(0,esm_react.md)(taskCountAtom),cancel=useCancelTask(),[showProgressPanel,setShowProgressPanel]=(0,esm_react.fp)(showProgressPanelAtom);return(0,react.useEffect)((()=>{0===tasksCount&&setShowProgressPanel(!1)}),[tasksCount]),react.createElement(react.Fragment,null,firstTask&&!showProgressPanel&&react.createElement(TooltipTrigger.k,{tooltip:react.createElement(Tooltip.m_,null,`${firstTask.title}. Click to see all running background tasks.`)},react.createElement(BareButton.l,{preventFocusOnPress:!0,excludeFromTabOrder:!0,onPress:()=>{setShowProgressPanel(!0)}},react.createElement(StyledProgressBarButton,null,react.createElement(StatusBarProgress,{name:firstTask.progress.text||firstTask.title,isIndeterminate:firstTask.progress.isIndeterminate,value:firstTask.progress.fraction,maxValue:1,button:react.createElement(react.Fragment,null,firstTask.isCancelable&&react.createElement(TooltipTrigger.k,{tooltip:react.createElement(Tooltip.m_,null,"Cancel")},react.createElement(ProgressBarStopButton.D,{small:!0,onPress:()=>cancel(firstTask.id)})))})))),(tasksCount>1||showProgressPanel)&&react.createElement(react.Fragment,null,react.createElement(Spacer,null),react.createElement(Link.N,{onPress:()=>setShowProgressPanel((currentValue=>!currentValue))},showProgressPanel?"Hide processes":"Show all"," (",tasksCount,")")),showProgressPanel&&tasksCount>0&&react.createElement(TasksPopup,null))};StatusBarTaskProgressBar.__docgenInfo={description:'Intentionally, "processes" haven\'t been abstracted as an extension point for different features, since the focus\nhere is not to create an IDE, but to demo UI components.',methods:[],displayName:"StatusBarTaskProgressBar"};var PopupTrigger=__webpack_require__("./src/Popup/PopupTrigger.tsx");const activeRepoRootAtom=(0,vanilla.eU)((async get=>{const activeFile=get(activeEditorTabAtom)?.filePath;return(activeFile&&await get(vcsFootForFileAtom(activeFile)))??get(vcsRootsAtom)[0]?.dir})),activeRepoBranchesAtom=(0,vanilla.eU)((async get=>{const activeFileRepoRoot=await get(activeRepoRootAtom);return activeFileRepoRoot?get(repoBranchesAtom(activeFileRepoRoot)):null})),activeCurrentBranchAtom=(atom=(0,vanilla.eU)((async get=>{const activeFile=get(activeEditorTabAtom)?.filePath,filepath=activeFile??await get(activeRepoRootAtom);return filepath?get(branchForPathAtoms(filepath)):null})),(0,utils.mg)(atom,((value,prevValue)=>value instanceof Promise?Promise.all([value,prevValue]).then((([value,prevValue])=>value??prevValue??value)):value??prevValue??value)));var atom;const activeRepoHeadAtom=(0,vanilla.eU)((async get=>{const branch=await get(activeCurrentBranchAtom);if(branch)return{detached:!1,head:branch};const repoRoot=await get(activeRepoRootAtom);if(repoRoot){const head=await(0,isomorphic_git.qE)({fs,dir:repoRoot,ref:"HEAD"}).catch((_e=>null));return head?{detached:!0,head}:null}return null}));var PopupLayout=__webpack_require__("./src/Popup/PopupLayout.tsx"),Balloon=__webpack_require__("./src/Balloon/Balloon.tsx"),InputField=__webpack_require__("./src/InputField/InputField.tsx");function validateBranchName(branches,newBranchName){return branches?.remoteBranches.some((remoteBranch=>`${remoteBranch.remote}/${remoteBranch.name}`===newBranchName))?"CLASHING_WITH_REMOTE":branches?.localBranches.some((({name})=>name===newBranchName))?"EXISTING":null}const ILLEGAL_CHARS_PATTERN=new RegExp(`(^\\.)|(^-)|(^/)|(\\.\\.)+|[ ~:^?*\\[\\\\]+|(@\\{)+|[${Array(32).fill(null).map(((_,index)=>String.fromCharCode(index))).join("")}u007F]`);function cleanUpBranchName(branchName){return branchName.replace(ILLEGAL_CHARS_PATTERN,"_")}const RenameBranchWindow_StyledContainer=styled.I4.div`
  padding: 0.5rem 1rem;
`,StyledInputField=(0,styled.I4)(InputField.F)`
  width: 100%;
`,ErrorMessages={EXISTING:branchName=>react.createElement(react.Fragment,null,"Branch name ",branchName," already exists ",react.createElement("br",null)),CLASHING_WITH_REMOTE:branchName=>react.createElement(react.Fragment,null,"Branch name ",branchName," clashes with remote branch ",react.createElement("br",null),"with the same name")};function RenameBranchWindow({branchName,repoRoot,close}){const[newBranchName,setNewBranchName]=(0,react.useState)(branchName),[touched,setTouched]=(0,react.useState)(!1),balloonManager=(0,BalloonManager.c)(),branches=(0,esm_react.md)(repoBranchesAtom(repoRoot)),renameBranch=function useRenameBranch(){const toggleFavoriteBranch=useToggleFavoriteBranch();return(0,react_utils.yF)((0,react.useCallback)((async(get,set,repoRoot,branchName,newBranchName)=>{await(0,isomorphic_git.Rr)({fs,dir:repoRoot,oldref:branchName,ref:newBranchName}),set(repoBranchesAtom(repoRoot));const favoriteBranch={branchType:"LOCAL",branchName,repoRoot};isFavorite(get(favoriteBranchesAtom),get(excludedFromFavoriteBranchesAtom),favoriteBranch)&&(toggleFavoriteBranch(favoriteBranch,!1),toggleFavoriteBranch({...favoriteBranch,branchName:newBranchName},!0))}),[]))}(),error=validateBranchName(branches,newBranchName),validationState=error&&touched?"error":"valid";return react.createElement(ModalWindow.QI,{minWidth:"content",minHeight:"content"},react.createElement(WindowLayout.$,{header:`Rename branch ${branchName}`,content:react.createElement(RenameBranchWindow_StyledContainer,null,react.createElement("form",{id:"branch_rename_form",onSubmit:event=>{event.preventDefault(),error?setTouched(!0):renameBranch(branches.repoRoot,branchName,newBranchName).catch((e=>{balloonManager.show({icon:"Error",title:"Unexpected error",body:`Could not rename branch ${branchName} to ${newBranchName}.`}),console.error("Branch rename error: ",e)})).then((()=>{close()}))}},react.createElement(StyledInputField,{labelPlacement:"above",label:"New branch name:",value:newBranchName,onChange:newValue=>{setNewBranchName(cleanUpBranchName(newValue)),setTouched(!0)},validationState,validationMessage:error&&"error"===validationState?ErrorMessages[error]?.(branchName):void 0}))),footer:react.createElement(WindowLayout.$.Footer,{right:react.createElement(react.Fragment,null,react.createElement(Button.$,{onPress:close},"Cancel"),react.createElement(Button.$,{variant:"default",type:"submit",form:"branch_rename_form",isDisabled:Boolean(error)&&touched},"Rename"))})}))}RenameBranchWindow.__docgenInfo={description:"",methods:[],displayName:"RenameBranchWindow",props:{branchName:{required:!0,tsType:{name:"string"},description:""},repoRoot:{required:!0,tsType:{name:"string"},description:""},close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const BranchesPopup_StyledHeader=styled.I4.div`
  box-sizing: border-box;
  padding: 0 0.375rem;
  display: flex;
  align-items: center;
  width: 100%;
`,StyledTitle=styled.I4.div`
  flex: 1;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  margin: 0 0.625rem;
`,branchesPopupSizeState=(0,vanilla.eU)(void 0);function BranchesPopup({close}){const repoBranches=(0,esm_react.md)(unwrapLatestOrNull(allBranchesAtom)),[branchesPopupPersistedSize,setBranchesPopupPersistedSize]=(0,esm_react.fp)(branchesPopupSizeState),[branchesPopupBounds,setBranchesPopupBounds]=(0,react.useState)(branchesPopupPersistedSize??{}),newBranchAction=(0,ActionsProvider.y3)(VcsActionIds.GIT_CREATE_NEW_BRANCH),deleteBranch=function useDeleteBranch(){return(0,react_utils.yF)((0,react.useCallback)(((_get,set,repoRoot,branchName)=>(0,isomorphic_git.SN)({fs,dir:repoRoot,ref:branchName}).then((()=>{set(repoBranchesAtom(repoRoot))}))),[]))}(),balloonManager=(0,BalloonManager.c)(),windowManager=useWindowManager(),checkoutBranch=function useCheckoutBranch(){return(0,react_utils.yF)((0,react.useCallback)((async(get,set,repoRoot,branchName,remote)=>{const reloadFileFromDisk=reloadFileFromDiskCallback(get,set);await(0,isomorphic_git.Pt)({fs,dir:repoRoot,remote,ref:branchName}),console.log(`checked out branch ${branchName}`),set(repoBranchesAtom(repoRoot)),set(dirContentAtom(repoRoot));const openedFiles=get(editorTabsAtom),existingOpenedFile=await asyncFilter((async({filePath})=>{const exists=await fs.promises.exists(filePath);return console.log(`updating the content of the file ${filePath}`,exists),exists&&await reloadFileFromDisk(filePath),exists}),openedFiles);set(editorTabsAtom,existingOpenedFile)}),[]))}(),{isFavorite,toggleFavorite}=useFavoriteBranches();if(!repoBranches)return null;const title=1===repoBranches.length?`Git Branches in ${path_browserify_default().basename(repoBranches[0].repoRoot)}`:"Git Branches";return react.createElement(Popup.zD,{interactions:"all",minHeight:55,minWidth:300,bounds:branchesPopupBounds,onBoundsChange:(bounds,interactionType)=>{"resize"===interactionType&&setBranchesPopupPersistedSize({width:bounds.width,height:bounds.height}),setBranchesPopupBounds(bounds)}},react.createElement(PopupLayout.j,{header:react.createElement(Popup.zD.Header,{hasControls:!0},react.createElement(BranchesPopup_StyledHeader,null,react.createElement(StyledTitle,null,title),react.createElement(Toolbar.M,null,react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Fetch"})},react.createElement(IconButton.K0,{onPress:()=>{notImplemented(),close()}},react.createElement(PlatformIcon.jE,{icon:"vcs/fetch.svg"}))),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Restore Popup Size"})},react.createElement(IconButton.K0,{isDisabled:void 0===branchesPopupPersistedSize,onPress:()=>{setBranchesPopupPersistedSize(void 0),setBranchesPopupBounds((({width,height,...currentBounds})=>({...currentBounds})))}},react.createElement(PlatformIcon.jE,{icon:"general/fitContent.svg"})))))),content:react.createElement(SpeedSearchMenu.V,{"aria-label":title,submenuBehavior:"toggleOnPress",fillAvailableSpace:!0,autoFocus:"first",disabledKeys:repoBranches.flatMap((({localBranches,repoRoot})=>localBranches.filter((({trackingBranch})=>!trackingBranch)).map((({name})=>`${repoRoot}/pull-${name}`)))),onAction:key=>{const[repoRoot,branch,operation]=`${key}`.split("//");async function tryCheckout(checkout){try{await checkout()}catch(e){e instanceof isomorphic_git.I.CheckoutConflictError?balloonManager.show({icon:"Error",title:"Git Checkout Problem",body:e.message}):balloonManager.show({icon:"Error",title:"Checkout failed",body:`Could not checkout branch ${branch}`})}}if(key===newBranchAction?.id)return newBranchAction?.perform();switch(operation){case"delete":return deleteBranch(repoRoot,branch).then((()=>{balloonManager.show({title:`Deleted branch: ${branch}`,icon:"Info",actions:react.createElement(Balloon.o,{onPress:notImplemented},"Restore")})}),(()=>{balloonManager.show({title:`Could not deleted branch: ${branch}`,icon:"Error"})}));case"rename":return windowManager.open((({close})=>react.createElement(RenameBranchWindow,{repoRoot,branchName:branch,close})));case"checkout":return function checkoutLocalBranch(){return tryCheckout((()=>checkoutBranch(repoRoot,branch)))}();case"remote-checkout":return function checkoutRemoteBranch(){const remoteBranch=repoBranches?.find((({repoRoot:aRepoRoot})=>aRepoRoot===repoRoot))?.remoteBranches.find((({name,remote})=>`${remote}/${name}`===branch));if(remoteBranch)return tryCheckout((()=>checkoutBranch(repoRoot,remoteBranch.name,remoteBranch.remote)))}();default:return notImplemented()}},onClose:close},newBranchAction&&react.createElement(Item.q,{key:newBranchAction.id,textValue:newBranchAction.title},react.createElement(MenuItemLayout.T,{icon:newBranchAction.icon,content:newBranchAction.title})),react.createElement(Item.q,{key:"checkout_revision"},"Checkout Tag or Revision..."),repoBranches.flatMap((({remoteBranches,localBranches,repoRoot,currentBranch})=>{const getSectionLabel=(label,repoRoot)=>repoBranches.length>1?`${label} in ${path_browserify_default().basename(repoRoot)}`:label,compareActions=(branchName,isCurrent)=>[!isCurrent&&react.createElement(Item.q,{key:`${repoRoot}//${branchName}//compare-with-branch`},`Compare with '${branchName}'`),react.createElement(Item.q,{key:`${repoRoot}//${branchName}//show-diff-with-working-tree`},"Show Diff with Working Tree"),react.createElement(Divider.c,{key:"compare-actions-divider"})],mergeActions=(branchName,currentBranch)=>currentBranch&&branchName!==currentBranch&&[react.createElement(Item.q,{key:`${repoRoot}//${branchName}//rebase-current-onto`},`Rebase '${currentBranch}' onto '${branchName}'`),react.createElement(Item.q,{key:`${repoRoot}//${branchName}//merge-into-current`},`Merge '${branchName}' onto '${currentBranch}'`),react.createElement(Divider.c,{key:"merge-actions-divider"})];return[react.createElement(Section.w,{key:`${repoRoot}//local_branches`,title:getSectionLabel("Local Branches",repoRoot)},localBranches.map((({name,trackingBranch})=>{const isCurrent=name===currentBranch?.name,favoriteBranchArgs={branchName:name,branchType:"LOCAL",repoRoot};return react.createElement(Item.q,{key:`${repoRoot}//${name}`,textValue:name,title:react.createElement(MenuItemLayout.T,{content:name,icon:react.createElement(BranchFavoriteButton,{isFavorite:isFavorite(favoriteBranchArgs),isCurrent,onClick:()=>{toggleFavorite(favoriteBranchArgs)}}),shortcut:trackingBranch&&react.createElement(ItemLayout.E.Hint,{small:!0},trackingBranch)})},!isCurrent&&react.createElement(Item.q,{key:`${repoRoot}//${name}//checkout`},"Checkout"),react.createElement(Item.q,{key:`${repoRoot}//${name}//new-branch-from`},`New Branch from '${name}'...`),!isCurrent&&react.createElement(Item.q,{key:`${repoRoot}//${name}//checkout-and-rebase-onto`},`Checkout and rebase onto '${name}'`),react.createElement(Divider.c,{key:"new-branch-actions-divider"}),compareActions(name,isCurrent),mergeActions(name,currentBranch?.name),react.createElement(Item.q,{key:`${repoRoot}//${name}//pull`},"Update"),react.createElement(Item.q,{key:`${repoRoot}//${name}//push`},"Push..."),react.createElement(Divider.c,{key:"push-divider"}),react.createElement(Item.q,{key:`${repoRoot}//${name}//rename`},"Rename..."),!isCurrent&&react.createElement(Item.q,{key:`${repoRoot}//${name}//delete`},"Delete"))}))),react.createElement(Section.w,{key:`${repoRoot}//remote_branches`,title:getSectionLabel("Remote Branches",repoRoot)},remoteBranches.map((branch=>{const branchName=`${branch.remote}/${branch.name}`,favoriteBranchArgs={branchName,branchType:"REMOTE",repoRoot};return react.createElement(Item.q,{key:`${repoRoot}//${branchName}`,textValue:branchName,title:react.createElement(MenuItemLayout.T,{content:branchName,icon:react.createElement(BranchFavoriteButton,{isFavorite:isFavorite(favoriteBranchArgs),onClick:()=>{toggleFavorite(favoriteBranchArgs)}})})},react.createElement(Item.q,{key:`${repoRoot}//${branchName}//remote-checkout`},"Checkout"),react.createElement(Item.q,{key:`${repoRoot}//${branchName}//new-branch-from`},`New Branch from '${branchName}'...`),react.createElement(Item.q,{key:`${repoRoot}//${branchName}//checkout-and-rebase-onto`},`Checkout and rebase onto '${branchName}'`),react.createElement(Divider.c,{key:"new-branch-actions-divider"}),compareActions(branchName,!1),mergeActions(branchName,currentBranch?.name),react.createElement(Item.q,{key:`${repoRoot}//${branchName}//pull-into-using-merge`},`Pull into '${branchName}' Using Merge`),react.createElement(Item.q,{key:`${repoRoot}//${branchName}//pull-into-using-rebase`},`Pull into '${branchName}' Using Rebase`),react.createElement(Divider.c,null),react.createElement(Item.q,{key:`${repoRoot}//${branchName}//delete`},"Delete"))})))]})))}))}BranchesPopup.__docgenInfo={description:"",methods:[],displayName:"BranchesPopup",props:{close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let notified=!1;function BranchPopupTrigger(){const gitRepoHead=(0,esm_react.md)(unwrapLatestOrNull(activeRepoHeadAtom)),maybeShowGitCloneTip=(()=>{const balloonManager=(0,BalloonManager.c)(),vcsRoots=(0,esm_react.md)(vcsRootsAtom),performAction=(0,ActionsProvider.Bj)();return async()=>{vcsRoots.length<2&&!notified&&(notified=!0,balloonManager.showSticky({title:"Clone another repository",icon:react.createElement(PlatformIcon.jE,{icon:"actions/quickfixOffBulb.svg"}),body:"Git integration in the example app supports multiple repos within the same project. See it in action by cloning another repo",actions:react.createElement(react.Fragment,null,react.createElement(Balloon.o,{onPress:()=>{performAction("ExampleApp.cloneExampleRepo")}},"Clone another repo"))}))}})();return gitRepoHead&&react.createElement(PopupTrigger.J,{placement:"top",onOpenChange:isOpen=>{isOpen||setTimeout(maybeShowGitCloneTip,500)},popup:({close})=>react.createElement(BranchesPopup,{close})},react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:gitRepoHead.detached?"Git: Detached HEAD doesn't point to any branch":`Git Branch: ${gitRepoHead.head}`})},react.createElement(StatusBarWidget.i,{icon:react.createElement(PlatformIcon.jE,{icon:gitRepoHead.detached?"general/warning.svg":"vcs/branch.svg"}),label:gitRepoHead.head.slice(0,gitRepoHead.detached?8:void 0)})))}BranchPopupTrigger.__docgenInfo={description:"",methods:[],displayName:"BranchPopupTrigger"};const StyledLastMessage=styled_components_browser_esm.Ay.div`
  margin-left: 0.75rem;
  cursor: pointer;
`,IdeStatusBar=()=>{const cursorPosition=(0,esm_react.md)(editorCursorPositionState);return react.createElement(StatusBar.e,{left:react.createElement(react.Fragment,null,react.createElement(PlatformIcon.jE,{icon:"general/tbHidden.svg",role:"button",onClick:notImplemented}),react.createElement(StyledLastMessage,null,"Tooltip content or last message will show up here.")),right:react.createElement(react.Fragment,null,react.createElement(StatusBarTaskProgressBar,null),react.createElement(StatusBarWidget.i,{onPress:notImplemented,label:"LF"}),react.createElement(StatusBarWidget.i,{onPress:notImplemented,label:`${cursorPosition.lineNumber},${cursorPosition.column}`}),react.createElement(StatusBarWidget.i,{label:"UTF-8"}),react.createElement(MenuTrigger.c,{renderMenu:({menuProps})=>react.createElement(Menu.W1,{...menuProps,onAction:notImplemented},react.createElement(Item.q,null,"Configure Indents for Typescript"),react.createElement(Item.q,null,"Disable Indents Detection for Project"))},((props,ref)=>react.createElement(StatusBarWidget.i,{...props,ref,label:"2 spaces"}))),react.createElement(MenuTrigger.c,{renderMenu:({menuProps})=>react.createElement(Menu.W1,{...menuProps,onAction:notImplemented},react.createElement(Item.q,{title:"Compile"},react.createElement(Item.q,null,"packages/jui/tsconfig.json"),react.createElement(Item.q,null,"packages/jui/src/StatusBar/StatusBar.stories.tsx"),react.createElement(Item.q,null,"Compile All")),react.createElement(Divider.c,null),react.createElement(Item.q,null,react.createElement(MenuItemLayout.T,{icon:react.createElement(PlatformIcon.jE,{icon:"javaee/updateRunningApplication.svg"}),content:"Restart Typescript Service"})),react.createElement(Item.q,null,react.createElement(MenuItemLayout.T,{icon:react.createElement(PlatformIcon.jE,{icon:"general/settings.svg"}),content:"Configure Typescript..."})))},((props,ref)=>react.createElement(StatusBarWidget.i,{...props,ref,label:"TypeScript 4.4.3"}))),react.createElement(BranchPopupTrigger,null),react.createElement(StatusBarWidget.i,{icon:react.createElement(PlatformIcon.jE,{icon:"ide/readwrite.svg"})}),react.createElement(StatusBarWidget.i,{icon:react.createElement(PlatformIcon.jE,{icon:"ide/fatalError.svg"})}))})};IdeStatusBar.__docgenInfo={description:"",methods:[],displayName:"IdeStatusBar"};const useNestedSelectionState=(tree,{selectedKeys:selectedKeysProp,defaultSelectedKeys,onSelectedKeysChange})=>{const[selectedKeys,selectedKeysSetter]=((valueProp,defaultValue=new Set,onChange)=>{const[value,setValue]=(0,useControlledState.P)(valueProp,defaultValue,onChange);return[value,useStateSetterForSet(setValue)]})(selectedKeysProp,defaultSelectedKeys||new Set,onSelectedKeysChange),treeRef=(0,useLatest.F)(tree);return(0,react.useMemo)((()=>new NestedSelection({items:selectedKeys,...selectedKeysSetter},treeRef.current)),[selectedKeys,tree.rootNodes])},RollbackTreeContextMenu=()=>react.createElement(Menu.W1,{disabledKeys:["showDiff"],"aria-label":"Context menu",onAction:notImplemented},react.createElement(Item.q,{key:"showDiff",textValue:"Show Diff"},react.createElement(MenuItemLayout.T,{icon:react.createElement(PlatformIcon.jE,{icon:"actions/diff.svg"}),content:"Show Diff"})));RollbackTreeContextMenu.__docgenInfo={description:"",methods:[],displayName:"RollbackTreeContextMenu"};const RollbackWindow_StyledContainer=styled.I4.div`
  box-sizing: border-box;
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 1rem 0.75rem 0;
`,StyledFrame=styled.I4.div`
  border: 1px solid ${({theme})=>theme.commonColors.contrastBorder};
  flex: 1;
  overflow: auto;
`,RollbackWindow_StyledLine=styled.I4.div`
  &:not(:empty) {
    line-height: 1.5;
    padding-left: 0.375rem;
    margin-bottom: 0.75rem;
  }
`;function RollbackWindow(){const defaultExpandedKeys=(0,esm_react.md)(rollbackViewState.initiallyExpandedKeysAtom),initiallyIncludedChangeKeys=(0,esm_react.md)(rollbackViewState.initiallyIncludedChangesAtom).map(getNodeKeyForChange),{fileCountsMap}=(0,esm_react.md)(changesTreeNodesAtom),[windowBounds,setWindowBounds]=(0,esm_react.fp)(rollbackViewState.windowBoundsAtom),rootNodes=(0,esm_react.md)(rollbackViewState.rootNodesAtom),[selectedKeys,setSelectedKeys]=(0,react.useState)(new Set(initiallyIncludedChangeKeys.slice(0,1))),[expandedKeys,setExpandedKeys]=(0,react.useState)(defaultExpandedKeys),[includedChangeKeys,setIncludedChangeKeys]=(0,react.useState)(new Set(initiallyIncludedChangeKeys)),nestedSelection=useNestedSelectionState({rootNodes,getKey:node=>node.key,getChildren:node=>isGroupNode(node)?node.children:null},{selectedKeys:includedChangeKeys,onSelectedKeysChange:setIncludedChangeKeys}),includedChanges=(0,esm_react.md)(allChangesAtom).filter((change=>includedChangeKeys.has(getNodeKeyForChange(change)))),rollbackChanges=(0,react_utils.yF)(rollbackChangesCallback),balloons=(0,BalloonManager.c)(),setOpen=(0,esm_react.Xr)(rollbackViewState.isOpenAtom),close=()=>setOpen(!1),treeRef=(0,react.useRef)(null),treeActions=(0,useTreeActions.T)({treeRef}),[deleteAddedFiles,setDeleteAddedFiles]=(0,react.useState)(!1),atLeastOneNewFileSelected=includedChanges.some((change=>"ADDED"===change.type));return react.createElement(ModalWindow.QI,{onClose:close,bounds:windowBounds,onBoundsChange:setWindowBounds,minHeight:200,minWidth:275},react.createElement(WindowLayout.$,{header:"Rollback changes",content:react.createElement(ActionsProvider.Be,{actions:treeActions},(({shortcutHandlerProps})=>react.createElement(RollbackWindow_StyledContainer,shortcutHandlerProps,react.createElement("div",{style:{display:"flex"}},react.createElement(Toolbar.M,null,react.createElement(IconButton.K0,{isDisabled:!0},react.createElement(PlatformIcon.jE,{icon:"actions/diff"})),react.createElement(IconButtonWithMenu,{renderMenu:({menuProps})=>react.createElement(Menu.W1,{...menuProps,selectedKeys:[],onAction:notImplemented},react.createElement(Section.w,{title:"Group By"},defaultChangeGroupings.map((grouping=>react.createElement(Item.q,{key:grouping.id},grouping.title)))))},react.createElement(PlatformIcon.jE,{icon:"actions/groupBy.svg"}))),react.createElement("span",{style:{flex:1}}),react.createElement(Toolbar.M,null,react.createElement(ActionButton.r,{actionId:CommonActionIds.j.EXPAND_ALL}),react.createElement(ActionButton.r,{actionId:CommonActionIds.j.COLLAPSE_ALL}))),react.createElement(StyledFrame,null,react.createElement(ContextMenuContainer.y,{renderMenu:()=>react.createElement(RollbackTreeContextMenu,null),style:{height:"100%"}},react.createElement(SpeedSearchTreeWithCheckboxes,{treeRef,items:rootNodes,selectionMode:"multiple",selectedKeys,onSelectionChange:setSelectedKeys,expandedKeys,onExpandedChange:setExpandedKeys,nestedSelection,fillAvailableSpace:!0},(node=>{const props=changesViewTreeNodeRenderer.getItemProps({node,fileCountsMap});return react.createElement(Item.q,props,0!==node.children?.length&&react.createElement(TreeNodeCheckbox,{selectionState:nestedSelection.getSelectionState(node),onToggle:()=>nestedSelection.toggle(node)}),props.children)}))))))),footer:react.createElement(react.Fragment,null,react.createElement("div",{style:{padding:".5rem 0.75rem 0",display:"flex",flexDirection:"column"}},react.createElement(RollbackWindow_StyledLine,null,react.createElement(ChangesSummary,{changes:includedChanges})),react.createElement(Checkbox.S,{isDisabled:!atLeastOneNewFileSelected,isSelected:deleteAddedFiles,onChange:setDeleteAddedFiles,mnemonic:"D"},"Delete local copies of the added files")),react.createElement(WindowLayout.$.Footer,{right:react.createElement(react.Fragment,null,react.createElement(Button.$,{onPress:close,mnemonic:"C"},"Close"),react.createElement(Button.$,{variant:"default",mnemonic:"R",isDisabled:0===includedChanges.length,onPress:()=>{rollbackChanges(includedChanges,deleteAddedFiles).catch((e=>{balloons.show({title:"Reverting changes failed",icon:"Error",body:"Could not revert selected changes. See console for more info"}),console.error("Git revert error:",e)})).finally(close)}},"Rollback"))}))}))}RollbackWindow.__docgenInfo={description:"",methods:[],displayName:"RollbackWindow"};const toolWindowsStateAtom=(0,vanilla.eU)(new ToolWindowsState.hI(Object.fromEntries(toolWindows.map((({id,initialState})=>[id,initialState]))),{removedFromSideBarIds:toolWindows.filter((({showStripeButton})=>!1===showStripeButton)).map((({id})=>id))}));var Tabs=__webpack_require__("./src/Tabs/Tabs.tsx"),FocusScope=__webpack_require__("../../node_modules/@react-aria/focus/dist/FocusScope.mjs"),shortcutToString=__webpack_require__("./src/ActionSystem/shortcutToString.ts");const tips=[{actionId:CommonActionIds.j.EXPAND_SELECTION,title:"Press $shortcut to expand selection"},{actionId:CommonActionIds.j.SHRINK_SELECTION,title:"Press $shortcut to shrink selection"}],useTips=()=>{const keymap=(0,KeymapProvider.Jz)(),renderedTips=(0,react.useMemo)((()=>tips.map((({actionId,title})=>({keyboardShortcut:keymap?.[actionId]?.find((shortcut=>"keyboard"===shortcut.type)),title}))).filter((({keyboardShortcut})=>keyboardShortcut)).map((({keyboardShortcut,title})=>title.replace("$shortcut",(0,shortcutToString.F)(keyboardShortcut))))),[keymap]),[index,setIndex]=(0,react.useState)(Math.floor(Math.random()*renderedTips.length));return{current:renderedTips[index],next:()=>{const tmpIndex=Math.floor(Math.random()*(renderedTips.length-1)),newIndex=tmpIndex<index?tmpIndex:tmpIndex+1;console.log("changing index to",newIndex,"tmpIndex",tmpIndex),setIndex(newIndex)}}};var useObjectRef=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),useFocusable=__webpack_require__("../../node_modules/@react-aria/focus/dist/useFocusable.mjs");const Input=react.forwardRef((function Input(props,forwardedRef){const ref=(0,useObjectRef.U)(forwardedRef),{focusableProps}=(0,useFocusable.W)({autoFocus:props.autoFocus},ref);return react.createElement("input",{...(0,mergeProps.v)(focusableProps,props),ref})}));Input.__docgenInfo={description:"",methods:[],displayName:"Input"};const searchEverywhereState={isOpen:(0,vanilla.eU)(!1),tab:(0,vanilla.eU)("All"),contextElement:(0,vanilla.eU)(null),initialSearchQuery:(0,utils.Iz)((tab=>(0,vanilla.eU)(""))),bounds:(0,vanilla.eU)(null)};function ContentAwarePopup({hasContent,persistedBoundsAtom,noContentHeight,minHeight,...otherProps}){const persistBounds=(0,esm_react.Xr)(persistedBoundsAtom),[bounds,setBounds]=(0,react.useState)((0,esm_react.md)(persistedBoundsAtom)??{top:150,height:Math.max(200,window.innerHeight-300)}),heightToRestoreRef=(0,react.useRef)(bounds.height);return(0,react.useEffect)((()=>{setBounds((bounds=>({...bounds,height:hasContent?heightToRestoreRef.current:noContentHeight})))}),[hasContent]),react.createElement(Popup.zD,{...otherProps,bounds,onBoundsChange:bounds=>{hasContent&&(heightToRestoreRef.current=bounds.height,persistBounds(bounds)),setBounds(bounds)},minHeight:hasContent?minHeight:noContentHeight})}ContentAwarePopup.__docgenInfo={description:"A special type of popup, where the content can be toggled on and off. Needed only for SearchEveryWhere at the moment,\nbut extracted as a component, to collocate related pieces, rather than leave them with the rest of the code in the\ncomponent.\n- Updates persisted {@param boundsState}, when the bounds are changed, only if the content is shown when the bounds\n  is changed.\n- Minimizes the popup into {@param noContentHeight}, when {@param hasContent} is `false`.\n- Restores the popup height to it's latest value, or based on content, when {@param hasContent} changes to `true`.\n- Returns the right to be applied based on the input {@param minHeight} and {@param hasContent}.",methods:[],displayName:"ContentAwarePopup",props:{hasContent:{required:!0,tsType:{name:"boolean"},description:"Whether the popup has content. If `false`, the popup is minimized to `noContentHeight`."},noContentHeight:{required:!0,tsType:{name:"number"},description:"The minimized height of the popup, when there is no content."},persistedBoundsAtom:{required:!0,tsType:{name:"WritableAtom",elements:[{name:"union",raw:"Partial<Bounds> | null",elements:[{name:"Partial",elements:[{name:"signature",type:"object",raw:"{\n  top: number;\n  left: number;\n  width: number;\n  height: number;\n}",signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}}],raw:"Partial<Bounds>"},{name:"null"}]},{name:"tuple",raw:"[Partial<Bounds> | null]",elements:[{name:"union",raw:"Partial<Bounds> | null",elements:[{name:"Partial",elements:[{name:"signature",type:"object",raw:"{\n  top: number;\n  left: number;\n  width: number;\n  height: number;\n}",signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}}],raw:"Partial<Bounds>"},{name:"null"}]}]},{name:"void"}],raw:"WritableAtom<\n  Partial<Bounds> | null,\n  [Partial<Bounds> | null],\n  void\n>"},description:"Persisted state of the popup bounds, in form of an atom."}}};var minusculeMatch=__webpack_require__("./src/minusculeMatch.ts"),TextWithHighlights=__webpack_require__("./src/TextWithHighlights/TextWithHighlights.tsx"),ActionGroup=__webpack_require__("./src/ActionSystem/ActionGroup.tsx");const StyledIconWrapper=styled.I4.span`
  width: 0.9375rem;
  margin-right: 0.25rem;
  display: inline-flex;
  justify-content: center;
`,StyledItemLayout=(0,styled.I4)(ItemLayout.E)`
  min-height: 1.375rem;
  width: 100%;
  padding: 0;
`,StyledTitleWrapper=styled.I4.span`
  color: ${({theme,isDisabled})=>isDisabled&&theme.currentForegroundAware(theme.commonColors.inactiveTextColor)};
`,ActionItem_StyledSpacer=styled.I4.div`
  flex: 1;
`;function ActionItem({action,highlights}){const{isSelected}=(0,react.useContext)(ItemStateContext.k)||{};return react.createElement(StyledItemLayout,null,react.createElement(StyledIconWrapper,null,action.icon),react.createElement(StyledTitleWrapper,{isDisabled:action.isDisabled},isSelected?react.createElement(TextWithHighlights.f,{highlights},action.title):action.title),react.createElement(ItemLayout.E.Hint,{style:{fontSize:".85em",fontWeight:"bold"}},action.shortcut),react.createElement(ActionItem_StyledSpacer,null),react.createElement(ItemLayout.E.Hint,{style:{marginRight:"-0.375rem"}},function getActionBreadcrumb(action,field){let parent=(0,ActionGroup.pz)(action)?action.parent:null;const breadcrumb=[];for(;parent;)breadcrumb.unshift(field?parent[field]:parent),parent=parent.parent;return breadcrumb}(action,"title").join(" | ")))}ActionItem.__docgenInfo={description:"UI of actions in SearchEverywhere list",methods:[],displayName:"ActionItem",props:{action:{required:!0,tsType:{name:"Readonly",elements:[{name:"MutableAction"}],raw:"Readonly<MutableAction>"},description:""},highlights:{required:!0,tsType:{name:"union",raw:"null | TextRange[]",elements:[{name:"null"},{name:"Array",elements:[{name:"signature",type:"object",raw:"{ from: number; to: number }",signature:{properties:[{key:"from",value:{name:"number",required:!0}},{key:"to",value:{name:"number",required:!0}}]}}],raw:"TextRange[]"}]},description:""}}};const actionsSearchContributor={id:"Actions",title:"Actions",actionId:CommonActionIds.j.GO_TO_ACTION,use:({everyWhereAutoSet})=>{const contextElement=(0,esm_react.md)(searchEverywhereState.contextElement),[showDisabledActions,setShowDisabledActions]=(0,react.useState)(null),allActions=(0,react.useMemo)((()=>contextElement?(0,ActionsProvider.wJ)(contextElement):[]),[contextElement]),shouldIncludeDisabledActions=showDisabledActions??everyWhereAutoSet,actions=[{id:CommonActionIds.j.SHOW_INTENTION_ACTIONS,title:"Assign a shortcut",actionPerformed:notImplemented}];return{search:query=>{const allResults=allActions.map((action=>({highlights:(0,minusculeMatch.T)(action.title,query),action}))).filter((({action,highlights})=>highlights||(0,minusculeMatch.T)(action.description||"",query)));return shouldIncludeDisabledActions?allResults:allResults.filter((({action})=>!action.isDisabled))},searchDeps:[shouldIncludeDisabledActions],isEverywhere:shouldIncludeDisabledActions,toggleEverywhere:()=>{setShowDisabledActions((currentValue=>!currentValue))},searchAdvertiser:react.createElement(ActionShortcut.Z,{actionId:CommonActionIds.j.SHOW_INTENTION_ACTIONS},(shortcut=>`Press ${shortcut} to assign a shortcut`)),headerFilters:react.createElement(Checkbox.S,{preventFocus:!0,isSelected:shouldIncludeDisabledActions,onChange:value=>{setShowDisabledActions(value)},mnemonic:"d"},"Include disabled actions"),actions,processSelectedItem({action}){action?.perform({event:null,element:contextElement})},getKey:({action})=>action.id,getItemText:({action:{title}})=>title,renderItem:({action,highlights})=>react.createElement(ActionItem,{action,highlights})}}};var splitWhen=__webpack_require__("../../node_modules/ramda/es/splitWhen.js");function FileItem({file,matches}){const{isSelected}=(0,react.useContext)(ItemStateContext.k)||{},title=file.name,dir=path_browserify_default().dirname(file.relativePath),[dirMatches,filenameMatches]=(0,splitWhen.A)((match=>match.from>=dir.length),matches||[]),titleMatches=filenameMatches.map((({from,to})=>({from:from-dir.length,to:to-dir.length})));return react.createElement(StyledItemLayout,null,react.createElement(StyledIconWrapper,null,react.createElement(PlatformIcon.jE,{icon:getIconForFile(file.path)})),react.createElement(StyledTitleWrapper,null,isSelected?react.createElement(TextWithHighlights.f,{highlights:titleMatches},title):title),react.createElement(ItemLayout.E.Hint,null,isSelected?react.createElement(TextWithHighlights.f,{highlights:dirMatches},dir):dir))}FileItem.__docgenInfo={description:"UI of paths in SearchEverywhere list.",methods:[],displayName:"FileItem",props:{file:{required:!0,tsType:{name:"ProjectFsItem"},description:""},matches:{required:!0,tsType:{name:"union",raw:"null | TextRange[]",elements:[{name:"null"},{name:"Array",elements:[{name:"signature",type:"object",raw:"{ from: number; to: number }",signature:{properties:[{key:"from",value:{name:"number",required:!0}},{key:"to",value:{name:"number",required:!0}}]}}],raw:"TextRange[]"}]},description:"matches on file.relativePath"}}};const filesSearchContributor={id:"Files",title:"Files",actionId:CommonActionIds.j.GO_TO_FILE,use:()=>{const projectFiles=(0,esm_react.md)(unwrapLatestOrNull(currentProjectFilesAtom))??[],{openPath}=useEditorStateManager(),selectPathInProjectView=useSelectPathInProjectView();return{search:query=>projectFiles.map((file=>({matches:(0,minusculeMatch.T)(file.relativePath,query),file}))).filter((({matches})=>matches?.length)),searchDeps:[],isEverywhere:!0,processSelectedItem({file}){"file"===file?.type&&openPath(file.path,!0),"dir"===file?.type&&selectPathInProjectView(file.path)},getKey:({file})=>file.path,renderItem:({file,matches})=>react.createElement(FileItem,{file,matches}),getItemText:({file:{relativePath}})=>relativePath}}},SearchEverywhereActionIds_PREVIOUS_TAB="SearchEverywhere.PrevTab",SearchEverywhereActionIds_NEXT_TAB="SearchEverywhere.NextTab",SearchEverywherePopup_StyledHeader=styled.I4.div`
  display: flex;
  width: 100%;
  background: ${({theme})=>theme.color("SearchEverywhere.Header.background")};
  border-bottom: 1px solid
    ${({theme})=>theme.color("SearchEverywhere.SearchField.borderColor")};
`,StyledTab=styled.I4.button`
  all: unset;
  background: ${({theme,selected})=>selected&&theme.color("SearchEverywhere.Tab.selectedBackground")};
  color: ${({theme})=>theme.color("SearchEverywhere.Tab.selectedForeground")};
  opacity: ${({disabled})=>disabled&&".5"};
`,StyledTabContent=styled.I4.span`
  display: flex;
  padding: 0 0.75rem;
  height: 1.8rem;
  align-items: center;
`,StyledTabs=styled.I4.div`
  line-height: normal;
  border-bottom: none;
`,StyledSearchFieldContainer=styled.I4.div`
  display: flex;
  flex-shrink: 0;
  height: 1.85rem;
  align-items: center;
  padding: 0 0.75rem 0;
  gap: 0.75rem;

  input {
    all: unset;
    flex: 1;
    line-height: 1.25;

    &::selection {
      color: ${({theme})=>theme.color("*.selectionForeground")};
      background: ${({theme})=>theme.color("*.selectionBackground")};
    }
  }
`,StyledSearchResultsContainer=styled.I4.div`
  height: 24rem;
  flex: 1;
  min-height: 0; // for it to properly fill the remaining height and not to exceed that
`,StyledDivider=styled.I4.hr`
  all: unset;
  height: 1px;
  width: 100%;
  border-bottom: 1px solid
    ${({theme})=>theme.color("SearchEverywhere.SearchField.borderColor")};
`,StyledSearchFieldHint=styled.I4.div`
  color: ${({theme})=>theme.color("SearchEverywhere.SearchField.infoForeground")};
  white-space: nowrap;
`,StyledLoadMore=styled.I4.div`
  color: ${({theme})=>theme.currentForegroundAware(theme.color("SearchEverywhere.SearchField.infoForeground"))};
  font-size: 0.7rem;
  min-height: 1.375rem;
`,StyledPlaceholder=styled.I4.div`
  color: ${({theme})=>theme.commonColors.inactiveTextColor};
  position: absolute;
  text-align: center;
  width: 100%;
  top: 50%;
`,contributors=[actionsSearchContributor,filesSearchContributor],LOAD_MORE_ITEM={};function SearchEverywherePopup(){const setOpen=(0,esm_react.Xr)(searchEverywhereState.isOpen),[tab,setTab]=(0,esm_react.fp)(searchEverywhereState.tab),[everyWhereAutoSet,setEveryWhereAutoSet]=(0,react.useState)(!1),[pattern,setPattern]=(0,react.useState)((0,esm_react.md)(searchEverywhereState.initialSearchQuery(tab))),persistInitialSearchQuery=(0,esm_react.Xr)(searchEverywhereState.initialSearchQuery(tab)),getShortcut=(0,ActionShortcut.a)(),[selectedKeys,setSelectedKeys]=(0,react.useState)(new Set),idToContributor={};contributors.forEach((contributor=>{idToContributor[contributor.id]={...contributor,...contributor.use({everyWhereAutoSet})}}));const activeContributors=contributors.filter((contributor=>""===tab||contributor.id===tab)).map((({id})=>idToContributor[id])),[searchResultLimit,setSearchResultLimit]=(0,react.useState)(30),{searchResult}=(0,react.useMemo)((()=>({searchResult:activeContributors.flatMap((contributor=>contributor.search(pattern).map((item=>({key:`${contributor.id}_${contributor.getKey(item)}`,contributor,item})))))})),[pattern,tab,...activeContributors.flatMap((({searchDeps})=>searchDeps))]),currentTabContributor=idToContributor[tab],visibleSearchResult=(0,react.useMemo)((()=>{const visibleSearchResult=searchResult.slice(0,searchResultLimit);return searchResult.length>visibleSearchResult.length&&visibleSearchResult.push({key:"LOAD_MORE_ITEM_KEY",item:LOAD_MORE_ITEM,contributor:null}),visibleSearchResult}),[searchResultLimit,searchResult]),notFoundPatternRef=(0,react.useRef)(null);(0,react.useEffect)((()=>{pattern&&persistInitialSearchQuery(pattern)}),[pattern,tab]),(0,react.useEffect)((()=>{if(searchResult[0]){const{key}=searchResult[0];setSelectedKeys(new Set([key])),selectionManagerRef.current?.setFocusedKey(key),requestAnimationFrame((()=>{selectionManagerRef.current?.setFocusedKey(key)}))}setSearchResultLimit(30)}),[searchResult]);const localActions=[{id:SearchEverywhereActionIds_PREVIOUS_TAB,title:"Prev tab",description:"Switch to previous tab in Search Everywhere dialog",actionPerformed:()=>{const currentContributorIndex=contributors.findIndex((({id})=>tab===id));setTab(""===tab?contributors.slice(-1)[0].id:contributors[currentContributorIndex-1]?.id||"")}},{id:SearchEverywhereActionIds_NEXT_TAB,title:"Next tab",description:"Switch to next tab in Search Everywhere dialog",actionPerformed:()=>{const currentContributorIndex=contributors.findIndex((({id})=>tab===id));setTab(contributors[currentContributorIndex+1]?.id||"")}}],contributorActions=contributors.flatMap((({id,actionId,title})=>actionId?[{id:actionId,title:`Find ${title}`,description:`Quickly go to ${title} by name`,actionPerformed:()=>{tab!==id?setTab(id):currentTabContributor?.toggleEverywhere?.()}}]:[])),close=()=>setOpen(!1),searchInputRef=(0,react.useRef)(null),selectionManagerRef=(0,react.useRef)(null),onAction=key=>{if("LOAD_MORE_ITEM_KEY"===key){setSearchResultLimit((limit=>limit+30));const nextItem=searchResult[visibleSearchResult.length+1];nextItem&&setTimeout((()=>{setSelectedKeys(new Set([nextItem.key])),selectionManagerRef.current?.setFocusedKey(nextItem.key)}))}else close(),setTimeout((()=>{const itemWrapper=searchResult.find((item=>item.key===key));itemWrapper?.contributor.processSelectedItem(itemWrapper.item)}),50)},tips=useTips();return react.createElement(ContentAwarePopup,{persistedBoundsAtom:searchEverywhereState.bounds,hasContent:Boolean(pattern),noContentHeight:59,minWidth:670,minHeight:160,interactions:"all",onClose:close},react.createElement(ActionsProvider.Be,{actions:[...currentTabContributor?.actions||[],...contributorActions,...localActions]},(({shortcutHandlerProps})=>react.createElement("div",{...shortcutHandlerProps,style:{height:"inherit"}},react.createElement(Popup.zD.Layout,{header:react.createElement(react.Fragment,null,react.createElement(Popup.zD.Header,{hasControls:!0},react.createElement(SearchEverywherePopup_StyledHeader,null,react.createElement("div",{style:{flex:1}},react.createElement(Tabs.t,{TabComponent:StyledTab,TabsComponent:StyledTabs,selectedKey:tab,onSelectionChange:key=>setTab(key)},react.createElement(Item.q,{key:""},react.createElement(StyledTabContent,null,"All")),contributors.map((contributor=>{const shortcut=getShortcut(contributor.actionId),title=react.createElement(StyledTabContent,null,contributor.title);return react.createElement(Item.q,{key:contributor.id},shortcut?react.createElement(TooltipTrigger.k,{tooltip:react.createElement(Tooltip.m_,null,shortcut)},react.createElement("span",null,title)):title)})))),currentTabContributor?.headerFilters,react.createElement(IconButton.K0,{style:{margin:"0 0.5rem"},isDisabled:!0},react.createElement(PlatformIcon.jE,{icon:"actions/moveToLeftBottom"})))),react.createElement(StyledSearchFieldContainer,null,react.createElement(PlatformIcon.jE,{icon:"actions/search"}),react.createElement(FocusScope.n1,{contain:!0},react.createElement(Input,{ref:searchInputRef,autoFocus:!0,onFocus:event=>{event.target.select()},value:pattern,onChange:e=>(newPattern=>{const newPatternContainsPrevious=notFoundPatternRef.current&&newPattern.includes(notFoundPatternRef.current);currentTabContributor?.isEverywhere&&!newPatternContainsPrevious&&setEveryWhereAutoSet(!1),setPattern(newPattern)})(e.currentTarget.value)})),react.createElement(StyledSearchFieldHint,null,currentTabContributor?.searchAdvertiser))),content:react.createElement(react.Fragment,null,react.createElement(StyledDivider,null),pattern&&react.createElement(StyledSearchResultsContainer,null,react.createElement(List.B,{focusProxyRef:searchInputRef,selectionManagerRef,items:visibleSearchResult,selectionMode:"single",showAsFocused:!0,shouldFocusWrap:!0,fillAvailableSpace:!0,selectedKeys,onSelectionChange:setSelectedKeys,onAction},(({key,item,contributor})=>{if("LOAD_MORE_ITEM_KEY"===key)return react.createElement(Item.q,{key:"LOAD_MORE_ITEM_KEY"},react.createElement(StyledLoadMore,null,"...more"));const itemText=contributor.getItemText(item);return react.createElement(Item.q,{key,textValue:itemText,"aria-label":itemText},contributor.renderItem(item))})),0===searchResult.length&&react.createElement(StyledPlaceholder,null,"No actions with such name found"))),footer:react.createElement(Popup.zD.Hint,null,tips.current," ",react.createElement(Link.N,{onPress:tips.next},"Next Tip"))})))))}SearchEverywherePopup.__docgenInfo={description:"TODO: implement history navigation",methods:[],displayName:"SearchEverywherePopup"};const gitAddCallback=async(get,set,filepath)=>{const dir=await isomorphic_git.Ay.findRoot({fs,filepath});await isomorphic_git.Ay.add({fs,dir,filepath:path_browserify_default().relative(dir,filepath)}),await refreshFileStatusCallback(get,set,filepath)};var InputField_Input=__webpack_require__("./src/InputField/Input.tsx"),ValidationTooltip=__webpack_require__("./src/Tooltip/ValidationTooltip.tsx");const StyledInput=(0,styled.I4)(InputField_Input.p)`
  width: 20.5rem;
  /**
     * To have the validation box shadow not clipped by the popup.
     * Maybe it should be an option on input to make sure margin is always in sync with the box-shadow thickness
     */
  margin: 3px;

  input {
    padding-top: 1px;
    padding-bottom: 1px;
  }
`,NewItemPopup_StyledHeader=(0,styled.I4)(Popup.zD.Header)`
  border-bottom: 1px solid ${({theme})=>theme.commonColors.border()};
`;function NewItemPopup({title,inputName="Name",onSubmit,validationMessage,validationType="error",value,onChange}){const[hideMessage,setHideMessage]=(0,react.useState)(!1);return react.createElement(Popup.zD,null,react.createElement(PopupLayout.j,{header:react.createElement(NewItemPopup_StyledHeader,null,title),content:react.createElement("form",{onSubmit:e=>{e.preventDefault(),onSubmit()},onMouseDown:()=>{setHideMessage(!0)}},react.createElement(PositionedTooltipTrigger.O,{isOpen:Boolean(validationMessage)&&!hideMessage,placement:"top start",offset:6,crossOffset:-6,tooltip:react.createElement(ValidationTooltip.B,{type:validationType},validationMessage)},react.createElement(StyledInput,{appearance:"embedded",validationState:validationMessage?validationType:void 0,placeholder:inputName,value,onChange:e=>{setHideMessage(!1),onChange(e.target.value)}})))}))}NewItemPopup.__docgenInfo={description:"A simple Popup with an input, used in actions such as create file, or create directory",methods:[],displayName:"NewItemPopup",props:{inputName:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Name"',computed:!1}},title:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(newValue: string) => void",signature:{arguments:[{type:{name:"string"},name:"newValue"}],return:{name:"void"}}},description:""},validationMessage:{required:!1,tsType:{name:"string"},description:""},validationType:{required:!1,tsType:{name:"union",raw:'"error" | "warning"',elements:[{name:"literal",value:'"error"'},{name:"literal",value:'"warning"'}]},description:"",defaultValue:{value:'"error"',computed:!1}}}};const createFileActionAtom=actionAtom({id:projectActionIds.NewFile,icon:react.createElement(PlatformIcon.jE,{icon:"fileTypes/text"}),title:"File",description:"Create new file",isDisabled:(0,vanilla.eU)((get=>!get(activePathExistsAtom))),actionPerformed:async({get})=>{const activePaths=get(activePathsAtom);if(0===activePaths.length)return;const popupManager=get(projectPopupManagerRefAtom).current,destinationDir=(await fs.promises.stat(activePaths[0])).isDirectory()?activePaths[0]:path_browserify_default().dirname(activePaths[0]);if(!popupManager)throw new Error("Could not find popup manager");popupManager.show((({close})=>react.createElement(NewFilePopup,{close,destinationDir})))}});function NewFilePopup({destinationDir,close}){const createFile=(0,react_utils.yF)((0,react.useCallback)((async(get,set,destination,filename)=>{const fullpath=path_browserify_default().join(destination,filename),editorManager=get(editorManagerAtom),windowManager=get(windowManagerRefAtom).current,repoDir=await get(vcsFootForFileAtom(fullpath));await(async(get,set,destinationDir,filename)=>{const filePath=path_browserify_default().join(destinationDir,filename);if(await ensureDir(fs.promises,path_browserify_default().dirname(filePath)),await fs.promises.exists(filePath))throw new Error(`File ${filePath} already exists`);await fs.promises.writeFile(filePath,"","utf-8"),set(fileContentAtom(filePath)),get(editorManagerAtom).openPath(filePath),await refreshFileStatusCallback(get,set,filePath),set(dirContentAtom(destinationDir))})(get,set,destination,filename),close(),editorManager.focus(),await waitUntil((()=>document.activeElement instanceof HTMLTextAreaElement)),repoDir&&windowManager?.open((({close})=>react.createElement(AddFileToGitWindow,{filepath:fullpath,close})))}),[close])),[filename,setFilename]=(0,react.useState)(""),[validationMessage,setValidationMessage]=(0,react.useState)("");return react.createElement(NewItemPopup,{title:"New File",onSubmit:()=>{filename&&(async()=>{const fullPath=path_browserify_default().join(destinationDir,filename),stats=await stat(fullPath);stats?.isFile()?setValidationMessage(`A file with the name '${path_browserify_default().basename(filename)}' already exists`):stats?.isDirectory()?setValidationMessage(`A directory with the name '${path_browserify_default().basename(filename)}' already exists`):await createFile(destinationDir,filename)})()},value:filename,onChange:newValue=>{setValidationMessage(""),setFilename(newValue)},validationMessage})}function AddFileToGitWindow({close,filepath}){const addToGit=(0,react_utils.yF)(gitAddCallback);return react.createElement(ModalWindow.QI,{minWidth:"content",minHeight:"content"},react.createElement(WindowLayout.$,{header:"Add File to Git",content:react.createElement(react.Fragment,null,react.createElement("div",{style:{display:"flex",gap:"1rem",padding:"0.75rem 0.75rem 0rem"}},react.createElement(PlatformIcon.jE,{icon:"general/questionDialog.svg",size:32}),react.createElement("div",null,"Do you want to add the following file to Git?",react.createElement("br",null),filepath,react.createElement("br",null),react.createElement("br",null),"If you choose Cancel, you can still add it later manually."))),footer:react.createElement(WindowLayout.$.Footer,{left:react.createElement(Checkbox.S,{isDisabled:!0},"Don't ask again"),right:react.createElement(react.Fragment,null,react.createElement(Button.$,{onPress:close},"Cancel"),react.createElement(Button.$,{autoFocus:!0,variant:"default",onPress:()=>{addToGit(filepath).then(close)}},"Add"))})}))}async function waitUntil(criteria,timeoutInMs=2e3){criteria()||timeoutInMs<0||(await new Promise((resolve=>setTimeout(resolve,50))),await waitUntil(criteria,timeoutInMs-50))}const useCancelableAsyncCallback=asyncCallback=>{const cancelToken=(0,react.useRef)(null),callbackRef=(0,react.useRef)(asyncCallback);return callbackRef.current=asyncCallback,(...args)=>{cancelToken.current?.abort(),cancelToken.current=new esm.Ni.cancelToken,(0,esm.Ni)((function(signal,...args){return callbackRef.current(...args)}))(cancelToken.current,...args)}},createDirectoryActionAtom=actionAtom({id:projectActionIds.NewDir,icon:react.createElement(PlatformIcon.jE,{icon:DIR_ICON}),title:"Directory",description:"Create new directory",isDisabled:(0,vanilla.eU)((get=>!get(activePathExistsAtom))),actionPerformed:async({get})=>{const activePaths=get(activePathsAtom);if(0===activePaths.length)return;const popupManager=get(projectPopupManagerRefAtom).current,destinationDir=(await fs.promises.stat(activePaths[0])).isDirectory()?activePaths[0]:path_browserify_default().dirname(activePaths[0]);if(!popupManager)throw new Error("Could not find popup manager");popupManager.show((({close})=>react.createElement(NewDirectoryPopup,{close,destinationDir})))}});function NewDirectoryPopup({destinationDir,close}){const createDirectory=(0,react_utils.yF)(createDirectoryCallback),[dirName,setDirName]=(0,react.useState)(""),[validationResult,setValidationResult]=(0,react.useState)(null),updateValidation=useCancelableAsyncCallback((function*(destinationDir,dirName){setValidationResult(yield validate(destinationDir,dirName))}));(0,react.useEffect)((()=>{updateValidation(destinationDir,dirName)}),[destinationDir,dirName]);return react.createElement(NewItemPopup,{title:"New Directory",onSubmit:()=>{dirName&&(async()=>{null==await validate(destinationDir,dirName)&&(await createDirectory(destinationDir,dirName),close())})()},value:dirName,onChange:setDirName,validationMessage:validationResult?.message,validationType:validationResult?.type})}const validate=async function(destinationDir,dirName){const fullPath=path_browserify_default().join(destinationDir,dirName);if(!dirName)return null;if(dirName.includes("."))return{type:"warning",message:'Note: "." in the name is treated as a regular character. Use "/" instead if you mean to create nested directories'};let stats=await stat(fullPath);return stats?.isFile()?{type:"error",message:`A file with the name '${dirName}' already exists`}:stats?.isDirectory()?{type:"error",message:`A directory with the name '${dirName}' already exists`}:null},copyFilenameActionAtom=actionAtom({id:projectActionIds.CopyFileName,title:"File Name",isDisabled:(0,vanilla.eU)((get=>!get(activePathExistsAtom))),actionPerformed:async({get})=>{notImplemented();get(activePathsAtom).length}}),copyAbsolutePathActionAtom=actionAtom({id:projectActionIds.CopyAbsolutePath,title:"Absolute Path",isDisabled:(0,vanilla.eU)((get=>!get(activePathExistsAtom))),useShortcutsOf:"CopyPaths",actionPerformed:async({get})=>{notImplemented();get(activePathsAtom).length}}),copyPathFromRepositoryRootActionAtom=actionAtom({id:VcsActionIds.CopyPathFromRepositoryRootProvider,title:"Path From Repository Root",isDisabled:(0,vanilla.eU)((get=>!get(activePathExistsAtom))),actionPerformed:async({get})=>{notImplemented();get(activePathsAtom).length}});var prop=__webpack_require__("../../node_modules/ramda/es/prop.js");const versionsAtom=(0,vanilla.eU)((async()=>{const response=await fetch("https://api.github.com/repos/alirezamirian/jui/tags");if(!response.ok)throw response;const tags=await response.json();return(0,sortWith.A)([(0,descend.A)((0,prop.A)("date"))],await Promise.all(tags.map((async tag=>{const commitResponse=await fetch(`https://api.github.com/repos/alirezamirian/jui/commits/${tag.commit.sha}`);if(!commitResponse.ok)throw commitResponse;const commit=await commitResponse.json(),normalizedTagName=tag.name.replace(/^docs\//,"");return{name:normalizedTagName,url:`https://alirezamirian.github.io/jui/-/${normalizedTagName}/example-app`,date:new Date(commit.commit.author.date)}}))))})),switchAppVersionAtom=actionAtom({id:"example-app.switchVersion",icon:react.createElement(PlatformIcon.jE,{icon:"fileTypes/text"}),title:"Switch version",description:"Change to other versions of this demo app",actionPerformed:async({get})=>{const popupManager=get(projectPopupManagerRefAtom).current;if(!popupManager)throw new Error("Could not find popup manager");try{const tags=await get(versionsAtom);popupManager.show((({close})=>react.createElement(SwitchVersionPopup,{close,tags})))}catch(error){const getMessage=error=>{if(error instanceof Response){const rateLimitResetHeader=error.headers.get("x-ratelimit-reset");return`Github API rate limit is reached. Try again ${rateLimitResetHeader?`after ${new Date(1e3*parseInt(rateLimitResetHeader)).toLocaleTimeString()}`:"later"}.`}return"Unexpected error happened while fetching versions data."};_balloonManagerRef.value?.show({icon:"Error",title:"Could not fetch versions",body:getMessage(error)})}}});function SwitchVersionPopup({tags,close}){return react.createElement(Popup.zD,null,react.createElement(PopupLayout.j,{header:react.createElement(Popup.zD.Header,null,react.createElement("div",{style:{padding:"0 .5rem"}},"Switch demo app version")),content:react.createElement(SpeedSearchMenu.V,{items:tags,fillAvailableSpace:!0,onAction:url=>{window.location.href=`${url}`,close()}},(version=>react.createElement(Item.q,{key:version.url},react.createElement(MenuItemLayout.T,{content:version.name,shortcut:react.createElement(ItemLayout.E.Hint,null,version.date.toLocaleDateString())}))))}))}const openSearchEverywhereCallback=(_get,set,{element},tab)=>{element&&(set(searchEverywhereState.isOpen,!0),set(searchEverywhereState.tab,tab),set(searchEverywhereState.contextElement,element))};function useProjectActions(){const openSearchEverywhere=(0,react_utils.yF)(openSearchEverywhereCallback),createDefaultActionGroup=(0,useCreateDefaultActionGroup.Q)(),newFileAction=(0,esm_react.md)(createFileActionAtom),newDirectoryAction=(0,esm_react.md)(createDirectoryActionAtom),newElementActionGroup=createDefaultActionGroup({id:projectActionIds.NewElement,title:"New...",description:"Create new class, interface, file or directory",isSearchable:!0,children:[newFileAction,newDirectoryAction]}),copyReferencePopupGroup=createDefaultActionGroup({id:projectActionIds.CopyReferencePopupGroup,title:"Copy Path/Reference...",menuPresentation:"none",children:[createDefaultActionGroup({id:projectActionIds.CopyFileReference,title:"Copy File Reference",isSearchable:!1,menuPresentation:"section",children:[(0,esm_react.md)(copyAbsolutePathActionAtom),(0,esm_react.md)(copyFilenameActionAtom),(0,esm_react.md)(copyPathFromRepositoryRootActionAtom)]})]});return[{id:CommonActionIds.j.GO_TO_ACTION,title:"Find Action",description:"Quickly navigate to action by name",actionPerformed:event=>{openSearchEverywhere(event,"Actions")}},{id:CommonActionIds.j.GO_TO_FILE,title:"Go to file",description:"Quickly navigate to file by name",actionPerformed:event=>{openSearchEverywhere(event,"Files")}},newElementActionGroup,copyReferencePopupGroup,(0,esm_react.md)(switchAppVersionAtom)]}const ToolWindowsRefContext=react.createContext(null),useToolWindowManager=()=>{const toolWindowRef=(0,react.useContext)(ToolWindowsRefContext);return{open:key=>{toolWindowRef?.current?.changeState((state=>state.show(key))),toolWindowRef?.current?.focus(key)}}},useChangesViewActionDefinitions=()=>{const openRollbackWindow=(0,react_utils.yF)(openRollbackWindowForSelectionCallback),refresh=useRefreshRepoStatuses();return[useCheckInActionDefinition(),useCheckInProjectAction(),useJumpToSourceAction(),{id:VcsActionIds.ROLLBACK,title:"Rollback...",icon:react.createElement(PlatformIcon.jE,{icon:"actions/rollback.svg"}),actionPerformed:event=>{openRollbackWindow(Boolean(event))}},{id:VcsActionIds.REFRESH,title:"Refresh VCS Changes",description:"Refresh VCS Changes",icon:react.createElement(PlatformIcon.jE,{icon:"actions/refresh.svg"}),actionPerformed:refresh},{id:VcsActionIds.SHOW_DIFF,title:"Show Diff",description:"Compare files or revisions.",icon:react.createElement(PlatformIcon.jE,{icon:"actions/diff.svg"}),actionPerformed:notImplemented},{id:VcsActionIds.SHELVE,title:"Shelve Changes...",description:"Save changes to an external patch file and remove them from the code",icon:react.createElement(PlatformIcon.jE,{icon:"vcs/shelve.svg"}),actionPerformed:notImplemented},...useChangeListActionDefinitions()]},commitFileMsg=new core.S("{count, plural,\n    =1 {Commit File...}\n    other {Commit Files...}\n  }","en-US"),commitDirMsg=new core.S("{count, plural,\n    =1 {Commit Directory...}\n    other {Commit Directories...}\n  }","en-US");function useCheckInActionDefinition(){const queueCheckIn=(0,react_utils.yF)(queueCheckInCallback),toolWindowManager=useToolWindowManager(),focusCommitMessage=(0,esm_react.Xr)(focusCommitMessageAtom),activePaths=(0,esm_react.md)(activePathsAtom),projectFiles=(0,esm_react.md)(unwrapLatestOrNull(currentProjectFilesAtom)),roots=findRootPaths(activePaths),allChanges=(0,esm_react.md)(allChangesAtom),containsChange=roots.some((root=>allChanges.find((change=>function isPathInside(parent,dir){const relative=path_browserify_default().relative(parent,dir);return!relative||!relative.startsWith("..")&&!path_browserify_default().isAbsolute(relative)}(root,Change.path(change)))))),selectedPathsAreDirectories=roots.every((path=>projectFiles?.some((item=>"dir"===item.type&&item.path===path))));return{id:VcsActionIds.CHECKIN_FILES,title:selectedPathsAreDirectories?commitDirMsg.format({count:roots.length}):commitFileMsg.format({count:roots.length}),isDisabled:!containsChange,actionPerformed:()=>{queueCheckIn(),toolWindowManager.open("Commit"),focusCommitMessage()}}}function useCheckInProjectAction(){const toolWindowManager=useToolWindowManager(),focusCommitMessage=(0,esm_react.Xr)(focusCommitMessageAtom),queueChanges=(0,react_utils.yF)((0,react.useCallback)(((get,set)=>{const includedChangesKeys=get(includedChangeKeysAtom);let keyToSelect=includedChangesKeys.values().next().value;if(0===includedChangesKeys.size){const allKeys=get(activeChangeListState)?.changes.map(getNodeKeyForChange);set(includedChangeKeysAtom,new Set(allKeys)),keyToSelect=allKeys?.[0]}if(keyToSelect){const{rootNodes}=get(changesTreeNodesAtom);set(ChangesView_state_expandedKeysAtom,new Set([...get(ChangesView_state_expandedKeysAtom),...(0,tree_utils.Gw)((node=>isGroupNode(node)?node.children:null),(node=>node.key),rootNodes,[keyToSelect])])),set(selectedKeysAtom,new Set([keyToSelect]))}}),[]));return{id:VcsActionIds.CHECKIN_PROJECT,title:"Commit",actionPerformed:()=>{queueChanges(),toolWindowManager.open("Commit"),focusCommitMessage()}}}function useJumpToSourceAction(){const editorStateManager=useEditorStateManager(),selectedChanges=(0,esm_react.md)(changesUnderSelectedKeysAtom);return{id:VcsActionIds.JUMP_TO_SOURCE,title:"Jump to source",icon:react.createElement(PlatformIcon.jE,{icon:"actions/editSource.svg"}),actionPerformed:()=>{[...selectedChanges].forEach(((change,index,arr)=>{const changePath=Change.path(change);changePath||editorStateManager.openPath(changePath,index===arr.length-1)}))}}}function useChangeListActionDefinitions(){const selectedChanges=(0,esm_react.md)(changesUnderSelectedKeysAtom),actions=[{id:VcsActionIds.NEW_CHANGELIST,title:"New Changelist...",description:"Create new changelist",icon:react.createElement(PlatformIcon.jE,{icon:"general/add.svg"}),actionPerformed:notImplemented}];return selectedChanges.size>0&&actions.push({title:"Move to Another Changelist...",description:"Move selected changes to another changelist",id:VcsActionIds.MOVE_TO_ANOTHER_CHANGELIST,actionPerformed:notImplemented}),actions}const pathsToAddAtom=(0,vanilla.eU)((async get=>asyncFilter((async activePath=>{const repoDir=await get(vcsFootForFileAtom(activePath));if(repoDir){const isIgnored=await isomorphic_git.Ay.isIgnored({fs,dir:repoDir,filepath:path_browserify_default().relative(repoDir,activePath)}),isFile=await fs.promises.stat(activePath).then((stat=>stat.isFile())).catch((()=>!1)),isUnchangedFile=isFile&&"NOT_CHANGED"===await get(fileStatusAtoms(activePath));return!isIgnored&&!isUnchangedFile}return!1}),get(activePathsAtom)))),gitAddDisabledAtom=(0,vanilla.eU)((async get=>0===(await get(pathsToAddAtom)).length)),gitAddActionAtom=actionAtom({id:VcsActionIds.GIT_ADD,title:"Add",icon:react.createElement(PlatformIcon.jE,{icon:"general/add.svg"}),useShortcutsOf:VcsActionIds.ADD_UNVERSIONED,isDisabled:gitAddDisabledAtom,actionPerformed:async({get,set})=>{const pathsToAdd=await get(pathsToAddAtom);await Promise.all(pathsToAdd.map((aPath=>gitAddCallback(get,set,aPath))))}}),gitInitActionAtom=actionAtom({id:VcsActionIds.GIT_INIT,title:"Create Git Repository...",actionPerformed:async({get,set})=>{const project=get(currentProjectAtom),activePath=get(activePathsAtom)[0],stats=await stat(activePath),dir=stats?.isDirectory()?activePath:project.path;await isomorphic_git.Ay.init({fs,dir}),set(vcsRootsAtom,(roots=>roots.filter((root=>root.dir!==dir)).concat({vcs:"Git",dir}))),await refreshRepoStatusesCallback(get,set)}});var Label=__webpack_require__("./src/Field/Label.tsx"),ComboBox=__webpack_require__("./src/Dropdown/ComboBox.tsx");const visitedUrlsSchema=lib.z.object({"@name":lib.z.enum(["visitedUrls"]),list:list(lib.z.object({option:maybeArray(lib.z.union([lib.z.object({"@name":lib.z.enum(["url"]),"@value":lib.z.string()}),lib.z.object({"@name":lib.z.enum(["userName"]),"@value":lib.z.string()})]))}),"UrlAndUserName")}),cloneParentDirSchema=lib.z.object({"@name":lib.z.enum(["cloneParentDir"]),"@value":lib.z.string()}),gitRememberedInputsAtom=atomWithPersistence({visitedUrls:[],cloneParentDir:""},{storageFile:"vcs.xml",componentName:"GitRememberedInputs",schema:lib.z.object({option:maybeArray(lib.z.union([visitedUrlsSchema,cloneParentDirSchema]))}),read:({option:options}={option:[]})=>({visitedUrls:options?.find((option=>"visitedUrls"===option["@name"]))?.list.UrlAndUserName.map((({option})=>({url:option.find((option=>"url"===option["@name"]))?.["@value"],username:option.find((option=>"userName"===option["@name"]))?.["@value"]}))).filter((i=>i.url))??[],cloneParentDir:options?.find((option=>"cloneParentDir"===option["@name"]))?.["@value"]??""}),write:(value,state)=>({...state,option:state.option?.map((option=>"cloneParentDir"===option["@name"]&&value.cloneParentDir?{"@name":"cloneParentDir","@value":value.cloneParentDir}:"visitedUrls"===option["@name"]&&value.visitedUrls?{"@name":"visitedUrls",list:{UrlAndUserName:value.visitedUrls.map((({url,username})=>({option:[{"@name":"url","@value":url},{"@name":"userName","@value":username??""}]})))}}:option))??[]})}),gitVisitedUrlsAtom=(0,focusAtom.I)(gitRememberedInputsAtom,(optic=>optic.path("visitedUrls"))),cloneParentDirAtom=(0,focusAtom.I)(gitRememberedInputsAtom,(optic=>optic.path("cloneParentDir")));function atomCallback(fnOrCallbacks,maybeFn){const fn="function"==typeof fnOrCallbacks?fnOrCallbacks:maybeFn,callbacks="object"==typeof fnOrCallbacks?fnOrCallbacks:null;return(get,set,...args)=>{const resolvedCallbacks=Object.fromEntries(Object.entries(callbacks??{}).map((([key,fn])=>[key.replace(/(.*?)(Callback)?$/,"$1"),(...args)=>fn(get,set,...args)])));return fn({get,set,...resolvedCallbacks},...args)}}var ButtonGroup=__webpack_require__("./src/ButtonGroup/ButtonGroup.tsx");const createGitTaskCallback_StyledContainer=styled.I4.div`
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
`,gitAuthenticateCallback=atomCallback((({get},url,auth)=>new Promise(((resolve,reject)=>{get(windowManagerRefAtom).current?.open((({close})=>{const Component=gitAuthHandlers.find((handler=>handler.canHandle(url)))?.component??GenericGitCredentialsHandlerWindow;return react.createElement(Component,{callback:close,url})})).then((credentials=>{credentials?resolve(credentials):reject()}))})))),GITHUB_SCOPES=["repo","gist","read:org","workflow","read:user","user:email"],githubTokenSearchParams=new URLSearchParams;githubTokenSearchParams.set("description","JUI GitHub Integration"),githubTokenSearchParams.set("scopes","repo,gist,read:org,workflow,read:user,user:email");const gitAuthHandlers=[{component:function GithubCredentialsHandlerWindow({callback,url:urlString}){const url=URL.parse(urlString),host=url?.host;console.log("url",url,"urlString",urlString);const username=url?.pathname?.split("/").find(Boolean)??"",[token,setToken]=(0,react.useState)("");return react.createElement(ModalWindow.QI,{defaultBounds:{width:634},minHeight:"content",minWidth:500},react.createElement(WindowLayout.$,{header:"Login to Github",content:react.createElement("div",{style:{padding:"1rem"}},react.createElement(Label.O,null,react.createElement("form",{id:"credentials",onSubmit:e=>{e.preventDefault(),callback({username,password:token})}},react.createElement(createGitTaskCallback_StyledContainer,null,react.createElement(InputField.F,{label:"Server:",inputProps:{readOnly:!0},labelPlacement:"before",value:host}),react.createElement("div",{style:{display:"flex",gap:"1rem"}},react.createElement(InputField.F,{label:"Token:",labelPlacement:"before",inputProps:{type:"password"},contextHelp:`The following scopes must be granted to the token: [${GITHUB_SCOPES.join(", ")}]`,value:token,onChange:setToken}),react.createElement(Button.$,{href:`https://github.com/settings/tokens/new?${githubTokenSearchParams.toString()}`,target:"_blank"},"Generate...")))))),footer:react.createElement(WindowLayout.$.Footer,{right:react.createElement(ButtonGroup.e,null,react.createElement(Button.$,{variant:"default",type:"submit",form:"credentials"},"Log In"),react.createElement(Button.$,{onPress:()=>callback()},"Cancel"))})}))},canHandle:url=>url.startsWith("https://github")}];function GenericGitCredentialsHandlerWindow({url:urlStr,callback}){const url=URL.parse(urlStr),[username,setUsername]=(0,react.useState)(url?.username??""),[password,setPassword]=(0,react.useState)("");return react.createElement(ModalWindow.QI,null,react.createElement(WindowLayout.$,{header:`Login to ${url?.hostname??urlStr}`,content:react.createElement("div",{style:{padding:"1rem"}},react.createElement(Label.O,null,react.createElement("form",{id:"credentials",onSubmit:e=>{e.preventDefault(),callback({username,password})}},react.createElement(createGitTaskCallback_StyledContainer,null,react.createElement(InputField.F,{label:"Username:",labelPlacement:"before",value:username,onChange:setUsername}),react.createElement(InputField.F,{label:"Password:",labelPlacement:"before",inputProps:{type:"password"},value:password,onChange:setPassword}),react.createElement(Checkbox.S,{mnemonic:"R"},"Remember"))))),footer:react.createElement(WindowLayout.$.Footer,{right:react.createElement(ButtonGroup.e,null,react.createElement(Button.$,{variant:"default",type:"submit",form:"credentials"},"Log In"),react.createElement(Button.$,{onPress:()=>callback()},"Cancel"))})}))}const createGitTaskCallback=atomCallback({createTaskCallback,gitAuthenticateCallback},(({createTask,gitAuthenticate},{title,run,...otherArgs})=>createTask({title},{...otherArgs,run:({setIndeterminate,setFraction,setSecondaryText})=>{function onProgress(progress,part=1,totalParts=1){const total=progress.total*part/totalParts;if(total){const fraction=progress.loaded/total;setFraction(fraction),setSecondaryText(`${progress.phase}: ${Math.round(100*fraction)}% ${progress.loaded}/${total}`)}else setSecondaryText(progress.phase),setIndeterminate(!0)}return onProgress.part=(index,of)=>progress=>onProgress(progress,index,of),run({onProgress,onAuth:(url,auth)=>gitAuthenticate(url,auth),onAuthFailure:(...args)=>{},onMessage:message=>{console.log("git message:",message)}})}}))),corsProxy="https://cors.isomorphic-git.org";async function cloneRepo(params){await(0,isomorphic_git.o8)({singleBranch:!0,fs,http:web.A,corsProxy,...params})}const cloneCallback=atomCallback({createGitTaskCallback},(({set,createGitTask},{url,dir,onSuccess})=>{createGitTask({title:`Cloning source repository ${url}`,onFinished:onSuccess,run:async gitArgs=>{await cloneRepo({dir,url,singleBranch:!1,...gitArgs}).then((()=>{set(vcsRootsAtom,(roots=>roots.find((root=>root.dir===dir))?roots:roots.concat({vcs:"Git",dir}))),set(dirContentAtom(path_browserify_default().resolve(dir,"..")))}),(e=>{console.log("e",e),_balloonManagerRef.value?.show({icon:"Error",title:"Clone failed",body:`Failed to clone git repo "${url} into ${dir}: ${e}"`})}))}})}));var mergeRefs=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeRefs.mjs"),style_constants=__webpack_require__("./src/style-constants.ts"),useListState=__webpack_require__("../../node_modules/@react-stately/list/dist/useListState.mjs"),StatelessListBox=__webpack_require__("./src/Dropdown/StatelessListBox.tsx");const ListBox=react.forwardRef((function ListBox({minWidth,...props},forwardedRef){const state=(0,useListState.p)({selectionBehavior:"toggle",selectionMode:"single",...props});return react.createElement(StatelessListBox.O,{state,ref:forwardedRef,...props})}));ListBox.__docgenInfo={description:"",methods:[],displayName:"ListBox",props:{focusProxyRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"HTMLElement"}],raw:"RefObject<HTMLElement>"},description:"ref to an element (typically HTMLInputElement) that should act as a focus\nproxy that handles ArrowUp, ArrowDown, and Enter keys to allow for\nnavigating the collection and selecting items.\nUseful for implementing\nautocompletion or search input connected to a collection element."},minWidth:{required:!1,tsType:{name:"number"},description:""}},composes:["AriaListBoxProps","Pick"]};var StyledMenu=__webpack_require__("./src/Menu/StyledMenu.tsx"),usePrevious=__webpack_require__("./src/utils/usePrevious.ts");function getInputCursorOffset(input){const caretIndex=input.selectionStart??input.value.length,inputStyle=window.getComputedStyle(input),hiddenSpan=document.createElement("span");hiddenSpan.style.position="absolute",hiddenSpan.style.visibility="hidden",hiddenSpan.style.whiteSpace="pre-wrap",hiddenSpan.style.font=inputStyle.font,hiddenSpan.style.fontSize=inputStyle.fontSize,hiddenSpan.style.fontWeight=inputStyle.fontWeight,hiddenSpan.style.fontFamily=inputStyle.fontFamily,hiddenSpan.style.letterSpacing=inputStyle.letterSpacing,hiddenSpan.style.border=inputStyle.border,hiddenSpan.style.paddingLeft=inputStyle.paddingLeft,hiddenSpan.textContent=input.value.substring(0,caretIndex),document.body.appendChild(hiddenSpan);const caretOffset=hiddenSpan.offsetWidth;return document.body.removeChild(hiddenSpan),caretOffset}const StyledPopover=styled.I4.div`
  box-sizing: border-box;
  // not checked if there should be a better substitute for * in the following colors. Maybe "Component"?
  background-color: ${({theme})=>theme.color("*.background")};
  color: ${({theme})=>theme.color("*.foreground")};
  outline: none; // Focus will be reflected in header. No need for outline or any other focus style on the container
  ${style_constants.E}; // FIXME: OS-dependant style?
`,ListBoxStyledAsMenu=(0,styled.I4)(ListBox)`
  min-width: 120px;
  margin: ${StyledMenu.TQ}px 0;
`;function PathInputField({value:valueProp,onChange:onChangeProp,defaultValue:defaultValueProp,...props}){const[value,setValue]=(0,useControlledState.P)(valueProp,defaultValueProp??"",onChangeProp),[isAutocompleteVisible,setAutocompleteVisible]=(0,react.useState)(!1),inputRef=(0,react.useRef)(null),collectionRef=(0,react.useRef)(null),[pathSearchQuery,setPathSearchQuery]=(0,react.useState)(""),[pathSuggestions,setPathSuggestions]=(0,react.useState)([]),updatePathAutocompletion=()=>{setMenuOrigin({clientX:(inputClientRect?.x??0)+getInputCursorOffset(inputRef.current),clientY:(inputClientRect?.y??0)+(inputClientRect?.height??0)+2}),setPathSearchQuery(value.slice(0,inputRef.current?.selectionStart??void 0))};(0,react.useEffect)((()=>{isAutocompleteVisible&&updatePathAutocompletion()}),[isAutocompleteVisible,value]);const wasAutocompleteVisible=(0,usePrevious.Z)(isAutocompleteVisible);(0,react.useEffect)((()=>{const pathParts=pathSearchQuery.split(path_browserify_default().sep),searchDirectory=pathParts.slice(0,-1).join(path_browserify_default().sep)||"/",query=pathParts.length>1?pathParts.slice(-1)[0]:"";let canceled=!1;return async function getChildDirectories(searchDirectory){return fs.promises.readdir(searchDirectory).then((async fileNames=>(await Promise.all(fileNames.map((async fileName=>{const fullPath=path_browserify_default().join(searchDirectory,fileName);return{fullPath,stat:await fs.promises.stat(fullPath)}})))).filter((({stat})=>stat.isDirectory())).map((({fullPath})=>fullPath))))}(searchDirectory).then((suggestions=>{if(canceled)return;const matchedSuggestions=suggestions.map((fullPath=>({fullPath,textValue:path_browserify_default().basename(fullPath)}))).filter((({textValue})=>!query||textValue.toLowerCase().includes(query.toLowerCase())));setPathSuggestions(matchedSuggestions),matchedSuggestions.length>0&&!wasAutocompleteVisible&&0===inputRef.current?.value.indexOf(pathSearchQuery)&&inputRef.current.setSelectionRange(pathSearchQuery.length,inputRef.current.value.length,"backward")})),()=>{canceled=!0}}),[pathSearchQuery]);const[menuOrigin,setMenuOrigin]=(0,react.useState)({clientX:0,clientY:0}),inputClientRect=inputRef.current?.getBoundingClientRect();return react.createElement(react.Fragment,null,react.createElement(ActionsProvider.Be,{actions:[{id:CommonActionIds.j.CODE_COMPLETION,title:"Autocomplete path",actionPerformed:()=>{updatePathAutocompletion(),setAutocompleteVisible(!0)}}]},(({shortcutHandlerProps})=>react.createElement(InputField.F,{...props,value,onChange:setValue,inputRef:(0,mergeRefs.P)(inputRef,props.inputRef),inputProps:(0,mergeProps.v)(props.inputProps??{},shortcutHandlerProps,{onKeyDown:e=>{"Escape"===e.key&&setAutocompleteVisible(!1)},onBlur:()=>{setAutocompleteVisible(!1)}}),addonAfter:react.createElement(react.Fragment,null,props.addonAfter,react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Browse... (⇧⏎)"})},(props=>react.createElement(AutoHoverPlatformIcon.i,{...props,style:{marginRight:".2rem"},role:"button",onClick:notImplemented,icon:"general/openDisk.svg"}))))}))),isAutocompleteVisible&&react.createElement(MenuOverlayFromOrigin._,{onClose:()=>{setAutocompleteVisible(!1)},origin:menuOrigin,disableAutoFocus:!0},react.createElement(StyledPopover,null,react.createElement(ListBoxStyledAsMenu,{ref:collectionRef,focusProxyRef:inputRef,"aria-label":"Directories",shouldFocusOnHover:!0,shouldUseVirtualFocus:!0,autoFocus:"first",onAction:key=>{setValue(path_browserify_default().join(`${key}`,path_browserify_default().sep))},items:pathSuggestions},(({fullPath})=>react.createElement(Item.q,{key:fullPath,textValue:fullPath},react.createElement(ItemLayout.E,null,react.createElement(PlatformIcon.jE,{icon:DIR_ICON}),path_browserify_default().basename(fullPath))))))))}PathInputField.__docgenInfo={description:"",methods:[],displayName:"PathInputField",props:{value:{required:!1,tsType:{name:"string"},description:""},defaultValue:{required:!1,tsType:{name:"string"},description:""}}};const gitCloneActionAtom=actionAtom({id:VcsActionIds.GIT_CLONE,title:"Clone...",actionPerformed:async({get})=>{const windowManager=get(windowManagerRefAtom);windowManager.current?.open((({close})=>react.createElement(GitCloneWindow,{close})))}}),cloneAnotherRepoActionAtom=actionAtom({id:"ExampleApp.cloneExampleRepo",title:"Clone another repository...",isSearchable:!1,actionPerformed:({get})=>{const windowManager=get(windowManagerRefAtom);windowManager.current?.open((({close})=>react.createElement(GitCloneWindow,{close,url:"https://github.com/thurwitz/example-branches.git"})))}}),gitCloneAction_StyledContainer=styled.I4.div`
  padding: 1rem;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 0.75rem;
`;function GitCloneWindow({close,url:urlProp}){const[url,setUrl]=(0,react.useState)(urlProp??""),[parentDir,setCloneParentDirState]=(0,esm_react.fp)(cloneParentDirAtom),[visitedUrls,setVisitedUrls]=(0,esm_react.fp)(gitVisitedUrlsAtom),[directory,setDirectory]=(0,react.useState)(""),[autoFillDirectory,setAutoFillDirectory]=(0,react.useState)(!0),[showValidationErrors,setShowValidationErrors]=(0,react.useState)(!1),urlInputRef=(0,react.useRef)(null),dirInputRef=(0,react.useRef)(null),urlError=function validateRepoUrl(url){url=function sanitizeCloneUrl(url){return removePrefix(removePrefix(url.trim(),"git clone"),"hg clone")}(url);try{return new URL(url),null}catch(e){if(SSH_URL_PATTERN.test(url))return null}return"Repository URL is a malformed URL"}(url),[dirError,setDirError]=(0,react.useState)(""),clone=function useClone(){return(0,react_utils.yF)(cloneCallback)}();(0,react.useEffect)((()=>{if(autoFillDirectory){const repoName=url.split(/\/{1,2}/).pop()?.replace(/\.git$/,"")??"";setDirectory(repoName?path_browserify_default().join(parentDir,repoName):parentDir)}}),[parentDir,url,autoFillDirectory]);return react.createElement(ModalWindow.QI,{minWidth:600,minHeight:"content"},react.createElement(WindowLayout.$,{header:"Get from Version Control",content:react.createElement(Label.O,null,react.createElement("form",{id:"clone_form",onSubmit:async e=>{e.preventDefault(),setShowValidationErrors(!0);const dirValidationError=await async function validateCloneDirectory(directory){const stats=await stat(directory);if(!stats)return null;if(!stats.isDirectory())return"Destination is not a directory";const entries=await fs.promises.readdir(directory);return entries.length>0?"The directory already exists and is not empty":null}(directory);if(dirValidationError)return setDirError(dirValidationError),void dirInputRef.current?.focus();urlError?urlInputRef.current?.focus():(setCloneParentDirState(path_browserify_default().dirname(directory)),setVisitedUrls((urls=>urls.find((visitedUrl=>visitedUrl.url===url))?urls:urls.concat({url}))),clone({url,dir:directory,onSuccess:()=>{setVisitedUrls((visitedUrls=>visitedUrls.map((({url})=>url)).includes(url)?visitedUrls:[...visitedUrls,{url,username:""}]))}}),close())}},react.createElement(gitCloneAction_StyledContainer,null,react.createElement(ComboBox.a,{inputRef:urlInputRef,autoFocus:!0,label:"URL:",value:url,validationState:urlError&&showValidationErrors?"error":"valid",validationMessage:showValidationErrors&&urlError,onValueChange:value=>{setUrl(value)},items:visitedUrls},(({url})=>react.createElement(Item.q,{key:url},url))),react.createElement(PathInputField,{inputRef:dirInputRef,label:"Directory:",value:directory,validationState:dirError&&showValidationErrors?"error":"valid",validationMessage:showValidationErrors&&dirError,onChange:value=>{setDirectory(value),setAutoFillDirectory(!1),setDirError("")}})))),footer:react.createElement(WindowLayout.$.Footer,{right:react.createElement(react.Fragment,null,react.createElement(Button.$,{onPress:close},"Cancel"),react.createElement(Button.$,{variant:"default",isDisabled:!directory||!url,type:"submit",form:"clone_form"},"Clone"))})}))}const SSH_URL_PATTERN=new RegExp("^git@[\\w.-]+:[\\w./-]+\\.git$");function removePrefix(str,prefix){return str.startsWith(prefix)?str.slice(prefix.length):str}var Dropdown=__webpack_require__("./src/Dropdown/Dropdown.tsx");const numberFromString=lib.z.union([lib.z.string(),lib.z.number()]).transform(Number),windowStateSchema=lib.z.object({state:maybeArray(lib.z.object({"@x":numberFromString,"@y":numberFromString,"@width":numberFromString,"@height":numberFromString,"@key":lib.z.string(),"@timestamp":numberFromString,screen:lib.z.object({"@x":numberFromString,"@y":numberFromString,"@width":numberFromString,"@height":numberFromString})}))}),persistedWindowStateAtom=atomWithPersistence({},{storageFile:StoragePathMacros.PRODUCT_WORKSPACE_FILE,componentName:"WindowStateProjectService",schema:windowStateSchema.optional(),read:s=>s?.state.reduce(((soFar,state)=>Object.assign(soFar,{[state["@key"]]:{bounds:{left:state["@x"],top:state["@y"],width:state["@width"],height:state["@height"]},screen:{left:state.screen["@x"],top:state.screen["@y"],width:state.screen["@width"],height:state.screen["@height"]},timestamp:state["@timestamp"]}})),{})??{},write:value=>({state:Object.entries(value).map((([key,value])=>({"@key":key,"@x":value.bounds.left,"@y":value.bounds.top,"@width":value.bounds.width,"@height":value.bounds.height,"@timestamp":value.timestamp,screen:{"@x":value.screen.left,"@y":value.screen.top,"@width":value.screen.width,"@height":value.screen.height}})))})});function getShortRepositoryName(vcsRoot){return(0,path_browserify.basename)(vcsRoot.dir)}const CreateNewBranchWindow_StyledContainer=styled.I4.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  padding: 1rem 0.875rem 0.25rem;
  gap: 0.6rem;
`,StyledCheckboxesContainer=styled.I4.div`
  margin-left: -0.25rem; // to align with the field. Maybe something to look into in checkbox.
  display: flex;
  gap: 0.75rem;
`,CreateNewBranchWindow_ErrorMessages={EXISTING:branchName=>react.createElement(react.Fragment,null,"Branch name ",branchName," already exists. ",react.createElement("br",null),"Change the name or overwrite existing branch"),CLASHING_WITH_REMOTE:branchName=>react.createElement(react.Fragment,null,"Branch name ",branchName," clashes with remote branch ",react.createElement("br",null),"with the same name")};function CreateNewBranchWindow({close}){const[checkout,setCheckout]=(0,react.useState)(!0),[overwrite,setOverwrite]=(0,react.useState)(!1),branches=(0,esm_react.md)(activeRepoBranchesAtom),[isErrorVisible,setIsErrorVisible]=(0,react.useState)(!1),balloonManager=(0,BalloonManager.c)(),createBranch=function useCreateBranch(){return(0,react_utils.yF)((0,react.useCallback)(((_get,set,repoRoot,branchName,checkout=!0)=>(0,isomorphic_git.tk)({fs,dir:repoRoot,checkout,ref:branchName}).then((()=>{set(repoBranchesAtom(repoRoot))}))),[]))}(),currentBranchName=branches?.currentBranch?.name,[branchName,setBranchName]=(0,react.useState)(currentBranchName||""),error=validateBranchName(branches,branchName),isValid=!error||"EXISTING"===error&&overwrite,validationState=!isValid&&isErrorVisible?"error":"valid";return react.createElement(ModalWindow.QI,{minWidth:"content",minHeight:"content"},react.createElement(WindowLayout.$,{header:"Create New Branch",content:react.createElement(CreateNewBranchWindow_StyledContainer,{id:"create_branch_form",as:"form",onSubmit:e=>{e.preventDefault(),isValid&&branches?.repoRoot?createBranch(branches.repoRoot,branchName,checkout).catch((e=>{e instanceof isomorphic_git.I.AlreadyExistsError?balloonManager.show({icon:"Error",title:"Unimplemented action",body:"Overwrite option is currently not supported."}):balloonManager.show({icon:"Error",title:"Unexpected error",body:`Could not create branch ${branchName}.`}),console.error("Branch creation error: ",e)})).then((()=>{close()})):setIsErrorVisible(!0)}},react.createElement(InputField.F,{autoFocus:!0,autoSelect:!0,value:branchName,onChange:newValue=>{setBranchName(cleanUpBranchName(newValue)),setIsErrorVisible(!0)},validationState,validationMessage:"error"===validationState&&error&&CreateNewBranchWindow_ErrorMessages[error](branchName),label:"New branch name:",labelPlacement:"above"}),react.createElement(StyledCheckboxesContainer,null,react.createElement(Checkbox.S,{mnemonic:"C",isSelected:checkout,onChange:setCheckout},"Checkout branch"),react.createElement(Checkbox.S,{isSelected:overwrite,isDisabled:!isErrorVisible||"EXISTING"!==error,onChange:setOverwrite,mnemonic:"r"},"Overwrite existing branch"))),footer:react.createElement(WindowLayout.$.Footer,{right:react.createElement(react.Fragment,null,react.createElement(Button.$,{onPress:close},"Cancel"),react.createElement(Button.$,{variant:"default",type:"submit",form:"create_branch_form",isDisabled:"error"===validationState},"Create"))})}))}CreateNewBranchWindow.__docgenInfo={description:"",methods:[],displayName:"CreateNewBranchWindow",props:{close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const newBranchActionAtom=actionAtom({id:VcsActionIds.GIT_CREATE_NEW_BRANCH,title:"New Branch…",description:"Create new branch starting from the selected commit",icon:react.createElement(PlatformIcon.jE,{icon:"general/add.svg"}),actionPerformed:({get})=>{get(windowManagerRefAtom).current?.open((({close})=>react.createElement(CreateNewBranchWindow,{close})))}}),withResetOnMount=atom=>(0,index_modern.s)(atom,((_get,set)=>(set(atom,utils.Ut),()=>{set(atom,utils.Ut)}))),pushLogSelectedCommitsAtom=(0,vanilla.eU)((async get=>{const selection=get(pushLogTreeSelectionAtom),repoNodes=await get(pushTreeNodesAtom);return("all"===selection?repoNodes.map((({key})=>key)):[...selection]).flatMap((key=>{const{repo:repoPath,commit:oid}=deserializeKey(key);return repoPath&&oid?[{repoPath,oid}]:repoPath?repoNodes.find((repo=>repo.key===key))?.children.map((({commit:{repoPath,readCommitResult:{oid}}})=>({repoPath,oid}))):void 0})).filter((i=>null!=i))})),pushDetailsTreeState=createCommitsChangesTreeState(pushLogSelectedCommitsAtom),serializeKey=data=>JSON.stringify(data,null),getRepoFromKey=key=>deserializeKey(key)?.repo,deserializeKey=key=>JSON.parse(`${key}`),PushTreeNode={repo:function({commits,...params}){return{type:"repo",key:serializeKey({repo:params.repo.dir}),children:commits.map(PushTreeNode.commit),...params}},commit:function(commitWithMeta){return{type:"commit",key:serializeKey({repo:commitWithMeta.repoPath,commit:commitWithMeta.readCommitResult.oid}),commit:commitWithMeta}}},pushSourceAtom=(0,utils.Iz)((repoPath=>(0,vanilla.eU)((async get=>{const currentBranchName=await get(repoCurrentBranchNameAtom(repoPath));return currentBranchName?{type:"branch",ref:currentBranchName}:{type:"commit",ref:await(0,isomorphic_git.qE)({fs,dir:repoPath,ref:"HEAD"})}})))),pushTargetRemoteAtom=(0,utils.Iz)((repoPath=>withResetOnMount((0,utils.t_)((async get=>{const{currentBranch}=await get(repoBranchesAtom(repoPath)),trackingBranch=currentBranch?.trackingBranch;return trackingBranch?trackingBranch.split("/")[0]:(await get(repoRemotesAtoms(repoPath)))[0]?.remote??null}))))),pushTargetBranchAtom=(0,utils.Iz)((repoPath=>withResetOnMount((0,utils.t_)((async get=>{const{currentBranch}=await get(repoBranchesAtom(repoPath)),trackingBranch=currentBranch?.trackingBranch;return trackingBranch?.split("/").slice(1).join("/")??currentBranch?.name??"detached"}))))),pushTargetExistsAtom=(0,utils.Iz)((repoPath=>(0,vanilla.eU)((async get=>{const{remoteBranches}=await get(repoBranchesAtom(repoPath)),targetBranch=await get(pushTargetBranchAtom(repoPath)),targetRemote=await get(pushTargetRemoteAtom(repoPath));return remoteBranches.some((branch=>branch.remote===targetRemote&&branch.name===targetBranch))})))),commitNodesAtom=(0,utils.Iz)((({repoPath})=>unwrapLatestOrNull((atom=>(0,index_modern.s)(atom,((_get,set)=>(set(atom),()=>{set(atom)}))))(atomWithRefresh((async get=>{const{remoteBranches}=await get(repoBranchesAtom(repoPath)),source=await get(pushSourceAtom(repoPath)),targetRemote=await get(pushTargetRemoteAtom(repoPath)),targetBranch=await get(pushTargetBranchAtom(repoPath)),targetExists=await get(pushTargetExistsAtom(repoPath)),allTargetRemoteRefs=remoteBranches.filter((branch=>branch.remote===targetRemote)).map((branch=>`${targetRemote}/${branch.name}`));return await readCommits(fs,{repoPath,refs:[source.ref],notRefs:targetExists?[`${targetRemote}/${targetBranch}`]:allTargetRemoteRefs})}))))),equals.A),pushTreeNodesAtom=unwrapLatest((0,vanilla.eU)((get=>{const repo=get(vcsRootsAtom);return Promise.all(repo.map((async repo=>{const targetRemote=await get(pushTargetRemoteAtom(repo.dir)),targetBranch=await get(pushTargetBranchAtom(repo.dir)),source=await get(pushSourceAtom(repo.dir)),targetExists=await get(pushTargetExistsAtom(repo.dir));return PushTreeNode.repo({repo,source,target:{remote:targetRemote,branch:targetBranch,isNew:!targetExists},commits:get(commitNodesAtom({repoPath:repo.dir}))??[]})})))})));async function getInitiallyIncludedRepos(get){const repoRoots=get(vcsRootsAtom);return 1===repoRoots.length?[repoRoots[0].dir]:get(activeRepoRootAtom).then((currentRepo=>currentRepo?[currentRepo]:[]))}const pushTreeIncludedReposAtom=(0,index_modern.s)((0,vanilla.eU)([]),((get,set)=>{getInitiallyIncludedRepos(get).then((repoDirs=>set(pushTreeIncludedReposAtom,repoDirs)))})),pushLogTreeSelectionAtom=(0,index_modern.s)((0,vanilla.eU)(new Set),((get,set)=>{getInitiallyIncludedRepos(get.peek).then((async repoDirs=>new Set([repoDirs[0]?serializeKey({repo:repoDirs[0]}):(await get.peek(pushTreeNodesAtom))[0].key]))).then((selection=>{set(pushLogTreeSelectionAtom,selection)}))})),pushesAtom=(0,vanilla.eU)((async get=>(await Promise.all(get(pushTreeIncludedReposAtom).map((async dir=>{const remote=await get(pushTargetRemoteAtom(dir));if(null===remote)return null;const url=(await get(repoRemotesAtoms(dir))).find((({remote:name})=>name===remote))?.url,targetBranch=await get(pushTargetBranchAtom(dir));return{dir,url,remote,remoteRef:targetBranch,isNew:!await get(pushTargetExistsAtom(dir))}})))).filter((i=>null!==i)))),StyledForm=styled.I4.form`
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 0.75rem;
`;function AddRemoteWindow({dir,close}){const[submitted,setSubmitted]=(0,react.useState)(!1),existingRemotes=(0,esm_react.md)(repoRemotesAtoms(dir)).map((({remote})=>remote)),refreshRemotes=(0,esm_react.Xr)(repoRemotesAtoms(dir)),originRemoteExists=existingRemotes.find((remote=>"origin"===remote)),[name,setName]=(0,react.useState)(originRemoteExists?"":"origin"),[url,setUrl]=(0,react.useState)(""),[connectionError,setConnectionError]=(0,react.useState)(null),[checkingConnection,setCheckingConnection]=(0,react.useState)(!1),nameError=name?existingRemotes.includes(name)?`Remote name '${name}' is already used`:null:"Remote name cannot be empty",urlError=connectionError??(url?null:"Remote URL cannot be empty"),onSubmit=useCancelableAsyncCallback((function*(e){if(setSubmitted(!0),e.preventDefault(),url&&name){setCheckingConnection(!0);try{yield async function getRemoteInfo(params){return(0,isomorphic_git.h0)({http:web.A,corsProxy:params.url?.match(/^https?:\/\/localhost/)?void 0:corsProxy,...params})}({url})}catch(e){return void setConnectionError(`${e}`)}finally{setCheckingConnection(!1)}yield(0,isomorphic_git.Uu)({fs,remote:name,url,dir}),refreshRemotes(),close({name,url})}}));return react.createElement(ModalWindow.QI,{minWidth:375,minHeight:"content"},react.createElement(WindowLayout.$,{header:`Define Remote in ${getShortRepositoryName({dir})}`,content:react.createElement(Label.O,null,react.createElement(StyledForm,{id:"add-remote-form",onSubmit},react.createElement(InputField.F,{label:"Name:",labelPlacement:"before",autoFocus:!name,value:name,onChange:setName,validationState:submitted&&nameError?"error":"valid",validationMessage:submitted&&nameError}),react.createElement(InputField.F,{label:"URL:",labelPlacement:"before",autoFocus:Boolean(name),value:url,addonAfter:checkingConnection&&react.createElement(LoadingSpinner.kt,{size:LoadingSpinner.xj}),onChange:newUrl=>{setUrl(newUrl),setConnectionError(null)},validationState:submitted&&urlError?"error":"valid",validationMessage:submitted&&urlError}))),footer:react.createElement(WindowLayout.$.Footer,{right:react.createElement(react.Fragment,null,react.createElement(Button.$,{onPress:()=>close()},"Cancel"),react.createElement(Button.$,{type:"submit",form:"add-remote-form",variant:"default",isDisabled:submitted&&(!url||!name)},"OK"))})}))}function useAddRemote(){const windowManager=useWindowManager();return repoDir=>windowManager.open((({close})=>react.createElement(react.Suspense,null,react.createElement(AddRemoteWindow,{dir:repoDir,close}))))}const StyledBadge=styled.I4.span`
  color: ${({theme})=>theme.currentForegroundAware(theme.dark?"#6ba65d":"#00b53d")};
  background: ${({theme})=>theme.currentBackgroundAware(theme.dark?"#313b32":"#ebfcf1")};
  line-height: 1;
  padding: 2px;
  font-size: 0.77em;
  border-radius: 0.125rem;
`,PushLogTree_StyledItemLayout=(0,styled.I4)(ItemLayout.E)`
  opacity: ${({$included})=>!$included&&.85};
`,toggleSelectionCallback=async(get,set,value)=>{const repo=value.split(":").slice(-1)[0],includedRepos=get(pushTreeIncludedReposAtom);includedRepos.includes(repo)?set(pushTreeIncludedReposAtom,includedRepos.filter((key=>key!==repo))):set(pushTreeIncludedReposAtom,includedRepos.concat(repo))},syncPushLogSelectedCommitsAtom=unwrapLatestOrNull(pushLogSelectedCommitsAtom),createPatchActionAtom=actionAtom({id:VcsActionIds.CREATE_PATCH_FROM_CHANGES,title:"Create Patch...",description:"Create a patch from the selected changes",isDisabled:(0,vanilla.eU)((get=>0===[...get(syncPushLogSelectedCommitsAtom)??[]].length)),icon:react.createElement(PlatformIcon.jE,{icon:"vcs/patch.svg"}),actionPerformed:()=>{notImplemented()}}),compareWithLocal=actionAtom({id:VcsActionIds.COMPARE_WITH_LOCAL,title:"Compare with Local",description:"Compare version in selected revision with current version",isDisabled:(0,vanilla.eU)((get=>0===[...get(syncPushLogSelectedCommitsAtom)??[]].length)),actionPerformed:()=>{notImplemented()}}),StyledContextMenuContainer=(0,styled.I4)(ContextMenuContainer.y)`
  box-sizing: border-box;
  height: 100%;
  padding-top: 0.5rem;
`,copyRevisionNumbersActionAtom=createCopyRevisionNumberActionAtom((0,vanilla.eU)((async get=>(await get(pushLogSelectedCommitsAtom)).map((({oid})=>oid)))));function PushLogTree(){const repoNodes=(0,esm_react.md)(pushTreeNodesAtom),toggleIncludedRepos=(0,react_utils.yF)(toggleSelectionCallback),[selection,setSelection]=(0,esm_react.fp)(pushLogTreeSelectionAtom),contextMenuActionGroup={id:VcsActionIds.VCS_LOG_CONTEXT_MENU,title:"",isSearchable:!1,children:[(0,esm_react.md)(copyRevisionNumbersActionAtom),(0,esm_react.md)(createPatchActionAtom),"divider",(0,esm_react.md)(compareWithLocal),"divider",(0,esm_react.md)(newBranchActionAtom)],actionPerformed:()=>{}};return react.createElement(react.Fragment,null,react.createElement(ActionsProvider.Be,{actions:[contextMenuActionGroup]},(({shortcutHandlerProps})=>react.createElement(StyledContextMenuContainer,{renderMenu:()=>react.createElement(PushLogContextMenu,null),...shortcutHandlerProps},react.createElement(SpeedSearchTree.K,{fillAvailableSpace:!0,items:repoNodes,selectionMode:"multiple",selectedKeys:selection,onSelectionChange:setSelection,defaultExpandedKeys:repoNodes.map((0,prop.A)("key")),onNodeKeyDown:(e,node)=>{" "===e.key&&node.value&&toggleIncludedRepos("repo"===node.value.type?node.value.repo.dir:node.value.commit.repoPath)}},(node=>{switch(node.type){case"repo":return react.createElement(Item.q,{key:node.key,childItems:node.children,textValue:node.repo.dir},react.createElement(PushTreeRepoNode,{node,hasCheckbox:repoNodes.length>1}));case"commit":return react.createElement(Item.q,{key:node.key},react.createElement(PushTreeCommitNode,{node}))}}))))))}function PushLogContextMenu(){const actionGroup=(0,useActionGroup.n)(VcsActionIds.VCS_LOG_CONTEXT_MENU);return actionGroup&&react.createElement(ActionGroupMenu,{actionGroup})}const StyledHint=styled.I4.div`
  color: ${({theme})=>theme.commonColors.inactiveTextColor};
  font-style: italic;
  margin-top: 1.25rem;
`;function PushTreeCommitNode({node}){const{oid,commit}=node.commit.readCommitResult,{subject,body}=parseCommitMessage(node.commit.readCommitResult.commit.message),opacity=usePushTreeNodeOpacity(node.key);return react.createElement(TooltipTrigger.k,{tooltip:react.createElement(Tooltip.m_,null,shortenOid(oid)," ",formatCommitDate(commit.committer.timestamp),","," ",formatCommitTime(commit.committer.timestamp)," by"," ",commit.committer.name," ",subject,body,react.createElement(StyledHint,null,"Select to show commit details"))},(props=>react.createElement(PushLogTree_StyledItemLayout,{...props,style:{paddingLeft:".5rem",opacity}},subject)))}function usePushTreeNodeOpacity(key){const itemContext=(0,react.useContext)(ItemStateContext.k);if(!((0,esm_react.md)(pushTreeIncludedReposAtom).includes(getRepoFromKey(key))||itemContext?.isSelected&&itemContext?.isContainerFocused))return NOT_INCLUDED_OPACITY}const NOT_INCLUDED_OPACITY=.35,PushLogTree_StyledInput=styled.I4.input`
  background: ${({theme})=>theme.color("*.background")};
  color: ${({theme})=>theme.color("*.foreground")};
  border: 1px solid ${({theme})=>theme.commonColors.contrastBorder};
  outline: none;
  flex: 1;
  margin-right: -0.5rem;
  ::selection {
    background: ${({theme})=>theme.color("*.selectionBackground")};
  }
`;function PushTreeRepoNode({node:{source,target,repo,key},hasCheckbox}){const includedRepos=(0,esm_react.md)(pushTreeIncludedReposAtom),toggleIncludedRepos=(0,react_utils.yF)(toggleSelectionCallback),setTargetBranchName=(0,esm_react.Xr)(pushTargetBranchAtom(repo.dir)),setTargetRemote=(0,esm_react.Xr)(pushTargetRemoteAtom(repo.dir)),opacity=usePushTreeNodeOpacity(key),[isEditingTargetBranch,setIsEditingTargetBranch]=(0,react.useState)(!1),[editingBranchName,setEditingBranchName]=(0,react.useState)(target.branch),submitTargetBranchName=()=>{setIsEditingTargetBranch(!1),setTimeout((()=>{setTargetBranchName(editingBranchName)}))},addRemote=useAddRemote();return react.createElement(ItemLayout.E,{style:{flex:1}},hasCheckbox&&react.createElement(react.Fragment,null,react.createElement(TreeNodeCheckbox,{onToggle:()=>toggleIncludedRepos(repo.dir),selectionState:includedRepos.includes(repo.dir)?"Selected":"NotSelected"}),react.createElement("span",{style:{minWidth:115,opacity}},getShortRepositoryName(repo))),!isEditingTargetBranch&&react.createElement(react.Fragment,null,react.createElement("span",{style:{opacity}},"commit"===source.type?shortenOid(source.ref):source.ref," ","→"," ",target.remote&&react.createElement(react.Fragment,null,react.createElement(MenuTrigger.c,{elementType:"a",renderMenu:({menuProps})=>react.createElement(SetRemoteMenu,{repoPath:repo.dir,menuProps})},react.createElement(Link.N,null,target.remote))," ",":"," ",react.createElement(Link.N,{onPress:()=>{setEditingBranchName(target.branch),setIsEditingTargetBranch(!0)},preventFocusOnPress:!0},target.branch))),target.remote&&target.isNew&&react.createElement(StyledBadge,null,"New"),!target.remote&&react.createElement(Link.N,{onPress:()=>{addRemote(repo.dir).then((remote=>{remote&&setTargetRemote(remote.name)}))}},"Define remote")),isEditingTargetBranch&&react.createElement(PushLogTree_StyledInput,{autoFocus:!0,value:editingBranchName,onChange:e=>setEditingBranchName(e.target.value),onFocus:e=>{e.target.select()},onBlur:submitTargetBranchName,onKeyDown:e=>{e.stopPropagation(),"Escape"===e.key&&setIsEditingTargetBranch(!1),"Enter"===e.key&&submitTargetBranchName()}}))}function SetRemoteMenu({menuProps,repoPath}){const remotes=(0,esm_react.md)(repoRemotesAtoms(repoPath)),setTargetRemote=(0,esm_react.Xr)(pushTargetRemoteAtom(repoPath)),addRemote=useAddRemote();return react.createElement(Menu.W1,{...menuProps,autoFocus:"first",onAction:key=>{"addRemote"===key?addRemote(repoPath).then((remote=>{remote&&setTargetRemote(remote.name)})):setTimeout((()=>{setTargetRemote(`${key}`.split(":").slice(1).join(":"))}))}},remotes.map((remote=>react.createElement(Item.q,{key:`remote:${remote.remote}`},remote.remote))).concat([react.createElement(Divider.c,{key:"divider"}),react.createElement(Item.q,{key:"addRemote"},"Define remote")]))}PushLogTree.__docgenInfo={description:"",methods:[],displayName:"PushLogTree"};atomWithPersistence({},{componentName:"PropertiesComponent",storageFile:StoragePathMacros.WORKSPACE_FILE,schema:lib.z.object({property:maybeArray(lib.z.object({"@name":lib.z.string(),"@value":lib.z.string()}))}).optional(),read:state=>Object.fromEntries(state?.property.map((({"@name":name,"@value":value})=>[name,value]))??[]),write:(value,state)=>({property:(state?.property||[]).concat(Object.entries(value).map((([key,value])=>({"@name":key,"@value":value}))))})});const propertyServiceParsedValueSchema=lib.z.object({keyToString:lib.z.record(lib.z.string(),lib.z.string()),keyToStringList:lib.z.record(lib.z.string(),lib.z.array(lib.z.string()))}),createPropertiesAtom=options=>atomWithPersistence({keyToString:{},keyToStringList:{}},{...options,schema:lib.z.object({__cdata:lib.z.string()}).optional(),read:state=>{try{return console.log('state?.["#text"]',state?.__cdata),propertyServiceParsedValueSchema.parse(JSON.parse(state?.__cdata??"{}"))}catch(e){return{keyToString:{},keyToStringList:{}}}},write:(value,state)=>({__cdata:JSON.stringify(value,null,2)})}),appPropertiesAtom=createPropertiesAtom({componentName:"PropertyService",storageFile:StoragePathMacros.NON_ROAMABLE_FILE}),createPropertiesAtoms=propertiesAtom=>{const stringPropertiesAtom=(0,focusAtom.I)(propertiesAtom,(optic=>optic.prop("keyToString")));return{number:(property,defaultValue)=>{const propertyValueAtom=(0,focusAtom.I)(stringPropertiesAtom,(optic=>optic.prop(property))),numberValueAtom=(0,vanilla.eU)((get=>{const value=get(propertyValueAtom),numberValue=Number(value);return Number.isNaN(numberValue)?defaultValue:numberValue}),((get,set,update)=>{const newValue="function"==typeof update?update(get(numberValueAtom)):update;set(propertyValueAtom,String(newValue))}));return numberValueAtom}}},appPropertyAtom=(createPropertiesAtoms(createPropertiesAtom({componentName:"PropertiesComponent",storageFile:StoragePathMacros.WORKSPACE_FILE})),{...createPropertiesAtoms(appPropertiesAtom)}),StyledRow=styled.I4.div`
  display: flex;
  justify-content: space-between;
  border-bottom: 1px solid ${({theme})=>theme.commonColors.contrastBorder};
`,StyledColumn=styled.I4.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,pushChangesTreeRefAtom=(0,vanilla.eU)(react.createRef()),pushLogDetailsTreeSelectionAtom=(0,vanilla.eU)(new Set([])),PushLogDetails_groupingAtom=(0,vanilla.eU)((get=>defaultChangeGroupings.filter((grouping=>isAtom(grouping.isAvailable)?get(grouping.isAvailable):grouping.isAvailable)).map((grouping=>({...grouping,key:`groupBy:${grouping.id}`,isActive:get(pushDetailsTreeState.isGroupingActiveAtom(grouping.id))}))))),PushLogDetails_GROUP_BY_ACTION_GROUP_ID="Vcs.push.detailsView.groupBy",PushLogDetails_VIEW_OPTIONS_ACTION_GROUP_ID="Vcs.push.detailsView.viewOptions",PushLogDetails_groupingActionId=grouping=>`Vcs.push.detailsView.groupBy.${grouping.id}`;function PushLogDetails(){const treeRef=(0,esm_react.md)(pushChangesTreeRefAtom),availableGroupings=(0,esm_react.md)(PushLogDetails_groupingAtom),toggleGroupBy=(0,react_utils.yF)((0,react.useCallback)(((get,set,id)=>{set(pushDetailsTreeState.isGroupingActiveAtom(id),(currentValue=>!currentValue))}),[])),[expandedKeys,setExpandedKeys]=(0,react.useState)(new Set),[selection,setSelection]=(0,esm_react.fp)(pushLogDetailsTreeSelectionAtom),createActionGroup=(0,useCreateDefaultActionGroup.Q)(),selectionIsEmpty=0===[...selection].length,actions=[...(0,useTreeActions.T)({treeRef}),createActionGroup({id:PushLogDetails_VIEW_OPTIONS_ACTION_GROUP_ID,title:"View Options",icon:react.createElement(PlatformIcon.jE,{icon:"actions/groupBy.svg"}),children:[createActionGroup({id:PushLogDetails_GROUP_BY_ACTION_GROUP_ID,title:"Group By",menuPresentation:"titledSection",icon:react.createElement(PlatformIcon.jE,{icon:"actions/groupBy.svg"}),children:availableGroupings.map((grouping=>({id:PushLogDetails_groupingActionId(grouping),useShortcutsOf:grouping.useShortcutOf,title:grouping.title,actionPerformed:()=>{toggleGroupBy(grouping.id)}})))})]}),{id:VcsActionIds.SHOW_DIFF,title:"Show Diff",description:"Compare files or revisions.",icon:react.createElement(PlatformIcon.jE,{icon:"actions/diff.svg"}),isDisabled:selectionIsEmpty,actionPerformed:notImplemented},{id:VcsActionIds.SHOW_DIFF_STANDALONE,title:"Show Diff in a New Tab or Window",description:"Open diff for each selection in a new tab or window",icon:react.createElement(PlatformIcon.jE,{icon:"actions/diff.svg"}),isDisabled:selectionIsEmpty,actionPerformed:notImplemented}],stateLoadable=(0,esm_react.md)(pushDetailsTreeState.changedFilesLoadableAtom),state="hasData"===stateLoadable.state?stateLoadable.data:null;return(0,react.useEffect)((()=>{treeRef.current?.expandAll()}),[(0,esm_react.md)(pushLogTreeSelectionAtom),state]),react.createElement(ActionsProvider.Be,{actions},(({shortcutHandlerProps})=>react.createElement(StyledColumn,shortcutHandlerProps,react.createElement(StyledRow,null,react.createElement(Toolbar.M,null,react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Show Diff",shortcut:"⌘D"})},react.createElement(IconButton.K0,{isDisabled:!0},react.createElement(PlatformIcon.jE,{icon:"actions/diff.svg"}))),react.createElement(Divider.c,null),react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:"Group By"})},react.createElement(IconButtonWithMenu,{renderMenu:({menuProps})=>react.createElement(PushLogDetailsViewOptionsMenu,{menuProps})},react.createElement(PlatformIcon.jE,{icon:"actions/groupBy.svg"})))),react.createElement(Toolbar.M,null,react.createElement(ActionButton.r,{actionId:CommonActionIds.j.EXPAND_ALL}),react.createElement(ActionButton.r,{actionId:CommonActionIds.j.COLLAPSE_ALL}))),state&&react.createElement(ContextMenuContainer.y,{renderMenu:()=>react.createElement(ContextMenu,null)},(props=>react.createElement("div",{...props,style:{height:"100%"}},react.createElement(SpeedSearchTree.K,{"aria-label":"Commit changes",treeRef,items:state.rootNodes,selectionMode:"multiple",expandedKeys,onExpandedChange:setExpandedKeys,selectedKeys:selection,onSelectionChange:setSelection,style:{paddingBottom:"1rem"},fillAvailableSpace:!0},commitChangesTreeNodeRenderer.itemRenderer({fileCountsMap:state.fileCountsMap}))))))))}function ContextMenu(){return react.createElement(ActionsMenu.$,{actions:[(0,ActionsProvider.y3)(VcsActionIds.SHOW_DIFF),(0,ActionsProvider.y3)(VcsActionIds.SHOW_DIFF_STANDALONE)].filter((i=>null!==i))})}const PushLogDetails_toggleActionAtoms={...Object.fromEntries(defaultChangeGroupings.map((grouping=>[PushLogDetails_groupingActionId(grouping),pushDetailsTreeState.isGroupingActiveAtom(grouping.id)])))},PushLogDetails_selectedKeysAtom=(0,vanilla.eU)((get=>Object.entries(PushLogDetails_toggleActionAtoms).filter((([,state])=>get(state))).map((([actionId])=>actionId))));function PushLogDetailsViewOptionsMenu({menuProps}){const group=(0,useActionGroup.n)(PushLogDetails_VIEW_OPTIONS_ACTION_GROUP_ID),selectedKeys=(0,esm_react.md)(PushLogDetails_selectedKeysAtom);return group&&react.createElement(ActionGroupMenu,{actionGroup:group},(actionMenuProps=>react.createElement(SpeedSearchMenu.V,{...menuProps,...actionMenuProps,selectedKeys})))}PushLogDetails.__docgenInfo={description:"",methods:[],displayName:"PushLogDetails"};const firstViewSizeAtom=appPropertyAtom.number("Vcs.Push.Splitter.Tree.Proportion",.5),gitWindowBoundsAtom=(key=>(0,vanilla.eU)((get=>get(persistedWindowStateAtom)[key]),((get,set,newValue)=>set(persistedWindowStateAtom,(currentValue=>({...currentValue,[key]:newValue}))))))("Vcs.Push.Dialog.v2"),pushCallback=atomCallback({createGitTaskCallback},(async({get,createGitTask})=>{const pushes=await get(pushesAtom),multiRepo=get(vcsRootsAtom).length>1;function getPushResultMessage({remoteRef,remote,dir,source,isNew}){const pushedCommitLength=get(commitNodesAtom({repoPath:dir}))?.length;return!pushedCommitLength?"Everything is up to date":`Pushed ${isNew?source:`${new core.S("{count, plural,\n                        =1 {commit}\n                        other {# commits}\n                          }","en-US").format({count:pushedCommitLength})}`} to${isNew?" new branch":""} ${remote}/${remoteRef}`}createGitTask({title:"Pushing...",run:async({onProgress,...handlers})=>{const errors=new Map;for(const args of pushes)await isomorphic_git.Ay.push({fs,http:web.A,onProgress:onProgress.part(pushes.indexOf(args),pushes.length),...handlers,...args}).then((r=>(console.log("push result",r),r))).catch((e=>{console.error("Git push error. args:",args,"error:",e),errors.set(args.dir,e)}));const singleSuccessfulPush=!multiRepo&&0===errors.size,params={...pushes[0],source:await get(repoCurrentBranchNameAtom(pushes[0].dir))};_balloonManagerRef.value?.showSticky({icon:errors.size>0?"Error":"Info",title:errors.size>0?errors.size<pushes.length?"Push partially failed":"Push failed":singleSuccessfulPush?getPushResultMessage(params):"Push successful",body:!singleSuccessfulPush&&pushes.map((push=>{const{dir,url,remote}=push,error=errors.get(dir);return react.createElement("div",{key:dir},multiRepo&&react.createElement(react.Fragment,null,getShortRepositoryName({dir}),": "),error?function getPushErrorMessage({error,url}){return`${function getErrorMessage(error){if(error instanceof isomorphic_git.I.HttpError)return`remote: ${error.data.response}`;return"Unknown error occurred while pushing"}(error)} ${error instanceof isomorphic_git.I.HttpError&&401===error.data.statusCode?`Authentication failed for '${url}'`:""}`}({error,url:url??remote}):getPushResultMessage(params))})),actions:react.createElement(react.Fragment,null,react.createElement(Balloon.o,{onPress:notImplemented},"Show details in console"))})}})}));function GitPushWindow({close}){const repos=(0,esm_react.md)(vcsRootsAtom),[firstViewSize,setFirstViewSize]=(0,esm_react.fp)(firstViewSizeAtom),[windowState,setWindowState]=(0,esm_react.fp)(gitWindowBoundsAtom);return react.createElement(ModalWindow.QI,{bounds:windowState?.bounds??{width:800,height:520},onBoundsChange:bounds=>{setWindowState({bounds,screen:{left:window.screenX,top:window.screenY,width:window.outerWidth,height:window.outerHeight},timestamp:Date.now()})}},react.createElement(WindowLayout.$,{header:1===repos.length?`Push commits to ${getShortRepositoryName(repos[0])}`:"Push commits",content:react.createElement(ThreeViewSplitter.v,{firstSize:firstViewSize,onFirstResize:setFirstViewSize,firstView:react.createElement(PushLogTree,null),innerView:react.createElement(PushLogDetails,null)}),footer:react.createElement(GitPushWindowFooter,{close})}))}const canPushAtom=(0,utils.oA)((0,vanilla.eU)((get=>get(pushesAtom).then((pushes=>pushes.length>0)))),(()=>!1));function GitPushWindowFooter({close}){let[shouldPushTags,setShouldPushTags]=(0,react.useState)(!1);const push=(0,react_utils.yF)(pushCallback),canPush=(0,esm_react.md)(canPushAtom);return react.createElement(WindowLayout.$.Footer,{hasBorder:!0,left:react.createElement(react.Fragment,null,react.createElement(HelpButton,{onPress:()=>notImplemented()}),react.createElement(Checkbox.S,{mnemonic:"t",isSelected:shouldPushTags,onChange:setShouldPushTags},"Push tags"),react.createElement(Dropdown.m,{isDisabled:!shouldPushTags,selectedKey:"all",style:{width:145}},react.createElement(Item.q,{key:"all"},"All"),react.createElement(Item.q,{key:"currentBranch"},"Current Branch"))),right:react.createElement(react.Fragment,null,react.createElement(Button.$,{onPress:close},"Cancel"),react.createElement(Button.$,{isDisabled:!canPush,variant:"default",mnemonic:"P",onPress:()=>{push(),close()}},"Push"))})}GitPushWindow.__docgenInfo={description:"",methods:[],displayName:"GitPushWindow",props:{close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const gitPushActionAtom=actionAtom({id:VcsActionIds.GIT_PUSH,title:"Push...",icon:react.createElement(PlatformIcon.jE,{icon:"vcs/push.svg"}),isDisabled:(0,vanilla.eU)((get=>0===get(vcsRootsAtom).length)),actionPerformed:async({get,set})=>{const windowManager=get(windowManagerRefAtom).current;windowManager?.open((({close})=>react.createElement(GitPushWindow,{close})))}}),branchesActionAtom=actionAtom({id:VcsActionIds.GIT_BRANCHES,title:"Branches…",icon:react.createElement(PlatformIcon.jE,{icon:"vcs/branch.svg"}),actionPerformed:({get})=>{get(projectPopupManagerRefAtom).current?.show((({close})=>react.createElement(BranchesPopup,{close})))}});function useVcsActions(){const gitInitAction=(0,esm_react.md)(gitInitActionAtom);return[...useChangesViewActionDefinitions(),(0,esm_react.md)(gitAddActionAtom),(0,esm_react.md)(gitCloneActionAtom),(0,esm_react.md)(gitPushActionAtom),(0,esm_react.md)(cloneAnotherRepoActionAtom),...0===(0,esm_react.md)(vcsRootsAtom).length?[gitInitAction]:[],(0,esm_react.md)(newBranchActionAtom),(0,esm_react.md)(branchesActionAtom),{id:VcsActionIds.GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH,title:"Navigate Log to Selected Branch Head",useShortcutsOf:"SelectIn",icon:react.createElement(PlatformIcon.jE,{icon:"general/locate.svg"}),actionPerformed:()=>{notImplemented()}}]}function useTestActions(){const runTask=useRunTask();return[{id:"AddTestProcessAction",title:"Add Test Process",actionPerformed:()=>{runTask({title:"Test process",isCancelable:!0},(async({setText,setSecondaryText,setFraction},abortSignal)=>{setText("Welcome!"),await(0,esm.Ni)((function*(){for(let each=0;each<1e3;each++)setText(getProcessName(each)),setFraction(each/1e3),yield sleep(100),setSecondaryText("Bla bla bla")}))(abortSignal)}))}}]}async function sleep(durationInMs){return new Promise((resolve=>setTimeout(resolve,durationInMs)))}function getProcessName(num){return num/10==Math.round(num/10)?"":"Found: "+Math.round(num/20)+1}const StyledWindowFrame=styled.I4.div`
  display: flex;
  flex-direction: column;
  height: 100vh;
  min-height: 0;
`,Project=({height})=>{const toolWindowRef=(0,react.useRef)(null),[state,setState]=(0,esm_react.fp)(toolWindowsStateAtom),isRollbackWindowOpen=(0,esm_react.md)(rollbackViewState.isOpenAtom),isSearchEveryWhereOpen=(0,esm_react.md)(searchEverywhereState.isOpen);return(0,esm_react.md)(projectPopupManagerRefAtom).current=(0,PopupManager.n)(),(0,esm_react.md)(windowManagerRefAtom).current=useWindowManager(),(0,esm_react.md)(alertDialogRefAtom).current=function useAlertDialog(){const{open}=useWindowManager();return{confirm:({title,message,okText="Ok",cancelText="Cancel"})=>new Promise((resolve=>{open((({close})=>react.createElement(AlertDialog.L,{type:"question",body:message,heading:title,buttons:react.createElement(react.Fragment,null,react.createElement(Button.$,{onPress:close},cancelText),react.createElement(Button.$,{variant:"default",onPress:()=>{resolve(!0),close()}},okText)),onClose:()=>resolve(!1)})))}))}}(),react.createElement(react.Fragment,null,react.createElement(SyncChangeListsState,null),react.createElement(BalloonManager.n,{disablePortal:!0},react.createElement(SetBalloonManagerRef,null),react.createElement(UsePersistentFsNotification,null),react.createElement(ToolWindowsRefContext.Provider,{value:toolWindowRef},react.createElement(StyledWindowFrame,{style:{height}},react.createElement(ProjectActionProvider,null,(({shortcutHandlerProps})=>react.createElement(react.Fragment,null,react.createElement(DefaultToolWindows.T,{ref:toolWindowRef,toolWindowsState:state,onToolWindowStateChange:newState=>{setState(newState)},windows:toolWindows,containerProps:shortcutHandlerProps},react.createElement(FileEditor,null)),react.createElement(IdeStatusBar,null)))),isSearchEveryWhereOpen&&react.createElement(SearchEverywherePopup,null),isRollbackWindowOpen&&react.createElement(RollbackWindow,null)))))};function ProjectActionProvider(props){const allActions=[...useProjectActions(),...useVcsActions(),...useTestActions()];return react.createElement(ActionsProvider.Be,{...props,actions:allActions,useCapture:!0})}function SetBalloonManagerRef(){return _balloonManagerRef.value=(0,BalloonManager.c)(),null}function UsePersistentFsNotification(){return function usePersistenceFsNotification(){const balloons=(0,BalloonManager.c)(),runTask=useRunTask();(0,react.useEffect)((()=>{const timeoutId=setTimeout((()=>{null==persistentFsPreference.get()&&balloons.showSticky({title:"Switch to IndexedDB filesystem",body:"By default an in-memory filesystem is used to have a faster git clone. But it means all changes will be lost upon refresh. You can switch in the background to a persistence fs implementation which uses IndexedDB to store files.",actions:react.createElement(react.Fragment,null,react.createElement(Balloon.o,{onPress:()=>{runTask({title:"Switching to IndexedDB FS",isCancelable:!0},(async({setIndeterminate,setText},cancelSignal)=>{setText("Copying ..."),setIndeterminate(!0),await switchToPersistentFS({cancelSignal,onCopy:filepath=>{setText(`Copying ${path_browserify_default().dirname(filepath)}`)}}).then((()=>{persistentFsPreference.set("yes")})).catch((()=>{}))}))}},"Switch to IndexedDB FS"),react.createElement(Balloon.o,{onPress:()=>persistentFsPreference.set("no")},"Don't ask again"))})}),3e3);return()=>clearTimeout(timeoutId)}),[])}(),null}Project.__docgenInfo={description:"",methods:[],displayName:"Project",props:{height:{required:!0,tsType:{name:'CSSProperties["height"]',raw:'CSSProperties["height"]'},description:""}}};var StyledPopupContainer=__webpack_require__("./src/Popup/StyledPopupContainer.tsx");const defaultWorkspaceFiles={".idea/vcs.xml":'<?xml version="1.0" encoding="UTF-8"?>\n<project version="4">\n  <component name="GitRememberedInputs">\n    <option name="visitedUrls">\n      <list>\n        <UrlAndUserName>\n          <option name="url" value="https://github.com/alirezamirian/jui.git"></option>\n          <option name="userName" value=""></option>\n        </UrlAndUserName>\n        <UrlAndUserName>\n          <option name="url" value="https://github.com/thurwitz/example-branches.git"></option>\n          <option name="userName" value=""></option>\n        </UrlAndUserName>\n      </list>\n    </option>\n    <option name="cloneParentDir" value="/workspace"></option>\n  </component>\n  <component name="VcsDirectoryMappings"></component>\n</project>\n\n'};const defaultInitializer=async()=>{await ensureDir(fs.promises,defaultProject.path),await Promise.all(Object.entries(defaultWorkspaceFiles).map((async([filename,content])=>{const fullPath=path_browserify_default().join(defaultProject.path,filename);await fs.promises.exists(fullPath)||(await ensureDir(fs.promises,path_browserify_default().dirname(fullPath)),await fs.promises.writeFile(fullPath,content,"utf-8"))})))},InlinePopup=(0,styled.I4)(StyledPopupContainer.t)`
  min-width: ${({minWidth})=>minWidth?`${minWidth}px`:""};
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`,ProjectInitializer=({children,autoCloneSampleRepo=!1})=>{const[cloneProgress,setCloneProgress]=(0,react.useState)(null),[state,setState]=(0,react.useState)("uninitialized");(0,react.useEffect)((()=>{async function ensureSampleRepo(dir,repoUrl){await async function isSuccessfullyCloned(dir){try{if(!(await fs.promises.stat(dir)).isDirectory())return console.info(`Already cloned repo was not found. "${dir}" is not a directory.`),!1;const files=await fs.promises.readdir(dir);if(1===files.length&&".git"===files[0])return console.info(`Already cloned repo was not found at "${dir}". ".git" folder exists, but it's not successfully unpacked.`),!1}catch(e){return console.info(`Already cloned repo was not found at "${dir}".`),!1}return!0}(dir)||(setState("cloning"),await cloneRepo({dir,url:repoUrl,onProgress:setCloneProgress}))}!async function init(){const initializer=window.INITIALIZE_APP??defaultInitializer;try{await initializer({fs,git:isomorphic_git.Ay,path:path_browserify_default(),projectDir:defaultProject.path}),autoCloneSampleRepo&&await ensureSampleRepo(autoClonedRepo_path,autoClonedRepo_url),console.log("demo repo initialized"),setState("initialized")}catch(e){console.error("could not initialize the demo repo",e),setState("error")}}()}),[]);const fraction=cloneProgress?.total?cloneProgress.loaded/cloneProgress.total:0;switch(state){case"uninitialized":return null;case"initialized":return react.createElement(react.Fragment,null,children);case"cloning":return react.createElement(InlinePopup,{minWidth:450},react.createElement(Popup.zD.Layout,{header:"Cloning sample git repository",content:react.createElement("div",{style:{padding:"1rem"}},react.createElement(ProgressBar.z2,{name:`Cloning repository ${autoClonedRepo_url}`,isIndeterminate:!cloneProgress,details:fraction?`${cloneProgress?.phase}: ${Math.round(100*fraction)}% ${cloneProgress?.loaded}/${cloneProgress?.total}`:cloneProgress?.phase,"aria-label":"Progress of cloning sample repo",value:cloneProgress?cloneProgress.loaded/cloneProgress.total:0,maxValue:1}))}));case"error":return react.createElement(AlertDialog.L,{type:"error",heading:"Something went wrong!",body:"Could not initialize example app",buttons:react.createElement(Button.$,{variant:"default",onPress:()=>{window.location.reload()}},"Reload")})}};ProjectInitializer.__docgenInfo={description:"",methods:[],displayName:"ProjectInitializer",props:{autoCloneSampleRepo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const exampleAppKeymap={ActivateProjectWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit1",modifiers:["Meta"]}}],ActivateCommitWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit0",modifiers:["Meta"]}}],ActivateVersionControlWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit9",modifiers:["Meta"]}}],ActivateTerminalWindow:[{type:"keyboard",firstKeyStroke:{code:"F12",modifiers:["Alt"]}}],[VcsActionIds.ROLLBACK]:[{type:"keyboard",firstKeyStroke:{code:"KeyZ",modifiers:["Alt","Meta"]}}],[VcsActionIds.SHOW_DIFF]:[{type:"keyboard",firstKeyStroke:{code:"KeyD",modifiers:["Meta"]}}],[VcsActionIds.SHELVE_SILENTLY]:[{type:"keyboard",firstKeyStroke:{code:"KeyH",modifiers:["Meta","Shift"]}}],[VcsActionIds.UNSHELVE_SILENTLY]:[{type:"keyboard",firstKeyStroke:{code:"KeyU",modifiers:["Meta","Alt"]}}],[VcsActionIds.GIT_PUSH]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyK"}}],[SearchEverywhereActionIds_PREVIOUS_TAB]:[{type:"keyboard",firstKeyStroke:{code:"Tab",modifiers:["Shift"]}}],[SearchEverywhereActionIds_NEXT_TAB]:[{type:"keyboard",firstKeyStroke:{code:"Tab"}}],[VcsActionIds.RENAME_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{code:"F2"}}],[VcsActionIds.MOVE_TO_ANOTHER_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyM"}}],[VcsActionIds.SET_DEFAULT_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{modifiers:["Control"],code:"Space"}}],[VcsActionIds.REMOVE_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{code:"Backspace"}}],[VcsActionIds.CHECKIN_PROJECT]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyK"}}],[VcsActionIds.ADD_UNVERSIONED]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"KeyA"}}],[VcsActionIds.FOCUS_TEXT_FILTER]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyL"}}],[VcsActionIds.GROUP_BY_DIRECTORY]:[{type:"keyboard",firstKeyStroke:{modifiers:["Control"],code:"KeyP"}}],SafeDelete:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"Backspace"}}],CopyPaths:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyC"}}],[AppActionIds_PASTE_MULTIPLE]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyV"}}],[projectActionIds.NewElement]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyN"}}],[AppActionIds_GENERATE]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyN"}}],[editorActionIds.EXPAND_REGION]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"NumpadAdd"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"Equal"}}],[editorActionIds.EXPAND_REGION_RECURSIVELY]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"NumpadAdd"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"Equal"}}],[editorActionIds.EXPAND_ALL_REGIONS]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"NumpadAdd"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"Equal"}}],...[1,2,3,4,5].reduce(((result,level)=>(result[editorActionIds[`EXPAND_ALL_TO_LEVEL${level}`]]=[{type:"keyboard",firstKeyStroke:{modifiers:["Alt","Meta"],code:"Multiply"},secondKeyStroke:{code:`Digit${level}`}},{type:"keyboard",firstKeyStroke:{modifiers:["Alt","Meta"],code:"Multiply"},secondKeyStroke:{code:`Numpad${level}`}}],result)),{}),[editorActionIds.COLLAPSE_REGION]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"Minus"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"NumpadSubtract"}}],[editorActionIds.COLLAPSE_REGION_RECURSIVELY]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"Minus"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"NumpadSubtract"}}],[editorActionIds.COLLAPSE_ALL_REGIONS]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"Minus"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"NumpadSubtract"}}]};var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("../../node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("../../node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),jetbrains_mono_font=__webpack_require__("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../example-app/src/jetbrains-mono-font.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(jetbrains_mono_font.A,options);jetbrains_mono_font.A&&jetbrains_mono_font.A.locals&&jetbrains_mono_font.A.locals;window.git=isomorphic_git.Ay,window.fs=fs,window.path=path_browserify,window.http=web.A;const StyledLoadingContainer=styled.I4.div`
  display: flex;
  align-items: center;
  justify-content: center;
  height: ${({$height})=>$height??"100vh"};
`,App=({height,autoCloneSampleRepo})=>react.createElement(react.Suspense,{fallback:react.createElement(StyledLoadingContainer,null,react.createElement(LoadingSpinner.kt,null))},react.createElement(WaitForFs,null,react.createElement(ProjectInitializer,{autoCloneSampleRepo},react.createElement(KeymapProvider.BB,{keymap:exampleAppKeymap},react.createElement(WindowManager,null,react.createElement(PopupManager.o,null,react.createElement(Project,{height})))))));App.__docgenInfo={description:"Example app root component. It expects ThemeProvider to be provided based on where it's rendered.",methods:[],displayName:"App",props:{height:{required:!1,tsType:{name:'CSSProperties["height"]',raw:'CSSProperties["height"]'},description:""},autoCloneSampleRepo:{required:!1,tsType:{name:"boolean"},description:""}}};const demo_stories={title:"Demos/Example App"},ExampleApp={render:()=>react.createElement(App,null),parameters:{layout:"fullscreen",controls:{exclude:story_helpers.E}}},__namedExportsOrder=["ExampleApp"];ExampleApp.parameters={...ExampleApp.parameters,docs:{...ExampleApp.parameters?.docs,source:{originalSource:'{\n  render: () => <App />,\n  parameters: {\n    layout: "fullscreen",\n    controls: {\n      exclude: styledComponentsControlsExclude\n    }\n  }\n}',...ExampleApp.parameters?.docs?.source}}}},"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../example-app/src/jetbrains-mono-font.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"@import url(https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@100..800&display=swap);"]),___CSS_LOADER_EXPORT___.push([module.id,"\n","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"../../node_modules/monaco-editor/esm/vs/base/common/worker lazy recursive ^.*$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./simpleWorker":"../../node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js","./simpleWorker.js":"../../node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js"};function webpackAsyncContext(req){return Promise.resolve().then((()=>{if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return __webpack_require__(map[req])}))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="../../node_modules/monaco-editor/esm/vs/base/common/worker lazy recursive ^.*$",module.exports=webpackAsyncContext},"../../node_modules/monaco-editor/esm/vs/editor/common/services lazy recursive ^.*$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./editorBaseApi":["../../node_modules/monaco-editor/esm/vs/editor/common/services/editorBaseApi.js"],"./editorBaseApi.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/editorBaseApi.js"],"./editorSimpleWorker":["../../node_modules/monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js"],"./editorSimpleWorker.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js"],"./editorWorker":["../../node_modules/monaco-editor/esm/vs/editor/common/services/editorWorker.js"],"./editorWorker.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/editorWorker.js"],"./editorWorkerHost":["../../node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerHost.js"],"./editorWorkerHost.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerHost.js"],"./findSectionHeaders":["../../node_modules/monaco-editor/esm/vs/editor/common/services/findSectionHeaders.js"],"./findSectionHeaders.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/findSectionHeaders.js"],"./getIconClasses":["../../node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js"],"./getIconClasses.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js"],"./languageFeatureDebounce":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js"],"./languageFeatureDebounce.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js"],"./languageFeatures":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatures.js"],"./languageFeatures.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatures.js"],"./languageFeaturesService":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js"],"./languageFeaturesService.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js"],"./languageService":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languageService.js"],"./languageService.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languageService.js"],"./languagesAssociations":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languagesAssociations.js"],"./languagesAssociations.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languagesAssociations.js"],"./languagesRegistry":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languagesRegistry.js"],"./languagesRegistry.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/languagesRegistry.js"],"./markerDecorations":["../../node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorations.js"],"./markerDecorations.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorations.js"],"./markerDecorationsService":["../../node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js"],"./markerDecorationsService.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js"],"./model":["../../node_modules/monaco-editor/esm/vs/editor/common/services/model.js"],"./model.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/model.js"],"./modelService":["../../node_modules/monaco-editor/esm/vs/editor/common/services/modelService.js"],"./modelService.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/modelService.js"],"./resolverService":["../../node_modules/monaco-editor/esm/vs/editor/common/services/resolverService.js"],"./resolverService.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/resolverService.js"],"./semanticTokensDto":["../../node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js"],"./semanticTokensDto.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js"],"./semanticTokensProviderStyling":["../../node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling.js"],"./semanticTokensProviderStyling.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling.js"],"./semanticTokensStyling":["../../node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js"],"./semanticTokensStyling.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js"],"./semanticTokensStylingService":["../../node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js"],"./semanticTokensStylingService.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js"],"./textModelSync/textModelSync.impl":["../../node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl.js"],"./textModelSync/textModelSync.impl.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl.js"],"./textModelSync/textModelSync.protocol":["../../node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol.js",7619],"./textModelSync/textModelSync.protocol.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol.js",7619],"./textResourceConfiguration":["../../node_modules/monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js"],"./textResourceConfiguration.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js"],"./treeSitterParserService":["../../node_modules/monaco-editor/esm/vs/editor/common/services/treeSitterParserService.js"],"./treeSitterParserService.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/treeSitterParserService.js"],"./treeViewsDnd":["../../node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js"],"./treeViewsDnd.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js"],"./treeViewsDndService":["../../node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js"],"./treeViewsDndService.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js"],"./unicodeTextModelHighlighter":["../../node_modules/monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js"],"./unicodeTextModelHighlighter.js":["../../node_modules/monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js"]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return Promise.all(ids.slice(1).map(__webpack_require__.e)).then((()=>__webpack_require__(id)))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="../../node_modules/monaco-editor/esm/vs/editor/common/services lazy recursive ^.*$",module.exports=webpackAsyncContext},"./src/AlertDialog/AlertDialog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>AlertDialog});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_ModalWindow__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/ModalWindow/ModalWindow.tsx"),_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/Overlay/OverlayMoveHandle.tsx"),_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/Icon/PlatformIcon.tsx"),_intellij_platform_core_ButtonGroup__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/ButtonGroup/ButtonGroup.tsx"),_intellij_platform_core_utils_interaction_utils_useMove__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/utils/interaction-utils/useMove.tsx");const StyledModalWindow=(0,_styled__WEBPACK_IMPORTED_MODULE_1__.I4)(_intellij_platform_core_ModalWindow__WEBPACK_IMPORTED_MODULE_2__.QI)`
  ${_intellij_platform_core_ModalWindow__WEBPACK_IMPORTED_MODULE_2__.HV} {
    border-radius: 0;
    outline: 0.5px solid rgba(0, 0, 0, 0.85); // FIXME
  }
`,StyledContainer=_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  padding: 1.25rem;
  display: grid;
  grid-template-columns: auto 1fr;
  grid-template-rows: auto auto;
  align-items: center;
  gap: 0.875rem;
`,StyledHeading=_styled__WEBPACK_IMPORTED_MODULE_1__.I4.h2`
  margin: 0;
  font-size: 0.875rem;
  line-height: 1.25rem;
  font-weight: bold;
`,StyledBody=_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  line-height: 1.2;
`,StyledContent=_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  cursor: default;
`,StyledCheckbox=_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  padding: 0.375rem 0;
  // to align the checkbox with the content, since the box has a padding. Maybe Checkbox should not have any padding.
  margin-left: -0.25rem;
`,StyledButtons=(0,_styled__WEBPACK_IMPORTED_MODULE_1__.I4)(_intellij_platform_core_ButtonGroup__WEBPACK_IMPORTED_MODULE_3__.e)`
  display: flex;
  justify-self: end;
  gap: 1rem;
`,StyledIcon=_styled__WEBPACK_IMPORTED_MODULE_1__.I4.span`
  align-self: start;
`,StyledHelpIcon=_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  justify-self: center;
`,AlertDialog=({type="question",heading,body,checkbox,helpButton,buttons,minWidth=370,...otherProps})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledModalWindow,{role:"alertdialog",interactions:"move",minWidth,defaultBounds:{top:window.innerHeight/4},observeContentResize:!0,...otherProps},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_4__.I,{dragThreshold:6,canMoveStart:_intellij_platform_core_utils_interaction_utils_useMove__WEBPACK_IMPORTED_MODULE_5__.o},(({moveHandleProps})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledContainer,moveHandleProps,react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledIcon,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_6__.jE,{size:32,icon:`general/${type}Dialog`})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledContent,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledHeading,null,heading),react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledBody,null,body),checkbox&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledCheckbox,null,checkbox)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledHelpIcon,null,helpButton),react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledButtons,null,buttons)))));AlertDialog.__docgenInfo={description:"A modal dialog implementing [Alert](https://jetbrains.github.io/ui/controls/alert), which is the\n[notification](https://jetbrains.github.io/ui/controls/notifications/) pattern for use cases where\nimmediate user action is required.\nSince the use cases are quite specific, and the component is expected to be used with pretty specific\ncontent items, the layout is not implemented as a separate component, the way it is in components like\n{@link ModalWindow} or {@link Menu}",methods:[],displayName:"AlertDialog",props:{heading:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Content slot for the heading, aka. title of the dialog. Typically plain text."},body:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Content slot for the body, aka. message of the dialog. Typically plain text."},checkbox:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:'Content slot for the checkbox ("Do not ask again").\n@example\n```jsx\n<AlertDialog checkbox={<Checkbox>Do not ask again</Checkbox>} />\n```\n@see Checkbox'},type:{required:!1,tsType:{name:"union",raw:'"error" | "warning" | "information" | "question"',elements:[{name:"literal",value:'"error"'},{name:"literal",value:'"warning"'},{name:"literal",value:'"information"'},{name:"literal",value:'"question"'}]},description:"Type of the alert dialog. The icon is set based on type.",defaultValue:{value:'"question"',computed:!1}},buttons:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:'Content slot for buttons.\n@example\n```jsx\n<AlertDialog\n  buttons={\n    <>\n      <Button>Cancel</Button>\n      <Button variant="default">Ok</Button>\n    </>\n  }\n/>\n```\n@see Button'},helpButton:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:'Content slot for help icon button in the footer.\n@example\n```jsx\n<AlertDialog\n  helpButton={\n    <TooltipTrigger tooltip={<HelpTooltip helpText="Show Help Contents" />}>\n      <Button variant="icon">\n        <PlatformIcon icon="actions/help"></PlatformIcon>\n      </Button>\n    </TooltipTrigger>\n  }\n/>\n```\n@see Button'},minWidth:{defaultValue:{value:"370",computed:!1},required:!1}},composes:["Pick"]}},"./src/Balloon/Balloon.styled.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F_:()=>StyledBalloonBody,G3:()=>StyledIconContainer,SA:()=>StyledToggleExpandButtonFooterContainer,UL:()=>StyledBalloonContainer,gQ:()=>StyledBalloonFooter,hA:()=>StyledToggleExpandButtonContainer,m4:()=>StyledBalloonHeader,oM:()=>StyledToggleIconContainer,q1:()=>StyledHeaderActions});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/styled.ts");const bgColor=({theme})=>theme.color("Notification.background",theme.dark?"#4E5052":"rgb(242,242,242)"),StyledHeaderActions=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.I4.div`
  position: absolute;
  right: 0;
  top: 0;
  background: inherit;
  padding: 0.375rem 0.5rem 0;
  &::before {
    content: "";
    position: absolute;
    right: 100%;
    background: linear-gradient(90deg, transparent, ${bgColor});
    width: 20px;
    height: 100%;
    z-index: 1;
    top: 0;
  }
`,StyledBalloonContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.I4.div`
  line-height: 1.2;
  box-sizing: border-box;
  overflow: hidden; // header actions overflows a little at the top right rounded corner
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); // shadow doesn't seem to be themed
  padding: 0.5rem 0;
  border: 1px solid
    ${({theme})=>theme.color("Notification.borderColor",theme.dark?"#565A5CCD":"#B2B2B2CD")};
  border-radius: ${({theme})=>(theme.value("Notification.arc")??12)/2+"px"};
  //display: inline-flex;
  width: 23.3125rem;
  position: relative;
  background-color: ${bgColor};
  color: ${({theme})=>theme.color("Notification.foreground",theme.dark?"rgb(191,191,191)":"#000")};

  ${StyledHeaderActions} {
    display: none;
  }
  &:hover ${StyledHeaderActions} {
    display: initial;
  }
`,StyledIconContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.I4.span`
  position: absolute;
  left: 0.75rem;
  top: 0.5rem;
`,StyledBalloonHeader=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.I4.div`
  line-height: 1rem;
  font-weight: bold;
  margin: 0 2.125rem 0.25rem;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis; // this is not the case in original impl, but it's a clear improvement
`,StyledBalloonBody=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.I4.div`
  margin: 0 2.125rem 0 2.125rem;
  line-height: 1rem;
  display: inline;
  -webkit-line-clamp: ${({lineClamp})=>lineClamp};
  word-break: ${({lineClamp})=>1===lineClamp&&"break-all"};
  text-overflow: ellipsis;
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  word-wrap: break-word;
`,StyledBalloonFooter=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.I4.div`
  margin: 0.375rem 1.875rem 0 2.125rem;
  display: inline-flex;
  white-space: nowrap;
  overflow: hidden;
  gap: 1rem;

  // could be -webkit-fill-available too, if it has good support. Probably it doesn't tho
  max-width: calc(100% - 3.5rem);
`,StyledToggleIconContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.I4.span`
  display: inline-flex;
  position: absolute;
  right: 0.5rem;
  bottom: 0;
  background-color: ${bgColor};
  padding-left: 0.5rem;
`,StyledToggleExpandButtonContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.I4.span`
  display: block;
  position: relative; // for icon absolute positioning
  cursor: pointer;
  flex: 1;
`,StyledToggleExpandButtonFooterContainer=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.I4)(StyledToggleExpandButtonContainer)`
  min-height: 1.5rem;
  margin: -0.5rem 0;
  position: relative;
  z-index: 1;
  ${StyledToggleIconContainer} {
    bottom: 0.5rem;
  }
  ${StyledBalloonFooter} {
    margin-top: 0.875rem;
    margin-bottom: 0.5rem;
  }
  ${StyledBalloonFooter}:hover + * .icon[data-hover] {
    display: none;
  }
  ${StyledBalloonFooter}:hover + * .icon {
    display: unset;
  }
`},"./src/Balloon/Balloon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>Balloon,o:()=>BalloonActionLink});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Icon/PlatformIcon.tsx"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/Icon/AutoHoverPlatformIcon.tsx"),_react_stately_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-stately/utils/dist/useControlledState.mjs"),_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/Balloon/Balloon.styled.tsx"),_intellij_platform_core_Link__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Link/Link.tsx");const BalloonContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(null),BalloonActionLink=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((({onPress,...props},ref)=>{const context=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(BalloonContext);if(null===context)throw new Error("BalloonActionLink should only be rendered inside Balloon notifications");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Link__WEBPACK_IMPORTED_MODULE_1__.N,{ref,...props,onPress:(...args)=>(context?.onClose?.(),onPress?.(...args))})})),Balloon=({icon:iconProp="Info",expanded:expandedProp,defaultExpanded=!1,onExpandedChange,title,headerActions,onClose,body,actions,...containerProps})=>{const bodyRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[expandable,setExpandable]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[expanded,setExpanded]=(0,_react_stately_utils__WEBPACK_IMPORTED_MODULE_2__.P)(expandedProp,defaultExpanded,onExpandedChange),maxLinesWhenNotExpanded=1+(title?0:1)+(actions?0:1);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const bodyElem=bodyRef.current;setExpandable(!!bodyElem&&(expanded?function getNumLines(bodyElem){return bodyElem.clientHeight/parseFloat(getComputedStyle(bodyElem).lineHeight)}(bodyElem)>maxLinesWhenNotExpanded:bodyElem.scrollHeight>bodyElem.clientHeight))}),[expanded]);const icon="string"==typeof iconProp?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_3__.jE,{icon:`general/notification${["Error","Warning","Info"].find(((iconType,index,arr)=>iconType===iconProp||index===arr.length-1))}.svg`}):iconProp,toggle=()=>setExpanded((expanded=>!expanded)),effectiveExpanded=expanded&&Boolean(body);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(BalloonContext.Provider,{value:{onClose}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_4__.UL,{"data-testid":"balloon",...containerProps},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_4__.G3,null,icon),title&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_4__.m4,null,title),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_4__.q1,null,headerActions,onClose&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_5__.i,{icon:"ide/notification/close.svg",onClick:onClose,role:"button","data-testid":"close-btn",style:{marginLeft:"0.75rem"}})),body&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(ToggleWrapper,{expanded:effectiveExpanded,enabled:expandable&&!effectiveExpanded,onToggle:toggle},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_4__.F_,{lineClamp:!effectiveExpanded&&maxLinesWhenNotExpanded,ref:bodyRef},body)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(ToggleWrapper,{expanded:effectiveExpanded,enabled:expandable&&effectiveExpanded,onToggle:toggle,Component:_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_4__.SA},actions&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_4__.gQ,{onClick:e=>e.stopPropagation()},actions))))},ToggleWrapper=({children,onToggle,expanded,enabled,Component=_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_4__.hA})=>{const iconName=expanded?"collapse":"expand",toggleIcon=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Balloon_Balloon_styled__WEBPACK_IMPORTED_MODULE_4__.oM,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_5__.i,{hoverContainerSelector:`${Component}`,icon:`ide/notification/${iconName}.svg`,className:"icon"}));return enabled?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,{onClick:onToggle,role:"button","data-testid":(expanded?"collapse":"expand")+"-btn"},children,toggleIcon):react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,children)};BalloonActionLink.__docgenInfo={description:"A tiny wrapper around {@link Link} component, to be used for actions in Balloon.\nIt closes the balloon when pressed.",methods:[],displayName:"BalloonActionLink"},Balloon.__docgenInfo={description:'[Balloon notification](https://jetbrains.github.io/ui/controls/balloon/) UI.\n\nNotes and TODO:\n- Add support for "error" variant: https://github.com/JetBrains/intellij-community/blob/48c024fcd38bd8d1eccdada05489a8952a494270/platform/platform-impl/src/com/intellij/diagnostic/IdeMessagePanel.java#L215\n- Add support for timeout. Although if the auto close behaviour is only timeout-based, maybe there is not much value in adding a prop for it and calling onClose on timeout.\n- BalloonActions component to be used for rendering a bunch of links in the actions. It should encapsulate the\n  behaviour of moving actions into a menu when there is not enough room.',methods:[],displayName:"Balloon",props:{icon:{required:!1,tsType:{name:"union",raw:'"Info" | "Warning" | "Error" | React.ReactElement<IconProps>',elements:[{name:"literal",value:'"Info"'},{name:"literal",value:'"Warning"'},{name:"literal",value:'"Error"'},{name:"ReactReactElement",raw:"React.ReactElement<IconProps>",elements:[{name:"IconProps"}]}]},description:"Icon rendered in the top left",defaultValue:{value:'"Info"',computed:!1}},headerActions:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:'Rendered beside close button. Can be used for rendering a "notification settings" icon button.'},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Called when the close button is clicked. If not passed, close button will not be rendered."},actions:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Actions rendered in the footer."},defaultExpanded:{defaultValue:{value:"false",computed:!1},required:!1}}}},"./src/Balloon/BalloonManager.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>BalloonManager,c:()=>useBalloonManager});var react=__webpack_require__("../../node_modules/react/index.js"),react_dom=__webpack_require__("../../node_modules/react-dom/index.js"),Balloon=__webpack_require__("./src/Balloon/Balloon.tsx"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Balloon_styled=__webpack_require__("./src/Balloon/Balloon.styled.tsx");const StyledBalloonsStack=styled_components_browser_esm.Ay.div`
  position: fixed;
  z-index: 1;
  bottom: 42px;
  right: 26px;
  ${Balloon_styled.UL} {
    margin-bottom: 12px;
  }
`,NotImplementedFn=()=>{throw new Error("You must render a BalloonManager...")},BalloonsContext=react.createContext({show:NotImplementedFn,showSticky:NotImplementedFn}),useBalloonManager=()=>(0,react.useContext)(BalloonsContext),BalloonManager=({children,disablePortal,BalloonsContainer=StyledBalloonsStack})=>{const[balloons,setBalloons]=(0,react.useState)([]),timeoutIdsRef=(0,react.useRef)([]),lastIdRef=(0,react.useRef)(0),api=(0,react.useMemo)((()=>{const show=(props,timeout=1e4)=>{lastIdRef.current++;const onClose=()=>{setBalloons((balloons=>balloons.filter((aBalloon=>aBalloon!==balloon))))},balloon=react.createElement(Balloon.O,{key:lastIdRef.current,...props,title:props.title,onClose});return setBalloons((balloons=>{if(timeout>0){const timeoutId=window.setTimeout((()=>{onClose(),timeoutIdsRef.current=timeoutIdsRef.current.filter((aTimeoutId=>aTimeoutId!==timeoutId))}),timeout);timeoutIdsRef.current=[...timeoutIdsRef.current,timeoutId]}return balloons.concat(balloon)})),onClose};return{show,showSticky:props=>show(props,0)}}),[]);(0,react.useEffect)((()=>()=>{timeoutIdsRef.current.forEach((id=>{window.clearTimeout(id)}))}),[]);const notificationsStack=react.createElement(BalloonsContainer,{style:{position:disablePortal?"absolute":void 0}},balloons);return react.createElement(BalloonsContext.Provider,{value:api},children,disablePortal?notificationsStack:react_dom.createPortal(notificationsStack,document.body))};BalloonManager.__docgenInfo={description:"Enables imperative API (via {@link useBalloonManager}) for showing Balloon notifications on the bottom right of the screen.\nIt renders notifications in a portal appended to `body`, unless `disablePortal` is `true`.\n\n@param disablePortal: if `true`, the container for notifications will not be rendered in a portal\n@param BalloonsContainer: container component for the notifications. It's {@link StyledBalloonsStack} by default.\n\nTODO: fade in/out transition. Notes:\n - Doesn't seem fade-in is needed. Tho it's much easier than fade-out, as it can be achieved with a css animation.\n - Fade out should happen only when the balloon is being hidden by timeout.\nTODO: Support for maximum number of notifications and showing \"x more notification(s)\" button if the limit exceeds",methods:[],displayName:"BalloonManager",props:{disablePortal:{required:!1,tsType:{name:"boolean"},description:""},BalloonsContainer:{required:!1,tsType:{name:"ReactElementType",raw:"React.ElementType"},description:"",defaultValue:{value:"styled.div`\n  position: fixed;\n  z-index: 1;\n  bottom: 42px;\n  right: 26px;\n  ${StyledBalloonContainer} {\n    margin-bottom: 12px;\n  }\n`",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}},"./src/Collections/ItemLayout.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>ItemLayout});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Menu_ContextMenuContainer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Menu/ContextMenuContainer.tsx");const StyledItemLayout=_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  display: flex;
  align-items: center;
  padding-right: 0.25rem;
  gap: ${"0.1875rem"};
`,StyledHint=_styled__WEBPACK_IMPORTED_MODULE_1__.I4.span`
  display: inline-flex;
  color: ${({theme})=>theme.currentForegroundAware(theme.commonColors.inactiveTextColor)};
  padding-left: 0.1rem;
  font-size: ${({small})=>small&&"0.9em"};
`,StyledGroup=_styled__WEBPACK_IMPORTED_MODULE_1__.I4.span.attrs({role:"presentation"})`
  display: inline-flex;
  display: flex;
  align-items: center;
  gap: ${"0.1875rem"};
`,ItemLayout=props=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledItemLayout,{[_intellij_platform_core_Menu_ContextMenuContainer__WEBPACK_IMPORTED_MODULE_2__.w]:!0,...props});ItemLayout.Hint=StyledHint,ItemLayout.Group=StyledGroup,ItemLayout.__docgenInfo={description:'Generic layout component capturing common use cases of tree or list items.\nIt handles the spacing between parts, and provides styled components for parts that need specific styling.\nFor more flexibility over the order of various pieces of content in list/tree items, there is no specific props\nfor parts. Different parts should just be rendered in children.\n\n@example\n```tsx\n<ItemLayout>\n  <PlatformIcon icon="nodes/folder" />\n  <HighlightedTextValue />\n  <ItemLayout.Hint>~/workspace/jui</ItemLayout.Hint>\n</ItemLayout>\n```\n@beta',methods:[],displayName:"ItemLayout",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}},"./src/Dropdown/ComboBox.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>ComboBox});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_react_aria_combobox__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/combobox/dist/useComboBox.mjs"),_react_stately_combobox__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-stately/combobox/dist/useComboBoxState.mjs"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Button__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/Button/BareButton.tsx"),_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/Overlay/Popover.tsx"),_StatelessListBox__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/Dropdown/StatelessListBox.tsx"),_StyledContainer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Dropdown/StyledContainer.tsx"),_Field_Label__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/Field/Label.tsx"),_StyledDropdownArrowIcon__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/Dropdown/StyledDropdownArrowIcon.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/Tooltip/PositionedTooltipTrigger.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/Tooltip/ValidationTooltip.tsx"),_intellij_platform_core_Field_ContextHelp__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/Field/ContextHelp.tsx");const StyledComboBoxContainer=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4)(_StyledContainer__WEBPACK_IMPORTED_MODULE_2__.r)`
  padding: 0;
  color: ${({theme,disabled})=>disabled?theme.color("TextField.disabledForeground"):theme.color("TextField.foreground")};
`,StyledComboBoxInput=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4.input`
  flex: 1;
  background: none;
  border: none;
  outline: none;
  color: inherit;
  padding: ${({theme})=>theme.inset("ComboBox.padding")??"1px 6px 1px 6px"};
  height: 100%;
`,StyledDropdownButton=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4.button`
  // Resetting default styles
  appearance: none;
  border: none;
  background: ${({theme})=>theme.color("ComboBox.ArrowButton.background")};
  outline: none;
  font: inherit;
  padding: 0;

  // Custom styles
  border-left: 1px solid ${({theme})=>theme.commonColors.border()};
  height: 100%;
  aspect-ratio: 1;
  /**
   * In the reference impl, the clickable area exceeds the left border by a
   * few pixels. The following trick implements that
   */
  position: relative;
  ::before {
    content: "";
    position: absolute;
    left: -4px;
    top: 0;
    bottom: 0;
    width: 4px;
  }
`,ComboBox=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((({labelPlacement,style,className,value,defaultValue,onValueChange,validationState,validationMessage,contextHelp,contextHelpPlacement,inputProps,inputRef:inputRefProp,...props},forwardedRef)=>{const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__.U)(forwardedRef),buttonRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),inputRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__.U)(inputRefProp),dropdownContainerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),popoverRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),listBoxRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),isInvalid=Boolean(validationState)&&"valid"!==validationState,state=(0,_react_stately_combobox__WEBPACK_IMPORTED_MODULE_4__.k)({menuTrigger:"manual",allowsCustomValue:!0,inputValue:value,defaultInputValue:defaultValue,onInputChange:onValueChange,isInvalid,...props}),{descriptionProps,errorMessageProps,labelProps,inputProps:comboboxInputProps,listBoxProps,buttonProps}=(0,_react_aria_combobox__WEBPACK_IMPORTED_MODULE_5__.r)({...props,allowsCustomValue:!0,buttonRef,inputRef,popoverRef,listBoxRef},state),minWidth=dropdownContainerRef.current?dropdownContainerRef.current?.offsetWidth+2:void 0;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Field_Label__WEBPACK_IMPORTED_MODULE_6__.v,{ref,isDisabled:props.isDisabled,label:props.label,labelPlacement,labelProps,className,style},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Field_ContextHelp__WEBPACK_IMPORTED_MODULE_7__.a,{contextHelp,contextHelpPlacement,descriptionProps},react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledComboBoxContainer,{ref:dropdownContainerRef,validationState,disabled:props.isDisabled,className:state.isFocused?"is-focus":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_8__.O,{placement:"top",showOnFocus:!0,isDisabled:!validationMessage,triggerRef:inputRef,tooltip:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_9__.B,{type:"valid"!==validationState?validationState:void 0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",errorMessageProps,validationMessage)),delay:0},(tooltipTriggerProps=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledComboBoxInput,(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_10__.v)(comboboxInputProps,inputProps,tooltipTriggerProps)))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Button__WEBPACK_IMPORTED_MODULE_11__.l,{...buttonProps,ref:buttonRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledDropdownButton,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledDropdownArrowIcon__WEBPACK_IMPORTED_MODULE_12__.d,{disabled:props.isDisabled,size:20,icon:"general/arrowDown.svg"})))))),state.isOpen&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_13__.A,{ref:popoverRef,state,triggerRef:dropdownContainerRef,placement:"bottom start",containerPadding:0,offset:2,crossOffset:-1},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StatelessListBox__WEBPACK_IMPORTED_MODULE_14__.O,{...listBoxProps,ref:listBoxRef,state,style:{minWidth}})))}));ComboBox.__docgenInfo={description:"[Combobox](https://plugins.jetbrains.com/docs/intellij/combo-box.html) implementation.\nKnown differences with the reference impl:\n- selected key doesn't focus when opened the dropdown manually.\n  Opening the dropdown by pressing ArrowDown does focus the previously selected item.",methods:[],displayName:"ComboBox",props:{contextHelp:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Context help, shown below the input.\nA typical use case is\n[to provide example values](https://jetbrains.github.io/ui/principles/context_help/#07)."},contextHelpPlacement:{required:!1,tsType:{name:"union",raw:'"below" | "after"',elements:[{name:"literal",value:'"below"'},{name:"literal",value:'"after"'}]},description:"Placement of the contextHelp text with respect to the control.\nSee more: https://plugins.jetbrains.com/docs/intellij/inline-help-text.html#placement"},labelPlacement:{required:!1,tsType:{name:"union",raw:'"above" | "before"',elements:[{name:"literal",value:'"above"'},{name:"literal",value:'"before"'}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},validationState:{required:!1,tsType:{name:"union",raw:'"valid" | "error" | "warning"',elements:[{name:"literal",value:'"valid"'},{name:"literal",value:'"error"'},{name:"literal",value:'"warning"'}]},description:""},validationMessage:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Validation message shown as a {@link ValidationTooltip} above the component.\n{@link ValidationTooltipProps#type} is defined based on `validationState`."},inputProps:{required:!1,tsType:{name:"Omit",elements:[{name:"HTMLProps",elements:[{name:"HTMLInputElement"}],raw:"HTMLProps<HTMLInputElement>"},{name:"union",raw:'"value" | "defaultValue" | "as"',elements:[{name:"literal",value:'"value"'},{name:"literal",value:'"defaultValue"'},{name:"literal",value:'"as"'}]}],raw:'Omit<\n  HTMLProps<HTMLInputElement>,\n  "value" | "defaultValue" | "as"\n>'},description:"props to apply on input, excluding value that's controlled by the component"},inputRef:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:""}},composes:["Pick"]}},"./src/Dropdown/Dropdown.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>Dropdown});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_select__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/select/dist/useSelect.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_stately_select__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-stately/select/dist/useSelectState.mjs"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Button__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/Button/BareButton.tsx"),_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/Overlay/Popover.tsx"),_Field_ContextHelp__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/Field/ContextHelp.tsx"),_StatelessListBox__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/Dropdown/StatelessListBox.tsx"),_StyledContainer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Dropdown/StyledContainer.tsx"),_Field_Label__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/Field/Label.tsx"),_StyledDropdownArrowIcon__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/Dropdown/StyledDropdownArrowIcon.tsx");const StyledDropdownContainer=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4)(_StyledContainer__WEBPACK_IMPORTED_MODULE_2__.r)`
  background: ${({theme})=>theme.color("ComboBox.nonEditableBackground")};
`,StyledDropdownValue=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4.span`
  flex: 1;
  text-align: initial;
  white-space: nowrap;
  margin-right: 5px;
`,Dropdown=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((({labelPlacement,style,className,validationState,contextHelp,contextHelpPlacement,...props},forwardedRef)=>{const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__.U)(forwardedRef),state=(0,_react_stately_select__WEBPACK_IMPORTED_MODULE_4__.n)(props),{menuProps,labelProps,triggerProps,valueProps,descriptionProps}=(0,_react_aria_select__WEBPACK_IMPORTED_MODULE_5__.W)({...props,isInvalid:validationState&&"valid"!==validationState},state,ref),minWidth=ref.current?ref.current?.offsetWidth+2:void 0;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Field_Label__WEBPACK_IMPORTED_MODULE_6__.v,{label:props.label,labelPlacement,labelProps,isDisabled:props.isDisabled,className,style},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Field_ContextHelp__WEBPACK_IMPORTED_MODULE_7__.a,{contextHelp,contextHelpPlacement,descriptionProps},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Button__WEBPACK_IMPORTED_MODULE_8__.l,{...triggerProps,autoFocus:props.autoFocus,ref},react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledDropdownContainer,{as:"button",validationState,className:state.isOpen?"is-focus":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledDropdownValue,valueProps,state.selectedItem?.rendered),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledDropdownArrowIcon__WEBPACK_IMPORTED_MODULE_9__.d,{disabled:props.isDisabled,size:20,icon:"general/arrowDown.svg"})))),state.isOpen&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_10__.A,{state,triggerRef:ref,placement:"bottom start",containerPadding:0,offset:2,crossOffset:-1},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StatelessListBox__WEBPACK_IMPORTED_MODULE_11__.O,{...menuProps,state,style:{minWidth}})))}));Dropdown.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{contextHelp:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Context help, shown below the input.\nA typical use case is\n[to provide example values](https://jetbrains.github.io/ui/principles/context_help/#07)."},contextHelpPlacement:{required:!1,tsType:{name:"union",raw:'"below" | "after"',elements:[{name:"literal",value:'"below"'},{name:"literal",value:'"after"'}]},description:"Placement of the contextHelp text with respect to the control.\nSee more: https://plugins.jetbrains.com/docs/intellij/inline-help-text.html#placement"},labelPlacement:{required:!1,tsType:{name:"union",raw:'"above" | "before"',elements:[{name:"literal",value:'"above"'},{name:"literal",value:'"before"'}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},validationState:{required:!1,tsType:{name:"union",raw:'"valid" | "error" | "warning"',elements:[{name:"literal",value:'"valid"'},{name:"literal",value:'"error"'},{name:"literal",value:'"warning"'}]},description:""}},composes:["Omit"]}},"./src/Dropdown/StatelessListBox.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>StatelessListBox});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_listbox__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-aria/listbox/dist/useListBox.mjs"),_react_aria_listbox__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/listbox/dist/useOption.mjs"),_react_aria_listbox__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/@react-aria/listbox/dist/useListBoxSection.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_intellij_platform_core_Collections__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Collections/useCollectionFocusProxy.ts"),_intellij_platform_core_Collections__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/Collections/ItemStateContext.tsx"),_intellij_platform_core_List_StyledListItem__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/List/StyledListItem.tsx"),_intellij_platform_core_List_StyledList__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/List/StyledList.tsx"),_intellij_platform_core_StyledSeparator__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/StyledSeparator.tsx"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/styled.ts");const StatelessListBox=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function StatelessListBox({state,style,className,focusProxyRef,...props},forwardedRef){const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.U)(forwardedRef),{listBoxProps,labelProps}=(0,_react_aria_listbox__WEBPACK_IMPORTED_MODULE_2__.X)(props,state,ref);return(0,_intellij_platform_core_Collections__WEBPACK_IMPORTED_MODULE_3__.w)({state,collectionRef:ref,focusProxyRef,onAction:props.onAction}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",labelProps,props.label),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_List_StyledList__WEBPACK_IMPORTED_MODULE_4__.K,{...listBoxProps,ref,style,className},[...state.collection].map((item=>"section"===item.type?react__WEBPACK_IMPORTED_MODULE_0__.createElement(ListBoxSection,{key:item.key,section:item,state}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(Option,{key:item.key,item,state})))))}));function Option({item,state}){const ref=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),{optionProps}=(0,_react_aria_listbox__WEBPACK_IMPORTED_MODULE_5__.x)({key:item.key},state,ref),isDisabled=state.disabledKeys.has(item.key),isSelected=state.selectionManager.focusedKey===item.key;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Collections__WEBPACK_IMPORTED_MODULE_6__.k.Provider,{value:{isDisabled,isContainerFocused:state.selectionManager.isFocused,isSelected,node:item}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_List_StyledListItem__WEBPACK_IMPORTED_MODULE_7__.H,{...optionProps,ref,disabled:isDisabled,selected:isSelected,containerFocused:!0},item.rendered))}const StyledSectionHeading=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_8__.I4.div`
  font-size: 0.6875rem;
  padding: 0 0.5rem;
  color: ${({theme})=>theme.commonColors.inactiveTextColor}; // not verified
`,StyledSection=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_8__.I4.div`
  padding: 0;
  margin: 0;
  list-style: none;
`;function ListBoxSection({section,state}){let{itemProps,headingProps,groupProps}=(0,_react_aria_listbox__WEBPACK_IMPORTED_MODULE_9__.u)({heading:section.rendered,"aria-label":section["aria-label"]});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,section.key!==state.collection.getFirstKey()&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_StyledSeparator__WEBPACK_IMPORTED_MODULE_10__.tj,{role:"presentation"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",itemProps,section.rendered&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledSectionHeading,headingProps,section.rendered),react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledSection,groupProps,[...state.collection.getChildren?.(section.key)??section.childNodes].map((node=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Option,{key:node.key,item:node,state}))))))}StatelessListBox.__docgenInfo={description:"",methods:[],displayName:"StatelessListBox",props:{focusProxyRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"HTMLElement"}],raw:"RefObject<HTMLElement>"},description:"ref to an element (typically HTMLInputElement) that should act as a focus\nproxy that handles ArrowUp, ArrowDown, and Enter keys to allow for\nnavigating the collection and selecting items.\nUseful for implementing\nautocompletion or search input connected to a collection element."},state:{required:!0,tsType:{name:"ListState",elements:[{name:"T"}],raw:"ListState<T>"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["AriaListBoxOptions"]}},"./src/Dropdown/StyledContainer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>StyledContainer});const StyledContainer=__webpack_require__("./src/styled.ts").I4.div`
  box-sizing: border-box;
  display: flex;
  width: 100%;
  align-items: center;
  height: 1.5rem;
  background: ${({theme,disabled})=>disabled?theme.color("ComboBox.disabledBackground"):theme.color("ComboBox.background")};
  color: ${({theme,disabled})=>disabled?theme.color("ComboBox.disabledForeground"):theme.color("ComboBox.foreground")};
  border: 1px solid
    ${({theme,disabled,validationState})=>theme.commonColors.border({disabled,validationState})};
  // The focus style is applied unconditionally in the reference impl, so no use of focus-visible or js-based focus visible detection

  box-shadow: 0 0 0 0.125rem
    ${({theme,validationState})=>theme.commonColors.focusRing({validationState,focused:!1})};
  &:focus,
  &.is-focus {
    border-color: ${({theme,validationState})=>theme.commonColors.border({focused:!0,validationState})};
    outline: none;
    box-shadow: 0 0 0 0.125rem
      ${({theme,validationState})=>theme.commonColors.focusRing({validationState,focused:!0})};
  }

  border-radius: ${({theme})=>theme.borderRadius.default}px;
`},"./src/Dropdown/StyledDropdownArrowIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>StyledDropdownArrowIcon});var _intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Icon/PlatformIcon.tsx");const StyledDropdownArrowIcon=(0,__webpack_require__("./src/styled.ts").I4)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_1__.jE).attrs({"aria-hidden":"true"})`
  // NOTE: "ArrowButton.nonEditableBackground" theme key is used in the reference impl, but it doesn't seem necessary to allow
  // for a separate arrow background in Dropdown (aka non-editable combobox), since the arrow is not really a
  // separate button, but a visual indicator for the whole trigger. Also there is no mention of it in designs
  // There is also separate theme properties for color and disabled color, but inheriting it (via currentColor)
  // makes more sense

  * {
    fill: ${({theme,disabled})=>disabled?theme.color("ComboBox.ArrowButton.disabledIconColor"):theme.color("ComboBox.ArrowButton.iconColor")};
  }
`},"./src/Field/ContextHelp.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>WithInlineContextHelp});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js");const StyledContextHelp=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  color: ${({theme})=>theme.commonColors.contextHelpForeground};
`,StyledContextHelpWrapper=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  font-size: 0.75rem; // 12px, in new UI. It's 11px in the old UI.
  display: flex;
  flex-direction: column;
  align-items: start;
  gap: 0.25rem; /* Not checked with the reference impl */
  ${({placement})=>"after"===placement&&_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.AH`
      flex-direction: row;
      align-items: center;
      gap: 1rem; /* Not checked with the reference impl */
    `}
  flex-grow: 1; /* Needed for when the control is inside a flex layout */
`,WithInlineContextHelp=({children,descriptionProps,contextHelpPlacement,contextHelp})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledContextHelpWrapper,{placement:contextHelpPlacement},children,contextHelp&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledContextHelp,descriptionProps,contextHelp));WithInlineContextHelp.__docgenInfo={description:"Implements [inline context help](https://plugins.jetbrains.com/docs/intellij/inline-help-text.html),\nfor its children.",methods:[],displayName:"WithInlineContextHelp",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},descriptionProps:{required:!0,tsType:{name:"DOMAttributes"},description:"Props to apply on the context help wrapper, to make the connected control\ndescribed by the context help."},contextHelp:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Context help, shown below the input.\nA typical use case is\n[to provide example values](https://jetbrains.github.io/ui/principles/context_help/#07)."},contextHelpPlacement:{required:!1,tsType:{name:"union",raw:'"below" | "after"',elements:[{name:"literal",value:'"below"'},{name:"literal",value:'"after"'}]},description:"Placement of the contextHelp text with respect to the control.\nSee more: https://plugins.jetbrains.com/docs/intellij/inline-help-text.html#placement"}}}},"./src/Field/Label.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>LabeledControlsAlignmentProvider,v:()=>WithLabel});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js");const StyledLabelContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  display: inline-flex;
  flex-direction: ${({labelPlacement})=>"above"===labelPlacement?"column":"row"};
  align-items: start;
  gap: 0.375rem;
`,StyledLabel=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4.label`
  color: ${({theme,isDisabled:disabled})=>theme.commonColors.label({disabled})};
  margin-top: 0.25rem;
  line-height: 1.2;
`,WithLabel=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function WithLabel({label,labelPlacement,labelProps,children,isDisabled,...props},forwardedRef){const labelRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);return function useAlignedLabels({ref,enabled}){const{applyLabelWidth,commonWidth}=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(LabelAlignmentContext);(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{const apply=()=>{const width=ref.current?.offsetWidth;return!!width&&(applyLabelWidth(width),!0)};apply()||setTimeout(apply,0)})),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{ref.current&&(ref.current.style.minWidth=commonWidth&&enabled?`${commonWidth}px`:"")}),[commonWidth,enabled])}({ref:labelRef,enabled:"above"!==labelPlacement}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledLabelContainer,{...props,labelPlacement,ref:forwardedRef},label&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledLabel,{...labelProps,isDisabled,ref:labelRef},label),children)}));const LabelAlignmentContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({commonWidth:null,applyLabelWidth:()=>{}});function LabeledControlsAlignmentProvider({children}){const[commonWidth,setCommonWidth]=react__WEBPACK_IMPORTED_MODULE_0__.useState(null);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(LabelAlignmentContext.Provider,{value:{commonWidth,applyLabelWidth:width=>{setCommonWidth((currentWidth=>width>(currentWidth??0)?width+1:currentWidth))}}},children)}WithLabel.__docgenInfo={description:"Implements [label](https://jetbrains.github.io/ui/controls/input_field/#label),\nfor elements like Input, Dropdown, etc.",methods:[],displayName:"WithLabel",props:{isDisabled:{required:!0,tsType:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}]},description:""},label:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},labelPlacement:{required:!0,tsType:{name:"union",raw:"LabelPlacement | undefined",elements:[{name:"union",raw:'"above" | "before"',elements:[{name:"literal",value:'"above"'},{name:"literal",value:'"before"'}]},{name:"undefined"}]},description:""},labelProps:{required:!1,tsType:{name:"DOMAttributes"},description:""}}},LabeledControlsAlignmentProvider.__docgenInfo={description:"Provides a context for\n[labeled input controls](https://jetbrains.github.io/ui/principles/layout/#labeled-input-controls)\nwith side-positioned labels to have their input boxes aligned.\nIt doesn't render anything in DOM and only provides a context used\nby labeled controls to set a common width on labels so that the input boxes\nalign.\nLabeled input controls are:\n- {@link InputField}\n- {@link ComboBox}\n- {@link Dropdown}",methods:[],displayName:"LabeledControlsAlignmentProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}},"./src/InputField/InputField.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>InputField});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_label__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/label/dist/useField.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/Tooltip/PositionedTooltipTrigger.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/Tooltip/ValidationTooltip.tsx"),_intellij_platform_core_InputField_Input__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/InputField/Input.tsx"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Field_ContextHelp__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/Field/ContextHelp.tsx"),_intellij_platform_core_Field_Label__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Field/Label.tsx");const StyledInput=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4)(_intellij_platform_core_InputField_Input__WEBPACK_IMPORTED_MODULE_2__.p)`
  width: 100%;
`,StyledWithLabel=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4)(_intellij_platform_core_Field_Label__WEBPACK_IMPORTED_MODULE_3__.v)`
  // by default, WithLabel doesn't stretch the labeled content to fill the width of the container. The container
  // width might be set explicitly, based on parent, or based on the label width.
  // This behavior seemed more reasonable as default, but for input field it makes more sense to have the text input
  // fill in the width of the field. For dropdown it seemed more reasonable for the dropdown to not stretch just
  // because the label is long. But it might be something to rethink or maybe even allow to be controlled via an option?
  align-items: normal;
`,InputField=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function InputField({validationState,validationMessage,className,style,labelPlacement="before",contextHelp,contextHelpPlacement,inputProps={},addonBefore,addonAfter,inputRef,...props},forwardedRef){const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__.U)(forwardedRef),{fieldProps,errorMessageProps,labelProps,descriptionProps}=(0,_react_aria_label__WEBPACK_IMPORTED_MODULE_5__.M)({...props,errorMessage:validationMessage,validationState:"error"===validationState||"warning"===validationState?"invalid":"valid"});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledWithLabel,{ref,label:props.label,labelPlacement,isDisabled:props.isDisabled,labelProps,className,style},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Field_ContextHelp__WEBPACK_IMPORTED_MODULE_6__.a,{contextHelp,contextHelpPlacement,descriptionProps},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_7__.O,{placement:"top start",crossOffset:36,showOnFocus:!0,isDisabled:!validationMessage,tooltip:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_8__.B,{type:"valid"!==validationState?validationState:void 0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",errorMessageProps,validationMessage)),delay:0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledInput,{inputRef,placeholder:props.placeholder,disabled:props.isDisabled,validationState,autoSelect:props.autoSelect,autoFocus:props.autoFocus,addonAfter,addonBefore,...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_9__.v)(fieldProps,inputProps,{value:props.value,defaultValue:props.defaultValue,onChange:e=>props.onChange?.(e.target.value)})}))))}));InputField.__docgenInfo={description:"An input box with an associated label, error message, and context help.",methods:[],displayName:"InputField",props:{contextHelp:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Context help, shown below the input.\nA typical use case is\n[to provide example values](https://jetbrains.github.io/ui/principles/context_help/#07)."},contextHelpPlacement:{required:!1,tsType:{name:"union",raw:'"below" | "after"',elements:[{name:"literal",value:'"below"'},{name:"literal",value:'"after"'}]},description:"Placement of the contextHelp text with respect to the control.\nSee more: https://plugins.jetbrains.com/docs/intellij/inline-help-text.html#placement"},className:{required:!1,tsType:{name:"string"},description:"className applied on the field's wrapper div."},style:{required:!1,tsType:{name:"CSSProperties"},description:"style applied on the field's wrapper div."},label:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Label to be associated with the input."},labelPlacement:{required:!1,tsType:{name:"union",raw:'"above" | "before"',elements:[{name:"literal",value:'"above"'},{name:"literal",value:'"before"'}]},description:"Placement of the label with respect to the input box.",defaultValue:{value:'"before"',computed:!1}},isDisabled:{required:!1,tsType:{name:"boolean"},description:"Whether the input is disabled. Use this prop"},placeholder:{required:!1,tsType:{name:"string"},description:"Convenient prop to be used instead of inputProps.placeholder"},value:{required:!1,tsType:{name:'HTMLProps["value"]',raw:'HTMLProps<HTMLInputElement>["value"]'},description:"Convenient prop to be used instead of inputProps.value"},defaultValue:{required:!1,tsType:{name:'HTMLProps["defaultValue"]',raw:'HTMLProps<HTMLInputElement>["defaultValue"]'},description:"Convenient prop to be used instead of inputProps.defaultValue"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(newValue: string) => void",signature:{arguments:[{type:{name:"string"},name:"newValue"}],return:{name:"void"}}},description:"Convenient prop to be used instead of inputProps.onChange. It also calls the passed callback with the\nchange value instead of input."},inputProps:{required:!1,tsType:{name:"Omit",elements:[{name:"HTMLProps",elements:[{name:"HTMLInputElement"}],raw:"HTMLProps<HTMLInputElement>"},{name:"union",raw:'"as" | "ref" | "disabled"',elements:[{name:"literal",value:'"as"'},{name:"literal",value:'"ref"'},{name:"literal",value:'"disabled"'}]}],raw:'Omit<\n  HTMLProps<HTMLInputElement>,\n  "as" | "ref" | "disabled" //isDisabled should be used\n>'},description:"Props to be passed to the underlying input element.",defaultValue:{value:"{}",computed:!1}},autoSelect:{required:!1,tsType:{name:"boolean"},description:"Whether to auto select the value initially"},validationMessage:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Validation message shown as a {@link ValidationTooltip} above the field.\n{@link ValidationTooltipProps#type} is defined based on `validationState`."}},composes:["Omit","FocusableProps","Pick"]}},"./src/Link/Link.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>Link});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_focus__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-aria/focus/dist/useFocusable.mjs"),_react_aria_focus__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@react-aria/focus/dist/FocusRing.mjs"),_intellij_platform_core_Link_StyledLink__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/Link/StyledLink.tsx"),_react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/interactions/dist/usePress.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/utils/dist/filterDOMProps.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs");const Link=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(((props,forwardedRef)=>{const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.U)(forwardedRef),{focusableProps}=(0,_react_aria_focus__WEBPACK_IMPORTED_MODULE_2__.W)(props,ref),{pressProps,isPressed}=(0,_react_aria_interactions__WEBPACK_IMPORTED_MODULE_3__.d)({...props,ref}),domProps=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__.$)(props,{labelable:!0}),interactionHandlers=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__.v)(focusableProps,pressProps);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_aria_focus__WEBPACK_IMPORTED_MODULE_6__.v,{focusRingClass:"focus-visible"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Link_StyledLink__WEBPACK_IMPORTED_MODULE_7__.a,{...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_5__.v)(interactionHandlers,domProps),as:"span",role:"link",ref,className:`${props.isDisabled?"disabled":""} ${isPressed?"active":""} ${props.className||""}`,"aria-disabled":props.isDisabled||void 0,tabIndex:props.isDisabled?void 0:props.excludeFromTabOrder?-1:0},props.children))}));Link.__docgenInfo={description:"A focusable span in style of [Link](https://jetbrains.github.io/ui/controls/link/) and with accessibility role of link.\n\nTODO and known issues:\n- in the reference impl, Space presses the link, Enter doesn't. It's vice versa here, because of how usePress is implemented.\n- Support for External links\n- Support for Anchor elements?\n\nUnknowns:\n- What are ActionLink and DefaultLinkButtonUI?\n- What is HyperLinkLabel compared to LabelLink (which was looked into in implementation of this component)?",methods:[],displayName:"Link",props:{isDisabled:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},preventFocusOnPress:{required:!1,tsType:{name:"boolean"},description:""},excludeFromTabOrder:{required:!1,tsType:{name:"boolean"},description:""}}}},"./src/Link/StyledLink.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>StyledLink});const StyledLink=__webpack_require__("./src/styled.ts").I4.a`
  cursor: pointer;
  text-decoration: none;
  outline: none;
  // &:focus-visible didn't work as expected, so FocusRing is used
  &.focus-visible {
    outline: 1px solid
      ${({theme})=>theme.color("Link.focusedBorderColor",theme.commonColors.focusBorderColor)};
    border-radius: 2px; // Registry.intValue("ide.link.button.focus.round.arc", 4)
  }
  color: ${({theme})=>theme.currentForegroundAware(theme.commonColors.linkForegroundEnabled)};

  &:hover,
  &.hover /* for testing purposes*/ {
    text-decoration: underline;
    color: ${({theme})=>theme.currentForegroundAware(theme.color("Link.hoverForeground",theme.color("link.hover.foreground","")))};
  }
  &:active,
  &.active {
    color: ${({theme})=>theme.currentForegroundAware(theme.color("Link.pressedForeground",theme.color("link.pressed.foreground",theme.dark?"#BA6F25":"#F00000")))};
  }
  &:disabled,
  &.disabled {
    cursor: default;
    text-decoration: none;
    color: ${({theme})=>theme.color("Link.disabledForeground",theme.color("Label.disabledForeground",theme.color("Label.disabledText","#999")))};
  }
  // We may need to refine this to allow passing visited as a prop for links that don't have href, and not apply the
  // styles in that case, since it seems no href is considered visited by default. Although, in all main themes
  // Link.visitedForeground is set to the default link color.
  &:visited,
  &.visited {
    color: ${({theme})=>theme.currentForegroundAware(theme.color("Link.visitedForeground",theme.color("link.visited.foreground",theme.dark?"#9776A9":"#800080")))};
  }
`},"./src/List/List.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>List});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_useList__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/List/useList.ts"),_ListItem__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/List/ListItem.tsx"),_StyledList__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/List/StyledList.tsx"),_useListState__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/List/useListState.ts"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/@react-aria/utils/dist/filterDOMProps.mjs"),_react_aria_virtualizer__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/@react-aria/virtualizer/dist/Virtualizer.mjs"),_intellij_platform_core_List_useListVirtualizer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/List/useListVirtualizer.tsx"),_intellij_platform_core_List_ListContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/List/ListContext.tsx");const List=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function List({allowEmptySelection=!1,fillAvailableSpace=!1,estimatedItemHeight,className,...inputProps},forwardedRef){const props={...inputProps,disallowEmptySelection:!allowEmptySelection},ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.U)(forwardedRef),state=(0,_useListState__WEBPACK_IMPORTED_MODULE_2__.p)(props),{listProps,listContext}=(0,_useList__WEBPACK_IMPORTED_MODULE_3__.U)({...props,isVirtualized:!0},state,ref),{virtualizerProps:{children:renderNode,...virtualizerProps}}=(0,_intellij_platform_core_List_useListVirtualizer__WEBPACK_IMPORTED_MODULE_4__.r)({state,estimatedItemHeight,renderItem:item=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ListItem__WEBPACK_IMPORTED_MODULE_5__.c,{key:item.key,item})});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_List_ListContext__WEBPACK_IMPORTED_MODULE_6__.E.Provider,{value:listContext},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledList__WEBPACK_IMPORTED_MODULE_7__.K,{as:_react_aria_virtualizer__WEBPACK_IMPORTED_MODULE_8__.Y,...virtualizerProps,...listProps,...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_9__.$)(props,{labelable:!0}),fillAvailableSpace,className,ref},renderNode))}));List.__docgenInfo={description:"List view",methods:[],displayName:"List",props:{selectionManagerRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"SelectionManager"}],raw:"RefObject<SelectionManager>"},description:"Gives imperative access to selection manager."},focusProxyRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"HTMLElement"}],raw:"RefObject<HTMLElement>"},description:"ref to an element (typically HTMLInputElement) that should act as a focus\nproxy that handles ArrowUp, ArrowDown, and Enter keys to allow for\nnavigating the collection and selecting items.\nUseful for implementing\nautocompletion or search input connected to a collection element."},fillAvailableSpace:{required:!1,tsType:{name:"boolean"},description:"fills the available horizontal or vertical space, when rendered in a flex container.",defaultValue:{value:"false",computed:!1}},showAsFocused:{required:!1,tsType:{name:"boolean"},description:"When true, shows the list in focused style, even when it's not focused. A common use case is when the list\nis virtually focused. i.e. the focus is physically on some other element (like a search input) which handles\nkeyboard events as if the list was focused.\nAnother (maybe questionable) use case is master detail views, where the master view is shown as focused, even\nwhen the details view has physical focus."},allowEmptySelection:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(key: Key) => void",signature:{arguments:[{type:{name:"Key"},name:"key"}],return:{name:"void"}}},description:"Called when the action for the item should be triggered, which can be by double click or pressing Enter.\nEnter not implemented yet :D"},estimatedItemHeight:{required:!1,tsType:{name:"number"},description:"Useful when list items have a custom height, to hint layout calculation logic about the item height which\nincreases rendering efficiency and also prevents flash of items with wrong height."},className:{required:!1,tsType:{name:"string"},description:""}}}},"./src/ModalWindow/WindowLayout.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>WindowLayout});var styled=__webpack_require__("./src/styled.ts"),react=__webpack_require__("../../node_modules/react/index.js"),OverlayMoveHandle=__webpack_require__("./src/Overlay/OverlayMoveHandle.tsx"),WindowContext=__webpack_require__("./src/ModalWindow/WindowContext.ts"),mergeProps=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs");const StyledWindowTitle=styled.I4.h1`
  margin: 0;
  text-align: center;
  font-size: 13px; // not rem! intentional
  line-height: 24px; // Double check
  cursor: default;
  user-select: none;
  padding: 0 8px;
`,WindowHeader=({children})=>{const{movable,titleProps}=(0,react.useContext)(WindowContext._),renderTitle=(otherProps={})=>react.createElement(StyledWindowTitle,(0,mergeProps.v)(titleProps,otherProps),children||react.createElement(react.Fragment,null," "));return movable?react.createElement(OverlayMoveHandle.I,null,(({moveHandleProps})=>renderTitle(moveHandleProps))):renderTitle()};WindowHeader.__docgenInfo={description:"Implements appearance of Window header, and also acts as a handle for moving the window.\nExpected to be used with {@link WindowLayout}:\n\n@example\n```tsx\n<ModalWindow>\n   <WindowLayout header={<WindowHeader>header</WindowHeader>} />\n</ModalWindow>\n```",methods:[],displayName:"WindowHeader",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};var ButtonGroup=__webpack_require__("./src/ButtonGroup/ButtonGroup.tsx");const StyledFooter=styled.I4.div`
  padding: 0.625rem 0.875rem;
  display: flex;
  gap: 0.5rem;
  justify-content: space-between;
  align-items: center;
  border-top: 1px solid transparent;
  border-color: ${({hasBorder,theme})=>hasBorder&&theme.commonColors.contrastBorder};
`,StyledFooterSide=styled.I4.div`
  display: flex;
  gap: 0.75rem;
`;function WindowFooter({left,right,hasBorder}){return react.createElement(StyledFooter,{hasBorder},react.createElement(StyledFooterSide,null,left),react.createElement(StyledFooterSide,null,react.createElement(ButtonGroup.e,null,right)))}WindowFooter.__docgenInfo={description:"Implements the common layout for window footer, to be used in {@link ModalWindowProps#footer}.\nFooter has a left and a right side. There is a standard gap between the children of each side.",methods:[],displayName:"WindowFooter",props:{left:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The content to go to the left side the footer. A help icon button is very common on the left side."},right:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The content to go to the right side the footer.\n{@link Button}s are usually used inside the right content.\nA {@link ButtonGroup} is rendered around the content to allow for keyboard navigation with arrow keys."},hasBorder:{required:!1,tsType:{name:"boolean"},description:"Whether to show top border for footer or not"}}};const StyledWindowFooter=styled.I4.div`
  min-height: min-content;
`,StyledWindowContentWrapper=styled.I4.div`
  overflow: auto;
  flex: 1;
`;function WindowLayout({header,footer,content}){return react.createElement(react.Fragment,null,header&&("string"==typeof header?react.createElement(WindowHeader,null,header):header),react.createElement(StyledWindowContentWrapper,null,content),footer&&react.createElement(StyledWindowFooter,null,footer))}WindowLayout.Footer=WindowFooter,WindowLayout.Header=WindowHeader,WindowLayout.__docgenInfo={description:"Window content layout, supporting fixed `header` and `footer` sections, and a scrollable `content` area.",methods:[{name:"Footer",docblock:null,modifiers:["static"],params:[{name:"{\n  left,\n  right,\n  hasBorder,\n}: {\n  /**\n   * The content to go to the left side the footer. A help icon button is very common on the left side.\n   */\n  left?: React.ReactNode;\n  /**\n   * The content to go to the right side the footer.\n   * {@link Button}s are usually used inside the right content.\n   * A {@link ButtonGroup} is rendered around the content to allow for keyboard navigation with arrow keys.\n   */\n  right?: React.ReactNode;\n  /**\n   * Whether to show top border for footer or not\n   */\n  hasBorder?: boolean;\n}",optional:!1,type:{name:"signature",type:"object",raw:"{\n  /**\n   * The content to go to the left side the footer. A help icon button is very common on the left side.\n   */\n  left?: React.ReactNode;\n  /**\n   * The content to go to the right side the footer.\n   * {@link Button}s are usually used inside the right content.\n   * A {@link ButtonGroup} is rendered around the content to allow for keyboard navigation with arrow keys.\n   */\n  right?: React.ReactNode;\n  /**\n   * Whether to show top border for footer or not\n   */\n  hasBorder?: boolean;\n}",signature:{properties:[{key:"left",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1},description:"The content to go to the left side the footer. A help icon button is very common on the left side."},{key:"right",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1},description:"The content to go to the right side the footer.\n{@link Button}s are usually used inside the right content.\nA {@link ButtonGroup} is rendered around the content to allow for keyboard navigation with arrow keys."},{key:"hasBorder",value:{name:"boolean",required:!1},description:"Whether to show top border for footer or not"}]}}}],returns:null},{name:"Header",docblock:null,modifiers:["static"],params:[{name:"{ children }: { children?: React.ReactNode }",optional:!1,type:{name:"signature",type:"object",raw:"{ children?: React.ReactNode }",signature:{properties:[{key:"children",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}}]}}}],returns:null}],displayName:"WindowLayout",props:{header:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Fixed position header of the window at the top. Use {@link WindowLayout.Header} for the default window header,\nwhich also acts as a move handle for the window. If a string is passed, it will be wrapped by\n{@link WindowLayout.Header} automatically."},content:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Scrollable content of the window."},footer:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"An area at the bottom of the window which is not scrolled as opposed to `content`. Use {@link WindowLayout.Footer}\nfor rendering the common layout of a window footer."}}}},"./src/Overlay/Popover.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Popover});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/usePopover.mjs"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/Overlay.mjs"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/DismissButton.mjs"),_intellij_platform_core_style_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/style-constants.ts"),_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs");const StyledPopover=_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  box-sizing: border-box;
  // not checked if there should be a better substitute for * in the following colors. Maybe "Component"?
  background-color: ${({theme})=>theme.color("*.background")};
  color: ${({theme})=>theme.color("*.foreground")};
  outline: none; // Focus will be reflected in header. No need for outline or any other focus style on the container
  ${_intellij_platform_core_style_constants__WEBPACK_IMPORTED_MODULE_2__.E}; // FIXME: OS-dependant style?
`,Popover=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function Popover({children,state,offset=8,...props},forwardedRef){const popoverRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_3__.U)(forwardedRef),{popoverProps}=(0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_4__.f)({...props,offset,popoverRef},state);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_aria_overlays__WEBPACK_IMPORTED_MODULE_5__.hJ,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledPopover,{...popoverProps,ref:popoverRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_aria_overlays__WEBPACK_IMPORTED_MODULE_6__.R,{onDismiss:state.close}),children,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_aria_overlays__WEBPACK_IMPORTED_MODULE_6__.R,{onDismiss:state.close})))}));Popover.__docgenInfo={description:"",methods:[],displayName:"Popover",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},state:{required:!0,tsType:{name:"OverlayTriggerState"},description:""},offset:{defaultValue:{value:"8",computed:!1},required:!1}},composes:["Omit"]}},"./src/Popup/PopupTrigger.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>PopupTrigger});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/useOverlayTrigger.mjs"),_react_aria_interactions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/interactions/dist/PressResponder.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_stately_overlays__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@react-stately/overlays/dist/useOverlayTriggerState.mjs"),_PopupContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/Popup/PopupContext.tsx");const PopupTrigger=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function PopupTrigger({placement,children,popup,...props},forwardedRef){const state=(0,_react_stately_overlays__WEBPACK_IMPORTED_MODULE_1__.T)(props),triggerRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.U)(forwardedRef),{overlayProps,triggerProps}=(0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_3__.o)({type:props.type||"menu"},state,triggerRef);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_aria_interactions__WEBPACK_IMPORTED_MODULE_4__.Y,{ref:triggerRef,...triggerProps},children),state.isOpen&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_PopupContext__WEBPACK_IMPORTED_MODULE_5__.k.Provider,{value:{overlayProps,positioning:{targetRef:triggerRef,placement},onClose:state.close}},"function"==typeof popup?popup({close:state.close}):popup))}));PopupTrigger.__docgenInfo={description:"Popup opened by a trigger. `trigger` can be an element of any pressable component (such as {@link Button} or\n{@link IconButton}), and is rendered in place. Similar to {@link Popup component}, `children` defines the content\nof Popup.",methods:[],displayName:"PopupTrigger",props:{placement:{required:!1,tsType:{name:'Required["positioning"]["placement"]',raw:'Required<PopupProps>["positioning"]["placement"]'},description:""},popup:{required:!0,tsType:{name:"union",raw:"| React.ReactElement\n| (({ close }: { close: () => void }) => React.ReactNode)",elements:[{name:"ReactReactElement",raw:"React.ReactElement"},{name:"unknown"}]},description:""},children:{required:!0,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""}},composes:["Partial","OverlayTriggerStateProps"]}},"./src/ProgressBar/ProgressBar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f3:()=>useProgressBarIconButton,pT:()=>useProgressBarPauseIconButton,z2:()=>ProgressBar});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_react_aria_progress__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@react-aria/progress/dist/useProgressBar.mjs"),_react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/interactions/dist/useHover.mjs"),_react_aria_button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/button/dist/useButton.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts");const ProgressBar=({value=0,maxValue=100,minValue=0,name,namePosition="top",details,secondaryDetails,button,width,dense,className,style,valueLabel,showValueLabel=Boolean(valueLabel),...props})=>{const{progressBarProps,labelProps}=(0,_react_aria_progress__WEBPACK_IMPORTED_MODULE_1__.E)({...props,label:name,value,valueLabel,maxValue,minValue}),percentage=(value/maxValue*100).toFixed(0),[forcedDetails,setForcedDetails]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[tooltip,setTooltip]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),contextValue=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({setForcedDetails,setTooltip})),[]),label=react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledProgressBarLabel,labelProps,name),effectiveDetails=details?tooltip||forcedDetails||details:null;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledProgressBarContainer,{style,className},"top"===namePosition&&label,react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledProgressBarLineContainer,{dense,hasTopMargin:Boolean(name)&&"top"===namePosition,hasBottomMargin:Boolean(effectiveDetails)},"side"===namePosition&&label,react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledProgressBarTrack,{style:{width},...progressBarProps,indeterminate:props.isIndeterminate},!props.isIndeterminate&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledProgressBarProgress,{style:{width:`${percentage}%`}})),showValueLabel&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,valueLabel??`${percentage}%`),react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProgressBarContext.Provider,{value:contextValue},button)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledProgressBarDetails,null,effectiveDetails),react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledProgressBarDetails,null,secondaryDetails))},ProgressBarContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(null),StyledProgressBarContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.I4.div`
  color: ${({theme})=>theme.commonColors.labelForeground};
  cursor: default; // prevent cursor on text
`,StyledProgressBarLineContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.I4.div`
  display: flex;
  align-items: center;
  gap: ${({dense})=>dense?"0.5rem":"0.625rem"};
  height: 4px;
  // spacing is based on the reference impl and figma designs. top and bottom spacing is inverted in the spec document
  // figma: https://www.figma.com/file/nfDfMAdV7j2fnQlpYNAOfP/IntelliJ-Platform-UI-Kit-(Community)?node-id=75426%3A16650
  // spec document: https://jetbrains.github.io/ui/controls/progress_bar/#25
  margin-top: ${({hasTopMargin})=>hasTopMargin&&"0.375rem"};
  margin-bottom: ${({hasBottomMargin})=>hasBottomMargin&&"0.25rem"};
`,StyledProgressBarLabel=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.I4.div`
  white-space: nowrap;
  max-width: calc(100% - 2rem);
  overflow: hidden;
`,StyledProgressBarDetails=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.I4.div`
  color: ${({theme})=>theme.commonColors.contextHelpForeground};
  font-size: 0.82em;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  max-width: calc(100% - 2rem); // not the best way
`,StyledProgressBarTrack=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.I4.div`
  height: inherit;
  border-radius: 2px;
  overflow: hidden;
  display: flex;

  // In case used in flex layout
  min-width: 0;
  flex: 1;

  background: ${({theme})=>theme.color("ProgressBar.trackColor",theme.dark?"rgb(85,85,85)":"rgb(196,196,196)")};
  ${({indeterminate})=>indeterminate&&_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.AH`
      background: linear-gradient(
        90deg,
        ${getIndeterminateStartColor} 0%,
        ${getIndeterminateEndColor} 50%,
        ${getIndeterminateStartColor} 100%
      );
      background-size: 96px auto;
      animation: 800ms ${indeterminateBackgroundAnimation} linear infinite;
    `}
`,getIndeterminateStartColor=({theme})=>theme.color("ProgressBar.indeterminateStartColor"),getIndeterminateEndColor=({theme})=>theme.color("ProgressBar.indeterminateEndColor"),indeterminateBackgroundAnimation=styled_components__WEBPACK_IMPORTED_MODULE_3__.i7`
  0% {
    background-position: 0;
  }
  100% {
    background-position: 96px;
  }
`,StyledProgressBarProgress=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.I4.div`
  height: 100%;
  background: ${({theme})=>theme.color("ProgressBar.progressColor",theme.dark?"rgb(160,160,160)":"rgb(128,128,128)")};
`;function useProgressBarIconButton({onPress,hoverTooltip},ref){const{buttonProps}=(0,_react_aria_button__WEBPACK_IMPORTED_MODULE_4__.s)({onPress,elementType:"span",excludeFromTabOrder:!0,preventFocusOnPress:!0},ref),context=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ProgressBarContext),{hoverProps,isHovered}=(0,_react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__.M)({});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{context?.setTooltip(isHovered?hoverTooltip:null)}),[hoverTooltip,isHovered]),{buttonProps:(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__.v)(buttonProps,hoverProps)}}function useProgressBarPauseIconButton({paused,...props},ref){const context=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ProgressBarContext);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{context?.setForcedDetails(paused?"Paused":null)}),[paused]),useProgressBarIconButton(props,ref)}ProgressBar.Container=StyledProgressBarContainer,ProgressBar.Label=StyledProgressBarLabel,ProgressBar.LineContainer=StyledProgressBarLineContainer,ProgressBar.Track=StyledProgressBarTrack,ProgressBar.Progress=StyledProgressBarProgress,ProgressBar.Details=StyledProgressBarDetails,ProgressBar.__docgenInfo={description:"@see https://jetbrains.github.io/ui/controls/progress_bar/\n@see https://github.com/JetBrains/intellij-community/blob/82f201386c3f7a339ff25fc8f3389024c8078a87/platform/platform-api/src/com/intellij/openapi/ui/panel/ProgressPanelBuilder.java\n\nKnown issues:\nThere are a couple of UI issues because of the current layout (which can be improved probably):\n- max-width of the label and details, it's not necessarily aligned with the the progressbar track, because they don't\n  share the same container\n- when label is on the side, details is aligned with the label, instead of the progressbar track.",methods:[],displayName:"ProgressBar",props:{name:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Process name, shown above or to the left of the progress bar. Placement is controlled by {@link namePosition}.\n@see https://jetbrains.github.io/ui/controls/progress_bar/#process-name"},namePosition:{required:!1,tsType:{name:"union",raw:'"side" | "top"',elements:[{name:"literal",value:'"side"'},{name:"literal",value:'"top"'}]},description:'Process name position with respect to the progress bar.\nIf `namePosition` is "side", {@link name} is **not** automatically appended with a colon.\n@default "top"',defaultValue:{value:'"top"',computed:!1}},details:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Process details, placed bellow the progress bar, with a de-emphasized color.\n@see https://jetbrains.github.io/ui/controls/progress_bar/#process-details"},secondaryDetails:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"A second line of details. Not an officially documented feature, but it's supported in the reference impl."},button:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Placed next to and aligned with the progress bar, used for\n[process control](https://jetbrains.github.io/ui/controls/progress_bar/#process-control) buttons."},width:{required:!1,tsType:{name:'CSSProperties["width"]',raw:'CSSProperties["width"]'},description:"Progress bar track width."},dense:{required:!1,tsType:{name:"boolean"},description:"Not supported in [the official specs](https://jetbrains.github.io/ui/controls/progress_bar/#25), but the progress\nbar in status bar has a denser spacing. It still won't be a pixel perfect match with the progress bar in the\nstatus bar."},showValueLabel:{required:!1,tsType:{name:"boolean"},description:"Whether the value's label is displayed. True by default if there's a label, false by default if not.",defaultValue:{value:"Boolean(valueLabel)",computed:!0}},style:{required:!1,tsType:{name:'HTMLAttributes["style"]',raw:'HTMLAttributes<unknown>["style"]'},description:""},className:{required:!1,tsType:{name:'HTMLAttributes["className"]',raw:'HTMLAttributes<unknown>["className"]'},description:""},value:{defaultValue:{value:"0",computed:!1},required:!1},maxValue:{defaultValue:{value:"100",computed:!1},required:!1},minValue:{defaultValue:{value:"0",computed:!1},required:!1}},composes:["Omit"]}},"./src/ProgressBar/ProgressBarStopButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>ProgressBarStopButton});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Icon/AutoHoverPlatformIcon.tsx"),_ProgressBar__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/ProgressBar/ProgressBar.tsx");const ProgressBarStopButton=({small,onPress})=>{const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),{buttonProps}=(0,_ProgressBar__WEBPACK_IMPORTED_MODULE_1__.f3)({onPress,hoverTooltip:"Cancel"},ref);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_2__.i,{ref,...buttonProps,icon:`process/stop${small?"Small":""}.svg`,hoverIcon:`process/stop${small?"Small":""}Hovered.svg`})};ProgressBarStopButton.__docgenInfo={description:"Stop (cancel) icon button for progress bar, to be used in {@link ProgressBarProps#button}.",methods:[],displayName:"ProgressBarStopButton",props:{small:{required:!1,tsType:{name:"boolean"},description:"whether small icon should be used."},onPress:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}}},"./src/SearchInput/SearchInput.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>SearchInput});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_react_stately_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-stately/utils/dist/useControlledState.mjs"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/ActionSystem/CommonActionIds.ts"),_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/ActionSystem/ActionShortcut.tsx"),_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/ActionSystem/ActionsProvider.tsx"),_intellij_platform_core_InputField__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/InputField/Input.tsx"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/Icon/PlatformIcon.tsx"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/Icon/AutoHoverPlatformIcon.tsx"),_intellij_platform_core_Menu__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/Menu/MenuTrigger.tsx"),_intellij_platform_core_Menu__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/Menu/Menu.tsx"),_intellij_platform_core_Collections__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/Collections/Item.ts"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/Tooltip/TooltipTrigger.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/Tooltip/ActionTooltip.tsx");const StyledInput=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4)(_intellij_platform_core_InputField__WEBPACK_IMPORTED_MODULE_2__.p)`
  input[type="search"] {
    -webkit-appearance: none;
    &::-webkit-search-cancel-button {
      -webkit-appearance: none;
    }
    &::-webkit-search-decoration {
      -webkit-appearance: none;
    }
  }
`,SearchInput=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function SearchInput({addonBefore,addonAfter,searchHistory,onClear,onSubmit,onHistoryItemSelected,historyButtonTitle="Recent Search",value:valueProp,defaultValue="",onChange,type="search",inputRef:inputRefProp,...props},forwardedRef){const[value,setValue]=(0,_react_stately_utils__WEBPACK_IMPORTED_MODULE_3__.P)(valueProp,defaultValue,onChange),inputContainerRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__.U)(forwardedRef),inputRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__.U)(inputRefProp),[isSearchHistoryOpen,setSearchHistoryOpen]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),showSearchHistoryAction={id:_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_5__.j.SHOW_SEARCH_HISTORY,title:historyButtonTitle,actionPerformed:()=>{setSearchHistoryOpen(!0)}},getShortcut=(0,_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_6__.a)(),searchIcon=searchHistory?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Menu__WEBPACK_IMPORTED_MODULE_7__.c,{isOpen:isSearchHistoryOpen,onOpenChange:setSearchHistoryOpen,positioningTargetRef:inputContainerRef,renderMenu:({menuProps})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Menu__WEBPACK_IMPORTED_MODULE_8__.W1,{...menuProps,autoFocus:"first",onAction:key=>{const historyItemText=searchHistory[parseInt(`${key}`.split("_")[0])];void 0!==historyItemText&&(setValue(historyItemText),onHistoryItemSelected?.(historyItemText,value),inputRef.current?.focus())}},searchHistory.map(((historyItem,index)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Collections__WEBPACK_IMPORTED_MODULE_9__.q,{key:`${index}_${historyItem}`},historyItem))))},((menuTriggerProps,ref)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_10__.k,{tooltip:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_11__.m,{actionName:historyButtonTitle,shortcut:getShortcut(_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_5__.j.SHOW_SEARCH_HISTORY)})},(tooltipTriggerProps=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_12__.jE,{...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_13__.v)(tooltipTriggerProps,menuTriggerProps),ref,icon:"actions/searchWithHistory.svg",role:"button","aria-label":historyButtonTitle}))))):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_12__.jE,{icon:"actions/search.svg"}),clear=()=>{setValue(""),onClear?.(value)},inputProps=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_13__.v)(props,{ref:inputContainerRef,inputRef,value,type,onChange:event=>{setValue(event.target.value)},addonBefore:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,searchIcon,addonBefore),addonAfter:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,value&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_14__.i,{onClick:clear,role:"button","aria-label":"Clear search",icon:"actions/close",hoverIcon:"actions/closeHovered"}),addonAfter),onKeyDown:event=>{event.repeat||("Enter"===event.key?onSubmit?.(event.currentTarget.value):"Escape"===event.key&&clear())}});return searchHistory?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_15__.Be,{actions:[showSearchHistoryAction]},(({shortcutHandlerProps})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledInput,(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_13__.v)(inputProps,shortcutHandlerProps)))):react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledInput,inputProps)}));SearchInput.__docgenInfo={description:"A wrapper around {@link Input} with a few additions:\n- A Search icon, added as an {@link InputProps#addonBefore addonBefore}.\n- A clear button, added as an {@link InputProps#addonAfter addonAfter}, when the input has value.\n  {@link SearchInputProps#onClear onClear} is called when the clear button is clicked.\n- A list of search queries shown as a menu, when the search icon is clicked,\n  if {@link SearchInputProps#searchHistory searchHistory} is provided.\n- An action provided on the input element, to open the search history via\n  {@link CommonActionId.SHOW_SEARCH_HISTORY} shortcut.\n- Search submission callback ({@link SearchInputProps#onSubmit onSubmit}) called when search is submitted by pressing Enter\n\n{@link InputProps#onChange onChange} and {@link InputProps#onSubmit onSubmit} props are also different in SearchInput, compared to\nthe corresponding props of the native input.\n\nCaveat: If the width is not set (either explicitly or via the entailing layout), the width of the input will change when clear button shows/hides.\n\n@see Input\n@see InputField",methods:[],displayName:"SearchInput",props:{searchHistory:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},description:"Search history to be shown as a menu when the search icon is pressed."},historyButtonTitle:{required:!1,tsType:{name:"string"},description:'The content of "show history" button tooltip, and the corresponding action title.\n@default "Recent Search"',defaultValue:{value:'"Recent Search"',computed:!1}},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"(clearedValue: string) => void",signature:{arguments:[{type:{name:"string"},name:"clearedValue"}],return:{name:"void"}}},description:"Called when the search input is cleared by either clear button or `Escape` key.\n`onChange` is also called with an empty string, whenever the input is cleared,\nso there is no need for updating the state using `onClear`, when the value is controlled.\n\n@param clearedValue the value before clearing."},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:"Called when the search is submitted by pressing `Enter`\n@param value submitted text"},value:{required:!1,tsType:{name:"string"},description:"Controlled value of the search input"},defaultValue:{required:!1,tsType:{name:"string"},description:"Default value of the search input, used for initialization when value is uncontrolled.",defaultValue:{value:'""',computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:"Called when the value is changed."},onHistoryItemSelected:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string, previousValue: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"},{type:{name:"string"},name:"previousValue"}],return:{name:"void"}}},description:"Called when a history item is selected. `onChange` is called with the selected text, so\nthere is no need for updating the state using `onHistoryItemSelected`, when the value is controlled.\n\n@param value text selected from history.\n@param previousValue the value of the input before the history item was selected."},type:{defaultValue:{value:'"search"',computed:!1},required:!1}},composes:["Omit"]}},"./src/StatusBar/StatusBar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>StatusBar});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts");const StatusBar=({left,right})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledStatusBar,{onMouseDown:e=>{e.preventDefault()}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledStatusBarLeft,null,left),react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledStatusBarRight,null,right)),StyledStatusBar=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  box-sizing: border-box;
  padding: 0 0.25rem;
  display: flex;
  width: 100%;
  align-items: center;
  justify-content: space-between; // because there is left and right sides
  background-color: ${({theme})=>theme.color("StatusBar.background",theme.color("Panel.background"))||"#fff"};
  color: ${({theme})=>theme.color("StatusBar.Widget.foreground",theme.commonColors.labelForeground)};
  border-top: 1px solid
    ${({theme})=>theme.color("StatusBar.borderColor","rgb(145, 145, 145)")};
  height: calc(1.25rem + 1px /* border*/);
  line-height: 1.25rem;
  font-size: 0.656rem; // not verified
  cursor: default;
`,StyledStatusBarSection=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  display: flex;
  align-items: center;
  white-space: nowrap;
`,StyledStatusBarRight=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4)(StyledStatusBarSection)`
  flex-shrink: 0;
`,StyledStatusBarLeft=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4)(StyledStatusBarSection)`
  flex-shrink: 1;
  min-width: 0;
  overflow: hidden;
`;StatusBar.__docgenInfo={description:"Status bar rendered at the bottom of the main window. In the reference implementation, there are three slots for\ncontent: left, right and center. It doesn't seem center is really necessary, so only left and right are supported\nfor now.\n@param left content on the left side of the status bar.\n@param right content on the right side of the status bar. Typically, a bunch of {@link StatusBarWidget}s",methods:[],displayName:"StatusBar",props:{left:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},right:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}},"./src/StatusBar/StatusBarWidget.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>StatusBarWidget});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_interactions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-aria/interactions/dist/usePress.mjs"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/styled.ts"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_react_aria_focus__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/focus/dist/useFocusable.mjs");const StatusBarWidget=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function StatusBarWidget(props,forwardedRef){const ref=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.U)(forwardedRef),{pressProps,isPressed}=(0,_react_aria_interactions__WEBPACK_IMPORTED_MODULE_2__.d)({ref,...props,preventFocusOnPress:!0}),{focusableProps}=(0,_react_aria_focus__WEBPACK_IMPORTED_MODULE_3__.W)({excludeFromTabOrder:!0},ref),StyledWrapper=props.label?StyledStatusBarWidget:StyledStatusBarIconWidget;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledWrapper,{...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__.v)(pressProps,focusableProps),className:isPressed?"pressed":"",ref},props.icon,props.icon&&props.label&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null," "),props.label)})),StyledStatusBarWidget=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_5__.I4.span`
  display: inline-flex;
  align-items: center;
  padding: ${({theme})=>theme.inset("StatusBar.Widget.widgetInsets")??"0 0.375rem"};
  height: 1.125rem;
  white-space: nowrap;
  &:hover {
    background-color: ${({theme})=>theme.color("StatusBar.Widget.hoverBackground",theme.color("ActionButton.hoverBackground","#dfdfdf"))};
    color: ${({theme})=>theme.color("StatusBar.Widget.hoverForeground",theme.commonColors.labelForeground)};
  }
  &.pressed {
    background-color: ${({theme})=>theme.color("StatusBar.Widget.pressedBackground",theme.color("ActionButton.pressedBackground","#cfcfcf"))};
    color: ${({theme})=>theme.color("StatusBar.Widget.pressedForeground",theme.commonColors.labelForeground)};
  }
`,StyledStatusBarIconWidget=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_5__.I4)(StyledStatusBarWidget)`
  padding: ${({theme})=>theme.inset("StatusBar.Widget.widgetInsets")??"0 0.25rem"};
`;StatusBarWidget.__docgenInfo={description:"Status bar button (aka widget), with the right hover and pressed appearance.\nIt doesn't get focused when pressed, and is excluded from tab order.\nDisabled style is not couldn't be found, so it's skipped at the moment.",methods:[],displayName:"StatusBarWidget",props:{label:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},icon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}},composes:["PressProps"]}},"./src/Tabs/EditorTabs/EditorTabContent.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>EditorTabContent});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/Icon/PlatformIcon.tsx"),_intellij_platform_core_Tabs_TabContentLayout__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Tabs/TabContentLayout.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Tooltip/TooltipTrigger.tsx"),_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Tooltip/ActionTooltip.tsx"),_intellij_platform_core_Button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/Button/BareButton.tsx");const EditorTabContent=({icon,title,closeButton,onUnpin,pinned,containerProps})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tabs_TabContentLayout__WEBPACK_IMPORTED_MODULE_1__.r,{startIcon:icon,title,containerProps,endIcon:pinned?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_2__.k,{tooltip:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip__WEBPACK_IMPORTED_MODULE_3__.m,{actionName:"Unpin Tab"})},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Button__WEBPACK_IMPORTED_MODULE_4__.l,{onPress:onUnpin,excludeFromTabOrder:!0,preventFocusOnPress:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_5__.jE,{icon:"actions/pinTab"}))):closeButton});EditorTabContent.__docgenInfo={description:"For rendering the content of Editor tabs. supports for file icon which is shown on the left and close or unpin\nbutton shown on the right.",methods:[],displayName:"EditorTabContent",props:{icon:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},title:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},closeButton:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:'Close button, shown in place of "pin" button if not pinned. Use {@link TabCloseButton} to render the close button\nfor the tab.\n\n@example\n```tsx\n<EditorTabContent\n  closeButton={\n    <TooltipTrigger\n      tooltip={<ActionTooltip actionName="Close Tab" shortcut="^⇧F4" />}\n    >\n      <TabCloseButton onPress={}></TabCloseButton>\n    </TooltipTrigger>\n  }\n/>\n```'},onUnpin:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},pinned:{required:!1,tsType:{name:"boolean"},description:""},containerProps:{required:!1,tsType:{name:'TabItemLayoutProps["containerProps"]',raw:'TabItemLayoutProps["containerProps"]'},description:""}}}},"./src/Tabs/EditorTabs/EditorTabs.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>EditorTabs});var _intellij_platform_core_Tabs_Tabs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Tabs/Tabs.tsx"),_StyledEditorTab__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Tabs/EditorTabs/StyledEditorTab.ts"),_StyledEditorTabs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Tabs/EditorTabs/StyledEditorTabs.ts"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js");const EditorTabs=props=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tabs_Tabs__WEBPACK_IMPORTED_MODULE_1__.t,{...props,TabComponent:_StyledEditorTab__WEBPACK_IMPORTED_MODULE_2__.O,TabsComponent:_StyledEditorTabs__WEBPACK_IMPORTED_MODULE_3__.d,focusable:!1});EditorTabs.__docgenInfo={description:"",methods:[],displayName:"EditorTabs"}},"./src/Tabs/EditorTabs/StyledEditorTab.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>StyledEditorTab,U:()=>editorTabTheme});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Tabs_StyledDefaultTab__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Tabs/StyledDefaultTab.ts"),_intellij_platform_core_Tabs_TabTheme__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Tabs/TabTheme.ts");const editorTabTheme=({theme})=>({borderColor:theme.color("EditorTabs.borderColor"),underlineHeight:theme.value("EditorTabs.underlineHeight"),background:theme.color("EditorTabs.background"),underlinedTabInactiveBackground:theme.color("EditorTabs.underlinedTabBackground"),underlinedTabBackground:theme.color("EditorTabs.underlinedTabBackground"),hoverInactiveBackground:theme.color("EditorTabs.hoverInactiveBackground"),hoverBackground:theme.color("EditorTabs.hoverBackground"),inactiveUnderlineColor:theme.color("EditorTabs.inactiveUnderlineColor"),underlineColor:theme.color("EditorTabs.underlineColor"),underlinedTabInactiveForeground:theme.color("EditorTabs.underlinedTabForeground"),underlinedTabForeground:theme.color("EditorTabs.underlinedTabForeground")}),StyledEditorTab=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.I4)(_intellij_platform_core_Tabs_StyledDefaultTab__WEBPACK_IMPORTED_MODULE_1__.E)`
  font-size: 0.7rem;
  ${({theme})=>(0,_intellij_platform_core_Tabs_TabTheme__WEBPACK_IMPORTED_MODULE_2__.d)(editorTabTheme({theme}))};
`},"./src/Tabs/EditorTabs/StyledEditorTabs.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>StyledEditorTabs});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/styled.ts"),_intellij_platform_core_Tabs_TabTheme__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Tabs/TabTheme.ts"),_intellij_platform_core_Tabs_StyledDefaultTabs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Tabs/StyledDefaultTabs.ts"),_StyledEditorTab__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Tabs/EditorTabs/StyledEditorTab.ts");const StyledEditorTabs=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_0__.I4)(_intellij_platform_core_Tabs_StyledDefaultTabs__WEBPACK_IMPORTED_MODULE_1__.b)`
  ${({theme})=>(0,_intellij_platform_core_Tabs_TabTheme__WEBPACK_IMPORTED_MODULE_2__.a)((0,_StyledEditorTab__WEBPACK_IMPORTED_MODULE_3__.U)({theme}))};
`},"./src/ToolWindowsImpl/DefaultToolWindows.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>DefaultToolWindows});var react=__webpack_require__("../../node_modules/react/index.js"),indexBy=__webpack_require__("./node_modules/ramda/es/indexBy.js"),useObjectRef=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),mergeProps=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),ToolWindows=__webpack_require__("./src/ToolWindows/ToolWindows.tsx"),ToolWindowsState=__webpack_require__("./src/ToolWindows/ToolWindowsState/ToolWindowsState.ts"),ToolWindowActionIds=__webpack_require__("./src/ToolWindowsImpl/ToolWindowActionIds.ts");const getActivateToolWindowActionId=id=>`Activate${id.replace(" ","")}Window`;function getOrdinal(n){let ord=["st","nd","rd"];return n+(null==ord[n%10-1]||[11,12,13].includes(n%100)?"th":ord[n%10-1])}var ActionsProvider=__webpack_require__("./src/ActionSystem/ActionsProvider.tsx"),TooltipTrigger=__webpack_require__("./src/Tooltip/TooltipTrigger.tsx"),ActionTooltip=__webpack_require__("./src/Tooltip/ActionTooltip.tsx"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const getToolWindowNumberFromShortcut=shortcut=>{const num="keyboard"===shortcut.type&&1===shortcut.firstKeyStroke.modifiers?.length&&["Alt","Meta","Control"].includes(shortcut.firstKeyStroke.modifiers[0])&&shortcut.firstKeyStroke.code.match(/^(Digit|Numpad)([0-9])$/)?.[2];return num?parseInt(num):null},StyledWrapper=styled_components_browser_esm.Ay.span`
  display: flex;
`,DefaultToolWindowToolbarButton=({id,title,icon,showNumber=!0})=>{const action=(0,ActionsProvider.y3)(getActivateToolWindowActionId(`${id}`)),number=action?.shortcuts?.map(getToolWindowNumberFromShortcut).find(Number.isInteger);return react.createElement(TooltipTrigger.k,{tooltip:react.createElement(ActionTooltip.m,{actionName:title,shortcut:action?.shortcut})},react.createElement(StyledWrapper,null,icon," ",null!=number&&showNumber?react.createElement(react.Fragment,null,react.createElement("u",null,number),": "):null,title))};DefaultToolWindowToolbarButton.__docgenInfo={description:"Default UI for the toolbar button (aka. stripe button) of the tool window.\n- Renders the title and icon for the tool window\n- Optionally shows the number before the title, if a numeric shortcut is set for the corresponding ActivateToolWindow\n  action, in the currently applied keymap.\n- Adds an Action Tooltip",methods:[],displayName:"DefaultToolWindowToolbarButton",props:{id:{required:!0,tsType:{name:"ReactKey",raw:"React.Key"},description:""},title:{required:!0,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},showNumber:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};const DefaultToolWindows=react.forwardRef((function DefaultToolWindows({windows:toolWindows,toolWindowsState,showNumbers,...props},forwardedRef){const toolWindowsRef=(0,useObjectRef.U)(forwardedRef),windowById=(0,indexBy.A)((({id})=>id),toolWindows),actions=function useToolWindowsActions({toolWindowsState,toolWindowsRef,getPresentation}){const isAnySideWindowWindowOpen=state=>Object.values(state.windows).some((({isVisible,viewMode})=>isVisible&&"float"!==(0,ToolWindowsState.$T)(viewMode)));return[...Object.keys(toolWindowsState.windows).map((key=>`${key}`)).map(((id,index)=>{const{title,icon}=getPresentation?.(id)||{};return{id:getActivateToolWindowActionId(id),title:title||`${getOrdinal(index)} window`,icon,description:`Activate ${title||getOrdinal(index)} window`,actionPerformed:()=>{toolWindowsState.windows[id]?.isVisible&&!toolWindowsRef.current?.hasFocus(id)?toolWindowsRef.current?.focus(id):toolWindowsRef.current?.changeState((state=>state.toggle(id)))}}})),{id:ToolWindowActionIds.yF,title:isAnySideWindowWindowOpen(toolWindowsState)?"Hide All Windows":"Restore windows",actionPerformed:()=>{toolWindowsRef.current?.changeState((state=>isAnySideWindowWindowOpen(state)?state.hideAll():state.restoreWindows())),setTimeout((()=>{toolWindowsRef.current?.focusMainContent()}))}},{id:ToolWindowActionIds.Up,title:"Jump to Last Tool Window",isDisabled:null==toolWindowsState.lastFocusedKey,actionPerformed:()=>{toolWindowsRef.current?.focusLastActiveWindow()}}]}({toolWindowsRef,toolWindowsState,getPresentation:id=>windowById[id]});return react.createElement(ActionsProvider.Be,{actions},(({shortcutHandlerProps})=>react.createElement(ToolWindows.I,{...props,ref:toolWindowsRef,toolWindowsState,windows:toolWindows.map((({id,icon,content,title})=>({id,toolbarButton:react.createElement(DefaultToolWindowToolbarButton,{id,icon,title,showNumber:showNumbers}),content}))),containerProps:(0,mergeProps.v)(props.containerProps||{},shortcutHandlerProps)})))}));DefaultToolWindows.__docgenInfo={description:"A wrapper around ToolWindows, which provides default actions. It also expects windows to have a `title` and an `icon`\ninstead of more generic `toolbarButton`. The `title` and `icon` are then used in toolbar button, and also in the\nactions that are dynamically created for each window to toggle/focus the tool window.",methods:[],displayName:"DefaultToolWindows",props:{windows:{required:!0,tsType:{name:"Array",elements:[{name:"DefaultToolWindow"}],raw:"DefaultToolWindow[]"},description:""},showNumbers:{required:!1,tsType:{name:"boolean"},description:""}}}},"./src/Tooltip/ActionHelpTooltip.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>ActionHelpTooltip});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Tooltip/Tooltip.tsx");const ActionHelpTooltip=({actionName,helpText,shortcut,link,...tooltipProps})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_1__.m_,{multiline:!0,...tooltipProps},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_1__.m_.Header,null,actionName,shortcut&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_1__.m_.Shortcut,null,shortcut)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_1__.m_.Description,null,helpText),link&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_1__.m_.Link,null,link));ActionHelpTooltip.__docgenInfo={description:'Tooltip of type "Action Help"\n@see {@link ActionTooltip} {@link HelpTooltip}\n@see https://jetbrains.github.io/ui/controls/tooltip/#02',methods:[],displayName:"ActionHelpTooltip",props:{actionName:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},helpText:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},shortcut:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},link:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}},composes:["Omit"]}},"./src/Tooltip/PositionedTooltipTrigger.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>PositionedTooltipTrigger});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_stately_tooltip__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@react-stately/tooltip/dist/useTooltipTriggerState.mjs"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/useOverlayPosition.mjs"),_TooltipTriggerAndOverlay__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/Tooltip/TooltipTriggerAndOverlay.tsx"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs");const PositionedTooltipTrigger=({tooltip,children,delay=500,offset=8,showOnFocus,triggerRef:inputTriggerRef,...props})=>{const state=(0,_react_stately_tooltip__WEBPACK_IMPORTED_MODULE_1__.O)({...props,delay}),overlayRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),fallbackRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_2__.U)(inputTriggerRef),triggerRef=inputTriggerRef||fallbackRef,positionAria=(0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_3__.v)({...props,overlayRef,targetRef:triggerRef,offset,isOpen:state.isOpen,onClose:state.close});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{state.isOpen&&requestAnimationFrame(positionAria.updatePosition)}),[state.isOpen]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_TooltipTriggerAndOverlay__WEBPACK_IMPORTED_MODULE_4__.R,{tooltip,positionAria,trigger:children,state,overlayRef,triggerRef,showOnFocus,isDisabled:props.isDisabled})};PositionedTooltipTrigger.__docgenInfo={description:"Sets {@param tooltip} for its {@param children}. Tooltip will be positioned based relative to the trigger.\nThe default tooltip positioning is based on cursor, which is implemented by {@link TooltipTrigger}",methods:[],displayName:"PositionedTooltipTrigger",props:{tooltip:{required:!0,tsType:{name:"ReactElement"},description:"Tooltip content. The value should be an element of type {@link Tooltip}."},children:{required:!0,tsType:{name:"union",raw:"| React.ReactNode\n| ((\n    props: HTMLAttributes<HTMLElement> & { ref: RefObject<T> }\n  ) => React.ReactNode)",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"unknown"}]},description:"Either a focusable component, or a render function which accepts trigger props and passes it to some component."},showOnFocus:{required:!1,tsType:{name:"boolean"},description:"Whether to show the tooltip on trigger's focus. By default, tooltip is shown only when the trigger\nis hovered, but it can improve accessibility to show the tooltip on focus as well."},triggerRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"T"}],raw:"RefObject<T>"},description:"Ref to trigger.\nIf not provided, a ref will be created internally.\nUseful for when a ref to the trigger is necessary where PositionedTooltipTrigger\nis used."},delay:{defaultValue:{value:"500",computed:!1},required:!1},offset:{defaultValue:{value:"8",computed:!1},required:!1}},composes:["Omit","Pick"]}},"./src/Tooltip/ValidationTooltip.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>ValidationTooltip});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Tooltip/Tooltip.tsx"),_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts");const StyledValidationTooltip=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4)(_intellij_platform_core_Tooltip_Tooltip__WEBPACK_IMPORTED_MODULE_2__.m_)`
  box-shadow: none;
  padding: 0.25rem 0.5rem; // from ComponentValidator class in the reference impl
  max-width: ${({theme})=>`${theme.value("ValidationTooltip.maxWidth")}px`};
  background: ${({theme})=>theme.color("ValidationTooltip.errorBackground")};
  border: 1px solid
    ${({theme})=>theme.color("ValidationTooltip.errorBorderColor")};
`,StyledWarningValidationTooltip=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_1__.I4)(StyledValidationTooltip)`
  background: ${({theme})=>theme.color("ValidationTooltip.warningBackground")};
  border-color: ${({theme})=>theme.color("ValidationTooltip.warningBorderColor")};
`,ValidationTooltip=({type="error",children})=>{const Component="error"===type?StyledValidationTooltip:StyledWarningValidationTooltip;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,{multiline:!0},children)};ValidationTooltip.__docgenInfo={description:"Tooltip to be used for validation error messages\n@see https://jetbrains.github.io/ui/principles/validation_errors/",methods:[],displayName:"ValidationTooltip",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},type:{required:!1,tsType:{name:"union",raw:'"error" | "warning"',elements:[{name:"literal",value:'"error"'},{name:"literal",value:'"warning"'}]},description:"@default error",defaultValue:{value:'"error"',computed:!1}}}}},"./src/TreeActions/useTreeActions.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>useTreeActions});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/ActionSystem/CommonActionIds.ts"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Icon/PlatformIcon.tsx");function useTreeActions({treeRef}){return[{id:_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_1__.j.EXPAND_ALL,title:"Expand All",icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_2__.jE,{icon:"actions/expandall"}),actionPerformed:()=>{treeRef.current?.expandAll()}},{id:_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_1__.j.COLLAPSE_ALL,title:"Collapse All",icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_2__.jE,{icon:"actions/collapseall"}),actionPerformed:()=>{treeRef.current?.collapseAll()}},{id:_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_1__.j.EXPAND_SELECTION,title:"Expand Selection",actionPerformed:()=>{treeRef.current?.expandSelection()}},{id:_intellij_platform_core_ActionSystem__WEBPACK_IMPORTED_MODULE_1__.j.SHRINK_SELECTION,title:"Shrink Selection",actionPerformed:()=>{treeRef.current?.shrinkSelection()}}]}},"./src/story-helpers.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>styledComponentsControlsExclude});__webpack_require__("../../node_modules/react/index.js");const styledComponentsControlsExclude=["theme","as","forwardedAs","ref"]},"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=":module=>{"use strict";module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII="},"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjNDI0MjQyIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==":module=>{"use strict";module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjNDI0MjQyIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="},"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjQzVDNUM1Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==":module=>{"use strict";module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjQzVDNUM1Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="}}]);
//# sourceMappingURL=demo-stories.aeafdd24.iframe.bundle.js.map