"use strict";(self.webpackChunk_intellij_platform_core=self.webpackChunk_intellij_platform_core||[]).push([[2947],{"./src/LoadingSpinner/DelayedLoadingSpinner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>DelayedLoadingSpinner});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_LoadingSpinner_LoadingSpinner__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/LoadingSpinner/LoadingSpinner.tsx");const DEFAULT_LOADING_DELAY_MS=300;function DelayedLoadingSpinner({delay=DEFAULT_LOADING_DELAY_MS,...props}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Delayed,{delay},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_LoadingSpinner_LoadingSpinner__WEBPACK_IMPORTED_MODULE_1__.kt,props))}function Delayed({children,delay}){const[waitedEnough,setWaitedEnough]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const timer=setTimeout((()=>{setWaitedEnough(!0)}),delay);return()=>clearTimeout(timer)}),[]),waitedEnough?react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,children):null}DelayedLoadingSpinner.__docgenInfo={description:"{@link LoadingSpinner}, delayed",methods:[],displayName:"DelayedLoadingSpinner",props:{size:{required:!1,tsType:{name:"number"},description:"Loading spinner size in pixels\n@default {@link LOADING_SPINNER_SIZE_BIG}"},delay:{required:!1,tsType:{name:"number"},description:"delay for showing the loading spinner in ms.\n@default {@link DEFAULT_LOADING_DELAY_MS}",defaultValue:{value:"300",computed:!1}}},composes:["Omit"]}},"./src/LoadingSpinner/LoadingSpinner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{kt:()=>LoadingSpinner,xj:()=>LOADING_SPINNER_SIZE_SMALL});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js");const LOADING_SPINNER_SIZE_SMALL=16,LOADING_SPINNER_SIZE_BIG=32;function LoadingSpinner({size=LOADING_SPINNER_SIZE_BIG,...props}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{width:size,height:size,viewBox:"0 0 32 32",...props},react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{transform:"rotate(0 16 16)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{fill:"#7F8B91",fillOpacity:".9",fillRule:"evenodd",transform:"translate(-4 -4)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{width:"8",height:"4",x:"6",y:"18",opacity:".78"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{width:"4",height:"8",x:"18",y:"26",opacity:".62"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{width:"8",height:"4",x:"26",y:"18",opacity:".38"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{width:"4",height:"8",x:"18",y:"6"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{transform:"rotate(45 9.757 24.243)"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{width:"8",height:"4",y:"12",opacity:".93"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{width:"4",height:"8",x:"12",y:"20",opacity:".69"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{width:"8",height:"4",x:"20",y:"12",opacity:".48"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{width:"4",height:"8",x:"12",opacity:".3"}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("animateTransform",{attributeName:"transform",type:"rotate",values:"0 16 16; 45 16 16; 90 16 16; 135 16 16; 180 16 16; 225 16 16; 270 16 16; 315 16 16; 360 16 16",keyTimes:"0;0.125;0.25;0.375;0.5;0.625;0.75;0.875;1",dur:"1s",repeatCount:"indefinite",calcMode:"discrete"})))}LoadingSpinner.__docgenInfo={description:"Aka AsyncProcessIcon in Intellij Platform source.",methods:[],displayName:"LoadingSpinner",props:{size:{required:!1,tsType:{name:"number"},description:"Loading spinner size in pixels\n@default {@link LOADING_SPINNER_SIZE_BIG}",defaultValue:{value:"32",computed:!1}}},composes:["Omit"]}},"./src/Menu/MenuOverlay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>MenuOverlay});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useObjectRef.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/utils/dist/useLayoutEffect.mjs"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/@react-aria/utils/dist/mergeProps.mjs"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/useOverlay.mjs"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/ariaHideOutside.mjs"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/usePreventScroll.mjs"),_intellij_platform_core_utils_FocusScope__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/utils/FocusScope.tsx"),_intellij_platform_core_Menu_Menu__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/Menu/Menu.tsx"),_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Overlay/Overlay.tsx"),_intellij_platform_core_LoadingSpinner__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/LoadingSpinner/DelayedLoadingSpinner.tsx"),_intellij_platform_core_LoadingSpinner__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/LoadingSpinner/LoadingSpinner.tsx");function MenuOverlay({children,restoreFocus,autoFocus,overlayProps:otherOverlayProps,overlayRef:inputOverlayRef,defaultAutoFocus,onClose,suspense}){const overlayRef=(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_1__.U)(inputOverlayRef),overlayContainerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),{overlayProps}=(0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_2__.e)({onClose,shouldCloseOnBlur:!1,isOpen:!0,isKeyboardDismissDisabled:!1,isDismissable:!0,shouldCloseOnInteractOutside:element=>!(0,_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_3__.O)(overlayRef.current,element)},overlayRef);(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_4__.N)((()=>{if(overlayContainerRef.current)return(0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_5__.h)([overlayContainerRef.current])}),[overlayContainerRef]),(0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_6__.H)(),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const onOutsideContextMenu=()=>{onClose()};return document.addEventListener("contextmenu",onOutsideContextMenu,{capture:!0}),()=>document.removeEventListener("contextmenu",onOutsideContextMenu)}),[]);const MaybeSuspend=!1===suspense?react__WEBPACK_IMPORTED_MODULE_0__.Fragment:react__WEBPACK_IMPORTED_MODULE_0__.Suspense;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Overlay__WEBPACK_IMPORTED_MODULE_3__.h,{containerRef:overlayContainerRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_utils_FocusScope__WEBPACK_IMPORTED_MODULE_7__.n,{restoreFocus,autoFocus},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_Menu_Menu__WEBPACK_IMPORTED_MODULE_8__.Zk.Provider,{value:{close:onClose,defaultAutoFocus}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_9__.v)(overlayProps,otherOverlayProps),ref:overlayRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement(MaybeSuspend,{fallback:void 0===suspense?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_intellij_platform_core_LoadingSpinner__WEBPACK_IMPORTED_MODULE_10__.e,{size:_intellij_platform_core_LoadingSpinner__WEBPACK_IMPORTED_MODULE_11__.xj}):suspense},children)))))}MenuOverlay.__docgenInfo={description:"Overlay container for Menu.\nPositioning is not implemented at this layer.\n{@link MenuOverlayProps#overlayProps} should be used for positioning.",methods:[],displayName:"MenuOverlay",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},restoreFocus:{required:!1,tsType:{name:"boolean"},description:""},autoFocus:{required:!1,tsType:{name:"boolean"},description:""},overlayProps:{required:!0,tsType:{name:"HTMLProps",elements:[{name:"HTMLDivElement"}],raw:"HTMLProps<HTMLDivElement>"},description:""},overlayRef:{required:!1,tsType:{name:"ReactRef",raw:"React.Ref<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},description:""},defaultAutoFocus:{required:!1,tsType:{name:'MenuProps["autoFocus"]',raw:'MenuProps<unknown>["autoFocus"]'},description:"Sets the default value of {@link Menu}'s {@link MenuProps#autoFocus} prop."},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},suspense:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}},"./src/Menu/MenuTrigger.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>MenuTrigger});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_react_aria_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@react-aria/button/dist/useButton.mjs"),_react_aria_menu__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@react-aria/menu/dist/useMenuTrigger.mjs"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/useOverlayPosition.mjs"),_react_stately_menu__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@react-stately/menu/dist/useMenuTriggerState.mjs"),_MenuOverlay__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/Menu/MenuOverlay.tsx"),_react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@react-aria/interactions/dist/PressResponder.mjs");const MenuTrigger=({children,renderMenu,elementType="button",direction="bottom",align="start",shouldFlip=!0,restoreFocus=!0,preventFocusOnPress=!0,suspense,positioningTargetRef,...otherProps})=>{const state=(0,_react_stately_menu__WEBPACK_IMPORTED_MODULE_1__.I)(otherProps),triggerRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),overlayRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),{menuTriggerProps:triggerProps,menuProps}=(0,_react_aria_menu__WEBPACK_IMPORTED_MODULE_2__.V)({type:"menu"},state,triggerRef),ariaButtonProps={...triggerProps,elementType,preventFocusOnPress},{buttonProps}=(0,_react_aria_button__WEBPACK_IMPORTED_MODULE_3__.s)(ariaButtonProps,triggerRef),{overlayProps:positionProps}=(0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_4__.v)({targetRef:positioningTargetRef??triggerRef,overlayRef,placement:getPlacement(direction,align),shouldFlip,offset:0,containerPadding:0,onClose:()=>state.close(),isOpen:state.isOpen});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,"function"==typeof children?children(buttonProps,triggerRef):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_aria_interactions__WEBPACK_IMPORTED_MODULE_5__.Y,{ref:triggerRef,...buttonProps},children),state.isOpen&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_MenuOverlay__WEBPACK_IMPORTED_MODULE_6__.W,{overlayProps:positionProps,overlayRef,onClose:state.close,restoreFocus,suspense},renderMenu({menuProps})))};function getPlacement(direction,align){switch(direction){case"left":case"right":case"start":case"end":return`${direction} ${"end"===align?"bottom":"top"}`;default:return`${direction} ${align}`}}MenuTrigger.__docgenInfo={description:"Makes its children a trigger for a menu, rendered via {@link MenuTriggerProps#renderMenu} prop.\nCloses the menu when a menu action is triggered.",methods:[],displayName:"MenuTrigger",props:{restoreFocus:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},children:{required:!0,tsType:{name:"union",raw:'| ((\n    props: "button" extends E\n      ? HTMLAttributes<HTMLButtonElement>\n      : HTMLAttributes<HTMLAnchorElement>,\n    ref: RefObject<any> // Using a generic didn\'t seem to work for some reason\n  ) => React.ReactNode)\n| React.ReactElement',elements:[{name:"unknown"},{name:"ReactReactElement",raw:"React.ReactElement"}]},description:""},preventFocusOnPress:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},positioningTargetRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLElement>",elements:[{name:"HTMLElement"}]},description:"By default, the menu is positioned relative to the trigger. `positioningTargetRef` can be used to have the menu\npositioned to another element. An example use case is when the menu trigger is a button inside some list item or\ntext box, but the menu semantically belongs to the container list item or text box."},elementType:{required:!1,tsType:{name:"E"},description:"",defaultValue:{value:'"button"',computed:!1}},renderMenu:{required:!0,tsType:{name:"signature",type:"function",raw:'(props: {\n  // AriaMenuOptions contains more properties than needed\n  menuProps: Pick<\n    AriaMenuOptions<unknown>,\n    "id" | "aria-labelledby" | "autoFocus" | "onClose"\n  >;\n}) => React.ReactNode',signature:{arguments:[{type:{name:"signature",type:"object",raw:'{\n  // AriaMenuOptions contains more properties than needed\n  menuProps: Pick<\n    AriaMenuOptions<unknown>,\n    "id" | "aria-labelledby" | "autoFocus" | "onClose"\n  >;\n}',signature:{properties:[{key:"menuProps",value:{name:"Pick",elements:[{name:"AriaMenuOptions",elements:[{name:"unknown"}],raw:"AriaMenuOptions<unknown>"},{name:"union",raw:'"id" | "aria-labelledby" | "autoFocus" | "onClose"',elements:[{name:"literal",value:'"id"'},{name:"literal",value:'"aria-labelledby"'},{name:"literal",value:'"autoFocus"'},{name:"literal",value:'"onClose"'}]}],raw:'Pick<\n  AriaMenuOptions<unknown>,\n  "id" | "aria-labelledby" | "autoFocus" | "onClose"\n>',required:!0}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},suspense:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},align:{required:!1,tsType:{name:"Alignment"},description:"Alignment of the menu relative to the trigger.\n@default 'start'",defaultValue:{value:'"start"',computed:!1}},direction:{required:!1,tsType:{name:"union",raw:'"bottom" | "top" | "left" | "right" | "start" | "end"',elements:[{name:"literal",value:'"bottom"'},{name:"literal",value:'"top"'},{name:"literal",value:'"left"'},{name:"literal",value:'"right"'},{name:"literal",value:'"start"'},{name:"literal",value:'"end"'}]},description:"Where the Menu opens relative to its trigger.\n@default 'bottom'",defaultValue:{value:'"bottom"',computed:!1}},shouldFlip:{required:!1,tsType:{name:"boolean"},description:"Whether the menu should automatically flip direction when space is limited.\n@default true",defaultValue:{value:"true",computed:!1}}},composes:["Omit"]}},"./src/utils/FocusScope.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>FocusScope});var _react_aria_focus__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@react-aria/focus/dist/FocusScope.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js");const FocusScope=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function BetterFocusScope({children,...otherProps},ref){const directChildRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),focusManagerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref,(()=>({focus:forceFocusFirst=>{const focusManager=focusManagerRef.current,containerElement=directChildRef.current?.parentElement;if(!focusManager)throw new Error("focus manager not found!");if(!containerElement)throw new Error("container element not found");if(forceFocusFirst)return focusManager.focusFirst();document.activeElement&&document.activeElement!==containerElement&&containerElement.contains(document.activeElement)||focusManager.focusNext({tabbable:!0})}})),[]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_aria_focus__WEBPACK_IMPORTED_MODULE_1__.n1,otherProps,react__WEBPACK_IMPORTED_MODULE_0__.createElement(GetFocusManager,{ref:focusManagerRef}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{"data-focus-root-direct-child":"",hidden:!0,ref:directChildRef}),children)})),GetFocusManager=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function FocusScopeHandle(props,ref){const focusManager=(0,_react_aria_focus__WEBPACK_IMPORTED_MODULE_1__.H8)();return(0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref,(()=>focusManager),[focusManager]),null}));FocusScope.__docgenInfo={description:"A version of FocusScope which also allows for imperatively moving focus to the scope.\nand has tiny patches/improvements\nIt's useful for",methods:[{name:"focus",docblock:null,modifiers:[],params:[{name:"forceFocusFirst",optional:!0,type:{name:"boolean"}}],returns:null}],displayName:"FocusScope"}}}]);