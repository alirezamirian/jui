"use strict";(self.webpackChunk_intellij_platform_core=self.webpackChunk_intellij_platform_core||[]).push([[2397],{"./src/Collections/Divider.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,{P:()=>DividerItem,i:()=>_Divider});class DividerItem{constructor(){_defineProperty(this,"key","divider_"+DividerItem.seq++)}get id(){return this.key}}function Divider({}){return null}_defineProperty(DividerItem,"seq",0);let _Divider=Divider;Divider.getCollectionNode=function*getCollectionNode(props){yield{type:"divider",element:null,props,rendered:null,hasChildNodes:!1}}},"./src/Icon/AutoHoverPlatformIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{v:()=>AutoHoverPlatformIcon});var _intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/styled.ts"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_PlatformIcon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/Icon/PlatformIcon.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledHoverContainer=_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo.span`
  ${({hoverContainerSelector})=>hoverContainerSelector?`${hoverContainerSelector} &`:""} .icon[data-hover] {
    display: none;
  }

  ${({hoverContainerSelector})=>hoverContainerSelector?`${hoverContainerSelector}:hover &`:"&:hover"} {
    .icon {
      display: none;
    }

    .icon[data-hover] {
      display: inline-flex;
    }
  }
`,StyledIconHoverContainer=(0,_intellij_platform_core_styled__WEBPACK_IMPORTED_MODULE_2__.zo)(StyledHoverContainer)`
  display: inline-flex;
`,AutoHoverPlatformIcon=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function AutoHoverPlatformIcon({hoverIcon,hoverContainerSelector,...props},ref){const className=`icon ${props.className||""}`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledIconHoverContainer,{ref,hoverContainerSelector,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_PlatformIcon__WEBPACK_IMPORTED_MODULE_3__.vq,{...props,className}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_PlatformIcon__WEBPACK_IMPORTED_MODULE_3__.vq,{...props,className,icon:hoverIcon??(0,_PlatformIcon__WEBPACK_IMPORTED_MODULE_3__.qb)(props.icon,"Hover"),"data-hover":!0})]})}));try{StyledHoverContainer.displayName="StyledHoverContainer",StyledHoverContainer.__docgenInfo={description:"",displayName:"StyledHoverContainer",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}},hoverContainerSelector:{defaultValue:null,description:"",name:"hoverContainerSelector",required:!1,type:{name:"string"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme<KnownThemePropertyPath>"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Icon/AutoHoverPlatformIcon.tsx#StyledHoverContainer"]={docgenInfo:StyledHoverContainer.__docgenInfo,name:"StyledHoverContainer",path:"src/Icon/AutoHoverPlatformIcon.tsx#StyledHoverContainer"})}catch(__react_docgen_typescript_loader_error){}try{AutoHoverPlatformIcon.displayName="AutoHoverPlatformIcon",AutoHoverPlatformIcon.__docgenInfo={description:'A common use case for PlatformIcons is to have a default icon and a hover icon.\nThis component captures that simple use case, by rendering both icons, and hiding one based on a hover selector.\n\n### Parent hover container\n\nIf the hover-able element is a parent of the icon, and not the icon itself (i.e., the icon should change if the\nthat parent is hovered), you can use `StyledHoverContainer` to define that parent element:\n\n```tsx\nconst SomeParent = styled(StyledHoverContainer)`...`;\n<SomeParent><AutoHoverPlatformIcon icon="..." /></SomeParent>\n```\n\nIf the hover-able element is a parent of the icon, with a known selector, you can pass `hoverContainerSelector`,\ninstead of using `StyledHoverContainer`:\n\n```tsx\n<AutoHoverPlatformIcon icon="..." hoverContainerSelector="[role=menuitem]" />\n```\n\nIf the hover container is a styled component, you can have it converted to selector like this:\n\n```tsx\n<AutoHoverPlatformIcon icon="..." hoverContainerSelector={`${MyStyledHoverContainer}`} />\n```\n\nIn all examples above, the hover icon is shown when the parent is hovered, instead of the icon itself.',displayName:"AutoHoverPlatformIcon",props:{icon:{defaultValue:null,description:'Icon path in intellij platform repo.\nIf starts with "/", the path will be from the repo root. Otherwise, it\'s relative to "platform/icons/src".\n".svg" extension is optional.',name:"icon",required:!0,type:{name:"string"}},darkIcon:{defaultValue:null,description:"Similar to icon, but for dark themes.",name:"darkIcon",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"Additional node going into the icon wrapper. Such as indicators.",name:"children",required:!1,type:{name:"ReactNode"}},hoverIcon:{defaultValue:null,description:'The icon to be used when hovered. If not provided, it will be the "somethingHovered" where "something" is the `icon`',name:"hoverIcon",required:!1,type:{name:"string"}},hoverContainerSelector:{defaultValue:null,description:"",name:"hoverContainerSelector",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Icon/AutoHoverPlatformIcon.tsx#AutoHoverPlatformIcon"]={docgenInfo:AutoHoverPlatformIcon.__docgenInfo,name:"AutoHoverPlatformIcon",path:"src/Icon/AutoHoverPlatformIcon.tsx#AutoHoverPlatformIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/Menu/MenuItemLayout.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>MenuItemLayout});var react=__webpack_require__("../../node_modules/react/index.js"),ItemStateContext=__webpack_require__("./src/Collections/ItemStateContext.tsx"),styled=__webpack_require__("./src/styled.ts");var MenuItem=__webpack_require__("./src/Menu/MenuItem.tsx"),StyledMenuItem=__webpack_require__("./src/Menu/StyledMenuItem.tsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledMenuItemLayout=styled.zo.div`
  display: flex;
  align-items: center;
  flex: 1; // to make sure it takes as much space as available in the menu item row, so that the suffix (shortcut) is pushed to the right
`,Content=styled.zo.span`
  flex: 1;
`,Shortcut=styled.zo.kbd`
  font-family: system-ui, sans-serif;
  margin-left: 30px;
  margin-right: -0.625rem;
  color: ${({theme})=>theme.currentForegroundAware(theme.color("MenuItem.acceleratorForeground"))};
`,MenuItemLayout=({content,shortcut,icon})=>{const{isSelected}=((Context,nullErrorMessage)=>{const context=(0,react.useContext)(Context);if(null==context)throw new Error(nullErrorMessage);return context})(ItemStateContext.k,"MenuItemLayout is meant to be rendered in Item component in Menus"),{labelProps,keyboardShortcutProps}=(0,MenuItem.q)(),allowedIcon=!isSelected&&icon;return(0,jsx_runtime.jsxs)(StyledMenuItemLayout,{children:[allowedIcon&&(0,jsx_runtime.jsx)(StyledMenuItem.oS,{children:allowedIcon}),(0,jsx_runtime.jsx)(Content,{...labelProps,children:content}),shortcut&&(0,jsx_runtime.jsx)(Shortcut,{...keyboardShortcutProps,children:shortcut})]})};MenuItemLayout.displayName="MenuItemLayout";try{MenuItemLayout.displayName="MenuItemLayout",MenuItemLayout.__docgenInfo={description:"",displayName:"MenuItemLayout",props:{icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"ReactNode"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"ReactNode"}},shortcut:{defaultValue:null,description:"",name:"shortcut",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Menu/MenuItemLayout.tsx#MenuItemLayout"]={docgenInfo:MenuItemLayout.__docgenInfo,name:"MenuItemLayout",path:"src/Menu/MenuItemLayout.tsx#MenuItemLayout"})}catch(__react_docgen_typescript_loader_error){}},"./src/Menu/SpeedSearchMenu.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>SpeedSearchMenu});var react=__webpack_require__("../../node_modules/react/index.js"),dist_module=__webpack_require__("../../node_modules/@react-aria/utils/dist/module.js"),focus_dist_module=__webpack_require__("../../node_modules/@react-aria/focus/dist/module.js"),list_dist_module=__webpack_require__("../../node_modules/@react-stately/list/dist/module.js"),useEventCallback=__webpack_require__("./src/utils/useEventCallback.ts"),useCollectionSpeedSearch=__webpack_require__("./src/CollectionSpeedSearch/useCollectionSpeedSearch.ts"),button_dist_module=__webpack_require__("../../node_modules/@react-aria/button/dist/module.js"),PlatformIcon=__webpack_require__("./src/Icon/PlatformIcon.tsx"),AutoHoverPlatformIcon=__webpack_require__("./src/Icon/AutoHoverPlatformIcon.tsx"),styled=__webpack_require__("./src/styled.ts"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledSearchIcon=(0,styled.zo)(PlatformIcon.vq)`
  margin-right: 0.25rem;
`,StyledSpeedSearchInput=styled.zo.span`
  box-sizing: border-box;
  display: flex;
  align-items: center;
  background: ${({theme,noMatch})=>noMatch?theme.color("SearchField.errorBackground",theme.dark?"#743A3A":"#ffcccc"):theme.color("TextField.background")}; // fallback logic not checked with the ref impl
  color: ${({theme})=>theme.color("TextField.foreground")}; // fallback logic not checked with the ref impl
  height: 1.5rem; // 24px, JBTextField COMPACT_HEIGHT
  padding: 0.125rem 0.375rem;
  border: 1px solid ${({theme})=>theme.getOutlineColor(!0,!1)};
  border-radius: ${({theme})=>(theme.value("Component.arc")??5)/2}px;
`,StyledSearchText=styled.zo.span`
  flex: 1;
  font-size: 0.91em; // RelativeFont.SMALL
`,SpeedSearchInput=react.forwardRef((({active,match,children,clear},ref)=>{const clearButtonRef=(0,react.useRef)(null),{buttonProps}=(0,button_dist_module.U)({elementType:"span","aria-label":"Clear search",excludeFromTabOrder:!0,preventFocusOnPress:!0,onPress:clear},clearButtonRef);return active?(0,jsx_runtime.jsxs)(StyledSpeedSearchInput,{ref,noMatch:!match,children:[(0,jsx_runtime.jsx)(StyledSearchIcon,{icon:"actions/search"}),(0,jsx_runtime.jsx)(StyledSearchText,{children:(children||"").replace(/ /g,"Â ")}),children&&(0,jsx_runtime.jsx)(AutoHoverPlatformIcon.v,{...buttonProps,ref:clearButtonRef,icon:"actions/close",hoverIcon:"actions/closeHovered"})]}):null}));try{SpeedSearchInput.displayName="SpeedSearchInput",SpeedSearchInput.__docgenInfo={description:"An input field to be rendered to show the filter value in speed search in menus and similar speedSearch-enabled\ncomponents.",displayName:"SpeedSearchInput",props:{match:{defaultValue:null,description:"",name:"match",required:!1,type:{name:"boolean"}},active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"boolean | undefined"}},clear:{defaultValue:null,description:"",name:"clear",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/SpeedSearch/SpeedSearchInput.tsx#SpeedSearchInput"]={docgenInfo:SpeedSearchInput.__docgenInfo,name:"SpeedSearchInput",path:"src/SpeedSearch/SpeedSearchInput.tsx#SpeedSearchInput"})}catch(__react_docgen_typescript_loader_error){}var StyledMenu=__webpack_require__("./src/Menu/StyledMenu.tsx"),Menu=__webpack_require__("./src/Menu/Menu.tsx"),renderMenuNodes=__webpack_require__("./src/Menu/renderMenuNodes.tsx"),Submenu=__webpack_require__("./src/Menu/Submenu.tsx"),_useSubmenuState=__webpack_require__("./src/Menu/_useSubmenuState.tsx"),_useSubmenu=__webpack_require__("./src/Menu/_useSubmenu.ts"),StyledSeparator=__webpack_require__("./src/StyledSeparator.tsx");const StyledItemsContainer=styled.zo.ul`
  all: unset;
  flex: 1;
  overflow: auto;
`,StyledSearchFieldWrapper=styled.zo.div`
  flex-shrink: 0;
  padding: 0 0.2rem 0.3rem;
`,StyledSpeedSearchMenu=(0,styled.zo)(StyledMenu.l2)`
  --jui-menu-item-padding: 1.25rem;
  ${StyledSeparator.lX} {
    margin: 0 3px; // FIXME: probably use theme
  }
`,StyledPlaceholder=styled.zo.div`
  color: ${({theme})=>theme.color("Component.infoForeground",theme.dark?"#787878":"#999999")};

  // center positioning. Intentionally different from reference impl.
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;

  white-space: nowrap;
`;function useSpeedSearchMenu(state,rootKey,ref,containerRef){const{speedSearch,selectionManager,keyboardDelegate,containerProps:speedSearchContainerProps,searchPopupProps}=(0,useCollectionSpeedSearch.q)({collection:(0,react.useMemo)((()=>new list_dist_module.DC(rootKey?state.collection.getItem(rootKey).childNodes:state.collection)),[rootKey,state.collection]),selectionManager:state.selectionManager,keyboardDelegate:new _useSubmenu.R(rootKey,state.collection,state.disabledKeys,ref),stickySearch:!0,focusBestMatch:!0,ref});(0,react.useEffect)((()=>{const element=ref.current;element&&state.selectionManager.isFocused&&!element?.contains(document.activeElement)&&(0,focus_dist_module.ex)(element)}));const lastSize=(0,react.useRef)(null),[size,setSize]=(0,react.useState)(null),measureSize=()=>{const{offsetWidth=0,offsetHeight=0}=containerRef.current||{};offsetWidth>0&&offsetHeight>0&&(lastSize.current={width:offsetWidth,height:offsetHeight})},isSearchActive=speedSearch.active&&speedSearch.searchTerm.length>0;(0,dist_module.yU)({ref:containerRef,onResize:(0,useEventCallback.$)((()=>{isSearchActive||measureSize()}))}),(0,dist_module.bt)((()=>{isSearchActive?lastSize.current&&setSize(lastSize.current):(lastSize.current||measureSize(),setSize(null))}),[isSearchActive]);const sizeStyleProps=size?{style:{...size,minHeight:size.height,maxHeight:size.height}}:{};return{speedSearch,keyboardDelegate,selectionManager,speedSearchContainerProps:(0,dist_module.dG)(speedSearchContainerProps,sizeStyleProps,{onMouseDown:e=>{e.preventDefault()}}),searchPopupProps}}const SpeedSearchMenu=({submenuBehavior="toggleOnPress",autoFocus="first",emptyText="Nothing to show",...props})=>{const ref=react.useRef(null),containerRef=react.useRef(null),state=(0,Menu.w8)({...props}),{speedSearch,speedSearchContainerProps,searchPopupProps,keyboardDelegate}=useSpeedSearchMenu(state,null,ref,containerRef),{menuContextValue,menuProps}=(0,Menu.H9)({...props,autoFocus,onAction:key=>{props.onAction?.(key),speedSearch.clear()},keyboardDelegate,submenuBehavior},state,ref);return(0,jsx_runtime.jsx)(Menu.pl.Provider,{value:{...menuContextValue,renderSubmenu:props=>(0,jsx_runtime.jsx)(SpeedSearchSubmenu,{emptyText,...props})},children:(0,jsx_runtime.jsx)(StyledSpeedSearchMenu,{as:"div",ref:containerRef,...speedSearchContainerProps,fillAvailableSpace:props.fillAvailableSpace,children:(0,jsx_runtime.jsx)(SpeedSearchMenuContent,{items:[...state.collection],emptyText,speedSearch,searchPopupProps,state,menuProps,menuRef:ref})})})};function SpeedSearchMenuContent({items,state,speedSearch,searchPopupProps,menuProps,menuRef,emptyText}){const filter=speedSearch.active?({key,type})=>"item"!==type||speedSearch.matches.has(key):void 0;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[searchPopupProps.children&&(0,jsx_runtime.jsx)(StyledSearchFieldWrapper,{onClick:e=>{e.preventDefault()},children:(0,jsx_runtime.jsx)(SpeedSearchInput,{...searchPopupProps,clear:speedSearch.clear})}),(0,jsx_runtime.jsxs)(StyledItemsContainer,{...menuProps,ref:menuRef,children:[(0,renderMenuNodes.p)(state,items,filter),speedSearch.active&&0===speedSearch.matches.size&&(0,jsx_runtime.jsx)(StyledPlaceholder,{children:emptyText})]})]})}function SpeedSearchSubmenu({parentState,rootKey,emptyText}){const ref=(0,react.useRef)(null),containerRef=(0,react.useRef)(null),state=(0,_useSubmenuState.P)(parentState),rootItem=state.collection.getItem(rootKey),{speedSearch,speedSearchContainerProps,searchPopupProps,keyboardDelegate}=useSpeedSearchMenu(state,rootKey,ref,containerRef),{submenuProps}=(0,Submenu.d)({rootKey,parentState,keyboardDelegate},state,ref);return(0,jsx_runtime.jsx)(StyledSpeedSearchMenu,{...speedSearchContainerProps,as:"div",ref:containerRef,children:(0,jsx_runtime.jsx)(SpeedSearchMenuContent,{items:[...rootItem?.childNodes||[]],speedSearch,searchPopupProps,state,menuProps:submenuProps,menuRef:ref,emptyText})})}SpeedSearchMenu.displayName="SpeedSearchMenu",SpeedSearchSubmenu.displayName="SpeedSearchSubmenu";try{SpeedSearchMenu.displayName="SpeedSearchMenu",SpeedSearchMenu.__docgenInfo={description:"Drop-in replacement for Menu, which implements SpeedSearch.",displayName:"SpeedSearchMenu",props:{submenuBehavior:{defaultValue:{value:"toggleOnPress"},description:"",name:"submenuBehavior",required:!1,type:{name:"enum",value:[{value:'"toggleOnPress"'},{value:'"actionOnPress"'}]}},emptyText:{defaultValue:{value:"Nothing to show"},description:"Text to show when the filtering is active but no match is found for the current query.",name:"emptyText",required:!1,type:{name:"ReactNode"}},fillAvailableSpace:{defaultValue:null,description:"fills the available horizontal or vertical space, when rendered in a flex container.",name:"fillAvailableSpace",required:!1,type:{name:"boolean"}},expandedKey:{defaultValue:null,description:"Indicates currently expanded menu item (controlled).",name:"expandedKey",required:!1,type:{name:"Key"}},onExpandedKeyChange:{defaultValue:null,description:"Called when expanded menu item is changed by user interaction, which can be either hovering over the menu item",name:"onExpandedKeyChange",required:!1,type:{name:"((expandedKey: Key) => void)"}},defaultExpandedKey:{defaultValue:null,description:"",name:"defaultExpandedKey",required:!1,type:{name:"Key"}},expandOn:{defaultValue:null,description:"@deprecated",name:"expandOn",required:!1,type:{name:"enum",value:[{value:'"hover"'},{value:'"press"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Menu/SpeedSearchMenu.tsx#SpeedSearchMenu"]={docgenInfo:SpeedSearchMenu.__docgenInfo,name:"SpeedSearchMenu",path:"src/Menu/SpeedSearchMenu.tsx#SpeedSearchMenu"})}catch(__react_docgen_typescript_loader_error){}},"./src/Toolbar/Toolbar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>ToolbarSeparator,o:()=>Toolbar});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_styled__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/styled.ts"),_StyledSeparator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/StyledSeparator.tsx"),_intellij_platform_core_utils_overflow_utils_useOverflowObserver__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/utils/overflow-utils/useOverflowObserver.tsx"),_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/Icon/PlatformIcon.tsx"),_react_aria_overlays__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@react-aria/overlays/dist/module.js"),_intellij_platform_core_Popup_Popup__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/Popup/Popup.tsx"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_react_aria_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/@react-aria/utils/dist/module.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const borderStyle=({border})=>border&&(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.iv)(["border-style:solid;border-color:",";border-width:",";"],(({theme})=>theme.color("Borders.color",theme.dark?"rgb(50,50,50)":"rgb(192, 192, 192)")),!0===border?"1px":borderPropToCssProp[border]),StyledToolbar=_styled__WEBPACK_IMPORTED_MODULE_3__.zo.div`
  display: inline-flex;
  box-sizing: border-box;
  overflow: hidden;
  // NOTE: in the original implementation, there is no empty space between buttons, but buttons have kind of an
  // invisible left padding, which is mouse-intractable, but doesn't visually seem a part of the button.
  // Although implementable, it didn't seem necessary to follow the exact same thing. Margin should be fine.
  gap: 4px;
  ${borderStyle}
  ${_StyledSeparator__WEBPACK_IMPORTED_MODULE_4__.mc}:first-child {
    display: none;
  }
  ${_StyledSeparator__WEBPACK_IMPORTED_MODULE_4__.mc}:last-child {
    display: none;
  }
`,borderPropToCssProp={top:"1px 0 0 0",bottom:"0 0 1px 0",right:"0 1px 0 0",left:"0 0 0 1px",horizontal:"0 1px",vertical:"1px 0"},StyledShowMoreButton=_styled__WEBPACK_IMPORTED_MODULE_3__.zo.button`
  all: unset;
  display: flex;
  justify-content: center;
  align-items: center;
  ${borderStyle};
`,StyledHorizontalToolbar=(0,_styled__WEBPACK_IMPORTED_MODULE_3__.zo)(StyledToolbar)`
  padding: ${3}px ${4}px;
  max-width: 100%;
  /*noinspection CssInvalidPropertyValue*/
  max-width: -webkit-fill-available;
  ${_StyledSeparator__WEBPACK_IMPORTED_MODULE_4__.ve} {
    margin: 1px 0;
  }
  ${StyledShowMoreButton} {
    margin-right: -${4}px;
  }
`,StyledVerticalToolbar=(0,_styled__WEBPACK_IMPORTED_MODULE_3__.zo)(StyledToolbar)`
  flex-direction: column;
  max-height: 100%;
  /*noinspection CssInvalidPropertyValue*/
  max-height: -webkit-fill-available;
  padding: ${4}px ${3}px;
  ${_StyledSeparator__WEBPACK_IMPORTED_MODULE_4__.lX} {
    margin: 0 1px;
  }
  ${StyledShowMoreButton} {
    margin-bottom: -${4}px;
  }
`,StyledToolbarContent=_styled__WEBPACK_IMPORTED_MODULE_3__.zo.div`
  box-sizing: inherit;
  display: inherit;
  flex-direction: inherit;
  flex-wrap: ${({wrap})=>wrap?"wrap":"nowrap"};
  gap: inherit;
  max-height: inherit;
  max-width: inherit;
  min-height: 0;
  min-width: 0;

  ${({firstOverflowedIndex})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.iv)([">:nth-child(",") ~ *{opacity:0 !important;pointer-events:none !important;}"],firstOverflowedIndex)}
`,OrientationContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext("horizontal"),Toolbar=({border,orientation="horizontal",...props})=>{const overflowBehavior="horizontal"===orientation&&"overflowBehavior"in props?props.overflowBehavior:null,rootProps={style:props.style,className:props.className},ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),overlayRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),showMoreButtonRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),StyledToolbar="horizontal"===orientation?StyledHorizontalToolbar:StyledVerticalToolbar,{overflowedElements}=(0,_intellij_platform_core_utils_overflow_utils_useOverflowObserver__WEBPACK_IMPORTED_MODULE_5__.o)(ref,{threshold:.8}),[isOverflowPopupVisible,setOverflowPopupVisible]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[popupHeight,setPopupHeight]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(30),[firstOverflowedChildIndex,setFirstOverflowedChildIndex]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(-1),firstOverflowedChildRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{if(ref.current){const childElements=[...ref.current.children].filter((node=>node instanceof HTMLElement)),firstOverflowedChild=childElements.findIndex((child=>overflowedElements.includes(child)));setFirstOverflowedChildIndex(firstOverflowedChild),firstOverflowedChildRef.current=childElements[firstOverflowedChild]}}),[overflowedElements]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{overlayRef.current&&popupHeight!==overlayRef.current.offsetHeight&&setPopupHeight(overlayRef.current.offsetHeight)}));const{overlayProps}=(0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_6__.tN)({isOpen:isOverflowPopupVisible,placement:"bottom left",offset:"horizontal"===orientation?3-popupHeight+1:1-popupHeight,crossOffset:"horizontal"===orientation?-5:-4,containerPadding:0,shouldFlip:!1,targetRef:"horizontal"===orientation?ref:showMoreButtonRef,overlayRef,onClose:()=>{setOverflowPopupVisible(!1)}}),toolbarProps={onMouseMove:event=>{const firstOverflowedElement=firstOverflowedChildRef.current;if(!firstOverflowedElement)return;const shouldShow="vertical"===orientation?event.clientY>firstOverflowedElement.getBoundingClientRect().top:event.clientX>firstOverflowedElement.getBoundingClientRect().left;shouldShow!==isOverflowPopupVisible&&setOverflowPopupVisible(shouldShow)},onMouseLeave:()=>{isOverflowPopupVisible&&setOverflowPopupVisible(!1)}},toolbarOverflowPopupProps={onMouseEnter:()=>setOverflowPopupVisible(!0),onMouseLeave:()=>setOverflowPopupVisible(!1)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(OrientationContext.Provider,{value:orientation,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(StyledToolbar,{border,...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_7__.dG)(rootProps,toolbarProps),role:"toolbar",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledToolbarContent,{ref,role:"presentation",firstOverflowedIndex:firstOverflowedChildIndex,wrap:"wrap"===overflowBehavior,children:props.children}),overflowedElements.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(StyledShowMoreButton,{ref:showMoreButtonRef,onMouseEnter:()=>{setOverflowPopupVisible(!0)},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Icon__WEBPACK_IMPORTED_MODULE_8__.vq,{icon:"ide/link"})})]}),isOverflowPopupVisible&&overflowedElements.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(OrientationContext.Provider,{value:"horizontal",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_react_aria_overlays__WEBPACK_IMPORTED_MODULE_6__.aV,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_intellij_platform_core_Popup_Popup__WEBPACK_IMPORTED_MODULE_9__.eE,{ref:overlayRef,...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_7__.dG)(overlayProps,toolbarOverflowPopupProps),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ToolbarInOverlay,{border:!0,firstVisibleIndex:"vertical"===orientation?firstOverflowedChildIndex:void 0,children:props.children})})})})]})};Toolbar.displayName="Toolbar";const ToolbarInOverlay=(0,_styled__WEBPACK_IMPORTED_MODULE_3__.zo)(StyledHorizontalToolbar)`
  ${({firstVisibleIndex})=>firstVisibleIndex&&(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.iv)(["",":nth-child(","){display:none;}>:not(:nth-child(",") ~ *){display:none;}"],_StyledSeparator__WEBPACK_IMPORTED_MODULE_4__.mc,firstVisibleIndex+1,firstVisibleIndex)};
`,ToolbarSeparator=()=>"horizontal"===(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(OrientationContext)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_StyledSeparator__WEBPACK_IMPORTED_MODULE_4__.ve,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_StyledSeparator__WEBPACK_IMPORTED_MODULE_4__.lX,{});try{Toolbar.displayName="Toolbar",Toolbar.__docgenInfo={description:"",displayName:"Toolbar",props:{orientation:{defaultValue:{value:"horizontal"},description:"",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"horizontal"'}]}},border:{defaultValue:null,description:"",name:"border",required:!1,type:{name:"ToolbarBorderProp"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},overflowBehavior:{defaultValue:null,description:"Defines how the toolbar should handle its children when there is not enough room\nto fit all:\n- popup: the overflowed children will be hidden behind a show more arrow icon that\n  shows the rest of the items in a popup.\n- wrap: children will be wrapped so that they fit the available width/height",name:"overflowBehavior",required:!1,type:{name:"enum",value:[{value:'"wrap"'},{value:'"popup"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Toolbar/Toolbar.tsx#Toolbar"]={docgenInfo:Toolbar.__docgenInfo,name:"Toolbar",path:"src/Toolbar/Toolbar.tsx#Toolbar"})}catch(__react_docgen_typescript_loader_error){}try{ToolbarSeparator.displayName="ToolbarSeparator",ToolbarSeparator.__docgenInfo={description:"Separator to be used between items in a toolbar.",displayName:"ToolbarSeparator",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Toolbar/Toolbar.tsx#ToolbarSeparator"]={docgenInfo:ToolbarSeparator.__docgenInfo,name:"ToolbarSeparator",path:"src/Toolbar/Toolbar.tsx#ToolbarSeparator"})}catch(__react_docgen_typescript_loader_error){}},"./src/utils/useEventCallback.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>useEventCallback});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js");function useEventCallback(fn){let ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{ref.current=fn}));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(((...args)=>ref.current?.apply(null,args)),[])}}}]);
//# sourceMappingURL=2397.ead7ac20.iframe.bundle.js.map