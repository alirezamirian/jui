{"version":3,"file":"assets/js/375aa0c7.26e76aed.js","sources":["webpack://website/../jui/src/Button/BareButton.tsx","webpack://website/../jui/src/Collections/Item.ts","webpack://website/../jui/src/Collections/ItemStateContext.tsx","webpack://website/../jui/src/Collections/getItemElement.ts","webpack://website/../jui/src/Icon/LafIcon.tsx","webpack://website/../jui/src/Icon/PlatformIcon.tsx","webpack://website/../jui/src/Icon/StyledIconWrapper.tsx","webpack://website/../jui/src/Icon/useSvgIcon.tsx","webpack://website/../jui/src/IconButton/IconButton.tsx","webpack://website/../jui/src/List/ListDivider.tsx","webpack://website/../jui/src/LoadingSpinner/DelayedLoadingSpinner.tsx","webpack://website/../jui/src/LoadingSpinner/LoadingSpinner.tsx","webpack://website/../jui/src/Collections/patchCollectionProps.tsx","webpack://website/../jui/src/Menu/Menu.tsx","webpack://website/../jui/src/Menu/MenuItem.tsx","webpack://website/../jui/src/Menu/MenuItemLayout.tsx","webpack://website/../jui/src/Menu/MenuOverlay.tsx","webpack://website/../jui/src/Menu/MenuTrigger.tsx","webpack://website/../jui/src/Menu/StyledMenu.tsx","webpack://website/../jui/src/Menu/StyledMenuItem.tsx","webpack://website/../jui/src/Menu/Submenu.tsx","webpack://website/../jui/src/Menu/_useSubmenu.ts","webpack://website/../jui/src/Menu/_useSubmenuState.tsx","webpack://website/../jui/src/Menu/MenuSection.tsx","webpack://website/../jui/src/Menu/renderMenuNodes.tsx","webpack://website/../jui/src/Overlay/Overlay.tsx","webpack://website/../jui/src/StyledSeparator.tsx","webpack://website/../jui/src/Tabs/DebuggerTabs/DebuggerTabContent.tsx","webpack://website/../jui/src/Tabs/DebuggerTabs/StyledDebuggerTab.ts","webpack://website/../jui/src/Tabs/DebuggerTabs/DebuggerTabs.tsx","webpack://website/../jui/src/Tabs/EditorTabs/EditorTabContent.tsx","webpack://website/../jui/src/Tabs/EditorTabs/StyledEditorTab.ts","webpack://website/../jui/src/Tabs/EditorTabs/StyledEditorTabs.ts","webpack://website/../jui/src/Tabs/EditorTabs/EditorTabs.tsx","webpack://website/../jui/src/Tabs/StyledDefaultTab.ts","webpack://website/../jui/src/Tabs/StyledDefaultTabs.ts","webpack://website/../jui/src/Tabs/TabContentLayout.tsx","webpack://website/../jui/src/Tabs/TabItem.tsx","webpack://website/../jui/src/Tabs/TabTheme.ts","webpack://website/../jui/src/Tabs/StyledHorizontalOverflowShadows.tsx","webpack://website/../jui/src/Tabs/Tab.tsx","webpack://website/../jui/src/Tabs/Tabs.tsx","webpack://website/../jui/src/Tabs/useHasOverflow.tsx","webpack://website/../jui/src/Tabs/TabsOverflowMenu.tsx","webpack://website/../jui/src/Tabs/ToolWindowTabs/StyledToolWindowTab.ts","webpack://website/../jui/src/Tabs/ToolWindowTabs/StyledToolWindowTabs.ts","webpack://website/../jui/src/Tabs/ToolWindowTabs/ToolWindowTabs.tsx","webpack://website/../jui/src/Tooltip/ActionTooltip.tsx","webpack://website/../jui/src/Tooltip/tooltip-styles.ts","webpack://website/../jui/src/Tooltip/TooltipPointer.tsx","webpack://website/../jui/src/Tooltip/Tooltip.tsx","webpack://website/../jui/src/Tooltip/TooltipContext.tsx","webpack://website/../jui/src/utils/useMouseEventOverlayPosition.tsx","webpack://website/../jui/src/Tooltip/TooltipTrigger.tsx","webpack://website/../jui/src/Tooltip/TooltipTriggerAndOverlay.tsx","webpack://website/../jui/src/Collections/useCollectionCacheInvalidation.ts","webpack://website/../jui/src/Tree/__copied__TreeCollection.ts","webpack://website/../jui/src/Tree/getSingleChildrenKeys.ts","webpack://website/../jui/src/Tree/TreeSelectionManager.ts","webpack://website/../jui/src/Tree/useTreeState.ts","webpack://website/../jui/src/style-constants.ts","webpack://website/../jui/src/styled.ts","webpack://website/../jui/src/utils/FocusScope.tsx","webpack://website/../jui/src/utils/overflow-utils/OverflowObserver.ts","webpack://website/../jui/src/utils/overflow-utils/useOverflowObserver.tsx","webpack://website/../jui/src/utils/useContextOrThrow.tsx","webpack://website/../jui/src/utils/usePrevious.ts","webpack://website/./src/components/ExampleContext.tsx","webpack://website/./src/components/RefToIntellijPlatform.tsx","webpack://website/../jui/src/Tabs/3-TabThemes.stories.tsx","webpack://website/../jui/src/Tabs/2-Tabs.stories.tsx","webpack://website/./docs/components/Tabs.mdx"],"sourcesContent":["import React, { ForwardedRef, JSXElementConstructor } from \"react\";\nimport { useButton } from \"@react-aria/button\";\nimport { filterDOMProps, mergeProps, useObjectRef } from \"@react-aria/utils\";\nimport {\n  AriaBaseButtonProps,\n  AriaButtonProps,\n  ButtonProps,\n} from \"@react-types/button\";\n\nexport interface BareButtonProps extends AriaBaseButtonProps, ButtonProps {\n  children: React.ReactElement;\n  elementType?: AriaButtonProps[\"elementType\"];\n\n  // NOTE: there is a chance of unchecked breaking change here, since this is not explicitly mentioned as public API\n  // of useButton, but it is passed to the underlying usePress.\n  preventFocusOnPress?: boolean; // Should this be become true by default?\n}\n\n/**\n * A component to make arbitrary content an accessible button which is also able to be a tooltip trigger.\n */\nexport const BareButton = React.forwardRef(function BareButton(\n  { elementType: elementTypeProp, ...props }: BareButtonProps,\n  forwardedRef: ForwardedRef<HTMLElement>\n) {\n  const elementType =\n    elementTypeProp ||\n    (React.isValidElement(props.children) &&\n    typeof props.children.type === \"string\"\n      ? (props.children.type as unknown as JSXElementConstructor<unknown>)\n      : undefined) ||\n    \"button\";\n  const ref = useObjectRef(forwardedRef);\n  const { buttonProps } = useButton(\n    {\n      elementType,\n      ...props,\n    },\n    ref\n  );\n  const domProps = filterDOMProps(props);\n  const { autoFocus } = props;\n\n  return React.cloneElement(\n    props.children,\n    mergeProps(domProps, buttonProps, { autoFocus, ref })\n  );\n});\n","import React, { ReactElement } from \"react\";\nimport { ItemProps } from \"@react-types/shared\";\nimport { Item as StatelyItem, PartialNode } from \"@react-stately/collections\";\n\n// noinspection JSUnusedLocalSymbols\n/**\n * Item for collection components, which by default disables caching, unless `invalidated` prop is set to false on the\n * context passed to useCollection. Control over cache invalidation policy can be enabled by using\n * `useCollectionCacheInvalidation` for creating such context object.\n */\nfunction Item<T>(props: ItemProps<T>): ReactElement {\n  return null as any as React.ReactElement;\n}\n\nexport type CacheInvalidationContext = { invalidated?: boolean };\n\n// We don't want getCollectionNode to show up in the type definition\nlet _Item = Item as <T>(props: ItemProps<T>) => JSX.Element;\nexport { _Item as Item };\n\n/**\n * @private @preapproved\n */\nItem.getCollectionNode = function* getCollectionNode<T>(\n  props: ItemProps<T>,\n  context: CacheInvalidationContext\n): Generator<PartialNode<T>> {\n  const itemGenerator: Generator<PartialNode<T>> = (\n    StatelyItem as any\n  ).getCollectionNode(props, context);\n  const result = itemGenerator.next().value;\n  const originalShouldInvalidate = result.shouldInvalidate;\n  result.shouldInvalidate = (context: CacheInvalidationContext) =>\n    originalShouldInvalidate?.(context) || context.invalidated;\n  yield result;\n};\n","import React from \"react\";\nimport { Node } from \"@react-types/shared\";\n\n/**\n * Generic state of items in collections, provided via a context.\n * To be used in Menu, Tree, or anything that deals with a collection of items for which the common states like\n * **disabled** or **selected** is applicable.\n */\nexport interface ItemStateContextType {\n  node: Node<unknown>;\n  isSelected: boolean;\n  isContainerFocused: boolean;\n  isDisabled: boolean;\n}\n\nexport const ItemStateContext =\n  React.createContext<ItemStateContextType | null>(null);\n","import { Key, RefObject } from \"react\";\n\n// non-public function in @react-aria/selection\nexport function getItemElement(\n  collectionRef: RefObject<HTMLElement | null>,\n  key: Key\n) {\n  let selector = `[data-key=\"${CSS.escape(String(key))}\"]`;\n  let collection = collectionRef.current?.dataset.collection;\n  if (collection) {\n    selector = `[data-collection=\"${CSS.escape(collection)}\"]${selector}`;\n  }\n  return collectionRef.current?.querySelector<HTMLElement>(selector);\n}\n","import React, { ForwardedRef } from \"react\";\nimport { useTheme } from \"styled-components\";\nimport { Theme } from \"../Theme/Theme\";\nimport { IconProps } from \"./IconProps\";\nimport { StyledIconWrapper } from \"./StyledIconWrapper\";\nimport { useSvgIcon } from \"./useSvgIcon\";\nimport { useObjectRef } from \"@react-aria/utils\";\n\ninterface IconModifiers {\n  Selected?: boolean;\n  Focused?: boolean;\n  Disabled?: boolean;\n  Editable?: boolean;\n  Pressed?: boolean;\n}\n\nexport interface ThemeIconProps extends IconProps {\n  /**\n   * Icon which will be resolved against the default icon location based on theme type\n   */\n  icon: string | { name: string; modifiers: IconModifiers };\n\n  /**\n   * A theme key that can optionally override the icon.\n   */\n  themePath?: string;\n}\n\nconst ICONS_DIR_PREFIX = \"com/intellij/ide/ui/laf/icons/\";\n\n// Similar to LafIconLookup\nfunction findIconPath(\n  theme: Theme,\n  name: string,\n  modifiers: IconModifiers = {}\n) {\n  const basePath = `${ICONS_DIR_PREFIX}${\n    theme.isUnderDarcula() ? \"darcula/\" : \"intellij/\"\n  }`;\n  const suffix = (\n    [\"Editable\", \"Selected\", \"Pressed\", \"Focused\", \"Disabled\"] as Array<\n      keyof typeof modifiers\n    >\n  )\n    .filter((modifier) =>\n      // Focused or Pressed can't coexist with Disabled\n      modifiers.Disabled ? ![\"Focused\", \"Pressed\"].includes(modifier) : true\n    )\n    .reduce(\n      (soFar, modifier) => soFar + (modifiers[modifier] ? modifier : \"\"),\n      \"\"\n    );\n  return `${basePath}${name}${suffix}.svg`;\n}\n\nfunction useIconPath(\n  iconDescriptor: string | { name: string; modifiers?: IconModifiers },\n  themePath?: string\n) {\n  const theme = useTheme() as Theme; // TODO: investigate why useTheme is typed like this\n  const resolvedValue = themePath && theme.value(themePath);\n  if (resolvedValue) {\n    return resolvedValue;\n  }\n  const { modifiers = {}, name } =\n    typeof iconDescriptor === \"string\"\n      ? { name: iconDescriptor }\n      : iconDescriptor;\n  return findIconPath(theme, name, modifiers);\n}\n\nexport const LafIcon = React.forwardRef(\n  (\n    { themePath, icon, size, ...props }: ThemeIconProps,\n    forwardedRef: ForwardedRef<HTMLElement>\n  ) => {\n    const resolvedIconPath = useIconPath(icon, themePath);\n\n    const ref = useObjectRef(forwardedRef);\n    useSvgIcon(\n      { path: `platform/platform-impl/resources/${resolvedIconPath}` },\n      ref\n    );\n    return <StyledIconWrapper {...props} ref={ref} $size={size} />;\n  }\n);\n","import React, { ForwardedRef } from \"react\";\nimport { useTheme } from \"@intellij-platform/core/styled\";\nimport { IconProps } from \"./IconProps\";\nimport { StyledIconWrapper } from \"./StyledIconWrapper\";\nimport { useSvgIcon } from \"./useSvgIcon\";\nimport { useObjectRef } from \"@react-aria/utils\";\n\nexport interface PlatformIconProps extends IconProps {\n  /**\n   * Icon path in intellij platform repo.\n   * If starts with \"/\", the path will be from the repo root. Otherwise, it's relative to \"platform/icons/src\".\n   * \".svg\" extension is optional.\n   */\n  icon: string;\n  /**\n   * Similar to icon, but for dark themes.\n   */\n  darkIcon?: string;\n}\n\nexport const amendName = (iconNameOrPath: string, amendment: string) => {\n  const [name, ext] = iconNameOrPath.split(\".\");\n  return `${name}${amendment}${ext ? `.${ext}` : \"\"}`;\n};\n\nexport const getDarkPath = (path: string, darkPath?: string) => {\n  const [name, ext] = path.split(\".\");\n  return darkPath || `${name}_dark${ext ? `.${ext}` : \"\"}`;\n};\n\nconst getPlatformIconPath = (relativePath: string) =>\n  relativePath.startsWith(\"/\")\n    ? relativePath.slice(1)\n    : `platform/icons/src/${relativePath}`;\n\n/**\n * Renders an icon from the predefined list of platform icons.\n * icon name must follow the directory structure in platform icons.\n * @example <PlatformIcon icon=\"general/hideToolWindow\" />\n * @example <PlatformIcon icon=\"toolbar/pin\" />\n * @example <PlatformIcon icon=\"toolbar/pin.svg\" />\n * @example <PlatformIcon icon=\"/platform/dvcs-impl/resources/icons/currentBranchLabel.svg\" />\n */\nexport const PlatformIcon = React.forwardRef(\n  (\n    { icon, darkIcon, size, ...props }: PlatformIconProps,\n    forwardedRef: ForwardedRef<HTMLElement>\n  ) => {\n    const ref = useObjectRef(forwardedRef);\n    const theme = useTheme();\n    const iconName = theme.dark ? getDarkPath(icon, darkIcon) : icon;\n    useSvgIcon(\n      {\n        path: getPlatformIconPath(iconName),\n        fallbackPath: getPlatformIconPath(icon),\n      },\n      ref\n    );\n\n    return <StyledIconWrapper {...props} $size={size} ref={ref} />;\n  }\n);\n","import { styled } from \"../styled\";\nimport { IconSize } from \"@intellij-platform/core/Icon/IconProps\";\n\nconst DEFAULT_ICON_SIZE: IconSize = 16;\n\nexport const StyledIconWrapper = styled.span<{\n  $size?: IconSize;\n  $useCurrentColor?: boolean;\n  role?: string;\n}>`\n  box-sizing: border-box;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  line-height: 0;\n  width: ${({ $size = DEFAULT_ICON_SIZE }) => `${$size}px`};\n  height: ${({ $size = DEFAULT_ICON_SIZE }) => `${$size}px`};\n  position: relative; // to allow absolute positioned indicators and overlays on icon\n  cursor: ${({ role }) => (role === \"button\" ? \"pointer\" : undefined)};\n`;\n","import {\n  RefObject,\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useState,\n} from \"react\";\nimport { useTheme } from \"@intellij-platform/core/styled\";\nimport { ItemStateContext } from \"@intellij-platform/core/Collections\";\n\nexport function useSvgIcon(\n  { path, fallbackPath }: { path: string; fallbackPath?: string },\n  /**\n   * ref to the icon wrapper element in which the svg should be injected.\n   * This hook used to return svg string, and that svg was set as dangerouslySetInnerHTML. But now it injects the svg.\n   * by direct DOM manipulation. That's to eliminate the need for using dangerouslySetInnerHTML, so that we can allow\n   * arbitrary children (like LiveIndicator) as overlays on top of icons.\n   */\n  ref: RefObject<HTMLElement>\n) {\n  const theme = useTheme();\n  const itemState = useContext(ItemStateContext);\n  const selected = itemState?.isSelected || itemState?.isContainerFocused;\n  const [svg, setSvg] = useState<null | string>(null);\n\n  useLayoutEffect(() => {\n    const element = ref.current;\n    if (element) {\n      element.ariaBusy = svg === null ? \"true\" : null;\n      element.querySelector(\"svg\")?.remove();\n      if (svg) {\n        const svgElement = document.createElement(\"svg\");\n        element.appendChild(svgElement);\n        svgElement.outerHTML = makeIdsUnique(svg); // UNSAFE! Would require sanitization, or icon sources must be trusted.\n      }\n    } else {\n      console.log(`unexpected state - ${path}`);\n    }\n  }, [svg]);\n\n  useEffect(() => {\n    let canceled = false;\n    const fetchIcon = async () => {\n      if (!path) {\n        console.error(\"icon path is empty\");\n        return;\n      }\n      setSvg(null);\n      const svg = await theme\n        .getSvgIcon(path, selected)\n        .catch((e) => {\n          if (fallbackPath) {\n            return theme.getSvgIcon(fallbackPath, selected);\n          }\n          throw e;\n        })\n        .catch((e) => {\n          console.error(`Could not resolve icon \"${path}\"`, e);\n          return \"\";\n        });\n      if (!canceled) {\n        setSvg(svg);\n      }\n    };\n    fetchIcon().catch(console.error);\n    return () => {\n      canceled = true;\n    };\n  }, [path, selected]);\n}\n\n/**\n * If multiple instance of the same icon is rendered at the same time, and the SVG includes\n * url(#...) references to locally defined ids, in some cases the icon is not rendered properly.\n * because of ids colliding. We make sure the ids are unique in each rendered icon.\n */\nfunction makeIdsUnique(svg: string): string {\n  const randomPostfix = (Math.random() * 1000).toFixed(0);\n  const idMatches = svg.matchAll(/id=\"(.*?)\"/g);\n  return [...idMatches].reduce((modifiedSvg, [_, id]) => {\n    const newId = `${id}-${randomPostfix}`;\n    return replaceAll(\n      `id=\"${id}\"`,\n      `id=\"${newId}\"`,\n      replaceAll(`url(#${id})`, `url(#${newId})`, modifiedSvg)\n    );\n  }, svg);\n}\n\nfunction replaceAll(theOld: string, theNew: string, str: string): string {\n  const replaced = str.replace(theOld, theNew);\n  const replacedAgain = replaced.replace(theOld, theNew);\n  if (replaced === replacedAgain) {\n    return replaced;\n  }\n  return replaceAll(theOld, theNew, replacedAgain);\n}\n","import { PressProps, usePress } from \"@react-aria/interactions\";\nimport React, { ForwardedRef, HTMLProps } from \"react\";\nimport { styled } from \"../styled\";\nimport { mergeProps, useObjectRef } from \"@react-aria/utils\";\nimport { useFocusable } from \"@react-aria/focus\";\n\nexport interface IconButtonProps\n  extends PressProps,\n    // Maybe we should allow any arbitrary HTMLProps<HTMLButtonElement> props, instead of whitelisting?\n    Pick<\n      HTMLProps<HTMLButtonElement>,\n      \"onFocus\" | \"onBlur\" | \"style\" | \"className\"\n    > {\n  children?: React.ReactNode;\n  /**\n   * The minimum width/height of the button.\n   */\n  minSize?: number;\n  /**\n   * Whether the button should be focusable by pressing tab. The default is true for icon buttons (aka. action buttons),\n   * which means they are not included in the tab order.\n   */\n  excludeFromTabOrder?: boolean;\n}\n\nexport const DEFAULT_MINIMUM_BUTTON_SIZE = 22;\nexport const NAVBAR_MINIMUM_BUTTON_SIZE = 20;\n\nexport const StyledIconButton = styled.button<{ $minSize: number }>`\n  position: relative; // to allow absolutely positioned overlays like an dropdown icon at the bottom right corner\n  background: none;\n  color: inherit;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-height: ${({ $minSize }) => `${$minSize}px`};\n  min-width: ${({ $minSize }) => `${$minSize}px`};\n  padding: 0;\n  margin: 0;\n  &:disabled {\n    opacity: 0.25; // not quite accurate implementation. There might be better ways to style disabled state.\n  }\n  &:hover:not(:disabled) {\n    background: ${({ theme }) =>\n      theme.color(\"ActionButton.hoverBackground\", \"#DFDFDF\")};\n    border-color: ${({ theme }) =>\n      theme.color(\"ActionButton.hoverBorderColor\", \"#DFDFDF\")};\n  }\n  &:focus-visible:not(:disabled) {\n    outline: none;\n    background: ${({ theme }) =>\n      theme.color(\"ActionButton.pressedBackground\", \"#CFCFCF\")};\n    border-color: ${({ theme }) =>\n      theme.color(\n        \"ActionButton.focusedBorderColor\",\n        theme.dark ? \"#5eacd0\" : \"#62b8de\"\n      )};\n  }\n  &:active:not(:disabled),\n  &.active:not(:disabled) {\n    background: ${({ theme }) =>\n      theme.color(\"ActionButton.pressedBackground\", \"#CFCFCF\")};\n    border-color: ${({ theme }) =>\n      theme.color(\"ActionButton.pressedBorderColor\", \"#CFCFCF\")};\n  }\n`;\n\n/**\n * Icon button, aka Action Button, in the reference implementation.\n * @see https://jetbrains.github.io/ui/controls/icon_button/\n */\nexport const IconButton = React.forwardRef(function IconButton(\n  {\n    minSize = DEFAULT_MINIMUM_BUTTON_SIZE,\n    preventFocusOnPress = true,\n    excludeFromTabOrder = true,\n    isPressed: isPressedInput,\n    isDisabled,\n    onPress,\n    onPressChange,\n    onPressEnd,\n    onPressStart,\n    onPressUp,\n    shouldCancelOnPointerExit,\n    ...otherProps\n  }: IconButtonProps,\n  forwardedRef: ForwardedRef<HTMLButtonElement>\n) {\n  // FIXME: use useButton\n\n  const ref = useObjectRef(forwardedRef);\n  const { focusableProps } = useFocusable({ isDisabled }, ref);\n  const { pressProps, isPressed } = usePress({\n    ref,\n    isPressed: isPressedInput,\n    isDisabled,\n    onPress,\n    onPressChange,\n    onPressEnd,\n    onPressStart,\n    onPressUp,\n    shouldCancelOnPointerExit,\n    preventFocusOnPress,\n  });\n\n  return (\n    <StyledIconButton\n      className={isPressed ? \"active\" : \"\"}\n      disabled={isDisabled}\n      {...mergeProps(pressProps, otherProps, focusableProps)}\n      $minSize={minSize}\n      tabIndex={excludeFromTabOrder && !isDisabled ? -1 : undefined}\n      ref={ref}\n    />\n  );\n});\n","import React from \"react\";\nimport { StyledVerticalSeparator } from \"../StyledSeparator\";\nimport { useSeparator } from \"@react-aria/separator\";\n\nexport const ListDivider: React.FC = () => {\n  return (\n    <StyledVerticalSeparator\n      as={\"li\"}\n      {...useSeparator({ elementType: \"li\", orientation: \"vertical\" })\n        .separatorProps}\n    />\n  );\n};\n","import React, { ReactNode, useEffect, useState } from \"react\";\nimport {\n  LoadingSpinner,\n  LoadingSpinnerProps,\n} from \"@intellij-platform/core/LoadingSpinner/LoadingSpinner\";\n\nexport interface DelayedLoadingSpinnerProps extends LoadingSpinnerProps {\n  /**\n   * delay for showing the loading spinner in ms.\n   * @default {@link DEFAULT_LOADING_DELAY_MS}\n   */\n  delay?: number;\n}\n\nexport const DEFAULT_LOADING_DELAY_MS = 300;\n\n/**\n * {@link LoadingSpinner}, delayed\n */\nexport function DelayedLoadingSpinner({\n  delay = DEFAULT_LOADING_DELAY_MS,\n  ...props\n}: DelayedLoadingSpinnerProps) {\n  return (\n    <Delayed delay={delay}>\n      <LoadingSpinner {...props} />\n    </Delayed>\n  );\n}\n\n/**\n * Renders children with a delay\n */\nfunction Delayed({ children, delay }: { children: ReactNode; delay: number }) {\n  const [waitedEnough, setWaitedEnough] = useState(false);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setWaitedEnough(true);\n    }, delay); // the effect is intentionally made non-reactive to delay,\n    // since it doesn't make sense to start the wait from scratch if delay changes after the children\n    // is already rendered.\n    return () => clearTimeout(timer);\n  }, []);\n  if (waitedEnough) {\n    return <>{children}</>;\n  }\n  return null;\n}\n","import React, { SVGProps } from \"react\";\n\nexport interface LoadingSpinnerProps\n  extends Omit<SVGProps<SVGSVGElement>, \"viewBox\" | \"width\" | \"height\"> {\n  /**\n   * Loading spinner size in pixels\n   * @default {@link LOADING_SPINNER_SIZE_BIG}\n   */\n  size?: number;\n}\n\nexport const LOADING_SPINNER_SIZE_SMALL = 16;\nexport const LOADING_SPINNER_SIZE_BIG = 32;\n/**\n * Aka AsyncProcessIcon in Intellij Platform source.\n */\nexport function LoadingSpinner({\n  size = LOADING_SPINNER_SIZE_BIG,\n  ...props\n}: LoadingSpinnerProps) {\n  return (\n    <svg width={size} height={size} viewBox=\"0 0 32 32\" {...props}>\n      <g transform=\"rotate(0 16 16)\">\n        <g\n          fill=\"#7F8B91\" // TODO: themed?\n          fillOpacity=\".9\"\n          fillRule=\"evenodd\"\n          transform=\"translate(-4 -4)\"\n        >\n          <rect width=\"8\" height=\"4\" x=\"6\" y=\"18\" opacity=\".78\" />\n          <rect width=\"4\" height=\"8\" x=\"18\" y=\"26\" opacity=\".62\" />\n          <rect width=\"8\" height=\"4\" x=\"26\" y=\"18\" opacity=\".38\" />\n          <rect width=\"4\" height=\"8\" x=\"18\" y=\"6\" />\n          <g transform=\"rotate(45 9.757 24.243)\">\n            <rect width=\"8\" height=\"4\" y=\"12\" opacity=\".93\" />\n            <rect width=\"4\" height=\"8\" x=\"12\" y=\"20\" opacity=\".69\" />\n            <rect width=\"8\" height=\"4\" x=\"20\" y=\"12\" opacity=\".48\" />\n            <rect width=\"4\" height=\"8\" x=\"12\" opacity=\".3\" />\n          </g>\n        </g>\n        <animateTransform\n          attributeName=\"transform\"\n          type=\"rotate\"\n          values=\"0 16 16; 45 16 16; 90 16 16; 135 16 16; 180 16 16; 225 16 16; 270 16 16; 315 16 16; 360 16 16\"\n          keyTimes=\"0;0.125;0.25;0.375;0.5;0.625;0.75;0.875;1\"\n          dur=\"1s\"\n          repeatCount=\"indefinite\"\n          calcMode=\"discrete\"\n        />\n      </g>\n    </svg>\n  );\n}\n","import { Item, PartialNode, Section } from \"@react-stately/collections\";\nimport { Item as Item2 } from \"./Item\";\nimport {\n  CollectionBase,\n  CollectionElement,\n  ItemProps,\n  SectionProps,\n} from \"@react-types/shared\";\nimport React from \"react\";\n\nfunction* patchCollectionItem<T>(nodes: Generator<PartialNode<T>>) {\n  for (const partialNode of nodes)\n    yield {\n      ...partialNode,\n      *childNodes() {\n        const result2 = partialNode.childNodes?.();\n        if (result2) {\n          for (const partialChildNode of result2) {\n            const { type, ...partialChildNodeWithoutType } = partialChildNode;\n            yield partialChildNodeWithoutType;\n          }\n        }\n      },\n    };\n}\n\nconst PatchedItem = Item.bind(null);\n\n// @ts-expect-error: getCollectionNode is not public\nPatchedItem.getCollectionNode = function getCollectionNode<T>(\n  props: ItemProps<T>,\n  context: any\n): Generator<PartialNode<T>> {\n  // @ts-expect-error getCollectionNode is not public API\n  return patchCollectionItem(Item.getCollectionNode(props, context));\n};\n\nconst PatchedSection = Section.bind(null);\n\n// @ts-expect-error: getCollectionNode is not public\nPatchedSection.getCollectionNode = function getCollectionNode<T>(\n  props: SectionProps<T>,\n  context: any\n): Generator<PartialNode<T>> {\n  // @ts-expect-error getCollectionNode is not public API\n  return patchCollectionItem(Section.getCollectionNode(props, context));\n};\nfunction convertCollectionElement<T>(\n  result: CollectionElement<T> | React.ReactNode\n): CollectionElement<T> {\n  if (\n    React.isValidElement(result) &&\n    (result.type === Item || result.type === Item2)\n  ) {\n    return React.createElement(\n      PatchedItem,\n      {\n        key: result.key != null ? result.key : undefined,\n        ...(result.props as ItemProps<T>),\n      },\n      convertChildren(result.props.children)\n    ) as CollectionElement<T>;\n  }\n  if (React.isValidElement(result) && result.type === Section) {\n    return React.createElement(\n      PatchedSection,\n      {\n        key: result.key != null ? result.key : undefined,\n        ...(result.props as SectionProps<T>),\n      } as any,\n      convertChildren((result.props as any).children)\n    ) as CollectionElement<T>;\n  }\n  return result as CollectionElement<T>;\n}\n\nfunction convertChildren<T>(children: React.ReactNode): React.ReactNode {\n  return Array.isArray(children)\n    ? // NOTE: We intentionally avoid using React.Children.map as it messes with keys.\n      children.map(convertChildren)\n    : convertCollectionElement(children);\n}\n\n/**\n * CollectionBuilder expects child type to be the same as parent type, which is weird in the first place:\n * https://github.com/adobe/react-spectrum/blob/cae83ff95f2f709b761c70d47ace96d6346ed873/packages/%40react-stately/collections/src/CollectionBuilder.ts#L148\n * On the other hand, the default Item components sets the `type` to item, for all child PartialNode objects:\n * https://github.com/adobe/react-spectrum/blob/c49d9819adc2cb63377f39557352440c72072caf/packages/%40react-stately/collections/src/Item.ts#L40-L54\n * Which is also a little unexpected, as in many nested collections, an item can have all types of children.\n * This function patches that, replacing Item elements with PatchedItem element which doesn't set type on children\n * PartialNodes.\n */\nexport function patchCollectionProps<T>({\n  children,\n  ...props\n}: Partial<CollectionBase<T>>): CollectionBase<T> {\n  return {\n    ...props,\n    children:\n      typeof children === \"function\"\n        ? (node: T) => convertChildren(children(node)) as CollectionElement<T>\n        : (convertChildren(children) as CollectionElement<T>),\n  };\n}\n","import React, { CSSProperties, Key, RefObject, useContext } from \"react\";\nimport { AriaMenuOptions, useMenu as useMenuAria } from \"@react-aria/menu\";\nimport { TreeState } from \"@react-stately/tree\";\nimport { AriaMenuProps } from \"@react-types/menu\";\nimport { Node } from \"@react-types/shared\";\nimport { patchCollectionProps } from \"@intellij-platform/core/Collections/patchCollectionProps\";\nimport { TreeProps, useTreeState } from \"../Tree/useTreeState\"; // shared dependency between tree and menu, that could be lifted up import {Submenu} from '@intellij-platform/core/Menu/Submenu'\nimport { renderMenuNodes } from \"./renderMenuNodes\";\nimport { StyledMenu } from \"./StyledMenu\";\nimport { SubmenuProps } from \"./Submenu\"; // internal export\n\nexport interface MenuProps<T>\n  extends Omit<\n    AriaMenuProps<T>,\n    // selection is not properly supported for nested menus. Plus, it's not even that meaningful for a nested menu\n    // at least the way it's implemented now.\n    | \"onSelectionChange\"\n    | \"defaultSelectedKeys\"\n    | \"selectionMode\"\n    | \"disallowEmptySelection\"\n  > {\n  /**\n   * Indicates currently expanded menu item (controlled).\n   */\n  expandedKey?: Key; // FIXME: should be keys\n  /**\n   * Called when expanded menu item is changed by user interaction, which can be either hovering over the menu item\n   */\n  onExpandedKeyChange?: (expandedKey: Key) => void; // FIXME: should be keys\n  defaultExpandedKey?: Key; // FIXME: should be keys\n  /**\n   * @deprecated\n   */\n  expandOn?: \"hover\" | \"press\"; // hover delay doesn't seem to be needed as an option\n\n  /**\n   * Defines the press behaviour (either by mouse or by pressing Enter when focused) on menu items with submenu.\n   * By default (undefined), pressing or hovering over a menu item with submenu, opens the submenu.\n   * When set to \"toggle\", pressing a menu item with submenu will toggle the submenu. Hovering over such items will\n   * no longer open the submenu.\n   * When set to \"action\", pressing a menu item with submenu will call onAction for that item, and closes the menu.\n   * Hovering over such items will no longer open the submenu.\n   *\n   * In all cases, pressing the right arrow will always open the submenu.\n   */\n  submenuBehavior?: \"default\" | \"toggleOnPress\" | \"actionOnPress\";\n\n  /**\n   * fills the available horizontal or vertical space, when rendered in a flex container.\n   */\n  fillAvailableSpace?: boolean;\n\n  /**\n   * Minimum width of the menu\n   * @default: 120px\n   */\n  minWidth?: CSSProperties[\"minWidth\"];\n}\n\n/**\n * Can be provided by the overlay where the menu is rendered in. If provided, menu will call the provided close function\n * on actions. Note that there is no `closeOnSelect` option as of now, on this context, since no use case seems to exist\n * for keeping the menu overlay open after a menu item is selected.\n * **Update**: there are use cases where the menu is not closed after an item is clicked. Most of the toggle-able\n * actions (the ones with a checkmark) seem to be like this.\n * TODO: Make \"close on selection\" more flexible. Some ideas:\n *  - instead of calling close, pass it to `onAction` handler. Then on each action, one would need to call close if\n *    needed.\n *  - Offer a `MenuItem` component to be used instead of generic `Item`, where it accepts `closeOnSelect` boolean, which\n *    is true by default.\n *  - pass a `keepOpen` function to `onAction`.\n *  - Allow signaling whether the menu should kept open, via the returned value of onAction. e.g. return false means keep open.\n *  Last two suggestions are based on the assumption that most of the menu items are not selectable.\n *  Note that MenuOverlayContext could be used directly in action handlers too, but baking it into the menu makes it\n *  much more convenient, which seems more important than breaking the nice separation between Menu and MenuTrigger.\n */\nexport const MenuOverlayContext = React.createContext<{\n  close: () => void;\n  defaultAutoFocus: MenuProps<unknown>[\"autoFocus\"];\n}>({\n  close: () => {},\n  defaultAutoFocus: undefined,\n});\nexport const MenuContext = React.createContext<\n  Pick<\n    MenuProps<unknown>,\n    \"onClose\" | \"onAction\" | \"submenuBehavior\" | \"autoFocus\"\n  > & {\n    itemWrapper?: (\n      renderedItem: React.ReactNode,\n      item: Node<unknown>\n    ) => React.ReactNode;\n    renderSubmenu?: (props: SubmenuProps<unknown>) => React.ReactNode;\n  }\n>({});\n\nexport function useMenu<T>(\n  {\n    onAction: onActionProp,\n    submenuBehavior = \"default\",\n    ...props\n  }: MenuProps<T> & AriaMenuOptions<T>,\n  state: TreeState<T>,\n  ref: RefObject<HTMLElement>\n) {\n  const { close, defaultAutoFocus } = useContext(MenuOverlayContext);\n  const autoFocus = props.autoFocus ?? defaultAutoFocus;\n  const onClose = () => {\n    props.onClose?.();\n    close();\n  };\n  const onAction = (key: Key) => {\n    if (\n      // The following check should have been in useMenu, but it's not currently. Probably because they haven't yet\n      // covered nested menus.\n      !state.collection.getItem(key)?.hasChildNodes\n    ) {\n      return onActionProp?.(key);\n    } else if (submenuBehavior === \"actionOnPress\") {\n      onClose();\n      return onActionProp?.(key);\n    }\n  };\n  const menuContextValue: React.ContextType<typeof MenuContext> = {\n    submenuBehavior,\n    autoFocus,\n    onAction,\n    onClose,\n  };\n  const { menuProps } = useMenuAria(\n    { ...props, onAction, onClose, autoFocus },\n    state,\n    ref\n  );\n\n  return {\n    menuProps,\n    menuContextValue,\n  };\n}\n\nexport function useMenuState<T extends object>(\n  props: TreeProps<T> &\n    Pick<\n      MenuProps<T>,\n      \"expandedKey\" | \"defaultExpandedKey\" | \"onExpandedKeyChange\"\n    >\n) {\n  props = patchCollectionProps(props);\n  return useTreeState({\n    ...props,\n    childExpansionBehaviour: \"single\",\n    expandedKeys: props.expandedKey ? [props.expandedKey] : undefined,\n    onExpandedChange: ([firstKey]) => props?.onExpandedKeyChange?.(firstKey),\n    defaultExpandedKeys: props.defaultExpandedKey\n      ? [props.defaultExpandedKey]\n      : undefined,\n  });\n}\n\n/**\n * UI for menus which are normally shown in a popover. Being rendered as an overlay is not handled here.\n * Also, there is no coupling with any higher level entity like \"Action\", since this is just for the UI layer.\n * Something like ActionMenu which creates a menu out of a list of actions can be implemented on top of this.\n *\n * @example\n *  <Menu>\n *    <Item>Item one</Item>\n *    <Item>\n *      <MenuItemLayout\n *        icon={<PlatformIcon icon={\"actions/copy\"} />}\n *        content=\"Copy\"\n *        shortcut={\"âŒ˜C\"} />\n *    </Item>\n *  </Menu>\n *\n *  Current issues and limitations:\n *  - Divider in sub-menu's is not supported. because of a constraint in @react-stately/collections, which results in\n *    this error: Unsupported type <Divider> in <Item>. Only <Item> is supported. Maybe supporting section would\n *    be a workaround for it.\n *  - when a parent menu item which has an open submenu is hovered, it gets focus.\n */\nexport function Menu<T extends object>({ minWidth, ...props }: MenuProps<T>) {\n  const ref = React.useRef<HTMLUListElement>(null);\n  const state = useMenuState(props);\n  const { menuContextValue, menuProps } = useMenu(props, state, ref);\n\n  return (\n    /**\n     * MenuContext is used to pass onAction and onClose to be passed to useMenu in submenus.\n     * That's needed because in useMenuItem onAction and onClose are read off a WeakMap which has the menu state\n     * (TreeState) as key. So we have to pass onAction and onClose everytime we call useMenu in submenus, to let the\n     * menu items in that submenu access the right value of onAction and onClose. To avoid drilling these props down,\n     * we keep it in a context.\n     */\n    <MenuContext.Provider value={menuContextValue}>\n      <StyledMenu\n        {...menuProps}\n        ref={ref}\n        style={{ minWidth }}\n        $fillAvailableSpace={props.fillAvailableSpace}\n      >\n        {renderMenuNodes(state, [...state.collection])}\n      </StyledMenu>\n    </MenuContext.Provider>\n  );\n}\n","import React, { HTMLAttributes, ReactNode, RefObject, useContext } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { isFocusVisible, useHover, usePress } from \"@react-aria/interactions\";\nimport {\n  AriaMenuItemProps,\n  MenuItemAria,\n  useMenuItem as useMenuItemAria,\n} from \"@react-aria/menu\";\nimport { useOverlayPosition } from \"@react-aria/overlays\";\nimport { mergeProps } from \"@react-aria/utils\";\nimport { TreeState } from \"@react-stately/tree\";\nimport { FocusableElement, Node } from \"@react-types/shared\";\nimport { ItemStateContext } from \"@intellij-platform/core/Collections/ItemStateContext\";\nimport { Overlay } from \"@intellij-platform/core/Overlay\";\n\nimport { LafIcon, PlatformIcon } from \"../Icon\";\nimport { styled } from \"../styled\";\nimport { MenuContext, MenuProps } from \"./Menu\";\nimport { MENU_BORDER_WIDTH, MENU_VERTICAL_PADDING } from \"./StyledMenu\";\nimport {\n  StyledMenuItem,\n  StyledMenuItemIcon,\n  StyledNestedArrow,\n} from \"./StyledMenuItem\";\nimport { Submenu, SubmenuProps } from \"@intellij-platform/core/Menu/Submenu\";\n\nexport interface MenuItemProps<T> {\n  item: Node<T>;\n  state: TreeState<T>;\n  onSubmenuClose?: () => void;\n}\n\nconst StyledMenuItemText = styled.span`\n  flex: 1;\n`;\n\nconst StyledMenuItemPlatformIcon = styled(PlatformIcon)`\n  svg path {\n    stroke: currentColor;\n  }\n`;\n\nconst StyledMenuItemLafIcon = styled(LafIcon)`\n  svg path {\n    stroke: currentColor;\n  }\n`;\n\nfunction useMenuItem<T extends unknown>(\n  {\n    submenuBehavior,\n    ...props\n  }: AriaMenuItemProps & { submenuBehavior: MenuProps<T>[\"submenuBehavior\"] },\n  state: TreeState<T>,\n  ref: RefObject<FocusableElement>\n): MenuItemAria {\n  const item = state.collection.getItem(props.key!)!;\n  const isDisabled = state.disabledKeys.has(item.key);\n  const isExpanded = state.expandedKeys.has(item.key);\n  const hasSubmenu = item.hasChildNodes;\n  const { menuItemProps: ariaMenuItemProps, ...result } = useMenuItemAria(\n    {\n      key: item.key,\n      // hack to prevent react-aria to call onClose when nested items are selected, which is incorrect, and because\n      // react-aria doesn't officially support nested menus at the moment\n      onClose: hasSubmenu ? () => {} : undefined,\n    },\n    state,\n    ref\n  );\n\n  // useMenuItem in react aria utilizes useHover to focus item on hover. The logic there conflicts with nested menus\n  // requirements (at least based on how nested menu is implemented here currently). Also, submenuBehavior requires\n  // some more customization. So we delete the handlers set by useHover in useMenuItem, and add a custom useHover.\n  delete ariaMenuItemProps.onMouseEnter;\n  delete ariaMenuItemProps.onPointerEnter;\n\n  if (submenuBehavior === \"default\" && isExpanded) {\n    // When menu item has its submenu opened, clicking it should not move focus or do anything.\n    delete ariaMenuItemProps.onPointerDown;\n  }\n\n  const { hoverProps } = useHover({\n    isDisabled: isDisabled,\n    onHoverStart: () => {\n      const isAnySubmenuOpen = [...state.expandedKeys].some(\n        (expandedKey) =>\n          state.collection.getItem(expandedKey)?.parentKey === item.parentKey\n      );\n\n      if (submenuBehavior === \"default\" && !isExpanded) {\n        state.toggleKey(item.key);\n      }\n\n      if (!isFocusVisible()) {\n        const shouldFocus =\n          submenuBehavior === \"default\" ? !isExpanded : !isAnySubmenuOpen;\n        if (shouldFocus) {\n          state.selectionManager.setFocused(true);\n        }\n        state.selectionManager.setFocusedKey(item.key);\n      }\n    },\n  });\n\n  const keyboardProps = {\n    onKeyDown: (e: React.KeyboardEvent) => {\n      if (\n        ((e.key === \"Enter\" || e.key === \" \") &&\n          submenuBehavior !== \"actionOnPress\") ||\n        \"ArrowRight\" === e.key\n      ) {\n        state.toggleKey(item.key);\n        e.stopPropagation();\n        return;\n      }\n    },\n  };\n\n  const { pressProps: togglePressProps } = usePress({\n    isDisabled: isDisabled,\n    onPressUp: () => {\n      state.toggleKey(item.key);\n      if (isExpanded) {\n        // submenu was expanded and is closed now. moving focus back to the parent item\n        state.selectionManager.setFocusedKey(item.key);\n      }\n    },\n  });\n\n  return {\n    ...result,\n    menuItemProps: mergeProps(\n      hasSubmenu\n        ? {\n            \"aria-expanded\": isExpanded,\n            \"aria-haspopup\": \"menu\",\n          }\n        : {},\n      ariaMenuItemProps,\n      hoverProps,\n      keyboardProps,\n      submenuBehavior === \"toggleOnPress\" ? togglePressProps : {}\n    ),\n  };\n}\n\nconst MenuItemContext = React.createContext<{\n  labelProps: HTMLAttributes<HTMLElement>;\n  descriptionProps: HTMLAttributes<HTMLElement>;\n  keyboardShortcutProps: HTMLAttributes<HTMLElement>;\n}>({ descriptionProps: {}, labelProps: {}, keyboardShortcutProps: {} });\n\nexport const useMenuItemLayout = () => {\n  return useContext(MenuItemContext);\n};\n\nexport function MenuItem<T>({ item, state }: MenuItemProps<T>) {\n  // Get props for the menu item element\n  const ref = React.useRef<HTMLLIElement>(null);\n  const nestedMenuRef = React.useRef<HTMLDivElement>(null);\n  const isDisabled = state.disabledKeys.has(item.key);\n  const isExpanded = state.expandedKeys.has(item.key);\n  const isSelected = state.selectionManager.selectedKeys.has(item.key);\n  const isFocused = state.selectionManager.focusedKey === item.key;\n  const {\n    onClose,\n    submenuBehavior,\n    renderSubmenu = (props: SubmenuProps<T>) => <Submenu {...props} />,\n    itemWrapper = (i: React.ReactNode) => i,\n  } = useContext(MenuContext);\n\n  const { menuItemProps, labelProps, descriptionProps, keyboardShortcutProps } =\n    useMenuItem(\n      {\n        submenuBehavior,\n        key: item.key,\n      },\n      state,\n      ref\n    );\n\n  const { pressProps: togglePressProps } = usePress({\n    isDisabled: isDisabled,\n    onPressUp: () => {\n      state.toggleKey(item.key);\n      if (isExpanded) {\n        // submenu was expanded and is closed now. moving focus back to the parent item\n        state.selectionManager.setFocusedKey(item.key);\n      }\n    },\n  });\n\n  let { overlayProps: positionProps } = useOverlayPosition({\n    targetRef: ref,\n    overlayRef: nestedMenuRef,\n    placement: \"right top\",\n    shouldFlip: true,\n    onClose,\n    offset: 0,\n    crossOffset: -(MENU_VERTICAL_PADDING + MENU_BORDER_WIDTH),\n    isOpen: isExpanded,\n  });\n\n  const arrowProps: HTMLAttributes<HTMLElement> =\n    submenuBehavior !== \"default\"\n      ? {\n          role: \"button\",\n          \"aria-label\": \"Open\",\n          ...mergeProps(togglePressProps, {\n            // to prevent pointer up event handler on the item, which would trigger action.\n            onPointerUp: (e: React.PointerEvent) => e.stopPropagation(),\n          }),\n        }\n      : {};\n  return (\n    <>\n      <StyledMenuItem\n        {...menuItemProps}\n        $disabled={isDisabled}\n        $active={isFocused}\n        ref={ref}\n      >\n        {isSelected && (\n          <StyledMenuItemIcon>\n            <StyledMenuItemLafIcon\n              icon={{\n                name: \"checkmark\",\n                modifiers: { Selected: isFocused },\n              }}\n            />\n          </StyledMenuItemIcon>\n        )}\n        <ItemStateContext.Provider\n          value={{\n            isDisabled,\n            isContainerFocused: state.selectionManager.isFocused,\n            isSelected,\n            node: item,\n          }}\n        >\n          <MenuItemContext.Provider\n            value={{ labelProps, descriptionProps, keyboardShortcutProps }}\n          >\n            {itemWrapper(\n              typeof item.rendered === \"string\" ? (\n                <StyledMenuItemText {...labelProps}>\n                  {item.rendered}\n                </StyledMenuItemText>\n              ) : (\n                item.rendered\n              ),\n              item\n            )}\n          </MenuItemContext.Provider>\n        </ItemStateContext.Provider>\n        {item.hasChildNodes && (\n          <StyledNestedArrow {...arrowProps}>\n            <StyledMenuItemPlatformIcon icon=\"icons/ide/menuArrow\" />\n          </StyledNestedArrow>\n        )}\n      </StyledMenuItem>\n      {isExpanded && (\n        /**\n         * A note about using Overlay:\n         * If sub-menu is not rendered in a portal, useOverlayPosition doesn't work properly and the submenu may\n         * be rendered offscreen. Worse, it may introduce scroll in body (or some scrollable ancestor), which will\n         * trigger a scroll event which closes the menu if the menu is rendered in an overlay (like in MenuTrigger),\n         * which is almost always the case.\n         *\n         */\n        <Overlay\n          OverlayComponent={\n            /**\n             *  The FocusScope included in the default Overlay, messes with a particular expected behavior. So we use\n             *  SimpleOverlay, which just renders its children as a portal. There may be a better solution for that\n             *  problem, which would eliminate the need for the funky `OverlayComponent` prop on our `Overlay`\n             *  component. Something to look into in the future.\n             */\n            SimpleOverlay\n          }\n        >\n          <div ref={nestedMenuRef} {...positionProps}>\n            {renderSubmenu({ parentState: state, rootKey: item.key })}\n          </div>\n        </Overlay>\n      )}\n    </>\n  );\n}\n\n/**\n * A replacement for react-aria Overlay, which doesn't render FocusScope\n */\nfunction SimpleOverlay({\n  children,\n  portalContainer = document.body,\n}: {\n  children: ReactNode;\n  portalContainer?: Element | undefined;\n}) {\n  return ReactDOM.createPortal(children, portalContainer);\n}\n","import React from \"react\";\nimport { ItemStateContext } from \"@intellij-platform/core/Collections/ItemStateContext\";\nimport { styled } from \"@intellij-platform/core/styled\";\nimport { useContextOrThrow } from \"@intellij-platform/core/utils/useContextOrThrow\";\n\nimport { useMenuItemLayout } from \"./MenuItem\";\nimport { StyledMenuItemIcon } from \"./StyledMenuItem\";\n\ninterface MenuItemLayoutProps {\n  icon?: React.ReactNode;\n  content: React.ReactNode;\n  shortcut?: React.ReactNode;\n}\n\nconst StyledMenuItemLayout = styled.div`\n  display: flex;\n  align-items: center;\n  flex: 1; // to make sure it takes as much space as available in the menu item row, so that the suffix (shortcut) is pushed to the right\n`;\nconst Content = styled.span`\n  flex: 1;\n`;\n\nconst Shortcut = styled.kbd`\n  font-family: system-ui, sans-serif;\n  margin-left: 30px;\n  margin-right: -0.625rem;\n  color: ${({ theme }) =>\n    theme.currentForegroundAware(\n      theme.color(\"MenuItem.acceleratorForeground\")\n    )};\n`;\n\nexport const MenuItemLayout = ({\n  content,\n  shortcut,\n  icon,\n}: MenuItemLayoutProps) => {\n  const { isSelected } = useContextOrThrow(\n    ItemStateContext,\n    \"MenuItemLayout is meant to be rendered in Item component in Menus\"\n  );\n  const { labelProps, keyboardShortcutProps } = useMenuItemLayout();\n  const allowedIcon = !isSelected && icon;\n  return (\n    <StyledMenuItemLayout>\n      {allowedIcon && <StyledMenuItemIcon>{allowedIcon}</StyledMenuItemIcon>}\n      <Content {...labelProps}>{content}</Content>\n      {shortcut && <Shortcut {...keyboardShortcutProps}>{shortcut}</Shortcut>}\n    </StyledMenuItemLayout>\n  );\n};\n","import React, { HTMLProps, useEffect, useRef } from \"react\";\nimport { mergeProps, useLayoutEffect, useObjectRef } from \"@react-aria/utils\";\nimport {\n  ariaHideOutside,\n  useOverlay,\n  usePreventScroll,\n} from \"@react-aria/overlays\";\nimport { FocusScope } from \"@intellij-platform/core/utils/FocusScope\";\nimport {\n  MenuOverlayContext,\n  MenuProps,\n} from \"@intellij-platform/core/Menu/Menu\";\nimport { areInNestedOverlays, Overlay } from \"@intellij-platform/core/Overlay\";\nimport {\n  DelayedLoadingSpinner,\n  LOADING_SPINNER_SIZE_SMALL,\n} from \"@intellij-platform/core/LoadingSpinner\";\n\nexport interface MenuOverlayProps {\n  children: React.ReactNode;\n  restoreFocus?: boolean;\n  autoFocus?: boolean;\n  overlayProps: HTMLProps<HTMLDivElement>;\n  overlayRef?: React.Ref<HTMLDivElement>;\n  /**\n   * Sets the default value of {@link Menu}'s {@link MenuProps#autoFocus} prop.\n   */\n  defaultAutoFocus?: MenuProps<unknown>[\"autoFocus\"];\n  onClose: () => void;\n  suspense?: React.ReactNode;\n}\n\n/**\n * Overlay container for Menu.\n * Positioning is not implemented at this layer.\n * {@link MenuOverlayProps#overlayProps} should be used for positioning.\n */\nexport function MenuOverlay({\n  children,\n  restoreFocus,\n  autoFocus,\n  overlayProps: otherOverlayProps,\n  overlayRef: inputOverlayRef,\n  defaultAutoFocus,\n  onClose,\n  suspense,\n}: MenuOverlayProps) {\n  const overlayRef = useObjectRef(inputOverlayRef);\n  const overlayContainerRef = useRef<HTMLDivElement>(null);\n  const { overlayProps } = useOverlay(\n    {\n      onClose,\n      shouldCloseOnBlur: false,\n      isOpen: true,\n      isKeyboardDismissDisabled: false,\n      isDismissable: true,\n      shouldCloseOnInteractOutside: (element) => {\n        // FIXME: this is kind of hacky and should be removed when nested menu is properly supported\n        return !areInNestedOverlays(overlayRef.current, element);\n      },\n    },\n    overlayRef\n  );\n\n  useLayoutEffect(() => {\n    if (overlayContainerRef.current) {\n      // This is done in usePopover, and either ariaHideOutside or keepVisible\n      // is called depending on isModal.\n      // In JUI, menus are non-modal, but keepVisible is not exposed from @react-aria/overlays.\n      // Without calling either keepVisible or ariaHideOutside, if the menu is rendered in a modal\n      // overlay like ModalWindow, it will be caught by ModalWindow's ariaHideOutside mutation observer\n      // getting aria-hidden=\"true\".\n      // TODO: refactor to use the more high-level, usePopover hook.\n      return ariaHideOutside([overlayContainerRef.current]);\n    }\n  }, [overlayContainerRef]);\n\n  usePreventScroll();\n\n  /**\n   * right clicks outside are not currently captured as \"outside interaction\" by react-aria's useOverlay hook.\n   * so we set up a global listener to close the context menu when contextmenu event is triggered outside the\n   * context menu container.\n   * NOTE: event handler is set up for the `capture` phase, to have it run before the handler for context menu\n   * when the menu is used as a context menu\n   */\n  useEffect(() => {\n    const onOutsideContextMenu = () => {\n      onClose();\n    };\n    document.addEventListener(\"contextmenu\", onOutsideContextMenu, {\n      capture: true,\n    });\n    return () =>\n      document.removeEventListener(\"contextmenu\", onOutsideContextMenu);\n  }, []);\n  const MaybeSuspend = suspense === false ? React.Fragment : React.Suspense;\n\n  return (\n    <Overlay containerRef={overlayContainerRef}>\n      <FocusScope restoreFocus={restoreFocus} autoFocus={autoFocus}>\n        <MenuOverlayContext.Provider\n          value={{\n            close: onClose,\n            defaultAutoFocus,\n          }}\n        >\n          <div\n            {...mergeProps(overlayProps, otherOverlayProps)}\n            ref={overlayRef}\n          >\n            <MaybeSuspend\n              fallback={\n                suspense === undefined ? (\n                  <DelayedLoadingSpinner size={LOADING_SPINNER_SIZE_SMALL} />\n                ) : (\n                  suspense\n                )\n              }\n            >\n              {children}\n            </MaybeSuspend>\n          </div>\n        </MenuOverlayContext.Provider>\n      </FocusScope>\n    </Overlay>\n  );\n}\n","import React, { HTMLAttributes, RefObject } from \"react\";\nimport { useButton } from \"@react-aria/button\";\nimport { AriaMenuOptions, useMenuTrigger } from \"@react-aria/menu\";\nimport { useOverlayPosition } from \"@react-aria/overlays\";\nimport { useMenuTriggerState } from \"@react-stately/menu\";\nimport { MenuTriggerProps as AriaMenuTriggerProps } from \"@react-types/menu\";\n\nimport { MenuOverlay } from \"./MenuOverlay\";\nimport { AriaButtonProps } from \"@react-types/button\";\nimport { Alignment } from \"@react-types/shared\";\nimport { PressResponder } from \"@react-aria/interactions\";\n\nexport interface MenuTriggerProps<E extends \"button\" | \"a\" = \"button\">\n  extends Omit<AriaMenuTriggerProps, \"closeOnSelect\"> {\n  restoreFocus?: boolean;\n  // TODO: replace render function children with normal children, and utilize PressResponder. Add a story for the\n  //  edge case of custom trigger, using PressResponder\n  children:\n    | ((\n        props: \"button\" extends E\n          ? HTMLAttributes<HTMLButtonElement>\n          : HTMLAttributes<HTMLAnchorElement>,\n        ref: RefObject<any> // Using a generic didn't seem to work for some reason\n      ) => React.ReactNode)\n    | React.ReactElement;\n  // NOTE: there is a chance of unchecked breaking change here, since this is not explicitly mentioned as public API\n  // of useButton, but it is passed to the underlying usePress.\n  preventFocusOnPress?: boolean;\n  /**\n   * By default, the menu is positioned relative to the trigger. `positioningTargetRef` can be used to have the menu\n   * positioned to another element. An example use case is when the menu trigger is a button inside some list item or\n   * text box, but the menu semantically belongs to the container list item or text box.\n   */\n  positioningTargetRef?: React.RefObject<HTMLElement>;\n  elementType?: E;\n  renderMenu: (props: {\n    // AriaMenuOptions contains more properties than needed\n    menuProps: Pick<\n      AriaMenuOptions<unknown>,\n      \"id\" | \"aria-labelledby\" | \"autoFocus\" | \"onClose\"\n    >;\n  }) => React.ReactNode;\n  suspense?: React.ReactNode;\n\n  /**\n   * Alignment of the menu relative to the trigger.\n   * @default 'start'\n   */\n  align?: Alignment;\n  /**\n   * Where the Menu opens relative to its trigger.\n   * @default 'bottom'\n   */\n  direction?: \"bottom\" | \"top\" | \"left\" | \"right\" | \"start\" | \"end\";\n  /**\n   * Whether the menu should automatically flip direction when space is limited.\n   * @default true\n   */\n  shouldFlip?: boolean;\n}\n\n// FIXME: Escape doesn't close the menu\n// FIXME: Focus is not restored if nested menu are opened. It may be solved by using useOverlay and closing submenu in click outside.\n// FIXME: use PressResponder and replace render prop children with a normal react dom children. Issues with current impl:\n//  disabled trigger doesn't work as expected. props passed to children fn is html props, which is limiting for button\n//  components that don't accept arbitrary dom props.\n/**\n * Makes its children a trigger for a menu, rendered via {@link MenuTriggerProps#renderMenu} prop.\n * Closes the menu when a menu action is triggered.\n */\nexport const MenuTrigger = <E extends \"button\" | \"a\" = \"button\">({\n  children,\n  renderMenu,\n  elementType = \"button\" as E,\n  direction = \"bottom\",\n  align = \"start\",\n  shouldFlip = true,\n  restoreFocus = true,\n  preventFocusOnPress = true,\n  suspense,\n  positioningTargetRef,\n  ...otherProps\n}: MenuTriggerProps<E>) => {\n  const state = useMenuTriggerState(otherProps);\n  const triggerRef = React.useRef(null);\n  const overlayRef = React.useRef(null);\n  // FIXME: Menu props is not used, but it's just about labelBy and id. Only needed for accessibility, but it would\n  //  require a `renderMenu` prop, instead of `menu`.\n  const { menuTriggerProps: triggerProps, menuProps } = useMenuTrigger(\n    { type: \"menu\" },\n    state,\n    triggerRef\n  );\n  const ariaButtonProps: AriaButtonProps<E> = {\n    ...triggerProps,\n    elementType,\n    preventFocusOnPress,\n  };\n  const { buttonProps } = useButton(ariaButtonProps, triggerRef);\n\n  const { overlayProps: positionProps } = useOverlayPosition({\n    targetRef: positioningTargetRef ?? triggerRef,\n    overlayRef,\n    placement: getPlacement(direction, align),\n    shouldFlip,\n    offset: 0,\n    containerPadding: 0,\n    onClose: () => state.close(),\n    isOpen: state.isOpen,\n  });\n\n  return (\n    <>\n      {typeof children === \"function\" ? (\n        children(buttonProps, triggerRef)\n      ) : (\n        <PressResponder ref={triggerRef} {...buttonProps}>\n          {children}\n        </PressResponder>\n      )}\n      {state.isOpen && (\n        <MenuOverlay\n          overlayProps={positionProps}\n          overlayRef={overlayRef}\n          onClose={state.close}\n          restoreFocus={restoreFocus}\n          suspense={suspense}\n        >\n          {renderMenu({ menuProps })}\n        </MenuOverlay>\n      )}\n    </>\n  );\n};\n\nfunction getPlacement(\n  direction: Required<MenuTriggerProps>[\"direction\"],\n  align: Required<MenuTriggerProps>[\"align\"]\n) {\n  switch (direction) {\n    case \"left\":\n    case \"right\":\n    case \"start\":\n    case \"end\":\n      return `${direction} ${align === \"end\" ? \"bottom\" : \"top\"}` as const;\n    case \"bottom\":\n    case \"top\":\n    default:\n      return `${direction} ${align}` as const;\n  }\n}\n","import { css } from \"styled-components\";\n\nimport { WINDOW_SHADOW } from \"../style-constants\";\nimport { styled } from \"../styled\";\nimport { StyledVerticalSeparator } from \"../StyledSeparator\";\nimport { UnknownThemeProp } from \"../Theme/Theme\";\n\nimport { StyledMenuItem, StyledMenuItemIcon } from \"./StyledMenuItem\";\n\nexport const MENU_VERTICAL_PADDING = 5;\nexport const MENU_BORDER_WIDTH = 1;\n\n// noinspection CssInvalidPropertyValue\nexport const StyledMenu = styled.ul<{ $fillAvailableSpace?: boolean }>`\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  font-size: 0.8rem;\n  margin: 0;\n  padding: ${MENU_VERTICAL_PADDING}px 0;\n  outline: none;\n  list-style: none;\n  width: fit-content;\n  min-width: 120px;\n  overflow: auto;\n  // Border doesn't seem to be painted in the original impl. IdeaPopupMenuUI.isUnderPopup(c) seemed to return false\n  // in all cases. More info: https://github.com/JetBrains/intellij-community/blob/c5ece483811a3ab546fc3880225efb02cc8b94dd/platform/platform-impl/src/com/intellij/ide/ui/laf/darcula/ui/DarculaPopupMenuBorder.java#L24\n  /*  border: ${MENU_BORDER_WIDTH}px solid\n    ${({ theme }) =>\n    theme.color(\"Menu.borderColor\", !theme.dark ? \"#CDCDCD\" : \"#515151\")};*/\n  ${WINDOW_SHADOW};\n  background: ${({ theme }) =>\n    theme.color(\n      \"PopupMenu.background\" as UnknownThemeProp<\"PopupMenu.background\">\n    )};\n  color: ${({ theme }) =>\n    theme.color(\n      \"PopupMenu.foreground\" as UnknownThemeProp<\"PopupMenu.foreground\">\n    )};\n\n  ${StyledVerticalSeparator}:first-child,\n  ${StyledVerticalSeparator}:last-child, \n  ${StyledVerticalSeparator} + ${StyledVerticalSeparator} {\n    display: none;\n  }\n  ${StyledVerticalSeparator} {\n    background-color: ${({ theme }) => theme.color(\"Menu.separatorColor\")};\n    height: ${({ theme }) =>\n      `${theme.value(\"PopupMenuSeparator.height\") ?? 3}px`};\n    padding: ${({ theme }) =>\n      `${theme.value(\"PopupMenuSeparator.stripeIndent\") ?? 1}px 0`};\n    margin: ${({ theme }) =>\n      `0 ${theme.value(\"PopupMenuSeparator.withToEdge\") ?? 1}px`};\n  }\n  ${({ $fillAvailableSpace }) =>\n    $fillAvailableSpace &&\n    css`\n      flex: 1;\n      width: fill-available; // will be converted to --webkit-fill-available and --moz-available, but doesn't work in FF\n      height: fill-available;\n    `}\n\n  --jui-menu-item-padding: 1rem;\n  --jui-menu-item-icon-width: 1rem;\n  --jui-menu-item-icon-spacing: 0.3125rem;\n\n  ${StyledMenuItem} {\n    // NOTE: The left margin seems not to be consistent in all menus.\n    padding-left: var(--jui-menu-item-padding);\n  }\n  &:has(${StyledMenuItemIcon}) {\n    // Adjusting item padding for menus with icon to be slightly smaller. Based on observations on the reference impl.\n    // Could be handled by a negative margin on icons as well.\n    --jui-menu-item-padding: 0.75rem;\n\n    // CSS-only solution to conditionally add left margin to menu items without icon, if there is at least one menu item\n    // with icon, in the current menu. To have text in all menu items aligned. The extra margin is avoided if there is no\n    // menu item with icon. It relies on :has() css pseudo-class which is not supported in FF at the moment.\n    ${StyledMenuItem}:not(:has(${StyledMenuItemIcon})) {\n      padding-left: calc(\n        var(--jui-menu-item-padding) + var(--jui-menu-item-icon-width) +\n          var(--jui-menu-item-icon-spacing)\n      );\n    }\n  }\n  ${StyledMenuItemIcon} {\n    width: var(--jui-menu-item-icon-width);\n    margin-right: var(--jui-menu-item-icon-spacing);\n  }\n`;\n","import { css, styled } from \"@intellij-platform/core/styled\";\n\nimport { UnknownThemeProp } from \"@intellij-platform/core/Theme\";\nexport const StyledMenuItemIcon = styled.span`\n  display: inline-flex; // prevents unwanted increased height\n`;\n\nexport const StyledNestedArrow = styled.span`\n  display: inline-flex; // to make it not take more height than the icon\n  margin-right: -0.75rem;\n  margin-left: 0.75rem;\n`;\n\nconst highlightedStyle = css`\n  color: ${({ theme }) =>\n    theme.asCurrentForeground(\n      theme.color(\n        \"MenuItem.selectionForeground\" as UnknownThemeProp<\"MenuItem.selectionForeground\">\n      )\n    )};\n  background: ${({ theme }) =>\n    theme.color(\n      \"MenuItem.selectionBackground\" as UnknownThemeProp<\"MenuItem.selectionBackground\">\n    )};\n`;\nconst defaultStyle = css`\n  color: ${({ theme }) =>\n    theme.color(\n      \"MenuItem.foreground\" as UnknownThemeProp<\"MenuItem.foreground\">\n    )};\n  background: unset;\n`;\nconst disabledStyle = css`\n  color: ${({ theme }) =>\n    theme.color(\"MenuItem.disabledForeground\") + \"!important\"};\n  background: unset !important;\n`;\nexport const StyledMenuItem = styled.li<{\n  $disabled: boolean;\n  $active: boolean;\n}>`\n  position: relative; // for being able to position arrow icon absolutely\n  outline: none;\n  cursor: default;\n  white-space: nowrap;\n\n  // bg/fg style for different states. Order is based on how they should override each other\n  ${defaultStyle};\n  ${({ $active }) => $active && highlightedStyle};\n  ${({ $disabled }) => $disabled && disabledStyle};\n\n  padding-right: 1.25rem;\n  line-height: 1.3125rem; // to make the item have the right height\n  display: flex;\n  align-items: center;\n`;\n","import React, { useContext, useEffect, useRef } from \"react\";\nimport { TreeState } from \"@react-stately/tree\";\nimport { AriaMenuOptions, useMenu } from \"@react-aria/menu\";\nimport { mergeProps } from \"@react-aria/utils\";\n\nimport {\n  MenuKeyboardDelegate,\n  useSubmenu as useSubmenuAria,\n} from \"./_useSubmenu\";\nimport { useSubmenuState } from \"./_useSubmenuState\";\nimport { MenuContext } from \"./Menu\";\nimport { StyledMenu } from \"./StyledMenu\";\nimport { renderMenuNodes } from \"./renderMenuNodes\";\n\nexport function useSubmenu<T>(\n  {\n    rootKey,\n    parentState,\n    keyboardDelegate,\n  }: { rootKey: React.Key; parentState: TreeState<T> } & Pick<\n    AriaMenuOptions<T>,\n    \"keyboardDelegate\"\n  >,\n  state: TreeState<T>,\n  ref: React.RefObject<HTMLElement>\n) {\n  const rootItem = state.collection.getItem(rootKey);\n  const {\n    submenuBehavior,\n    autoFocus = true,\n    onClose,\n    onAction,\n  } = useContext(MenuContext);\n  let { menuProps } = useMenu(\n    {\n      \"aria-label\": rootItem?.[\"aria-label\"] || rootItem?.textValue,\n      onAction,\n      onClose,\n      selectedKeys: state.selectionManager.selectedKeys,\n      keyboardDelegate:\n        keyboardDelegate ||\n        new MenuKeyboardDelegate(\n          rootKey,\n          state.collection,\n          state.disabledKeys,\n          ref\n        ),\n      autoFocus,\n    },\n    state,\n    ref\n  );\n  const { submenuProps } = useSubmenuAria({ rootKey }, parentState, ref);\n\n  const submenuBehaviorProps = {\n    onKeyDown: (e: React.KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        // Close the menu and submenu root node.\n        state.toggleKey(rootKey);\n        state.selectionManager.setFocusedKey(rootKey);\n        parentState.selectionManager.setFocused(true);\n        if (submenuBehavior !== \"default\") {\n          e.stopPropagation();\n        }\n        return;\n      }\n    },\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      // we need this hack until the nested menu is properly supported. That's because when the element is hovered\n      // it sets the focus key, which will move focus to that item.\n      // noinspection PointlessBooleanExpressionJS seems to be false positive. autoFocus can be \"first\" or \"last\"\n      if (autoFocus === true) {\n        ref.current?.focus();\n      }\n    });\n  }, []);\n\n  return {\n    submenuProps: mergeProps(menuProps, submenuProps, submenuBehaviorProps),\n  };\n}\n\nexport interface SubmenuProps<T> {\n  parentState: TreeState<T>;\n  rootKey: React.Key;\n}\n\nexport function Submenu<T>({ parentState, rootKey }: SubmenuProps<T>) {\n  const ref = useRef<HTMLUListElement>(null);\n  const state = useSubmenuState(parentState);\n  const rootItem = state.collection.getItem(rootKey);\n\n  const { submenuProps } = useSubmenu({ rootKey, parentState }, state, ref);\n\n  return (\n    <StyledMenu {...submenuProps} ref={ref}>\n      {renderMenuNodes(state, [...(rootItem?.childNodes || [])])}\n    </StyledMenu>\n  );\n}\n","import { Collection, Node } from \"@react-types/shared\";\nimport { TreeState } from \"@react-stately/tree\";\nimport React, { Key, RefObject } from \"react\";\nimport { useKeyboard } from \"@react-aria/interactions\";\nimport { ListKeyboardDelegate } from \"@react-aria/selection\";\n\nexport class MenuKeyboardDelegate<T> extends ListKeyboardDelegate<T> {\n  private keys: React.Key[];\n  constructor(\n    rootKey: Key | null,\n    private collection: Collection<Node<T>>,\n    disabledKeys: Set<React.Key>,\n    ref: React.RefObject<HTMLElement>,\n    collator?: Intl.Collator\n  ) {\n    super(collection, disabledKeys, ref, collator);\n    this.keys = [...collection.getKeys()]\n      .map((key) => collection.getItem(key))\n      .flatMap((item) => {\n        if (item && item.parentKey == rootKey) {\n          if (item.type === \"item\") {\n            return [item.key];\n          } else if (item.type === \"section\") {\n            return [...item.childNodes].map(({ key }) => key);\n          }\n        }\n        return [];\n      });\n  }\n\n  getFirstKey(): React.Key {\n    return this.keys[0];\n  }\n  getLastKey(): React.Key {\n    return this.keys.slice(-1)[0];\n  }\n\n  getKeyBelow(key: React.Key): React.Key {\n    const keyBelow = super.getKeyBelow(key);\n    // @ts-expect-error: getKeyBelow should be allowed to return null, but typing is currently inaccurate in react-aria\n    return this.keys.includes(keyBelow) ? keyBelow : null;\n  }\n  getKeyAbove(key: React.Key): React.Key {\n    const keyAbove = super.getKeyAbove(key);\n    // @ts-expect-error: getKeyBelow should be allowed to return null, but typing is currently inaccurate in react-aria\n    return this.keys.includes(keyAbove) ? keyAbove : null;\n  }\n}\n\n/**\n * Behavior accessibility of submenus:\n * - Closing submenu on ArrowLeft key press.\n *   Note that it can't be implemented in useMenuItem, because the focus might be on no the submenu itself and not any\n *   of its items\n * @param rootKey: Key of the root node, the submenu is created from its children\n * @param state\n * @param ref\n */\nexport function useSubmenu<T>(\n  { rootKey }: { rootKey: Key },\n  state: TreeState<T>,\n  ref: RefObject<HTMLElement>\n) {\n  const { keyboardProps: submenuProps } = useKeyboard({\n    onKeyDown: (e) => {\n      // Keyboard events bubble through portals. Don't handle keyboard events\n      // for elements outside the collection (e.g. menus).\n      if (!ref.current?.contains(e.target as Element)) {\n        e.continuePropagation();\n        return;\n      }\n      const root = state.collection.getItem(rootKey);\n      if (e.key === \"ArrowLeft\" && root && state.expandedKeys.has(root.key)) {\n        state.toggleKey(root.key);\n        state.selectionManager.setFocused(true);\n        return;\n      }\n      e.continuePropagation();\n    },\n  });\n\n  return {\n    submenuProps,\n  };\n}\n","import { TreeState } from \"@react-stately/tree\";\nimport { Key, useRef, useState } from \"react\";\nimport {\n  MultipleSelectionState,\n  SelectionManager,\n} from \"@react-stately/selection\";\n\n/**\n * Creates a TreeState corresponding to the submenu, from the state of a parent (sub)menu.\n * The collection and everything is the same, and the only difference from the parent state is selection manager\n * having a separate focused state to keep the focused state of each menu container separately, as the submenus\n * are usually rendered in separate overlays.\n */\nexport function useSubmenuState<T>(parentState: TreeState<T>) {\n  // We want synchronous updates to `isFocused` and `focusedKey` after their setters are called.\n  // But we also need to trigger a re-render. So, we have both a ref (sync) and state (async).\n  const [, setFocused] = useState(false);\n  const [, setFocusedKey] = useState<Key | null>(null);\n  const isFocusedRef = useRef(false);\n  const focusedKeyRef = useRef<Key | null>(null);\n\n  const state: MultipleSelectionState = {\n    // @ts-expect-error state is private\n    ...parentState.selectionManager.state,\n    setFocused: (isFocused: boolean) => {\n      isFocusedRef.current = isFocused;\n      setFocused(isFocused);\n    },\n    setFocusedKey(key: Key) {\n      focusedKeyRef.current = key;\n      setFocusedKey(key);\n    },\n  };\n  Object.defineProperties(state, {\n    isFocused: {\n      get() {\n        return isFocusedRef.current;\n      },\n    },\n    focusedKey: {\n      get() {\n        return focusedKeyRef.current!;\n      },\n    },\n  });\n\n  return {\n    ...parentState,\n    selectionManager: new SelectionManager(parentState.collection, state),\n  };\n}\n","import React from \"react\";\nimport { useMenuSection } from \"@react-aria/menu\";\nimport { Node } from \"@react-types/shared\";\nimport { TreeState } from \"@react-stately/tree\";\nimport { styled } from \"@intellij-platform/core/styled\";\n\nimport { renderMenuNodes } from \"./renderMenuNodes\";\n\nexport interface MenuSectionProps<T> {\n  item: Node<T>;\n  state: TreeState<T>;\n  filter?: (node: Node<T>) => boolean;\n}\n\nconst StyledMenuHeading = styled.div`\n  cursor: default;\n  padding: 2px 0 2px 12px;\n  font-weight: bold;\n  font-size: 0.8125rem;\n  color: ${({ theme }) =>\n    theme.color(\n      \"MenuItem.disabledForeground\"\n    )}; // TODO: make sure about it. It's probably not correct color\n`;\n\nconst StyledMenuSectionItemsContainer = styled.ul`\n  padding: 0;\n  margin: 0;\n`;\n\nexport const MenuSection = <T extends unknown>({\n  item,\n  state,\n  filter = () => true,\n}: MenuSectionProps<T>): React.ReactElement => {\n  let { itemProps, headingProps, groupProps } = useMenuSection({\n    heading: item.rendered,\n    \"aria-label\": item[\"aria-label\"],\n  });\n\n  const nodes = [...item.childNodes].filter(filter);\n  if (nodes.filter(({ type }) => type === \"item\").length === 0) {\n    return <></>;\n  }\n  return (\n    <>\n      <li {...itemProps}>\n        {item.rendered && (\n          <StyledMenuHeading {...headingProps}>\n            {item.rendered}\n          </StyledMenuHeading>\n        )}\n        <StyledMenuSectionItemsContainer {...groupProps}>\n          {renderMenuNodes(state, nodes)}\n        </StyledMenuSectionItemsContainer>\n      </li>\n    </>\n  );\n};\n","import React from \"react\";\nimport { TreeState } from \"@react-stately/tree\";\nimport { Node } from \"@react-types/shared\";\nimport { ListDivider } from \"@intellij-platform/core/List/ListDivider\"; // private import\n\nimport { MenuItem } from \"./MenuItem\";\nimport { MenuSection } from \"./MenuSection\";\n\nexport function renderMenuNodes<T>(\n  state: TreeState<T>,\n  nodes: Node<T>[],\n  filter: (node: Node<T>) => boolean = () => true\n) {\n  return nodes.filter(filter).map((node) => {\n    switch (node.type) {\n      case \"item\":\n        return <MenuItem key={node.key} item={node} state={state} />;\n      case \"section\":\n        return (\n          <>\n            {node.props.hasDivider && (\n              <ListDivider key={node.key + \"-divider1\"} />\n            )}\n            <MenuSection\n              key={node.key}\n              item={node}\n              state={state}\n              filter={filter}\n            />\n            {node.props.hasDivider && (\n              <ListDivider key={node.key + \"-divider2\"} />\n            )}\n          </>\n        );\n      case \"divider\":\n        return <ListDivider key={node.key} />;\n    }\n  });\n}\n","import React, { ForwardedRef, useContext, useRef } from \"react\";\nimport { Overlay as AriaOverlay, OverlayProps } from \"@react-aria/overlays\";\nimport { useObjectRef } from \"@react-aria/utils\";\n\nconst ParentOverlayContext = React.createContext<HTMLElement | null>(null);\n\n/**\n * A (drop-in replacement) wrapper around Overlay, which makes sure overlays created in nested\n * react components will be ported to the same top level container. This is especially useful to detect\n * \"outside clicks\" when overlays are nested. The most common example would be nested menu in popup.\n *\n */\nexport function Overlay({\n  children,\n  OverlayComponent = AriaOverlay,\n  containerRef: containerRefProp,\n}: {\n  children: React.ReactNode;\n  OverlayComponent?: React.ComponentType<OverlayProps>;\n  containerRef?: ForwardedRef<HTMLDivElement>;\n}) {\n  const root = useContext(ParentOverlayContext);\n  const containerRef = useObjectRef(containerRefProp);\n\n  if (root) {\n    return (\n      <OverlayComponent portalContainer={root}>{children}</OverlayComponent>\n    );\n  }\n  return (\n    <ParentOverlayContext.Provider value={containerRef.current}>\n      <OverlayComponent>\n        <div ref={containerRef} data-overlay-root=\"\">\n          {children}\n        </div>\n      </OverlayComponent>\n    </ParentOverlayContext.Provider>\n  );\n}\n\n/**\n * Returns true, if element1 and element2 are in nested overlays. \"Nested\" being in terms of React component tree.\n * Useful for detecting \"outside click\" when overlay components are nested in each other.\n */\nexport function areInNestedOverlays(\n  element1: Element | null,\n  element2: Element | null\n) {\n  const overlayRoot1 = element1?.closest(\"[data-overlay-root]\");\n  const overlayRoot2 = element2?.closest(\"[data-overlay-root]\");\n  return Boolean(overlayRoot1) && overlayRoot1 === overlayRoot2;\n}\n","import React from \"react\";\nimport { styled } from \"./styled\";\n\ntype SeparatorUI = {\n  STRIPE_INDENT: number;\n  STRIPE_WIDTH: number;\n};\n\n// based on implementation in com.intellij.ide.ui.laf.darcula.ui.DarculaSeparatorUI, which seems to be used for all themes\nconst DarculaSeparatorUI: SeparatorUI = {\n  STRIPE_INDENT: 1,\n  STRIPE_WIDTH: 1,\n};\n\nconst defaultSize =\n  2 * DarculaSeparatorUI.STRIPE_INDENT + DarculaSeparatorUI.STRIPE_WIDTH;\n\nexport const StyledSeparator = styled.hr(({ theme }) => ({\n  backgroundColor: theme.color(\n    \"Separator.separatorColor\",\n    theme.dark ? \"#cdcdcd\" : \"#515151\"\n  ),\n  backgroundClip: \"content-box\",\n  boxSizing: \"border-box\",\n  margin: 0,\n  border: \"none\",\n  flexShrink: 0,\n}));\n\nexport const StyledHorizontalSeparator = styled(StyledSeparator)`\n  height: inherit; // should it be auto?\n  padding: 0 ${DarculaSeparatorUI.STRIPE_INDENT}px;\n  width: ${defaultSize}px;\n`;\nexport const StyledVerticalSeparator = styled(StyledSeparator)`\n  width: auto;\n  padding: ${DarculaSeparatorUI.STRIPE_INDENT}px 0;\n  height: ${defaultSize}px;\n`;\n","import { TabCloseButton } from \"@intellij-platform/core/Tabs/TabCloseButton\";\nimport { TabContentLayout } from \"@intellij-platform/core/Tabs/TabContentLayout\";\nimport React from \"react\";\n\nexport const DebuggerTabContent = ({\n  icon,\n  title,\n  closeButton,\n}: {\n  icon: React.ReactNode;\n  title: React.ReactNode;\n  /**\n   * Close button for the tab. Use {@link TabCloseButton} to render the close button\n   * for the tab.\n   *\n   * @example\n   * ```tsx\n   * <DebuggerTabContent\n   *   closeButton={\n   *     <TooltipTrigger\n   *       tooltip={<ActionTooltip actionName=\"Close Tab\" shortcut=\"^â‡§F4\" />}\n   *     >\n   *       <TabCloseButton onPress={}></TabCloseButton>\n   *     </TooltipTrigger>\n   *   }\n   * />\n   * ```\n   */\n  closeButton?: React.ReactElement;\n}) => {\n  return (\n    <TabContentLayout startIcon={icon} title={title} endIcon={closeButton} />\n  );\n};\n","import { Theme } from \"@intellij-platform/core/Theme\";\nimport { styled } from \"@intellij-platform/core/styled\";\n\nimport { StyledDefaultTab } from \"@intellij-platform/core/Tabs/StyledDefaultTab\";\nimport {\n  getTabThemeStyles,\n  TabTheme,\n} from \"@intellij-platform/core/Tabs/TabTheme\";\n\nexport const debuggerTabTheme = ({ theme }: { theme: Theme }): TabTheme => ({\n  underlineHeight: theme.value<number>(\"DebuggerTabs.underlineHeight\") ?? 2,\n  underlinedTabBackground: theme.color(\"DebuggerTabs.underlinedTabBackground\"),\n});\nexport const StyledDebuggerTab = styled(StyledDefaultTab)`\n  ${({ theme }) => getTabThemeStyles(debuggerTabTheme({ theme }))};\n`;\n","import { Tabs, TabsProps } from \"@intellij-platform/core/Tabs/Tabs\";\nimport { StyledDebuggerTab } from \"./StyledDebuggerTab\";\nimport React from \"react\";\n\ntype DebuggerTabsProps<T extends object> = Omit<\n  TabsProps<T>,\n  \"TabComponent\" | \"focusable\"\n>;\n\nexport const DebuggerTabs = <T extends object>(props: DebuggerTabsProps<T>) => (\n  <Tabs {...props} TabComponent={StyledDebuggerTab} focusable={false} />\n);\n","import React from \"react\";\nimport { PlatformIcon } from \"@intellij-platform/core/Icon\";\nimport { TabCloseButton } from \"@intellij-platform/core/Tabs/TabCloseButton\";\nimport {\n  TabContentLayout,\n  TabItemLayoutProps,\n} from \"@intellij-platform/core/Tabs/TabContentLayout\";\nimport { ActionTooltip, TooltipTrigger } from \"@intellij-platform/core/Tooltip\";\nimport { BareButton } from \"@intellij-platform/core/Button\";\n\ninterface EditorTabContentProps {\n  icon: React.ReactNode;\n  title: React.ReactNode;\n  /**\n   * Close button, shown in place of \"pin\" button if not pinned. Use {@link TabCloseButton} to render the close button\n   * for the tab.\n   *\n   * @example\n   * ```tsx\n   * <EditorTabContent\n   *   closeButton={\n   *     <TooltipTrigger\n   *       tooltip={<ActionTooltip actionName=\"Close Tab\" shortcut=\"^â‡§F4\" />}\n   *     >\n   *       <TabCloseButton onPress={}></TabCloseButton>\n   *     </TooltipTrigger>\n   *   }\n   * />\n   * ```\n   */\n  closeButton?: React.ReactElement;\n  onUnpin?: () => void;\n  pinned?: boolean;\n  containerProps?: TabItemLayoutProps[\"containerProps\"];\n}\n/**\n * For rendering the content of Editor tabs. supports for file icon which is shown on the left and close or unpin\n * button shown on the right.\n */\nexport const EditorTabContent = ({\n  icon,\n  title,\n  closeButton,\n  onUnpin,\n  pinned,\n  containerProps,\n}: EditorTabContentProps) => {\n  return (\n    <TabContentLayout\n      startIcon={icon}\n      title={title}\n      containerProps={containerProps}\n      endIcon={\n        pinned ? (\n          <TooltipTrigger tooltip={<ActionTooltip actionName=\"Unpin Tab\" />}>\n            <BareButton\n              onPress={onUnpin}\n              excludeFromTabOrder\n              preventFocusOnPress\n            >\n              <PlatformIcon icon=\"actions/pinTab\" />\n            </BareButton>\n          </TooltipTrigger>\n        ) : (\n          closeButton\n        )\n      }\n    />\n  );\n};\n","import { styled } from \"@intellij-platform/core/styled\";\nimport { Theme, UnknownThemeProp } from \"@intellij-platform/core/Theme\";\nimport { StyledDefaultTab } from \"@intellij-platform/core/Tabs/StyledDefaultTab\";\nimport {\n  getTabThemeStyles,\n  TabTheme,\n} from \"@intellij-platform/core/Tabs/TabTheme\";\n\nexport const editorTabTheme = ({ theme }: { theme: Theme }): TabTheme => ({\n  borderColor: theme.color(\"EditorTabs.borderColor\"),\n  underlineHeight: theme.value<number>(\"EditorTabs.underlineHeight\"),\n  background: theme.color(\"EditorTabs.background\"),\n  underlinedTabInactiveBackground: theme.color(\n    \"EditorTabs.underlinedTabBackground\" // that's correctly not underlinedTabInactiveBackground!\n  ), // TODO: use EditorColorsScheme when available\n  underlinedTabBackground: theme.color(\"EditorTabs.underlinedTabBackground\"), // TODO: use EditorColorsScheme when available\n  hoverInactiveBackground: theme.color(\n    \"EditorTabs.hoverInactiveBackground\" as UnknownThemeProp<\"EditorTabs.hoverInactiveBackground\">\n  ),\n  hoverBackground: theme.color(\"EditorTabs.hoverBackground\"),\n  inactiveUnderlineColor: theme.color(\"EditorTabs.inactiveUnderlineColor\"), // TODO: use EditorColorsScheme when available\n  underlineColor: theme.color(\"EditorTabs.underlineColor\"), // TODO: use EditorColorsScheme when available\n\n  underlinedTabInactiveForeground: theme.color(\n    \"EditorTabs.underlinedTabForeground\" // that's correctly not underlinedTabInactiveForeground!\n  ), // TODO: use EditorColorsScheme when available\n  underlinedTabForeground: theme.color(\"EditorTabs.underlinedTabForeground\"), // TODO: use EditorColorsScheme when available\n});\nexport const StyledEditorTab = styled(StyledDefaultTab)`\n  font-size: 0.7rem;\n  ${({ theme }) => getTabThemeStyles(editorTabTheme({ theme }))};\n`;\n","import { styled } from \"@intellij-platform/core/styled\";\nimport { getTabsThemeStyles } from \"@intellij-platform/core/Tabs/TabTheme\";\nimport { StyledDefaultTabs } from \"@intellij-platform/core/Tabs/StyledDefaultTabs\";\nimport { editorTabTheme } from \"./StyledEditorTab\";\n\nexport const StyledEditorTabs = styled(StyledDefaultTabs)`\n  ${({ theme }) => getTabsThemeStyles(editorTabTheme({ theme }))};\n`;\n","import { Tabs, TabsProps } from \"@intellij-platform/core/Tabs/Tabs\";\nimport { StyledEditorTab } from \"./StyledEditorTab\";\nimport { StyledEditorTabs } from \"./StyledEditorTabs\";\nimport React from \"react\";\n\nexport type EditorTabsProps<T extends object> = Omit<\n  TabsProps<T>,\n  \"TabComponent\" | \"TabsComponent\" | \"focusable\"\n>;\n\nexport const EditorTabs = <T extends object>(props: EditorTabsProps<T>) => (\n  <Tabs\n    {...props}\n    TabComponent={StyledEditorTab}\n    TabsComponent={StyledEditorTabs}\n    focusable={false}\n  />\n);\n","import { getTabThemeStyles } from \"./TabTheme\";\nimport { styled } from \"../styled\";\nimport { Theme, UnknownThemeProp } from \"../Theme\";\nimport { HTMLProps } from \"react\";\n\nexport interface TabComponentProps extends HTMLProps<HTMLElement> {\n  $selected?: boolean;\n  $disabled?: boolean;\n  $active?: boolean;\n}\n\nconst defaultTabTheme = ({ theme }: { theme: Theme }) =>\n  getTabThemeStyles({\n    underlineHeight: theme.value<number>(\"DefaultTabs.underlineHeight\") ?? 3,\n    inactiveUnderlineColor: theme.color(\n      \"DefaultTabs.inactiveUnderlineColor\",\n      theme.dark ? \"#747a80\" : \"#9ca7b8\"\n    ),\n    underlineColor: theme.color(\n      \"DefaultTabs.underlineColor\",\n      theme.dark ? \"#4A88C7\" : \"#4083C9\"\n    ),\n\n    underlinedTabInactiveForeground: theme.color(\n      \"DefaultTabs.underlinedTabInactiveForeground\" as UnknownThemeProp<\"DefaultTabs.underlinedTabInactiveForeground\">\n    ),\n    underlinedTabForeground: theme.color(\"DefaultTabs.underlinedTabForeground\"),\n\n    background: theme.color(\n      \"DefaultTabs.background\",\n      theme.dark ? \"#3C3F41\" : \"#ECECEC\"\n    ),\n    underlinedTabInactiveBackground: theme.color(\n      \"DefaultTabs.underlinedTabInactiveBackground\" as UnknownThemeProp<\"DefaultTabs.underlinedTabInactiveBackground\">\n    ),\n    underlinedTabBackground: theme.color(\n      \"DefaultTabs.underlinedTabBackground\" as UnknownThemeProp<\"DefaultTabs.underlinedTabBackground\">\n    ),\n    hoverInactiveBackground: theme.color(\n      \"DefaultTabs.hoverInactiveBackground\" as UnknownThemeProp<\"DefaultTabs.hoverInactiveBackground\">,\n      theme.dark ? \"rgba(0,0,0,.35)\" : \"rgba(0,0,0,.1)\"\n    ),\n    hoverBackground: theme.color(\n      \"DefaultTabs.hoverBackground\",\n      theme.dark ? \"rgba(0,0,0,.35)\" : \"rgba(0,0,0,.1)\"\n    ),\n  });\n\nexport const StyledDefaultTab = styled.div<TabComponentProps>`\n  box-sizing: border-box;\n  display: inline-flex;\n  letter-spacing: 0.015rem;\n  font-size: 0.85rem;\n  cursor: default;\n  white-space: nowrap;\n\n  // spacing\n  padding: 0 0.5rem;\n  line-height: 1.7rem; // vertical spacing handled by line-height\n\n  // disabled state doesn't seem to be supported in Intellij Platform at all.\n  opacity: ${({ $disabled }) => ($disabled ? \".5\" : \"1\")};\n  color: ${({ theme }) =>\n    theme.color(\n      \"DefaultTabs.foreground\" as UnknownThemeProp<\"DefaultTabs.foreground\">\n    )};\n\n  position: relative;\n  &::after {\n    content: \"\";\n    position: absolute;\n    width: 100%;\n    left: 0;\n    bottom: 0;\n  }\n\n  ${defaultTabTheme};\n`;\n","import { HTMLProps } from \"react\";\nimport { Theme } from \"../Theme\";\nimport { styled } from \"@intellij-platform/core/styled\";\nimport { getTabsThemeStyles } from \"./TabTheme\";\n\nconst defaultTabsTheme = ({ theme }: { theme: Theme }) =>\n  getTabsThemeStyles({\n    borderColor: theme.color(\n      \"DefaultTabs.borderColor\",\n      theme.commonColors.contrastBorder\n    ),\n    background: theme.color(\"DefaultTabs.background\"),\n  });\n\nexport interface TabsComponentProps extends HTMLProps<HTMLElement> {\n  $noBorders?: boolean;\n}\n\nexport const StyledDefaultTabs = styled.div<TabsComponentProps>`\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  border-style: solid;\n  border-width: ${({ $noBorders }) => ($noBorders ? \"0\" : \"1px 0\")};\n\n  ${defaultTabsTheme};\n`;\n","import React, { ForwardedRef, HTMLProps } from \"react\";\nimport { css, styled } from \"../styled\";\nimport { useFocusable } from \"@react-aria/focus\";\nimport { mergeProps, useObjectRef } from \"@react-aria/utils\";\n\nconst StyledTabItemLayout = styled.div`\n  display: inline-flex;\n  align-items: center;\n`;\n\nconst iconStyle = css`\n  display: inline-flex; // without this, the wrapper takes the full height, causing icon to be placed on top\n  margin-top: -0.1rem; // seems necessary for pixel perfect match with the original impl\n`;\n\nconst StyledStartIconWrapper = styled.span`\n  ${iconStyle};\n  margin-right: 0.25rem;\n`;\n\nconst StyledEndIconWrapper = styled.span`\n  ${iconStyle};\n  margin-left: 0.25rem;\n  margin-right: -0.25rem; // default padding of the tab should be a little reduced when close icon is there.\n  border-radius: 16px;\n`;\n\nexport interface TabItemLayoutProps {\n  /**\n   * the icon placed before the text.\n   */\n  startIcon?: React.ReactNode;\n  /**\n   * title of the tab. Normally just a string\n   */\n  title?: React.ReactNode;\n  /**\n   * the icon placed after the text. Typical use cases: close or pin icon.\n   */\n  endIcon?: React.ReactNode;\n\n  /**\n   * Generic HTML props passed to the container div.\n   */\n  containerProps?: Omit<HTMLProps<HTMLDivElement>, \"ref\" | \"as\">;\n}\n\n/**\n * Helper component for rendering the common layout of tab content.\n */\nexport const TabContentLayout = React.forwardRef(\n  (\n    { startIcon, title, endIcon, containerProps = {} }: TabItemLayoutProps,\n    ref: ForwardedRef<HTMLDivElement>\n  ) => {\n    // To allow tooltip be used easily. TooltipTrigger passes props via FocusableContext.\n    const { focusableProps } = useFocusable({}, useObjectRef(ref));\n    return (\n      <StyledTabItemLayout\n        {...mergeProps(focusableProps, containerProps)}\n        ref={ref}\n      >\n        {startIcon && (\n          <StyledStartIconWrapper>{startIcon}</StyledStartIconWrapper>\n        )}\n        {title}\n        {endIcon && <StyledEndIconWrapper>{endIcon}</StyledEndIconWrapper>}\n      </StyledTabItemLayout>\n    );\n  }\n);\n","import { ItemProps } from \"@react-types/shared\";\nimport { Item } from \"@react-stately/collections\";\nimport React from \"react\";\n\nexport interface TabItemProps extends ItemProps<never> {\n  /**\n   * Determines how the tab item should look when rendered as a menu item in overflow menu.\n   * If not passed, `textValue` will be used.\n   * @example\n   * <TabItem\n   *   key={tab.id}\n   *   textValue={tab.title}\n   *   inOverflowMenu={\n   *     <MenuItemLayout content={tab.title} icon={icon} />\n   *   }\n   *  >\n   *   <TabContentLayout startIcon={icon} title={tab.title} />\n   * </TabItem>\n   */\n  inOverflowMenu?: React.ReactNode;\n}\n\n/**\n * Same as {@link Item}, but allows for specifying the tab content for when it's rendered in the overflow menu item.\n */\nexport const TabItem: (props: TabItemProps) => React.ReactElement = Item;\n","import { css } from \"@intellij-platform/core/styled\";\nimport { TabComponentProps } from \"./StyledDefaultTab\";\n\n/**\n * Describes theme-able properties of a tab, which can then be passed to {@link getTabThemeStyles}\n */\nexport interface TabTheme {\n  underlineHeight?: number;\n\n  borderColor?: string;\n\n  inactiveUnderlineColor?: string;\n  underlineColor?: string;\n\n  underlinedTabInactiveForeground?: string;\n  underlinedTabForeground?: string;\n\n  background?: string;\n  underlinedTabBackground?: string;\n  underlinedTabInactiveBackground?: string;\n  hoverInactiveBackground?: string;\n  hoverBackground?: string;\n  inactiveColoredTabBackground?: string; // not used for now\n}\n\nexport const getTabsThemeStyles = ({\n  background,\n  borderColor,\n}: Pick<TabTheme, \"background\" | \"borderColor\">) => css`\n  border-color: ${borderColor};\n  background: ${background};\n`;\n\n/**\n * Converts tab theme properties to a chunk of style that can be dropped in a styled version of StyledDefaultTab\n *\n * @example\n * ```ts\n * const StyledCustomTab = styled(StyledDefaultTab)`\n *   ${getTabThemeStyles({background: 'red'})}\n * `\n * ```\n */\nexport const getTabThemeStyles = ({\n  underlineHeight,\n\n  background,\n  underlinedTabBackground,\n  underlinedTabInactiveBackground,\n  hoverInactiveBackground,\n  hoverBackground,\n\n  underlinedTabForeground,\n  underlinedTabInactiveForeground,\n\n  inactiveUnderlineColor,\n  underlineColor,\n}: TabTheme) =>\n  css<TabComponentProps>`\n    // active indicator\n    &::after {\n      height: ${underlineHeight != null ? `${underlineHeight}px` : undefined};\n      background-color: ${({ $selected }) =>\n        $selected && inactiveUnderlineColor};\n      background-color: ${({ $selected, $active }) =>\n        $selected && $active && underlineColor};\n    }\n\n    // foreground rules\n    color: ${({ $selected }) => $selected && underlinedTabInactiveForeground};\n    color: ${({ $selected, $active }) =>\n      $selected && $active && underlinedTabForeground};\n\n    //  background rules\n    background: ${background};\n    background: ${({ $selected }) =>\n      $selected && underlinedTabInactiveBackground};\n    background: ${({ $selected, $active }) =>\n      $selected && $active && underlinedTabBackground};\n\n    ${({ disabled, $active }) =>\n      !disabled &&\n      css`\n        &:hover,\n        &.hover /* for testing purposes */ {\n          background: ${hoverInactiveBackground};\n          background: ${$active && hoverBackground};\n        }\n      `}\n  `;\n","import { css, styled } from \"@intellij-platform/core/styled\";\n\nconst horizontalOverflowIndicatorStyles = css`\n  content: \"\";\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 10px;\n  z-index: 1;\n`;\nexport const StyledHorizontalOverflowShadows = styled.div<{\n  $hasOverflowAtStart: boolean;\n  $hasOverflowAtEnd: boolean;\n}>`\n  position: relative; // for overflow indicator (pseudo-)elements to be positioned absolute\n\n  /* FIXME: find out what color, width and gradient parameters are used in the original implementation */\n  ${({ $hasOverflowAtStart }) =>\n    $hasOverflowAtStart &&\n    css`\n      &::before {\n        ${horizontalOverflowIndicatorStyles};\n        background: linear-gradient(\n          90deg,\n          ${({ theme }) => theme.commonColors.panelBackground} 0%,\n          transparent 100%\n        );\n        left: 0;\n      }\n    `};\n  ${({ $hasOverflowAtEnd }) =>\n    $hasOverflowAtEnd &&\n    css`\n      &::after {\n        ${horizontalOverflowIndicatorStyles};\n        background: linear-gradient(\n          -90deg,\n          ${({ theme }) => theme.commonColors.panelBackground} 0%,\n          transparent 100%\n        );\n        right: 0;\n      }\n    `};\n`;\n","import { useTab } from \"@react-aria/tabs\";\nimport { TabListState } from \"@react-stately/tabs\";\nimport { Node } from \"@react-types/shared\";\nimport { StyledDefaultTab, TabComponentProps } from \"./StyledDefaultTab\";\nimport React, { ComponentType, ForwardedRef, forwardRef } from \"react\";\nimport { useObjectRef } from \"@react-aria/utils\";\n\ntype TabProps<T extends object> = {\n  state: TabListState<object>;\n  item: Node<T>;\n  /**\n   * {@see TabsProps#focusable}\n   */\n  focusable?: boolean;\n  /**\n   * {@see TabsProps#active}\n   */\n  active?: boolean;\n  shouldSelectOnPressUp?: boolean;\n  Component?: ComponentType<TabComponentProps>;\n};\n\nexport const Tab = forwardRef(function Tab<T extends object>(\n  {\n    state,\n    item,\n    focusable,\n    active,\n    shouldSelectOnPressUp,\n    Component = StyledDefaultTab,\n  }: TabProps<T>,\n  forwardedRef: ForwardedRef<HTMLDivElement>\n): React.ReactElement {\n  const { key, rendered } = item;\n  const ref = useObjectRef(forwardedRef);\n  const {\n    tabProps: {\n      /**\n       * by extracting out tabIndex, all keyboard support of the tabs is disabled, since we prevent the tab from being\n       * focusable.\n       */\n      tabIndex,\n      ...tabProps\n    },\n  } = useTab(\n    {\n      key,\n      shouldSelectOnPressUp,\n    },\n    state,\n    ref\n  );\n  const isSelected = state.selectedKey === key;\n  const isDisabled = state.disabledKeys.has(key);\n\n  return (\n    <Component\n      {...tabProps}\n      tabIndex={focusable ? tabIndex : undefined}\n      ref={ref}\n      $active={active}\n      $selected={isSelected}\n      $disabled={isDisabled}\n    >\n      {rendered}\n    </Component>\n  );\n});\n","import React, { ComponentType, Key, useEffect } from \"react\";\nimport { useTabList } from \"@react-aria/tabs\";\nimport { filterDOMProps, mergeProps, scrollIntoView } from \"@react-aria/utils\";\nimport { useTabListState } from \"@react-stately/tabs\";\nimport { AriaTabListProps } from \"@react-types/tabs\";\nimport { StyledHorizontalOverflowShadows } from \"./StyledHorizontalOverflowShadows\";\nimport { TabsOverflowMenu } from \"./TabsOverflowMenu\";\nimport { useOverflowObserver } from \"../utils/overflow-utils/useOverflowObserver\";\nimport { useHasOverflow } from \"./useHasOverflow\";\nimport { css, styled } from \"@intellij-platform/core/styled\";\nimport { getItemElement } from \"@intellij-platform/core/Collections/getItemElement\";\nimport { TabComponentProps } from \"./StyledDefaultTab\";\nimport { StyledDefaultTabs, TabsComponentProps } from \"./StyledDefaultTabs\";\nimport { Tab } from \"./Tab\";\n\nexport type TabsProps<T> = Omit<\n  AriaTabListProps<T>,\n  \"orientation\" | \"isDisabled\" | \"\"\n> & {\n  /**\n   * Whether tabs should be focusable or not. By default, following the Intellij Platform implementation, tabs are\n   * not focusable and therefore lack the keyboard accessibility support specified in WAI-ARIA.\n   * You can change this default behaviour and make the tabs keyboard accessible by passing `focusable`.\n   * focus styles are not perfect at the moment, since it's not considered an important feature.\n   * @default false\n   */\n  focusable?: boolean;\n\n  /**\n   * Whether selected tab should change on press up instead of press down.\n   * @default false.\n   */\n  shouldSelectOnPressUp?: boolean;\n\n  /**\n   * Enables \"active\" style on tabs. Is usually related to a container having focus.\n   */\n  active?: boolean;\n\n  /**\n   * If set to true, tabs will be wrapped into multiple rows if needed.\n   * NOTE: In the original implementation, in multi row mode, rows are separated by a border. It's not easy to achieve\n   * this when we are implementing this feature with a simple `flex-wrap: wrap` css rule. It doesn't seem that\n   * important, but we can achieve something similar by some css tricks like the ones suggested here:\n   * https://stackoverflow.com/questions/36128333/row-lines-for-flex-container-css\n   * @default false\n   */\n  multiRow?: boolean;\n\n  /**\n   * Only effective when {@link multiRow} is not true.\n   * If set to true and multiRow is not true, it will prevent horizontal scroll of tabs. Depending on the value of\n   * In this case:\n   * - if {@link noOverflowMenu} is not set to true, tabs that can't be fitted into the available space will be\n   *   accessible via an overflow menu.\n   * - if {@link noOverflowMenu} is set to true, the tabs will be fitted into the available space, and they will\n   *   be shrunk when needed.\n   *\n   * @todo: not implemented yet.\n   * @default false\n   */\n  noScroll?: boolean;\n\n  /**\n   * Only effective when {@link multiRow} is not true.\n   * When set to true, tabs that couldn't be fitted into the available space, are either shrunk (if {@link noScroll}\n   * is set to true), or are just accessible by scroll.\n   */\n  noOverflowMenu?: boolean;\n\n  /**\n   * Removes the top and bottom border when passed.\n   * It's still not clear whether such option makes sense or not, but\n   * at least in common use cases like in tool windows, it seems borders are already there and there should be a way\n   * of removing tab borders. On the other hand, when Tabs is used without any assumption about the surrounding UI,\n   * it kind of makes sense to have the top and bottom borders by default. So that's why this is made an option for\n   * now, maybe until things are clearer.\n   *\n   * @default false\n   */\n  noBorders?: boolean;\n\n  TabsComponent?: WithoutDefaultProps<ComponentType<TabsComponentProps>>;\n  /**\n   *\n   */\n  TabComponent?: WithoutDefaultProps<ComponentType<TabComponentProps>>;\n};\n\n// defaultProps type conflicts when trying to pass another styled-component.\n// might be an issue in styled-components@v6 types, but also defaultProps\n// doesn't matter, and dropping it is ok.\n// Note that a simple Omit<ComponentType<...>, 'defaultProps'> doesn't work\n// as it also drops the call signature of the component.\ntype WithoutDefaultProps<T extends React.ComponentType<any>> =\n  T extends React.FunctionComponent<infer P>\n    ? (props: P) => React.ReactElement | null\n    : T extends React.ComponentClass<infer P>\n    ? new (props: P) => React.Component<P>\n    : never;\n\nconst scrollBarDisabledStyle = css`\n  -ms-overflow-style: none; /* for Internet Explorer, Edge */\n  scrollbar-width: none; /* for Firefox */\n  &::-webkit-scrollbar {\n    /* for Chrome/Safari/Webkit */\n    display: none;\n  }\n`;\n\nconst StyledTabList = styled.div<{ $multiRow?: boolean }>`\n  display: flex;\n  flex-wrap: ${({ $multiRow }) => ($multiRow ? \"wrap\" : \"nowrap\")};\n  overflow: auto;\n\n  ${scrollBarDisabledStyle};\n`;\n\n/**\n *\n * TODO: add support for overflow:\n *  - have vertical scroll also scroll tabs\n *  - add support for re-reordering tabs.\n *  - FIX: When a tab that was not selected is removed, selection should not change. It now changes to the tab before the removed one.\n */\nexport const Tabs = <T extends object>({\n  focusable,\n  shouldSelectOnPressUp,\n  active,\n  TabComponent,\n  TabsComponent = StyledDefaultTabs,\n  multiRow,\n  noOverflowMenu,\n  noScroll,\n  noBorders,\n  ...props\n}: TabsProps<T>): React.ReactElement => {\n  const state = useTabListState(props);\n  const ref = React.useRef<HTMLDivElement>(null);\n  const { tabListProps } = useTabList(props, state, ref);\n\n  const { scrolledIndicatorProps, hasOverflow } = useHasOverflow({ ref });\n  const { overflowedElements } = useOverflowObserver(ref);\n  const overflowedKeys = new Set(\n    overflowedElements\n      .map((element) =>\n        element instanceof HTMLElement ? element.dataset[\"key\"] : null\n      )\n      .filter((i) => i != null)\n  );\n\n  useEffect(() => {\n    if (!noScroll && state.selectedKey !== null) {\n      const scrollableContainer = ref.current;\n      const selectedTabElement = getItemElement(ref, state.selectedKey);\n      if (scrollableContainer && selectedTabElement) {\n        scrollIntoView(scrollableContainer, selectedTabElement);\n      }\n    } else {\n      // TODO maybe? sample use case: project tool window tabs, when not grouped.\n    }\n  }, [state.selectedKey]);\n  const onOverflowMenuItemSelected = (key: Key) => {\n    state.setSelectedKey(key);\n  };\n  if (noScroll) {\n    throw new Error(\"noScroll is not supported yet.\");\n  }\n  return (\n    <TabsComponent $noBorders={noBorders} {...filterDOMProps(props)}>\n      <StyledHorizontalOverflowShadows\n        $hasOverflowAtStart={hasOverflow.left}\n        $hasOverflowAtEnd={hasOverflow.right}\n        style={{ minWidth: 0 }}\n      >\n        <StyledTabList\n          {...mergeProps(tabListProps, scrolledIndicatorProps)}\n          $multiRow={multiRow}\n          ref={ref}\n        >\n          {[...state.collection].map((item) => (\n            <Tab\n              key={item.key}\n              item={item}\n              state={state}\n              focusable={focusable}\n              shouldSelectOnPressUp={shouldSelectOnPressUp}\n              active={active}\n              Component={TabComponent}\n            />\n          ))}\n        </StyledTabList>\n      </StyledHorizontalOverflowShadows>\n      {!noOverflowMenu && (\n        <TabsOverflowMenu\n          collection={state.collection}\n          overflowedKeys={overflowedKeys}\n          onSelect={onOverflowMenuItemSelected}\n        />\n      )}\n    </TabsComponent>\n  );\n};\n","import { RefObject, UIEventHandler, useEffect, useState } from \"react\";\n\nexport function useHasOverflow<T extends HTMLElement>({\n  threshold = 5,\n  ref,\n}: {\n  threshold?: number;\n  ref: RefObject<T>;\n}) {\n  const [hasOverflow, setHasOverflow] = useState({\n    left: false,\n    right: false,\n    top: false,\n    bottom: false,\n  });\n\n  const update = () => {\n    const element = ref.current;\n    if (element) {\n      const offsetLeft = element.scrollLeft;\n      const offsetRight =\n        element.scrollWidth - (element.offsetWidth + element.scrollLeft);\n      const offsetTop = element.scrollTop;\n      const offsetBottom =\n        element.scrollHeight - (element.offsetHeight + element.scrollTop);\n      const newHasOverflow = {\n        top: offsetTop > threshold,\n        bottom: offsetBottom > threshold,\n        left: offsetLeft > threshold,\n        right: offsetRight > threshold,\n      };\n      if (\n        hasOverflow.top !== newHasOverflow.top ||\n        hasOverflow.bottom !== newHasOverflow.bottom ||\n        hasOverflow.left !== newHasOverflow.left ||\n        hasOverflow.right !== newHasOverflow.right\n      ) {\n        setHasOverflow(newHasOverflow);\n      }\n    }\n  };\n  useEffect(update);\n\n  return {\n    scrolledIndicatorProps: {\n      onScroll: update as UIEventHandler<T>,\n    },\n    hasOverflow,\n  };\n}\n","import { Collection, Node } from \"@react-types/shared\";\nimport { Item } from \"@react-stately/collections\";\nimport { Menu, MenuTrigger } from \"@intellij-platform/core/Menu\";\nimport { IconButton } from \"@intellij-platform/core/IconButton\";\nimport { PlatformIcon } from \"@intellij-platform/core/Icon\";\nimport React, { Key } from \"react\";\n\nexport const TabsOverflowMenu = <T extends unknown>({\n  collection,\n  overflowedKeys,\n  onSelect,\n}: {\n  collection: Collection<Node<T>>;\n  overflowedKeys: Set<Key>;\n  onSelect: (key: Key) => void;\n}) => (\n  <>\n    {overflowedKeys.size > 0 && (\n      <MenuTrigger\n        align=\"end\"\n        renderMenu={({ menuProps }) => {\n          const items: Iterable<Node<unknown>> = [...collection].filter(\n            (menuItem) => overflowedKeys.has(menuItem.key)\n          );\n          return (\n            <Menu\n              {...menuProps}\n              onAction={(key) => {\n                onSelect(key);\n              }}\n              items={items}\n            >\n              {(item) => (\n                <Item key={item.key} textValue={item.textValue}>\n                  {item.props.inOverflowMenu || item.textValue}\n                </Item>\n              )}\n            </Menu>\n          );\n        }}\n      >\n        {(props, ref) => (\n          <IconButton {...props} ref={ref}>\n            <PlatformIcon icon=\"actions/findAndShowNextMatches\" />\n          </IconButton>\n        )}\n      </MenuTrigger>\n    )}\n  </>\n);\n","import { styled } from \"@intellij-platform/core/styled\";\nimport { Theme } from \"@intellij-platform/core/Theme\";\nimport { StyledDefaultTab } from \"@intellij-platform/core/Tabs/StyledDefaultTab\";\nimport {\n  getTabThemeStyles,\n  TabTheme,\n} from \"@intellij-platform/core/Tabs/TabTheme\";\n\nexport const toolWindowTabTheme = ({ theme }: { theme: Theme }): TabTheme => ({\n  borderColor: theme.color(\"ToolWindow.HeaderTab.borderColor\"),\n  underlineHeight: theme.value<number>(\"ToolWindow.HeaderTab.underlineHeight\"),\n  background: \"transparent\",\n  underlinedTabInactiveBackground: theme.color(\n    \"ToolWindow.HeaderTab.underlinedTabInactiveBackground\"\n  ),\n  underlinedTabBackground: theme.color(\n    \"ToolWindow.HeaderTab.underlinedTabBackground\"\n  ),\n  hoverInactiveBackground:\n    theme.color(\"ToolWindow.HeaderTab.hoverInactiveBackground\") ??\n    theme.color(\"ToolWindow.HeaderTab.hoverBackground\"),\n  hoverBackground: theme.color(\"ToolWindow.HeaderTab.hoverBackground\"),\n  inactiveUnderlineColor: theme.color(\n    \"ToolWindow.HeaderTab.inactiveUnderlineColor\"\n  ),\n  underlineColor: theme.color(\"ToolWindow.HeaderTab.underlineColor\"),\n\n  underlinedTabInactiveForeground:\n    theme.color(\"ToolWindow.HeaderTab.underlinedTabInactiveForeground\") ??\n    theme.color(\"ToolWindow.HeaderTab.underlinedTabForeground\"),\n  underlinedTabForeground: theme.color(\n    \"ToolWindow.HeaderTab.underlinedTabForeground\"\n  ),\n});\nexport const StyledToolWindowTab = styled(StyledDefaultTab)`\n  padding: 0 0.7rem;\n  ${({ theme }) => getTabThemeStyles(toolWindowTabTheme({ theme }))};\n`;\n","import { styled } from \"@intellij-platform/core/styled\";\nimport { getTabsThemeStyles } from \"@intellij-platform/core/Tabs/TabTheme\";\nimport { StyledDefaultTabs } from \"@intellij-platform/core/Tabs/StyledDefaultTabs\";\nimport { toolWindowTabTheme } from \"./StyledToolWindowTab\";\n\nexport const StyledToolWindowTabs = styled(StyledDefaultTabs)`\n  ${({ theme }) => getTabsThemeStyles(toolWindowTabTheme({ theme }))};\n`;\n","import React from \"react\";\nimport { Tabs, TabsProps } from \"@intellij-platform/core/Tabs/Tabs\";\nimport { StyledToolWindowTab } from \"./StyledToolWindowTab\";\nimport { StyledToolWindowTabs } from \"./StyledToolWindowTabs\";\n\ntype ToolWindowTabsProps<T extends object> = Omit<\n  TabsProps<T>,\n  \"TabComponent\" | \"TabsComponent\" | \"focusable\"\n>;\n\nexport const ToolWindowTabs = <T extends object>(\n  props: ToolWindowTabsProps<T>\n) => (\n  <Tabs\n    {...props}\n    TabComponent={StyledToolWindowTab}\n    TabsComponent={StyledToolWindowTabs}\n    focusable={false}\n    shouldSelectOnPressUp\n  />\n);\n","import React from \"react\";\nimport { Tooltip, TooltipProps } from \"@intellij-platform/core/Tooltip/Tooltip\";\n\nexport interface ActionTooltipProps\n  extends Omit<TooltipProps, \"children\" | \"multiline\"> {\n  actionName: React.ReactNode;\n  shortcut?: React.ReactNode;\n}\n\n/**\n * Tooltip of type \"Action\"\n * @see {@link ActionHelpTooltip} {@link HelpTooltip}\n * @see https://jetbrains.github.io/ui/controls/tooltip/#02\n */\nexport const ActionTooltip = ({\n  actionName,\n  shortcut,\n  ...tooltipProps\n}: ActionTooltipProps): JSX.Element => {\n  return (\n    <Tooltip {...tooltipProps}>\n      <Tooltip.Header>\n        {actionName}\n        {shortcut && <Tooltip.Shortcut>{shortcut}</Tooltip.Shortcut>}\n      </Tooltip.Header>\n    </Tooltip>\n  );\n};\n","import { Theme } from \"@intellij-platform/core/Theme\";\n\nexport const WITH_POINTER_BORDER_RADIUS = 4;\nexport const tooltipBackground = ({ theme }: { theme: Theme }) =>\n  theme.color(\"ToolTip.background\", !theme.dark ? \"#f2f2f2\" : \"#3c3f41\");\nexport const tooltipBorderColor = ({ theme }: { theme: Theme }) =>\n  theme.color(\"ToolTip.borderColor\", !theme.dark ? \"#adadad\" : \"#636569\");\n","import { compose, identity } from \"ramda\";\nimport React, { CSSProperties } from \"react\";\nimport { css, styled } from \"@intellij-platform/core/styled\";\n\nimport {\n  tooltipBackground,\n  WITH_POINTER_BORDER_RADIUS,\n} from \"./tooltip-styles\";\n\ntype OffsetValue = number | `${number}%`;\nexport type TooltipPointerPosition = {\n  /**\n   * The side of the tooltip the pointer is shown\n   */\n  side: \"top\" | \"bottom\" | \"left\" | \"right\";\n  /**\n   * - When side is \"top\" or \"bottom\":\n   *   Horizontal offset (in px) with respect to the left (or right, if negative) of the tooltip.\n   * - When side is \"left\" or \"right\":\n   *   Vertical offset (in px) with respect to the top (or bottom, if negative) of the tooltip.\n   *\n   * @default: '50%'\n   */\n  offset?: OffsetValue | { value: OffsetValue; invert?: boolean };\n};\n\nconst POINTER_WIDTH = 6;\nconst POINTER_HEIGHT = 9;\nconst POINTER_THICKNESS = 1.5;\nconst TRANSLATE = `translate(-${POINTER_WIDTH}px, -${POINTER_HEIGHT}px)`;\nconst sideStyles = {\n  top: css`\n    top: 0;\n    transform: ${TRANSLATE};\n  `,\n  bottom: css`\n    bottom: 0;\n    transform: rotateX(180deg) ${TRANSLATE};\n  `,\n  left: css`\n    left: 0;\n    transform: rotate(-90deg) ${TRANSLATE};\n  `,\n  right: css`\n    right: 0;\n    transform: rotate(90deg) ${TRANSLATE};\n  `,\n};\nconst StyledTooltipPointer = styled.span<{\n  $side: TooltipPointerPosition[\"side\"];\n}>`\n  position: absolute;\n  width: 0;\n  height: 0;\n  ${({ $side }) => sideStyles[$side]};\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    border-left: ${POINTER_WIDTH + POINTER_THICKNESS}px solid transparent;\n    border-right: ${POINTER_WIDTH + POINTER_THICKNESS}px solid transparent;\n    border-bottom: ${POINTER_HEIGHT + POINTER_THICKNESS}px solid #636569;\n    left: -${POINTER_THICKNESS}px;\n    top: -${POINTER_THICKNESS}px;\n  }\n\n  &::after {\n    content: \"\";\n    position: absolute;\n    border-left: ${POINTER_WIDTH}px solid transparent;\n    border-right: ${POINTER_WIDTH}px solid transparent;\n    border-bottom: ${POINTER_HEIGHT}px solid ${tooltipBackground};\n  }\n`;\n\nfunction normalizeCssValue(value: string | number) {\n  return typeof value === \"number\" ? `${value}px` : value;\n}\n\nconst withMin = (min: number) => (value: string | number | undefined) =>\n  value != undefined ? `max(${min}px, ${normalizeCssValue(value)})` : value;\nconst withMax = (max: number) => (value: string | number | undefined) =>\n  value != undefined ? `min(${max}px, ${normalizeCssValue(value)})` : value;\nconst HEIGHT_OFFSET = POINTER_HEIGHT + WITH_POINTER_BORDER_RADIUS;\nconst WIDTH_OFFSET = POINTER_WIDTH + WITH_POINTER_BORDER_RADIUS;\n\n/**\n * Ensures pointer is not offset too much or too little that would make the arrow appear\n * outside the tooltip boundary.\n */\nfunction limitPointerPositionStyles(\n  { width, height }: { width: number | undefined; height: number | undefined },\n  { top, left, right, bottom }: CSSProperties\n) {\n  const applyVerticalMinMax = compose(\n    height ? withMax(height - HEIGHT_OFFSET) : identity,\n    withMin(HEIGHT_OFFSET)\n  );\n  const applyHorizontalMinMax = compose(\n    width ? withMax(width - WIDTH_OFFSET) : identity,\n    withMin(WIDTH_OFFSET)\n  );\n  return {\n    top: applyVerticalMinMax(top),\n    bottom: applyVerticalMinMax(bottom),\n    left: applyHorizontalMinMax(left),\n    right: applyHorizontalMinMax(right),\n  };\n}\n\nconst getOffsetCssProp = (\n  side: TooltipPointerPosition[\"side\"],\n  invert?: boolean\n): \"top\" | \"bottom\" | \"left\" | \"right\" => {\n  if (side === \"top\" || side === \"bottom\") {\n    return invert ? \"right\" : \"left\";\n  }\n  return invert ? \"bottom\" : \"top\";\n};\n\nfunction pointerPositionToOffsetStyle({\n  side,\n  offset = \"50%\",\n}: TooltipPointerPosition): CSSProperties {\n  const { invert = false, value: offsetValue } =\n    typeof offset === \"object\" ? offset : { invert: false, value: offset };\n  return {\n    [getOffsetCssProp(side, invert)]: offsetValue,\n  };\n}\n\nexport function TooltipPointer({\n  side,\n  offset,\n  tooltipSize,\n}: {\n  side: TooltipPointerPosition[\"side\"];\n  offset:\n    | { type: \"calculated\"; value: CSSProperties }\n    | { type: \"specific\"; value: TooltipPointerPosition[\"offset\"] };\n  tooltipSize: { width: number; height: number };\n}) {\n  return (\n    <StyledTooltipPointer\n      $side={side}\n      style={limitPointerPositionStyles(\n        tooltipSize,\n        offset.type === \"specific\"\n          ? pointerPositionToOffsetStyle({ side, offset: offset.value })\n          : offset.value\n      )}\n    />\n  );\n}\n","import React, {\n  ForwardedRef,\n  MutableRefObject,\n  useContext,\n  useLayoutEffect,\n  useState,\n} from \"react\";\nimport { AriaTooltipProps, useTooltip } from \"@react-aria/tooltip\";\nimport { useObjectRef } from \"@react-aria/utils\";\nimport { PositionAria } from \"@react-aria/overlays\";\nimport { css, styled } from \"@intellij-platform/core/styled\";\nimport { UnknownThemeProp } from \"@intellij-platform/core/Theme\";\nimport { WINDOW_SHADOW } from \"@intellij-platform/core/style-constants\";\nimport { TooltipContext } from \"./TooltipContext\";\nimport { TooltipPointer, TooltipPointerPosition } from \"./TooltipPointer\";\nimport {\n  tooltipBackground,\n  tooltipBorderColor,\n  WITH_POINTER_BORDER_RADIUS,\n} from \"./tooltip-styles\";\n\nexport interface TooltipProps extends Omit<AriaTooltipProps, \"isOpen\"> {\n  children: React.ReactNode;\n  multiline?: boolean;\n  className?: string;\n  /**\n   * Whether (and in what position) the arrow pointer should be shown.\n   * When using {@link TooltipTrigger} or {@link PositionedTooltipTrigger}, the position of the pointer is calculated\n   * based on the target element, and a boolean value to define whether the arrow should be shown or not would suffice.\n   *\n   * Tooltips with pointer have slight style difference.\n   * {@see https://www.figma.com/file/nfDfMAdV7j2fnQlpYNAOfP/IntelliJ-Platform-UI-Kit-(Community)?type=design&node-id=15-51&mode=design&t=7PplrxG8ZfXB4hIK-0}\n   *\n   * @example\n   * <Tooltip withPointer />\n   * // shows the pointer in the position controlled by {@link TooltipTrigger} or {@link PositionedTooltipTrigger}\n   * // If there is not `TooltipTrigger` or `PositionedTooltipTrigger`, the arrow is shown on top center by default.\n   *\n   * @example\n   * <Tooltip withPointer={{side: 'top', offset: 30}} />\n   * // shows the pointer on the top side, with horizontal offset of 30px from the left of tooltip, regardless\n   * // of whether `TooltipTrigger` or `PositionedTooltipTrigger` is used.\n   *\n   * @example\n   * <Tooltip withPointer={{side: 'left', offset: -30}} />\n   * // shows the pointer on the left side, with vertidcal offset of 30px from the bottom of the tooltip, regardless\n   * // of whether `TooltipTrigger` or `PositionedTooltipTrigger` is used.\n   */\n  withPointer?: boolean | TooltipPointerPosition;\n}\n\n// Providing default value for paddings, based on intellijlaf theme. In Intellij Platform, themes extend either\n// intellijlaf or darcula. Which means some properties can be omitted in the custom theme, relying on the values\n// in the base theme. This is not how theming works here, at the moment, and there are other similar issues, but\n// this is just a mitigation for one case, spacing in tooltip.\nexport const DEFAULT_TEXT_BORDER_INSETS = \"0.5rem 0.8125rem 0.625rem 0.625rem\";\nexport const DEFAULT_SMALL_TEXT_BORDER_INSETS =\n  \"0.375rem 0.75rem 0.4375rem 0.625rem\";\nconst StyledTooltip = styled.div<{\n  $multiline?: boolean;\n  $hasPointer?: boolean;\n}>`\n  box-sizing: content-box;\n  max-width: ${\n    /**\n     * Max width is meant to be set on the multiline description (which is not used in ActionTooltip which would\n     * be right according to [the specs](https://jetbrains.github.io/ui/controls/tooltip/#09)).\n     * But if set on `Tooltip.Description`, title and link can still make the tooltip grow more that the expected max\n     * width. So it makes more sense to set the max width on the container anyway. But since the value of the max width\n     * is meant to be for description we set the box-sizing to \"content-box\" to exclude container's padding in max-width\n     * calculation.\n     */\n    ({ theme, $multiline }) =>\n      $multiline\n        ? `${\n            theme.value<number>(\n              \"HelpTooltip.maxWidth\" as UnknownThemeProp<\"HelpTooltip.maxWidth\">\n            ) ?? 250\n          }px`\n        : null\n  };\n  white-space: ${({ $multiline }) => (!$multiline ? \"nowrap\" : null)};\n  display: inline-flex;\n  flex-direction: column;\n  gap: ${({ theme }) =>\n    theme.value<number>(\n      \"HelpToolTip.verticalGap\" as UnknownThemeProp<\"HelpToolTip.verticalGap\">\n    ) ?? 4}px;\n  background: ${tooltipBackground};\n  color: ${({ theme }) =>\n    theme.color(\"ToolTip.foreground\", !theme.dark ? \"#000\" : \"#bfbfbf\")};\n  padding: ${({ theme, $multiline }) =>\n    $multiline\n      ? theme.inset(\"HelpTooltip.defaultTextBorderInsets\") ||\n        DEFAULT_TEXT_BORDER_INSETS\n      : theme.inset(\"HelpTooltip.smallTextBorderInsets\") ||\n        DEFAULT_SMALL_TEXT_BORDER_INSETS};\n  line-height: 1.2;\n  border-style: solid;\n  border-width: ${({ theme, $hasPointer }) =>\n    theme.value<boolean>(\"ToolTip.paintBorder\") || $hasPointer ? \"1px\" : \"0px\"};\n  border-color: ${tooltipBorderColor};\n  ${WINDOW_SHADOW};\n  ${({ $hasPointer }) =>\n    $hasPointer &&\n    css`\n      position: relative; // needed for absolute positioning of the pointer\n      border-radius: ${WITH_POINTER_BORDER_RADIUS}px;\n    `}\n`;\n\nconst StyledShortcut = styled.kbd`\n  all: unset;\n  color: ${({ theme }) =>\n    theme.color(\n      \"ToolTip.shortcutForeground\",\n      !theme.dark ? \"#787878\" : \"#999999\"\n    )};\n`;\n\nconst StyledHeader = styled.div`\n  font-size: ${({ theme }) => theme.fontSizeDelta(\"HelpTooltip.fontSizeDelta\")};\n  display: flex;\n  gap: 0.5rem;\n`;\nconst StyledDescription = styled.div`\n  color: ${({ theme }) =>\n    theme.color(\n      \"Tooltip.infoForeground\" as UnknownThemeProp<\"Tooltip.infoForeground\">,\n      theme.commonColors.contextHelpForeground\n    )};\n  font-size: ${({ theme }) =>\n    theme.fontSizeDelta(\"HelpTooltip.descriptionSizeDelta\")};\n`;\n\nconst StyledLink = styled.div`\n  color: ${({ theme }) =>\n    theme.color(\n      \"ToolTip.linkForeground\" as UnknownThemeProp<\"ToolTip.linkForeground\">,\n      theme.commonColors.linkForegroundEnabled\n    )};\n  a,\n  [role=\"link\"] {\n    // Maybe target Link instead, without important. It didn't work as expected, in the first try tho.\n    color: inherit !important;\n  }\n`;\n\nexport const placementToPointerSide: Record<\n  NonNullable<PositionAria[\"placement\"]>,\n  TooltipPointerPosition[\"side\"]\n> = {\n  bottom: \"top\",\n  top: \"bottom\",\n  left: \"right\",\n  right: \"left\",\n  center: \"top\", // doesn't make sense :-?\n};\n/**\n * Implements the UI of a Tooltip. For tooltip to be shown for a trigger, on hover, use {@link TooltipTrigger}.\n * The following components can be used to compose the content of a tooltip.\n * - {@link Tooltip.Header}\n * - {@link Tooltip.Description}\n * - {@link Tooltip.Link}\n * - {@link Tooltip.Shortcut}\n * Prefer using higher-level components like {@link HelpTooltip}, {@link ActionHelpTooltip} or {@link ActionTooltip}.\n * that ensure different pieces of tooltip content follow the\n * [design system recommendation](https://jetbrains.github.io/ui/controls/tooltip)\n *\n *\n * ### Reference:\n * Tooltip, Tooltip.* and TooltipTrigger are corresponding to [HelpTooltip](https://github.com/JetBrains/intellij-community/blob/854daf45b47a6ea9da0348978608bfbfe998d99c/platform/platform-api/src/com/intellij/ide/HelpTooltip.java#L102)\n * in the original impl.\n */\nconst Tooltip = React.forwardRef(function Tooltip(\n  { children, multiline, withPointer, ...props }: TooltipProps,\n  forwardedRef: ForwardedRef<HTMLDivElement>\n): JSX.Element {\n  const ref: MutableRefObject<HTMLDivElement | null> =\n    useObjectRef(forwardedRef);\n  const {\n    state,\n    isInteractive,\n    pointerPositionStyle,\n    placement = \"bottom\",\n  } = useContext(TooltipContext) || {};\n  const { tooltipProps } = useTooltip(\n    props,\n    state\n      ? {\n          ...state,\n          // if the tooltip is not interactive, let it be closed even when it's hovered. That's the according to the reference impl.\n          open: isInteractive ? state?.open : () => {},\n        }\n      : state\n  );\n  const measuredSize = useMeasuredSize(ref);\n\n  const { side, offset } =\n    typeof withPointer === \"object\"\n      ? withPointer\n      : { side: placementToPointerSide[placement], offset: undefined };\n\n  return (\n    <StyledTooltip\n      $hasPointer={Boolean(withPointer)}\n      $multiline={multiline}\n      {...tooltipProps}\n      className={props.className}\n      ref={ref}\n    >\n      {withPointer && measuredSize && (\n        <TooltipPointer\n          tooltipSize={measuredSize}\n          side={side}\n          offset={\n            offset || !pointerPositionStyle\n              ? { type: \"specific\", value: offset }\n              : { type: \"calculated\", value: pointerPositionStyle }\n          }\n        />\n      )}\n      {children}\n    </StyledTooltip>\n  );\n});\n\nconst useMeasuredSize = (\n  ref: React.MutableRefObject<HTMLDivElement | null>\n) => {\n  const [measuredSize, setMeasuredSize] = useState<\n    | undefined\n    | {\n        height: number;\n        width: number;\n      }\n  >(undefined);\n\n  useLayoutEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    const { offsetHeight, offsetWidth } = ref.current;\n    if (\n      offsetHeight != measuredSize?.height ||\n      offsetWidth != measuredSize?.width\n    ) {\n      setMeasuredSize({ height: offsetHeight, width: offsetWidth });\n    }\n  });\n  return measuredSize;\n};\n\nconst _Tooltip = Object.assign(Tooltip, {\n  Header: StyledHeader,\n  Shortcut: StyledShortcut,\n  Description: StyledDescription,\n  Link: StyledLink,\n});\n\nexport { _Tooltip as Tooltip };\n","import React, { CSSProperties } from \"react\";\nimport { TooltipTriggerState } from \"@react-stately/tooltip\";\nimport { PositionAria } from \"@react-aria/overlays\";\n\ninterface TooltipContextObject {\n  state: TooltipTriggerState;\n  isInteractive: boolean;\n  placement: NonNullable<PositionAria[\"placement\"]> | undefined;\n  pointerPositionStyle?: CSSProperties;\n}\n\nexport const TooltipContext = React.createContext<TooltipContextObject | null>(\n  null\n);\n","import React, { useRef } from \"react\";\nimport { useLayoutEffect } from \"@react-aria/utils\";\nimport {\n  AriaPositionProps,\n  PositionAria,\n  useOverlayPosition,\n} from \"@react-aria/overlays\";\n\n/**\n * `useOverlayPosition` only supports positioning overlay relative to an element, at the moment.\n *  For context menu or tooltip, we may want to position the overlay based on the coordinates of the mouse event which\n *  has triggered the overlay.\n *  This hook wraps `useOverlayPosition`, and is very similar to it, but you don't need to pass `targetRef`. Instead,\n *  you have to call the updatePosition in the event handler that triggers the overlay, passing the `MouseEvent` object.\n *\n * This is hopefully a temporary solution to circumvents the limitation of `useOverlayPosition`, until it supports\n * non-element based positioning as well. It works by appending a dummy 1x1 px element to body and positioning it\n * based on React.MouseEvent objects. Then it uses a ref to that element as the `targetRef`, passed to `useOverlayPosition`\n *\n * @example\n * ```ts\n * const { updatePosition, overlyProps} = useMouseEventOverlayPosition({ overlayRef });\n *\n * const onContextMenu = (event: React.ReactEvent) => {\n *  updatePosition(event);\n *  // ...\n * }\n * ```\n */\nlet globalMoveHandler: null | ((e: MouseEvent) => void) = null;\nlet lastMouseClientPos: { clientX: number; clientY: number } | undefined;\n\nexport function useMouseEventOverlayPosition(\n  options: Omit<AriaPositionProps, \"targetRef\">\n): Omit<PositionAria, \"updatePosition\"> & {\n  updatePosition: (event?: React.MouseEvent) => void;\n} {\n  const targetRef = useRef<HTMLElement>(null);\n\n  useLayoutEffect(() => {\n    if (!globalMoveHandler) {\n      // After the first use of the hook, the listener will be attached forever. Not a big deal but can be improved.\n      globalMoveHandler = ({ clientX, clientY }) => {\n        lastMouseClientPos = { clientX, clientY };\n      };\n      document.addEventListener(\"mousemove\", globalMoveHandler);\n    }\n    if (!targetRef.current) {\n      const fakeTarget = document.createElement(\"span\");\n      Object.assign(fakeTarget.style, {\n        width: \"0px\",\n        height: \"0px\",\n        pointerEvents: \"none\",\n        position: \"fixed\",\n        visibility: \"hidden\",\n      });\n      document.body.appendChild(fakeTarget);\n      // @ts-expect-error We intentionally don't pass null to generic argument, to not have it as a mutable nullable\n      // ref, since we are mimicking an element ref.\n      targetRef.current = fakeTarget;\n      return () => {\n        fakeTarget.remove();\n      };\n    }\n  }, []);\n\n  const updatePosition = (e?: React.MouseEvent) => {\n    const coordinatesSource = e || lastMouseClientPos;\n    if (targetRef.current && coordinatesSource) {\n      const { clientX, clientY } = coordinatesSource;\n      targetRef.current.style.left = `${\n        // not sure why crossOffset passed to useOverlayPosition doesn't work, so compensating for it here.\n        clientX + (options.crossOffset ?? 0)\n      }px`;\n      targetRef.current.style.top = `${clientY}px`;\n    }\n    _updatePosition();\n  };\n  useLayoutEffect(() => {\n    if (options.isOpen) {\n      updatePosition();\n    }\n  }, [options.isOpen, targetRef.current]);\n\n  const { updatePosition: _updatePosition, ...result } = useOverlayPosition({\n    ...options,\n    targetRef,\n  });\n\n  return {\n    ...result,\n    /**\n     * Ref to be passed to be passed as targetRef\n     */\n    updatePosition,\n  };\n}\n","import React, {\n  HTMLAttributes,\n  ReactElement,\n  RefObject,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { TooltipTriggerProps as AriaTooltipTriggerProps } from \"@react-aria/tooltip\";\nimport { AriaPositionProps } from \"@react-aria/overlays\";\nimport { useTooltipTriggerState } from \"@react-stately/tooltip\";\nimport { useMouseEventOverlayPosition } from \"@intellij-platform/core/utils/useMouseEventOverlayPosition\";\nimport { useTheme } from \"@intellij-platform/core/styled\";\nimport { TooltipTriggerAndOverlay } from \"@intellij-platform/core/Tooltip/TooltipTriggerAndOverlay\";\n\nexport interface TooltipTriggerProps\n  // controlling isOpen state is not supported since positioning is based on cursor.\n  // PositionedTooltipTrigger can be used for controlled isOpen state\n  extends Omit<AriaTooltipTriggerProps, \"isOpen\" | \"defaultOpen\" | \"trigger\"> {\n  /**\n   * Tooltip content. The value should be an element of type {@link Tooltip}.\n   */\n  tooltip: ReactElement;\n  /**\n   * Placement of the tooltip with respect to the cursor\n   * @default \"bottom left\"\n   */\n  placement?: AriaPositionProps[\"placement\"];\n  /**\n   * The additional offset applied along the main axis between the element and its\n   * anchor element.\n   * @default theme.value<number>(\"HelpTooltip.mouseCursorOffset\") ?? 20\n   */\n  offset?: number;\n  /**\n   * Either a focusable component, or a render function which accepts trigger props and passes it to some component.\n   */\n  children:\n    | React.ReactNode\n    | ((\n        props: HTMLAttributes<HTMLElement> & { ref: RefObject<HTMLElement> }\n      ) => React.ReactNode);\n}\n\n/**\n * Sets {@param tooltip} for its {@param children}.\n * Showing tooltip on focus and controlled open state are not supported at the moment, based on how tooltip works in the\n * reference impl, and since tooltip is positioned based on cursor position. Positioning the tooltip based on cursor\n * position requires tooltip to be opened on hover. That's why neither controlling opened state nor showing the tooltip\n * on focus are supported here. {@link PositionedTooltipTrigger} allows for positioning the tooltip with respect to the\n * trigger element, and offers more options.\n */\nexport const TooltipTrigger = ({\n  tooltip,\n  children,\n  /**\n   * ide.tooltip.initialReshowDelay registry key. [Docs](https://jetbrains.github.io/ui/controls/tooltip/#19) says\n   * it's 300 by default, but it's 500 in the code currently.\n   */\n  delay = 500,\n  offset,\n  placement = \"bottom left\",\n  ...props\n}: TooltipTriggerProps): JSX.Element => {\n  const triggerRef = useRef<HTMLElement>(null);\n  const theme = useTheme();\n  const state = useTooltipTriggerState({\n    ...props,\n    delay,\n  });\n\n  const overlayRef = useRef<HTMLDivElement>(null);\n\n  const positionAria = useMouseEventOverlayPosition({\n    overlayRef,\n    isOpen: state.isOpen,\n    placement,\n    shouldFlip: true,\n    offset:\n      offset ?? theme.value<number>(\"HelpTooltip.mouseCursorOffset\") ?? 20,\n  });\n\n  // FIXME: Find the explanation for why it happens, and fix it properly, if it's a legit issue.\n  useEffect(() => {\n    if (state.isOpen) {\n      requestAnimationFrame(() => {\n        positionAria.updatePosition();\n      });\n    }\n  }, [state.isOpen]);\n\n  return (\n    <TooltipTriggerAndOverlay\n      tooltip={tooltip}\n      positionAria={positionAria}\n      trigger={children}\n      state={state}\n      overlayRef={overlayRef}\n      triggerRef={triggerRef}\n      /**\n       * If we want to support showing tooltip on focus, or if we want to allow controlled open state, we should let it\n       * be positioned by the trigger element in that case, rather than mouse position.\n       * One solution would be to use useOverlayPosition as well, and conditionally use the right `overlayProps`, based on\n       * whether the position determined by mouse is within `triggerRef.current?.getBoundingClientRect()`. Another way\n       * (maybe better) would be to have `useMouseEventOverlayPosition` accept `bounds` or `containerBounds`, which if\n       * passed, makes sure the position is kept within that boundary. Outside positions would be mapped to the closest\n       * point on the border of the boundary.\n       */\n      showOnFocus={false}\n      isDisabled={props.isDisabled}\n    />\n  );\n};\n","import React, {\n  HTMLAttributes,\n  ReactElement,\n  RefObject,\n  useState,\n} from \"react\";\nimport { useTooltipTrigger as useAriaTooltipTrigger } from \"@react-aria/tooltip\";\nimport { TooltipTriggerState } from \"@react-stately/tooltip\";\nimport { FocusableProvider } from \"@react-aria/focus\";\nimport { Overlay, PositionAria } from \"@react-aria/overlays\";\nimport { mergeProps, useLayoutEffect } from \"@react-aria/utils\";\n\nimport { TooltipContext } from \"./TooltipContext\";\n\ninterface TooltipTriggerBaseProps<T extends HTMLElement = HTMLElement> {\n  /**\n   * Tooltip content. The value should be an element of type {@link Tooltip}.\n   */\n  tooltip: ReactElement;\n  /**\n   * Either a focusable component, or a render function which accepts trigger props and passes it to some component.\n   */\n  trigger:\n    | React.ReactNode\n    | ((\n        props: HTMLAttributes<HTMLElement> & { ref: RefObject<T> }\n      ) => React.ReactNode);\n\n  state: TooltipTriggerState;\n\n  showOnFocus?: boolean;\n  positionAria: PositionAria;\n  overlayRef: RefObject<HTMLDivElement>;\n  triggerRef: RefObject<T>;\n  isDisabled?: boolean;\n}\n\n/**\n * Sets {@param tooltip} for its {@param children}. It doesn't handle tooltip positioning, and so shouldn't be used\n * directly. {@param tooltipOverlayProps} should be used to apply the intended positioning.\n *\n * TODO: Implement timeout-based auto-hide (https://jetbrains.github.io/ui/controls/tooltip/#19)\n * TODO: shadow\n */\nexport const TooltipTriggerAndOverlay = <T extends HTMLElement>({\n  tooltip,\n  trigger,\n  state,\n  overlayRef,\n  triggerRef,\n  showOnFocus,\n  positionAria,\n  ...props\n}: TooltipTriggerBaseProps<T>): JSX.Element => {\n  const [isInteractive, setInteractive] = useState(false);\n  const { triggerProps, tooltipProps } = useTooltipTrigger(\n    props,\n    // In Intellij Platform. The tooltip hides right away. We follow the same, unless the tooltip is interactive.\n    // Maybe something to rethink if it's worth following the reference impl for.\n    { ...state, close: isInteractive ? state.close : () => state.close(true) },\n    triggerRef\n  );\n\n  if (!showOnFocus) {\n    delete triggerProps.onFocus;\n  }\n\n  useLayoutEffect(() => {\n    setInteractive(\n      overlayRef.current?.querySelector(\n        'a, button, [role=\"button\"], [role=link]'\n      ) !== null\n    );\n  });\n  return (\n    <>\n      {normalizeChildren(trigger, { ...triggerProps, ref: triggerRef })}\n      {state.isOpen && !props.isDisabled && (\n        <Overlay>\n          <TooltipContext.Provider\n            value={{\n              state,\n              isInteractive,\n              placement: positionAria.placement ?? undefined,\n              pointerPositionStyle: positionAria.arrowProps.style,\n            }}\n          >\n            <div\n              {...mergeProps(\n                positionAria.overlayProps,\n                // Is it ok to apply tooltip props on this wrapper?\n                tooltipProps\n              )}\n              ref={overlayRef}\n            >\n              {tooltip}\n            </div>\n          </TooltipContext.Provider>\n        </Overlay>\n      )}\n    </>\n  );\n};\n\nfunction normalizeChildren<T extends HTMLElement = HTMLElement>(\n  children: TooltipTriggerBaseProps<T>[\"trigger\"],\n  triggerProps: HTMLAttributes<HTMLElement> & { ref: RefObject<T> }\n) {\n  if (typeof children === \"function\") {\n    return children(triggerProps);\n  }\n  if (React.isValidElement(children) && typeof children.type === \"string\") {\n    return React.cloneElement(children, triggerProps);\n  }\n  return <FocusableProvider {...triggerProps}>{children}</FocusableProvider>;\n}\n\n/**\n * A wrapper around react-aria's useTooltipTrigger, adjusting it for Intellij Platform.\n */\nconst useTooltipTrigger: typeof useAriaTooltipTrigger = (props, state, ref) => {\n  const { triggerProps, tooltipProps } = useAriaTooltipTrigger(\n    props,\n    state,\n    ref\n  );\n  // onPointerDown returned from the underlying usePress stops propagation which messes with some usages of tooltip\n  // like in tab or tool window stripe button. We replace onPointerDown handler with a similar handler that closes\n  // the tooltip.\n  triggerProps.onPointerDown = () => {\n    if (!(ref.current instanceof HTMLInputElement)) {\n      state.close(true);\n    }\n  };\n  /**\n   * onMouseDown is preventDefault-ed which interferes with functionality of the tooltip trigger, in use cases like\n   * tool window stripe button. Note that since pointerDown is handled for calling the tooltip trigger's onPressStart\n   * handler (which hides the tooltip), there is no issue in excluding onMouseDown, because it's only used to preventDefault\n   * the event, because of some edge cases focus handling which is not our concern.\n   */\n  delete triggerProps.onMouseDown;\n\n  return {\n    triggerProps,\n    tooltipProps,\n  };\n};\n","import { usePrevious } from \"@intellij-platform/core/utils/usePrevious\";\nimport { CacheInvalidationContext } from \"./Item\";\n\nexport interface CollectionCacheInvalidationProps {\n  /**\n   * Defines cache invalidation policy for items. By default, the render result is cached based on the item objects.\n   * This is equivalent of passing false or not passing anything for `cacheInvalidation`. If `true` is passed, it will\n   * always invalidate the render result, causing the collection to be recreated on each re-render. It can\n   * considerably affect performance in large collections. in addition to boolean value, an object with the list of\n   * invalidators can also be passed. renderer function is called each time any of the invalidators are changed.\n   * Think of it as [dependency array in react hooks](https://reactjs.org/docs/hooks-reference.html#usememo). Except\n   * that the length of the array can also safely change.\n   */\n  cacheInvalidation?: boolean | { invalidators: ReadonlyArray<unknown> };\n}\n\n/**\n * Allows cache invalidation options based on input props, for components that use collection\n */\nexport const useCollectionCacheInvalidation = ({\n  cacheInvalidation,\n}: CollectionCacheInvalidationProps): CacheInvalidationContext => {\n  const invalidators =\n    typeof cacheInvalidation === \"object\" ? cacheInvalidation.invalidators : [];\n  const lastInvalidators = usePrevious(invalidators);\n\n  const invalidated =\n    typeof cacheInvalidation === \"object\"\n      ? cacheInvalidation.invalidators.length !== lastInvalidators.length ||\n        cacheInvalidation.invalidators.some(\n          (anInvalidator, index) => anInvalidator !== lastInvalidators[index]\n        )\n      : cacheInvalidation;\n\n  return {\n    invalidated,\n  };\n};\n","//@ts-nocheck\n/**\n * Not exported from @react-stately/tree, but needed in the custom implementation of useTreeState\n */\n\nimport { Key } from \"react\";\nimport { Collection, Node } from \"@react-types/shared\";\n\nexport class TreeCollection<T> implements Collection<Node<T>> {\n  private keyMap: Map<Key, Node<T>> = new Map();\n  private iterable: Iterable<Node<T>>;\n  private firstKey: Key;\n  private lastKey: Key;\n\n  constructor(\n    nodes: Iterable<Node<T>>,\n    { expandedKeys }: { expandedKeys?: Set<Key> } = {}\n  ) {\n    this.iterable = nodes;\n    expandedKeys = expandedKeys || new Set();\n\n    let visit = (node: Node<T>) => {\n      this.keyMap.set(node.key, node);\n\n      if (\n        node.childNodes &&\n        (node.type === \"section\" || expandedKeys.has(node.key))\n      ) {\n        for (let child of node.childNodes) {\n          visit(child);\n        }\n      }\n    };\n\n    for (let node of nodes) {\n      visit(node);\n    }\n\n    let last: Node<T>;\n    let index = 0;\n    for (let [key, node] of this.keyMap) {\n      if (last) {\n        last.nextKey = key;\n        node.prevKey = last.key;\n      } else {\n        this.firstKey = key;\n        node.prevKey = undefined;\n      }\n\n      if (node.type === \"item\") {\n        node.index = index++;\n      }\n\n      last = node;\n\n      // Set nextKey as undefined since this might be the last node\n      // If it isn't the last node, last.nextKey will properly set at start of new loop\n      last.nextKey = undefined;\n    }\n\n    this.lastKey = last?.key;\n  }\n\n  *[Symbol.iterator]() {\n    yield* this.iterable;\n  }\n\n  get size() {\n    return this.keyMap.size;\n  }\n\n  getKeys() {\n    return this.keyMap.keys();\n  }\n\n  getKeyBefore(key: Key) {\n    let node = this.keyMap.get(key);\n    return node?.prevKey ?? null;\n  }\n\n  getKeyAfter(key: Key) {\n    let node = this.keyMap.get(key);\n    return node?.nextKey ?? null;\n  }\n\n  getFirstKey() {\n    return this.firstKey;\n  }\n\n  getLastKey() {\n    return this.lastKey;\n  }\n\n  getItem(key: Key) {\n    return this.keyMap.get(key) ?? null;\n  }\n\n  at(idx: number) {\n    const keys = [...this.getKeys()];\n    return this.getItem(keys[idx]);\n  }\n}\n","import { Node } from \"@react-types/shared\";\nimport { Key } from \"react\";\n\n/**\n * given a node, returns keys of all consecutive single children\n */\nexport function getSingleChildrenKeys<T>(\n  node: Node<T> | null | undefined\n): Key[] {\n  return getSingleChildrenKeysRecursive(node, []);\n}\n\nfunction getSingleChildrenKeysRecursive<T>(\n  node: Node<T> | null | undefined,\n  previousKeys: Key[]\n): Key[] {\n  if (!node) {\n    return [];\n  }\n  const childNodesIterator: Iterator<\n    Node<T>,\n    Node<T> | undefined\n  > = node.childNodes[Symbol.iterator]();\n  const { value: firstChild, done } = childNodesIterator.next();\n  const noMoreChildren = done || childNodesIterator.next().value == null;\n  if (firstChild != null && noMoreChildren && isExpandable(firstChild)) {\n    return getSingleChildrenKeysRecursive(\n      firstChild,\n      previousKeys.concat((firstChild as Node<T>).key)\n    );\n  }\n  return previousKeys;\n}\n\nconst isExpandable = <T>(node: Node<T>) =>\n  node.hasChildNodes || !isEmptyIterable(node.childNodes);\n\nfunction isEmptyIterable(iterable: Iterable<unknown> | undefined | null) {\n  for (const _ of iterable || []) {\n    // eslint-disable-line no-unused-vars, no-unreachable-loop\n    return false;\n  }\n  return true;\n}\n","import {\n  MultipleSelectionState,\n  SelectionManager,\n  SelectionManagerOptions,\n} from \"@react-stately/selection\";\nimport { Collection, Node } from \"@react-types/shared\";\nimport React, { Key } from \"react\";\n\nexport class TreeSelectionManager extends SelectionManager {\n  readonly collection: Collection<Node<unknown>>;\n\n  constructor(\n    collection: Collection<Node<unknown>>,\n    state: MultipleSelectionState,\n    options?: SelectionManagerOptions\n  ) {\n    super(collection, state, options);\n    this.collection = collection;\n  }\n\n  expandSelection() {\n    if (this.focusedKey) {\n      const node = this.collection.getItem(this.focusedKey);\n      if (node) {\n        const { expandKeys } = this.getExpandAndShrinkKeys(node);\n        if (expandKeys.length > 0) {\n          this.setSelectedKeys([...this.selectedKeys, ...expandKeys]);\n        }\n      }\n    }\n  }\n  shrinkSelection() {\n    if (this.focusedKey) {\n      const node = this.collection.getItem(this.focusedKey);\n      if (node) {\n        const { shrinkKeys } = this.getExpandAndShrinkKeys(node);\n        if (shrinkKeys.length > 0) {\n          this.setSelectedKeys(\n            [...this.selectedKeys].filter((key) => !shrinkKeys.includes(key))\n          );\n        }\n      }\n    }\n  }\n\n  private getExpandAndShrinkKeys(node: Node<unknown>) {\n    return this.recursivelyGetExpandAndShrinkKeys(\n      node,\n      [...this.collection.getKeys()],\n      null\n    );\n  }\n  /**\n   * Starting from a node, traverses the tree up, until it reaches the root of the fully selected subtree that includes\n   * the starting node. The root itself may or may not be selected. Returns:\n   * - keys to be added to selection, when expanding selection\n   * - keys to be removed from selection, when shrinking selection\n   */\n  private recursivelyGetExpandAndShrinkKeys(\n    node: Node<unknown>,\n    keys: Array<Key>,\n    previousChild: Key | null\n  ): { expandKeys: Key[]; shrinkKeys: Key[] } {\n    const parent =\n      node && node.parentKey ? this.collection.getItem(node.parentKey) : null;\n    const newKeys = keys.filter((key) => key !== previousChild);\n    const parentDescendants = parent\n      ? getAllDescendants(parent, newKeys).map(({ key }) => key)\n      : this.getAllRoots().flatMap((key) => {\n          const item = this.collection.getItem(key);\n          return key !== node.key && item\n            ? getAllDescendants(item, newKeys)\n                .map(({ key }) => key)\n                .concat(key)\n            : [];\n        });\n    if (parent && parentDescendants.every((key) => this.isSelected(key))) {\n      return this.recursivelyGetExpandAndShrinkKeys(parent, keys, node.key);\n    }\n    const descendants = getAllDescendants(\n      node,\n      keys.filter((key) => key !== previousChild)\n    ).map(({ key }) => key);\n\n    return {\n      expandKeys: descendants.some((key) => !this.isSelected(key))\n        ? descendants\n        : !this.isSelected(node.key)\n        ? [node.key]\n        : parentDescendants,\n      shrinkKeys:\n        parentDescendants.length > 0 &&\n        parentDescendants.every((key) => this.isSelected(key))\n          ? parentDescendants\n          : this.isSelected(node.key) && previousChild\n          ? [node.key]\n          : descendants.filter((key) => this.isSelected(key)),\n    };\n  }\n\n  private getAllRoots() {\n    return [...this.collection.getKeys()].filter(\n      (key) => this.collection.getItem(key)?.parentKey == null\n    );\n  }\n}\n\nfunction getAllDescendants<T>(\n  node: Node<T>,\n  stopKeys: Array<React.Key>\n): Node<T>[] {\n  const childNodes = (node.hasChildNodes ? [...node.childNodes] : []).filter(\n    (node) => stopKeys.includes(node.key)\n  );\n  return node.hasChildNodes\n    ? childNodes.concat(\n        childNodes.map((node) => getAllDescendants(node, stopKeys)).flat()\n      )\n    : [];\n}\n","import {\n  Collection,\n  CollectionStateBase,\n  Expandable,\n  MultipleSelection,\n  Node,\n} from \"@react-types/shared\";\nimport { TreeState as AriaTreeState } from \"@react-stately/tree\";\nimport { Key, useCallback, useEffect, useMemo } from \"react\";\nimport { useMultipleSelectionState } from \"@react-stately/selection\";\nimport { useCollection } from \"@react-stately/collections\";\nimport { useControlledState } from \"@react-stately/utils\";\nimport {\n  CollectionCacheInvalidationProps,\n  useCollectionCacheInvalidation,\n} from \"@intellij-platform/core/Collections/useCollectionCacheInvalidation\";\nimport { TreeCollection as _TreeCollection } from \"./__copied__TreeCollection\";\nimport { getSingleChildrenKeys } from \"./getSingleChildrenKeys\";\nimport { TreeSelectionManager } from \"@intellij-platform/core/Tree/TreeSelectionManager\";\n\nexport class TreeCollection<T> extends _TreeCollection<T> {\n  public readonly rootKeys: Key[];\n  constructor(\n    nodes: Iterable<Node<T>>,\n    { expandedKeys }: { expandedKeys: Set<Key> }\n  ) {\n    super(nodes, { expandedKeys });\n    this.rootKeys = Array.from(nodes).map(({ key }) => key);\n  }\n\n  getAllExpandableKeys(): Set<Key> {\n    const rootNodes = this.rootKeys\n      .map((key) => this.getItem(key))\n      .filter((i) => i != null);\n    return this.recursivelyAddExpandableKeys(rootNodes, new Set<Key>());\n  }\n\n  private recursivelyAddExpandableKeys(\n    nodes: Iterable<Node<T>>,\n    result: Set<Key>\n  ) {\n    for (const node of nodes) {\n      if (node?.hasChildNodes) {\n        result.add(node.key);\n        this.recursivelyAddExpandableKeys(node.childNodes, result);\n      }\n    }\n    return result;\n  }\n}\nexport interface TreeProps<T>\n  extends CollectionStateBase<T, TreeCollection<T>>,\n    Expandable,\n    MultipleSelection,\n    CollectionCacheInvalidationProps {\n  childExpansionBehaviour?: \"multi\" | \"single\";\n}\n\nexport interface TreeState<T> extends AriaTreeState<T> {\n  selectionManager: TreeSelectionManager;\n  collection: TreeCollection<T>;\n}\n/**\n * Provides state management for tree-like components. Handles building a collection\n * of items from props, item expanded state, and manages multiple selection state.\n *\n * Similar to (and initially copied from) useTreeState from @react-stately/tree, but with the following changes:\n * - Different onToggle implementation with two adjustments to match Intellij Platform:\n *   - Collapsing a key collapses all descendants as well.\n *   - Expanding a single-child node will recursively expand all single-child descendants.\n *   Couldn't be done with a wrapper in a clean and optimal way. Access to setExpandedKey is not provided. We would need\n *   to either maintain a new state for expanded keys and ignore the one returned from the wrapped hook, or\n *   inefficiently call the returned `toggleKey` function many times.\n * - Supports collection invalidation via CollectionCacheInvalidationProps\n *   Perhaps not the most important addition, but not possible to be done via a wrapper.\n * - Uses TreeSelectionManager instead of the default SelectionManager, which implements expand/shrink selection.\n *   Could be done in a wrapper, with a little hack. Would need to replace selection manager.\n * - returned `collection` is of type `TreeCollection` (which is an improved version of react-stately `TreeCollection`),\n *   instead of the more generic `Collection`.\n */\nexport function useTreeState<T extends object>({\n  childExpansionBehaviour = \"multi\",\n  ...props\n}: TreeProps<T>): TreeState<T> {\n  let [expandedKeys, setExpandedKeys] = useControlledState(\n    props.expandedKeys ? new Set(props.expandedKeys) : undefined!,\n    props.defaultExpandedKeys ? new Set(props.defaultExpandedKeys) : new Set(),\n    props.onExpandedChange!\n  );\n\n  let selectionState = useMultipleSelectionState({\n    ...props,\n    selectionBehavior: \"replace\",\n  });\n  let disabledKeys = useMemo(\n    () => (props.disabledKeys ? new Set(props.disabledKeys) : new Set<Key>()),\n    [props.disabledKeys]\n  );\n\n  const context = useCollectionCacheInvalidation(props);\n\n  let tree = useCollection<T, TreeCollection<T>>(\n    props,\n    useCallback(\n      (nodes) => new TreeCollection(nodes, { expandedKeys }),\n      [expandedKeys]\n    ),\n    context\n  );\n\n  const selectionManager = new TreeSelectionManager(\n    tree as Collection<Node<T>>,\n    selectionState\n  );\n\n  // Reset focused key if that item is deleted from the collection.\n  useEffect(() => {\n    if (\n      selectionState.focusedKey != null &&\n      !tree.getItem(selectionState.focusedKey)\n    ) {\n      selectionState.setFocusedKey(null);\n    }\n  }, [tree, selectionState.focusedKey]);\n\n  const toggleKey = (key: Key) => {\n    let newExpandedKeys = toggleTreeNode(\n      tree as Collection<Node<T>>,\n      expandedKeys,\n      key\n    );\n    if (childExpansionBehaviour === \"single\") {\n      const expandedSiblings = getSiblings(tree, key).filter(\n        (aKey) => aKey !== key && expandedKeys.has(aKey)\n      );\n      newExpandedKeys = expandedSiblings.reduce((expandedKeys, expandedKey) => {\n        return toggleTreeNode(\n          tree as Collection<Node<T>>,\n          expandedKeys,\n          expandedKey\n        );\n      }, newExpandedKeys);\n    }\n    setExpandedKeys(newExpandedKeys);\n  };\n\n  return {\n    collection: tree,\n    expandedKeys,\n    disabledKeys,\n    toggleKey,\n    selectionManager,\n    setExpandedKeys,\n  };\n}\n\nfunction getChildItems<T>(node: Node<T>): Node<T>[] {\n  const childNodes = [...(node.childNodes || [])];\n  const childItems = childNodes.filter(({ type }) => type === \"item\");\n  const sectionItems = childNodes.filter(({ type }) => type === \"section\");\n\n  return childItems.concat(sectionItems.flatMap(getChildItems));\n}\n\nfunction getRootItemKeys(tree: TreeCollection<unknown>) {\n  return tree.rootKeys\n    .map((key) => tree.getItem(key))\n    .filter((i) => i != null)\n    .flatMap(getChildItems)\n    .map(({ key }) => key);\n}\n/**\n * Returns the siblings of an item in tree, ignoring sections.\n * Disclaimer: The code is done quick and dirty and in a rush. Unpleasant code, good candidate for refactoring :D\n */\nfunction getSiblings(tree: TreeCollection<unknown>, key: Key): Key[] {\n  const parentKey = tree.getItem(key)?.parentKey;\n  if (!parentKey) {\n    return [...tree.rootKeys].concat(getRootItemKeys(tree));\n  }\n  let parent = parentKey ? tree.getItem(parentKey) : null;\n  if (parent?.type === \"item\") {\n    return getChildItems(parent).map(({ key }) => key);\n  }\n  const siblings: Key[] = [];\n  while (parent) {\n    siblings.push(...getChildItems(parent).map(({ key }) => key));\n    if (parent.type === \"section\") {\n      if (parent.parentKey) {\n        parent = tree.getItem(parent.parentKey);\n      } else {\n        siblings.push(...getRootItemKeys(tree));\n        parent = null;\n      }\n    } else {\n      parent = null;\n    }\n  }\n  return Array.from(new Set(siblings));\n}\nfunction toggleTreeNode(\n  tree: Collection<Node<unknown>>,\n  expandedKeys: Set<Key>,\n  key: Key\n): Set<Key> {\n  // toggling a non-expandable node should be no-op\n  if (!expandedKeys.has(key) && !tree.getItem(key)?.hasChildNodes) {\n    return expandedKeys;\n  }\n  const newKeys = toggleKey(expandedKeys, key);\n  // In Intellij impl, when a node is collapsed, all descendants are also collapsed. In other words, keys that are\n  // not a part of the list of visible nodes, will be excluded from the expanded keys, with the toggle action.\n  for (const aKey of newKeys) {\n    if (tree.getItem(aKey) == null) {\n      newKeys.delete(aKey);\n    }\n  }\n\n  // If we are toggling it open, expand all expandable single-child items\n  if (newKeys.has(key)) {\n    for (const aKey of getSingleChildrenKeys(tree.getItem(key))) {\n      newKeys.add(aKey);\n    }\n  }\n  return newKeys;\n}\n\nfunction toggleKey(set: Set<Key>, key: Key): Set<Key> {\n  let res = new Set(set);\n  if (res.has(key)) {\n    res.delete(key);\n  } else {\n    res.add(key);\n  }\n\n  return res;\n}\n","/**\n * Drop shadow of windows and other overlays.\n * The current value is not accurate and needs to be revisited. It should also be os-dependant.\n * FIXME: On windows, there is only a border-like shadow. No drop shadow\n * FIXME: On Mac, there is a border-like shadow and a drop shadow. the border-like shadow is missing in the current value\n */\nexport const WINDOW_SHADOW = \"box-shadow: 0 5px 15px rgb(0 0 0 / 30%)\";\n","import * as styledComponents from \"styled-components\";\nimport { ThemedStyledComponentsModule } from \"./ThemedStyledComponentsModule\";\nimport { Theme } from \"./Theme\";\nimport { KnownThemePropertyPath } from \"./Theme/types\";\n\ntype JuiStyledComponentsModule = ThemedStyledComponentsModule<\n  Theme<KnownThemePropertyPath>\n>;\n\nexport const styled =\n  styledComponents.default as JuiStyledComponentsModule[\"default\"];\nexport const useTheme =\n  styledComponents.useTheme as JuiStyledComponentsModule[\"useTheme\"];\nexport const css = styledComponents.css as JuiStyledComponentsModule[\"css\"];\nexport const ThemeConsumer =\n  styledComponents.ThemeConsumer as JuiStyledComponentsModule[\"ThemeConsumer\"];\n","import {\n  FocusManager,\n  FocusScope as WrappedFocusScope,\n  FocusScopeProps,\n  useFocusManager,\n} from \"@react-aria/focus\";\nimport React, { ForwardedRef, useImperativeHandle, useRef } from \"react\";\n\nexport type FocusScopeRef = { focus: (forceFocusFirst?: boolean) => void };\n/**\n * A version of FocusScope which also allows for imperatively moving focus to the scope.\n * and has tiny patches/improvements\n * It's useful for\n */\nexport const FocusScope = React.forwardRef(function BetterFocusScope(\n  { children, ...otherProps }: FocusScopeProps,\n  ref: ForwardedRef<FocusScopeRef>\n) {\n  const directChildRef = useRef<HTMLSpanElement>(null);\n  const focusManagerRef = useRef<FocusManager>(null);\n  useImperativeHandle(\n    ref,\n    () => ({\n      focus: (forceFocusFirst?: boolean) => {\n        const focusManager = focusManagerRef.current;\n        const containerElement = directChildRef.current?.parentElement;\n        if (!focusManager) {\n          throw new Error(\"focus manager not found!\");\n        }\n        if (!containerElement) {\n          throw new Error(\"container element not found\");\n        }\n        if (forceFocusFirst) {\n          return focusManager.focusFirst();\n        }\n        const alreadyHasFocused =\n          document.activeElement &&\n          document.activeElement !== containerElement &&\n          containerElement.contains(document.activeElement);\n        if (!alreadyHasFocused) {\n          focusManager.focusNext({ tabbable: true });\n        }\n      },\n    }),\n    []\n  );\n\n  return (\n    <WrappedFocusScope {...otherProps}>\n      <GetFocusManager ref={focusManagerRef} />\n      <span data-focus-root-direct-child=\"\" hidden ref={directChildRef} />\n      {children}\n    </WrappedFocusScope>\n  );\n});\nconst GetFocusManager = React.forwardRef(function FocusScopeHandle(\n  props: {},\n  ref: ForwardedRef<FocusManager>\n) {\n  const focusManager = useFocusManager()!;\n  useImperativeHandle(ref, () => focusManager, [focusManager]);\n  return null;\n});\n","import { sortBy, uniqBy } from \"ramda\";\n\nexport interface OverflowObserverRecord {\n  target: Element;\n  overflowedElements: Element[];\n  previouslyOverflowedElements: Element[];\n}\n\nexport type OverflowObserverCallback = (\n  change: OverflowObserverRecord,\n  observer: OverflowObserver\n) => void;\n\n/**\n * Allows observing the list of overflowing children of a given target element.\n * An `IntersectionObserver` is created for each target to observe the intersection between the target and each child\n * element. The child elements are observed/unobserved by the intersection observer as they are added/removed to the\n * DOM, which is observed using a `MutationObserver`.\n * `IntersectionObserver` options such as `rootMargin` are supported, to fine tune what should be considered as\n * overflowed.\n *\n * TODO: add a takeRecords method to allow processing pending mutations before disconnect\n * TODO: maybe add direction option?\n *\n */\nexport class OverflowObserver {\n  private mutationObserver: MutationObserver;\n  private data: Map<\n    Element,\n    {\n      intersectionObserver: IntersectionObserver;\n      currentOverflowElements: Element[];\n    }\n  > = new Map();\n\n  constructor(private callback: OverflowObserverCallback) {\n    this.mutationObserver = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        const target = mutation.target;\n        if (!(target instanceof Element)) {\n          return;\n        }\n        mutation.removedNodes.forEach((node) => {\n          if (node instanceof Element) {\n            this.data.get(target)?.intersectionObserver.unobserve(node);\n          }\n        });\n        mutation.addedNodes.forEach((node) => {\n          if (node instanceof Element) {\n            this.data.get(target)?.intersectionObserver.observe(node);\n          }\n        });\n      });\n    });\n  }\n\n  observe(target: Element, options: Omit<IntersectionObserverInit, \"root\">) {\n    this.data.get(target)?.intersectionObserver.disconnect();\n\n    const intersectionObserver = new IntersectionObserver(\n      (entries) => {\n        const data = this.data.get(target);\n        const sortedEntries = sortBy((entry) => -entry.time, entries);\n        const validEntries = uniqBy((entry) => entry.target, sortedEntries);\n\n        const newHiddenElements = validEntries\n          .map((entry) =>\n            !entry.isIntersecting && entry.target instanceof Element\n              ? entry.target\n              : undefined\n          )\n          .filter((i) => i != null);\n        const newVisibleElements = validEntries\n          .map((entry) =>\n            entry.isIntersecting && entry.target instanceof Element\n              ? entry.target\n              : null\n          )\n          .filter((i) => i != null);\n\n        //  Also cover this in Toolbar with a test case\n        const previouslyOverflowedElements =\n          data?.currentOverflowElements || [];\n        const overflowedElements = previouslyOverflowedElements\n          .filter((element) => !newVisibleElements.includes(element))\n          .concat(newHiddenElements)\n          .filter((element) => {\n            // In some cases some elements may be hidden by some styles (e.g. the first/last separator in a toolbar).\n            // It doesn't make sense to report them as overflowed.\n            const isHidden =\n              element instanceof HTMLElement &&\n              element.offsetWidth === 0 &&\n              element.offsetHeight === 0;\n            return !isHidden;\n          });\n        this.callback(\n          {\n            previouslyOverflowedElements,\n            overflowedElements: overflowedElements,\n            target,\n          },\n          this\n        );\n        if (data) {\n          data.currentOverflowElements = overflowedElements;\n        }\n      },\n      {\n        ...options,\n        root: target,\n      }\n    );\n    [...(target?.children || [])].forEach((childElement) => {\n      intersectionObserver.observe(childElement);\n    });\n    this.data.set(target, {\n      intersectionObserver,\n      currentOverflowElements: [],\n    });\n    this.mutationObserver.observe(target, {\n      childList: true,\n    });\n  }\n\n  unobserve(target: Element) {\n    this.data.get(target)?.intersectionObserver.disconnect();\n  }\n\n  disconnect() {\n    [...this.data.values()].forEach(({ intersectionObserver }) =>\n      intersectionObserver.disconnect()\n    );\n    this.data = new Map();\n    this.mutationObserver.disconnect();\n  }\n}\n","import { RefObject, useEffect, useState } from \"react\";\nimport { OverflowObserver } from \"@intellij-platform/core/utils/overflow-utils/OverflowObserver\";\n\n/**\n * Given a ref to a scrollable container, returns the child elements that are not completely visible and\n * are off view because of scroll.\n * @param scrollableContainerRef\n * @param threshold\n */\nexport function useOverflowObserver(\n  scrollableContainerRef: RefObject<HTMLElement>,\n  {\n    threshold = 0.9,\n    rootMargin = \"0px\",\n  }: Omit<IntersectionObserverInit, \"root\"> = {}\n) {\n  const [overflowedElements, setOverflowedElements] = useState<Element[]>([]);\n\n  useEffect(() => {\n    const overflowObserver = new OverflowObserver((change) => {\n      setOverflowedElements(change.overflowedElements);\n    });\n    overflowObserver.observe(scrollableContainerRef.current!, {\n      rootMargin,\n      threshold,\n    });\n    return () => {\n      overflowObserver.disconnect();\n    };\n  }, [\n    /**\n     * It's ok and needed to have the ref value as a dependency here. We don't know if ref is attached to different\n     * elements in each render, and it's ok that it's not a state, since we don't change it, and it's not supposed to\n     * change without a rerender\n     **/\n    scrollableContainerRef.current,\n  ]);\n\n  return {\n    overflowedElements,\n  };\n}\n","import React, { useContext } from \"react\";\n\nexport const useContextOrThrow = <ContextType extends unknown>(\n  Context: React.Context<ContextType | null>,\n  nullErrorMessage: string\n) => {\n  const context = useContext<ContextType | null>(Context);\n\n  if (context == null) {\n    throw new Error(nullErrorMessage);\n  }\n\n  return context;\n};\n","import { useEffect, useRef } from \"react\";\n\nexport function usePrevious<T>(value: T): T {\n  const ref = useRef(value);\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n","import React, { useEffect, useMemo } from \"react\";\nimport BrowserOnly from \"@docusaurus/BrowserOnly\";\n\nimport darculaTheme from \"../../../jui/themes/darcula.theme.json\";\nimport highContrastTheme from \"../../../jui/themes/HighContrast.theme.json\";\nimport lightTheme from \"../../../jui/themes/intellijlaf.theme.json\";\nimport { Theme, ThemeProvider } from \"../../../jui/src\";\n\nexport type ExampleContextThemeName = \"light\" | \"darcula\" | \"highContrast\";\n\nexport const ExampleContext: React.FC<{\n  themeName?: ExampleContextThemeName;\n  children?: React.ReactNode;\n}> = ({ children, themeName = \"darcula\" }) => {\n  const themeJson = (\n    {\n      light: lightTheme,\n      highContrast: highContrastTheme,\n      darcula: darculaTheme,\n    } as const\n  )[themeName];\n\n  // IMPORTANT: passing a function that returns Theme is crucial in get it working. Otherwise, ThemeProvider will try\n  // to \"merge\" themes, and the end result is an POJO, with prototype link lost.\n  const theme = useMemo(() => new Theme(themeJson), [themeJson]);\n\n  useFixDocusaurusStyleBleeds();\n  return (\n    <BrowserOnly fallback={<>Loading...</>}>\n      {() => <ThemeProvider theme={theme}>{children}</ThemeProvider>}\n    </BrowserOnly>\n  );\n};\n\n/**\n * TODO: add a surrounding UI for examples, with tools for theme selection for example.\n */\nexport const Example: React.FC<{ children: React.ReactNode }> = ({\n  children,\n}) => (\n  <ExampleContext>\n    <div\n      // @ts-expect-error: css prop is not working for some reason\n      css={`\n        background: ${({ theme }: { theme: Theme }) =>\n          theme.color(\"*.background\")};\n      `}\n    >\n      {children}\n    </div>\n  </ExampleContext>\n);\n\nexport const withExampleContext = <P extends {}>(\n  Component: React.ComponentType<P>\n) => {\n  function WithExampleContext(props: P) {\n    return (\n      <ExampleContext>\n        <Component {...props} />\n      </ExampleContext>\n    );\n  }\n\n  return WithExampleContext;\n};\n\nconst useFixDocusaurusStyleBleeds = () => {\n  useEffect(() => {\n    const FLAG_CLASSNAME = \"example-context-patch\";\n    if (!document.body.classList.contains(FLAG_CLASSNAME)) {\n      try {\n        undoUseKeyboardNavigation();\n        document.body.classList.add(FLAG_CLASSNAME);\n      } catch (e) {\n        console.error(\"Could not undo useKeyboardNavigation\");\n      }\n    }\n  }, []);\n};\n\n/**\n * Reverts the \"improvement\" [useKeyboardNavigation][1] does :|\n *\n * [1]: https://github.com/facebook/docusaurus/blob/f87a3ead4664b301901c12466cb2c82cd95d141b/packages/docusaurus-theme-common/src/hooks/useKeyboardNavigation.ts#L14\n */\nfunction undoUseKeyboardNavigation() {\n  document\n    .querySelectorAll<HTMLLinkElement>(\"link[rel=stylesheet]\")\n    .forEach((linkEl) => {\n      if (linkEl.sheet) {\n        for (let i = 0; i < linkEl.sheet.cssRules.length; i++) {\n          const rule = linkEl.sheet.cssRules.item(i);\n          if (\n            rule?.cssText?.startsWith(\"body:not(.navigation-with-keyboard)\")\n          ) {\n            linkEl.sheet.deleteRule(i); // We can change the rule to only disable it within the boundary of example\n          }\n        }\n      }\n    });\n}\n","import React from \"react\";\n\n/**\n * To make relation between things in jui and original reference impl in Intellij Platform\n */\nexport const RefToIntellijPlatform = ({\n  path,\n  name,\n}: {\n  path: string;\n  name?: string;\n}) => {\n  return (\n    // TODO: make it some nice box with an icon and a hint text which says something like \"Intellij Platform\" or\n    //  \"Reference\" or something better :D\n    <a\n      href={`https://github.com/JetBrains/intellij-community/blob/master/${path}`}\n      target=\"_blank\"\n    >\n      {name || path.split(\"/\").pop()}\n    </a>\n  );\n};\n","import { Meta, StoryObj } from \"@storybook/react\";\nimport { PlatformIcon } from \"../Icon\";\nimport { DebuggerTabContent } from \"./DebuggerTabs/DebuggerTabContent\";\nimport { EditorTabContent } from \"./EditorTabs/EditorTabContent\";\nimport { EditorTabs, EditorTabsProps } from \"./EditorTabs/EditorTabs\";\nimport { DebuggerTabs } from \"./DebuggerTabs/DebuggerTabs\";\nimport { Tabs, TabsProps } from \"./Tabs\";\nimport { TabContentLayout } from \"./TabContentLayout\";\nimport { ToolWindowTabs } from \"./ToolWindowTabs/ToolWindowTabs\";\nimport React from \"react\";\nimport { Item } from \"../Collections\";\n\ntype StoryProps<T extends TabsProps<unknown> = TabsProps<unknown>> = Pick<\n  T,\n  \"active\" | \"defaultSelectedKey\"\n>;\n\nexport default {\n  title: \"Components/Tabs/Tab Themes\",\n  component: Tabs,\n  parameters: {\n    controls: { exclude: \"TabComponent\" },\n  },\n} as Meta;\n\nexport const EditorTheme: StoryObj<StoryProps> = {\n  render: (props) => {\n    return (\n      <EditorTabs {...props} items={editorTabs} active>\n        {(tab: (typeof editorTabs)[number]) => (\n          <Item key={tab.title} textValue={tab.title}>\n            <EditorTabContent\n              icon={<PlatformIcon icon={tab.icon} />}\n              title={tab.title}\n              pinned={tab.pinned}\n            />\n          </Item>\n        )}\n      </EditorTabs>\n    );\n  },\n};\nexport const DebuggerTheme: StoryObj<StoryProps> = {\n  render: (props) => {\n    return (\n      <DebuggerTabs {...props} items={debuggerTabs}>\n        {(tab: (typeof debuggerTabs)[number]) => (\n          <Item key={tab.title} textValue={tab.title}>\n            <DebuggerTabContent\n              icon={tab.icon && <PlatformIcon icon={tab.icon} />}\n              title={tab.title}\n            />\n          </Item>\n        )}\n      </DebuggerTabs>\n    );\n  },\n};\nexport const ToolWindowTheme: StoryObj<StoryProps> = {\n  render: (props) => {\n    return (\n      <ToolWindowTabs {...props} items={toolWindowTabs}>\n        {(tab: (typeof toolWindowTabs)[number]) => (\n          <Item key={tab.title} textValue={tab.title}>\n            <TabContentLayout\n              startIcon={<PlatformIcon icon={tab.icon} />}\n              title={tab.title}\n            />\n          </Item>\n        )}\n      </ToolWindowTabs>\n    );\n  },\n};\nconst editorTabs = [\n  {\n    title: \"Tabs.tsx\",\n    pinned: true,\n    icon: \"fileTypes/javaScript\",\n  },\n  {\n    title: \"Tabs.stories.tsx\",\n    pinned: false,\n    icon: \"fileTypes/javaScript\",\n  },\n  {\n    title: \"index.ts\",\n    pinned: false,\n    icon: \"fileTypes/javaScript\",\n  },\n  {\n    title: \"Tabs.test.ts\",\n    pinned: false,\n    icon: \"fileTypes/javaScript\",\n  },\n];\nconst toolWindowTabs = [\n  {\n    title: \"Project\",\n    icon: \"nodes/project\",\n  },\n  {\n    title: \"Project Files\",\n    icon: \"nodes/folder\",\n  },\n  {\n    title: \"Tests\",\n    icon: \"scope/tests\",\n  },\n];\nconst debuggerTabs = [\n  {\n    title: \"Console\",\n    icon: \"debugger/console\",\n  },\n  {\n    title: \"Frames\",\n    icon: null,\n  },\n  {\n    title: \"Variables | Coroutines | idea.log\",\n    icon: null,\n  },\n];\n","import { Meta, StoryObj } from \"@storybook/react\";\nimport { MenuItemLayout, PlatformIcon } from \"@intellij-platform/core\";\nimport React, { useEffect, useState } from \"react\";\nimport { TabContentLayout, TabItem, TabsProps } from \".\";\nimport { Tabs } from \"./Tabs\";\nimport { DOMProps } from \"@react-types/shared\";\n\ntype StoryProps<T extends TabsProps<unknown> = TabsProps<unknown>> = Pick<\n  T,\n  | \"active\"\n  | \"focusable\"\n  | \"defaultSelectedKey\"\n  | \"multiRow\"\n  | \"noOverflowMenu\"\n  | \"noBorders\"\n  | keyof DOMProps\n>;\n\nexport default {\n  title: \"Components/Tabs\",\n  component: Tabs,\n  parameters: {\n    controls: { exclude: \"TabComponent\" },\n  },\n} as Meta;\n\nexport const StaticItems: StoryObj<StoryProps> = {\n  render: (props) => {\n    return (\n      <Tabs {...props}>\n        <TabItem>Tab 1</TabItem>\n        <TabItem>Tab 2</TabItem>\n        <TabItem>Tab 3</TabItem>\n      </Tabs>\n    );\n  },\n};\n\nexport const DynamicItems: StoryObj<StoryProps> = {\n  render: (props: StoryProps) => {\n    return (\n      <Tabs\n        {...props}\n        items={[\"Tab 1\", \"Tab 2\", \"Tab 3\"].map((title) => ({ title }))}\n      >\n        {({ title }: { title: string }) => (\n          <TabItem key={title}>{title}</TabItem>\n        )}\n      </Tabs>\n    );\n  },\n};\n\nexport const Overflow: StoryObj<StoryProps & { maxWidth: number }> = {\n  render: ({ maxWidth = 800, ...props }) => {\n    const [tabs, setTabs] = useState(\n      Array(10)\n        .fill(null)\n        .map((_, index) => ({\n          title: `Big tab title #${index}`,\n          icon: \"nodes/folder\",\n        }))\n    );\n    return (\n      <div style={{ maxWidth }}>\n        <Tabs {...props} items={tabs}>\n          {(tab) => {\n            const icon = <PlatformIcon icon={tab.icon} />;\n            return (\n              <TabItem\n                key={tabs.indexOf(tab)}\n                textValue={tab.title}\n                inOverflowMenu={\n                  <MenuItemLayout content={tab.title} icon={icon} />\n                }\n              >\n                <TabContentLayout startIcon={icon} title={tab.title} />\n              </TabItem>\n            );\n          }}\n        </Tabs>\n        <div style={{ marginTop: \"1rem\" }}>\n          <button\n            onClick={() => {\n              setTabs((tabs) => [\n                ...tabs,\n                {\n                  title: `Big tab title #${tabs.length}`,\n                  icon: \"nodes/folder\",\n                },\n              ]);\n            }}\n          >\n            Add tab\n          </button>\n          <button\n            onClick={() => {\n              setTabs((tabs) =>\n                tabs.map((tab, index) => {\n                  if (index === 4) {\n                    const title = tab.title;\n                    return {\n                      ...tab,\n                      title:\n                        title.replace(/ \\(.*\\)/, \"\") +\n                        ` ( edited - ${\n                          title.includes(\"short\")\n                            ? \"long long long long\"\n                            : \"short\"\n                        })`,\n                    };\n                  }\n                  return tab;\n                })\n              );\n            }}\n          >\n            Change title of tab #4\n          </button>\n        </div>\n      </div>\n    );\n  },\n};\n","\n\nexport const frontMatter = {};\nexport const contentTitle = 'Tabs';\nexport {default as metadata} from '@site/.docusaurus/docusaurus-plugin-content-docs/default/site-docs-components-tabs-mdx-375.json'\nexport const assets = {\n\n};\n\nimport {Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs} from \"react/jsx-runtime\";\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport {RefToIntellijPlatform} from \"@site/src/components/RefToIntellijPlatform.tsx\";\nimport {EditorTheme, DebuggerTheme, ToolWindowTheme} from \"@intellij-platform/core/Tabs/3-TabThemes.stories\";\nimport {Overflow} from \"@intellij-platform/core/Tabs/2-Tabs.stories\";\nimport {Example} from \"@site/src/components/ExampleContext\";\nexport const toc = [{\n  \"value\": \"Features\",\n  \"id\": \"features\",\n  \"level\": 3\n}, {\n  \"value\": \"Remaining\",\n  \"id\": \"remaining\",\n  \"level\": 4\n}, {\n  \"value\": \"Simple usage\",\n  \"id\": \"simple-usage\",\n  \"level\": 2\n}, {\n  \"value\": \"Overflow behavior\",\n  \"id\": \"overflow-behavior\",\n  \"level\": 2\n}, {\n  \"value\": \"Customization\",\n  \"id\": \"customization\",\n  \"level\": 2\n}, {\n  \"value\": \"Editor Theme\",\n  \"id\": \"editor-theme\",\n  \"level\": 3\n}, {\n  \"value\": \"Debugger Theme\",\n  \"id\": \"debugger-theme\",\n  \"level\": 3\n}, {\n  \"value\": \"Tool Window Theme\",\n  \"id\": \"tool-window-theme\",\n  \"level\": 3\n}];\nfunction _createMdxContent(props) {\n  const _components = {\n    admonition: \"admonition\",\n    code: \"code\",\n    h1: \"h1\",\n    h2: \"h2\",\n    h3: \"h3\",\n    h4: \"h4\",\n    header: \"header\",\n    input: \"input\",\n    li: \"li\",\n    p: \"p\",\n    pre: \"pre\",\n    ul: \"ul\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  if (!DebuggerTheme) _missingMdxReference(\"DebuggerTheme\", false);\n  if (!DebuggerTheme.render) _missingMdxReference(\"DebuggerTheme.render\", true);\n  if (!EditorTheme) _missingMdxReference(\"EditorTheme\", false);\n  if (!EditorTheme.render) _missingMdxReference(\"EditorTheme.render\", true);\n  if (!Overflow) _missingMdxReference(\"Overflow\", false);\n  if (!Overflow.render) _missingMdxReference(\"Overflow.render\", true);\n  if (!ToolWindowTheme) _missingMdxReference(\"ToolWindowTheme\", false);\n  if (!ToolWindowTheme.render) _missingMdxReference(\"ToolWindowTheme.render\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.header, {\n      children: _jsx(_components.h1, {\n        id: \"tabs\",\n        children: \"Tabs\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"features\",\n      children: \"Features\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Fully customizable and themeable\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Support for different ways of handling overflow\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Default tab themes, with support for icon, close button and pinned tabs.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h4, {\n      id: \"remaining\",\n      children: \"Remaining\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      className: \"contains-task-list\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        className: \"task-list-item\",\n        children: [_jsx(_components.input, {\n          type: \"checkbox\",\n          disabled: true\n        }), \" \", \"drag and drop\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"simple-usage\",\n      children: \"Simple usage\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-tsx\",\n        metastring: \"live\",\n        live: true,\n        children: \"<Tabs>\\n  <Item>Tab 1</Item>\\n  <Item>Tab 2</Item>\\n  <Item>Tab 3</Item>\\n</Tabs>\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"overflow-behavior\",\n      children: \"Overflow behavior\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"There are a few was of handling the overflow, when there is not enough space for showing all tabs. By default tabs will\\nscroll horizontally and a small arrow down icon button is added next to the tabs which opens an overflow menu for the\\ntabs that are not fully visible, based on the current scroll position.\"\n    }), \"\\n\", _jsx(_components.admonition, {\n      type: \"tip\",\n      children: _jsxs(_components.p, {\n        children: [\"Use \", _jsx(_components.code, {\n          children: \"TabItem\"\n        }), \" instead of \", _jsx(_components.code, {\n          children: \"Item\"\n        }), \" to specify via \", _jsx(_components.code, {\n          children: \"inOverflowMenu\"\n        }), \" prop, a different react node to be shown when the tab\\nis rendered in the overflow menu.\"]\n      })\n    }), \"\\n\", _jsx(Example, {\n      children: _jsx(Overflow.render, {\n        maxWidth: 1800\n      })\n    }), \"\\n\", _jsx(\"br\", {}), \"\\n\", _jsxs(_components.p, {\n      children: [\"Overflow menu can be disabled via \", _jsx(_components.code, {\n        children: \"noOverflow\"\n      }), \" prop:\"]\n    }), \"\\n\", _jsx(Example, {\n      children: _jsx(Overflow.render, {\n        maxWidth: 1800,\n        noOverflowMenu: true\n      })\n    }), \"\\n\", _jsx(\"br\", {}), \"\\n\", _jsxs(_components.p, {\n      children: [\"Horizontal scroll can be disabled via \", _jsx(_components.code, {\n        children: \"noScroll\"\n      }), \" prop. If overflow is also disabled, tabs will be shrunk to fit\\nthe available space.\"]\n    }), \"\\n\", _jsx(_components.admonition, {\n      type: \"warning\",\n      children: _jsxs(_components.p, {\n        children: [\"Support for \", _jsx(_components.code, {\n          children: \"noScroll\"\n        }), \" is under development.\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"customization\",\n      children: \"Customization\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"Tabs\"\n      }), \" component allows for \", _jsx(_components.code, {\n        children: \"TabsComponent\"\n      }), \" (the container) and \", _jsx(_components.code, {\n        children: \"TabComponent\"\n      }), \" to allow for customizing look and feel.\\nBy default \", _jsx(_components.code, {\n        children: \"StyledDefaultTabs\"\n      }), \" and \", _jsx(_components.code, {\n        children: \"StyledDefaultTab\"\n      }), \" are used. The following variations are a thin wrapper around\\n\", _jsx(_components.code, {\n        children: \"Tabs\"\n      }), \", which use those two props. They also expose a customized version of \", _jsx(_components.code, {\n        children: \"TabContentLayout\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"editor-theme\",\n      children: \"Editor Theme\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Use \", _jsx(_components.code, {\n        children: \"EditorTabs\"\n      }), \" together with \", _jsx(_components.code, {\n        children: \"EditorTabContent\"\n      }), \" for editor tab style.\"]\n    }), \"\\n\", _jsx(Example, {\n      children: _jsx(EditorTheme.render, {})\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"debugger-theme\",\n      children: \"Debugger Theme\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Use \", _jsx(_components.code, {\n        children: \"DebuggerTabs\"\n      }), \" together with \", _jsx(_components.code, {\n        children: \"DebuggerTabContent\"\n      }), \" for editor tab style.\"]\n    }), \"\\n\", _jsx(Example, {\n      children: _jsx(DebuggerTheme.render, {})\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"tool-window-theme\",\n      children: \"Tool Window Theme\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Use \", _jsx(_components.code, {\n        children: \"ToolWindowTabs\"\n      }), \" together with the default \", _jsx(_components.code, {\n        children: \"TabContentLayout\"\n      }), \" for editor tab style.\"]\n    }), \"\\n\", _jsx(Example, {\n      children: _jsx(ToolWindowTheme.render, {})\n    })]\n  });\n}\nexport default function MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n\n"],"names":["BareButton","React","_ref","forwardedRef","elementType","elementTypeProp","props","children","type","undefined","ref","useObjectRef","buttonProps","useButton","domProps","filterDOMProps","autoFocus","mergeProps","__docgenInfo","Item","_Item","getCollectionNode","context","result","itemGenerator","StatelyItem","next","value","originalShouldInvalidate","shouldInvalidate","invalidated","ItemStateContext","getItemElement","collectionRef","key","selector","CSS","escape","String","collection","current","dataset","querySelector","LafIcon","themePath","icon","size","resolvedIconPath","useIconPath","iconDescriptor","theme","useTheme","resolvedValue","modifiers","name","findIconPath","basePath","isUnderDarcula","suffix","filter","modifier","Disabled","includes","reduce","soFar","useSvgIcon","path","_jsx","StyledIconWrapper","$size","amendName","iconNameOrPath","amendment","ext","split","getDarkPath","darkPath","getPlatformIconPath","relativePath","startsWith","slice","PlatformIcon","darkIcon","iconName","dark","fallbackPath","styled","_ref2","_ref3","role","itemState","useContext","selected","isSelected","isContainerFocused","svg","setSvg","useState","useLayoutEffect","element","ariaBusy","remove","svgElement","document","createElement","appendChild","outerHTML","makeIdsUnique","randomPostfix","Math","random","toFixed","matchAll","modifiedSvg","_","id","newId","replaceAll","console","log","useEffect","canceled","fetchIcon","error","getSvgIcon","catch","e","theOld","theNew","str","replaced","replace","replacedAgain","DEFAULT_MINIMUM_BUTTON_SIZE","NAVBAR_MINIMUM_BUTTON_SIZE","StyledIconButton","$minSize","color","_ref4","_ref5","_ref6","_ref7","_ref8","IconButton","_ref9","minSize","preventFocusOnPress","excludeFromTabOrder","isPressed","isPressedInput","isDisabled","onPress","onPressChange","onPressEnd","onPressStart","onPressUp","shouldCancelOnPointerExit","otherProps","focusableProps","useFocusable","pressProps","usePress","className","disabled","tabIndex","ListDivider","StyledVerticalSeparator","as","useSeparator","orientation","separatorProps","DEFAULT_LOADING_DELAY_MS","DelayedLoadingSpinner","delay","Delayed","LoadingSpinner","waitedEnough","setWaitedEnough","timer","setTimeout","clearTimeout","_Fragment","LOADING_SPINNER_SIZE_SMALL","LOADING_SPINNER_SIZE_BIG","width","height","viewBox","_jsxs","transform","fill","fillOpacity","fillRule","x","y","opacity","attributeName","values","keyTimes","dur","repeatCount","calcMode","patchCollectionItem","nodes","partialNode","childNodes","result2","partialChildNode","partialChildNodeWithoutType","PatchedItem","PatchedSection","Section","convertChildren","Array","isArray","map","Item2","MenuOverlayContext","close","defaultAutoFocus","MenuContext","useMenu","state","onAction","onActionProp","submenuBehavior","onClose","getItem","hasChildNodes","menuProps","useMenuAria","menuContextValue","useMenuState","patchCollectionProps","node","useTreeState","childExpansionBehaviour","expandedKeys","expandedKey","onExpandedChange","firstKey","onExpandedKeyChange","defaultExpandedKeys","defaultExpandedKey","Menu","minWidth","Provider","StyledMenu","style","$fillAvailableSpace","fillAvailableSpace","renderMenuNodes","StyledMenuItemText","StyledMenuItemPlatformIcon","StyledMenuItemLafIcon","MenuItemContext","descriptionProps","labelProps","keyboardShortcutProps","useMenuItemLayout","MenuItem","item","nestedMenuRef","disabledKeys","has","isExpanded","selectionManager","selectedKeys","isFocused","focusedKey","renderSubmenu","Submenu","itemWrapper","i","menuItemProps","useMenuItem","hasSubmenu","ariaMenuItemProps","useMenuItemAria","onMouseEnter","onPointerEnter","onPointerDown","hoverProps","useHover","onHoverStart","isAnySubmenuOpen","some","parentKey","toggleKey","isFocusVisible","setFocused","setFocusedKey","togglePressProps","onKeyDown","stopPropagation","overlayProps","positionProps","useOverlayPosition","targetRef","overlayRef","placement","shouldFlip","offset","crossOffset","MENU_VERTICAL_PADDING","MENU_BORDER_WIDTH","isOpen","arrowProps","onPointerUp","StyledMenuItem","$disabled","$active","StyledMenuItemIcon","Selected","rendered","StyledNestedArrow","Overlay","OverlayComponent","SimpleOverlay","parentState","rootKey","portalContainer","body","ReactDOM","StyledMenuItemLayout","Content","Shortcut","currentForegroundAware","MenuItemLayout","content","shortcut","useContextOrThrow","allowedIcon","MenuOverlay","restoreFocus","otherOverlayProps","inputOverlayRef","suspense","overlayContainerRef","useRef","useOverlay","shouldCloseOnBlur","isKeyboardDismissDisabled","isDismissable","shouldCloseOnInteractOutside","areInNestedOverlays","ariaHideOutside","usePreventScroll","onOutsideContextMenu","addEventListener","capture","removeEventListener","MaybeSuspend","containerRef","FocusScope","fallback","MenuTrigger","renderMenu","direction","align","positioningTargetRef","useMenuTriggerState","triggerRef","menuTriggerProps","triggerProps","useMenuTrigger","ariaButtonProps","getPlacement","containerPadding","PressResponder","WINDOW_SHADOW","css","highlightedStyle","asCurrentForeground","defaultStyle","disabledStyle","useSubmenu","keyboardDelegate","rootItem","textValue","MenuKeyboardDelegate","submenuProps","useSubmenuAria","focus","useSubmenuState","ListKeyboardDelegate","constructor","collator","keys","getKeys","flatMap","getFirstKey","getLastKey","getKeyBelow","keyBelow","getKeyAbove","keyAbove","keyboardProps","useKeyboard","contains","target","continuePropagation","root","isFocusedRef","focusedKeyRef","Object","defineProperties","get","SelectionManager","StyledMenuHeading","StyledMenuSectionItemsContainer","MenuSection","itemProps","headingProps","groupProps","useMenuSection","heading","length","hasDivider","ParentOverlayContext","AriaOverlay","containerRefProp","element1","element2","overlayRoot1","closest","overlayRoot2","Boolean","defaultSize","StyledSeparator","backgroundColor","backgroundClip","boxSizing","margin","border","flexShrink","StyledHorizontalSeparator","DebuggerTabContent","title","closeButton","TabContentLayout","startIcon","endIcon","debuggerTabTheme","underlineHeight","underlinedTabBackground","StyledDebuggerTab","StyledDefaultTab","getTabThemeStyles","DebuggerTabs","Tabs","TabComponent","focusable","EditorTabContent","onUnpin","pinned","containerProps","TooltipTrigger","tooltip","ActionTooltip","actionName","editorTabTheme","borderColor","background","underlinedTabInactiveBackground","hoverInactiveBackground","hoverBackground","inactiveUnderlineColor","underlineColor","underlinedTabInactiveForeground","underlinedTabForeground","StyledEditorTab","StyledEditorTabs","StyledDefaultTabs","getTabsThemeStyles","EditorTabs","TabsComponent","$noBorders","commonColors","contrastBorder","StyledTabItemLayout","iconStyle","StyledStartIconWrapper","StyledEndIconWrapper","TabItem","$selected","horizontalOverflowIndicatorStyles","StyledHorizontalOverflowShadows","$hasOverflowAtStart","panelBackground","$hasOverflowAtEnd","Tab","forwardRef","active","shouldSelectOnPressUp","Component","tabProps","useTab","selectedKey","scrollBarDisabledStyle","StyledTabList","$multiRow","multiRow","noOverflowMenu","noScroll","noBorders","useTabListState","tabListProps","useTabList","scrolledIndicatorProps","hasOverflow","useHasOverflow","threshold","setHasOverflow","left","right","top","bottom","update","offsetLeft","scrollLeft","offsetRight","scrollWidth","offsetWidth","newHasOverflow","offsetTop","scrollTop","offsetBottom","scrollHeight","offsetHeight","onScroll","overflowedElements","useOverflowObserver","overflowedKeys","Set","HTMLElement","scrollableContainer","selectedTabElement","scrollIntoView","Error","TabsOverflowMenu","onSelect","setSelectedKey","items","menuItem","inOverflowMenu","toolWindowTabTheme","StyledToolWindowTab","StyledToolWindowTabs","ToolWindowTabs","tooltipProps","Tooltip","tooltipBackground","TRANSLATE","sideStyles","StyledTooltipPointer","$side","POINTER_WIDTH","POINTER_HEIGHT","normalizeCssValue","withMin","min","withMax","max","getOffsetCssProp","side","invert","TooltipPointer","tooltipSize","limitPointerPositionStyles","applyVerticalMinMax","compose","identity","applyHorizontalMinMax","pointerPositionToOffsetStyle","offsetValue","StyledTooltip","$multiline","inset","$hasPointer","StyledShortcut","StyledHeader","fontSizeDelta","StyledDescription","_ref10","contextHelpForeground","_ref11","StyledLink","_ref12","linkForegroundEnabled","placementToPointerSide","center","_ref13","multiline","withPointer","isInteractive","pointerPositionStyle","TooltipContext","useTooltip","open","measuredSize","useMeasuredSize","setMeasuredSize","_Tooltip","assign","Header","Description","Link","lastMouseClientPos","globalMoveHandler","useTooltipTriggerState","positionAria","useMouseEventOverlayPosition","options","clientX","clientY","fakeTarget","pointerEvents","position","visibility","updatePosition","coordinatesSource","_updatePosition","requestAnimationFrame","TooltipTriggerAndOverlay","trigger","showOnFocus","setInteractive","useTooltipTrigger","onFocus","FocusableProvider","useAriaTooltipTrigger","HTMLInputElement","onMouseDown","useCollectionCacheInvalidation","cacheInvalidation","invalidators","lastInvalidators","usePrevious","anInvalidator","index","TreeCollection","_temp","last","keyMap","Map","iterable","lastKey","visit","set","child","nextKey","prevKey","Symbol","iterator","getKeyBefore","getKeyAfter","at","idx","isExpandable","isEmptyIterable","TreeSelectionManager","expandSelection","expandKeys","getExpandAndShrinkKeys","setSelectedKeys","shrinkSelection","shrinkKeys","recursivelyGetExpandAndShrinkKeys","previousChild","parent","newKeys","parentDescendants","getAllDescendants","getAllRoots","concat","every","descendants","stopKeys","flat","_TreeCollection","rootKeys","from","getAllExpandableKeys","rootNodes","recursivelyAddExpandableKeys","add","setExpandedKeys","useControlledState","selectionState","useMultipleSelectionState","selectionBehavior","useMemo","tree","useCollection","useCallback","newExpandedKeys","toggleTreeNode","expandedSiblings","getSiblings","getRootItemKeys","getChildItems","siblings","push","aKey","childItems","sectionItems","res","delete","getSingleChildrenKeysRecursive","previousKeys","childNodesIterator","firstChild","done","noMoreChildren","styledComponents","ThemeConsumer","directChildRef","focusManagerRef","useImperativeHandle","forceFocusFirst","focusManager","containerElement","parentElement","focusFirst","activeElement","focusNext","tabbable","WrappedFocusScope","GetFocusManager","hidden","useFocusManager","OverflowObserver","callback","mutationObserver","data","MutationObserver","mutations","forEach","mutation","Element","removedNodes","intersectionObserver","unobserve","addedNodes","observe","disconnect","IntersectionObserver","entries","sortedEntries","sortBy","entry","time","validEntries","uniqBy","newHiddenElements","isIntersecting","newVisibleElements","previouslyOverflowedElements","currentOverflowElements","childElement","childList","scrollableContainerRef","rootMargin","setOverflowedElements","overflowObserver","change","Context","nullErrorMessage","ExampleContext","themeName","themeJson","light","lightTheme","highContrast","highContrastTheme","darcula","darculaTheme","Theme","useFixDocusaurusStyleBleeds","BrowserOnly","ThemeProvider","Example","_StyledDiv","FLAG_CLASSNAME","classList","querySelectorAll","linkEl","sheet","cssRules","rule","cssText","deleteRule","_styled","withConfig","displayName","componentId","RefToIntellijPlatform","href","pop","EditorTheme","render","editorTabs","tab","DebuggerTheme","debuggerTabs","ToolWindowTheme","toolWindowTabs","Overflow","maxWidth","tabs","setTabs","indexOf","marginTop","onClick","frontMatter","contentTitle","assets","toc","_createMdxContent","_components","_missingMdxReference","MDXContent","MDXLayout","component"],"mappings":"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"}