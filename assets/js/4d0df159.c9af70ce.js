"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[806],{6838:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>o,contentTitle:()=>s,metadata:()=>l,toc:()=>r,default:()=>d});var i=n(28427),a=(n(2784),n(30876));const o={},s="Collections",l={unversionedId:"guides/Collections",id:"guides/Collections",title:"Collections",description:"A good number of components like List, Tree, Menu, Tabs, etc. display a collection of items.",source:"@site/docs/guides/Collections.mdx",sourceDirName:"guides",slug:"/guides/Collections",permalink:"/jui/docs/guides/Collections",editUrl:"https://github.com/alirezamirian/jui/edit/master/packages/website/docs/guides/Collections.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Three view splitter",permalink:"/jui/docs/components/Advanced/ThreeViewSplitter"}},r=[{value:"Rendering optimization caveat",id:"rendering-optimization-caveat",children:[{value:"Using context",id:"using-context",children:[],level:3},{value:"Wrapping items with extra state",id:"wrapping-items-with-extra-state",children:[],level:3},{value:"Disabling or limiting cache",id:"disabling-or-limiting-cache",children:[],level:3}],level:2}],c={toc:r};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"collections"},"Collections"),(0,a.kt)("p",null,"A good number of components like List, Tree, Menu, Tabs, etc. display a collection of items.\n",(0,a.kt)("a",{parentName:"p",href:"https://react-spectrum.adobe.com/react-stately/collections.html"},"@react-stately/collections")," is used for all of them\nto provide a uniform and flexible API that would allow for both static jsx-based or dynamic source of items."),(0,a.kt)("h2",{id:"rendering-optimization-caveat"},"Rendering optimization caveat"),(0,a.kt)("p",null,"When the API for dynamic items (",(0,a.kt)("inlineCode",{parentName:"p"},"items")," prop and a render function as ",(0,a.kt)("inlineCode",{parentName:"p"},"children"),") is used, the render result for each\nitem ",(0,a.kt)("a",{parentName:"p",href:"https://react-spectrum.adobe.com/react-stately/collections.html#why-not-array-map"},"is subject to caching")," based\non the item object. It's important to understand this assumption that the rendering should only depend on the item, and\nnot any other piece of state from the closure, for example."),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Item renderer function is assumed to be a pure function that depends only on its single argument, the item\nobject."))),(0,a.kt)("p",null,"In some cases however, there might be a need to render some UI based on a something other than the item object itself.\nBelow is a few ways to do that."),(0,a.kt)("h3",{id:"using-context"},"Using context"),(0,a.kt)("p",null,"TODO (important point: especially useful for components that implement virtual rendering, as only a limited number of\nitems are mounted at each moment, and changes to the additional state would only affect those, without collection being rebuilt)"),(0,a.kt)("h3",{id:"wrapping-items-with-extra-state"},"Wrapping items with extra state"),(0,a.kt)("p",null,"TODO"),(0,a.kt)("h3",{id:"disabling-or-limiting-cache"},"Disabling or limiting cache"),(0,a.kt)("p",null,"Passing ",(0,a.kt)("inlineCode",{parentName:"p"},"true")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"cacheInvalidation")," prop in components that support it will disable caching altogether, but can\ndrastically reduce the performance for large number of components. In a test on a ",(0,a.kt)("a",{parentName:"p",href:"../components/Tree"},"Tree")," with 400 elements,\nit was ~10x slower with cache being disabled."),(0,a.kt)("p",null,"A middle ground is to pass an array of cache invalidators instead of turning the cache off completely:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"<Tree cacheInvalidation={{ invalidators: [nestedSelection] }}>...</Tree>\n")),(0,a.kt)("p",null,"This would invalidate the cache only when ",(0,a.kt)("inlineCode",{parentName:"p"},"nestedSelection")," is changed."))}d.isMDXComponent=!0}}]);
//# sourceMappingURL=4d0df159.c9af70ce.js.map