(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["8032"],{49719:function(e,t,n){"use strict";let r,i,o,a,s,l,c,d;n.r(t),n.d(t,{default:()=>ui,App:()=>ur});var u,h,p=n("21023"),m=n.n(p),g=n("2784"),f=n("31128"),A=n("47040"),x=n("37044"),y=n("76826"),j=n("63981"),v=n("20569"),w=n("72516"),C=n("52322");let b=e=>(0,C.jsx)(w.E,{...e,src:"data:image/gif;base64,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",darkSrc:"data:image/gif;base64,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"});b.__docgenInfo={description:"",methods:[],displayName:"LoadingGif"};let E=(0,v.ZP)(b).withConfig({displayName:"DefaultSuspense__Loading",componentId:"sc-1n9vzm7-0"})(["width:fit-content;margin:auto;"]),S=e=>{let{fallback:t=(0,C.jsx)(E,{}),children:n}=e;return(0,C.jsx)(g.Suspense,{fallback:t,children:n})};S.__docgenInfo={description:"",methods:[],displayName:"DefaultSuspense",props:{fallback:{defaultValue:{value:"<Loading />",computed:!1},required:!1}}};var D=n("40145"),I=n("63631"),k=n("82540"),T=n("52761"),P=n("44668"),B=n("42181"),R=n("61741"),N=n("28266"),F=n("88089"),L=n("89349"),O=n("32396"),_=n("47386"),M=n("39472"),G=n("79532"),K=n("57385"),H=n("17560"),V=n("90046"),U=n("30775"),$=n("28818"),Q=n("36588"),q=n("2533"),z=n("29362"),W=n("1554"),Y=n("6771"),Z=n("2362");let J="fileTypes/text",X="nodes/folder",ee={editorconfig:"nodes/editorconfig",js:"fileTypes/javaScript",gitignore:"vcs/ignore_file",archive:"fileTypes/archive",as:"fileTypes/as",config:"fileTypes/config",css:"fileTypes/css",dtd:"fileTypes/dtd",hpr:"fileTypes/hprof",htaccess:"fileTypes/htaccess",html:"fileTypes/html",idl:"fileTypes/idl",java:"fileTypes/java",jfr:"fileTypes/jfr",json:"fileTypes/json",jsp:"fileTypes/jsp",jspx:"fileTypes/jspx",manifest:"fileTypes/manifest",properties:"fileTypes/properties",txt:"fileTypes/text",wsdl:"fileTypes/wsdlFile",xhtml:"fileTypes/xhtml",xml:"fileTypes/xml",xsd:"fileTypes/xsdFile",yaml:"fileTypes/yaml"},et=e=>ee[en(e)]||J,en=e=>e.split(".").pop()||"";function er(e,t){return void 0===t&&(t=m().sep),function e(t,n,r){void 0===r&&(r=[]);let i=m().dirname(t);return i!==n?[i].concat(e(i,n,r)):r}(e,t)}var ei=n("42615");let eo=new WeakMap,ea=new WeakSet;function es(e,t){let n=(0,Z.cn)(0),r=(0,Z.cn)((t,r)=>{t(n);let i=new Set,o=e(function(){let e=arguments.length<=0?void 0:arguments[0];return ea.has(e)&&i.add(e),t(...arguments)},r);return eo.set(o,i),o},function(e,i){for(var o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];if(0===a.length){let t=e(r);for(let e of eo.get(t)??[])i(e);i(n,e=>e+1)}else if(t)return t(e,i,...a)});return ea.add(r),r}var el=n("22633"),ec=n("42378"),ed=n.n(ec);async function eu(){return await eg(e=>{el.FileSystem.InMemory.Create({},e)})}async function eh(e){void 0===e&&(e="bfs-local-fs");let t=await eg(t=>{el.FileSystem.IndexedDB.Create({storeName:e},t)});return await new Promise(e=>t.init(t.store,e)),t}function ep(e){el.initialize(e);let t=el.BFSRequire("fs");return t.promises=ed()({...t,exists:(e,n)=>t.exists(e,e=>n(null,e))}),t}let em=e=>{let t=new(el.BFSRequire("fs")).FS;return t.initialize(e),t};function eg(e){return new Promise((t,n)=>{e((e,r)=>{if(e||!r)return n(e);t(r)})})}var ef=n("67481");async function eA(e){let{source:t,target:n,cancelSignal:r,...i}=e;await ex(r,{...i,source:ed()(t),target:ed()(n),rootDir:"/"})}let ex=(0,ef.qf)(function*(e,t){let{source:n,target:r,rootDir:i,onCopy:o,force:a}=t;for(let s of yield n.readdir(i)){let l=m().join(i,s),c=yield n.stat(l);if(c.isFile()||c.isSymbolicLink()){if(!a&&(yield ey(r,l)))return;o?.(l);let e=yield n.readFile(l);yield ej(r,m().dirname(l)),yield r.writeFile(l,e)}else c.isDirectory()?yield ex(e,{...t,rootDir:m().join(i,s)}):console.warn("unsupported file system item skipped, when copying:",c)}}),ey=async(e,t)=>await e.exists(t)&&!(await e.stat(t)).isDirectory();async function ej(e,t){let n=await e.stat(t).catch(e=>"ENOENT"!==e.code&&Promise.reject(e));if(!1===n){let n=m().dirname(t);n!==m().dirname(n)&&await ej(e,n),await e.mkdir(t).catch(e=>"EEXIST"===e.code?Promise.resolve():Promise.reject(e))}else if(!n.isDirectory())throw Error(`path is not a directory, but already exists: ${t}`)}let ev=e=>r.promises.stat(e).catch(()=>null),ew=(i="demo_app_use_persistent_fs",{get:()=>localStorage.getItem(i),set:e=>localStorage.setItem(i,e)});async function eC(e){let{onCopy:t=console.log,cancelSignal:n}=void 0===e?{}:e;if(!(r.getRootFS()instanceof el.FileSystem.InMemory)){console.log("Already on persistent fs. Nothing to do.");return}console.log("Creating IndexedDB FS"),console.time("creating db");let i=await eh();await eA({source:r,target:await em(i),cancelSignal:n,force:!0,onCopy:t}),console.timeEnd("creating db"),ep(i),console.log("FS switched to IndexedDB backend",i)}let eb=function(e){let t,n="pending",r=e.then(e=>{n="success",t=e},e=>{n="error",t=e});return{read:()=>{switch(n){case"pending":throw r;case"error":throw t;default:return t}}}}(("yes"===ew.get()?eh():eu()).then(ep).then(e=>(window.fs=e,r=e)).catch(e=>{throw console.log("could not initialize FS:",e),e})),eE=e=>{let{children:t}=e;return eb.read(),t},eS=async e=>{let t;try{t=await r.promises.readdir(e)}catch(e){return null}return(await Promise.all(t.map(t=>{let n=`${e}/${t}`;return r.promises.stat(n).then(e=>({...e,type:e.isDirectory()?"dir":"file",filePath:n}))}))).map(e=>({type:e.type,name:(0,p.basename)(e.filePath),path:e.filePath,lastModification:e.mtimeMs,size:e.size}))},eD=(0,ei.xu)(e=>{let t=es(()=>eS(e));return t.debugLabel=`DirContent(${e})`,t}),eI=(e,t)=>async e=>{await t(ek(e))},ek=(0,ei.xu)(e=>{let t=async()=>e?await r.promises.exists(e)?r.promises.readFile(e,{encoding:"utf8"}):null:"",n=(0,ei.wm)(t);return(0,Z.cn)(async e=>e(n),async function(i,o){let a=(arguments.length<=2?void 0:arguments[2])??"";if((arguments.length<=2?0:arguments.length-2)==0)return o(n,t());o(n,Promise.resolve(a)),e&&await r.promises.writeFile(e,a??"","utf8").catch(e=>{console.error("failed to sync the file back to the fs",e)})})});var eT=n("98738"),eP=n("23949"),eB=n("91924");function eR(e){return Array.isArray(e)?1===e[1]?["DELETED","NOT_CHANGED","MODIFIED"][e[2]]:0===e[1]&&0!==e[3]?"ADDED":"UNKNOWN":"modified"===e||"*modified"===e?"MODIFIED":"deleted"===e||"*deleted"===e?"DELETED":"added"===e?"ADDED":"unmodified"===e?"NOT_CHANGED":"UNKNOWN"}var eN=n("76209"),eF=n("22215"),eL=n("59118"),eO=n("90187"),e_=n("14129");let eM=e=>{let{path:t}=e;return!t.split("/").includes(".git")},eG={path:"/workspace/jui",url:"https://github.com/alirezamirian/jui.git"},eK={name:"Workspace",path:"/workspace"},eH=(0,Z.cn)(eK),eV=(0,ei.xu)(e=>(0,Z.cn)(t=>m().join(t(eH).path,e))),eU=(0,Z.cn)(async e=>{let t=e(eH);return e(e$(t.path))}),e$=(0,ei.xu)(e=>(0,Z.cn)(async t=>{let n=await t(eD(e)),r=[],i=async n=>{if("dir"===n.type){if(eM(n)){let e=await t(eD(n.path));e&&e.forEach(i)}}else r.push({...n,relativePath:m().relative(e,n.path)})};return await Promise.all((n||[]).map(e=>i(e))),r})),eQ=(0,Z.cn)([]),eq=(0,Z.cn)(e=>e(eQ).length>0),ez=(u=[],o=null,function(e,t){void 0===t&&(t="unknown");let n=function(e,t){let n=(0,D.oR)(void 0),r=(0,D.b9)(e);return(0,g.useCallback)(t=>{let i=n.get(e),o="function"==typeof t?t(i):t;return o!==i&&r(o),o},[D.b9,n])}(eQ),r=(0,g.useRef)();return(0,g.useEffect)(()=>{o===r.current&&n(t=>(0,eO.Z)(e,t)?t:e)},[e]),(0,e_.L)({onFocusWithin:t=>{r.current=t.currentTarget,o=t.currentTarget,n(e)},onBlurWithin:e=>{!(e.relatedTarget instanceof Element&&e.relatedTarget?.closest("[data-overlay-container], [role=menu]"))&&n(u)}}).focusWithinProps}),eW=(0,Z.cn)((0,g.createRef)()),eY=(0,Z.cn)((0,g.createRef)()),eZ=(0,Z.cn)((0,g.createRef)()),eJ=((h={}).WORKSPACE_FILE="$WORKSPACE_FILE$",h),eX=(0,ei.xu)(e=>(0,Z.cn)(t=>{let n=m().join(t(eH).path,".idea");return m().join(n,e7[e]||e)})),e0=(0,ei.xu)(e=>{let t=(0,Z.cn)(null),n=(0,Z.cn)(t=>e4(t(eX(e)))),r=null;return(0,Z.cn)(e=>e(t)??e(n),async(i,o,a)=>{let s=i(eX(e)),l=i(t)??await i(n);o(t,e=>a(e??l)),null!==r&&clearTimeout(r),r=setTimeout(()=>{var e;o(ek(s),(e=i(t),new eF.XMLBuilder(e5).build(e)))},1e3)})});function e1(e,t){let n=(0,Z.cn)(e),r=function(e){let{storageFile:t=eJ.WORKSPACE_FILE,componentName:n,schema:r,...i}=e,o="write"in i?i.write:e=>e,a="read"in i?i.read:eL.Z;return(0,Z.cn)(async e=>{let i=await e(e0(t)),o=i?.project.component.find(e=>e["@name"]===n),s=r.safeParse(o);return s.error&&console.error(`Error parsing persisted state for component ${n} in file ${t}:`,s.error),await a(s.data)??void 0},async(e,r,i)=>{if("update"===i.type)return r(e0(t),e=>{let{value:t}=i,r=[...e.project.component],a=r.findIndex(e=>e["@name"]===n);return r.splice(a,a>=0?1:0,{"@name":n,...o(t,r[a])}),{...e,project:{...e.project,component:r}}})})}(t),i=(0,eP.v)((e,t)=>{e.peek(r).then(e=>{void 0!==e&&t(n,e)})});return(0,Z.cn)(e=>(e(i),e(n)),async(e,t,i)=>{let o="function"==typeof i?i(await e(n)):i;t(n,o),await t(r,{type:"update",value:o})})}e1({x:2},{componentName:"test",storageFile:"test.xml",schema:eB.z.object({whatever:eB.z.number()}).optional(),read:e=>({x:e?.whatever??2}),write:(e,t)=>({...t,whatever:e.x})}),e1({y:3},{componentName:"test2",storageFile:"test.xml",schema:eB.z.object({y:eB.z.number()}).optional()});let e2={attributeNamePrefix:"@",ignoreAttributes:!1,isArray:(e,t)=>"project.component"===t},e5={format:!0,attributeNamePrefix:"@",ignoreAttributes:!1},e6={"?xml":{"@version":"1.0","@encoding":"UTF-8"},project:{"@version":"4",component:[]}};async function e4(e){let t=new eF.XMLParser(e2);if(!await r.promises.exists(e))return e6;let n=await r.promises.readFile(e,{encoding:"utf8"}),i=Object.assign({...e6},t.parse(n));return i.project.component=i.project.component??[],i}let e7={[eJ.WORKSPACE_FILE]:"workspace.xml"},e3=e=>eB.z.union([e,e.array()]).transform(e=>Array.isArray(e)?e:[e]),e8=(e,t)=>{let n=e3(e);return eB.z.object({[t]:n})},e9=async e=>{let{filepath:t,...n}=e;return f.ZP.statusMatrix({...n,filepaths:[t]}).then(e=>e[0])},te=()=>Promise.all(["/workspace/jui","/workspace"].map(async e=>{if(await r.promises.exists(e))return f.ZP.findRoot({fs:r,filepath:e}).catch(()=>null)})).then(e=>[...new Set(e.filter(eN.N))].map(e=>({dir:e,vcs:"Git"}))),tt=e1([],{componentName:"VcsDirectoryMappings",schema:eB.z.object({mapping:e3(eB.z.object({"@directory":eB.z.string(),"@vcs":eB.z.enum(["Git"])})).optional()}).optional(),storageFile:"vcs.xml",read:e=>e?.mapping?.map(e=>({dir:e["@directory"],vcs:e["@vcs"]}))??te(),write:(e,t)=>({...t||{},mapping:e?.map(e=>{let{vcs:t,dir:n}=e;return{"@directory":n,"@vcs":t}})??[]})}),tn=(0,ei.xu)(e=>(0,Z.cn)(()=>(0,f.AY)({fs:r,filepath:e}).catch(()=>null))),tr=async e=>{console.time(`statusMatrix ${e}`);let t=await (0,f.ks)({fs:r,dir:e});console.timeEnd(`statusMatrix ${e}`);let n={};return t.forEach(e=>{n[e[0]]=eR(e)}),n},ti=(0,ei.xu)(e=>{let t=(0,Z.cn)({});return(0,eP.j)(t,(n,r)=>{tr(e).then(e=>{r(t,e)})})}),to=(0,ei.xu)(e=>(0,Z.cn)(!1)),ta=(0,Z.cn)(e=>e(tt).some(t=>{let{dir:n}=t;return e(to(n))})),ts=(0,ei.xu)(e=>es(async t=>{let n=await t(tn(e));if(n){let i=p.relative(n,e),o=t(ti(n));return o[i]||console.log("file status missing in repo status state, fetching individually",e),o[i]??eR(await e9({fs:r,dir:n,filepath:i}))}return"NOT_CHANGED"})),tl=async(e,t,n)=>{let i=await e(tn(n));if(i){let e=p.relative(i,n),o=await f.ZP.statusMatrix({fs:r,dir:i,filepaths:[e]});t(ti(i),t=>{let n={...t};return 0===o.length&&delete n[e],o.forEach(e=>{n[e[0]]=eR(e)}),n})}},tc=()=>(0,eT.lV)(tl),td=async(e,t)=>{e(tt)?.forEach(e=>{let{dir:n}=e;t(to(n),!0),tr(n).then(e=>{console.log("setting repo status for git dirs:",n,e),t(ti(n),e)}).finally(()=>{t(to(n),!1)})})},tu=()=>(0,eT.lV)(td),th=e=>{let t=(0,v.Fg)();switch(e){case"MODIFIED":return t.dark?"#6897bb":"#0032a0";case"ADDED":return t.dark?"#629755":"#0a7700";case"DELETED":return t.dark?"#6c6c6c":"#616161";case"UNKNOWN":return t.dark?"#d1675a":"#993300"}},tp=e=>th((0,D.Dv)((0,ei.Wg)(ts(e)))??"NOT_CHANGED"),tm=e=>{let{children:t,filepath:n}=e,r=tp(n);return(0,C.jsx)("span",{style:{color:r},children:t})},tg=e=>{let{children:t,status:n}=e,r=(0,v.Fg)().currentForegroundAware(th(n));return(0,C.jsx)("span",{style:{color:r},children:t})};tm.__docgenInfo={description:"",methods:[],displayName:"FileStatusColor"},tg.__docgenInfo={description:"",methods:[],displayName:"StatusColor"};var tf=n("89076");let tA={value:null};function tx(){tA.value?.show({icon:"Warning",title:"Unimplemented action",body:"This action is not implemented yet.",actions:C.jsx(C.Fragment,{children:C.jsx(tf.r,{onPress:tx,children:"Read more..."})})})}var ty=n("26357"),tj=n("79955");let tv=I.zo.div.attrs({tabIndex:-1})`
  display: flex;
  flex-direction: column;
  height: inherit;
  justify-content: center;
  padding: 0 25%;
  font-size: 1rem;
  outline: none;
`,tw=I.zo.div`
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
`,tC=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.linkForegroundEnabled}};
`;function tb(){return(0,C.jsxs)(tv,{"data-testid":"EditorZeroState",children:[(0,C.jsx)(tE,{actionId:ty.$.GO_TO_FILE}),(0,C.jsx)(tE,{actionId:ty.$.GO_TO_ACTION})]})}function tE(e){let{actionId:t}=e,n=(0,tj.k)(),r=(0,B.BH)(t);return(0,C.jsxs)(tw,{children:[r?.title,(0,C.jsx)(tC,{children:n(t)})]})}tb.__docgenInfo={description:"",methods:[],displayName:"EditorZeroState"};var tS=n("34273"),tD=n.n(tS),tI=n("48813");let tk="PasteMultiple",tT="Generate",tP={EXPAND_REGION:"ExpandRegion",EXPAND_REGION_RECURSIVELY:"ExpandRegionRecursively",EXPAND_ALL_REGIONS:"ExpandAllRegions",EXPAND_ALL_TO_LEVEL:"ExpandToLevel",EXPAND_ALL_TO_LEVEL1:"ExpandToLevel1",EXPAND_ALL_TO_LEVEL2:"ExpandToLevel2",EXPAND_ALL_TO_LEVEL3:"ExpandToLevel3",EXPAND_ALL_TO_LEVEL4:"ExpandToLevel4",EXPAND_ALL_TO_LEVEL5:"ExpandToLevel5",COLLAPSE_REGION:"CollapseRegion",COLLAPSE_REGION_RECURSIVELY:"CollapseRegionRecursively",COLLAPSE_ALL_REGIONS:"CollapseAllRegions",COLLAPSE_DOC_COMMENTS:"CollapseDocComments",TOGGLE_FOLDING:"ToggleFolding",EDITOR_LANG_POPUP_MENU:"EditorLangPopupMenu",CompareClipboardWithSelection:"CompareClipboardWithSelection"};function tB(e){return e.event?e.event?.type?.includes("key")?"keyboard":"mouse":""}var tR=n("35848"),tN=n("68811");let tF=(0,Z.cn)((e,t)=>{let{setSelf:n}=t;return e=>function(){let{get:t,set:r}=n();for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return e(t,r,...o)}},(e,t)=>({get:e,set:t})),tL=(0,eP.j)((0,Z.cn)([]),(e,t)=>{e.peek(eU).then(n=>{t(tL,(0,tR.Z)([(0,tN.Z)(t=>t.path===e(eV("README.md"))),(0,tN.Z)(e=>e.path.endsWith(".ts")),(0,tN.Z)(e=>e.path.endsWith(".js"))],n.filter(e=>"file"===e.type)).filter(e=>!e.path.includes(".idea")).slice(0,12).map(e=>({filePath:e.path,editorState:{cursorPos:{lineNumber:0,column:0}}})))})}),tO=(0,Z.cn)(0),t_=(0,Z.cn)(e=>{let t=e(tL);return t[e(tO)]||t[0]||null}),tM=(0,Z.cn)(new Y.Ly(0,0)),tG=(0,Z.cn)(null),tK=function(e,t,n,r){void 0===r&&(r=!0);let i=e(tL),o=i.findIndex(e=>e.filePath===n),a=e=>{t(tO,e)};if(o>-1)a(o);else{let e=i.length;t(tL,e=>[...e,{filePath:n,editorState:{cursorPos:{lineNumber:0,column:0}}}]),a(e)}r&&setTimeout(()=>{e(tG)?.focus()})},tH=(e,t,n)=>t(tL,e=>e.filter((e,t)=>t!==n)),tV=(e,t,n)=>{let r=e(tL).findIndex(e=>e.filePath===n);r>-1&&(tH(e,t,r),t(tO,Math.max(r-1,0)))},tU=(e,t,n)=>{t(tL,e=>e.filter((e,t)=>t===n))},t$=(e,t,n)=>{let r=e(tL).length;n>=0&&n<r&&t(tO,n)},tQ=(e,t)=>{e(tG)?.focus()},tq=(a=(e,t)=>{let{getCallback:n}=t;return{openPath:n(tK),closeTab:n(tH),select:n(t$),focus:n(tQ),closeOtherTabs:n(tU),closePath:n(tV)}},(0,Z.cn)((e,t)=>{let n=e(tF);return a(e,Object.assign(t,{getCallback:n}))})),tz=()=>(0,D.Dv)(tq),tW=()=>[(0,D.Dv)(tL),(0,D.Dv)(tq)];var tY=n("54695");let tZ=JSON.parse('{"nG":[{"scope":"emphasis","settings":{"fontStyle":"italic"}},{"scope":"strong","settings":{"fontStyle":"bold"}},{"scope":"header","settings":{"foreground":"#000080"}},{"scope":"comment","settings":{"foreground":"#808080"}},{"scope":"constant.language","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":["constant.numeric"],"settings":{"foreground":"#6897BB"}},{"scope":"constant.regexp","settings":{"foreground":"#646695"}},{"scope":"entity.name.tag","settings":{"foreground":"#FFC66D"}},{"scope":"entity.name.tag.css","settings":{"foreground":"#d7ba7d"}},{"scope":"entity.other.attribute-name","settings":{"foreground":"#BABABA"}},{"scope":["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],"settings":{"foreground":"#d7ba7d"}},{"scope":"invalid","settings":{"foreground":"#f44747"}},{"scope":"markup.underline","settings":{"fontStyle":"underline"}},{"scope":"markup.bold","settings":{"foreground":"#A9B7C6"}},{"scope":"markup.heading","settings":{"foreground":"#A9B7C6"}},{"scope":"markup.italic","settings":{"fontStyle":"italic"}},{"scope":"markup.inserted","settings":{"foreground":"#b5cea8"}},{"scope":"markup.deleted","settings":{"foreground":"#ce9178"}},{"scope":"markup.changed","settings":{"foreground":"#A9B7C6"}},{"scope":"beginning.punctuation.definition.quote.markdown","settings":{"foreground":"#608b4e"}},{"scope":"beginning.punctuation.definition.list.markdown","settings":{"foreground":"#6796e6"}},{"scope":"markup.inline.raw","settings":{"foreground":"#ce9178"}},{"scope":"meta.selector","settings":{"foreground":"#d7ba7d"}},{"name":"brackets of XML/HTML tags","scope":"punctuation.definition.tag","settings":{"foreground":"#FFC66D"}},{"scope":"meta.preprocessor","settings":{"foreground":"#CC7832"}},{"scope":"meta.preprocessor.string","settings":{"foreground":"#ce9178"}},{"scope":"meta.preprocessor.numeric","settings":{"foreground":"#b5cea8"}},{"scope":"meta.structure.dictionary.key.python","settings":{"foreground":"#9876AA"}},{"scope":"meta.diff.header","settings":{"foreground":"#CC7832"}},{"scope":"storage","settings":{"foreground":"#ff0000"}},{"scope":"storage.type","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":["keyword.other.phpdoc.php","keyword.other.type.php","storage.type.class.jsdoc","entity.name.type.instance.jsdoc","variable.other.jsdoc"],"settings":{"foreground":"#808080"}},{"scope":"storage.modifier","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"string","settings":{"foreground":"#6A8759"}},{"scope":"string.tag","settings":{"foreground":"#6A8759"}},{"scope":"string.value","settings":{"foreground":"#6A8759"}},{"scope":"string.regexp","settings":{"foreground":"#6A8759"}},{"name":"JavaScript string interpolation ${}","scope":["punctuation.definition.template-expression.begin.js","punctuation.definition.template-expression.begin.ts","punctuation.definition.template-expression.end.ts","punctuation.definition.template-expression.end.js"],"settings":{"foreground":"#A9B7C6"}},{"scope":["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less"],"settings":{"foreground":"#9876AA"}},{"scope":["variable.other.property","support.variable.property.dom","entity.other.inherited-class"],"settings":{"foreground":"#9876AA"}},{"scope":["variable.other.object","variable.other.object.property","support.class.dom","meta.function-call","entity.name.type.module"],"settings":{"foreground":"#A9B7C6"}},{"scope":["variable.other.readwrite","variable.other.constant.ts","variable.parameter","variable.other.readwrite.alias"],"settings":{"foreground":"#A9B7C6"}},{"scope":"keyword","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"keyword.control","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"keyword.operator","settings":{"foreground":"#A9B7C6"}},{"scope":["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.logical.python"],"settings":{"foreground":"#CC7832"}},{"scope":"keyword.other.unit","settings":{"foreground":"#b5cea8"}},{"scope":["punctuation.section.embedded.begin.metatag.php","punctuation.section.embedded.end.metatag.php"],"settings":{"foreground":"#CC7832"}},{"scope":"support.function.git-rebase","settings":{"foreground":"#9876AA"}},{"scope":"constant.sha.git-rebase","settings":{"foreground":"#b5cea8"}},{"name":"coloring of the Java import and package identifiers","scope":["storage.modifier.import.java","storage.modifier.package.java"],"settings":{"foreground":"#d4d4d4"}},{"name":"this.self","scope":"variable.language","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"name":"Source Python","scope":["source.python"],"settings":{"foreground":"#A9B7C6"}},{"name":"Magic function python","scope":["support.function.magic.python"],"settings":{"foreground":"#9876AA"}},{"name":"Self keyword python","scope":["variable.language.special.self.python","variable.parameter.function.language.special.self.python"],"settings":{"foreground":"#9876AA","fontStyle":""}},{"name":"Function declarations Python","scope":["entity.name.function.python","meta.function-call.generic.python"],"settings":{"foreground":"#FFC66D"}},{"name":"Function declarations","scope":["entity.name.function","support.function","support.constant.handlebars"],"settings":{"foreground":"#FFC66D"}},{"name":"Types declaration and references","scope":["meta.return-type","support.class","support.type","entity.name.type","entity.name.class","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],"settings":{"foreground":"#4EC9B0"}},{"name":"Types declaration and references","scope":["support.class","entity.name.class","support.type","entity.name.type"],"settings":{"foreground":"#FFC66D"}},{"name":"Arrow Function","scope":["storage.type.function.arrow"],"settings":{"foreground":"#A9B7C6"}},{"name":"Types declaration and references, TS grammar specific","scope":["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json"],"settings":{"foreground":"#4EC9B0"}},{"name":"Control flow keywords","scope":"keyword.control","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"name":"Variable and parameter name","scope":["meta.definition.variable.name","support.variable"],"settings":{"foreground":"#A9B7C6"}},{"scope":["variable"],"settings":{"foreground":"#9876AA"}},{"name":"Object keys, TS grammar specific","scope":["meta.object-literal.key","meta.object-literal.key entity.name.function"],"settings":{"foreground":"#9876AA"}},{"name":"CSS property value","scope":["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],"settings":{"foreground":"#CE9178"}},{"scope":"token.info-token","settings":{"foreground":"#6796e6"}},{"scope":"token.warn-token","settings":{"foreground":"#cd9731"}},{"scope":"token.error-token","settings":{"foreground":"#f44747"}},{"scope":"token.debug-token","settings":{"foreground":"#b267e6"}}]}').nG.flatMap(e=>{let{scope:t,settings:n}=e;return[].concat(t).flatMap(e=>e.split(" ")).map(e=>{let t={token:e};return Object.keys(n).forEach(e=>{let r=n[e];r&&(t[e]=r)}),t})}),tJ=()=>{let e=(0,tY.useMonaco)(),t=(0,v.Fg)(),[n,r]=(0,g.useState)(void 0);return(0,g.useLayoutEffect)(()=>{if(e){let n=`jui-theme-${t.name.replace(" ","")}`,i=t.dark?"#dcdcdc":"#000";e.editor.defineTheme(n,{base:t.dark?"vs-dark":"vs",inherit:!0,colors:t.dark?{"editor.background":"#2B2B2B","editor.lineHighlightBackground":"#323232","editorLineNumber.foreground":"#606366","editorActiveLineNumber.foreground":"#a4a3a3","editorIndentGuide.background":"#373737","editorIndentGuide.activeBackground":"#505050","editorGutter.background":t.dark?"#313335":"#f0f0f0","editorBracketHighlight.foreground1":i,"editorBracketHighlight.foreground2":i,"editorBracketHighlight.foreground3":i,"editorBracketHighlight.foreground4":i,"editorBracketMatch.background":"#43454b","editorBracketMatch.border":"#00000000"}:{},rules:tZ}),r(n)}},[e,t]),n},tX=(0,I.zo)(tY.default)`
  .monaco-editor {
    .margin-view-overlays .line-numbers {
      text-align: left;
      padding-left: 7px;
    }

    .scrollbar .slider {
      border-radius: 0.25rem;
    }
  }
`,t0=e=>{let t=tJ();return(0,C.jsx)(C.Fragment,{children:t&&(0,C.jsx)(tX,{...e,options:{minimap:{enabled:!1},lineHeight:22,showFoldingControls:"always",guides:{indentation:!0},overviewRulerBorder:!1,fontFamily:"JetBrains Mono",fontSize:13,scrollbar:{verticalScrollbarSize:14,horizontalScrollbarSize:8,verticalSliderSize:8,horizontalSliderSize:8,horizontal:"auto",vertical:"visible",alwaysConsumeMouseWheel:!1},...e.options},theme:t})})};function t1(e,t,n){return(t.has(n)?t:t.set(n,e())).get(n)}t0.__docgenInfo={description:"Monaco Editor styled to look like Intellij Platform's editor.\nTODO:\n - folding controls appearance is different and should be changed\n - highlighting pairs of parens, brackets, etc. is different.\n - context menu look different.\n - selection look different.\n - BUG: height is more than necessary. Needs investigation first.",methods:[],displayName:"Editor"};let t2=new WeakMap,t5=(e,t,n)=>{let r=t1(()=>"object"==typeof n?new WeakMap:new Map,t2,t);return t1(e,r,n)},t6={};function t4(e,t){return t5(()=>{let n=(0,Z.cn)(async t=>({value:await t(e),isLoading:!1})),r=(0,ei.Wg)(n,e=>{let n=void 0===e?t:e.value;return void 0!==n?{value:n,isLoading:!0}:void 0});return(0,Z.cn)(e=>e(r)??e(n))},e,t??t6)}let t7=t4((0,Z.cn)(async e=>{let t=e(t_);return{...t,content:await e(ek(t?.filePath??null))}})),t3=()=>{let[e,t]=tW(),n=(0,g.useRef)(),[r,i]=(0,g.useState)(!1),[o,a]=(0,g.useState)(null),s=(0,B.BH)(R.xm),l=(0,D.b9)(tM),{value:{content:c,filePath:d},isLoading:u}=(0,D.Dv)(t7),h=(0,N.d)({closePath:t.closePath,closeOthersTabs:t.closeOtherTabs}),m=(0,D.b9)(tG),f=(0,D.b9)(ek(d??null)),A=tc(),x=function(e){let t=(0,tI.w)(),n=e.current,r=n?.getSelection(),i=r?n?.getModel()?.getValueInRange(r):"";return t({id:"EditorPopupMenu",title:"Editor Popup Menu",description:"Editor Popup Menu",children:[t({id:"ShowIntentionsGroup",title:"Show Intentions Group",isSearchable:!1,menuPresentation:"section",children:[{id:"ShowIntentionActions",title:"Show Context Actions",icon:(0,C.jsx)(M.vq,{icon:"actions/intentionBulbGrey.svg"}),actionPerformed:()=>{tx()}}]}),i?{id:ty.$.COPY,title:"Copy",icon:(0,C.jsx)(M.vq,{icon:"actions/copy"}),actionPerformed:()=>{let e=n?.getSelection(),t=e?n?.getModel()?.getValueInRange(e):"";t&&tD()(t)}}:null,{id:ty.$.PASTE,title:"Paste",icon:(0,C.jsx)(M.vq,{icon:"actions/menu-paste"}),actionPerformed:()=>{n?.focus(),n?.trigger("keyboard","editor.action.clipboardPasteAction",{})}},t({id:"Copy.Paste.Special",title:"Copy / Paste Special",description:"Copy / Paste Special Editor Actions",menuPresentation:"submenu",children:[{id:ty.$.COPY_REFERENCE,title:"Copy Reference",description:"Copy reference to selected class, method or function, or a relative path to selected file",actionPerformed:()=>{tx()}},{id:tk,title:"Paste from history",description:"Paste from recent clipboards",actionPerformed:()=>{tx()}}]}),"divider",t({id:"FoldingGroup",title:"Folding",menuPresentation:"submenu",children:[{id:tP.EXPAND_REGION,title:"Expand",actionPerformed:t=>{e.current?.trigger(tB(t),"editor.unfold",{})}},{id:tP.EXPAND_REGION_RECURSIVELY,title:"Expand Recursively",actionPerformed:t=>{e.current?.trigger(tB(t),"editor.unfoldRecursively",{})}},{id:tP.EXPAND_ALL_REGIONS,title:"Expand All",actionPerformed:t=>{e.current?.trigger(tB(t),"editor.unfoldAll",{})}},"divider",{id:tP.COLLAPSE_REGION,title:"Collapse",actionPerformed:t=>{e.current?.trigger(tB(t),"editor.fold",{})}},{id:tP.COLLAPSE_REGION_RECURSIVELY,title:"Collapse Recursively",actionPerformed:t=>{e.current?.trigger(tB(t),"editor.foldRecursively",{})}},{id:tP.COLLAPSE_ALL_REGIONS,title:"Collapse All",actionPerformed:t=>{e.current?.trigger(tB(t),"editor.foldAll",{})}},"divider",t({id:tP.EXPAND_ALL_TO_LEVEL,title:"Expand all to level",menuPresentation:"submenu",children:[1,2,3,4,5].map(t=>({id:tP[`EXPAND_ALL_TO_LEVEL${t}`],title:`${t}`,actionPerformed:n=>{e.current?.trigger(tB(n),`editor.foldLevel${t}`,{})}}))}),"divider",{id:tP.COLLAPSE_DOC_COMMENTS,title:"Collapse Doc Comments",actionPerformed:t=>{e.current?.trigger(tB(t),"editor.foldAllBlockComments",{})}},"divider",{id:tP.TOGGLE_FOLDING,title:"Toggle Folding",actionPerformed:t=>{e.current?.trigger(tB(t),"editor.toggleFold",{})}}]}),t({id:"EditorLangPopupMenu",title:"EditorLangPopupMenu",menuPresentation:"section",children:[{id:tT,title:"Generate...",actionPerformed:()=>{tx()}}]}),"divider",{id:tP.CompareClipboardWithSelection,title:"Compare with Clipboard",description:"Compare current selection with clipboard",icon:(0,C.jsx)(M.vq,{icon:"actions/diffWithClipboard.svg"}),actionPerformed:()=>{tx()}}].filter(eN.N)})}(n),y=function(e){void 0===e&&(e=""),i(!1),f(e),d&&A(d).catch(e=>{console.error("Could not update file status",e)})},j=ez(d?[d]:[]);return(0,C.jsx)(B.DG,{actions:[x],children:g=>{let{shortcutHandlerProps:f}=g;return(0,C.jsxs)(t9,{...(0,W.d)(j,f,{onFocus:()=>{i(!0),m({focus:()=>n.current?.focus()})}}),children:[e.length>0?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(F.X,{renderMenu:()=>(0,C.jsxs)(L.v2,{onAction:tx,children:[(0,C.jsx)(O.c,{children:"Close"},"close"),(0,C.jsx)(O.c,{children:"Close Other tabs"},"closeOthers"),(0,C.jsx)(O.c,{children:"Close all tabs"},"closeAll"),(0,C.jsx)(O.c,{children:"Close tabs to the left"},"closeLeft"),(0,C.jsx)(O.c,{children:"Close tabs to the right"},"closeRight")]}),children:(0,C.jsx)(_.s,{items:e,active:r,selectedKey:d,onSelectionChange:n=>{t.select(e.findIndex(e=>e.filePath===n))},noBorders:!0,children:t=>{let n=p.basename(t.filePath),r=(0,C.jsx)(M.vq,{icon:et(t.filePath)});return(0,C.jsx)(G.E,{textValue:n,inOverflowMenu:(0,C.jsx)(K._,{content:n,icon:r}),children:(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:t.filePath}),children:(0,C.jsx)(U.X,{icon:r,title:(0,C.jsx)(tm,{filepath:t.filePath,children:n}),closeButton:(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Close. Alt-Click to Close Others"}),children:(0,C.jsx)($.W,{onPress:n=>{n.altKey?h.current.closeOthersTabs(e.indexOf(t)):h.current.closePath(t.filePath)}})}),containerProps:{onDoubleClick:()=>{s?.perform()}}})})},t.filePath)}})}),"string"==typeof c?(0,C.jsx)(t0,{height:"100%",path:d,options:{contextmenu:!1},onMount:(e,t)=>{var r;e.focus(),e.onContextMenu(e=>{e.event.preventDefault(),Promise.resolve().then(()=>{a(e)})}),e.onDidScrollChange(()=>{a(null)}),(r=t).languages.typescript.typescriptDefaults.setCompilerOptions({jsx:Y.Mj.typescript.JsxEmit.React}),r.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),n.current=e,e.onDidChangeCursorPosition(e=>{l(e.position)}),e.onDidChangeModel(()=>{})},onChange:y,value:c??""}):c&&"UNSUPPORTED CONTENT"]}):(0,C.jsx)(tb,{}),u&&(0,C.jsx)(ne,{}),o&&(0,C.jsx)(Q.Z,{origin:o.event.browserEvent,onClose:()=>a(null),children:(0,C.jsx)(t8,{})})]})}})};function t8(){let e=(0,q.y)("EditorPopupMenu");return e?(0,C.jsx)(z.d,{actionGroup:e,children:e=>(0,C.jsx)(L.v2,{autoFocus:!0,...e})}):null}let t9=I.zo.div`
  position: relative;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: ${e=>{let{theme:t}=e;return t.color("Editor.background",t.isUnderDarcula()?"rgb(40,40,40)":t.commonColors.panelBackground)}};
`,ne=(0,I.zo)(b)`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`;t3.__docgenInfo={description:"Used as main content in the main ToolWindows. Shows currently opened files tabs and the editor.\n\nTODO: preserve editor state when switching between tabs\nTODO: support multiple editors in split view.",methods:[],displayName:"FileEditor"};var nt=n("45630"),nn=n("59683"),nr=n("29902");let ni=()=>(0,g.useMemo)(()=>({theme:{background:"rgb(43,43,43)",selection:"#214283"},fontFamily:"sans-serif",letterSpacing:-8,fontSize:12,lineHeight:1.3,cursorStyle:"block",cursorBlink:!0,cursorWidth:8,rendererType:"dom"}),[]),no=(0,v.ZP)(nr.O).withConfig({displayName:"Terminal__StyledXterm",componentId:"sc-19jke66-0"})(["height:100%;background:rgb(43,43,43);"]),na=()=>{let[e,t]=(0,g.useState)(""),n=(0,g.useRef)(null),r=ni();return(0,g.useEffect)(()=>{setTimeout(()=>{n.current?.terminal.resize(80,10),n.current?.terminal.write("$ ")},3e3)},[]),(0,C.jsx)(no,{ref:n,options:r,onData:r=>{let i=r.charCodeAt(0);if(13===i)e.length>0&&n.current?.terminal.write("\r\nYou typed: '"+e+"'"),n.current?.terminal.write("\r\n"+"$ "),t("");else{if(i<32||127===i)return;n.current?.terminal.write(r),t(e+r)}}})};na.__docgenInfo={description:"",methods:[],displayName:"Terminal"};var ns=n("96730"),nl=n("19295");let nc=(0,Z.cn)(!0),nd=(0,ei.qs)(e=>new Set(e(tt).flatMap(e=>{let{dir:t}=e;return er(t).concat(t)}).concat(e(eH).path))),nu=(0,Z.cn)(new Set([])),nh=(0,Z.cn)(async e=>{let t=e(nu),n=(await e(nm)).byKey;return[..."all"===t?n.keys():t].map(e=>n.get(`${e}`)).filter(eN.N)}),np=(0,Z.cn)(g.createRef()),nm=(0,Z.cn)(e=>nf(e(eH),e));function ng(e){e.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)}async function nf(e,t){let n=await t(eD(e.path)),r=new Map,i=e=>async n=>{let o={...n,parent:e};if("dir"===n.type){if(eM(n)){let e={...o,children:[]};return e.children=(await Promise.all((await t(eD(n.path))??[]).map(i(e)))).filter(eN.N),ng(e.children),r.set(e.path,e),e}return null}return r.set(o.path,o),o},o=(await Promise.all((n||[]).map(i(null)))).filter(eN.N);ng(o);let a={type:"project",path:e.path,name:e.name,parent:null,children:o};return r.set(a.path,a),{root:a,byKey:r}}(0,Z.cn)("name");let nA=(e,t,n)=>{let r=e(nd);t(nd,new Set([...r,...[e(eH).path].concat(er(n))]))},nx=(e,t,n)=>{let r=e(np)?.current;r?.replaceSelection(n),r?.focus(n)},ny=()=>{let e=(0,eT.lV)(nA),t=(0,eT.lV)(nx);return n=>{e(n),t(n)}};var nj=n("76164"),nv=n("3414"),nw=n("38626"),nC=n("12550"),nb=n("10463"),nE=n("88710"),nS=n("39985");let nD="NewElement",nI="CopyReferencePopupGroup";function nk(e){let{getActionContext:t}=e;return(0,C.jsx)(nE.C,{"aria-label":"Project Tree actions",actionContext:t,actions:[{...(0,B.BH)(nD),title:"New",shortcut:void 0},new nS.P,(0,B.BH)(ty.$.CUT),(0,B.BH)(ty.$.COPY),(0,B.BH)(nI),(0,B.BH)(ty.$.PASTE),new nS.P,(0,B.BH)(ty.$.DELETE),new nS.P].filter(eN.N)})}nk.__docgenInfo={description:"",methods:[],displayName:"ProjectViewContextMenu",props:{getActionContext:{required:!0,tsType:{name:"signature",type:"function",raw:"() => ActionContext",signature:{arguments:[],return:{name:"ActionContext"}}},description:""}}};let nT=e=>{let t=new WeakMap;return n=>{let r=t.get(n);return void 0===r&&(r=e(n),t.set(n,r)),r}},nP=nT(e=>{let t=(0,ei.Wg)(e,e=>e);return(0,Z.cn)(n=>n(t)??n(e))}),nB=nT(e=>(0,ei.Wg)(e,e=>e??null)),nR=()=>{let e=(0,D.Dv)(eH),t=tz(),n=(0,g.useRef)(null),r=(0,D.b9)(np);(0,g.useLayoutEffect)(()=>{r(n)},[n]);let i=(0,D.Dv)(nP(nm)),[o,a]=(0,D.KO)(nd),[s,l]=(0,D.KO)(nu),c=(0,D.KO)(nc)?(0,nb.Z)(e=>"dir"===e.type?1:2):eL.Z,d=ez("all"===s?[]:[...s].filter(e=>"string"==typeof e)),u=(0,g.useRef)(null),h=(0,g.useRef)(),p=()=>({element:u.current?.querySelector(`[data-key="${h.current}"]`)??null,event:null});return(0,C.jsx)(S,{children:i.root&&(0,C.jsx)(F.X,{ref:u,style:{height:"100%"},onOpen:e=>{let{target:t}=e;return h.current=t?.closest("[data-key]")?.dataset.key},renderMenu:()=>(0,C.jsx)(nk,{getActionContext:p}),children:(0,C.jsx)(nj.b,{"aria-label":"Project structure tree",treeRef:n,...d,items:[i.root],onAction:e=>{t.openPath(`${e}`)},fillAvailableSpace:!0,autoFocus:!0,selectionMode:"multiple",selectedKeys:s,onSelectionChange:l,expandedKeys:o,onExpandedChange:a,children:t=>(0,C.jsx)(O.c,{textValue:t.name,childItems:"children"in t?c(t.children):void 0,children:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)(n_,{node:t}),"project"===t.type?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("b",{children:(0,C.jsx)(nw.J,{})}),(0,C.jsx)(nv.e.Hint,{children:e.path})]}):(0,C.jsx)(nN,{node:t})]})},t.path)})})})},nN=e=>{let{node:t}=e;return"dir"===t.type?(0,C.jsx)(nF,{node:t}):(0,C.jsx)(nL,{node:t})},nF=e=>{let{}=e;return(0,C.jsx)(nw.J,{})},nL=e=>{let{node:t}=e,n=(0,g.useContext)(nC.k);return n?.isSelected&&n?.isContainerFocused?(0,C.jsx)(nw.J,{}):(0,C.jsx)(tm,{filepath:t.path,children:(0,C.jsx)(nw.J,{})})},nO={project:"nodes/folder",dir:X,file:J};function n_(e){let{node:t}=e,n="file"===t.type?et(t.name):nO[t.type]??null;return(0,C.jsx)(C.Fragment,{children:n&&(0,C.jsx)(M.vq,{icon:n})})}nR.__docgenInfo={description:"",methods:[],displayName:"ProjectViewPane"};var nM=n("66899"),nG=n("22188"),nK=n("39060"),nH=n("44233"),nV=n("39");function nU(e){let{tooltip:t="Show help contents",...n}=e;return(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(nV.k,{helpText:t}),children:(0,C.jsx)(nH.z,{variant:"icon","aria-label":"Help","aria-description":"Show help contents",...n,children:(0,C.jsx)("span",{style:{fontSize:18},children:"?"})})})}function n$(e,t){return void 0===t&&(t=eL.Z),e.filter(n=>{let r=t(n);return!e.find(e=>{var i;return e!==n&&(i=t(e),r.startsWith(i+m().sep))})})}nU.__docgenInfo={description:"",methods:[],displayName:"HelpButton",props:{tooltip:{defaultValue:{value:'"Show help contents"',computed:!1},required:!1,tsType:{name:"string"},description:""}}};let nQ=async(e,t,n)=>{try{await r.promises.unlink(n);let i=await e(tn(n));i&&(await f.ZP.remove({fs:r,dir:i,filepath:m().relative(i,n)}),await tl(e,t,n))}catch(e){console.error(`error in deleting file ${n}`,e)}finally{e(tq).closePath(n),t(eD(m().dirname(n))),t(ek(n))}},nq=async(e,t,n)=>Promise.all(n.map(n=>nQ(e,t,n))),nz=async(e,t,n)=>{let i=async o=>{let a=await r.promises.readdir(o);await Promise.all(a.map(async n=>{let a=m().resolve(o,n),s=await r.promises.stat(a);s.isFile()?await nQ(e,t,a):s.isDirectory()&&await i(a)})),await r.promises.rmdir(o),t(eD(n))};try{await i(n)}catch(e){console.error(`error in deleting directory ${n}`,e)}finally{t(eD(m().dirname(n)))}},nW=async(e,t,n,i)=>{let o=m().join(n,i);if(await ej(r.promises,m().dirname(o)),await r.promises.exists(o))throw Error(`File ${o} already exists`);await r.promises.writeFile(o,"","utf-8"),t(ek(o)),e(tq).openPath(o),await tl(e,t,o),t(eD(n))},nY=async(e,t,n,i)=>{let o=m().join(n,i);if(await r.promises.exists(o))throw Error(`File ${o} already exists`);await ej(r.promises,o),t(eD(n))};var nZ=n("42133");let nJ=e=>"object"==typeof e&&null!==e&&"read"in e,nX=e=>{let{isSearchable:t,isDisabled:n,actionPerformed:r,...i}=e,o=nJ(n)?(0,ei.Wg)(n,()=>!0):n,a=nJ(t)?(0,ei.Wg)(t,()=>!1):t;return(0,Z.cn)((e,t)=>{let{setSelf:n}=t,r=t=>nJ(t)?e(t):t;return{...i,isDisabled:r(o),isSearchable:r(a),actionPerformed:n}},async function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return r({get:e,set:t},...i)})},n0=new nZ.C(`{count, plural,
    =1 {1 file}
    other {# files}
  }`,"en-US"),n1=new nZ.C(`{count, plural,
    =1 {1 directory}
    other {# directories}
  }`,"en-US"),n2=nX({id:ty.$.DELETE,title:"Delete",description:"Delete selected item",isDisabled:(0,Z.cn)(e=>!e(eq)),actionPerformed:async e=>{let{get:t,set:n}=e,r=await t(nh),i=t(eY).current,o=t(eZ).current;if(0===r.length)return;let a=n$(r,e=>e.path),s=a.filter(e=>"file"===e.type).map(e=>e.path),l=a.filter(e=>"project"===e.type||"dir"===e.type).map(e=>e.path);if(l.length>0){let e=1===l.length&&0===s.length?m().basename(l[0]):null;await o?.confirm({title:"Delete",okText:"Delete",message:C.jsxs("div",{style:{width:354},children:["Delete"," ",e?`"${e}"`:[{count:l.length,message:n1},{count:s.length,message:n0}].filter(e=>{let{count:t}=e;return t>0}).map(e=>{let{message:t,count:n}=e;return t.format({count:n})}).join(" and "),"?",C.jsx("br",{}),"All files and subdirectories in",e?` "${e}" `:" the selected directories ","will be deleted. ",C.jsx("br",{}),"You might not be able to fully undo this operation!"]})})&&await Promise.all([...l.map(e=>nz(t,n,e)),nq(t,n,s)])}else i?.open(e=>{let{close:t}=e;return C.jsx(n5,{filePaths:s,close:t})}).then(e=>{e&&requestAnimationFrame(()=>{nq(t,n,s)})})}});function n5(e){let{close:t,filePaths:n}=e;return(0,C.jsx)(nM.Du,{minWidth:"content",minHeight:"content",children:(0,C.jsx)(nG.b,{header:"Delete",content:(0,C.jsxs)("form",{id:"delete_dialog_form",onSubmit:e=>{e.preventDefault()},style:{padding:"0.75rem 1rem"},children:[(0,C.jsxs)("div",{style:{marginBottom:".5rem"},children:[1===n.length?`Delete file "${m().basename(n[0])}"`:`Delete ${n.length} files`,"?"]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[(0,C.jsx)(nK.X,{isDisabled:!0,children:"Safe delete (with usage search)"}),(0,C.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,C.jsx)(nK.X,{isDisabled:!0,children:"Search in comments and strings"}),(0,C.jsx)(nK.X,{isDisabled:!0,children:"Search for text occurrences"})]})]})]}),footer:(0,C.jsx)(nG.b.Footer,{left:(0,C.jsx)(nU,{onPress:()=>tx()}),right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nH.z,{onPress:()=>t(),children:"Cancel"}),(0,C.jsx)(nH.z,{autoFocus:!0,type:"submit",form:"delete_dialog_form",variant:"default",onPress:()=>{t(!0)},children:"Ok"})]})})})})}let n6=nX({id:ty.$.COPY,title:"Copy",description:"Copy to clipboard",icon:(0,C.jsx)(M.vq,{icon:"actions/copy"}),isDisabled:(0,Z.cn)(e=>!e(eq)),actionPerformed:async()=>{tx()}}),n4=nX({id:ty.$.CUT,title:"Cut",description:"Cut to clipboard",icon:(0,C.jsx)(M.vq,{icon:"actions/menu-cut"}),isDisabled:(0,Z.cn)(e=>!e(eq)),actionPerformed:async()=>{tx()}}),n7=nX({id:ty.$.PASTE,title:"Paste",description:"Paste from clipboard",icon:(0,C.jsx)(M.vq,{icon:"actions/menu-paste"}),isDisabled:(0,Z.cn)(e=>!e(eq)),actionPerformed:async()=>{tx()}}),{SELECT_IN_PROJECT_VIEW:n3}={SELECT_IN_PROJECT_VIEW:"SelectInProjectView"};function n8(){let e=(0,D.Dv)(np),t=(0,ns.x)({treeRef:e}),n=function(){let e=(0,D.Dv)(t_),t=ny();return[{id:n3,title:"Select Opened File",icon:(0,C.jsx)(M.vq,{icon:"general/locate"}),actionPerformed:()=>{e&&t(e.filePath)},isDisabled:!e,description:"Selects a context file in the Project View"},(0,D.Dv)(n2),(0,D.Dv)(n4),(0,D.Dv)(n6),(0,D.Dv)(n7)].filter(eN.N)}();return(0,C.jsx)(nn.n,{headerContent:"Project",actions:[...t,...n],additionalActions:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nl.K,{actionId:n3}),(0,C.jsx)(nl.K,{actionId:ty.$.EXPAND_ALL}),(0,C.jsx)(nl.K,{actionId:ty.$.COLLAPSE_ALL})]}),children:(0,C.jsx)(nR,{})})}n8.__docgenInfo={description:"",methods:[],displayName:"ProjectToolWindow"};var n9=n("87508"),re=n("98454"),rt=n("79926"),rn=n("89639");function rr(e){let{children:t}=e,[n,r]=(0,g.useState)(!1);return((0,g.useEffect)(()=>{let e=setTimeout(()=>{r(!0)},500);return()=>clearTimeout(e)},[]),n)?(0,C.jsx)(C.Fragment,{children:t}):null}rr.__docgenInfo={description:"",methods:[],displayName:"Delayed",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};var ri=n("61262");let ro=e=>e;function ra(e,t){return t?e?e.path!==t.path?(0,p.dirname)(e.path)===(0,p.dirname)(t.path)?ro({type:"RENAMED",before:e,after:t}):ro({type:"MOVED",before:e,after:t}):ro({type:"MODIFIED",before:e,after:t}):ro({type:"ADDED",after:t}):ro({type:"DELETED",before:e})}ra.Unversioned=e=>ro({type:"UNVERSIONED",after:e});let rs={ADDED:"ADDED",DELETED:"DELETED",MOVED:"MODIFIED",RENAMED:"MODIFIED",MODIFIED:"MODIFIED",UNVERSIONED:"UNKNOWN"};function rl(e,t){return e?.path===t?.path&&e.isDir===t.isDir}ra.fileStatus=function(e){return rs[e.type]??"NOT_CHANGED"},ra.path=function(e){return ra.revision(e).path},ra.content=function(e){return"after"in e?e.after.content():"before"in e?e.before.content():Promise.resolve("")},ra.isAddition=function(e){return"ADDED"===e.type},ra.isDeletion=function(e){return"DELETED"===e.type},ra.isRename=function(e){return"RENAMED"===e.type},ra.isMove=function(e){return"MOVED"===e.type},ra.isModified=function(e){return"MODIFIED"===e.type},ra.isUnversioned=function(e){return"UNVERSIONED"===e.type},ra.revision=function(e){return"after"in e?e.after:e.before},ra.equals=function(e,t){let n="before"in e&&"before"in t?rl(e.before,t.before):"before"in e=="before"in t,r="after"in e&&"after"in t?rl(e.after,t.after):"after"in e=="after"in t;return n&&r};let rc=(0,ei.xu)(e=>(0,Z.cn)(t=>Object.entries(t(ti(e))).map(t=>{let[n,r]=t,i={path:m().join(e,n),isDir:!1,content(){throw Error("Not implemented")}};return"ADDED"===r?ra(null,i):"MODIFIED"===r?ra(i,i):"DELETED"===r?ra(i,null):"UNKNOWN"===r?ra.Unversioned(i):null}).filter(eN.N))),rd=(0,Z.cn)(e=>e(tt).map(t=>{let{dir:n}=t;return e(rc(n))}).flat()),ru=async(e,t,n,i)=>{let o=eI(e,t),a=(await Promise.all(n.filter(e=>!ra.revision(e).isDir).map(async t=>{let n=await e(tn(ra.path(t)));if(n)return{repoRoot:n,change:t,relativePath:m().relative(n,ra.path(t))}}))).filter(eN.N),s=(0,ri.Z)(e=>{let{repoRoot:t}=e;return t},a);await Promise.all(Object.entries(s).map(async a=>{let[s,l]=a,{toReset:c=[],toCheckout:d=[]}=(0,ri.Z)(e=>{let{change:{type:t}}=e;return"ADDED"!==t||i?"toCheckout":"toReset"},l);if(await Promise.allSettled(c.map(e=>{let{relativePath:t}=e;return(0,f.us)({fs:r,dir:s,filepath:t})})),d.length>0&&(await f.ZP.resolveRef({fs:r,dir:s,ref:"HEAD"}).catch(()=>null)?await (0,f.JE)({fs:r,dir:s,force:!0,filepaths:d.map(e=>{let{relativePath:t,change:{type:n}}=e;return t})}):await Promise.all(d.filter(e=>{let{change:t}=e;return"ADDED"===t.type}).map(e=>{let{change:t}=e,n=ra.path(t);return r.promises.unlink(n)}))),i){let t=e(tq);n.filter(ra.isAddition).forEach(e=>{t.closePath(ra.path(e))})}n$(l.flatMap(e=>{let{change:t}=e;return"MODIFIED"===t.type?[]:"MOVED"===t.type?[t.before.path,t.after.path]:ra.path(t)})).map(m().dirname).forEach(e=>t(eD(e))),await Promise.allSettled(l.map(async n=>{let{relativePath:i,change:a}=n,l=ra.path(a);await o(l),await (0,f.us)({fs:r,dir:s,filepath:i}),await tl(e,t,l)}))}))},rh=()=>(0,eT.lV)(ru),rp=(0,Z.cn)([{id:"some-UUID",name:"Changes",comment:"last modified commit message",changes:[],active:!0},{id:"some-other-UUID",name:"Some other changelist",comment:"Some empty changelist for testing",changes:[],active:!1}]),rm=(0,Z.cn)(e=>e(rp).find(e=>e.active)??null),rg=(0,Z.cn)(e=>e(rd).filter(ra.isUnversioned)),rf=()=>(0,eT.lV)((0,g.useCallback)((e,t,n)=>{let r=e(rp),i=r.find(e=>{let{id:t}=e;return t===n});i&&t(rp,r.map(e=>({...e,active:e===i})))},[]));function rA(){let e=(0,D.Dv)(rd),t=(0,D.b9)(rp);return(0,g.useEffect)(()=>{t(t=>{let n=e.filter(e=>!ra.isUnversioned(e)),r=t.map(e=>({...e,changes:e.changes.map(e=>n.find(t=>ra.equals(t,e))).filter(eN.N)})),i=r.flatMap(e=>{let{changes:t}=e;return t}),o=n.filter(e=>!i.find(t=>ra.equals(e,t)));return(r.find(e=>{let{active:t}=e;return t})??r[0]).changes.push(...o),r})},[e]),null}var rx=n("20619");let ry=e=>{let{getPath:t,mapNode:n=eL.Z,createDirectoryNode:r=e=>e,shouldCollapseDirectories:i=!1}=e;return e=>{let o={},a=e.map(n).map(e=>{let n=t(e);return er(n.startsWith("/")?n:`/${n}`).reduce((e,t)=>{o[t]||(o[t]=r({type:"directory",dirPath:t,parentNodePath:"",children:[]})),rj(e)&&(e.parentNodePath=t);let n=o[t];return n.children=n.children.includes(e)?n.children:[e,...n.children],n},e)}),s=(0,rx.Z)(a);return i?s.map(e=>(function e(t,n){let{children:r,dirPath:i,parentNodePath:o}=n;return 1===n.children.length&&rj(n.children[0])?(i=n.children[0].dirPath,r=n.children[0].children.map(n=>rj(n)?e(t,{...n,parentNodePath:i}):n),e(t,t({type:"directory",dirPath:i,parentNodePath:o,children:r}))):{...n,children:r.map(n=>rj(n)?e(t,n):n)}})(r,e)):s}};function rj(e){return"type"in e&&"directory"===e.type}let rv={ROLLBACK:"ChangesView.Revert",REFRESH:"ChangesView.Refresh",SHELVE_SILENTLY:"ChangesView.ShelveSilently",SHELVE:"ChangesView.Shelve",UNSHELVE_SILENTLY:"ChangesView.UnshelveSilently",NEW_CHANGELIST:"ChangesView.NewChangeList",ADD_UNVERSIONED:"ChangesView.AddUnversioned",RENAME_CHANGELIST:"ChangesView.Rename",REMOVE_CHANGELIST:"ChangesView.RemoveChangeList",SET_DEFAULT_CHANGELIST:"ChangesView.SetDefault",MOVE_TO_ANOTHER_CHANGELIST:"ChangesView.Move",SHOW_DIFF:"Diff.ShowDiff",CHECKIN_FILES:"CheckinFiles",CHECKIN_PROJECT:"CheckinProject",JUMP_TO_SOURCE:ty.$.EDIT_SOURCE,GROUP_CHANGES_VIEW_POPUP_MENU:"ChangesViewPopupMenu",GROUP_BY_DIRECTORY:"ChangesView.GroupBy.Directory",GIT_ADD:"Git.Add",GIT_INIT:"Git.Init",GIT_CLONE:"Git.Clone",GIT_CREATE_NEW_BRANCH:"Git.CreateNewBranch",GIT_BRANCHES:"Git.Branches",GIT_LOG_HIDE_BRANCHES:"Git.Log.Hide.Branches",GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH:"Git.Log.Branches.Navigate.Log.To.Selected.Branch",GIT_UPDATE_SELECTED:"Git.Update.Selected",FOCUS_TEXT_FILTER:"Vcs.Log.FocusTextFilter",MATCH_CASE:"Vcs.Log.MatchCaseAction",REG_EXP:"Vcs.Log.EnableFilterByRegexAction",COPY_REVISION_NUMBER:"Vcs.CopyRevisionNumberAction",LOG_REFRESH:"Vcs.Log.Refresh",SHOW_DETAILS:"Vcs.Log.ShowDetailsAction",SHOW_DIFF_PREVIEW:"Vcs.Log.ShowDiffPreview",PRESENTATION_SETTINGS:"Vcs.PresentationSettings",FILE_HISTORY_PRESENTATION_SETTINGS:"Vcs.FileHistory.PresentationSettings",CopyPathFromRepositoryRootProvider:"CopyPathFromRepositoryRootProvider"},rw=(e,t)=>`${e}_${t}`,rC=e=>rw("change",ra.path(e)),rb=function(e,t){return void 0===t&&(t=!0),{type:"change",key:rC(e),change:e,showPath:t}},rE=e=>"children"in e,rS=e=>"change"===e.type,rD=e=>rE(e)?e.children:null,rI={id:"repository",title:"Repository",isAvailable:(0,Z.cn)(e=>e(tt).length>1),groupFn:(0,Z.cn)(e=>t=>e(tt).map(e=>{var n;return void 0===(n=t.filter(t=>ra.path(t.change)?.startsWith(e.dir)))&&(n=[]),{type:"repo",key:rw("repo",e.dir),repository:e,children:n}}))},rk={id:"directory",title:"Directory",isAvailable:!0,useShortcutOf:rv.GROUP_BY_DIRECTORY,groupFn:ry({shouldCollapseDirectories:!0,createDirectoryNode:e=>{var t,n;let{dirPath:r,parentNodePath:i,children:o}=e;return void 0===(t=o)&&(t=[]),void 0===n&&(n=""),{type:"directory",key:n+rw("directory",r),dirPath:r,parentNodePath:i,children:t}},mapNode:e=>rb(e.change,!1),getPath:e=>ra.path(e.change)})},rT=[rI,rk],rP=(0,Z.cn)(e=>rT.filter(t=>nJ(t.isAvailable)?e(t.isAvailable):t.isAvailable)),rB=(e,t)=>{if(0===e.length||0===t.length)return t;let n=e.slice(1),r=t.filter(rS),i=t.filter(rE),o=e[0](r);return[...i,...o].forEach(e=>{e.children=rB(n,e.children)}),o.filter(e=>e.children.length>0)},rR=e=>{let{get:t,isActive:n,groupings:r}=e;return e=>{let i=e=>nJ(e)?t(e):e,o=r.filter(e=>{let{id:t,isAvailable:r}=e;return i(r)&&i(n(t))}).map(e=>{let{groupFn:t}=e;return i(t)}).map(t=>e?function(){return t(...arguments).map(t=>({...t,key:`${e}:${t.key}`}))}:t);return e=>rB(o,e)}};var rN=n("64374"),rF=n("69611"),rL=n("66095");let rO=(0,Z.cn)(!1),r_=(0,Z.cn)({height:500}),rM=(0,Z.cn)([]),rG=(0,Z.cn)(e=>{let t=e(rM),{rootNodes:n}=e(r6),r=n.filter(e=>"changelist"===e.type&&t.some(t=>e.changeList.changes.includes(t)));return 0===r.length?n.filter(e=>"changelist"===e.type&&e.changeList.active):r}),rK=(0,Z.cn)(e=>{let t=e(rM),n=e(rG),r=(0,rN.Bp)(e=>rE(e)?e.children:null,e=>e.key,n,t.map(rC));return new Set(r.length?r:(0,rN.Om)(e=>rE(e)?e.children:null,e=>e.key,n))});function rH(e){let t=new Map,n=new Map,r=new Set;return(0,rN.Ck)(rD,(e,i)=>{if(n.set(e.key,e),"children"in e&&r.add(e.key),!i)return 1;let o=i.reduce((e,t)=>e+t,0);return t.set(e.key,o),o},e),{rootNodes:e,fileCountsMap:t,byKey:n,expandAllKeys:r}}let rV=e=>({type:"changelist",key:rw("changelist",e.id),changeList:e,children:e.changes.map(e=>rb(e))}),rU=(0,Z.cn)(!1),r$=(0,Z.cn)(!1),rQ=(0,ei.xu)(e=>(0,Z.cn)(!0)),rq=(0,Z.cn)(new Set([])),rz=(0,Z.cn)(e=>{let t=e(rq);if("all"===t){let{rootNodes:t}=e(r6);return new Set((0,rN.eA)(e=>"children"in e?e.children:[],(e,t)=>{let n=t??[];return n.push(e),n},t).flat().map(e=>e.key))}return t}),rW=(0,Z.cn)(e=>{let t=e(rz),{byKey:n}=e(r6);return new Set([...t].map(e=>n.get(e)).filter(eN.N))}),rY=(0,Z.cn)(e=>{let t=e(rW),n=new Set,r=e=>{e&&("change"===e.type&&n.add(e.change),rE(e)&&e.children.forEach(r))};return t.forEach(r),n}),rZ=(0,Z.cn)(e=>{let t=e(rW),n=e(rp),r=new Set,i=e=>{if(e){if("changelist"===e.type&&r.add(e.changeList),"change"===e.type){let t=n.find(t=>t.changes.includes(e.change));t&&r.add(t)}rE(e)&&e.children.forEach(i)}};return t.forEach(i),r}),rJ=(0,Z.cn)(new Set([])),rX=(0,Z.cn)(e=>{let t=e(rJ);return e(rd).filter(e=>t.has(rC(e)))}),r0=(0,Z.cn)((e,t)=>{let{setSelf:n}=t,{rootNodes:r}=e(r6),i=e(rJ);return new rF.f({items:i,...(0,rL.y)(n)},{rootNodes:r,getChildren:e=>rE(e)?e.children:null,getKey:e=>e.key})},(e,t,n)=>{t(rJ,n)}),r1=(0,ei.qs)(e=>new Set(e(r6).rootNodes.map(e=>[e.key,...e.children.map(e=>e.key)]).flat())),r2=(0,Z.cn)(e=>e(rP).map(t=>({...t,isActive:e(rQ(t.id))}))),r5=(e,t)=>({...e,children:t(e.children)}),r6=(0,Z.cn)(e=>{let t=(0,nb.Z)(e=>{let{active:t}=e;return!t},e(rp)).map(rV),n=rR({get:e,groupings:rT,isActive:rQ}),r=e(rg),i=t.map(e=>r5(e,n(e.key)));if(r.length>0){let e={key:"unversioned",type:"unversioned",children:r.map(e=>rb(e))};i.push(r5(e,n("unversioned")))}return rH(i)}),r4=(0,ei.xu)(e=>(0,Z.cn)("horizontal"===e?.4:.3)),r7=(0,Z.cn)(!1),r3=(0,Z.cn)(""),r8=(0,Z.cn)(""),r9=(0,Z.cn)(null),ie=(0,Z.cn)(e=>{let t=e(eQ);return e(rd).filter(e=>t.some(t=>ra.path(e).startsWith(t)))}),it=(e,t,n)=>{let r=(n?e(rd).filter(e=>n.some(t=>ra.path(e).startsWith(t))):e(ie)).map(rC);if(t(rJ,new Set(r)),r.length>0){let n=(0,rN.Bp)(e=>rE(e)?e.children:null,e=>e.key,e(r6).rootNodes,r);t(r1,e=>new Set([...e??new Set,...n])),t(rq,new Set([r[0]]))}},ir=function(e,t,n){void 0===n&&(n=!0);let r=e(eQ),i=e(rY);t(rM,(n&&r.length>0?e(ie):null)??[...i]),t(rO,!0)};var ii=n("50907"),io=n("51726");let ia=()=>0==[...(0,D.Dv)(rq)].length?null:(0,C.jsx)(nE.C,{"aria-label":"Changes actions",actions:[(0,B.BH)(rv.CHECKIN_FILES),(0,B.BH)(rv.ROLLBACK),(0,B.BH)(rv.JUMP_TO_SOURCE),new nS.P,(0,B.BH)(rv.SHELVE),new nS.P,(0,B.BH)(rv.NEW_CHANGELIST),(0,B.BH)(rv.RENAME_CHANGELIST),(0,B.BH)(rv.REMOVE_CHANGELIST),(0,B.BH)(rv.SET_DEFAULT_CHANGELIST),(0,B.BH)(rv.MOVE_TO_ANOTHER_CHANGELIST),new nS.P,(0,B.BH)(ty.$.REFRESH)].filter(eN.N)});ia.__docgenInfo={description:"",methods:[],displayName:"ChangesViewTreeContextMenu"};var is=n("84174");async function il(e,t){let n=await Promise.all(t.map(t=>e(t).catch(()=>!1)));return t.filter((e,t)=>n[t])}async function ic(e){let{fs:t,dir:n,localBranchName:r}=e,i=await f.ZP.getConfig({fs:t,dir:n,path:`branch.${r}.merge`}),o=await f.ZP.getConfig({fs:t,dir:n,path:`branch.${r}.remote`});return i&&o?`${o}/${i.replace(/^refs\/heads\//,"")}`:null}let id=(0,ei.xu)(e=>es(async t=>{let{}=t;return Promise.all((await f.ZP.listBranches({fs:r,dir:e})).map(async t=>({name:t,trackingBranch:await ic({fs:r,dir:e,localBranchName:t})})))})),iu=(0,ei.xu)(e=>es(async()=>{let t=await f.ZP.listRemotes({fs:r,dir:e});return(await Promise.all(t.map(t=>{let{remote:n}=t;return f.ZP.listBranches({fs:r,dir:e,remote:n}).then(e=>e.filter(e=>"HEAD"!==e).map(e=>({name:e,remote:n})))}))).flat()})),ih=(0,ei.xu)(e=>es(async t=>{let n=await t(ip(e)),r=await t(id(e));return 0===r.length&&n&&(r=r.concat({name:n,trackingBranch:null})),{repoRoot:e,currentBranch:r.find(e=>e.name===n)||null,localBranches:r,remoteBranches:await t(iu(e))}})),ip=(0,ei.xu)(e=>es(()=>f.ZP.currentBranch({fs:r,dir:e,fullname:!1}))),im=(0,Z.cn)(async e=>Promise.all(e(tt).map(t=>{let{dir:n}=t;return e(ih(n))}))),ig=(0,ei.xu)(e=>(0,Z.cn)(async t=>{let n=await t(tn(e)),r=n?await t(ih(n)):null;return console.log(`repo root for ${e}`,n,n&&r),n&&r?.currentBranch?.name||null})),iA=[{branchType:"LOCAL",branchName:"master"},{branchType:"REMOTE",branchName:"origin/master"}];function ix(e){return e?.map.entry.flatMap(e=>e?.value.list["branch-info"].map(t=>{let{"@source":n,"@repo":r}=t;return{branchType:e["@type"],branchName:n,repoRoot:r}}))||[]}function iy(e){return{map:{entry:Object.entries((0,ri.Z)(e=>{let{branchType:t}=e;return t},e)).map(e=>{let[t,n]=e;return{"@type":t,value:{list:{"branch-info":n.map(e=>({"@repo":e.repoRoot,"@source":e.branchName}))}}}})}}}let ij=eB.z.object({"branch-storage":eB.z.object({map:(s=eB.z.enum(["LOCAL","REMOTE"]),l=eB.z.object({list:e8(eB.z.object({"@repo":eB.z.string(),"@source":eB.z.string()}),"branch-info")}),eB.z.object({entry:e3(eB.z.object({"@type":s,value:l}))}))})}),iv=e1({branches:[],excludedBranches:[]},{schema:eB.z.object({"favorite-branches":ij.optional(),"exclude-from-favorite":ij.optional()}).optional(),componentName:"Git.Settings",read:e=>({branches:ix(e?.["favorite-branches"]?.["branch-storage"]),excludedBranches:ix(e?.["exclude-from-favorite"]?.["branch-storage"])}),write:(e,t)=>{let n={...t};return e.branches.length>0?n["favorite-branches"]={"branch-storage":iy(e.branches)}:delete n["favorite-branches"],e.excludedBranches.length>0?n["exclude-from-favorite"]={"branch-storage":iy(e.excludedBranches)}:delete n["exclude-from-favorite"],n}}),iw=(0,is.R)(iv,e=>e.prop("branches")),iC=(0,is.R)(iv,e=>e.prop("excludedBranches")),ib=(0,ei.xu)(e=>(0,Z.cn)(t=>iS(t(iw),t(iC),e)),eO.Z);function iE(e){return iA.some(t=>{let{branchType:n,branchName:r}=t;return r===e.branchName&&n===e.branchType})}let iS=(e,t,n)=>!!e.find((0,eO.Z)(n))||!t.find((0,eO.Z)(n))&&iE(n);function iD(){return(0,eT.lV)((0,g.useCallback)(function(e,t,n,r){void 0===r&&(r=!iS(e(iw),e(iC),n));let i=e=>e.filter(e=>!(0,eO.Z)(e,n)),o=e=>e.some((0,eO.Z)(n))?e:e.concat(n);r?(t(iC,i),iE(n)||t(iw,o)):(t(iw,i),iE(n)&&t(iC,o))},[]))}function iI(){let e=(0,D.Dv)(iw),t=(0,D.Dv)(iC);return{isFavorite:n=>iS(e,t,n),toggleFavorite:iD()}}let ik=e=>{let{repo:t}=e,n=(0,D.Dv)(ig(t.dir));return(0,C.jsx)(C.Fragment,{children:n})};ik.__docgenInfo={description:"",methods:[],displayName:"RepoCurrentBranchName",props:{repo:{required:!0,tsType:{name:"VcsDirectoryMapping"},description:""}}};let iT=I.zo.span`
  width: 14px;
  height: 14px;
  align-self: center;
  margin-right: 0.2rem;
  position: relative;

  //  after pseudo element is used to create the color mixing implemented here:
  //  https://github.com/JetBrains/intellij-community/blob/82f201386c3f7a339ff25fc8f3389024c8078a87/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/VcsLogColorManagerImpl.java#L60
  &&:after {
    content: "";
    position: absolute;
    inset: 0;
    opacity: 0.75;
    background: ${e=>{let{theme:t}=e;return t.color("Table.background")||(t.dark?"#3C3F41":"#fff")}};
  }
`,iP=e=>{let t=(0,D.Dv)(tt).findIndex(t=>t.dir===e),n=(0,v.Fg)(),r=[n.commonColors.red,n.commonColors.blue];return r[t%r.length]??r[0]},iB=g.forwardRef((e,t)=>{let{rootPath:n,...r}=e;return(0,C.jsx)(iT,{ref:t,...r,style:{...r.style,backgroundColor:iP(n)}})});iB.__docgenInfo={description:"",methods:[],displayName:"RepoColorIcon",props:{rootPath:{required:!0,tsType:{name:"string"},description:""}}};let iR=I.zo.span`
  display: inline-flex;
  align-self: center;
  height: 1.1rem;
  line-height: 1.1rem;
  padding: 0 0.25rem;

  background: ${e=>{let{theme:t}=e;return t.currentBackgroundAware(`color-mix(in srgb, ${t.color("VersionControl.Log.Commit.currentBranchBackground",t.dark?"rgb(63, 71, 73)":"rgb(228, 250, 255)")}, ${t.color("VersionControl.RefLabel.backgroundBase",t.dark?"#fff":"#000")} ${(t.value("VersionControl.RefLabel.backgroundBrightness")??.08)*100}%)`)}};
  color: ${e=>{let{theme:t}=e;return t.currentForegroundAware(t.color("VersionControl.RefLabel.foreground",t.dark?"#909090":"#7a7a7a"))}};
`,iN=new nZ.C(`{fileCount, plural,
    =0 {No files}
    =1 {1 file}
    other {# files}
  }`,"en-US");function iF(e){return iN.format({fileCount:e})}let iL=e=>{let{node:t}=e;return(0,C.jsx)(nv.e.Hint,{children:t.showPath&&m().dirname(ra.path(t.change))})},iO={repo:(e,t)=>{let{fileCount:n}=t;return{textValue:m().basename(e.repository.dir),rendered:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)(iB,{rootPath:e.repository.dir}),(0,C.jsx)(nw.J,{}),(0,C.jsx)(nv.e.Hint,{children:iF(n)}),(0,C.jsx)(iR,{children:(0,C.jsx)(ik,{repo:e.repository})})]})}},directory:(e,t)=>{let{fileCount:n}=t;return{textValue:e.parentNodePath?m().relative(e.parentNodePath,e.dirPath):e.dirPath,rendered:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)(M.vq,{icon:X}),(0,C.jsx)(nw.J,{}),(0,C.jsx)(nv.e.Hint,{children:iF(n)})]})}},change:e=>({textValue:m().basename(ra.path(e.change)),rendered:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)(M.vq,{icon:et(ra.path(e.change))}),(0,C.jsx)(tg,{status:ra.fileStatus(e.change),children:(0,C.jsx)(nw.J,{})}),ra.isRename(e.change)?` - renamed from ${m().basename(e.change.before.path)}`:ra.isMove(e.change)&&` - moved from ${m().relative(m().dirname(e.change.after.path),m().dirname(e.change.before.path)).replace(/(\.\.\/){2,}[!.]/g,"..")}/`,(0,C.jsx)(iL,{node:e})]})})},i_=(e,t)=>{let n={...iO,...t,...e},r=e=>{let{node:t,fileCountsMap:r}=e,{textValue:i,rendered:o}=(0,n[t.type])(t,{fileCount:r.get(t.key)||0,dirCount:0});return{key:t.key,childItems:rE(t)?t.children:[],hasChildItems:rE(t)&&t.children?.length>0,textValue:i,children:o}};return{getItemProps:r,getTextValue:(e,t)=>{let{fileCountsMap:r}=t;return(0,n[e.type])(e,{fileCount:r.get(e.key)||0,dirCount:0}).textValue},itemRenderer:e=>{let{fileCountsMap:t}=e;return e=>(0,C.jsx)(O.c,{...r({node:e,fileCountsMap:t})})}}};function iM(){let e=(0,D.Dv)(ta);return(0,C.jsx)(C.Fragment,{children:e&&(0,C.jsx)(rr,{children:", updating..."})})}let iG=i_({changelist:(e,t)=>{let{fileCount:n}=t;return{textValue:e.changeList.name,rendered:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)("span",{style:{fontWeight:e.changeList.active?"bold":void 0},children:(0,C.jsx)(nw.J,{})}),(0,C.jsxs)(nv.e.Hint,{children:[iF(n),(0,C.jsx)(iM,{})]})]})}},unversioned:(e,t)=>{let{fileCount:n}=t;return{textValue:"Unversioned Files",rendered:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)(nw.J,{}),(0,C.jsxs)(nv.e.Hint,{children:[iF(n),(0,C.jsx)(iM,{})]})]})}}}),iK=e=>{let{treeRef:t}=e,{rootNodes:n,fileCountsMap:r,byKey:i}=(0,D.Dv)(r6),[o,a]=(0,D.KO)(rq),[s,l]=(0,D.KO)(r1),c=(0,D.Dv)(r0),{openPath:d}=tz(),u=(0,eT.lV)((0,g.useCallback)((e,t,n)=>{let r=e(r6).byKey.get(n);return r?.type==="change"&&d(ra.path(r.change)),r},[])),h=ez("all"===o?[]:[...o].flatMap(e=>{let t=i.get(e);return t?function e(t){return t?.type==="directory"?[t.dirPath]:t?.type==="change"?[ra.path(t.change)]:rE(t)?t.children.flatMap(e):[]}(t):[]}));return(0,C.jsx)(F.X,{renderMenu:()=>(0,C.jsx)(ia,{}),style:{height:"100%"},children:(0,C.jsx)(ii.G,{"aria-label":"Commit changes tree",treeRef:t,items:n,selectionMode:"multiple",selectedKeys:o,expandedKeys:s,onExpandedChange:l,onSelectionChange:a,onAction:u,nestedSelection:c,fillAvailableSpace:!0,autoFocus:"first",...h,children:e=>{let t=iG.getItemProps({fileCountsMap:r,node:e});return(0,C.jsxs)(O.c,{...t,children:[e.children?.length!==0&&(0,C.jsx)(io.x,{selectionState:c.getSelectionState(e),onToggle:()=>c.toggle(e)}),t.children]})}})})};iK.__docgenInfo={description:"TODO: unversioned files\nTODO: show diff/source on double click (on action to be more precise)",methods:[],displayName:"ChangeViewTree",props:{treeRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"TreeRefValue"}],raw:"RefObject<TreeRefValue>"},description:""}}};var iH=n("15397"),iV=n("39664"),iU=n("51837");let i$=()=>{let e=[(0,B.BH)(rv.NEW_CHANGELIST),(0,B.BH)(rv.RENAME_CHANGELIST),(0,B.BH)(rv.REMOVE_CHANGELIST),(0,B.BH)(rv.SET_DEFAULT_CHANGELIST),(0,B.BH)(rv.MOVE_TO_ANOTHER_CHANGELIST)].filter(eN.N);return(0,C.jsx)(iV.p,{renderMenu:t=>{let{menuProps:n}=t;return(0,C.jsx)(nE.C,{actions:e,children:e=>(0,C.jsx)(iU.w,{...n,...e})})},children:(0,C.jsx)(M.vq,{icon:"vcs/changelist.svg"})})};i$.__docgenInfo={description:"",methods:[],displayName:"ChangeListsActionButton"};var iQ=n("83556"),iq=n("12152");function iz(e){let{groupings:t,onToggle:n}=e;return 1===t.length&&t[0].icon?(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:`Group By ${t[0].title}`}),children:(0,C.jsx)(iQ.hU,{isPressed:t[0].isActive,onPress:()=>n(t[0].id),children:t[0].icon})}):(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Group By"}),children:(0,C.jsx)(iV.p,{renderMenu:e=>{let{menuProps:r}=e;return(0,C.jsx)(L.v2,{...r,selectedKeys:t.filter(e=>{let{isActive:t}=e;return t}).map(e=>{let{id:t}=e;return t}),onAction:e=>{let r=t.find(t=>{let{id:n}=t;return n===e})?.id;r&&n(r)},children:(0,C.jsx)(iq.$,{title:"Group By",children:t.map(e=>{let{id:t,title:n}=e;return(0,C.jsx)(O.c,{children:n},t)})})})},children:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"})})})}iz.__docgenInfo={description:"",methods:[],displayName:"GroupByActionButton",props:{groupings:{required:!0,tsType:{name:"Array",elements:[{name:"Grouping",elements:[{name:"K"}],raw:"Grouping<K>"}],raw:"Array<Grouping<K>>"},description:""},onToggle:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: K) => void",signature:{arguments:[{name:"id",type:{name:"K"}}],return:{name:"void"}}},description:""}}};let iW=()=>{let e=(0,D.Dv)(r2),t=(0,eT.lV)((0,g.useCallback)((e,t,n)=>{t(rQ(n),e=>!e)},[]));return(0,C.jsx)(iz,{groupings:e,onToggle:t})};iW.__docgenInfo={description:"",methods:[],displayName:"ChangesGroupByActionButton"};let iY=()=>{let[e,t]=(0,D.KO)(r$),[n,r]=(0,D.KO)(rU),i={showRelatedFiles:e,showIgnoredFiles:n};return(0,C.jsx)(iV.p,{renderMenu:e=>{let{menuProps:n}=e;return(0,C.jsxs)(L.v2,{...n,selectedKeys:Object.keys(i).filter(e=>i[e]),onAction:e=>{switch(e){case"showIgnoredFiles":return r(e=>!e);case"showRelatedFiles":return t(e=>!e)}},children:[(0,C.jsx)(O.c,{children:"Show Ignored Files"},"showIgnoredFiles"),(0,C.jsx)(O.c,{children:"Show Files Related to Active Changelist"},"showRelatedFiles")]})},children:(0,C.jsx)(M.vq,{icon:"actions/show.svg"})})};function iZ(){return(0,C.jsxs)(iH.o,{border:"bottom",children:[(0,C.jsx)(nl.K,{actionId:ty.$.REFRESH}),(0,C.jsx)(nl.K,{actionId:rv.ROLLBACK}),(0,C.jsx)(nl.K,{actionId:rv.SHOW_DIFF}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Changelists"}),children:(0,C.jsx)(i$,{})}),(0,C.jsx)(nl.K,{actionId:rv.SHELVE_SILENTLY}),(0,C.jsx)(iH.J,{}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Group By"}),children:(0,C.jsx)(iW,{})}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"View Options"}),children:(0,C.jsx)(iY,{})}),(0,C.jsx)(nl.K,{actionId:ty.$.EXPAND_ALL}),(0,C.jsx)(nl.K,{actionId:ty.$.COLLAPSE_ALL})]})}async function iJ(e){let{updates:t,fs:n,dir:r,gitdir:i,...o}=e,a=await f.ZP.resolveRef({fs:n,dir:r,gitdir:i,ref:"HEAD"}),s=(await f.ZP.readTree({fs:n,dir:r,gitdir:i,oid:a})).tree,l=!1;if(await Promise.all(Object.entries(t).map(async e=>{let[t,o]=e,a=s.findIndex(e=>{let{path:n}=e;return n===t});if(null==o){a>-1&&(l=!0,s.splice(a,1));return}let c=s[a],d=await f.ZP.writeBlob({fs:n,dir:r,gitdir:i,blob:o});c?c.oid=d:s.push({type:"blob",mode:"100644",oid:d,path:t}),l=!0})),!l)throw Error("Nothing to commit!");let c=await f.ZP.writeTree({fs:n,dir:r,gitdir:i,tree:s}),d=await f.ZP.commit({...o,fs:n,dir:r,gitdir:i,tree:c});await Promise.all(Object.keys(t).map(e=>f.ZP.resetIndex({fs:n,dir:r,gitdir:i,filepath:e,ref:d})))}iY.__docgenInfo={description:"",methods:[],displayName:"ViewOptionsActionButton"},iZ.__docgenInfo={description:"",methods:[],displayName:"ChangesViewToolbar"};var iX=n("76680");let i0=(0,Z.cn)([]),i1=(0,Z.cn)(e=>e(i0)[0]),i2=(0,Z.cn)(e=>e(i0).length),i5=0,i6=()=>{let e=(0,D.b9)(i0);return(0,iX.$)((t,n)=>{let{title:r,isCancelable:i=!1}=t,o=new ef.qf.cancelToken,a=++i5;e(e=>[...e,{id:i5++,title:r,abortController:o,isCancelable:i,progress:{fraction:0,text:"",secondaryText:"",isIndeterminate:!1}}]);let s=t=>{e(e=>e.map(e=>e.id===a?{...e,progress:{...e.progress,...t}}:e))},l="function"==typeof n?{run:n}:n;return Promise.resolve(l.run({setFraction(e){s({fraction:e})},setText(e){s({text:e})},setSecondaryText(e){s({secondaryText:e})},setIndeterminate(e){s({isIndeterminate:e})}},o.signal)).finally(()=>{e(e=>e.filter(e=>e.id!==a)),l.onFinished?.()}),a})},i4=()=>(0,eT.lV)((0,g.useCallback)((e,t,n)=>{let r=e(i0).find(e=>e.id===n);r&&r.abortController.abort()},[])),i7=(0,ei.xu)(e=>{let{repoRoot:t,ref:n}=e;return es(()=>f.ZP.resolveRef({fs:r,dir:t,ref:n,depth:3}))},eO.Z);var i3=n("53783"),i8=n("13302");let i9=e=>`${e.getMonth()+1}/${e.getDate()}/${e.getFullYear().toString().slice(-2)}`,oe=e=>e.from&&e.to?`Between ${i9(e.from)} and ${i9(e.to)}`:e.from?`since ${i9(e.from)}`:e.to?`until ${i9(e.to)}`:"",ot=(0,Z.cn)(["MAIN"]),on=(0,Z.cn)("MAIN"),or=(0,ei.xu)(e=>(0,Z.cn)(t=>{let n=t(oc.searchQuery(e)),r=t(oc.user(e)),i=t(oc.date(e)),o=t(oc.branch(e)),a=[];return o?.length>0&&a.push({short:o.join(", "),long:`on ${o.join(", ")}`}),i&&a.push({short:oe(i),long:`made ${oe(i)}`}),n&&a.push({short:`'${n}'`,long:`containing '${n}'`}),r&&a.push({short:r,long:`by ${r}`}),`Log${a.length>0?": ":""}${1===a.length?a[0].short:a.map(e=>e.long).join(" ")}`})),oi=[],oo=e=>{let t=(0,ei.xu)(t=>(0,ei.rw)(e));return oi.push(t),t},oa=oo(!1),os=oo(!0),ol=(0,Z.cn)(e=>e(os(e(on)))),oc={searchQuery:oo(""),matchCase:oo(!1),regExp:oo(!1),user:oo(null),date:oo(null),branch:oo([])},od=(0,i8.Z)((e,t)=>(0,Z.cn)(t=>t(e(t(on))),(t,n,r)=>{n(e(t(on)),r)}),oc),ou=()=>(0,eT.lV)((0,g.useCallback)((e,t,n)=>{Object.values(oc).map(e=>e(n)).forEach(e=>t(e,ei.td))},[])),oh=(e,t,n)=>{let r=e(ot);e(on)===n&&t(on,r[r.findIndex(e=>e===n)-1]||r[0]),t(ot,e=>e.filter(e=>e!==n)),oi.forEach(e=>e.remove(n))};var op=n("89921");let om={},og=(e,t)=>t.commit.committer.timestamp-e.commit.committer.timestamp;async function of(e){let t=[],n={},r=[];r.forEach(e=>{n[e.readCommitResult.oid]=e});for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];let s=await Promise.all(o.flatMap(e=>{let{refs:t,repoPath:n,isBare:r}=e;return t.map(async e=>{let t=await f.ZP.resolveRef({...c({repoPath:n,isBare:r}),ref:e,depth:3}).then(e=>f.ZP.readCommit({...c({repoPath:n,isBare:r}),oid:e}));return{repoPath:n,isBare:r,commit:t,refs:new Set([e])}})}));for((0,op.Z)((e,t)=>{let{commit:n}=e,{commit:r}=t;return og(n,r)},s).forEach(e=>{let{commit:t,refs:n,repoPath:r,isBare:i}=e;return l({repoPath:r,isBare:i},t,-1,n)});r.length>0;){let{readCommitResult:e,repoPath:n,isBare:i,containingRefs:o}=r.shift();t.push({repoPath:n,readCommitResult:e,containingRefs:o}),(await Promise.all(e.commit.parent.map(e=>f.ZP.readCommit({...c({repoPath:n,isBare:i}),oid:e})))).forEach(e=>{let t=r.findIndex(t=>{let{readCommitResult:n}=t;return og(n,e)>0});l({repoPath:n,isBare:i},e,t,o)})}return t;function l(e,t,i,o){let{repoPath:a,isBare:s}=e;if(n[t.oid])n[t.oid].containingRefs=new Set([...n[t.oid].containingRefs,...o]);else{let e={readCommitResult:t,containingRefs:n[t.oid]?new Set([...n[t.oid].containingRefs,...o]):o,repoPath:a,isBare:s};n[t.oid]=e,r.splice(i>=0?i:r.length,0,e)}}function c(t){let{repoPath:n,isBare:r}=t;return{fs:e,cache:om,[r?"gitdir":"dir"]:n}}}function oA(e,t,n){return(void 0===n&&(n={}),n.regExp)?new RegExp(t,n.matchCase?"":"i").test(e):n.matchCase?e.includes(t):e.toLowerCase().includes(t.toLowerCase())}let ox=es(async e=>of(r,...(await e(im)).map(e=>{let{repoRoot:t,localBranches:n,remoteBranches:r}=e;return{repoPath:t,refs:["HEAD"].concat(n.map(e=>e.name)).concat(r.map(e=>`${e.remote}/${e.name}`))}}))),oy=(0,Z.cn)(async e=>{let t=e(od.searchQuery),n=e(od.branch),r={matchCase:e(od.matchCase),regExp:e(od.regExp)},i=e(od.date),o=(await e(ox)).filter(e=>{let{containingRefs:t}=e;return!n?.length||n.some(e=>t.has(e))}).filter(e=>{let{readCommitResult:{commit:t}}=e;return(!i?.from||1e3*t.author.timestamp>i.from.getTime())&&(!i?.to||1e3*t.author.timestamp<i.to.getTime())}).filter(e=>{let{readCommitResult:{commit:n}}=e;return!t||oA(n.message,t,r)||oA(n.tree,t,{matchCase:!1})});return{rows:o,byOid:(0,i3.Z)(e=>{let{readCommitResult:t}=e;return t.oid},o)}}),oj=(0,Z.cn)(async e=>{let t=await e(im),n={},r=(e,t)=>{n[e]=n[e]||[],n[e].push(t)};for(let{repoRoot:n,localBranches:i,currentBranch:o}of((await Promise.all(t.map(t=>{let{repoRoot:n}=t;return e(i7({repoRoot:n,ref:"HEAD"}))}))).forEach(e=>{r(e,{type:"head",name:"HEAD"})}),t))for(let t of i)r(await e(i7({repoRoot:n,ref:t.name})),{type:"localBranch",name:t.name,isCurrent:o?.name===t.name,trackingBranch:t.trackingBranch});for(let{repoRoot:n,remoteBranches:i}of t)for(let t of i){let i=`${t.remote}/${t.name}`;r(await e(i7({repoRoot:n,ref:i})),{type:"remoteBranch",name:i})}return n}),ov=(0,Z.cn)(new Set([])),ow=(0,Z.cn)(async e=>{let t=e(ov);return"all"===t?(await e(oy)).rows.map(e=>{let{readCommitResult:{oid:t}}=e;return t}):[...t].map(e=>`${e}`)}),oC=(0,Z.cn)(async e=>Promise.all((await e(ow)).map(async t=>(await e(oy)).byOid[t]))),ob=(0,Z.cn)(async e=>{let t=(await e(ow))[0];return t&&(await e(oy)).byOid[t]||null}),oE=(0,Z.cn)(!1),oS=(0,Z.cn)(!1),oD=(0,Z.cn)(!1),oI={id:"Default.Author",name:"Author"},ok={id:"Default.Hash",name:"Hash"},oT={id:"Date.Date",name:"Date"},oP=[oI.id,oT.id],oB=(0,ei.xu)(e=>(0,Z.cn)(oP.includes(e))),oR=new nZ.C(`{count, plural,
    =1 {1 file committed}
    other {# files committed}
  }`,"en-US"),oN=I.zo.div`
  background: ${e=>{let{theme:t}=e;return t.dark?"#2b2b2b":"#fff"}};
  height: 100%;
  display: flex;
  flex-direction: column;
`,oF=I.zo.textarea`
  flex: 1;
  background: none;
  padding: 0.25rem 0.375rem;
  color: ${e=>{let{theme:t}=e;return t.dark?"#a9b7c6":"#000"}};
  font-family: inherit;
  border: none;
  resize: none;
  outline: none;
`,oL=I.zo.div`
  display: flex;
  gap: 0.3rem;
  padding: 0.4rem;
`,oO=I.zo.div`
  display: flex;
  align-items: center;
  padding: 0.125rem 0.5rem;
  gap: 0.25rem;
  position: sticky; // prevents commit message scroll jump when message is toggled on and off
  color: ${e=>{let{theme:t}=e;return t.commonColors.red}};
`;function o_(e){let{editorRef:t}=e,n=(0,g.useRef)(null),[i,o]=(0,D.KO)(r3),a=function(){let e=tu(),t=(0,T.L)(),n=i6();return(0,eT.lV)((0,g.useCallback)((i,o,a,s)=>{let l=n({title:"Committing...",isCancelable:!1},{run:async n=>{let{setIndeterminate:l}=n;l(!0);let c=(0,ri.Z)(e=>{let{repoRoot:t}=e;return t},(await Promise.all(a.map(async e=>{let t=ra.path(e),n=await i(tn(t)),o=await r.promises.exists(t)?await r.promises.readFile(t):null;return n?{repoRoot:n,filePath:m().relative(n,t),content:o}:null}))).filter(eN.N));await Promise.all(Object.entries(c).map(async e=>{let[t,n]=e,a=n.reduce((e,t)=>{let{filePath:n,content:r}=t;return{...e,[n]:"string"==typeof r?new TextEncoder().encode(r):r}},{});await iJ({fs:r,dir:t,updates:a,message:s,author:{name:"Alireza",email:"alireza.mirian@gmail.com"}});let l=await i(ip(t));l&&o(i7({repoRoot:t,ref:l})),o(i7({repoRoot:t,ref:"HEAD"}))})).then(()=>{o(ox),e().catch(console.error),t.show({icon:"Info",body:(0,C.jsxs)(C.Fragment,{children:[`${oR.format({count:a.length})}: `,s.split("\n").flatMap((e,t)=>[(0,C.jsx)("br",{},t),e]).slice(1)]})})},e=>{t.show({icon:"Error",title:"Commit failed!",body:"Could not commit files."}),console.error("Commit error",e)})},onFinished:()=>{o(r9,null)}});o(r9,l)},[]))}(),s=(0,D.Dv)(r7),l=(0,T.L)(),[c,d]=(0,D.KO)(r8),u=(0,D.Dv)(r9);(0,g.useEffect)(()=>{i&&d("")},[i]);let h=(0,eT.lV)((0,g.useCallback)(e=>{let t=e(rX),n=e(r3);if(0===t.length){d("Select files to commit");return}if(!n){d("Specify commit message");return}if(e(r7)){l.show({icon:"Error",title:"Unsupported action",body:"Amending commits is not yet supported."});return}a(t,n)},[])),{hasFocus:p}=(0,nn.e)();return(0,g.useImperativeHandle)(t,()=>({focus:()=>{n.current?.focus()}}),[]),(0,C.jsxs)(oN,{children:[(0,C.jsx)(oF,{ref:n,value:i,onChange:e=>{o(e.target.value)},placeholder:"Commit Message","data-gramm":"false"}),c&&(0,C.jsxs)(oO,{children:[(0,C.jsx)(M.vq,{icon:"general/error.svg"})," ",c]}),(0,C.jsxs)(oL,{children:[(0,C.jsx)(nH.z,{preventFocusOnPress:!0,variant:p?"default":void 0,onPress:h,isDisabled:null!=u,mnemonic:"i",children:s?"Amend Commit":"Commit"}),(0,C.jsx)(nH.z,{preventFocusOnPress:!0,onPress:tx,mnemonic:"P",children:s?"Amend Commit and Push...":"Commit and Push..."})]})]})}o_.__docgenInfo={description:"Commit message and commit buttons shown in the bottom/right split view of the commit toolwindow",methods:[],displayName:"CommitView",props:{editorRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<{ focus: () => void }>",elements:[{name:"signature",type:"object",raw:"{ focus: () => void }",signature:{properties:[{key:"focus",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!0}}]}}]},description:""}}};var oM=n("78965");let oG=e=>{let{changes:t}=e,n=t.filter(e=>"MODIFIED"===ra.fileStatus(e)).length,r=t.filter(ra.isAddition).length,i=t.filter(ra.isDeletion).length;return(0,C.jsxs)(C.Fragment,{children:[r>0&&(0,C.jsxs)(tg,{status:"ADDED",children:[r," added"]}),n>0&&(0,C.jsxs)(tg,{status:"MODIFIED",children:[n," modified"]}),i>0&&(0,C.jsxs)(tg,{status:"DELETED",children:[i," deleted"]})]})};oG.__docgenInfo={description:"",methods:[],displayName:"ChangesSummary",props:{changes:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"AnyChange"}],raw:"ReadonlyArray<AnyChange>"},description:""}}};let oK=I.zo.div`
  display: flex;
  padding: 0.125rem;
  position: relative;
`,oH=(0,I.zo)(nK.X)`
  padding-right: 0.625rem;
`,oV=I.zo.span`
  position: absolute;
  right: 0.5rem;
  top: 0.25rem;
  background: ${e=>{let{theme:t}=e;return t.color("Panel.background")}};
  z-index: 1;
`,oU=()=>{let e=(0,D.Dv)(rX);return(0,C.jsx)(oG,{changes:e})};function o$(){let[e,t]=(0,D.KO)(r7),n=(0,D.b9)(o0);return(0,C.jsxs)(oK,{children:[(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(oM.h,{actionName:"Amend Commit",helpText:"Modify the latest commit of the current branch"}),children:r=>(0,C.jsx)("span",{...r,children:(0,C.jsx)(oH,{isSelected:e,onChange:e=>{t(e),n()},preventFocus:!0,mnemonic:"m",children:"Amend"})})}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Show Commit Options"}),children:(0,C.jsx)(iQ.hU,{onPress:tx,children:(0,C.jsx)(M.vq,{icon:"general/gear.svg"})})}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Commit Message History"}),children:(0,C.jsx)(iQ.hU,{isDisabled:!0,onPress:tx,children:(0,C.jsx)(M.vq,{icon:"vcs/historyInline.svg"})})}),(0,C.jsx)(oV,{children:(0,C.jsx)(oU,{})})]})}o$.__docgenInfo={description:"Amend checkbox, commit message history button, and summary of included changes, shown as a row\nbellow changes tree, in commit tool window.",methods:[],displayName:"CommitActionsRow"};let oQ=new nZ.C(`Delete {count, plural,
    =1 {Changelist}
    other {Changelists}
  }`,"en-US"),oq=new nZ.C(`{count, plural,
    =1 {1 selected file}
    other {# selected files}
  }`,"en-US"),oz=(0,Z.cn)(e=>[...e(rY).values()].filter(e=>"DELETED"!==e.type).map(ra.path)),oW=nX({id:ty.$.DELETE,title:"Delete",description:"Delete selected item",isDisabled:(0,Z.cn)(e=>0===e(oz).length),actionPerformed:async e=>{let{get:t,set:n}=e,r=t(oz),i=t(eZ).current;0!==r.length&&await i?.confirm({title:"Delete",okText:"Delete",message:C.jsx("div",{style:{width:354},children:`Are you sure you want to delete ${oq.format({count:r.length})}?`})})&&(console.log(`deleting ${r}`),await nq(t,n,r))}}),oY=I.zo.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,oZ=I.zo.div`
  flex: 1;
  overflow: auto;
  position: relative;
`,oJ=I.zo.div`
  position: absolute;
  right: 0.125rem;
  top: 0.125rem;
  z-index: 1;
`,oX=(0,Z.cn)(!1),o0=(0,Z.cn)(null,(e,t)=>{t(oX,!0)}),o1=()=>{let{state:{anchor:e}}=(0,re.j)(),t=(0,g.useRef)(null),n=(0,g.useRef)(null),r=(0,rt.Ss)(e),i=(0,D.Dv)(ta),[o,a]=(0,D.KO)(r4(r)),[s,l]=(0,D.KO)(oX),c=function(){let e=(0,D.Dv)(rZ),t=rf(),n=[...e].filter(e=>!e.active),r=tu(),i=[{id:ty.$.REFRESH,title:"Refresh",icon:(0,C.jsx)(M.vq,{icon:"actions/refresh.svg"}),actionPerformed:r},{id:rv.SHELVE_SILENTLY,title:"Shelve Silently",icon:(0,C.jsx)(M.vq,{icon:"vcs/shelveSilent.svg"}),actionPerformed:tx},(0,D.Dv)(oW)];return 1===e.size&&i.push({id:rv.RENAME_CHANGELIST,title:"Edit Changelist...",description:"Edit name and description of selected changelist",icon:(0,C.jsx)(M.vq,{icon:"actions/edit.svg"}),actionPerformed:tx}),n.length>0&&i.push({id:rv.REMOVE_CHANGELIST,title:oQ.format({count:n.length}),description:"Remove changelist and move all changes to another",icon:(0,C.jsx)(M.vq,{icon:"general/remove.svg"}),actionPerformed:tx}),1===n.length&&i.push({title:"Set Active Changelist",description:"Set changelist to which new changes are placed by default",id:rv.SET_DEFAULT_CHANGELIST,icon:(0,C.jsx)(M.vq,{icon:"actions/selectall.svg"}),actionPerformed:()=>{t(n[0].id)}}),i}(),d=(0,ns.x)({treeRef:t});return(0,g.useEffect)(()=>{s&&(setTimeout(()=>{n.current?.focus()}),l(!1))},[s]),(0,C.jsx)(rn.D,{orientation:r,innerView:(0,C.jsx)(B.DG,{actions:[...d,...c],children:e=>{let{shortcutHandlerProps:n}=e;return(0,C.jsxs)(oY,{...n,children:[(0,C.jsx)(iZ,{}),(0,C.jsxs)(oZ,{children:[i&&(0,C.jsx)(rr,{children:(0,C.jsx)(oJ,{children:(0,C.jsx)(b,{})})}),(0,C.jsx)(iK,{treeRef:t})]}),(0,C.jsx)(o$,{})]})}}),innerViewMinSize:50,lastView:(0,C.jsx)(o_,{editorRef:n}),lastSize:o,onLastResize:a})};o1.__docgenInfo={description:"",methods:[],displayName:"ChangesViewSplitter"};let o2=I.zo.div`
  min-height: 70%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 50px;
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  white-space: nowrap;
`;function o5(){let e=(0,B.DI)();return(0,C.jsx)(o2,{children:(0,C.jsxs)("div",{style:{textAlign:"center"},children:["To commit changes,"," ",(0,C.jsx)(tf.r,{onPress:()=>e(rv.GIT_INIT),children:"Create Git repository..."}),(0,C.jsx)("br",{}),"For recent changes, see"," ",(0,C.jsx)(tf.r,{onPress:tx,children:"Local History..."}),(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),(0,C.jsx)(M.vq,{style:{verticalAlign:"text-top"},icon:"general/contextHelp.svg"})," ",(0,C.jsx)(tf.r,{onPress:tx,children:"Version Control integration"})," "]})})}o5.__docgenInfo={description:"",methods:[],displayName:"ChangesViewZeroState"};let o6=v.ZP.div.withConfig({displayName:"ChangesViewPane__StyledContainer",componentId:"sc-1pqba05-0"})(["display:flex;flex-direction:column;height:100%;"]),o4=()=>{let e=(0,D.Dv)(tt);return(0,C.jsx)(o6,{children:e.length>0?(0,C.jsx)(o1,{}):(0,C.jsx)(o5,{})})};function o7(e){let{branches:t}=e;return(0,C.jsx)("table",{style:{borderSpacing:0},children:t.map(e=>{let{branch:n,repoRoot:r}=e,i=n.trackingBranch?`${n.name} \u{2192} ${n.trackingBranch}`:t.length>1?`${n.name} (no tracking branch)`:"No tracking branch";return t.length>1?(0,C.jsxs)("tr",{children:[(0,C.jsxs)("td",{children:[m().basename(r),": \xa0"]}),(0,C.jsx)("td",{children:i})]},r):(0,C.jsx)("tr",{children:(0,C.jsx)("td",{children:i})},r)})})}o4.__docgenInfo={description:"",methods:[],displayName:"ChangesViewPane"},o7.__docgenInfo={description:"",methods:[],displayName:"TrackingBranchInfo",props:{branches:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ repoRoot: string; branch: LocalBranch }",signature:{properties:[{key:"repoRoot",value:{name:"string",required:!0}},{key:"branch",value:{name:"LocalBranch",required:!0}}]}}],raw:"Array<{ repoRoot: string; branch: LocalBranch }>"},description:""}}};let o3="Commit",o8=(0,Z.cn)(async e=>{let t=(await Promise.all(e(rd).map(t=>e(tn(ra.path(t)))))).filter(eN.N);return(await Promise.all(t.map(async t=>{let n=(await e(ih(t))).currentBranch;return n?{repoRoot:t,branch:n}:null}))).filter(eN.N)}),o9=()=>{let e=(0,D.Dv)(rQ("repository")),t=(0,D.Dv)(o8),n=!e&&t[0]?`Commit to ${t[0]?.branch?.name||"!"}`:"Commit";return(0,C.jsx)(n9.y,{children:(0,C.jsx)(n9.y.View,{tabContent:(0,C.jsx)(H.a,{isDisabled:e||0===t.length,tooltip:(0,C.jsx)(V.M,{actionName:(0,C.jsx)(o7,{branches:t})}),children:(0,C.jsx)("span",{children:n})}),children:(0,C.jsx)(o4,{})},"commit")})};o9.__docgenInfo={description:"",methods:[],displayName:"CommitToolWindow"};var ae=n("84824");let at=I.zo.div`
  box-sizing: border-box;
  display: flex;
  align-items: center;
  height: 2.0625rem;
  border-bottom: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.borderColor}};
  flex-shrink: 0;
`,an=I.zo.div`
  flex-grow: 1;
`,ar=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  display: flex;
  flex-direction: column;
  justify-content: end;
  align-items: center;
  gap: 0.25rem;
  min-height: 37%;
  overflow: hidden;
`;var ai=n("76344");let ao=e=>{let t=e.split("\n"),n=t.slice(1);return{subject:t[0],bodyAsString:n.join("\n"),body:(0,C.jsx)(C.Fragment,{children:n.map((e,t)=>(0,C.jsxs)(g.Fragment,{children:[t>0&&(0,C.jsx)("br",{}),e]},t))})}};function aa(e){return e.slice(0,8)}let as=new Intl.DateTimeFormat([],{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric",hour12:!0}),al=new Intl.DateTimeFormat([],{hour:"numeric",minute:"numeric",hour12:!0}),ac=new Intl.DateTimeFormat([],{day:"numeric",month:"numeric",year:"2-digit"}),ad=i_({commitParent:(c=e=>`Changes to ${aa(m().basename(e.oid))} ${e.subject.slice(0,50)}`,(e,t)=>{let{fileCount:n}=t;return{textValue:c(e),rendered:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)(nw.J,{}),(0,C.jsx)(nv.e.Hint,{children:iF(n)})]})}})},{repo:(e,t)=>{let{fileCount:n}=t;return{textValue:m().basename(e.repository.dir),rendered:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)(iB,{rootPath:e.repository.dir}),(0,C.jsx)(nw.J,{}),(0,C.jsx)(nv.e.Hint,{children:iF(n)})]})}}}),au={};async function ah(e){let{fromRef:t,toRef:n,...r}=e;return(await f.ZP.walk({...r,cache:au,trees:[f.ZP.TREE({ref:t}),f.ZP.TREE({ref:n})],map:async function(e,t){let[n,i]=t,o=await i?.oid(),a=await n?.oid(),s=await i?.type(),l=await n?.type();if(o===a)return null;let c=o?{hash:o,path:m().join(r.dir||"",e),isDir:"tree"===s,content:async()=>new TextDecoder().decode(await i?.content()??new Uint8Array)}:null,d=a?{hash:a,path:m().join(r.dir||"",e),isDir:"tree"===l,content:async()=>new TextDecoder().decode(await n?.content()??new Uint8Array)}:null,u=c||d?ra(d,c):null;return!!u&&!ra.revision(u).isDir&&u}})||[]).filter(e=>e)}var ap=n("2834");async function am(e){return ag(function(e){let t=e.filter(ra.isDeletion),n=e.filter(ra.isAddition);return af(new Map(t.map(e=>{let t=n.find(t=>{let{after:{hash:n}}=t;return n===e.before.hash});return t?[e,{to:t}]:null}).filter(eN.N)),e)}(e))}async function ag(e){let t=e.filter(ra.isDeletion),n=e.filter(ra.isAddition),r=new Map,i=async e=>(r.get(e)||r.set(e,await ra.content(e)),r.get(e)??""),o=new Map;return await Promise.all(t.map(async e=>Promise.all(n.map(async t=>{let n=await aA(await i(e),await i(t)),r=o.get(e);n>=50&&(!r||n>r.similarity)&&o.set(e,{similarity:n,to:t})})))),af(o,e)}function af(e,t){let n=[...e.values()].map(e=>e.to);return t.map(t=>{if(ra.isDeletion(t)){let n=e.get(t);if(n)return ra(t.before,n?.to.after)}return t}).filter(e=>!n.includes(e))}async function aA(e,t){return new Promise((n,r)=>{(0,ap.Mp)(e,t,function(e,t){if(void 0===t&&(t=[]),e)return r(e);let{unchanged:i,total:o}=t.reduce((e,t)=>{let{total:n,unchanged:r}=e,i=t.count??0;return{total:n+i,unchanged:r+(t.added||t.removed?0:i)}},{total:0,unchanged:0});n(i/o*100)})})}let ax=(0,ei.xu)(e=>(0,Z.cn)(e===rk.id)),ay=(0,Z.cn)(g.createRef()),aj=(0,Z.cn)(new Set),av=(0,Z.cn)(new Set),aw="commitParent",aC=(0,ei.xu)(e=>(0,Z.cn)(()=>ah({fs:r,...e})),eO.Z),ab=(0,ei.xu)(e=>(0,Z.cn)(async t=>am(await t(aC(e)))),eO.Z),aE=e=>async t=>{let n=(await t(oC))[0],{byOid:r}=await t(oy),i=n?.readCommitResult?.oid,o=n?.readCommitResult.commit.parent;if(i&&o){let a=function(){return rR(...arguments)("")}({get:t,groupings:rT,isActive:ax}),s=await Promise.all(o?.map(async o=>({type:aw,key:rw(aw,o),oid:o,subject:r[o]?.readCommitResult.commit.message||"",children:a([...await t(e({toRef:i,fromRef:o,dir:n.repoPath}))].map(e=>rb(e)))}))),{expandAllKeys:l,fileCountsMap:c,...d}=rH(1===s.length?s[0].children:s.filter(e=>{let{children:t}=e;return t.length>0}));return(0,rN.kD)(e=>("directory"===e.type?"a_":"b_")+ad.getTextValue(e,{fileCountsMap:c}).toLowerCase(),{roots:d.rootNodes,getChildren:e=>"children"in e?e.children:null}),{...d,fileCountsMap:c,expandAllKeys:new Set([...l].filter(e=>!`${e}`.startsWith(aw)))}}return null},aS=(0,Z.cn)(aE(aC)),aD=(0,Z.cn)(aE(ab)),aI=I.zo.div`
  position: absolute;
  inset: 0;
  gap: 0.5rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
`,ak=[aD,aS].map(ei.n7),aT=(0,Z.cn)(e=>e(ak.find(t=>"hasData"===e(t).state)??ak.slice(-1)[0]));function aP(e){let{treeShortcutHandlerProps:t}=e,n=(0,D.Dv)(nB(oC)),r=(0,D.Dv)(ay),i=!n?.length,o=(0,D.Dv)(aT),a="hasData"===o.state?o.data:null,[s,l]=(0,D.KO)(aj),[c,d]=(0,D.KO)(av);return((0,g.useEffect)(()=>{l(a?.expandAllKeys??new Set),d(new Set)},[o.state]),i)?(0,C.jsx)(ar,{children:"Select commits to to view changes"}):(0,C.jsxs)("div",{...t,style:{height:"-webkit-fill-available",position:"relative"},children:["loading"===o.state&&(0,C.jsx)(rr,{children:(0,C.jsxs)(aI,{children:[(0,C.jsx)(b,{style:{width:"1.5rem"}}),"Loading..."]})}),a&&(0,C.jsx)(nj.b,{"aria-label":"Commit changes",treeRef:r,items:a.rootNodes,selectionMode:"multiple",expandedKeys:s,onExpandedChange:l,selectedKeys:c,onSelectionChange:d,style:{paddingBottom:"1rem"},fillAvailableSpace:!0,children:ad.itemRenderer({fileCountsMap:a.fileCountsMap})}),n.length>1&&(0,C.jsx)(ai.S,{placement:"top",tooltip:(0,C.jsx)(nV.k,{helpText:(0,C.jsx)(C.Fragment,{children:"Showing diff for more than one commit is not currently supported. Only the first selected commit is taken into account."})}),children:e=>(0,C.jsx)("span",{...e,style:{position:"absolute",right:"0.5rem",bottom:"0.5rem"},children:(0,C.jsx)(M.vq,{icon:"general/warning"})})})]})}aP.__docgenInfo={description:"TODO: handle multiple selected commits (check Changes.ShowChangesFromParents https://github.com/JetBrains/intellij-community/blob/ac57611a0612bd65ba2a19c841a4f95b40591134/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/frame/VcsLogChangesBrowser.java#L255-L254)",methods:[],displayName:"CommitChangedFiles",props:{treeShortcutHandlerProps:{required:!0,tsType:{name:"HTMLAttributes",elements:[{name:"HTMLElement"}],raw:"HTMLAttributes<HTMLElement>"},description:""}}};var aB=n("7228");let aR=(0,C.jsx)("path",{fill:"currentColor",d:"M4.2 4.8 C4.8627 4.8 5.4 5.3373 5.4 6 C5.4 6.6627 4.8627 7.2 4.2 7.2 C3.5373 7.2 3 6.6627 3 6 C3 5.3373 3.5373 4.8 4.2 4.8 ZM0.6 2.4 L0.6 7.2 L7.8 14.4 L12.6 9.6 L5.4 2.4 Z"}),aN={light:"#ffd100",dark:"#e1c731"},aF={light:"#3cb45c",dark:"#3cb45c"},aL={light:"#9f79b5",dark:"#9f79b5"},aO={light:"#7a7a7a",dark:"#999999"},a_={head:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.headIconColor",aN)},localBranch:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.localBranchIconColor",aF)},remoteBranch:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.remoteBranchIconColor",aL)},tag:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.tagIconColor",aO)}},aM=(0,I.zo)(iR)`
  border-radius: 3px;
  align-items: stretch;
  font-size: 0.75rem;
`,aG=I.zo.svg.attrs({viewBox:"0 0 14.5 14.5"})`
  width: 1rem;
  height: 1rem;
  stroke: rgba(0, 0, 0, 0.25);
  stroke-width: 0.5px;
  color: ${e=>{let{type:t,theme:n}=e;return a_[t]({theme:n})}};
  z-index: 1; // for the right vertical order of grouped labels
  &:not(:first-child) {
    margin-right: -11px;
  }
`,aK=I.zo.span`
  display: inline-flex;
  flex-direction: row-reverse;
`,aH=I.zo.span`
  text-overflow: ellipsis;
  overflow: hidden;
`;function aV(e){let{type:t}=e;return(0,C.jsx)(aG,{type:t,children:aR})}function aU(e){let{types:t}=e;return(0,C.jsx)(aK,{children:t.map((e,t)=>(0,C.jsx)(aG,{type:e,children:aR},t))})}function a$(e){let{types:t,children:n}=e;return(0,C.jsxs)(aM,{children:[(0,C.jsx)(aU,{types:t}),(0,C.jsx)(aH,{children:n})]})}aV.__docgenInfo={description:"",methods:[],displayName:"RefIcon",props:{type:{required:!0,tsType:{name:'GitRef["type"]',raw:'GitRef["type"]'},description:""}}},aU.__docgenInfo={description:"",methods:[],displayName:"RefIconGroup",props:{types:{required:!0,tsType:{name:"Array",elements:[{name:'GitRef["type"]',raw:'GitRef["type"]'}],raw:'Array<GitRef["type"]>'},description:""}}},a$.__docgenInfo={description:"",methods:[],displayName:"RefLabel",props:{types:{required:!0,tsType:{name:"Array",elements:[{name:'GitRef["type"]',raw:'GitRef["type"]'}],raw:'Array<GitRef["type"]>'},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};let aQ=I.zo.div`
  padding: 0.875rem;
  cursor: default;
`,aq=I.zo.div`
  font-family: "JetBrains Mono", monospace;
  line-height: 1.125rem;
  margin-bottom: 1.25rem;
  margin-right: 1.1875rem;
`,az=I.zo.div`
  font-weight: bold;
`,aW=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.label({disabled:!0})}};
`,aY=I.zo.div`
  line-height: 1.2;
  display: flex;
  gap: 0.25rem;
  margin-bottom: 0.75rem;
`,aZ=(0,I.zo)(iB)`
  align-self: start;
`,aJ=I.zo.span`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.25rem;
  margin-bottom: 0.75rem;
`;function aX(){let e=(0,D.Dv)(nB(ob)),t=(0,D.Dv)(nB(oj)),n=(0,D.Dv)(tt).length>0;if(!e)return(0,C.jsx)(ar,{children:"No commits selected"});let{readCommitResult:{commit:r,oid:i},containingRefs:o,repoPath:a}=e,{subject:s,body:l}=ao(r.message),c=[];r.committer.name!==r.author.name&&c.push((0,C.jsxs)(g.Fragment,{children:["by ",r.committer.name," ",(0,C.jsx)(a2,{email:r.committer.email})]},r.committer.email)),r.committer.timestamp!==r.author.timestamp&&c.push(a5(1e3*r.committer.timestamp));let d=t?.[i]||[],u=(0,ri.Z)(e=>e.type,d);return(0,C.jsxs)(aQ,{children:[(0,C.jsxs)(aq,{children:[(0,C.jsx)(az,{children:s}),l]}),(0,C.jsxs)(aY,{children:[n&&(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(aB.u,{children:a}),children:e=>(0,C.jsx)(aZ,{...e,rootPath:a})}),(0,C.jsxs)("div",{children:[`${aa(i)} ${r.author.name} `,(0,C.jsx)(a2,{email:r.author.email})," ",`${a5(new Date(1e3*r.author.timestamp))}`,c.length>0&&(0,C.jsxs)(aW,{children:["committed ",c]})]})]}),d.length>0&&(0,C.jsxs)(aJ,{children:[(0,C.jsx)(a1,{refs:u.head}),(0,C.jsx)(a1,{refs:u.localBranch}),(0,C.jsx)(a1,{refs:u.remoteBranch}),(0,C.jsx)(a1,{refs:u.tag})]}),(0,C.jsxs)("div",{children:["In ",o.size," branches: ",[...o].join(", ")]})]})}let a0=I.zo.span`
  display: inline-flex;
  align-items: center;
`;function a1(e){let{refs:t}=e;return t?.length?(0,C.jsx)(C.Fragment,{children:t.map((e,n)=>{let r=`${e.name}${n===t.length-1?"":","}`;return 0===n?(0,C.jsxs)(a0,{children:[(0,C.jsx)(aU,{types:t.map(e=>{let{type:t}=e;return t}).slice(0,2)}),r]}):(0,C.jsx)("span",{children:r})})}):null}function a2(e){let{email:t}=e;return(0,C.jsx)("a",{href:`mailto:${t}`,style:{all:"unset"},children:(0,C.jsx)(tf.r,{children:`<${t}>`})})}function a5(e){return`on ${ac.format(e)} at ${al.format(e).replace(" ","\u202F")}`}function a6(e,t){let n=(0,B.ol)().find(t=>{let{id:n}=t;return n===e});return(0,g.useMemo)(()=>{if(!n)return null;let{perform:e,id:r,...i}=n;return{...i,id:t,useShortcutsOf:r,isSearchable:!1,actionPerformed:t=>{e(t)}}},[n])}aX.__docgenInfo={description:"",methods:[],displayName:"CommitDetails"};let a4=(0,Z.cn)(.5),a7=I.zo.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,a3=(0,Z.cn)(e=>rT.filter(t=>nJ(t.isAvailable)?e(t.isAvailable):t.isAvailable).map(t=>({...t,key:`groupBy:${t.id}`,isActive:e(ax(t.id))}))),a8="Vcs.log.detailsView.layout",a9="Vcs.log.detailsView.viewOptions",se=`${a8}.${rv.SHOW_DETAILS}`,st=`${a8}.${rv.SHOW_DIFF_PREVIEW}`,sn=e=>`Vcs.log.detailsView.groupBy.${e.id}`;function sr(e){let{tabKey:t}=e,[n,r]=(0,D.KO)(a4),i=(0,D.Dv)(os(t)),o=(0,eT.lV)((0,g.useCallback)((e,t,n)=>{t(ax(n),e=>!e)},[])),a=(0,tI.w)(),s=(0,D.Dv)(a3),l=(0,D.Dv)(ay),c=[a({id:a9,title:"View Options",icon:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"}),children:[a({id:"Vcs.log.detailsView.groupBy",title:"Group By",menuPresentation:"titledSection",icon:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"}),children:s.map(e=>({id:sn(e),useShortcutsOf:e.useShortcutOf,title:e.title,actionPerformed:()=>{o(e.id)}}))}),a({id:a8,menuPresentation:"titledSection",title:"Layout",children:[a6(rv.SHOW_DETAILS,se),a6(rv.SHOW_DIFF_PREVIEW,st)].filter(eN.N)})]}),...(0,ns.x)({treeRef:l})];return(0,C.jsx)(B.DG,{actions:c,children:e=>{let{shortcutHandlerProps:t}=e;return(0,C.jsxs)(a7,{children:[(0,C.jsxs)(at,{children:[(0,C.jsxs)(iH.o,{children:[(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Show Diff",shortcut:"\u2318D"}),children:(0,C.jsx)(iQ.hU,{isDisabled:!0,children:(0,C.jsx)(M.vq,{icon:"actions/diff.svg"})})}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Revert Selected Changes"}),children:(0,C.jsx)(iQ.hU,{isDisabled:!0,children:(0,C.jsx)(M.vq,{icon:"actions/rollback.svg"})})}),(0,C.jsx)(iV.p,{renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsx)(sa,{menuProps:t})},children:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"})})]}),(0,C.jsx)(an,{}),(0,C.jsxs)(iH.o,{style:{flexShrink:0},children:[(0,C.jsx)(nl.K,{actionId:ty.$.EXPAND_ALL}),(0,C.jsx)(nl.K,{actionId:ty.$.COLLAPSE_ALL})]})]}),(0,C.jsx)("div",{style:{flex:1,minHeight:0},children:i?(0,C.jsx)(rn.D,{orientation:"vertical",firstSize:n,onFirstResize:r,firstViewMinSize:10,firstView:(0,C.jsx)(aP,{treeShortcutHandlerProps:t}),innerView:(0,C.jsx)(aX,{})}):(0,C.jsx)(aP,{treeShortcutHandlerProps:t})})]})}})}let si={[se]:ol,...Object.fromEntries(rT.map(e=>[sn(e),ax(e.id)]))},so=(0,Z.cn)(e=>Object.entries(si).filter(t=>{let[,n]=t;return e(n)}).map(e=>{let[t]=e;return t}));function sa(e){let{menuProps:t}=e,n=(0,q.y)(a9),r=(0,D.Dv)(so);return n&&(0,C.jsx)(z.d,{actionGroup:n,children:e=>(0,C.jsx)(iU.w,{...t,...e,selectedKeys:r})})}sr.__docgenInfo={description:"",methods:[],displayName:"VcsLogDetailsView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};var ss=n("67074"),sl=n("66344"),sc=n("46377"),sd=n("88524"),su=n("51515");let sh=I.zo.button`
  all: unset;
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding-left: 0.25rem;
  cursor: pointer;
  background: transparent;
  color: ${e=>{let{theme:t}=e;return t.commonColors.label({disabled:!0})}};

  line-height: 1.5;
  border-radius: 0.25rem;
  white-space: nowrap;
  border: 2px solid transparent;
  &:hover {
    color: ${e=>{let{theme:t}=e;return t.color("*.foreground")}};
  }
  &:focus-visible {
    border-color: ${e=>{let{theme:t}=e;return t.commonColors.focusRing({focused:!0})}};
  }
`,sp=I.zo.span`
  margin-left: -1px;
  line-height: 1.2;
`,sm=I.zo.span`
  color: ${e=>{let{theme:t}=e;return t.color("*.foreground")}};
  max-width: 8.25rem;
  overflow: hidden;
  text-overflow: ellipsis;
`,sg=(0,I.zo)(sc.v)`
  &:focus-visible {
    outline: 2px solid
      ${e=>{let{theme:t}=e;return t.commonColors.focusRing({focused:!0})}};
    outline-offset: -2px;
  }
`;function sf(e){let{label:t,value:n,onClear:r,...i}=e;return(0,C.jsx)(sd.b,{...i,children:(e,i)=>(0,C.jsxs)(sh,{...e,ref:i,children:[t,n?(0,C.jsxs)(C.Fragment,{children:[": ",(0,C.jsx)(sm,{children:n}),(0,C.jsx)(su.V,{onPress:r,children:(0,C.jsx)(sg,{icon:"actions/close",hoverIcon:"actions/closeHovered"})})]}):(0,C.jsx)(sp,{children:(0,C.jsx)(M.vq,{icon:"general/arrowDownSmall.svg"})})]})})}sf.__docgenInfo={description:"",methods:[],displayName:"VcsFilterDropdown",props:{label:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},value:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let sA=I.zo.span.attrs({role:"button"})`
  display: inline-flex;
`;function sx(e){let{onClick:t,isFavorite:n,isCurrent:r}=e;return(0,C.jsx)(sA,{onPointerUp:e=>{e.stopPropagation()},onClick:t,children:r?(0,C.jsx)(sc.v,{icon:n?"/platform/dvcs-impl/resources/icons/currentBranchFavoriteLabel.svg":"/platform/dvcs-impl/resources/icons/currentBranchLabel.svg",hoverIcon:n?"nodes/favorite.svg":"nodes/notFavoriteOnHover.svg",hoverContainerSelector:"[role='menuitem']"}):n?(0,C.jsx)(M.vq,{icon:"nodes/favorite.svg"}):(0,C.jsx)(sc.v,{icon:"nodes/emptyNode.svg",hoverIcon:"nodes/notFavoriteOnHover.svg",hoverContainerSelector:"[role='menuitem']"})})}function sy(e){let{tabKey:t}=e,[n,r]=(0,D.KO)(oc.branch(t)),i=(0,eT.oC)(oc.branch(t));return(0,C.jsx)(sf,{value:n.length>0?n.join("|"):null,onClear:i,renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsx)(sw,{menuProps:t,onBranchesSelected:r})},label:"Branch"})}sx.__docgenInfo={description:"",methods:[],displayName:"BranchFavoriteButton",props:{isCurrent:{required:!1,tsType:{name:"boolean"},description:""},isFavorite:{required:!0,tsType:{name:"boolean"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let sj=e=>Object.entries((0,ri.Z)(e=>{let{branchName:t}=e;return t},e)).map(e=>{let[t,n]=e;return{branchName:t,repoRoots:n.map(e=>e.repoRoot)}}),sv=(0,Z.cn)(async e=>{let t=await e(im),n=t.flatMap(e=>{let{remoteBranches:t,repoRoot:n}=e;return t.map(e=>({repoRoot:n,branchName:`${e.remote}/${e.name}`}))});return{localBranches:sj(t.flatMap(e=>{let{localBranches:t,repoRoot:n}=e;return t.map(e=>({repoRoot:n,branchName:e.name}))})),remoteBranches:sj(n)}});function sw(e){let{menuProps:t,onBranchesSelected:n}=e,[r,i]=(0,g.useState)([]),{toggleFavorite:o,isFavorite:a}=iI(),{localBranches:s=[],remoteBranches:l=[]}=(0,D.Dv)(nB(sv))||{},c=(0,ri.Z)(e=>{let{branchName:t}=e;return t.split("/")[0]},l);(0,g.useEffect)(()=>{let e=(e,t)=>t.filter(t=>{let{branchName:n,repoRoots:r}=t;return r.some(t=>a({branchType:e,branchName:n,repoRoot:t}))}).map(t=>{let{branchName:n,repoRoots:r}=t;return{branchType:e,branchName:n,repoRoots:r}});i([{branchType:"LOCAL",branchName:"HEAD",repoRoots:[]}].concat(e("LOCAL",s)).concat(e("REMOTE",l)))},[]);let d=e=>{let{branchName:t,branchType:n,repoRoots:r}=e;return(0,C.jsx)(O.c,{textValue:t,children:(0,C.jsx)(K._,{content:t,icon:(0,C.jsx)(sx,{isFavorite:"HEAD"===t||r.some(e=>a({branchType:n,repoRoot:e,branchName:t})),onClick:()=>{"HEAD"!==t&&r.forEach(e=>{o({branchType:n,repoRoot:e,branchName:t})})}})})},`branch:${t}`)};return(0,C.jsx)(iU.w,{...t,submenuBehavior:"toggleOnPress",autoFocus:"first",minWidth:250,onAction:e=>{let[t,i]=`${e}`.split(":");"branch"===t&&i?n([i]):"favorites"===t?n(r.map(e=>{let{branchName:t}=e;return t})):"select"===t&&tx()},children:[(0,C.jsx)(O.c,{children:"Select..."},"select"),(0,C.jsx)(O.c,{children:"Favorites"},"favorites"),...r.map(d),(0,C.jsx)(nS.i,{}),(0,C.jsx)(O.c,{title:"Local",children:s.map(e=>{let{branchName:t,repoRoots:n}=e;return d({branchType:"LOCAL",branchName:t,repoRoots:n})})},"local"),...Object.entries(c).map(e=>{let[t,n]=e;return(0,C.jsx)(O.c,{title:`${t}/...`,children:n.map(e=>{let{branchName:t,repoRoots:n}=e;return d({branchType:"REMOTE",branchName:t,repoRoots:n})})},`remote:${t}`)})]})}sy.__docgenInfo={description:"",methods:[],displayName:"BranchesFilterDropdown",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};var sC=n("88808"),sb=n("74546"),sE=n("84244");function sS(e){var t;let n=function(e){let t=e.match("(\\w+)[\\p{Punct}\\s](\\w+)");return t?[t[1],t[2]]:null}(e);if(null!=n){let[e,t]=n;return e.toLowerCase()+" "+t.toLowerCase()}return(t=e).match("[ -~]*")?t.toLowerCase():t}let sD=(0,ei.xu)(e=>(0,Z.cn)(async()=>({name:await f.ZP.getConfig({fs:r,dir:e,path:"user.name"})??"",email:await f.ZP.getConfig({fs:r,dir:e,path:"user.email"})??""}))),sI=I.zo.div`
  display: flex;
  height: 1.5rem;
  align-items: center;
  width: 100%;
  --column-width-1: 130px;
  --column-width-2: 130px;
  --column-width-3: 70px;
`,sk=I.zo.div`
  overflow: hidden;
  padding-left: 0.25rem;
`,sT=I.zo.div`
  ${e=>{let{asOverlay:t}=e;return t?(0,I.iv)`
          flex-shrink: 0;
        `:(0,I.iv)`
          position: absolute;
          right: 0;
          top: 1px;
          max-width: calc(100% - 100px);
        `}};

  display: flex;
  gap: 0.25rem;
  overflow: hidden;
  background: ${e=>{let{theme:t}=e;return t.currentBackgroundAware(t.color("List.background"))}};
`,sP=I.zo.div`
  position: relative;
  display: flex;
  gap: 0.25rem;
`,sB=I.zo.div`
  display: flex;
  align-items: center;
  margin: 0 0.25rem;
  font-size: 0.75rem;
`,sR=e=>{let{repoRoot:t,author:n}=e,r=(0,D.Dv)(sD(t)),i=(0,D.Dv)(oD),o=(0,D.Dv)(od.user);return{fontWeight:i&&"*"!==o&&sS(r.name)===sS(n.name)?"bold":void 0}};function sN(e){var t;let{refs:n,readCommitResult:{oid:r,commit:{author:i,committer:o,message:a}},repoRoot:s}=e,l=(0,D.Dv)(oE),c=(0,D.Dv)(oS),d=(0,D.Dv)(oB(oI.id)),u=(0,D.Dv)(oB(oT.id)),h=(0,D.Dv)(oB(ok.id)),p=sR({author:i,repoRoot:s});return(0,C.jsxs)(sI,{children:[(0,C.jsx)(sk,{style:{flexBasis:"0%",flexGrow:1,flexShrink:1},children:(0,C.jsxs)(sP,{children:[n&&(0,C.jsx)(sL,{onLeft:c,refs:n}),(0,C.jsx)("span",{style:p,children:ao(a).subject})]})}),d&&(0,C.jsxs)(sk,{style:{flexBasis:"auto",width:"var(--column-width-1)",flexShrink:1,...p},children:[i.name,o.name!==i.name&&"*"]}),u&&(0,C.jsx)(sk,{style:{flexBasis:"auto",width:"var(--column-width-2)",flexShrink:1,...p},children:(t=1e3*(l?o:i).timestamp,as.format(t).replace(" ","\u202F"))}),h&&(0,C.jsx)(sk,{style:{flexBasis:"auto",width:"var(--column-width-3)",flexShrink:1,...p},children:aa(r)})]})}function sF(e){return`${e.type}${e.name}`}function sL(e){let{refs:t,onLeft:n}=e,{filteredRefs:r}=(0,g.useMemo)(()=>{let e=t.some(e=>"localBranch"===e.type&&e.isCurrent);return{filteredRefs:t.filter(n=>!("head"===n.type&&e||"remoteBranch"===n.type&&t.find(e=>"localBranch"===e.type&&e.trackingBranch===n.name)))}},[t]);return(0,C.jsx)(H.a,{placement:"bottom",delay:800,isDisabled:t.length<2,tooltip:(0,C.jsx)(aB.u,{withPointer:!0,children:t.map(e=>(0,C.jsxs)(sB,{children:[(0,C.jsx)(aV,{type:e.type}),e.name]},sF(e)))}),children:e=>{let{ref:i,...o}=e;return(0,C.jsx)(sT,{ref:i,asOverlay:n,...o,children:r.filter(e=>"remoteBranch"!==e.type||!t.find(t=>"localBranch"===t.type&&t.trackingBranch===e.name)).map(e=>{let t=e.name,n=[e.type];return"localBranch"===e.type&&e.trackingBranch&&(n.unshift("remoteBranch"),t=`${e.trackingBranch.split("/")[0]} & ${e.name}`),"localBranch"===e.type&&e.isCurrent&&n.push("head"),(0,C.jsx)(a$,{types:n,children:t},sF(e))})})}})}sN.__docgenInfo={description:"",methods:[],displayName:"CommitsTableRow",props:{repoRoot:{required:!0,tsType:{name:"string"},description:""},readCommitResult:{required:!0,tsType:{name:"ReadCommitResult"},description:""},refs:{required:!0,tsType:{name:"union",raw:"GitRef[] | undefined",elements:[{name:"Array",elements:[{name:"GitRef"}],raw:"GitRef[]"},{name:"undefined"}]},description:""}}};let sO=(0,I.zo)(sC.ko)`
  position: absolute;
  width: 100%;
  z-index: 1;
`,s_=I.zo.div`
  position: relative;
  min-height: 0;
  flex: 1;
  ${sE.o} {
    // the default "min-width: min-content", which is necessary for sizing overlays (e.g. Popup) containing list/tree,
    // results in horizontally scrollable table. Probably not an issue when a proper Table component is implemented.
    min-width: unset;
  }
`,sM=g.createContext({});function sG(){let e=(0,D.Dv)(on),t=ou(),{value:n,isLoading:r}=(0,D.Dv)(t4(oy,null)),i=n?.rows,o=(0,D.Dv)(nB(oj)),[a,s]=(0,D.KO)(ov);return(0,C.jsx)(sM.Provider,{value:o??{},children:(0,C.jsxs)(s_,{children:[r&&(0,C.jsx)(sO,{"aria-label":"Loading commits",isIndeterminate:!0}),i&&i.length>0&&(0,C.jsx)(sb.a,{"aria-label":"Commits list",items:i,fillAvailableSpace:!0,selectionMode:"multiple",selectedKeys:a,onSelectionChange:s,estimatedItemHeight:24,children:e=>{let{readCommitResult:t,repoPath:n}=e;return(0,C.jsx)(O.c,{textValue:t.commit.message,children:(0,C.jsx)(sM.Consumer,{children:e=>(0,C.jsx)(sN,{readCommitResult:t,repoRoot:n,refs:e[t.oid]})})},t.oid)}}),i&&0===i.length&&(0,C.jsxs)(ar,{children:["No commits matching filters",(0,C.jsx)(tf.r,{onPress:()=>t(e),children:"Reset filters"})]})]})})}sG.__docgenInfo={description:"",methods:[],displayName:"CommitsTable"};let sK=[{key:"commitTimestamp",name:"Commit Timestamp",atom:oE},{key:"referencesOnLeft",name:"References on the Left",atom:oS}],sH=[{key:"myCommits",name:"My Commits",atom:oD}],sV=[oI,ok,oT].map(e=>{let{name:t,id:n}=e;return{name:t,key:n,atom:oB(n)}}),sU=e=>{let[t,n]=(0,D.KO)(e.atom);return{...e,value:t,set:n}};function s$(){let e=sK.map(sU),t=sH.map(sU),n=sV.map(sU),r=e.concat(t).concat(n);return(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"View Options"}),children:(0,C.jsx)(iV.p,{renderMenu:i=>{let{menuProps:o}=i;return(0,C.jsxs)(iU.w,{...o,selectedKeys:r.filter(e=>{let{value:t}=e;return t}).map(e=>{let{name:t}=e;return t}),onAction:e=>{let t=r.find(t=>{let{name:n}=t;return n===e});t?t.set(e=>!e):tx()},children:[(0,C.jsxs)(iq.$,{title:"Show",children:[(0,C.jsx)(O.c,{children:"Compact References View"}),(0,C.jsx)(O.c,{children:"Tag Names"}),(0,C.jsx)(O.c,{children:"Long Edges"}),e.map(e=>{let{name:t,key:n}=e;return(0,C.jsx)(O.c,{children:t},n)}),(0,C.jsx)(O.c,{title:"Columns",children:n.map(e=>{let{name:t,key:n}=e;return(0,C.jsx)(O.c,{children:t},n)})})]}),(0,C.jsxs)(iq.$,{title:"Highlight",children:[t.map(e=>{let{name:t,key:n}=e;return(0,C.jsx)(O.c,{children:t},n)}),(0,C.jsx)(O.c,{children:"Merge Commits"}),(0,C.jsx)(O.c,{children:"Current Branch"}),(0,C.jsx)(O.c,{children:"Not Cherry-Picked Commits"})]})]})},children:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"})})})}s$.__docgenInfo={description:"",methods:[],displayName:"CommitsTableViewOptionsMenuIconButton"};let sQ=(0,I.zo)(sl.M)`
  border-radius: 2px;
  width: 219px;
  margin-right: 0.0625rem;
  margin-left: 0.2rem;
`,sq=I.zo.div`
  height: 100%;
  display: flex;
  flex-direction: column;
`,sz=(0,Z.cn)([]);function sW(e){var t;let{tabKey:n}=e,r=(0,D.Dv)(lC),[i,o]=(0,D.KO)(oc.searchQuery(n)),[a,s]=(0,D.KO)(oc.user(n)),l=(0,eT.oC)(oc.user(n)),[c,d]=(0,D.KO)(oc.date(n)),u=(0,eT.oC)(oc.date(n)),[h,p]=(0,D.KO)(sz),[m,f]=(0,g.useState)(i),A=(0,tj.k)(),x=(0,D.Dv)(oc.regExp(n)),y=(0,D.Dv)(oc.matchCase(n)),j=function(e){void 0===e&&(e=m),o(e),e&&!h.includes(e)&&p(t=>[e,...t.filter(t=>t!==e)])};(0,g.useEffect)(()=>{f(i)},[i]);let v=(0,eT.lV)((0,g.useCallback)((e,t)=>{let n=(0,ss.Z)();t(ot,e=>[...e,n]),Object.values(oc).forEach(r=>{t(r(n),e(r(e(on))))}),t(on,n)},[])),w=new Date,b=new Date;b.setDate(w.getDate()-7);let E=new Date;E.setDate(w.getDate()-1);let S=[{name:"Last 24 hours",value:{from:E}},{name:"Last 7 days",value:{from:b}}];return(0,C.jsxs)(sq,{children:[(0,C.jsxs)(at,{children:[(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Text or Hash Filter",shortcut:A(rv.FOCUS_TEXT_FILTER)}),children:(0,C.jsx)(sQ,{inputRef:r,value:m,onChange:f,onSubmit:j,onBlur:()=>j(),onClear:()=>j(""),searchHistory:h,addonAfter:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(sc.R,{as:nl.K,excludeFromTabOrder:!1,actionId:rv.REG_EXP,children:(0,C.jsx)(sc.v,{icon:x?"actions/regexSelected":"actions/regex",hoverIcon:x?"actions/regexSelected":"actions/regexHovered"})}),(0,C.jsx)(sc.R,{as:nl.K,excludeFromTabOrder:!1,actionId:rv.MATCH_CASE,children:y?(0,C.jsx)(M.vq,{icon:"actions/matchCaseSelected"}):(0,C.jsx)(sc.v,{icon:"actions/matchCase",hoverIcon:"actions/matchCaseHovered"})})]})})}),(0,C.jsxs)(iH.o,{children:[(0,C.jsx)(sy,{tabKey:n}),(0,C.jsx)(sf,{value:"*"===a?"me":a,onClear:l,renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsxs)(L.v2,{...t,onAction:e=>{if("select"===e)return tx();s(`${e}`)},children:[(0,C.jsx)(O.c,{children:"Select..."},"select"),(0,C.jsx)(O.c,{children:"me"},"*")]})},label:"User"}),(0,C.jsx)(sf,{value:c&&((t=c).from&&t.to?`Between ${i9(t.from)} and ${i9(t.to)}`:t.from?`since ${i9(t.from)}`:t.to?`until ${i9(t.to)}`:""),onClear:u,renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsx)(L.v2,{...t,onAction:e=>{let t=S.find(t=>{let{name:n}=t;return n===e});t?d(t.value):tx()},children:[(0,C.jsx)(O.c,{children:"Select..."},"select"),...S.map(e=>{let{name:t}=e;return(0,C.jsx)(O.c,{children:t},t)})]})},label:"Date"}),(0,C.jsx)(sf,{renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsxs)(L.v2,{...t,onAction:tx,children:[(0,C.jsx)(O.c,{children:"Select in..."}),(0,C.jsx)(O.c,{children:"Select in Tree..."})]})},label:"Paths"}),(0,C.jsx)(iH.J,{}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Open New Git Log Tab"}),children:(0,C.jsx)(iQ.hU,{"aria-label":"Checkout",onPress:v,children:(0,C.jsx)(M.vq,{icon:"actions/openNewTab.svg"})})})]}),(0,C.jsx)(an,{}),(0,C.jsxs)(iH.o,{style:{flexShrink:0},children:[(0,C.jsx)(nl.K,{actionId:rv.LOG_REFRESH}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Cherry-Pick"}),children:(0,C.jsx)(iQ.hU,{isDisabled:!0,children:(0,C.jsx)(M.vq,{icon:"/platform/dvcs-impl/resources/icons/cherryPick.svg"})})}),(0,C.jsx)(s$,{}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Go To Hash/Branch/Tag",shortcut:"\u2318F"}),children:(0,C.jsx)(iQ.hU,{children:(0,C.jsx)(M.vq,{icon:"actions/find"})})})]})]}),(0,C.jsx)(sG,{})]})}function sY(e,t){let n=e.flatMap(e=>{let{repoRoot:t,localBranches:n,currentBranch:r}=e;return n.map(e=>({repoRoot:t,isCurrent:r?.name===e.name,branch:e}))}),r=Object.entries((0,ri.Z)(e=>{let{branch:t}=e;return t.name},n)).map(t=>{let[n,r]=t,i=r.map(e=>{let{repoRoot:t}=e;return(0,p.basename)(t)});return{type:"localBranch",key:`localBranch:${i.join("|")}:${n}`,name:n,branches:r,isFavorite:r.some(e=>{let{repoRoot:t,branch:n}=e;return ib({repoRoot:t,branchType:"LOCAL",branchName:n.name})}),isCurrent:r.some(e=>{let{isCurrent:t}=e;return t}),repos:i.length===e.length?null:i}});return t?sX(r):r}function sZ(e,t){let n=e.flatMap(e=>{let{repoRoot:t,remoteBranches:n}=e;return n.map(e=>({repoRoot:t,branch:e}))}),r=Object.entries((0,ri.Z)(e=>{let{branch:t}=e;return`${t.remote}/${t.name}`},n)).map(t=>{let[n,r]=t,i=r.map(e=>{let{repoRoot:t}=e;return(0,p.basename)(t)});return{type:"remoteBranch",key:`remoteBranch:${i.join("|")}:${n}`,name:n,branches:r,isFavorite:r.some(e=>{let{repoRoot:t,branch:n}=e;return ib({repoRoot:t,branchType:"REMOTE",branchName:n.name})}),repos:i.length===e.length?null:i}});return t?sX(r):r}sW.__docgenInfo={description:"",methods:[],displayName:"VcsLogCommitsView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};let sJ=(0,Z.cn)(async e=>{let t=await e(im),n=e(s0("directory")),r=e(s1)&&e(s0("repository"));return[{type:"head"},{type:"branchType",branchType:"LOCAL",children:r?t.map(e=>({type:"repository",key:`LOCAL:repository:${e.repoRoot}`,repoRoot:e.repoRoot,children:sY([e],n)})):sY(t,n)},{type:"branchType",branchType:"REMOTE",children:r?t.map(e=>({type:"repository",key:`REMOTE:repository:${e.repoRoot}`,repoRoot:e.repoRoot,children:sZ([e],n)})):sZ(t,n)}]}),sX=ry({shouldCollapseDirectories:!1,getPath:e=>e.name}),s0=(0,ei.xu)(e=>(0,Z.cn)(!1)),s1=(0,Z.cn)(e=>e(tt).length>1),s2=oo(g.createRef()),s5=oo(new Set),s6=oo(new Set),s4=oo(""),s7=[{id:"directory",title:"Directory",icon:(0,C.jsx)(M.vq,{icon:"actions/GroupByPackage.svg"}),isActive:s0("directory"),isAvailable:!0},{id:"repository",title:"Repository",isActive:s0("repository"),isAvailable:s1}],s3=(0,Z.cn)(e=>s7.filter(t=>"boolean"!=typeof t.isAvailable?e(t.isAvailable):t.isAvailable).map(t=>({...t,isActive:e(s0(t.id))})));function s8(){let e=(0,eT.lV)((0,g.useCallback)((e,t)=>e=>{t(s0(e),e=>!e)},[])),t=(0,D.Dv)(s3);return(0,C.jsx)(iz,{groupings:t,onToggle:e})}s8.__docgenInfo={description:"",methods:[],displayName:"BranchesGroupByActionButton"};let s9={branchType:e=>{var t;return(0,C.jsx)(O.c,{textValue:(t=e.branchType)[0].toUpperCase()+t.slice(1).toLowerCase(),childItems:e.children,children:(0,C.jsx)(nw.J,{})},`${e.type}:${e.branchType}`)},localBranch:e=>(0,C.jsx)(O.c,{textValue:(0,p.basename)(e.name),children:(0,C.jsx)(nv.e,{children:(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:(0,C.jsx)(o7,{branches:e.branches})}),children:t=>(0,C.jsxs)(nv.e.Group,{...t,children:[e.isCurrent?(0,C.jsx)(H.a,{tooltip:(0,C.jsxs)(aB.u,{children:["Current ",e.isFavorite&&"favorite ","branch"]}),children:t=>(0,C.jsx)(nv.e.Group,{...t,children:(0,C.jsx)(M.vq,{icon:e.isFavorite?"/platform/dvcs-impl/resources/icons/currentBranchFavoriteLabel.svg":"/platform/dvcs-impl/resources/icons/currentBranchLabel.svg"})})}):(0,C.jsx)(M.vq,{icon:"vcs/branchNode"}),(0,C.jsx)(nw.J,{}),e.repos&&(0,C.jsxs)(nv.e.Hint,{children:["(",e.repos.join(", "),")"]})]})})})},`${e.key}`),remoteBranch:e=>(0,C.jsx)(O.c,{textValue:(0,p.basename)(e.name),children:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)(M.vq,{icon:e.isFavorite?"nodes/favorite.svg":"vcs/branchNode"}),(0,C.jsx)(nw.J,{}),e.repos&&(0,C.jsxs)(nv.e.Hint,{children:["(",e.repos.join(", "),")"]})]})},`${e.key}`),repository:e=>(0,C.jsx)(O.c,{textValue:(0,p.basename)(e.repoRoot),childItems:e.children,children:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)(iB,{rootPath:e.repoRoot}),(0,C.jsx)(nw.J,{})]})},`${e.key}`),directory:e=>(0,C.jsx)(O.c,{textValue:(0,p.basename)(e.dirPath),childItems:e.children,children:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)(M.vq,{icon:"nodes/folder.svg"}),(0,C.jsx)(nw.J,{})]})},`${e.type}_${e.parentNodePath}${e.dirPath}`),head:e=>(0,C.jsx)(O.c,{textValue:"HEAD (Current Branch)",children:(0,C.jsx)(nw.J,{})},`${e.type}`)},le=e=>{let[t,n,r]=e.split(":");return"head"===t?"HEAD":"localBranch"===t||"remoteBranch"===t?r??null:null},lt=I.zo.input`
  all: unset;
  flex: 1;
  align-self: stretch;
`,ln=I.zo.div`
  min-width: 0; // don't outgrow the container
  flex-grow: 1; // fill the available space
  display: flex;
  flex-direction: column;
`,lr=I.zo.span`
  display: inline-flex;
  margin-top: -0.0625rem;
  margin-left: 0.7rem;
  margin-right: 0.25rem;
  cursor: text;
`;function li(e){let{tabKey:t}=e,n=(0,D.Dv)(nB(sJ)),[r,i]=(0,D.KO)(s5(t)),[o,a]=(0,D.KO)(s6(t)),[s,l]=(0,D.KO)(s4(t)),c=(0,D.Dv)(s2(t)),d=(0,g.useRef)(null),u=(0,g.useRef)(null),[h,p]=(0,g.useState)(!1),m=(0,D.b9)(od.branch);return(0,C.jsxs)(ln,{children:[(0,C.jsxs)(at,{children:[(0,C.jsx)(lr,{children:(0,C.jsx)(M.vq,{icon:"actions/search"})}),(0,C.jsx)(lt,{ref:u,tabIndex:-1,value:s,onChange:e=>l(e.target.value),onFocus:()=>{p(!0)},onBlur:()=>{p(!1)}})]}),(0,C.jsx)(nj.b,{ref:d,treeRef:c,focusProxyRef:u,items:n??[],selectionMode:"multiple",selectedKeys:r,onSelectionChange:i,expandedKeys:o,onExpandedChange:a,onAction:e=>{let t=le(`${e}`);t&&m([t])},fillAvailableSpace:!0,showAsFocused:h,searchTerm:s,onSearchTermChange:l,keepSearchActiveOnBlur:!0,hideSpeedSearchPopup:!0,isSearchActive:!0,children:e=>s9[e.type](e)})]})}li.__docgenInfo={description:"",methods:[],displayName:"BranchesTree",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};let lo="Git.DeleteBranch",la="Git.Compare.With.Current",ls="Git.Show.My.Branches",ll="Git.Fetch",lc="Git.Toggle.Favorite",ld=v.ZP.div.withConfig({displayName:"VcsBranchesView__StyledContainer",componentId:"sc-vamle4-0"})(["display:flex;height:100%;"]);function lu(e){let{tabKey:t}=e,n=(0,D.Dv)(s2(t)),r=[{id:rv.GIT_UPDATE_SELECTED,title:"Update Selected",icon:(0,C.jsx)(M.vq,{icon:"actions/checkOut"}),actionPerformed:()=>{tx()}},{id:lo,title:"Delete branch",icon:(0,C.jsx)(M.vq,{icon:"actions/gc"}),useShortcutsOf:"SafeDelete",actionPerformed:()=>{tx()}},{id:la,title:"Compare with current",icon:(0,C.jsx)(M.vq,{icon:"actions/diff"}),useShortcutsOf:rv.SHOW_DIFF,actionPerformed:()=>{tx()}},{id:ls,title:"Show My Branches",icon:(0,C.jsx)(M.vq,{icon:"actions/find"}),actionPerformed:()=>{tx()}},{id:ll,title:"Fetch All Remotes",icon:(0,C.jsx)(M.vq,{icon:"vcs/fetch"}),actionPerformed:()=>{tx()}},{id:lc,title:"Mark/Unmark as Favorite",icon:(0,C.jsx)(M.vq,{icon:"nodes/favorite"}),actionPerformed:()=>{tx()}},...(0,ns.x)({treeRef:n})];return(0,C.jsx)(B.DG,{actions:r,children:e=>{let{shortcutHandlerProps:n}=e;return(0,C.jsxs)(ld,{...n,children:[(0,C.jsx)(lp,{}),(0,C.jsx)(li,{tabKey:t})]})}})}let lh=(0,v.ZP)(iH.o).withConfig({displayName:"VcsBranchesView__StyledToolbar",componentId:"sc-vamle4-1"})(["height:100%;flex-shrink:0;"]);function lp(){return(0,C.jsxs)(lh,{border:"right",orientation:"vertical",children:[(0,C.jsx)(nl.K,{actionId:rv.GIT_LOG_HIDE_BRANCHES}),(0,C.jsx)(iH.J,{}),(0,C.jsx)(nl.K,{actionId:rv.GIT_CREATE_NEW_BRANCH}),(0,C.jsx)(nl.K,{actionId:rv.GIT_UPDATE_SELECTED}),(0,C.jsx)(nl.K,{actionId:lo}),(0,C.jsx)(nl.K,{actionId:la}),(0,C.jsx)(nl.K,{actionId:ls}),(0,C.jsx)(nl.K,{actionId:ll}),(0,C.jsx)(nl.K,{actionId:lc}),(0,C.jsx)(nl.K,{actionId:rv.GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH}),(0,C.jsx)(iH.J,{}),(0,C.jsx)(s8,{}),(0,C.jsx)(nl.K,{actionId:ty.$.EXPAND_ALL}),(0,C.jsx)(nl.K,{actionId:ty.$.COLLAPSE_ALL})]})}lu.__docgenInfo={description:"",methods:[],displayName:"VcsBranchesView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};let lm=nX({id:rv.LOG_REFRESH,title:"Refresh",icon:(0,C.jsx)(M.vq,{icon:"actions/refresh.svg"}),useShortcutsOf:ty.$.REFRESH,actionPerformed:e=>{let{set:t}=e;t(ox)}}),lg=nX({id:rv.COPY_REVISION_NUMBER,title:"Copy Revision Number",icon:(0,C.jsx)(M.vq,{icon:"actions/copy.svg"}),useShortcutsOf:ty.$.COPY_REFERENCE,actionPerformed:async e=>{let{get:t}=e,n=await t(ow);tD()(n.join(" ")).catch(console.error)}}),lf=()=>[(0,D.Dv)(lg),(0,D.Dv)(lm)],lA=I.zo.div`
  min-height: 70%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 50px;
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  white-space: nowrap;
`;function lx(){let e=(0,B.DI)();return(0,C.jsx)(lA,{children:(0,C.jsxs)("div",{style:{textAlign:"center"},children:["To track changes to code:",(0,C.jsx)("br",{}),(0,C.jsx)(tf.r,{onPress:()=>e(rv.GIT_INIT),children:"Create Git repository..."}),(0,C.jsx)("br",{}),(0,C.jsx)(tf.r,{onPress:tx,children:"Use Local History..."}),(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),(0,C.jsx)(M.vq,{style:{verticalAlign:"text-top"},icon:"general/contextHelp.svg"})," ",(0,C.jsx)(tf.r,{onPress:tx,children:"Version Control integration"})," "]})})}lx.__docgenInfo={description:"",methods:[],displayName:"VersionControlToolWindowZeroState"};let ly=(0,Z.cn)(.25),lj=(0,Z.cn)(.35),lv=I.zo.span`
  margin: 0 0.5rem 0 0.125rem;
`,lw=I.zo.div`
  height: 100%;
  display: flex;
  :focus-visible {
    outline: none;
  }
`,lC=(0,Z.cn)(g.createRef()),lb=()=>{let e=(0,D.Dv)(ot),[t,n]=(0,D.KO)(on);return(0,D.Dv)(tt).length>0?(0,C.jsx)(n9.y,{headerContent:(0,C.jsx)(lv,{children:"Git:"}),activeKey:t,onActiveKeyChange:e=>n(`${e}`),children:e.map(e=>(0,C.jsx)(n9.y.View,{tabContent:(0,C.jsx)(lL,{tabKey:e}),children:(0,C.jsx)(lk,{tabKey:e})},e))}):(0,C.jsx)(nn.n,{headerContent:"Version Control",children:(0,C.jsx)(lx,{})})},lE=I.zo.button.attrs({tabIndex:-1})`
  box-sizing: border-box;
  all: unset;
  width: 1.71875rem;
  align-items: center;
  display: flex;
  flex-direction: column;
  padding: 0.5rem 0;
  gap: 0.625rem;
  background: ${e=>{let{theme:t}=e;return t.color("*.background")}};
  color: ${e=>{let{theme:t}=e;return t.color("*.foreground")}};
  :disabled {
    color: ${e=>{let{theme:t}=e;return t.color("Button.disabledText")}};
  }
  &:hover {
    background: ${e=>{let{theme:t}=e;return t.color("ToolWindow.Button.hoverBackground",t.dark?"#0f0f0f28":"#55555528")}};
  }
`,lS=(0,I.zo)(lE)`
  border-right: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.borderColor}};
`,lD=I.zo.span`
  writing-mode: vertical-lr;
  transform: rotateZ(180deg);
  font-size: 0.6875rem;
`;function lI(e){let{onPress:t}=e;return(0,C.jsxs)(lS,{onClick:t,children:[(0,C.jsx)(M.vq,{icon:"actions/arrowExpand"}),(0,C.jsx)(lD,{children:"Branches"})]})}function lk(e){let{tabKey:t}=e,[n,r]=(0,D.KO)(ly),[i,o]=(0,D.KO)(lj),a=[...lf(),(0,D.Dv)(lN),(0,D.Dv)(lP),(0,D.Dv)(lT),(0,D.Dv)(lB),(0,D.Dv)(lR),lF],[s,l]=(0,D.KO)(oa(t)),c=s?{firstView:(0,C.jsx)(lu,{tabKey:t}),firstSize:n,onFirstResize:r,firstViewMinSize:85}:{};return(0,C.jsx)(B.DG,{actions:a,children:e=>{let{shortcutHandlerProps:n}=e;return(0,C.jsxs)(lw,{...n,tabIndex:s?-1:0,children:[!s&&(0,C.jsx)(lI,{onPress:()=>l(!0)}),(0,C.jsx)(rn.D,{...c,innerView:(0,C.jsx)(sW,{tabKey:t}),innerViewMinSize:200,lastView:(0,C.jsx)(sr,{tabKey:t}),lastSize:i,onLastResize:o,lastViewMinSize:40})]})}})}let lT=nX({id:rv.MATCH_CASE,title:"Match Case",icon:(0,C.jsx)(M.vq,{icon:"actions/matchCase.svg"}),actionPerformed:e=>{let{get:t,set:n}=e;n(oc.matchCase(t(on)),e=>!e)}}),lP=nX({id:rv.GIT_LOG_HIDE_BRANCHES,title:"Hide Git Branches",icon:(0,C.jsx)(M.vq,{icon:"actions/arrowCollapse"}),actionPerformed:e=>{let{get:t,set:n}=e;n(oa(t(on)),!1)}}),lB=nX({id:rv.REG_EXP,title:"Regex",icon:(0,C.jsx)(M.vq,{icon:"actions/regex"}),actionPerformed:e=>{let{get:t,set:n}=e;n(oc.regExp(t(on)),e=>!e)}}),lR=nX({id:rv.SHOW_DETAILS,title:"Show Details",description:"Display details panel",actionPerformed:e=>{let{get:t,set:n}=e;n(os(t(on)),e=>!e)}}),lN=nX({id:rv.FOCUS_TEXT_FILTER,title:"Focus Text Filter",actionPerformed:e=>{let{get:t}=e;t(lC).current?.focus()}}),lF={id:rv.SHOW_DIFF_PREVIEW,title:"Show Diff Preview",description:"Show Diff Preview Panel",actionPerformed:()=>tx()};function lL(e){let{tabKey:t}=e,n=(0,eT.lV)(oh);return(0,C.jsx)(ae.v,{title:(0,D.Dv)(or(t)),closeButton:"MAIN"!==t&&(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Close Tab"}),children:(0,C.jsx)($.W,{onPress:()=>n(t)})})})}lb.__docgenInfo={description:"",methods:[],displayName:"VersionControlToolWindow"};let lO=[{id:"Project",title:"Project",icon:(0,C.jsx)(M.vq,{icon:"toolwindows/toolWindowProject"}),content:(0,C.jsx)(n8,{}),initialState:(0,nt.x5)({isVisible:!0,weight:.23})},{id:"Terminal",title:"Terminal",icon:(0,C.jsx)(M.vq,{icon:"toolwindows/toolWindowProject"}),content:(0,C.jsx)(nn.n,{headerContent:"Terminal",children:(0,C.jsx)(na,{})}),initialState:(0,nt.x5)({anchor:"bottom"})},{id:o3,title:"Commit",icon:(0,C.jsx)(M.vq,{icon:"toolwindows/toolWindowCommit"}),content:(0,C.jsx)(g.Suspense,{children:(0,C.jsx)(o9,{})}),initialState:(0,nt.x5)({anchor:"left",isSplit:!0,isVisible:!1})},{id:"Version Control",title:"Version Control",icon:(0,C.jsx)(M.vq,{icon:"toolwindows/toolWindowChanges"}),content:(0,C.jsx)(g.Suspense,{children:(0,C.jsx)(lb,{})}),initialState:(0,nt.x5)({anchor:"bottom",weight:.35})}];var l_=n("77298"),lM=n("29514"),lG=n("69842");let lK=(0,Z.cn)(!1),lH=(0,Z.cn)(null);var lV=n("83212"),lU=n("52973");let l$=v.ZP.div.withConfig({displayName:"TasksPopup__StyledPopupTitle",componentId:"sc-rjwznj-0"})(["flex:1;text-align:center;overflow:hidden;text-overflow:ellipsis;margin:0 0.625rem;"]);function lQ(){let e=(0,D.b9)(lK),t=(0,D.Dv)(i0),n=i4(),[r,i]=(0,D.KO)(lH);return(0,C.jsx)(lU.GI,{bounds:r||{width:300,left:window.innerWidth-300-150,top:window.innerHeight-80*t.length-30-100},onBoundsChange:e=>{i(e)},minHeight:100,minWidth:300,nonDismissable:!0,interactions:"all",children:(0,C.jsx)(lU.GI.Layout,{header:(0,C.jsxs)(lU.GI.Header,{hasControls:!0,children:[(0,C.jsx)(l$,{children:"Background Tasks"}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(aB.u,{children:"Hide"}),children:(0,C.jsx)(iQ.hU,{preventFocusOnPress:!0,excludeFromTabOrder:!0,onPress:()=>e(!1),children:(0,C.jsx)(M.vq,{icon:"general/hideToolWindow"})})})]}),content:(0,C.jsx)(C.Fragment,{children:t.map((e,r)=>(0,C.jsxs)(g.Fragment,{children:[(0,C.jsx)(sC.ko,{style:{margin:".5rem 0.75rem"},name:e.title,isIndeterminate:e.progress.isIndeterminate,"aria-label":`Progress of ${e.title}`,details:e.progress.text||(e.progress.secondaryText?(0,C.jsx)(C.Fragment,{children:"\xa0"}):void 0),secondaryDetails:e.progress.secondaryText,value:e.progress.fraction,maxValue:1,button:e.isCancelable&&(0,C.jsx)(lG.b,{onPress:()=>n(e.id)})}),t[r+1]&&(0,C.jsx)(lV.lX,{})]},e.id))})})})}function lq(e){return(0,C.jsx)(sC.ko,{dense:!0,namePosition:"side",width:146,...e})}lQ.__docgenInfo={description:"",methods:[],displayName:"TasksPopup"};let lz=v.ZP.span.withConfig({displayName:"StatusBarTaskProgressBar__Spacer",componentId:"sc-vrkr3d-0"})(["width:0.5rem;"]),lW=v.ZP.span.withConfig({displayName:"StatusBarTaskProgressBar__StyledProgressBarButton",componentId:"sc-vrkr3d-1"})(["cursor:pointer;","{cursor:unset;}"],sC.ko.Container),lY=()=>{let e=(0,D.Dv)(i1),t=(0,D.Dv)(i2),n=i4(),[r,i]=(0,D.KO)(lK);return(0,g.useEffect)(()=>{0===t&&i(!1)},[t]),(0,C.jsxs)(C.Fragment,{children:[e&&!r&&(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(aB.u,{children:`${e.title}. Click to see all running background tasks.`}),children:(0,C.jsx)(su.V,{preventFocusOnPress:!0,excludeFromTabOrder:!0,onPress:()=>{i(!0)},children:(0,C.jsx)(lW,{children:(0,C.jsx)(lq,{name:e.progress.text||e.title,isIndeterminate:e.progress.isIndeterminate,value:e.progress.fraction,maxValue:1,button:(0,C.jsx)(C.Fragment,{children:e.isCancelable&&(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(aB.u,{children:"Cancel"}),children:(0,C.jsx)(lG.b,{small:!0,onPress:()=>n(e.id)})})})})})})}),(t>1||r)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(lz,{}),(0,C.jsxs)(tf.r,{onPress:()=>i(e=>!e),children:[r?"Hide processes":"Show all"," (",t,")"]})]}),r&&t>0&&(0,C.jsx)(lQ,{})]})};lY.__docgenInfo={description:'Intentionally, "processes" haven\'t been abstracted as an extension point for different features, since the focus\nhere is not to create an IDE, but to demo UI components.',methods:[],displayName:"StatusBarTaskProgressBar"};var lZ=n("60947");let lJ=(0,Z.cn)(e=>{let t=e(t_)?.filePath;return(t&&e(tn(t)))??e(tt)[0]?.dir}),lX=(0,Z.cn)(async e=>{let t=await e(lJ);return t?e(ih(t)):null}),l0=(d=(0,Z.cn)(async e=>{let t=e(t_)?.filePath;return t?e(ig(t)):null}),(0,ei.kv)(d,(e,t)=>e instanceof Promise?Promise.all([e,t]).then(e=>{let[t,n]=e;return t??n??t}):e??t??e)),l1=(0,Z.cn)(async e=>{let t=await e(l0);if(t)return{detached:!1,head:t};let n=await e(lJ);return n?{detached:!0,head:await (0,f.qq)({fs:r,dir:n,ref:"HEAD"})}:null});var l2=n("80850"),l5=n("80842"),l6=n("70920");function l4(e,t){return e?.remoteBranches.some(e=>`${e.remote}/${e.name}`===t)?"CLASHING_WITH_REMOTE":e?.localBranches.some(e=>{let{name:n}=e;return n===t})?"EXISTING":null}let l7=RegExp(`(^\\.)|(^-)|(^/)|(\\.\\.)+|[ ~:^?*\\[\\\\]+|(@\\{)+|[${Array(32).fill(null).map((e,t)=>String.fromCharCode(t)).join("")}u007F]`);function l3(e){return e.replace(l7,"_")}let l8=I.zo.div`
  padding: 0.5rem 1rem;
`,l9=(0,I.zo)(l6.U)`
  width: 100%;
`,ce={EXISTING:e=>(0,C.jsxs)(C.Fragment,{children:["Branch name ",e," already exists ",(0,C.jsx)("br",{})]}),CLASHING_WITH_REMOTE:e=>(0,C.jsxs)(C.Fragment,{children:["Branch name ",e," clashes with remote branch ",(0,C.jsx)("br",{}),"with the same name"]})};function ct(e){let{branchName:t,repoRoot:n,close:i}=e,[o,a]=(0,g.useState)(t),[s,l]=(0,g.useState)(!1),c=(0,T.L)(),d=(0,D.Dv)(ih(n)),u=function(){let e=iD();return(0,eT.lV)((0,g.useCallback)(async(t,n,i,o,a)=>{await (0,f.R_)({fs:r,dir:i,oldref:o,ref:a}),n(ih(i));let s={branchType:"LOCAL",branchName:o,repoRoot:i};iS(t(iw),t(iC),s)&&(e(s,!1),e({...s,branchName:a},!0))},[]))}(),h=l4(d,o),p=h&&s?"error":"valid";return(0,C.jsx)(nM.Du,{minWidth:"content",minHeight:"content",children:(0,C.jsx)(nG.b,{header:`Rename branch ${t}`,content:(0,C.jsx)(l8,{children:(0,C.jsx)("form",{id:"branch_rename_form",onSubmit:e=>{e.preventDefault(),h?l(!0):u(d.repoRoot,t,o).catch(e=>{c.show({icon:"Error",title:"Unexpected error",body:`Could not rename branch ${t} to ${o}.`}),console.error("Branch rename error: ",e)}).then(()=>{i()})},children:(0,C.jsx)(l9,{labelPlacement:"above",label:"New branch name:",value:o,onChange:e=>{a(l3(e)),l(!0)},validationState:p,validationMessage:h&&"error"===p?ce[h]?.(t):void 0})})}),footer:(0,C.jsx)(nG.b.Footer,{right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nH.z,{onPress:i,children:"Cancel"}),(0,C.jsx)(nH.z,{variant:"default",type:"submit",form:"branch_rename_form",isDisabled:!!h&&s,children:"Rename"})]})})})})}ct.__docgenInfo={description:"",methods:[],displayName:"RenameBranchWindow",props:{branchName:{required:!0,tsType:{name:"string"},description:""},repoRoot:{required:!0,tsType:{name:"string"},description:""},close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let cn=I.zo.div`
  box-sizing: border-box;
  padding: 0 0.375rem;
  display: flex;
  align-items: center;
  width: 100%;
`,cr=I.zo.div`
  flex: 1;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  margin: 0 0.625rem;
`,ci=(0,Z.cn)(void 0);function co(e){let{close:t}=e,n=(0,D.Dv)(nB(im)),[i,o]=(0,D.KO)(ci),[a,s]=(0,g.useState)(i??{}),l=(0,B.BH)(rv.GIT_CREATE_NEW_BRANCH),c=(0,eT.lV)((0,g.useCallback)((e,t,n,i)=>(0,f.NA)({fs:r,dir:n,ref:i}).then(()=>{t(ih(n))}),[])),d=(0,T.L)(),u=(0,y.S)(),h=(0,eT.lV)((0,g.useCallback)(async(e,t,n,i,o)=>{let a=eI(e,t);await (0,f.JE)({fs:r,dir:n,remote:o,ref:i}),console.log(`checked out branch ${i}`),t(ih(n)),t(eD(n));let s=e(tL);t(tL,await il(async e=>{let{filePath:t}=e,n=await r.promises.exists(t);return console.log(`updating the content of the file ${t}`,n),n&&await a(t),n},s))},[])),{isFavorite:p,toggleFavorite:A}=iI();if(!n)return null;let x=1===n.length?`Git Branches in ${m().basename(n[0].repoRoot)}`:"Git Branches";return(0,C.jsx)(lU.GI,{interactions:"all",minHeight:55,minWidth:300,bounds:a,onBoundsChange:(e,t)=>{"resize"===t&&o({width:e.width,height:e.height}),s(e)},children:(0,C.jsx)(l2.F,{header:(0,C.jsx)(lU.GI.Header,{hasControls:!0,children:(0,C.jsxs)(cn,{children:[(0,C.jsx)(cr,{children:x}),(0,C.jsxs)(iH.o,{children:[(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Fetch"}),children:(0,C.jsx)(iQ.hU,{onPress:()=>{tx(),t()},children:(0,C.jsx)(M.vq,{icon:"vcs/fetch.svg"})})}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Restore Popup Size"}),children:(0,C.jsx)(iQ.hU,{isDisabled:void 0===i,onPress:()=>{o(void 0),s(e=>{let{width:t,height:n,...r}=e;return{...r}})},children:(0,C.jsx)(M.vq,{icon:"general/fitContent.svg"})})})]})]})}),content:(0,C.jsxs)(iU.w,{"aria-label":x,submenuBehavior:"toggleOnPress",fillAvailableSpace:!0,autoFocus:"first",disabledKeys:n.flatMap(e=>{let{localBranches:t,repoRoot:n}=e;return t.filter(e=>{let{trackingBranch:t}=e;return!t}).map(e=>{let{name:t}=e;return`${n}/pull-${t}`})}),onAction:e=>{let[t,r,i]=`${e}`.split("//");async function o(e){try{await e()}catch(e){e instanceof f.D1.CheckoutConflictError?d.show({icon:"Error",title:"Git Checkout Problem",body:e.message}):d.show({icon:"Error",title:"Checkout failed",body:`Could not checkout branch ${r}`})}}if(e===l?.id)return l?.perform();switch(i){case"delete":return c(t,r).then(()=>{d.show({title:`Deleted branch: ${r}`,icon:"Info",actions:(0,C.jsx)(l5.g,{onPress:tx,children:"Restore"})})},()=>{d.show({title:`Could not deleted branch: ${r}`,icon:"Error"})});case"rename":return u.open(e=>{let{close:n}=e;return(0,C.jsx)(ct,{repoRoot:t,branchName:r,close:n})});case"checkout":return o(()=>h(t,r));case"remote-checkout":return function(){let e=n?.find(e=>{let{repoRoot:n}=e;return n===t})?.remoteBranches.find(e=>{let{name:t,remote:n}=e;return`${n}/${t}`===r});if(e)return o(()=>h(t,e.name,e.remote))}();default:return tx()}},onClose:t,children:[l&&(0,C.jsx)(O.c,{textValue:l.title,children:(0,C.jsx)(K._,{icon:l.icon,content:l.title})},l.id),(0,C.jsx)(O.c,{children:"Checkout Tag or Revision..."},"checkout_revision"),n.flatMap(e=>{let{remoteBranches:t,localBranches:r,repoRoot:i,currentBranch:o}=e,a=(e,t)=>n.length>1?`${e} in ${m().basename(t)}`:e,s=(e,t)=>[!t&&(0,C.jsx)(O.c,{children:`Compare with '${e}'`},`${i}//${e}//compare-with-branch`),(0,C.jsx)(O.c,{children:"Show Diff with Working Tree"},`${i}//${e}//show-diff-with-working-tree`),(0,C.jsx)(nS.i,{},"compare-actions-divider")],l=(e,t)=>t&&e!==t&&[(0,C.jsx)(O.c,{children:`Rebase '${t}' onto '${e}'`},`${i}//${e}//rebase-current-onto`),(0,C.jsx)(O.c,{children:`Merge '${e}' onto '${t}'`},`${i}//${e}//merge-into-current`),(0,C.jsx)(nS.i,{},"merge-actions-divider")];return[(0,C.jsx)(iq.$,{title:a("Local Branches",i),children:r.map(e=>{let{name:t,trackingBranch:n}=e,r=t===o?.name,a={branchName:t,branchType:"LOCAL",repoRoot:i};return(0,C.jsxs)(O.c,{textValue:t,title:(0,C.jsx)(K._,{content:t,icon:(0,C.jsx)(sx,{isFavorite:p(a),isCurrent:r,onClick:()=>{A(a)}}),shortcut:n&&(0,C.jsx)(nv.e.Hint,{small:!0,children:n})}),children:[!r&&(0,C.jsx)(O.c,{children:"Checkout"},`${i}//${t}//checkout`),(0,C.jsx)(O.c,{children:`New Branch from '${t}'...`},`${i}//${t}//new-branch-from`),!r&&(0,C.jsx)(O.c,{children:`Checkout and rebase onto '${t}'`},`${i}//${t}//checkout-and-rebase-onto`),(0,C.jsx)(nS.i,{},"new-branch-actions-divider"),s(t,r),l(t,o?.name),(0,C.jsx)(O.c,{children:"Update"},`${i}//${t}//pull`),(0,C.jsx)(O.c,{children:"Push..."},`${i}//${t}//push`),(0,C.jsx)(nS.i,{},"push-divider"),(0,C.jsx)(O.c,{children:"Rename..."},`${i}//${t}//rename`),!r&&(0,C.jsx)(O.c,{children:"Delete"},`${i}//${t}//delete`)]},`${i}//${t}`)})},`${i}//local_branches`),(0,C.jsx)(iq.$,{title:a("Remote Branches",i),children:t.map(e=>{let t=`${e.remote}/${e.name}`,n={branchName:t,branchType:"REMOTE",repoRoot:i};return(0,C.jsxs)(O.c,{textValue:t,title:(0,C.jsx)(K._,{content:t,icon:(0,C.jsx)(sx,{isFavorite:p(n),onClick:()=>{A(n)}})}),children:[(0,C.jsx)(O.c,{children:"Checkout"},`${i}//${t}//remote-checkout`),(0,C.jsx)(O.c,{children:`New Branch from '${t}'...`},`${i}//${t}//new-branch-from`),(0,C.jsx)(O.c,{children:`Checkout and rebase onto '${t}'`},`${i}//${t}//checkout-and-rebase-onto`),(0,C.jsx)(nS.i,{},"new-branch-actions-divider"),s(t,!1),l(t,o?.name),(0,C.jsx)(O.c,{children:`Pull into '${t}' Using Merge`},`${i}//${t}//pull-into-using-merge`),(0,C.jsx)(O.c,{children:`Pull into '${t}' Using Rebase`},`${i}//${t}//pull-into-using-rebase`),(0,C.jsx)(nS.i,{}),(0,C.jsx)(O.c,{children:"Delete"},`${i}//${t}//delete`)]},`${i}//${t}`)})},`${i}//remote_branches`)]})]})})})}co.__docgenInfo={description:"",methods:[],displayName:"BranchesPopup",props:{close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let ca=!1,cs=()=>{let e=(0,T.L)(),t=(0,D.Dv)(tt),n=(0,B.DI)();return async()=>{t.length<2&&!ca&&(ca=!0,e.showSticky({title:"Clone another repository",icon:(0,C.jsx)(M.vq,{icon:"actions/quickfixOffBulb.svg"}),body:"Git integration in the example app supports multiple repos within the same project. See it in action by cloning another repo",actions:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(l5.g,{onPress:()=>{n("ExampleApp.cloneExampleRepo")},children:"Clone another repo"})})}))}};function cl(){let e=(0,D.Dv)(nB(l1)),t=cs();return e&&(0,C.jsx)(lZ.q,{placement:"top",onOpenChange:e=>{e||setTimeout(t,500)},popup:e=>{let{close:t}=e;return(0,C.jsx)(co,{close:t})},children:(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:e.detached?"Git: Detached HEAD doesn't point to any branch":`Git Branch: ${e.head}`}),children:(0,C.jsx)(lM.V,{icon:(0,C.jsx)(M.vq,{icon:e.detached?"general/warning.svg":"vcs/branch.svg"}),label:e.head.slice(0,e.detached?8:void 0)})})})}cl.__docgenInfo={description:"",methods:[],displayName:"BranchPopupTrigger"};let cc=v.ZP.div.withConfig({displayName:"IdeStatusBar__StyledLastMessage",componentId:"sc-1hz1fp-0"})(["margin-left:0.75rem;cursor:pointer;"]),cd=()=>{let e=(0,D.Dv)(tM);return(0,C.jsx)(l_.A,{left:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(M.vq,{icon:"general/tbHidden.svg",role:"button",onClick:tx}),(0,C.jsx)(cc,{children:"Tooltip content or last message will show up here."})]}),right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(lY,{}),(0,C.jsx)(lM.V,{onPress:tx,label:"LF"}),(0,C.jsx)(lM.V,{onPress:tx,label:`${e.lineNumber},${e.column}`}),(0,C.jsx)(lM.V,{label:"UTF-8"}),(0,C.jsx)(sd.b,{renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsxs)(L.v2,{...t,onAction:tx,children:[(0,C.jsx)(O.c,{children:"Configure Indents for Typescript"}),(0,C.jsx)(O.c,{children:"Disable Indents Detection for Project"})]})},children:(e,t)=>(0,C.jsx)(lM.V,{...e,ref:t,label:"2 spaces"})}),(0,C.jsx)(sd.b,{renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsxs)(L.v2,{...t,onAction:tx,children:[(0,C.jsxs)(O.c,{title:"Compile",children:[(0,C.jsx)(O.c,{children:"packages/jui/tsconfig.json"}),(0,C.jsx)(O.c,{children:"packages/jui/src/StatusBar/StatusBar.stories.tsx"}),(0,C.jsx)(O.c,{children:"Compile All"})]}),(0,C.jsx)(nS.i,{}),(0,C.jsx)(O.c,{children:(0,C.jsx)(K._,{icon:(0,C.jsx)(M.vq,{icon:"javaee/updateRunningApplication.svg"}),content:"Restart Typescript Service"})}),(0,C.jsx)(O.c,{children:(0,C.jsx)(K._,{icon:(0,C.jsx)(M.vq,{icon:"general/settings.svg"}),content:"Configure Typescript..."})})]})},children:(e,t)=>(0,C.jsx)(lM.V,{...e,ref:t,label:"TypeScript 4.4.3"})}),(0,C.jsx)(cl,{}),(0,C.jsx)(lM.V,{icon:(0,C.jsx)(M.vq,{icon:"ide/readwrite.svg"})}),(0,C.jsx)(lM.V,{icon:(0,C.jsx)(M.vq,{icon:"ide/fatalError.svg"})})]})})};cd.__docgenInfo={description:"",methods:[],displayName:"IdeStatusBar"};var cu=n("91555");let ch=()=>(0,C.jsx)(L.v2,{disabledKeys:["showDiff"],"aria-label":"Context menu",onAction:tx,children:(0,C.jsx)(O.c,{textValue:"Show Diff",children:(0,C.jsx)(K._,{icon:(0,C.jsx)(M.vq,{icon:"actions/diff.svg"}),content:"Show Diff"})},"showDiff")});ch.__docgenInfo={description:"",methods:[],displayName:"RollbackTreeContextMenu"};let cp=I.zo.div`
  box-sizing: border-box;
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 1rem 0.75rem 0;
`,cm=I.zo.div`
  border: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.contrastBorder}};
  flex: 1;
  overflow: auto;
`,cg=I.zo.div`
  &:not(:empty) {
    line-height: 1.5;
    padding-left: 0.375rem;
    margin-bottom: 0.75rem;
  }
`;function cf(){let e=(0,D.Dv)(rK),t=(0,D.Dv)(rM).map(rC),{fileCountsMap:n}=(0,D.Dv)(r6),[r,i]=(0,D.KO)(r_),o=(0,D.Dv)(rG),[a,s]=(0,g.useState)(new Set(t.slice(0,1))),[l,c]=(0,g.useState)(e),[d,u]=(0,g.useState)(new Set(t)),h=(0,cu.T)({rootNodes:o,getKey:e=>e.key,getChildren:e=>rE(e)?e.children:null},{selectedKeys:d,onSelectedKeysChange:u}),p=(0,D.Dv)(rd).filter(e=>d.has(rC(e))),m=rh(),f=(0,T.L)(),A=(0,D.b9)(rO),x=()=>A(!1),y=(0,g.useRef)(null),j=(0,ns.x)({treeRef:y}),[v,w]=(0,g.useState)(!1),b=p.some(e=>"ADDED"===e.type);return(0,C.jsx)(nM.Du,{onClose:x,bounds:r,onBoundsChange:i,minHeight:200,minWidth:275,children:(0,C.jsx)(nG.b,{header:"Rollback changes",content:(0,C.jsx)(B.DG,{actions:j,children:e=>{let{shortcutHandlerProps:t}=e;return(0,C.jsxs)(cp,{...t,children:[(0,C.jsxs)("div",{style:{display:"flex"},children:[(0,C.jsxs)(iH.o,{children:[(0,C.jsx)(iQ.hU,{isDisabled:!0,children:(0,C.jsx)(M.vq,{icon:"actions/diff"})}),(0,C.jsx)(iV.p,{renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsx)(L.v2,{...t,selectedKeys:[],onAction:tx,children:(0,C.jsx)(iq.$,{title:"Group By",children:rT.map(e=>(0,C.jsx)(O.c,{children:e.title},e.id))})})},children:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"})})]}),(0,C.jsx)("span",{style:{flex:1}}),(0,C.jsxs)(iH.o,{children:[(0,C.jsx)(nl.K,{actionId:ty.$.EXPAND_ALL}),(0,C.jsx)(nl.K,{actionId:ty.$.COLLAPSE_ALL})]})]}),(0,C.jsx)(cm,{children:(0,C.jsx)(F.X,{renderMenu:()=>(0,C.jsx)(ch,{}),style:{height:"100%"},children:(0,C.jsx)(ii.G,{treeRef:y,items:o,selectionMode:"multiple",selectedKeys:a,onSelectionChange:s,expandedKeys:l,onExpandedChange:c,nestedSelection:h,fillAvailableSpace:!0,children:e=>{let t=iG.getItemProps({node:e,fileCountsMap:n});return(0,C.jsxs)(O.c,{...t,children:[e.children?.length!==0&&(0,C.jsx)(io.x,{selectionState:h.getSelectionState(e),onToggle:()=>h.toggle(e)}),t.children]})}})})})]})}}),footer:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{style:{padding:".5rem 0.75rem 0",display:"flex",flexDirection:"column"},children:[(0,C.jsx)(cg,{children:(0,C.jsx)(oG,{changes:p})}),(0,C.jsx)(nK.X,{isDisabled:!b,isSelected:v,onChange:w,mnemonic:"D",children:"Delete local copies of the added files"})]}),(0,C.jsx)(nG.b.Footer,{right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nH.z,{onPress:x,mnemonic:"C",children:"Close"}),(0,C.jsx)(nH.z,{variant:"default",mnemonic:"R",isDisabled:0===p.length,onPress:()=>{m(p,v).catch(e=>{f.show({title:"Reverting changes failed",icon:"Error",body:"Could not revert selected changes. See console for more info"}),console.error("Git revert error:",e)}).finally(x)},children:"Rollback"})]})})]})})})}cf.__docgenInfo={description:"",methods:[],displayName:"RollbackWindow"};let cA=(0,Z.cn)(new nt.iC(Object.fromEntries(lO.map(e=>{let{id:t,initialState:n}=e;return[t,n]})),{removedFromSideBarIds:lO.filter(e=>{let{showStripeButton:t}=e;return!1===t}).map(e=>{let{id:t}=e;return t})}));var cx=n("31671"),cy=n("10879"),cj=n("98688");let cv=[{actionId:ty.$.EXPAND_SELECTION,title:"Press $shortcut to expand selection"},{actionId:ty.$.SHRINK_SELECTION,title:"Press $shortcut to shrink selection"}],cw=()=>{let e=(0,x.og)(),t=(0,g.useMemo)(()=>cv.map(t=>{let{actionId:n,title:r}=t;return{keyboardShortcut:e?.[n]?.find(e=>"keyboard"===e.type),title:r}}).filter(e=>{let{keyboardShortcut:t}=e;return t}).map(e=>{let{keyboardShortcut:t,title:n}=e;return n.replace("$shortcut",(0,cj.W)(t))}),[e]),[n,r]=(0,g.useState)(Math.floor(Math.random()*t.length));return{current:t[n],next:()=>{let e=Math.floor(Math.random()*(t.length-1)),i=e<n?e:e+1;console.log("changing index to",i,"tmpIndex",e),r(i)}}};var cC=n("48233"),cb=n("35200");let cE=g.forwardRef(function(e,t){let n=(0,cC.B)(t),{focusableProps:r}=(0,cb.k)({autoFocus:e.autoFocus},n);return(0,C.jsx)("input",{...(0,W.d)(r,e),ref:n})});cE.__docgenInfo={description:"",methods:[],displayName:"Input"};let cS={isOpen:(0,Z.cn)(!1),tab:(0,Z.cn)("All"),contextElement:(0,Z.cn)(null),initialSearchQuery:(0,ei.xu)(e=>(0,Z.cn)("")),bounds:(0,Z.cn)(null)};function cD(e){let{hasContent:t,persistedBoundsAtom:n,noContentHeight:r,minHeight:i,...o}=e,a=(0,D.b9)(n),[s,l]=(0,g.useState)((0,D.Dv)(n)??{top:150,height:Math.max(200,window.innerHeight-300)}),c=(0,g.useRef)(s.height);return(0,g.useEffect)(()=>{l(e=>({...e,height:t?c.current:r}))},[t]),(0,C.jsx)(lU.GI,{...o,bounds:s,onBoundsChange:e=>{t&&(c.current=e.height,a(e)),l(e)},minHeight:t?i:r})}cD.__docgenInfo={description:"A special type of popup, where the content can be toggled on and off. Needed only for SearchEveryWhere at the moment,\nbut extracted as a component, to collocate related pieces, rather than leave them with the rest of the code in the\ncomponent.\n- Updates persisted {@param boundsState}, when the bounds are changed, only if the content is shown when the bounds\n  is changed.\n- Minimizes the popup into {@param noContentHeight}, when {@param hasContent} is `false`.\n- Restores the popup height to it's latest value, or based on content, when {@param hasContent} changes to `true`.\n- Returns the right to be applied based on the input {@param minHeight} and {@param hasContent}.",methods:[],displayName:"ContentAwarePopup",props:{hasContent:{required:!0,tsType:{name:"boolean"},description:"Whether the popup has content. If `false`, the popup is minimized to `noContentHeight`."},noContentHeight:{required:!0,tsType:{name:"number"},description:"The minimized height of the popup, when there is no content."},persistedBoundsAtom:{required:!0,tsType:{name:"WritableAtom",elements:[{name:"union",raw:"Partial<Bounds> | null",elements:[{name:"Partial",elements:[{name:"Bounds"}],raw:"Partial<Bounds>"},{name:"null"}]},{name:"tuple",raw:"[Partial<Bounds> | null]",elements:[{name:"union",raw:"Partial<Bounds> | null",elements:[{name:"Partial",elements:[{name:"Bounds"}],raw:"Partial<Bounds>"},{name:"null"}]}]},{name:"void"}],raw:"WritableAtom<\n  Partial<Bounds> | null,\n  [Partial<Bounds> | null],\n  void\n>"},description:"Persisted state of the popup bounds, in form of an atom."}}};var cI=n("12746"),ck=n("90297"),cT=n("81863");let cP=I.zo.span`
  width: 0.9375rem;
  margin-right: 0.25rem;
  display: inline-flex;
  justify-content: center;
`,cB=(0,I.zo)(nv.e)`
  min-height: 1.375rem;
  width: 100%;
  padding: 0;
`,cR=I.zo.span`
  color: ${e=>{let{theme:t,isDisabled:n}=e;return n&&t.currentForegroundAware(t.commonColors.inactiveTextColor)}};
`,cN=I.zo.div`
  flex: 1;
`;function cF(e){let{action:t,highlights:n}=e,{isSelected:r}=(0,g.useContext)(nC.k)||{};return(0,C.jsxs)(cB,{children:[(0,C.jsx)(cP,{children:t.icon}),(0,C.jsx)(cR,{isDisabled:t.isDisabled,children:r?(0,C.jsx)(ck.x,{highlights:n,children:t.title}):t.title}),(0,C.jsx)(nv.e.Hint,{style:{fontSize:".85em",fontWeight:"bold"},children:t.shortcut}),(0,C.jsx)(cN,{}),(0,C.jsx)(nv.e.Hint,{style:{marginRight:"-0.375rem"},children:(function(e,t){let n=(0,cT.nf)(e)?e.parent:null,r=[];for(;n;)r.unshift(t?n[t]:n),n=n.parent;return r})(t,"title").join(" | ")})]})}cF.__docgenInfo={description:"UI of actions in SearchEverywhere list",methods:[],displayName:"ActionItem",props:{action:{required:!0,tsType:{name:"Action"},description:""},highlights:{required:!0,tsType:{name:"union",raw:"null | TextRange[]",elements:[{name:"null"},{name:"Array",elements:[{name:"TextRange"}],raw:"TextRange[]"}]},description:""}}};let cL={id:"Actions",title:"Actions",actionId:ty.$.GO_TO_ACTION,use:e=>{let{everyWhereAutoSet:t}=e,n=(0,D.Dv)(cS.contextElement),[r,i]=(0,g.useState)(null),o=(0,g.useMemo)(()=>n?(0,B.C9)(n):[],[n]),a=r??t,s=[{id:ty.$.SHOW_INTENTION_ACTIONS,title:"Assign a shortcut",actionPerformed:tx}];return{search:e=>{let t=o.map(t=>({highlights:(0,cI.M)(t.title,e),action:t})).filter(t=>{let{action:n,highlights:r}=t;return r||(0,cI.M)(n.description||"",e)});return a?t:t.filter(e=>{let{action:t}=e;return!t.isDisabled})},searchDeps:[a],isEverywhere:a,toggleEverywhere:()=>{i(e=>!e)},searchAdvertiser:(0,C.jsx)(tj.i,{actionId:ty.$.SHOW_INTENTION_ACTIONS,children:e=>`Press ${e} to assign a shortcut`}),headerFilters:(0,C.jsx)(nK.X,{preventFocus:!0,isSelected:a,onChange:e=>{i(e)},children:"Include disabled actions"}),actions:s,processSelectedItem(e){let{action:t}=e;t?.perform({event:null,element:n})},getKey:e=>{let{action:t}=e;return t.id},getItemText(e){let{action:{title:t}}=e;return t},renderItem(e){let{action:t,highlights:n}=e;return(0,C.jsx)(cF,{action:t,highlights:n})}}}};var cO=n("65617");function c_(e){let{file:t,matches:n}=e,{isSelected:r}=(0,g.useContext)(nC.k)||{},i=t.name,o=m().dirname(t.relativePath),[a,s]=(0,cO.Z)(e=>e.from>=o.length,n||[]),l=s.map(e=>{let{from:t,to:n}=e;return{from:t-o.length,to:n-o.length}});return(0,C.jsxs)(cB,{children:[(0,C.jsx)(cP,{children:(0,C.jsx)(M.vq,{icon:et(t.path)})}),(0,C.jsx)(cR,{children:r?(0,C.jsx)(ck.x,{highlights:l,children:i}):i}),(0,C.jsx)(nv.e.Hint,{children:r?(0,C.jsx)(ck.x,{highlights:a,children:o}):o})]})}c_.__docgenInfo={description:"UI of paths in SearchEverywhere list.",methods:[],displayName:"FileItem",props:{file:{required:!0,tsType:{name:"ProjectFsItem"},description:""},matches:{required:!0,tsType:{name:"union",raw:"null | TextRange[]",elements:[{name:"null"},{name:"Array",elements:[{name:"TextRange"}],raw:"TextRange[]"}]},description:"matches on file.relativePath"}}};let cM={id:"Files",title:"Files",actionId:ty.$.GO_TO_FILE,use:()=>{let e=(0,D.Dv)(nB(eU))??[],{openPath:t}=tz(),n=ny();return{search:t=>e.map(e=>({matches:(0,cI.M)(e.relativePath,t),file:e})).filter(e=>{let{matches:t}=e;return t?.length}),searchDeps:[],isEverywhere:!0,processSelectedItem(e){let{file:r}=e;r?.type==="file"&&t(r.path,!0),r?.type==="dir"&&n(r.path)},getKey(e){let{file:t}=e;return t.path},renderItem(e){let{file:t,matches:n}=e;return(0,C.jsx)(c_,{file:t,matches:n})},getItemText(e){let{file:{relativePath:t}}=e;return t}}}},cG="SearchEverywhere.PrevTab",cK="SearchEverywhere.NextTab",cH=I.zo.div`
  display: flex;
  width: 100%;
  background: ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.Header.background")}};
  border-bottom: 1px solid
    ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.SearchField.borderColor")}};
`,cV=I.zo.button`
  all: unset;
  background: ${e=>{let{theme:t,selected:n}=e;return n&&t.color("SearchEverywhere.Tab.selectedBackground")}};
  color: ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.Tab.selectedForeground")}};
  opacity: ${e=>{let{disabled:t}=e;return t&&".5"}};
`,cU=I.zo.span`
  display: flex;
  padding: 0 0.75rem;
  height: 1.8rem;
  align-items: center;
`,c$=I.zo.div`
  line-height: normal;
  border-bottom: none;
`,cQ=I.zo.div`
  display: flex;
  flex-shrink: 0;
  height: 1.85rem;
  align-items: center;
  padding: 0 0.75rem 0;
  gap: 0.75rem;

  input {
    all: unset;
    flex: 1;
    line-height: 1.25;

    &::selection {
      color: ${e=>{let{theme:t}=e;return t.color("*.selectionForeground")}};
      background: ${e=>{let{theme:t}=e;return t.color("*.selectionBackground")}};
    }
  }
`,cq=I.zo.div`
  height: 24rem;
  flex: 1;
  min-height: 0; // for it to properly fill the remaining height and not to exceed that
`,cz=I.zo.hr`
  all: unset;
  height: 1px;
  width: 100%;
  border-bottom: 1px solid
    ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.SearchField.borderColor")}};
`,cW=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.SearchField.infoForeground")}};
  white-space: nowrap;
`,cY=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.currentForegroundAware(t.color("SearchEverywhere.SearchField.infoForeground"))}};
  font-size: 0.7rem;
  min-height: 1.375rem;
`,cZ=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  position: absolute;
  text-align: center;
  width: 100%;
  top: 50%;
`,cJ=[cL,cM],cX={},c0="LOAD_MORE_ITEM_KEY";function c1(){let e=(0,D.b9)(cS.isOpen),[t,n]=(0,D.KO)(cS.tab),[r,i]=(0,g.useState)(!1),[o,a]=(0,g.useState)((0,D.Dv)(cS.initialSearchQuery(t))),s=(0,D.b9)(cS.initialSearchQuery(t)),l=(0,tj.k)(),[c,d]=(0,g.useState)(new Set),u={};cJ.forEach(e=>{u[e.id]={...e,...e.use({everyWhereAutoSet:r})}});let h=cJ.filter(e=>""===t||e.id===t).map(e=>{let{id:t}=e;return u[t]}),[p,m]=(0,g.useState)(30),{searchResult:f}=(0,g.useMemo)(()=>({searchResult:h.flatMap(e=>e.search(o).map(t=>({key:`${e.id}_${e.getKey(t)}`,contributor:e,item:t})))}),[o,t,...h.flatMap(e=>{let{searchDeps:t}=e;return t})]),A=u[t],x=(0,g.useMemo)(()=>{let e=f.slice(0,p);return f.length>e.length&&e.push({key:c0,item:cX,contributor:null}),e},[p,f]),y=(0,g.useRef)(null),j=e=>{let t=y.current&&e.includes(y.current);A?.isEverywhere&&!t&&i(!1),a(e)};(0,g.useEffect)(()=>{o&&s(o)},[o,t]),(0,g.useEffect)(()=>{if(f[0]){let{key:e}=f[0];d(new Set([e])),S.current?.setFocusedKey(e),requestAnimationFrame(()=>{S.current?.setFocusedKey(e)})}m(30)},[f]);let v=[{id:cG,title:"Prev tab",description:"Switch to previous tab in Search Everywhere dialog",actionPerformed:()=>{let e=cJ.findIndex(e=>{let{id:n}=e;return t===n});n(""===t?cJ.slice(-1)[0].id:cJ[e-1]?.id||"")}},{id:cK,title:"Next tab",description:"Switch to next tab in Search Everywhere dialog",actionPerformed:()=>{let e=cJ.findIndex(e=>{let{id:n}=e;return t===n});n(cJ[e+1]?.id||"")}}],w=cJ.flatMap(e=>{let{id:r,actionId:i,title:o}=e;return i?[{id:i,title:`Find ${o}`,description:`Quickly go to ${o} by name`,actionPerformed:()=>{t!==r?n(r):A?.toggleEverywhere?.()}}]:[]}),b=()=>e(!1),E=(0,g.useRef)(null),S=(0,g.useRef)(null),I=e=>{if(e===c0){m(e=>e+30);let e=f[x.length+1];e&&setTimeout(()=>{d(new Set([e.key])),S.current?.setFocusedKey(e.key)})}else b(),setTimeout(()=>{let t=f.find(t=>t.key===e);t?.contributor.processSelectedItem(t.item)},50)},k=cw();return(0,C.jsx)(cD,{persistedBoundsAtom:cS.bounds,hasContent:!!o,noContentHeight:59,minWidth:670,minHeight:160,interactions:"all",onClose:b,children:(0,C.jsx)(B.DG,{actions:[...A?.actions||[],...w,...v],children:e=>{let{shortcutHandlerProps:r}=e;return(0,C.jsx)("div",{...r,style:{height:"inherit"},children:(0,C.jsx)(lU.GI.Layout,{header:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(lU.GI.Header,{hasControls:!0,children:(0,C.jsxs)(cH,{children:[(0,C.jsx)("div",{style:{flex:1},children:(0,C.jsxs)(cx.m,{TabComponent:cV,TabsComponent:c$,selectedKey:t,onSelectionChange:e=>n(e),children:[(0,C.jsx)(O.c,{children:(0,C.jsx)(cU,{children:"All"})},""),cJ.map(e=>{let t=l(e.actionId),n=(0,C.jsx)(cU,{children:e.title});return(0,C.jsx)(O.c,{children:t?(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(aB.u,{children:t}),children:(0,C.jsx)("span",{children:n})}):n},e.id)})]})}),A?.headerFilters,(0,C.jsx)(iQ.hU,{style:{margin:"0 0.5rem"},isDisabled:!0,children:(0,C.jsx)(M.vq,{icon:"actions/moveToLeftBottom"})})]})}),(0,C.jsxs)(cQ,{children:[(0,C.jsx)(M.vq,{icon:"actions/search"}),(0,C.jsx)(cy.MT,{contain:!0,children:(0,C.jsx)(cE,{ref:E,autoFocus:!0,onFocus:e=>{e.target.select()},value:o,onChange:e=>j(e.currentTarget.value)})}),(0,C.jsx)(cW,{children:A?.searchAdvertiser})]})]}),content:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(cz,{}),o&&(0,C.jsxs)(cq,{children:[(0,C.jsx)(sb.a,{focusProxyRef:E,selectionManagerRef:S,items:x,selectionMode:"single",showAsFocused:!0,shouldFocusWrap:!0,fillAvailableSpace:!0,selectedKeys:c,onSelectionChange:d,onAction:I,children:e=>{let{key:t,item:n,contributor:r}=e;if(t===c0)return(0,C.jsx)(O.c,{children:(0,C.jsx)(cY,{children:"...more"})},c0);let i=r.getItemText(n);return(0,C.jsx)(O.c,{textValue:i,"aria-label":i,children:r.renderItem(n)},t)}}),0===f.length&&(0,C.jsx)(cZ,{children:"No actions with such name found"})]})]}),footer:(0,C.jsxs)(lU.GI.Hint,{children:[k.current," ",(0,C.jsx)(tf.r,{onPress:k.next,children:"Next Tip"})]})})})}})})}c1.__docgenInfo={description:"TODO: implement history navigation",methods:[],displayName:"SearchEverywherePopup"};let c2=async(e,t,n)=>{let i=await f.ZP.findRoot({fs:r,filepath:n});await f.ZP.add({fs:r,dir:i,filepath:m().relative(i,n)}),await tl(e,t,n)};var c5=n("58249"),c6=n("65465");let c4=(0,I.zo)(c5.I)`
  width: 20.5rem;
  /**
     * To have the validation box shadow not clipped by the popup.
     * Maybe it should be an option on input to make sure margin is always in sync with the box-shadow thickness
     */
  margin: 3px;

  input {
    padding-top: 1px;
    padding-bottom: 1px;
  }
`,c7=(0,I.zo)(lU.GI.Header)`
  border-bottom: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.border()}};
`;function c3(e){let{title:t,inputName:n="Name",onSubmit:r,validationMessage:i,validationType:o="error",value:a,onChange:s}=e,[l,c]=(0,g.useState)(!1);return(0,C.jsx)(lU.GI,{children:(0,C.jsx)(l2.F,{header:(0,C.jsx)(c7,{children:t}),content:(0,C.jsx)("form",{onSubmit:e=>{e.preventDefault(),r()},onMouseDown:()=>{c(!0)},children:(0,C.jsx)(ai.S,{isOpen:!!i&&!l,placement:"top start",offset:6,crossOffset:-6,tooltip:(0,C.jsx)(c6.p,{type:o,children:i}),children:(0,C.jsx)(c4,{appearance:"embedded",validationState:i?o:void 0,placeholder:n,value:a,onChange:e=>{c(!1),s(e.target.value)}})})})})})}c3.__docgenInfo={description:"A simple Popup with an input, used in actions such as create file, or create directory",methods:[],displayName:"NewItemPopup",props:{inputName:{defaultValue:{value:'"Name"',computed:!1},required:!1,tsType:{name:"string"},description:""},validationType:{defaultValue:{value:'"error"',computed:!1},required:!1,tsType:{name:"union",raw:'"error" | "warning"',elements:[{name:"literal",value:'"error"'},{name:"literal",value:'"warning"'}]},description:""},title:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(newValue: string) => void",signature:{arguments:[{name:"newValue",type:{name:"string"}}],return:{name:"void"}}},description:""},validationMessage:{required:!1,tsType:{name:"string"},description:""}}};let c8=nX({id:"NewFile",icon:(0,C.jsx)(M.vq,{icon:"fileTypes/text"}),title:"File",description:"Create new file",isDisabled:(0,Z.cn)(e=>!e(eq)),actionPerformed:async e=>{let{get:t}=e,n=t(eQ);if(0===n.length)return;let i=t(eW).current,o=(await r.promises.stat(n[0])).isDirectory()?n[0]:m().dirname(n[0]);if(!i)throw Error("Could not find popup manager");i.show(e=>{let{close:t}=e;return(0,C.jsx)(c9,{close:t,destinationDir:o})})}});function c9(e){let{destinationDir:t,close:n}=e,r=(0,eT.lV)((0,g.useCallback)(async(e,t,r,i)=>{let o=m().join(r,i),a=e(tq),s=e(eY).current,l=await e(tn(o));await nW(e,t,r,i),n(),a.focus(),await dt(()=>document.activeElement instanceof HTMLTextAreaElement),l&&s?.open(e=>{let{close:t}=e;return C.jsx(de,{filepath:o,close:t})})},[n])),[i,o]=(0,g.useState)(""),[a,s]=(0,g.useState)(""),l=async()=>{let e=m().join(t,i),n=await ev(e);n?.isFile()?s(`A file with the name '${m().basename(i)}' already exists`):n?.isDirectory()?s(`A directory with the name '${m().basename(i)}' already exists`):await r(t,i)};return(0,C.jsx)(c3,{title:"New File",onSubmit:()=>{i&&l()},value:i,onChange:e=>{s(""),o(e)},validationMessage:a})}function de(e){let{close:t,filepath:n}=e,r=(0,eT.lV)(c2);return(0,C.jsx)(nM.Du,{minWidth:"content",minHeight:"content",children:(0,C.jsx)(nG.b,{header:"Add File to Git",content:(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{style:{display:"flex",gap:"1rem",padding:"0.75rem 0.75rem 0rem"},children:[(0,C.jsx)(M.vq,{icon:"general/questionDialog.svg",size:32}),(0,C.jsxs)("div",{children:["Do you want to add the following file to Git?",(0,C.jsx)("br",{}),n,(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),"If you choose Cancel, you can still add it later manually."]})]})}),footer:(0,C.jsx)(nG.b.Footer,{left:(0,C.jsx)(nK.X,{isDisabled:!0,children:"Don't ask again"}),right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nH.z,{onPress:t,children:"Cancel"}),(0,C.jsx)(nH.z,{autoFocus:!0,variant:"default",onPress:()=>{r(n).then(t)},children:"Add"})]})})})})}async function dt(e,t){void 0===t&&(t=2e3),!e()&&!(t<0)&&(await new Promise(e=>setTimeout(e,50)),await dt(e,t-50))}let dn=e=>{let t=(0,g.useRef)(null),n=(0,g.useRef)(e);return n.current=e,function(){t.current?.abort(),t.current=new ef.qf.cancelToken;for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];(0,ef.qf)(function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n.current(...r)})(t.current,...r)}},dr=nX({id:"NewDir",icon:(0,C.jsx)(M.vq,{icon:X}),title:"Directory",description:"Create new directory",isDisabled:(0,Z.cn)(e=>!e(eq)),actionPerformed:async e=>{let{get:t}=e,n=t(eQ);if(0===n.length)return;let i=t(eW).current,o=(await r.promises.stat(n[0])).isDirectory()?n[0]:m().dirname(n[0]);if(!i)throw Error("Could not find popup manager");i.show(e=>{let{close:t}=e;return(0,C.jsx)(di,{close:t,destinationDir:o})})}});function di(e){let{destinationDir:t,close:n}=e,r=(0,eT.lV)(nY),[i,o]=(0,g.useState)(""),[a,s]=(0,g.useState)(null),l=dn(function*(e,t){s((yield da(e,t)))});(0,g.useEffect)(()=>{l(t,i)},[t,i]);let c=async()=>{null==await da(t,i)&&(await r(t,i),n())};return(0,C.jsx)(c3,{title:"New Directory",onSubmit:()=>{i&&c()},value:i,onChange:o,validationMessage:a?.message,validationType:a?.type})}let da=async function(e,t){let n=m().join(e,t);if(!t)return null;if(t.includes("."))return{type:"warning",message:'Note: "." in the name is treated as a regular character. Use "/" instead if you mean to create nested directories'};let r=await ev(n);return r?.isFile()?{type:"error",message:`A file with the name '${t}' already exists`}:r?.isDirectory()?{type:"error",message:`A directory with the name '${t}' already exists`}:null},ds=nX({id:"CopyFileName",title:"File Name",isDisabled:(0,Z.cn)(e=>!e(eq)),actionPerformed:async e=>{let{get:t}=e;if(tx(),0===t(eQ).length)return}}),dl=nX({id:"CopyAbsolutePath",title:"Absolute Path",isDisabled:(0,Z.cn)(e=>!e(eq)),useShortcutsOf:"CopyPaths",actionPerformed:async e=>{let{get:t}=e;if(tx(),0===t(eQ).length)return}}),dc=nX({id:rv.CopyPathFromRepositoryRootProvider,title:"Path From Repository Root",isDisabled:(0,Z.cn)(e=>!e(eq)),actionPerformed:async e=>{let{get:t}=e;if(tx(),0===t(eQ).length)return}});var dd=n("45890");let du=(0,Z.cn)(async()=>{let e=await fetch("https://api.github.com/repos/alirezamirian/jui/tags");if(!e.ok)throw e;let t=await e.json();return(0,tR.Z)([(0,tN.Z)((0,dd.Z)("date"))],await Promise.all(t.map(async e=>{let t=await fetch(`https://api.github.com/repos/alirezamirian/jui/commits/${e.commit.sha}`);if(!t.ok)throw t;let n=await t.json(),r=e.name.replace(/^docs\//,"");return{name:r,url:`https://alirezamirian.github.io/jui/-/${r}/example-app`,date:new Date(n.commit.author.date)}})))}),dh=nX({id:"example-app.switchVersion",icon:(0,C.jsx)(M.vq,{icon:"fileTypes/text"}),title:"Switch version",description:"Change to other versions of this demo app",actionPerformed:async e=>{let{get:t}=e,n=t(eW).current;if(!n)throw Error("Could not find popup manager");try{let e=await t(du);n.show(t=>{let{close:n}=t;return(0,C.jsx)(dp,{close:n,tags:e})})}catch(e){tA.value?.show({icon:"Error",title:"Could not fetch versions",body:(e=>{if(e instanceof Response){let t=e.headers.get("x-ratelimit-reset");return`Github API rate limit is reached. Try again ${t?`after ${new Date(1e3*parseInt(t)).toLocaleTimeString()}`:"later"}.`}return"Unexpected error happened while fetching versions data."})(e)})}}});function dp(e){let{tags:t,close:n}=e;return(0,C.jsx)(lU.GI,{children:(0,C.jsx)(l2.F,{header:(0,C.jsx)(lU.GI.Header,{children:(0,C.jsx)("div",{style:{padding:"0 .5rem"},children:"Switch demo app version"})}),content:(0,C.jsx)(iU.w,{items:t,fillAvailableSpace:!0,onAction:e=>{window.location.href=`${e}`,n()},children:e=>(0,C.jsx)(O.c,{children:(0,C.jsx)(K._,{content:e.name,shortcut:(0,C.jsx)(nv.e.Hint,{children:e.date.toLocaleDateString()})})},e.url)})})})}let dm=(e,t,n,r)=>{let{element:i}=n;i&&(t(cS.isOpen,!0),t(cS.tab,r),t(cS.contextElement,i))},dg=g.createContext(null),df=()=>{let e=(0,g.useContext)(dg);return{open:t=>{e?.current?.changeState(e=>e.show(t)),e?.current?.focus(t)}}},dA=()=>{let e=(0,eT.lV)(ir),t=tu();return[function(){let e=(0,eT.lV)(it),t=df(),n=(0,D.b9)(o0),r=(0,D.Dv)(eQ),i=(0,D.Dv)(nB(eU)),o=n$(r),a=(0,D.Dv)(rd),s=o.some(e=>a.find(t=>(function(e,t){let n=m().relative(e,t);return!n||!n.startsWith("..")&&!m().isAbsolute(n)})(e,ra.path(t)))),l=o.every(e=>i?.some(t=>"dir"===t.type&&t.path===e));return{id:rv.CHECKIN_FILES,title:l?dy.format({count:o.length}):dx.format({count:o.length}),isDisabled:!s,actionPerformed:()=>{e(),t.open(o3),n()}}}(),function(){let e=df(),t=(0,D.b9)(o0),n=(0,eT.lV)((0,g.useCallback)((e,t)=>{let n=e(rJ),r=n.values().next().value;if(0===n.size){let n=e(rm)?.changes.map(rC);t(rJ,new Set(n)),r=n?.[0]}if(r){let{rootNodes:n}=e(r6);t(r1,new Set([...e(r1),...(0,rN.Bp)(e=>rE(e)?e.children:null,e=>e.key,n,[r])])),t(rq,new Set([r]))}},[]));return{id:rv.CHECKIN_PROJECT,title:"Commit",actionPerformed:()=>{n(),e.open(o3),t()}}}(),function(){let e=tz(),t=(0,D.Dv)(rY);return{id:rv.JUMP_TO_SOURCE,title:"Jump to source",icon:(0,C.jsx)(M.vq,{icon:"actions/editSource.svg"}),actionPerformed:()=>{[...t].forEach((t,n,r)=>{let i=ra.path(t);i||e.openPath(i,n===r.length-1)})}}}(),{id:rv.ROLLBACK,title:"Rollback...",icon:(0,C.jsx)(M.vq,{icon:"actions/rollback.svg"}),actionPerformed:t=>{e(!!t)}},{id:rv.REFRESH,title:"Refresh VCS Changes",description:"Refresh VCS Changes",icon:(0,C.jsx)(M.vq,{icon:"actions/refresh.svg"}),actionPerformed:t},{id:rv.SHOW_DIFF,title:"Show Diff",icon:(0,C.jsx)(M.vq,{icon:"actions/diff.svg"}),actionPerformed:tx},{id:rv.SHELVE,title:"Shelve Changes...",description:"Save changes to an external patch file and remove them from the code",icon:(0,C.jsx)(M.vq,{icon:"vcs/shelve.svg"}),actionPerformed:tx},...function(){let e=(0,D.Dv)(rY),t=[{id:rv.NEW_CHANGELIST,title:"New Changelist...",description:"Create new changelist",icon:(0,C.jsx)(M.vq,{icon:"general/add.svg"}),actionPerformed:tx}];return e.size>0&&t.push({title:"Move to Another Changelist...",description:"Move selected changes to another changelist",id:rv.MOVE_TO_ANOTHER_CHANGELIST,actionPerformed:tx}),t}()]},dx=new nZ.C(`{count, plural,
    =1 {Commit File...}
    other {Commit Files...}
  }`,"en-US"),dy=new nZ.C(`{count, plural,
    =1 {Commit Directory...}
    other {Commit Directories...}
  }`,"en-US"),dj=I.zo.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  padding: 1rem 0.875rem 0.25rem;
  gap: 0.6rem;
`,dv=I.zo.div`
  margin-left: -0.25rem; // to align with the field. Maybe something to look into in checkbox.
  display: flex;
  gap: 0.75rem;
`,dw={EXISTING:e=>(0,C.jsxs)(C.Fragment,{children:["Branch name ",e," already exists. ",(0,C.jsx)("br",{}),"Change the name or overwrite existing branch"]}),CLASHING_WITH_REMOTE:e=>(0,C.jsxs)(C.Fragment,{children:["Branch name ",e," clashes with remote branch ",(0,C.jsx)("br",{}),"with the same name"]})};function dC(e){let{close:t}=e,[n,i]=(0,g.useState)(!0),[o,a]=(0,g.useState)(!1),s=(0,D.Dv)(lX),[l,c]=(0,g.useState)(!1),d=(0,T.L)(),u=(0,eT.lV)((0,g.useCallback)(function(e,t,n,i,o){return void 0===o&&(o=!0),(0,f.WY)({fs:r,dir:n,checkout:o,ref:i}).then(()=>{t(ih(n))})},[])),h=s?.currentBranch?.name,[p,m]=(0,g.useState)(h||""),A=l4(s,p),x=!A||"EXISTING"===A&&o,y=!x&&l?"error":"valid",j=()=>{x&&s?.repoRoot?u(s.repoRoot,p,n).catch(e=>{e instanceof f.D1.AlreadyExistsError?d.show({icon:"Error",title:"Unimplemented action",body:"Overwrite option is currently not supported."}):d.show({icon:"Error",title:"Unexpected error",body:`Could not create branch ${p}.`}),console.error("Branch creation error: ",e)}).then(()=>{t()}):c(!0)};return(0,C.jsx)(nM.Du,{minWidth:"content",minHeight:"content",children:(0,C.jsx)(nG.b,{header:"Create New Branch",content:(0,C.jsxs)(dj,{id:"create_branch_form",as:"form",onSubmit:e=>{e.preventDefault(),j()},children:[(0,C.jsx)(l6.U,{autoFocus:!0,autoSelect:!0,value:p,onChange:e=>{m(l3(e)),c(!0)},validationState:y,validationMessage:"error"===y&&A&&dw[A](p),label:"New branch name:",labelPlacement:"above"}),(0,C.jsxs)(dv,{children:[(0,C.jsx)(nK.X,{isSelected:n,onChange:i,children:"Checkout branch"}),(0,C.jsx)(nK.X,{isSelected:o,isDisabled:!l||"EXISTING"!==A,onChange:a,children:"Overwrite existing branch"})]})]}),footer:(0,C.jsx)(nG.b.Footer,{right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nH.z,{onPress:t,children:"Cancel"}),(0,C.jsx)(nH.z,{variant:"default",type:"submit",form:"create_branch_form",isDisabled:"error"===y,children:"Create"})]})})})})}dC.__docgenInfo={description:"",methods:[],displayName:"CreateNewBranchWindow",props:{close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let db=(0,Z.cn)(async e=>il(async t=>{let n=await e(tn(t));if(n){let i=await f.ZP.isIgnored({fs:r,dir:n,filepath:m().relative(n,t)}),o=await r.promises.stat(t).then(e=>e.isFile()).catch(()=>!1)&&await e(ts(t))==="NOT_CHANGED";return!i&&!o}return!1},e(eQ))),dE=(0,Z.cn)(async e=>0===(await e(db)).length),dS=nX({id:rv.GIT_ADD,title:"Add",icon:(0,C.jsx)(M.vq,{icon:"general/add.svg"}),useShortcutsOf:rv.ADD_UNVERSIONED,isDisabled:dE,actionPerformed:async e=>{let{get:t,set:n}=e,r=await t(db);await Promise.all(r.map(e=>c2(t,n,e)))}}),dD=nX({id:rv.GIT_INIT,title:"Create Git Repository...",actionPerformed:async e=>{let{get:t,set:n}=e,i=t(eH),o=t(eQ)[0],a=await ev(o),s=a?.isDirectory()?o:i.path;await f.ZP.init({fs:r,dir:s}),n(tt,e=>e.filter(e=>e.dir!==s).concat({vcs:"Git",dir:s})),await td(t,n)}});var dI=n("28353"),dk=n("49407");let dT=eB.z.object({"@name":eB.z.enum(["visitedUrls"]),list:e8(eB.z.object({option:e3(eB.z.union([eB.z.object({"@name":eB.z.enum(["url"]),"@value":eB.z.string()}),eB.z.object({"@name":eB.z.enum(["userName"]),"@value":eB.z.string()})]))}),"UrlAndUserName")}),dP=eB.z.object({"@name":eB.z.enum(["cloneParentDir"]),"@value":eB.z.string()}),dB=e1({visitedUrls:[],cloneParentDir:""},{storageFile:"vcs.xml",componentName:"GitRememberedInputs",schema:eB.z.object({option:e3(eB.z.union([dT,dP]))}),read:function(e){let{option:t}=void 0===e?{option:[]}:e;return{visitedUrls:t?.find(e=>"visitedUrls"===e["@name"])?.list.UrlAndUserName.map(e=>{let{option:t}=e;return{url:t.find(e=>"url"===e["@name"])?.["@value"],username:t.find(e=>"userName"===e["@name"])?.["@value"]}}).filter(e=>e.url)??[],cloneParentDir:t?.find(e=>"cloneParentDir"===e["@name"])?.["@value"]??""}},write:(e,t)=>({...t,option:t.option?.map(t=>"cloneParentDir"===t["@name"]&&e.cloneParentDir?{"@name":"cloneParentDir","@value":e.cloneParentDir}:"visitedUrls"===t["@name"]&&e.visitedUrls?{"@name":"visitedUrls",list:{UrlAndUserName:e.visitedUrls.map(e=>{let{url:t,username:n}=e;return{option:[{"@name":"url","@value":t},{"@name":"userName","@value":n??""}]}})}}:t)??[]})}),dR=(0,is.R)(dB,e=>e.path("visitedUrls")),dN=(0,is.R)(dB,e=>e.path("cloneParentDir"));var dF=n("75522"),dL=n("90406");let dO={".idea/vcs.xml":`<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="GitRememberedInputs">
    <option name="visitedUrls">
      <list>
        <UrlAndUserName>
          <option name="url" value="https://github.com/alirezamirian/jui.git"></option>
          <option name="userName" value=""></option>
        </UrlAndUserName>
        <UrlAndUserName>
          <option name="url" value="https://github.com/thurwitz/example-branches.git"></option>
          <option name="userName" value=""></option>
        </UrlAndUserName>
      </list>
    </option>
    <option name="cloneParentDir" value="/workspace"></option>
  </component>
  <component name="VcsDirectoryMappings"></component>
</project>

`};async function d_(e){try{if(!(await r.promises.stat(e)).isDirectory())return console.info(`Already cloned repo was not found. "${e}" is not a directory.`),!1;let t=await r.promises.readdir(e);if(1===t.length&&".git"===t[0])return console.info(`Already cloned repo was not found at "${e}". ".git" folder exists, but it's not successfully unpacked.`),!1}catch(t){return console.info(`Already cloned repo was not found at "${e}".`),!1}return!0}let dM=async()=>{await ej(r.promises,eK.path),await Promise.all(Object.entries(dO).map(async e=>{let[t,n]=e,i=m().join(eK.path,t);!await r.promises.exists(i)&&(await ej(r.promises,m().dirname(i)),await r.promises.writeFile(i,n,"utf-8"))}))},dG=(0,I.zo)(dL.e)`
  min-width: ${e=>{let{minWidth:t}=e;return t?`${t}px`:""}};
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`,dK=e=>{let{children:t,autoCloneSampleRepo:n=!1}=e,[i,o]=(0,g.useState)(null),[a,s]=(0,g.useState)("uninitialized");(0,g.useEffect)(()=>{async function e(e,t){await d_(e)||(s("cloning"),await dH({dir:e,url:t,onProgress:o}))}(async function t(){let t=window.INITIALIZE_APP??dM;try{await t({fs:r,git:f.ZP,path:m(),projectDir:eK.path}),n&&await e(eG.path,eG.url),console.log("demo repo initialized"),s("initialized")}catch(e){console.error("could not initialize the demo repo",e),s("error")}})()},[]);let l=i?.total?i.loaded/i.total:0;switch(a){case"uninitialized":return null;case"initialized":return(0,C.jsx)(C.Fragment,{children:t});case"cloning":return(0,C.jsx)(dG,{minWidth:450,children:(0,C.jsx)(lU.GI.Layout,{header:"Cloning sample git repository",content:(0,C.jsx)("div",{style:{padding:"1rem"},children:(0,C.jsx)(sC.ko,{name:`Cloning repository ${eG.url}`,isIndeterminate:!i,details:l?`${i?.phase}: ${Math.round(100*l)}% ${i?.loaded}/${i?.total}`:i?.phase,"aria-label":"Progress of cloning sample repo",value:i?i.loaded/i.total:0,maxValue:1})})})});case"error":return(0,C.jsx)(dF.a,{type:"error",heading:"Something went wrong!",body:"Could not initialize example app",buttons:(0,C.jsx)(nH.z,{variant:"default",onPress:()=>{window.location.reload()},children:"Reload"})})}};async function dH(e){let{dir:t,url:n,onProgress:i}=e;console.log("cloning repo: "),await (0,f.d9)({fs:r,url:n,http:A.Z,corsProxy:"https://cors.isomorphic-git.org",dir:t,onProgress:i,singleBranch:!0})}dK.__docgenInfo={description:"",methods:[],displayName:"ProjectInitializer",props:{autoCloneSampleRepo:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};var dV=n("28872"),dU=n("88109"),d$=n("75486"),dQ=n("15239"),dq=n("49827"),dz=n("41379");let dW=I.zo.div`
  box-sizing: border-box;
  // not checked if there should be a better substitute for * in the following colors. Maybe "Component"?
  background-color: ${e=>{let{theme:t}=e;return t.color("*.background")}};
  color: ${e=>{let{theme:t}=e;return t.color("*.foreground")}};
  outline: none; // Focus will be reflected in header. No need for outline or any other focus style on the container
  ${d$.s}; // FIXME: OS-dependant style?
`,dY=(0,I.zo)(dQ.w)`
  min-width: 120px;
  margin: ${dq.TU}px 0;
`;async function dZ(e){return r.promises.readdir(e).then(async t=>(await Promise.all(t.map(async t=>{let n=m().join(e,t);return{fullPath:n,stat:await r.promises.stat(n)}}))).filter(e=>{let{stat:t}=e;return t.isDirectory()}).map(e=>{let{fullPath:t}=e;return t}))}function dJ(e){let{value:t,onChange:n,defaultValue:r,...i}=e,[o,a]=(0,dU.z)(t,r??"",n),[s,l]=(0,g.useState)(!1),c=(0,g.useRef)(null),d=(0,g.useRef)(null),[u,h]=(0,g.useState)(""),[p,f]=(0,g.useState)([]),A=()=>{j({clientX:(v?.x??0)+function(e){let t=e.selectionStart??e.value.length,n=window.getComputedStyle(e),r=document.createElement("span");r.style.position="absolute",r.style.visibility="hidden",r.style.whiteSpace="pre-wrap",r.style.font=n.font,r.style.fontSize=n.fontSize,r.style.fontWeight=n.fontWeight,r.style.fontFamily=n.fontFamily,r.style.letterSpacing=n.letterSpacing,r.style.border=n.border,r.style.paddingLeft=n.paddingLeft,r.textContent=e.value.substring(0,t),document.body.appendChild(r);let i=r.offsetWidth;return document.body.removeChild(r),i}(c.current),clientY:(v?.y??0)+(v?.height??0)+2}),h(o.slice(0,c.current?.selectionStart??void 0))};(0,g.useEffect)(()=>{s&&A()},[s,o]);let x=(0,dz.D)(s);(0,g.useEffect)(()=>{let e=u.split(m().sep),t=e.slice(0,-1).join(m().sep)||"/",n=e.length>1?e.slice(-1)[0]:"",r=!1;return dZ(t).then(e=>{if(r)return;let t=e.map(e=>{let t=m().basename(e);return{fullPath:e,textValue:t}}).filter(e=>{let{textValue:t}=e;return!n||t.toLowerCase().includes(n.toLowerCase())});f(t),t.length>0&&!x&&c.current?.value.indexOf(u)===0&&c.current.setSelectionRange(u.length,c.current.value.length,"backward")}),()=>{r=!0}},[u]);let[y,j]=(0,g.useState)({clientX:0,clientY:0}),v=c.current?.getBoundingClientRect();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(B.DG,{actions:[{id:ty.$.CODE_COMPLETION,title:"Autocomplete path",actionPerformed:()=>{A(),l(!0)}}],children:e=>{let{shortcutHandlerProps:t}=e;return(0,C.jsx)(l6.U,{...i,value:o,onChange:a,inputRef:(0,dV.l)(c,i.inputRef),inputProps:(0,W.d)(i.inputProps??{},t,{onKeyDown:e=>{"Escape"===e.key&&l(!1)},onBlur:()=>{l(!1)}}),addonAfter:(0,C.jsxs)(C.Fragment,{children:[i.addonAfter,(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Browse... (\u21E7\u23CE)"}),children:e=>(0,C.jsx)(sc.v,{...e,style:{marginRight:".2rem"},role:"button",onClick:tx,icon:"general/openDisk.svg"})})]})})}}),s&&(0,C.jsx)(Q.Z,{onClose:()=>{l(!1)},origin:y,children:(0,C.jsx)(dW,{children:(0,C.jsx)(dY,{ref:d,focusProxyRef:c,"aria-label":"Directories",shouldFocusOnHover:!0,shouldUseVirtualFocus:!0,autoFocus:"first",onAction:e=>{a(m().join(`${e}`,m().sep))},items:p,children:e=>{let{fullPath:t}=e;return(0,C.jsx)(O.c,{textValue:t,children:(0,C.jsxs)(nv.e,{children:[(0,C.jsx)(M.vq,{icon:X}),m().basename(t)]})},t)}})})})]})}dJ.__docgenInfo={description:"",methods:[],displayName:"PathInputField",props:{value:{required:!1,tsType:{name:"string"},description:""},defaultValue:{required:!1,tsType:{name:"string"},description:""}}};let dX=nX({id:rv.GIT_CLONE,title:"Clone...",actionPerformed:async e=>{let{get:t}=e,n=t(eY);n.current?.open(e=>{let{close:t}=e;return C.jsx(d2,{close:t})})}}),d0=nX({id:"ExampleApp.cloneExampleRepo",title:"Clone another repository...",isSearchable:!1,actionPerformed:e=>{let{get:t}=e,n=t(eY);n.current?.open(e=>{let{close:t}=e;return C.jsx(d2,{close:t,url:"https://github.com/thurwitz/example-branches.git"})})}}),d1=I.zo.div`
  padding: 1rem;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 0.75rem;
`;function d2(e){let{close:t,url:n}=e,[r,i]=(0,g.useState)(n??""),[o,a]=(0,D.KO)(dN),[s,l]=(0,D.KO)(dR),[c,d]=(0,g.useState)(""),[u,h]=(0,g.useState)(!0),[p,f]=(0,g.useState)(!1),A=(0,g.useRef)(null),x=(0,g.useRef)(null),y=function(e){e=d4(d4(e.trim(),"git clone"),"hg clone");try{return new URL(e),null}catch(t){if(d6.test(e))return null}return"Repository URL is a malformed URL"}(r),[j,v]=(0,g.useState)(""),w=function(){let e=i6(),t=(0,D.b9)(tt);return(0,eT.lV)((0,g.useCallback)((n,r,i)=>{let{url:o,dir:a,onSuccess:s}=i;e({title:`Cloning source repository ${o}`},{onFinished:s,run:async e=>{let{setIndeterminate:n,setFraction:i,setSecondaryText:s}=e;await dH({dir:a,url:o,onProgress:e=>{if(e.total){let t=e.loaded/e.total;i(t),s(`${e.phase}: ${Math.round(100*t)}% ${e.loaded}/${e.total}`)}else s(e.phase),n(!0)}}).then(()=>{t(e=>e.find(e=>e.dir===a)?e:e.concat({vcs:"Git",dir:a})),r(eD(m().resolve(a,"..")))},e=>{console.log("e",e),tA.value?.show({icon:"Error",title:"Clone failed",body:`Failed to clone git repo "${o} into ${a}: ${e}"`})})}})},[]))}();(0,g.useEffect)(()=>{if(u){let e=r.split(/\/{1,2}/).pop()?.replace(/\.git$/,"")??"";d(e?m().join(o,e):o)}},[o,r,u]);let b=async e=>{e.preventDefault(),f(!0);let n=await d5(c);if(n){v(n),x.current?.focus();return}if(y){A.current?.focus();return}a(m().dirname(c)),l(e=>e.find(e=>e.url===r)?e:e.concat({url:r})),w({url:r,dir:c,onSuccess:()=>{l(e=>e.map(e=>{let{url:t}=e;return t}).includes(r)?e:[...e,{url:r,username:""}])}}),t()};return(0,C.jsx)(nM.Du,{minWidth:600,minHeight:"content",children:(0,C.jsx)(nG.b,{header:"Get from Version Control",content:(0,C.jsx)(dI.O,{children:(0,C.jsx)("form",{id:"clone_form",onSubmit:b,children:(0,C.jsxs)(d1,{children:[(0,C.jsx)(dk.C,{inputRef:A,autoFocus:!0,label:"URL:",value:r,validationState:y&&p?"error":"valid",validationMessage:p&&y,onValueChange:e=>{i(e)},items:s,children:e=>{let{url:t}=e;return(0,C.jsx)(O.c,{children:t},t)}}),(0,C.jsx)(dJ,{inputRef:x,label:"Directory:",value:c,validationState:j&&p?"error":"valid",validationMessage:p&&j,onChange:e=>{d(e),h(!1),v("")}})]})})}),footer:(0,C.jsx)(nG.b.Footer,{right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nH.z,{onPress:t,children:"Cancel"}),(0,C.jsx)(nH.z,{variant:"default",isDisabled:!c||!r,type:"submit",form:"clone_form",children:"Clone"})]})})})})}async function d5(e){let t=await ev(e);return t?t.isDirectory()?(await r.promises.readdir(e)).length>0?"The directory already exists and is not empty":null:"Destination is not a directory":null}let d6=RegExp("^git@[\\w.-]+:[\\w./-]+\\.git$");function d4(e,t){return e.startsWith(t)?e.slice(t.length):e}async function d7(e){return new Promise(t=>setTimeout(t,e))}let d3=I.zo.div`
  display: flex;
  flex-direction: column;
  height: 100vh;
  min-height: 0;
`,d8=e=>{let{height:t}=e,n=(0,g.useRef)(null),[r,i]=(0,D.KO)(cA),o=(0,D.Dv)(rO),a=(0,D.Dv)(cS.isOpen);return(0,D.Dv)(eW).current=(0,j.U)(),(0,D.Dv)(eY).current=(0,y.S)(),(0,D.Dv)(eZ).current=(0,k.i)(),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(rA,{}),(0,C.jsxs)(T.a,{disablePortal:!0,children:[(0,C.jsx)(ue,{}),(0,C.jsx)(ut,{}),(0,C.jsx)(dg.Provider,{value:n,children:(0,C.jsxs)(d3,{style:{height:t},children:[(0,C.jsx)(d9,{children:e=>{let{shortcutHandlerProps:t}=e;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P.u,{ref:n,toolWindowsState:r,onToolWindowStateChange:e=>{i(e)},windows:lO,containerProps:t,children:(0,C.jsx)(t3,{})}),(0,C.jsx)(cd,{})]})}}),a&&(0,C.jsx)(c1,{}),o&&(0,C.jsx)(cf,{})]})})]})]})};function d9(e){let t=[...function(){let e=(0,eT.lV)(dm),t=(0,tI.w)(),n=(0,D.Dv)(c8),r=t({id:nD,title:"New...",description:"Create new class, interface, file or directory",isSearchable:!0,children:[n,(0,D.Dv)(dr)]}),i=t({id:nI,title:"Copy Path/Reference...",menuPresentation:"none",children:[t({id:"CopyFileReference",title:"Copy File Reference",isSearchable:!1,menuPresentation:"section",children:[(0,D.Dv)(dl),(0,D.Dv)(ds),(0,D.Dv)(dc)]})]});return[{id:ty.$.GO_TO_ACTION,title:"Find Action",description:"Quickly navigate to action by name",actionPerformed:t=>{e(t,"Actions")}},{id:ty.$.GO_TO_FILE,title:"Go to file",description:"Quickly navigate to file by name",actionPerformed:t=>{e(t,"Files")}},r,i,(0,D.Dv)(dh)]}(),...function(){let e=(0,j.U)(),t=(0,y.S)(),n=(0,D.Dv)(dS),r=(0,D.Dv)(dD),i=(0,D.Dv)(dX),o=(0,D.Dv)(d0);return[...dA(),n,i,o,...0===(0,D.Dv)(tt).length?[r]:[],{id:rv.GIT_CREATE_NEW_BRANCH,title:"New Branch\u2026",description:"Create new branch starting from the selected commit",icon:(0,C.jsx)(M.vq,{icon:"general/add.svg"}),actionPerformed:()=>{t.open(e=>{let{close:t}=e;return(0,C.jsx)(dC,{close:t})})}},{id:rv.GIT_BRANCHES,title:"Branches\u2026",icon:(0,C.jsx)(M.vq,{icon:"vcs/branch.svg"}),actionPerformed:()=>{e.show(e=>{let{close:t}=e;return(0,C.jsx)(co,{close:t})})}},{id:rv.GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH,title:"Navigate Log to Selected Branch Head",useShortcutsOf:"SelectIn",icon:(0,C.jsx)(M.vq,{icon:"general/locate.svg"}),actionPerformed:()=>{tx()}}]}(),...function(){let e=i6();return[{id:"AddTestProcessAction",title:"Add Test Process",actionPerformed:()=>{e({title:"Test process",isCancelable:!0},async(e,t)=>{let{setText:n,setSecondaryText:r,setFraction:i}=e;n("Welcome!"),await (0,ef.qf)(function*(){for(let t=0;t<1e3;t++){var e;n((e=t)/10==Math.round(e/10)?"":"Found: "+Math.round(e/20)+"1"),i(t/1e3),yield d7(100),r("Bla bla bla")}})(t)})}}]}()];return(0,C.jsx)(B.DG,{...e,actions:t,useCapture:!0})}function ue(){return tA.value=(0,T.L)(),null}function ut(){return!function(){let e=(0,T.L)(),t=i6();(0,g.useEffect)(()=>{let n=setTimeout(()=>{void 0==ew.get()&&e.showSticky({title:"Switch to IndexedDB filesystem",body:"By default an in-memory filesystem is used to have a faster git clone. But it means all changes will be lost upon refresh. You can switch in the background to a persistence fs implementation which uses IndexedDB to store files.",actions:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l5.g,{onPress:()=>{t({title:"Switching to IndexedDB FS",isCancelable:!0},async(e,t)=>{let{setIndeterminate:n,setText:r}=e;r("Copying ..."),n(!0),await eC({cancelSignal:t,onCopy:e=>{r(`Copying ${m().dirname(e)}`)}}).then(()=>{ew.set("yes")}).catch(()=>{})})},children:"Switch to IndexedDB FS"}),(0,C.jsx)(l5.g,{onPress:()=>ew.set("no"),children:"Don't ask again"})]})})},3e3);return()=>clearTimeout(n)},[])}(),null}d8.__docgenInfo={description:"",methods:[],displayName:"Project",props:{height:{required:!0,tsType:{name:'CSSProperties["height"]',raw:'CSSProperties["height"]'},description:""}}};let un={ActivateProjectWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit1",modifiers:["Meta"]}}],ActivateCommitWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit0",modifiers:["Meta"]}}],ActivateVersionControlWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit9",modifiers:["Meta"]}}],ActivateTerminalWindow:[{type:"keyboard",firstKeyStroke:{code:"F12",modifiers:["Alt"]}}],[rv.ROLLBACK]:[{type:"keyboard",firstKeyStroke:{code:"KeyZ",modifiers:["Alt","Meta"]}}],[rv.SHOW_DIFF]:[{type:"keyboard",firstKeyStroke:{code:"KeyD",modifiers:["Meta"]}}],[rv.SHELVE_SILENTLY]:[{type:"keyboard",firstKeyStroke:{code:"KeyH",modifiers:["Meta","Shift"]}}],[rv.UNSHELVE_SILENTLY]:[{type:"keyboard",firstKeyStroke:{code:"KeyU",modifiers:["Meta","Alt"]}}],[cG]:[{type:"keyboard",firstKeyStroke:{code:"Tab",modifiers:["Shift"]}}],[cK]:[{type:"keyboard",firstKeyStroke:{code:"Tab"}}],[rv.RENAME_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{code:"F2"}}],[rv.MOVE_TO_ANOTHER_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyM"}}],[rv.SET_DEFAULT_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{modifiers:["Control"],code:"Space"}}],[rv.REMOVE_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{code:"Backspace"}}],[rv.CHECKIN_PROJECT]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyK"}}],[rv.ADD_UNVERSIONED]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"KeyA"}}],[rv.FOCUS_TEXT_FILTER]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyL"}}],[rv.GROUP_BY_DIRECTORY]:[{type:"keyboard",firstKeyStroke:{modifiers:["Control"],code:"KeyP"}}],SafeDelete:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"Backspace"}}],CopyPaths:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyC"}}],[tk]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyV"}}],[nD]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyN"}}],[tT]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyN"}}],[tP.EXPAND_REGION]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"NumpadAdd"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"Equal"}}],[tP.EXPAND_REGION_RECURSIVELY]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"NumpadAdd"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"Equal"}}],[tP.EXPAND_ALL_REGIONS]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"NumpadAdd"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"Equal"}}],...[1,2,3,4,5].reduce((e,t)=>(e[tP[`EXPAND_ALL_TO_LEVEL${t}`]]=[{type:"keyboard",firstKeyStroke:{modifiers:["Alt","Meta"],code:"Multiply"},secondKeyStroke:{code:`Digit${t}`}},{type:"keyboard",firstKeyStroke:{modifiers:["Alt","Meta"],code:"Multiply"},secondKeyStroke:{code:`Numpad${t}`}}],e),{}),[tP.COLLAPSE_REGION]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"Minus"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"NumpadSubtract"}}],[tP.COLLAPSE_REGION_RECURSIVELY]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"Minus"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"NumpadSubtract"}}],[tP.COLLAPSE_ALL_REGIONS]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"Minus"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"NumpadSubtract"}}]};window.git=f.ZP,window.fs=r,window.path=p,window.http=A.Z;let ur=e=>{let{height:t,autoCloneSampleRepo:n}=e;return(0,C.jsx)(S,{children:(0,C.jsx)(eE,{children:(0,C.jsx)(dK,{autoCloneSampleRepo:n,children:(0,C.jsx)(x.ur,{keymap:un,children:(0,C.jsx)(y.f,{children:(0,C.jsx)(j.q,{children:(0,C.jsx)(d8,{height:t})})})})})})})};ur.__docgenInfo={description:"Example app root component. It expects ThemeProvider to be provided based on where it's rendered.",methods:[],displayName:"App",props:{height:{required:!1,tsType:{name:'CSSProperties["height"]',raw:'CSSProperties["height"]'},description:""},autoCloneSampleRepo:{required:!1,tsType:{name:"boolean"},description:""}}};let ui=ur},13775:function(e,t,n){var r={"./simpleWorker.js":"57772","./simpleWorker":"57772"};function i(e){return Promise.resolve().then(function(){if(!n.o(r,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n(r[e])})}i.keys=()=>Object.keys(r),i.id="13775",e.exports=i},56755:function(e,t,n){var r={"./treeViewsDndService.js":["61860"],"./textResourceConfiguration":["16576"],"./unicodeTextModelHighlighter.js":["83969"],"./findSectionHeaders":["43631"],"./languageFeaturesService":["99423"],"./model.js":["65041"],"./editorSimpleWorker":["66298"],"./editorBaseApi":["79375"],"./editorWorker":["30363"],"./editorWorkerHost.js":["76679"],"./semanticTokensDto":["21982"],"./semanticTokensDto.js":["21982"],"./semanticTokensStyling.js":["76567"],"./textResourceConfiguration.js":["16576"],"./editorWorker.js":["30363"],"./languagesAssociations":["41356"],"./markerDecorationsService":["1022"],"./languageFeatureDebounce":["69060"],"./model":["65041"],"./resolverService":["91223"],"./languagesRegistry":["33550"],"./markerDecorations.js":["52919"],"./semanticTokensProviderStyling":["45960"],"./semanticTokensProviderStyling.js":["45960"],"./languageService.js":["44718"],"./semanticTokensStylingService":["29922"],"./getIconClasses.js":["75154"],"./languageFeatures.js":["35921"],"./modelService.js":["94657"],"./languagesRegistry.js":["33550"],"./languageFeatures":["35921"],"./markerDecorationsService.js":["1022"],"./textModelSync/textModelSync.impl.js":["13423"],"./languageService":["44718"],"./editorSimpleWorker.js":["66298"],"./markerDecorations":["52919"],"./textModelSync/textModelSync.protocol":["66828","9348"],"./findSectionHeaders.js":["43631"],"./treeSitterParserService":["40143"],"./treeViewsDnd":["55247"],"./languagesAssociations.js":["41356"],"./treeViewsDnd.js":["55247"],"./unicodeTextModelHighlighter":["83969"],"./editorWorkerHost":["76679"],"./textModelSync/textModelSync.impl":["13423"],"./languageFeatureDebounce.js":["69060"],"./editorBaseApi.js":["79375"],"./textModelSync/textModelSync.protocol.js":["66828","9348"],"./languageFeaturesService.js":["99423"],"./getIconClasses":["75154"],"./treeSitterParserService.js":["40143"],"./semanticTokensStylingService.js":["29922"],"./semanticTokensStyling":["76567"],"./treeViewsDndService":["61860"],"./modelService":["94657"],"./resolverService.js":["91223"]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then(function(){return n(i)})}i.keys=()=>Object.keys(r),i.id="56755",e.exports=i},57011:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id="57011",e.exports=t}}]);
//# sourceMappingURL=8032.a4827f7a.js.map