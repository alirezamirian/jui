"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4365],{6967:(e,t,n)=>{n.r(t),n.d(t,{App:()=>$u,default:()=>Qu});var r=n(21023),o=n.n(r),a=n(2784),i=n(53476),l=n(50921),s=n(56576),c=n(35713),m=n(55003),u=n(78104),d=n(75545),p=n(7896),h=n(55816);const g=e=>a.createElement(h.E,(0,p.Z)({},e,{src:"data:image/gif;base64,R0lGODlhEAAQAPejANra2tHR0cjIyNjY2NnZ2dLS0tbW1rS0tM/Pz7KyssnJydfX19TU1M3Nzby8vK+vr8HBwcTExLi4uMbGxsrKyrW1tcvLy9PT06mpqcPDw87OzqWlpaysrKKiorGxsZ2dnb29vbu7u8XFxaqqqszMzL+/v9XV1bOzs8LCwsfHx6SkpI6Ojrm5ucDAwLq6up6enpubm76+vpKSkp+fn9DQ0JaWlmRkZJqamn9/f6ioqK6urre3t6urq6ampq2trZOTk5iYmEBAQKenp4mJiba2tpGRkYaGhqOjo7CwsICAgJWVlXR0dNvb26CgoJmZmaGhoXd3d1hYWGtra1lZWY+Pj4KCgoyMjG1tbZCQkJeXlzk5OVBQUG5ubnFxcZycnISEhGhoaE1NTYqKinV1dVtbW42NjV5eXk9PT2JiYjw8PIWFhVpaWj09PUtLS3h4eFNTU2dnZ0hISEpKSk5OTmxsbGlpaTg4OHx8fIiIiEdHR1VVVXZ2dl9fX1xcXEVFRUZGRnNzc4ODg3BwcFZWVpSUlH19fWpqakJCQjc3NzQ0NHt7ez4+PouLi29vb2NjY1JSUoGBgXl5eWZmZlFRUWFhYV1dXUFBQX5+foeHh0RERGVlZXp6emBgYENDQzU1NTY2NklJSVRUVHJyctvb2wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBQCjACwAAAAAEAAQAAAIvQBHCRylQeCMOQMTDmyw6MOoMokEolCgUKCNOAEgjkLggeJAHhxGgVhUZUUiABJ2ABi1QKCbTGBA/Dgh0AALBAWIjGgJ4MUkPQQSMpkwgsOEhAVAVNQQY4BADE6cAKkosIXVCTa2aKU66oPXHgMvpKhIg0hLgQA2OFpS0QGhGy0E4iBTKIOPGAIbZCFBQsUPGqNGHBjVgA4WDFBMiHE4KoBCKlc0jIAyaoeauAoHSDkSmDKADyyoalhZARPVgAAh+QQFBQCjACwAAAAAEAAQAAAItABHCRyFQGAHPQMTDtSQ58moImkE7iGkUKCULQ8j8vCkJOGDB6NK5MEkI82COXMEDhCI40yXElkqCEyhJ8AFBx5WjupAxoxCAAoSnFCgsERFGhkG6njBtKJAESIiUODSp6rTUTmyghwooGIBBzoFjmiEoyKEFxsiCBwCxsiEBBAEIuigAYGPFwVGPZBA0M2NB18M1Ogh8IJCIIpoIPkyyoEMtQoJuBkxarHAHjGc0hDoQobTgAAh+QQJBQCjACwAAAAAEAAQAAAIuABHCRxFQ+CGSgMTDkTwZsOoGn8EKsqiUOAYMgUgjvLBBkjCEydGoXizIkvEQXoGjGogcEifTSg+SBAogMwDB5zsaBCYA46hikUQHfI48AKKiglwFBx1YsMGFRUFKhAgoIEiKVijjvLAdcdABhYqMjiaEEkhRhVFYHggQOAPKDIUSBAhMACPAAEqYGAwqgKIUQGMHCEiY0EHJAL5JnyCJ8AOGaMgvGhb0YiHUY8FPsgQNYDAEh+iBgQAIfkECQUAowAsAAAAABAAEAAACLcARwkcOEqAEIIIBdaQMMrLFIEYaCQcVUXKAhgPD+R5QHDBhIJ8YDgkQEkSwgN1GFFw8oKChBBhQkCgY2SghzFSJA4MMCTIGSQEDTBESGWFCYEkeIwYgSChgqIrIlTAQVVEwh1Bglj6MHABioQkBAAgyELMEAMECYhIsKPpKAlfmiCQUKEACRIcTDBw0EKgAQqjGPzwEKLDAB8sJo7iUMOAgw6jUuQIMPEAhFGPBU4YoFhggQgTAwIAIfkEBQUAowAsAAAAABAAEAAACL8ARwkcVUDgA1EDEw4sQOfBqA5mBA5polAgHkAMII468OZJQgchRqW44uWImQFg4AwYhUDgDShUUmAoIdDClQotuMhpCeAEpCoEEgK4IefNjIQmUlQkMqTgKAcJPHioKPCH1Q0yjGilOoqN1zcDDbRUCKFKgIEAQtSgqLAGokw3BPaQsUEDCgsCGbhgEILPpwyjSogYdeHFAQgYBhwAIXBwwgRNGKDAMEqBBw0VCcxgPHkUAAd4KzIAMErA1IoBAQAh+QQFBQCjACwAAAAAEAAQAAAIugBHCRzFQGCFKgMTDryAg8goHl0E/sihUGANNSYgjmKhieJACBBGUUjSQ6ObPQRG0RAoRMwHCgkyCGxwh0WGTWsCCAxR5AcAhR3WUNqQ0ICFii6KDMzgwgWLigJv3HAy4gmQq1BHtdnKZ+CCAhUzDAErkAmKDT4q3jh0ZobABB08BBCAQCCENSBAwLEUYZQICqNMcHCQ4kAAP2gETlAYQoeBwqOc2BFSEQCHvgIOjCIABwZUAwJJuIAaEAAh+QQFBQCjACwAAAAAEAAQAAAIuABHCRxlQmCIFQMTDmSwwsGoBEkEfnigUGCHHwYgjoqxhOLACSJGNVih40QSAmqqCCwgEAkQIQ1YpBCIAA+ICUbAsGQC4cWMihjqcOGRcIGGijGcXBCYokWLEhUFPmnSRAcHFVijjorC1dDAAUsVisCiMMWDChVnzFmjQiALDiwuWAggEAWaEiUEhZkwSkGDUQYqoCijZVQYr6MEKIRQIQXhUR8OjYhaQfGKwqOu/Ky4gMCoGY+iBgQAIfkEBQUAowAsAAAAABAAEAAACLYARwkcZUBgCSADEw404aTFqB1WBKo4oFAghg+jJESEkITiQAUKRiFwUkHjKCplBF4QSKTDAwQxKAgMUASCACpLVo6KICRHRR1jIiFJOIBGRQhNGAikEKFpRYE9Nmw4cYKD1aejbGgdk1CpwhQ1dC6tEKLikSk2MAiMcSIGAy8JBEaoAwEClCgCRpFAMEpAmkZYghQY1EVgyISCFgkoEmRUkzY+Ki5II2YUY4FLOjzNO6pDlKcBAQAh+QQFBQCjACwAAAAAEAAQAAAIsgBHCRy1QGCEDQMTDlzQQ8SoGDAE6gihUOABDAsgjpqAxUXCBiRGBRDioETEDzcEMhAIwoeEAhEaCCzwQoQFGF9WjlKQIEHFCmqG7FBYoKIIDCYENhDAtKJEHy5dVJjqdNSSq4EGBkBRkcIMnaMAZPEzpeKIOoAeCISjBY2DGQcEThgTIUIgMBRGecGw88+eGmFGOboj0IJCKHkUAB7VY43Pin6ojMoSeNSlHE7zMnbkNCAAIfkEBQUAowAsAAAAABAAEAAACLIARwkcOEqAD4IIBepQMCqDCoEHSiQcxQLJAIejFMCQOFCDhlEXHkBwCGDDEQCjTAiEcADEhRQIBDIQIqCBCiwqAVjYISGhiyI/QhAMcCGhACQGBHZYwXTiqBMnEoDYoqWq0yRYyxDMkNBCD5UDb7Qxk/DBmEsHBNIJAibGkR0CBeCYMMHKEhKjZvAYRWHLHRhRLlxRI7ABwkKTLAAeNUITkYQDzhAatRiAkYNdBY64MjEgACH5BAUFAKMALAAAAAAQABAAAAi3AEcJHDVAoIUTAxMOHHDAwqgJHAS6yKBQYAwiDyOSUEFxYI4co0IciABxlI6IowwIFISITwgKAQSaeGABAY8bKkcB8QOq4EAmJbx8aKHQRUUKRBYIVCFDRpGKAiVIbTEoiFWoo6xozTKwQISKDTjkFPgilKSKByANYSEQkJxGLYSwHUUBjwAFSpJoGHVExygLU740scHAzQqBexMGIkPiiY1RD7oYrTjFySjHAlckgEpCoA4oUAMCACH5BAUFAKMALAAAAAAQABAAAAitAEcJHKVBYAMJAxMObGAHxigFCQTGmKBQIKdOASAS5EFxIAYMoxzYwaHxQMSES9jYcIDFg0ADBxoESHBkIAw5ZypmONIjg8IQFRu4GChEidGKAkGAcBChUpynSEcZVTIjoYiKCFwmfELmSkUJjGQ4EBjp0R4UI8aOsoCFgoUPYhCMEuKSBBoxKriYqKJEIA2FQ2w02MBl1Ik7IJCieTGKsMAaRJA2ADAqAQ6kAQEAOw==",darkSrc:"data:image/gif;base64,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"}));g.__docgenInfo={description:"",methods:[],displayName:"LoadingGif"};const f=(0,d.ZP)(g).withConfig({displayName:"DefaultSuspense__Loading",componentId:"sc-1n9vzm7-0"})(["width:fit-content;margin:auto;"]),A=e=>{let{fallback:t=a.createElement(f,null),children:n}=e;return a.createElement(a.Suspense,{fallback:t},n)};A.__docgenInfo={description:"",methods:[],displayName:"DefaultSuspense",props:{fallback:{defaultValue:{value:"<Loading />",computed:!1},required:!1}}};var E=n(14855),y=n(40327),v=n(33008),b=n(1962),w=n(56058),C=n(95220),k=n(4558),S=n(91673),I=n(50668),B=n(40152),T=n(59257),R=n(75270),P=n(73207),D=n(76418),x=n(42520),N=n(79003),F=n(53700),_=n(99198),L=n(20261);const M="fileTypes/text",V="nodes/folder",O={editorconfig:"nodes/editorconfig",js:"fileTypes/javaScript",gitignore:"vcs/ignore_file",archive:"fileTypes/archive",as:"fileTypes/as",config:"fileTypes/config",css:"fileTypes/css",dtd:"fileTypes/dtd",hpr:"fileTypes/hprof",htaccess:"fileTypes/htaccess",html:"fileTypes/html",idl:"fileTypes/idl",java:"fileTypes/java",jfr:"fileTypes/jfr",json:"fileTypes/json",jsp:"fileTypes/jsp",jspx:"fileTypes/jspx",manifest:"fileTypes/manifest",properties:"fileTypes/properties",txt:"fileTypes/text",wsdl:"fileTypes/wsdlFile",xhtml:"fileTypes/xhtml",xml:"fileTypes/xml",xsd:"fileTypes/xsdFile",yaml:"fileTypes/yaml"},G=e=>{const t=H(e);return O[t]||M},H=e=>e.split(".").pop()||"";function K(e,t){return void 0===t&&(t=o().sep),$(e,t)}function $(e,t,n){void 0===n&&(n=[]);const r=o().dirname(e);return r!==t?[r].concat($(r,t,n)):n}var Q=n(48892);const U=JSON.parse('{"nG":[{"scope":"emphasis","settings":{"fontStyle":"italic"}},{"scope":"strong","settings":{"fontStyle":"bold"}},{"scope":"header","settings":{"foreground":"#000080"}},{"scope":"comment","settings":{"foreground":"#808080"}},{"scope":"constant.language","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":["constant.numeric"],"settings":{"foreground":"#6897BB"}},{"scope":"constant.regexp","settings":{"foreground":"#646695"}},{"scope":"entity.name.tag","settings":{"foreground":"#FFC66D"}},{"scope":"entity.name.tag.css","settings":{"foreground":"#d7ba7d"}},{"scope":"entity.other.attribute-name","settings":{"foreground":"#BABABA"}},{"scope":["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],"settings":{"foreground":"#d7ba7d"}},{"scope":"invalid","settings":{"foreground":"#f44747"}},{"scope":"markup.underline","settings":{"fontStyle":"underline"}},{"scope":"markup.bold","settings":{"foreground":"#A9B7C6"}},{"scope":"markup.heading","settings":{"foreground":"#A9B7C6"}},{"scope":"markup.italic","settings":{"fontStyle":"italic"}},{"scope":"markup.inserted","settings":{"foreground":"#b5cea8"}},{"scope":"markup.deleted","settings":{"foreground":"#ce9178"}},{"scope":"markup.changed","settings":{"foreground":"#A9B7C6"}},{"scope":"beginning.punctuation.definition.quote.markdown","settings":{"foreground":"#608b4e"}},{"scope":"beginning.punctuation.definition.list.markdown","settings":{"foreground":"#6796e6"}},{"scope":"markup.inline.raw","settings":{"foreground":"#ce9178"}},{"scope":"meta.selector","settings":{"foreground":"#d7ba7d"}},{"name":"brackets of XML/HTML tags","scope":"punctuation.definition.tag","settings":{"foreground":"#FFC66D"}},{"scope":"meta.preprocessor","settings":{"foreground":"#CC7832"}},{"scope":"meta.preprocessor.string","settings":{"foreground":"#ce9178"}},{"scope":"meta.preprocessor.numeric","settings":{"foreground":"#b5cea8"}},{"scope":"meta.structure.dictionary.key.python","settings":{"foreground":"#9876AA"}},{"scope":"meta.diff.header","settings":{"foreground":"#CC7832"}},{"scope":"storage","settings":{"foreground":"#ff0000"}},{"scope":"storage.type","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":["keyword.other.phpdoc.php","keyword.other.type.php","storage.type.class.jsdoc","entity.name.type.instance.jsdoc","variable.other.jsdoc"],"settings":{"foreground":"#808080"}},{"scope":"storage.modifier","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"string","settings":{"foreground":"#6A8759"}},{"scope":"string.tag","settings":{"foreground":"#6A8759"}},{"scope":"string.value","settings":{"foreground":"#6A8759"}},{"scope":"string.regexp","settings":{"foreground":"#6A8759"}},{"name":"JavaScript string interpolation ${}","scope":["punctuation.definition.template-expression.begin.js","punctuation.definition.template-expression.begin.ts","punctuation.definition.template-expression.end.ts","punctuation.definition.template-expression.end.js"],"settings":{"foreground":"#A9B7C6"}},{"scope":["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less"],"settings":{"foreground":"#9876AA"}},{"scope":["variable.other.property","support.variable.property.dom","entity.other.inherited-class"],"settings":{"foreground":"#9876AA"}},{"scope":["variable.other.object","variable.other.object.property","support.class.dom","meta.function-call","entity.name.type.module"],"settings":{"foreground":"#A9B7C6"}},{"scope":["variable.other.readwrite","variable.other.constant.ts","variable.parameter","variable.other.readwrite.alias"],"settings":{"foreground":"#A9B7C6"}},{"scope":"keyword","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"keyword.control","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"keyword.operator","settings":{"foreground":"#A9B7C6"}},{"scope":["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.logical.python"],"settings":{"foreground":"#CC7832"}},{"scope":"keyword.other.unit","settings":{"foreground":"#b5cea8"}},{"scope":["punctuation.section.embedded.begin.metatag.php","punctuation.section.embedded.end.metatag.php"],"settings":{"foreground":"#CC7832"}},{"scope":"support.function.git-rebase","settings":{"foreground":"#9876AA"}},{"scope":"constant.sha.git-rebase","settings":{"foreground":"#b5cea8"}},{"name":"coloring of the Java import and package identifiers","scope":["storage.modifier.import.java","storage.modifier.package.java"],"settings":{"foreground":"#d4d4d4"}},{"name":"this.self","scope":"variable.language","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"name":"Source Python","scope":["source.python"],"settings":{"foreground":"#A9B7C6"}},{"name":"Magic function python","scope":["support.function.magic.python"],"settings":{"foreground":"#9876AA"}},{"name":"Self keyword python","scope":["variable.language.special.self.python","variable.parameter.function.language.special.self.python"],"settings":{"foreground":"#9876AA","fontStyle":""}},{"name":"Function declarations Python","scope":["entity.name.function.python","meta.function-call.generic.python"],"settings":{"foreground":"#FFC66D"}},{"name":"Function declarations","scope":["entity.name.function","support.function","support.constant.handlebars"],"settings":{"foreground":"#FFC66D"}},{"name":"Types declaration and references","scope":["meta.return-type","support.class","support.type","entity.name.type","entity.name.class","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],"settings":{"foreground":"#4EC9B0"}},{"name":"Types declaration and references","scope":["support.class","entity.name.class","support.type","entity.name.type"],"settings":{"foreground":"#FFC66D"}},{"name":"Arrow Function","scope":["storage.type.function.arrow"],"settings":{"foreground":"#A9B7C6"}},{"name":"Types declaration and references, TS grammar specific","scope":["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json"],"settings":{"foreground":"#4EC9B0"}},{"name":"Control flow keywords","scope":"keyword.control","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"name":"Variable and parameter name","scope":["meta.definition.variable.name","support.variable"],"settings":{"foreground":"#A9B7C6"}},{"scope":["variable"],"settings":{"foreground":"#9876AA"}},{"name":"Object keys, TS grammar specific","scope":["meta.object-literal.key","meta.object-literal.key entity.name.function"],"settings":{"foreground":"#9876AA"}},{"name":"CSS property value","scope":["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],"settings":{"foreground":"#CE9178"}},{"scope":"token.info-token","settings":{"foreground":"#6796e6"}},{"scope":"token.warn-token","settings":{"foreground":"#cd9731"}},{"scope":"token.error-token","settings":{"foreground":"#f44747"}},{"scope":"token.debug-token","settings":{"foreground":"#b267e6"}}]}').nG.flatMap((e=>{let{scope:t,settings:n}=e;return[].concat(t).flatMap((e=>e.split(" "))).map((e=>{const t={token:e};return Object.keys(n).forEach((e=>{const r=n[e];r&&(t[e]=r)})),t}))})),j=(0,E.zo)(Q.ZP)`
  .monaco-editor {
    .margin-view-overlays .line-numbers {
      text-align: left;
      padding-left: 7px;
    }

    .scrollbar .slider {
      border-radius: 0.25rem;
    }
  }
`,q=e=>{const t=(()=>{const e=(0,Q.Ik)(),t=(0,d.Fg)(),[n,r]=(0,a.useState)(t.dark?"vs-dark":"light");return(0,a.useLayoutEffect)((()=>{if(e){const n=`jui-theme-${t.name.replace(" ","")}`;e.editor.defineTheme(n,{base:t.dark?"vs-dark":"vs",inherit:!0,colors:t.dark?{"editor.background":"#2B2B2B","editor.lineHighlightBackground":"#323232","editor.lineHighlightBorder":"none","editorLineNumber.foreground":"#606366","editorActiveLineNumber.foreground":"#a4a3a3","editorIndentGuide.background":"#373737","editorIndentGuide.activeBackground":"#505050","editorGutter.background":t.dark?"#313335":"#f0f0f0"}:{},rules:U}),r(n)}}),[e,t]),n})();return a.createElement(j,(0,p.Z)({},e,{options:{minimap:{enabled:!1},lineHeight:22,showFoldingControls:"always",renderIndentGuides:!0,overviewRulerBorder:!1,fontFamily:"JetBrains Mono",fontSize:13,scrollbar:{verticalScrollbarSize:14,horizontalScrollbarSize:8,verticalSliderSize:8,horizontalSliderSize:8,horizontal:"auto",vertical:"visible",alwaysConsumeMouseWheel:!1},...e.options},theme:t}))};q.__docgenInfo={description:"Monaco Editor styled to look like Intellij Platform's editor.\nTODO:\n - folding controls appearance is different and should be changed\n - highlighting pairs of parens, brackets, etc. is different.\n - context menu look different.\n - selection look different.\n - BUG: height is more than necessary. Needs investigation first.",methods:[],displayName:"Editor"};var Z=n(35848),J=n(80965),z=n(22633),W=n(42378),Y=n.n(W);async function X(e){void 0===e&&(e="bfs-local-fs");const t=await ne((t=>{z.FileSystem.IndexedDB.Create({storeName:e},t)}));return await new Promise((e=>t.init(t.store,e))),t}function ee(e){z.initialize(e);const t=z.BFSRequire("fs");return t.promises=Y()({...t,exists:(e,n)=>t.exists(e,(e=>n(null,e)))}),t}const te=e=>{const t=new(z.BFSRequire("fs").FS);return t.initialize(e),t};function ne(e){return new Promise(((t,n)=>{e(((e,r)=>{if(e||!r)return n(e);t(r)}))}))}var re=n(15048);const oe=(0,re.qf)((function*(e,t){const{source:n,target:r,rootDir:a,onCopy:i,force:l}=t,s=yield n.readdir(a);for(const c of s){const s=o().join(a,c),m=yield n.stat(s);if(m.isFile()||m.isSymbolicLink()){if(!l&&(yield ae(r,s)))return;null==i||i(s);const e=yield n.readFile(s);yield ie(r,o().dirname(s)),yield r.writeFile(s,e)}else m.isDirectory()?yield oe(e,{...t,rootDir:o().join(a,c)}):console.warn("unsupported file system item skipped, when copying:",m)}})),ae=async(e,t)=>await e.exists(t)&&!(await e.stat(t)).isDirectory();async function ie(e,t){const n=await e.stat(t).catch((e=>"ENOENT"!==e.code&&Promise.reject(e)));if(!1===n){const n=o().dirname(t);n!==o().dirname(n)&&await ie(e,n),await e.mkdir(t).catch((e=>"EEXIST"===e.code?Promise.resolve():Promise.reject(e)))}else if(!n.isDirectory())throw new Error(`path is not a directory, but already exists: ${t}`)}const le=e=>se.promises.stat(e).catch((()=>null));let se;const ce=(me="demo_app_use_persistent_fs",{get:()=>localStorage.getItem(me),set:e=>localStorage.setItem(me,e)});var me;async function ue(e){let{onCopy:t=console.log,cancelSignal:n}=void 0===e?{}:e;if(!(se.getRootFS()instanceof z.FileSystem.InMemory))return void console.log("Already on persistent fs. Nothing to do.");console.log("Creating IndexedDB FS"),console.time("creating db");const r=await X();await async function(e){let{source:t,target:n,cancelSignal:r,...o}=e;await oe(r,{...o,source:Y()(t),target:Y()(n),rootDir:"/"})}({source:se,target:await te(r),cancelSignal:n,force:!0,onCopy:t}),console.timeEnd("creating db"),ee(r),console.log("FS switched to IndexedDB backend",r)}const de=function(e){let t,n="pending";const r=e.then((e=>{n="success",t=e}),(e=>{n="error",t=e}));return{read:()=>{switch(n){case"pending":throw r;case"error":throw t;default:return t}}}}(("yes"===ce.get()?X():async function(){return await ne((e=>{z.FileSystem.InMemory.Create({},e)}))}()).then(ee).then((e=>(window.fs=e,se=e))).catch((e=>{throw console.log("could not initialize FS:",e),e}))),pe=e=>{let{children:t}=e;return de.read(),t};const he=(0,i.CG)({key:"dirContents",get:e=>async()=>{let t;try{t=await se.promises.readdir(e)}catch(o){return null}const n=await Promise.all(t.map((t=>{const n=`${e}/${t}`;return se.promises.stat(n).then((e=>({...e,type:e.isDirectory()?"dir":"file",filePath:n})))})));return n.map((e=>({type:e.type,name:(0,r.basename)(e.filePath),path:e.filePath,lastModification:e.mtimeMs,size:e.size})))}}),ge=e=>{let{reset:t,refresh:n}=e;return async e=>{n(fe(e)),t(Ae(e))}},fe=(0,i.CG)({key:"readFileContent",get:e=>async()=>{if(!e)return"";return await se.promises.exists(e)?se.promises.readFile(e,{encoding:"utf8"}):null}}),Ae=(0,i.xu)({key:"fileContent",default:fe,effects:e=>[t=>{let{onSet:n}=t;n((async t=>{e&&await se.promises.exists(e)&&se.promises.writeFile(e,t??"","utf8").catch((e=>{console.error("failed to sync the file back to the fs",e)}))}))}]});var Ee=n(55892);function ye(e){const[t,n]=(0,a.useState)(null);let r=(0,i.$P)(e);return(0,a.useEffect)((()=>{"hasValue"===r.state&&n(r.contents)}),[r]),["hasValue"===r.state?r.getValue():t,r.state]}function ve(e){const[t,n]=(0,a.useState)(null);let r=(0,i.$P)(e);(0,a.useEffect)((()=>{"hasValue"===r.state&&n(r.contents)}),[r]);const o="hasValue"===r.state?r.getValue():t;if(null===o)throw r.toPromise();return[o,r.state]}function be(e,t){return(0,i._8)((n=>{let{snapshot:r}=n;return()=>r.getLoadable(e).getValue()??t}),[])}const we=e=>{let{path:t}=e;return!t.split("/").includes(".git")},Ce={JUI:{path:"/workspace/jui",url:"https://github.com/alirezamirian/jui.git"},"React Spectrum":{path:"/workspace/react-spectrum",url:"https://github.com/adobe/react-spectrum.git"},Recoil:{path:"/workspace/recoil",url:"https://github.com/facebookexperimental/Recoil.git"},ExampleRepo:{path:"/workspace/example-repo",url:"https://github.com/thurwitz/example-branches.git"}},ke=Ce.JUI,Se={name:"Workspace",path:"/workspace"},Ie=(0,i.cn)({key:"project",default:Se}),Be=(0,i.CG)({key:"projectFilePath",get:e=>t=>{let{get:n}=t;return o().join(n(Ie).path,e)}}),Te=(0,i.nZ)({key:"project.current.files",get:async e=>{let{get:t}=e;const n=t(Ie);return t(Re(n.path))}}),Re=(0,i.CG)({key:"project.files",get:e=>async t=>{let{get:n}=t;const r=n(he(e)),a=[],i=t=>{if("dir"===t.type){if(we(t)){const e=n(he(t.path));e&&e.forEach(i)}}else a.push({...t,relativePath:o().relative(e,t.path)})};return(r||[]).forEach((e=>i(e))),a}}),Pe=(0,i.cn)({key:"project.activePaths",default:[]}),De=(0,i.nZ)({key:"project.activePaths.hasValue",get:e=>{let{get:t}=e;return t(Pe).length>0}}),xe=((e,t)=>{let n=null;return function(r,o){void 0===o&&(o="unknown");const l=(0,i.Zl)(e),s=(0,a.useRef)();return(0,a.useEffect)((()=>{n===s.current&&l((e=>(0,Ee.Z)(r,e)?e:r))}),[r]),{onFocus:e=>{s.current=e.currentTarget,n=e.currentTarget,l(r)},onBlur:e=>{var n;e.relatedTarget instanceof Element&&null!=(n=e.relatedTarget)&&n.closest("[data-overlay-container], [role=menu]")||l(t)}}}})(Pe,[]),Ne=(0,i.cn)({key:"project.popupManager",default:(0,a.createRef)(),dangerouslyAllowMutability:!0}),Fe=(0,i.cn)({key:"project.windowManager",default:(0,a.createRef)(),dangerouslyAllowMutability:!0}),_e=(0,i.cn)({key:"project.alertDialog",default:(0,a.createRef)(),dangerouslyAllowMutability:!0}),Le=(0,i.nZ)({key:"editor.tabs/Default",get:e=>{let{get:t}=e;return(0,Z.Z)([(0,J.Z)((e=>e.path===t(Be("README.md")))),(0,J.Z)((e=>e.path.endsWith(".ts"))),(0,J.Z)((e=>e.path.endsWith(".js")))],t(Te).filter((e=>"file"===e.type))).slice(0,12).map((e=>({filePath:e.path,editorState:{cursorPos:{lineNumber:0,column:0}}})))}}),Me=(0,i.cn)({key:"editor.tabs",default:[],effects:[e=>{let{getPromise:t,setSelf:n,trigger:r}=e;"get"===r&&t(Le).then((e=>n(e)))}]}),Ve=(0,i.cn)({key:"editor.activeTabIndex",default:0}),Oe=(0,i.nZ)({key:"editor.activeTab",get:e=>{let{get:t}=e;const n=t(Me);return n[t(Ve)]||n[0]||null}}),Ge=(0,i.cn)({key:"editor.cursorPosition",default:new L.Ly(0,0)}),He=(0,i.cn)({key:"editor.focusHandle",default:null}),Ke=e=>{let{snapshot:t,set:n}=e;return function(e,r){void 0===r&&(r=!0);const o=t.getLoadable(Me).getValue(),a=o.findIndex((t=>t.filePath===e)),i=e=>{n(Ve,e)},l=()=>{var e;null==(e=t.getLoadable(He).valueOrThrow())||e.focus()};if(a>-1)i(a);else{const t=o.length;n(Me,(t=>[...t,{filePath:e,editorState:{cursorPos:{lineNumber:0,column:0}}}])),i(t)}r&&setTimeout(l)}},$e=e=>{let{set:t}=e;return e=>t(Me,(t=>t.filter(((t,n)=>n!==e))))},Qe=e=>t=>{const{set:n,snapshot:r,transact_UNSTABLE:o}=e,a=$e(e),i=r.getLoadable(Me).getValue().findIndex((e=>e.filePath===t));i>-1&&o((()=>{a(i),n(Ve,Math.max(i-1,0))}))},Ue=e=>{let{set:t}=e;return e=>{t(Me,(t=>t.filter(((t,n)=>n===e))))}},je=e=>{let{set:t,snapshot:n}=e;return e=>{const r=n.getLoadable(Me).getValue().length;e>=0&&e<r&&t(Ve,e)}},qe=e=>{let{snapshot:t}=e;return()=>{var e;null==(e=t.getLoadable(He).valueOrThrow())||e.focus()}},Ze=(0,i.nZ)({key:"editor.manager",get:e=>{let{getCallback:t}=e;return{openPath:t(Ke),closeTab:t($e),closePath:t(Qe),closeOtherTabs:t(Ue),select:t(je),focus:t(qe)}}}),Je=()=>(0,i.sJ)(Ze);function ze(e){return Array.isArray(e)?1===e[1]?["DELETED","NOT_CHANGED","MODIFIED"][e[2]]:0===e[1]?0===e[3]?"UNKNOWN":"ADDED":"UNKNOWN":"modified"===e||"*modified"===e?"MODIFIED":"deleted"===e||"*deleted"===e?"DELETED":"added"===e?"ADDED":"unmodified"===e?"NOT_CHANGED":"UNKNOWN"}var We=n(4594),Ye=n(68578);let Xe;function et(e){let{componentName:t,refine:n,read:r,update:o,storageFile:a=Xe.WORKSPACE_FILE}=e;const l=[a,t].join("|");return(0,Ye.ok)({storeKey:"ProjectWorkspace",itemKey:l,syncDefault:!1,read:async e=>{let{read:t}=e;return r(await t(l))},write:(e,t)=>{let{write:n,read:r}=e;t instanceof i.nY||n(l,o(t))},refine:n})}!function(e){e.WORKSPACE_FILE="$WORKSPACE_FILE$"}(Xe||(Xe={}));var tt=n(19102);const nt=(0,tt.IX)((0,tt.Ry)({dir:(0,tt.Z_)(),vcs:(0,tt.G0)((0,tt.i0)("Git"))})),rt=(0,i.cn)({key:"vcsRoots",effects:[et({storageFile:"vcs.xml",refine:nt,componentName:"VcsDirectoryMappings",read:e=>{var t;const n=null==(r=null==e?void 0:e.mapping,t=Array.isArray(r)?r:r?[r]:[])?void 0:t.map((e=>({dir:e["@directory"],vcs:e["@vcs"]})));var r;return n.length>0?n:ot()},update:e=>t=>({...t||{},mapping:e.map((e=>{let{vcs:t,dir:n}=e;return{"@directory":n,"@vcs":t}}))})})]}),ot=()=>Promise.all([...Object.values(Ce),Se].map((async e=>{let{path:t}=e;if(await se.promises.exists(t))return l.ZP.findRoot({fs:se,filepath:t}).catch((()=>null))}))).then((e=>[...new Set(e.filter(We.N))].map((e=>({dir:e,vcs:"Git"}))))),at=(0,i.CG)({key:"gitRootForFile",get:e=>t=>{let{get:n}=t;return(0,l.AY)({fs:se,filepath:e}).catch((()=>null))}}),it=async e=>{console.time(`statusMatrix ${e}`);const t=await(0,l.ks)({fs:se,dir:e});console.timeEnd(`statusMatrix ${e}`);const n={};return t.forEach((e=>{n[e[0]]=ze(e)})),n},lt=(0,i.xu)({key:"vcs.repoStatus",effects:e=>[t=>{let{setSelf:n}=t;n(it(e))}]}),st=(0,i.cn)({key:"vcs.repoStatus.updating",default:!1}),ct=(0,i.CG)({key:"vcs.fileStatus",get:e=>async t=>{let{get:n}=t;const o=n(at(e));if(o){const t=r.relative(o,e),a=n(lt(o));return a[t]||console.log("file status missing in repo status state, fetching individually",e),a[t]??ze(await(async e=>{let{filepath:t,...n}=e;return l.ZP.statusMatrix({...n,filepaths:[t]}).then((e=>e[0]))})({fs:se,dir:o,filepath:t}))}return"NOT_CHANGED"}}),mt=e=>{let{set:t,snapshot:n}=e;return async e=>{const o=n.getLoadable(at(e)).getValue();if(o){const n=r.relative(o,e),a=await l.ZP.statusMatrix({fs:se,dir:o,filepaths:[n]});t(lt(o),(e=>{const t={...e};return 0===a.length&&delete t[n],a.forEach((e=>{t[e[0]]=ze(e)})),t}))}}},ut=()=>(0,i._8)(mt),dt=()=>(0,i._8)((e=>{let{snapshot:t,set:n}=e;return async()=>{n(st,!0);try{const e=await t.getPromise(rt);await Promise.all(null==e?void 0:e.map((e=>{let{dir:t,vcs:r}=e;return it(t).then((e=>{n(lt(t),e)}))})))}finally{n(st,!1)}}}),[]),pt=e=>{const t=(0,d.Fg)();switch(e){case"MODIFIED":return t.dark?"#6897bb":"#0032a0";case"ADDED":return t.dark?"#629755":"#0a7700";case"DELETED":return t.dark?"#6c6c6c":"#616161";case"UNKNOWN":return t.dark?"#d1675a":"#993300"}},ht=e=>{let{children:t,filepath:n}=e;const r=(e=>{const[t]=ye(ct(e));return pt(t??"NOT_CHANGED")})(n);return a.createElement("span",{style:{color:r}},t)},gt=e=>{let{children:t,status:n}=e;const r=(0,d.Fg)().currentForegroundAware(pt(n));return a.createElement("span",{style:{color:r}},t)};ht.__docgenInfo={description:"",methods:[],displayName:"FileStatusColor"},gt.__docgenInfo={description:"",methods:[],displayName:"StatusColor"};var ft=n(87211),At=n(20288);const Et={value:null};function yt(){var e;null==(e=Et.value)||e.show({icon:"Warning",title:"Unimplemented action",body:"This action is not implemented yet.",actions:a.createElement(a.Fragment,null,a.createElement(At.r,{onPress:yt},"Read more..."))})}var vt=n(58867),bt=n(15237);const wt=E.zo.div.attrs({tabIndex:-1})`
  display: flex;
  flex-direction: column;
  height: inherit;
  justify-content: center;
  padding: 0 25%;
  font-size: 1rem;
  outline: none;
`,Ct=E.zo.div`
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
`,kt=E.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.linkForegroundEnabled}};
`;function St(){return a.createElement(wt,null,a.createElement(It,{actionId:vt.$.GO_TO_FILE}),a.createElement(It,{actionId:vt.$.GO_TO_ACTION}))}function It(e){let{actionId:t}=e;const n=(0,bt.k)(),r=(0,w.BH)(t);return a.createElement(Ct,null,null==r?void 0:r.title,a.createElement(kt,null,n(t)))}St.__docgenInfo={description:"",methods:[],displayName:"EditorZeroState"};const Bt=(0,i.nZ)({key:"editorState",get:e=>{let{get:t}=e;const n=t(Oe);return{...n,content:t(Ae(null==n?void 0:n.filePath))}}}),Tt=()=>{const[e,t]=[(0,i.sJ)(Me),(0,i.sJ)(Ze)],n=(0,a.useRef)(),[o,l]=(0,a.useState)(!1),s=(0,w.BH)(C.xm),c=(0,i.Zl)(Ge),[{content:m,filePath:u},d]=ve(Bt),p=(0,k.d)({closePath:t.closePath,closeOthersTabs:t.closeOtherTabs}),h=(0,i.Zl)(He),g=(0,i.Zl)(Ae(u)),f=ut(),A=xe(u?[u]:[]);return a.createElement(Rt,(0,ft.dG)(A,{onFocus:()=>{l(!0),h({focus:()=>{var e;return null==(e=n.current)?void 0:e.focus()}})}}),e.length>0?a.createElement(a.Fragment,null,a.createElement(S.X,{renderMenu:()=>a.createElement(I.v2,{onAction:yt},a.createElement(B.c,{key:"close"},"Close"),a.createElement(B.c,{key:"closeOthers"},"Close Other tabs"),a.createElement(B.c,{key:"closeAll"},"Close all tabs"),a.createElement(B.c,{key:"closeLeft"},"Close tabs to the left"),a.createElement(B.c,{key:"closeRight"},"Close tabs to the right"))},a.createElement(T.s,{items:e,active:o,selectedKey:u,onSelectionChange:n=>{t.select(e.findIndex((e=>e.filePath===n)))},noBorders:!0},(t=>{const n=r.basename(t.filePath),o=a.createElement(R.vq,{icon:G(t.filePath)});return a.createElement(P.E,{key:t.filePath,textValue:n,inOverflowMenu:a.createElement(D._,{content:n,icon:o})},a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:t.filePath})},a.createElement(F.X,{icon:o,title:a.createElement(ht,{filepath:t.filePath},n),closeButton:a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Close. Alt-Click to Close Others"})},a.createElement(_.W,{onPress:n=>{n.altKey?p.current.closeOthersTabs(e.indexOf(t)):p.current.closePath(t.filePath)}})),containerProps:{onDoubleClick:()=>{null==s||s.perform()}}})))}))),"string"==typeof m?a.createElement(q,{height:"100%",path:u,onMount:(e,t)=>{e.focus(),function(e){e.languages.typescript.typescriptDefaults.setCompilerOptions({jsx:L.Mj.typescript.JsxEmit.React}),e.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1})}(t),n.current=e,e.onDidChangeCursorPosition((e=>{c(e.position)})),e.onDidChangeModel((()=>{}))},onChange:function(e){void 0===e&&(e=""),l(!1),g(e),u&&f(u).catch((e=>{console.error("Could not update file status",e)}))},value:m??""}):m&&"UNSUPPORTED CONTENT"):a.createElement(St,null),"loading"===d&&a.createElement(Pt,null))},Rt=E.zo.div`
  position: relative;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: ${e=>{let{theme:t}=e;return t.color("Editor.background",t.isUnderDarcula()?"rgb(40,40,40)":t.commonColors.panelBackground)}};
`,Pt=(0,E.zo)(g)`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`;Tt.__docgenInfo={description:"Used as main content in the main ToolWindows. Shows currently opened files tabs and the editor.\n\nTODO: preserve editor state when switching between tabs\nTODO: support multiple editors in split view.",methods:[],displayName:"FileEditor"};var Dt=n(76906),xt=n(2446),Nt=n(29902);const Ft=(0,d.ZP)(Nt.O).withConfig({displayName:"Terminal__StyledXterm",componentId:"sc-19jke66-0"})(["height:100%;background:rgb(43,43,43);"]),_t=()=>{const[e,t]=(0,a.useState)(""),n=(0,a.useRef)(null),r=(0,a.useMemo)((()=>({theme:{background:"rgb(43,43,43)",selection:"#214283"},fontFamily:"sans-serif",letterSpacing:-8,fontSize:12,lineHeight:1.3,cursorStyle:"block",cursorBlink:!0,cursorWidth:8,rendererType:"dom"})),[]);return(0,a.useEffect)((()=>{setTimeout((()=>{var e,t;null==(e=n.current)||e.terminal.resize(80,10),null==(t=n.current)||t.terminal.write("$ ")}),3e3)}),[]),a.createElement(Ft,{ref:n,options:r,onData:r=>{const o=r.charCodeAt(0);if(13===o){var a,i;if(e.length>0)null==(i=n.current)||i.terminal.write("\r\nYou typed: '"+e+"'");null==(a=n.current)||a.terminal.write("\r\n$ "),t("")}else{if(o<32||127===o)return;var l;null==(l=n.current)||l.terminal.write(r),t(e+r)}}})};_t.__docgenInfo={description:"",methods:[],displayName:"Terminal"};var Lt=n(35200),Mt=n(41050);const Vt=(0,i.cn)({key:"projectView.foldersOnTop",default:!0}),Ot=(0,i.cn)({key:"projectView.expandedKeys",default:(0,i.nZ)({key:"projectView.expandedKeys/default",get:e=>{let{get:t}=e;return new Set(t(rt).flatMap((e=>{let{dir:t}=e;return K(t).concat(t)})).concat(t(Ie).path))}})}),Gt=(0,i.cn)({key:"projectView.selection",default:new Set([])}),Ht=(0,i.nZ)({key:"projectView.selectedKeys",get:e=>{let{get:t}=e;const n=t(Gt),r=t($t).byKey;return[..."all"===n?r.keys():n].map((e=>r.get(`${e}`))).filter(We.N)}}),Kt=(0,i.cn)({key:"projectView.focusHandle",default:a.createRef(),dangerouslyAllowMutability:!0}),$t=(0,i.nZ)({key:"projectTree",get:e=>{let{get:t}=e;return async function(e,t){const n=t(he(e.path)),r=new Map,o=e=>async n=>{const a={...n,parent:e};if("dir"===n.type){if(we(n)){const e={...a,children:[]};return e.children=(await Promise.all((t(he(n.path))??[]).map(o(e)))).filter(We.N),Qt(e.children),r.set(e.path,e),e}return null}return r.set(a.path,a),a},a=(await Promise.all((n||[]).map(o(null)))).filter(We.N);Qt(a);const i={type:"project",path:e.path,name:e.name,parent:null,children:a};return r.set(i.path,i),{root:i,byKey:r}}(t(Ie),t)}});(0,i.cn)({key:"project.tree.sort",default:"name"});function Qt(e){e.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0))}const Ut=e=>{let{snapshot:t,set:n}=e;return e=>{const r=t.getLoadable(Ot).valueOrThrow(),o=[t.getLoadable(Ie).valueOrThrow().path].concat(K(e));n(Ot,new Set([...r,...o]))}},jt=e=>{let{snapshot:t}=e;return e=>{var n;const r=null==(n=t.getLoadable(Kt).valueOrThrow())?void 0:n.current;null==r||r.replaceSelection(e),null==r||r.focus(e)}},qt=()=>{const e=(0,i._8)(Ut,[]),t=(0,i._8)(jt,[]);return n=>{e(n),t(n)}};var Zt=n(46162),Jt=n(21692),zt=n(43815),Wt=n(61090),Yt=n(10463),Xt=n(44065),en=n(55998),tn=n(25897);const nn="NewElement",rn="NewFile",on="NewDir",an="CopyReferencePopupGroup",ln="CopyFileReference",sn="CopyAbsolutePath",cn="CopyFileName";function mn(e){let{getActionContext:t}=e;return a.createElement(en.C,{"aria-label":"Project Tree actions",actionContext:t,actions:[{...(0,w.BH)(nn),title:"New",shortcut:void 0},new tn.P,(0,w.BH)(vt.$.CUT),(0,w.BH)(vt.$.COPY),(0,w.BH)(an),(0,w.BH)(vt.$.PASTE),new tn.P,(0,w.BH)(vt.$.DELETE),new tn.P].filter(We.N)})}mn.__docgenInfo={description:"",methods:[],displayName:"ProjectViewContextMenu",props:{getActionContext:{required:!0,tsType:{name:"signature",type:"function",raw:"() => ActionContext",signature:{arguments:[],return:{name:"ActionContext"}}},description:""}}};const un=()=>{const e=(0,i.sJ)(Ie),t=Je(),n=(0,a.useRef)(null),r=(0,i.Zl)(Kt);(0,a.useLayoutEffect)((()=>{r(n)}),[n]);const[o]=ye($t),[l,s]=(0,i.FV)(Ot),[c,m]=(0,i.FV)(Gt),u=(0,i.sJ)(Vt)?(0,Yt.Z)((e=>"dir"===e.type?1:2)):Xt.Z,d="all"===c?[]:[...c].filter((e=>"string"==typeof e)),h=xe(d),g=(0,a.useRef)(null),f=(0,a.useRef)(),E=()=>{var e;return{element:(null==(e=g.current)?void 0:e.querySelector(`[data-key="${f.current}"]`))??null,event:null}};return a.createElement(A,null,(null==o?void 0:o.root)&&a.createElement(S.X,{ref:g,style:{height:"100%"},onOpen:e=>{var t;let{target:n}=e;return f.current=null==n||null==(t=n.closest("[data-key]"))?void 0:t.dataset.key},renderMenu:()=>a.createElement(mn,{getActionContext:E})},a.createElement(Zt.b,(0,p.Z)({"aria-label":"Project structure tree",treeRef:n},h,{items:[o.root],onAction:e=>{t.openPath(`${e}`)},fillAvailableSpace:!0,autoFocus:!0,selectionMode:"multiple",selectedKeys:c,onSelectionChange:m,expandedKeys:l,onExpandedChange:s}),(t=>a.createElement(B.c,{key:t.path,textValue:t.name,childItems:"children"in t?u(t.children):void 0},a.createElement(Jt.e,null,a.createElement(fn,{node:t}),"project"===t.type?a.createElement(a.Fragment,null,a.createElement("b",null,a.createElement(zt.J,null)),a.createElement(Jt.e.Hint,null,e.path)):a.createElement(dn,{node:t})))))))},dn=e=>{let{node:t}=e;return"dir"===t.type?a.createElement(pn,{node:t}):a.createElement(hn,{node:t})},pn=e=>{let{}=e;return a.createElement(zt.J,null)},hn=e=>{let{node:t}=e;const n=(0,a.useContext)(Wt.k);return null!=n&&n.isSelected&&null!=n&&n.isContainerFocused?a.createElement(zt.J,null):a.createElement(ht,{filepath:t.path},a.createElement(zt.J,null))},gn={project:"nodes/folder",dir:V,file:M};function fn(e){let{node:t}=e;const n="file"===(r=t).type?G(r.name):gn[r.type]??null;var r;return a.createElement(a.Fragment,null,n&&a.createElement(R.vq,{icon:n}))}un.__docgenInfo={description:"",methods:[],displayName:"ProjectViewPane"};var An=n(37163),En=n(17377),yn=n(91593),vn=n(62389),bn=n(83936);function wn(e){let{tooltip:t="Show help contents",...n}=e;return a.createElement(x.a,{tooltip:a.createElement(bn.k,{helpText:t})},a.createElement(vn.z,(0,p.Z)({variant:"icon","aria-label":"Help","aria-description":"Show help contents"},n),a.createElement("span",{style:{fontSize:18}},"?")))}function Cn(e,t){return void 0===t&&(t=Xt.Z),e.filter((n=>{const r=t(n);return!e.find((e=>{return e!==n&&(a=t(e),r.startsWith(a+o().sep));var a}))}))}wn.__docgenInfo={description:"",methods:[],displayName:"HelpButton",props:{tooltip:{defaultValue:{value:'"Show help contents"',computed:!1},required:!1,tsType:{name:"string"},description:""}}};const kn=e=>async t=>{const{refresh:n,reset:r,snapshot:a}=e,i=mt(e),s=a.retain();try{try{await se.promises.unlink(t);const e=await a.getPromise(at(t));e&&(await l.ZP.remove({fs:se,dir:e,filepath:o().relative(e,t)}),await i(t))}catch(c){console.error(`error in deleting file ${t}`,c)}finally{(await a.getPromise(Ze)).closePath(t),n(he(o().dirname(t))),r(Ae(t))}}finally{s()}},Sn=e=>async t=>{const n=kn(e);return Promise.all(t.map(n))},In=e=>async t=>{const{refresh:n,reset:r,snapshot:a}=e,i=kn(e),l=a.retain(),s=async e=>{const r=await se.promises.readdir(e);await Promise.all(r.map((async t=>{const n=o().resolve(e,t),r=await se.promises.stat(n);r.isFile()?await i(n):r.isDirectory()&&await s(n)}))),await se.promises.rmdir(e),n(he(t))};try{try{await s(t)}catch(c){console.error(`error in deleting directory ${t}`,c)}finally{n(he(o().dirname(t)))}}finally{l()}},Bn=e=>async(t,n)=>{const{snapshot:r,refresh:a,reset:i}=e,l=r.retain(),s=o().join(t,n);try{if(await se.promises.exists(s))throw new Error(`File ${s} already exists`);await ie(se.promises,s),a(he(t))}finally{l()}};var Tn=n(83483);const Rn=new Tn.C("{count, plural,\n    =1 {1 file}\n    other {# files}\n  }","en-US"),Pn=new Tn.C("{count, plural,\n    =1 {1 directory}\n    other {# directories}\n  }","en-US"),Dn=(0,i.nZ)({key:`action.${vt.$.DELETE}`,get:e=>{let{get:t,getCallback:n}=e;return{id:vt.$.DELETE,title:"Delete",description:"Delete selected item",isDisabled:!t(De),actionPerformed:n((e=>{let{snapshot:t}=e;return async()=>{const e=n(In),r=n(kn),i=t.getLoadable(Ht).getValue(),l=t.getLoadable(Fe).getValue().current,s=t.getLoadable(_e).getValue().current;if(0===i.length)return;const c=Cn(i,(e=>e.path)),m=c.filter((e=>"file"===e.type)).map((e=>e.path)),u=c.filter((e=>"project"===e.type||"dir"===e.type)).map((e=>e.path));if(u.length>0){const t=1===u.length&&0===m.length?o().basename(u[0]):null;await(null==s?void 0:s.confirm({title:"Delete",okText:"Delete",message:a.createElement("div",{style:{width:354}},"Delete"," ",t?`"${t}"`:[{count:u.length,message:Pn},{count:m.length,message:Rn}].filter((e=>{let{count:t}=e;return t>0})).map((e=>{let{message:t,count:n}=e;return t.format({count:n})})).join(" and "),"?",a.createElement("br",null),"All files and subdirectories in",t?` "${t}" `:" the selected directories ","will be deleted. ",a.createElement("br",null),"You might not be able to fully undo this operation!")}))&&(u.forEach((t=>e(t))),m.forEach((e=>r(e))))}else null==l||l.open((e=>{let{close:t}=e;return a.createElement(xn,{filePaths:m,close:t})}))}}))}}});function xn(e){let{close:t,filePaths:n}=e;const r=(0,i._8)(Sn,[]);return a.createElement(An.Du,{minWidth:"content",minHeight:"content"},a.createElement(En.b,{header:"Delete",content:a.createElement("form",{id:"delete_dialog_form",onSubmit:e=>{e.preventDefault()},style:{padding:"0.75rem 1rem"}},a.createElement("div",{style:{marginBottom:".5rem"}},1===n.length?`Delete file "${o().basename(n[0])}"`:`Delete ${n.length} files`,"?"),a.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"}},a.createElement(yn.X,{isDisabled:!0},"Safe delete (with usage search)"),a.createElement("div",{style:{display:"flex",gap:"1rem"}},a.createElement(yn.X,{isDisabled:!0},"Search in comments and strings"),a.createElement(yn.X,{isDisabled:!0},"Search for text occurrences")))),footer:a.createElement(En.b.Footer,{left:a.createElement(wn,{onPress:()=>yt()}),right:a.createElement(a.Fragment,null,a.createElement(vn.z,{onPress:t},"Cancel"),a.createElement(vn.z,{autoFocus:!0,type:"submit",form:"delete_dialog_form",variant:"default",onPress:()=>{r(n),t()}},"Ok"))})}))}const Nn=(0,i.nZ)({key:`action.${vt.$.COPY}`,get:e=>{let{get:t,getCallback:n}=e;return{id:vt.$.COPY,title:"Copy",description:"Copy to clipboard",icon:a.createElement(R.vq,{icon:"actions/copy"}),isDisabled:!t(De),actionPerformed:n((e=>{let{snapshot:t}=e;return async()=>{yt()}}))}}}),Fn=(0,i.nZ)({key:`action.${vt.$.CUT}`,get:e=>{let{get:t,getCallback:n}=e;return{id:vt.$.CUT,title:"Cut",description:"Cut to clipboard",icon:a.createElement(R.vq,{icon:"actions/menu-cut"}),isDisabled:!t(De),actionPerformed:n((e=>{let{snapshot:t}=e;return async()=>{yt()}}))}}}),_n=(0,i.nZ)({key:`action.${vt.$.PASTE}`,get:e=>{let{get:t,getCallback:n}=e;return{id:vt.$.PASTE,title:"Paste",description:"Paste from clipboard",icon:a.createElement(R.vq,{icon:"actions/menu-paste"}),isDisabled:!t(De),actionPerformed:n((e=>{let{snapshot:t}=e;return async()=>{yt()}}))}}}),{SELECT_IN_PROJECT_VIEW:Ln}={SELECT_IN_PROJECT_VIEW:"SelectInProjectView"};function Mn(){const e=(0,i.sJ)(Kt),t=(0,Lt.x)({treeRef:e}),n=function(){const e=(0,i.sJ)(Oe),t=qt(),n=()=>{e&&t(e.filePath)};return[{id:Ln,title:"Select Opened File",icon:a.createElement(R.vq,{icon:"general/locate"}),actionPerformed:n,isDisabled:!e,description:"Selects a context file in the Project View"},(0,i.sJ)(Dn),(0,i.sJ)(Fn),(0,i.sJ)(Nn),(0,i.sJ)(_n)].filter(We.N)}();return a.createElement(xt.n,{headerContent:"Project",actions:[...t,...n],additionalActions:a.createElement(a.Fragment,null,a.createElement(Mt.K,{actionId:Ln}),a.createElement(Mt.K,{actionId:vt.$.EXPAND_ALL}),a.createElement(Mt.K,{actionId:vt.$.COLLAPSE_ALL}))},a.createElement(un,null))}Mn.__docgenInfo={description:"",methods:[],displayName:"ProjectToolWindow"};var Vn=n(78450),On=n(9773),Gn=n(80500),Hn=n(8723);function Kn(e){let{children:t}=e;const[n,r]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const e=setTimeout((()=>{r(!0)}),500);return()=>clearTimeout(e)}),[]),n?a.createElement(a.Fragment,null,t):null}Kn.__docgenInfo={description:"",methods:[],displayName:"Delayed",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};var $n=n(6182);function Qn(e,t){return t?e?e.path!==t.path?(0,r.dirname)(e.path)===(0,r.dirname)(t.path)?{type:"RENAMED",before:e,after:t}:{type:"MOVED",before:e,after:t}:{type:"MODIFIED",before:e,after:t}:{type:"ADDED",after:t}:{type:"DELETED",before:e}}Qn.Unversioned=e=>({type:"UNVERSIONED",after:e});const Un={ADDED:"ADDED",DELETED:"DELETED",MOVED:"MODIFIED",RENAMED:"MODIFIED",MODIFIED:"MODIFIED",UNVERSIONED:"UNKNOWN"};function jn(e,t){return(null==e?void 0:e.path)===(null==t?void 0:t.path)&&e.isDir===t.isDir}Qn.fileStatus=function(e){return Un[e.type]??"NOT_CHANGED"},Qn.path=function(e){return Qn.revision(e).path},Qn.content=function(e){return"after"in e?e.after.content():"before"in e?e.before.content():Promise.resolve("")},Qn.isAddition=function(e){return"ADDED"===e.type},Qn.isDeletion=function(e){return"DELETED"===e.type},Qn.isRename=function(e){return"RENAMED"===e.type},Qn.isMove=function(e){return"MOVED"===e.type},Qn.isModified=function(e){return"MODIFIED"===e.type},Qn.isUnversioned=function(e){return"UNVERSIONED"===e.type},Qn.revision=function(e){return"after"in e?e.after:e.before},Qn.equals=function(e,t){const n="before"in e&&"before"in t?jn(e.before,t.before):"before"in e=="before"in t,r="after"in e&&"after"in t?jn(e.after,t.after):"after"in e=="after"in t;return n&&r};const qn=(0,i.CG)({key:"vcs.repoChanges",get:e=>t=>{let{get:n}=t;return Object.entries(n(lt(e))).map((t=>{let[n,r]=t;const a={path:o().join(e,n),isDir:!1,content(){throw new Error("Not implemented")}};return"ADDED"===r?Qn(null,a):"MODIFIED"===r?Qn(a,a):"DELETED"===r?Qn(a,null):"UNKNOWN"===r?Qn.Unversioned(a):null})).filter(We.N)}}),Zn=(0,i.nZ)({key:"vcs.allChanges",get:e=>{let{get:t}=e;return t(rt).map((e=>{let{dir:n}=e;return t(qn(n))})).flat()}}),Jn=(0,i.cn)({key:"changelists.lists",default:[{id:"some-UUID",name:"Changes",comment:"last modified commit message",changes:[],active:!0},{id:"some-other-UUID",name:"Some other changelist",comment:"Some empty changelist for testing",changes:[],active:!1}]}),zn=(0,i.nZ)({key:"changelists.lists/default",get:e=>{let{get:t}=e;return t(Jn).find((e=>e.active))??null}}),Wn=(0,i.nZ)({key:"changelists.lists/unversioned",get:e=>{let{get:t}=e;return t(Zn).filter(Qn.isUnversioned)}});function Yn(){const e=(0,i.sJ)(Zn),t=(0,i.Zl)(Jn);return(0,a.useEffect)((()=>{t((t=>{const n=e.filter((e=>!Qn.isUnversioned(e))),r=t.map((e=>({...e,changes:e.changes.map((e=>n.find((t=>Qn.equals(t,e))))).filter(We.N)}))),o=r.flatMap((e=>{let{changes:t}=e;return t})),a=n.filter((e=>!o.find((t=>Qn.equals(e,t)))));return(r.find((e=>{let{active:t}=e;return t}))??r[0]).changes.push(...a),r}))}),[e]),null}var Xn=n(42677);const er=e=>{let{getPath:t,mapNode:n=Xt.Z,createDirectoryNode:r=(e=>e),shouldCollapseDirectories:o=!1}=e;return e=>{const a={},i=e.map(n).map((e=>{const n=t(e);return K(n.startsWith("/")?n:`/${n}`).reduce(((e,t)=>{a[t]||(a[t]=r({type:"directory",dirPath:t,parentNodePath:"",children:[]})),tr(e)&&(e.parentNodePath=t);const n=a[t];return n.children=n.children.includes(e)?n.children:[e,...n.children],n}),e)})),l=(0,Xn.Z)(i);return o?l.map((e=>nr(r,e))):l}};function tr(e){return"type"in e&&"directory"===e.type}function nr(e,t){let{children:n,dirPath:r,parentNodePath:o}=t;return 1===t.children.length&&tr(t.children[0])?(r=t.children[0].dirPath,n=t.children[0].children.map((t=>tr(t)?nr(e,{...t,parentNodePath:r}):t)),nr(e,e({type:"directory",dirPath:r,parentNodePath:o,children:n}))):{...t,children:n.map((t=>tr(t)?nr(e,t):t))}}const rr=(e,t)=>`${e}_${t}`,or=e=>rr("change",Qn.path(e)),ar=function(e,t){return void 0===t&&(t=!0),{type:"change",key:or(e),change:e,showPath:t}},ir=e=>"children"in e,lr=e=>"change"===e.type,sr=e=>ir(e)?e.children:null,cr={ROLLBACK:"ChangesView.Revert",REFRESH:"ChangesView.Refresh",SHELVE_SILENTLY:"ChangesView.ShelveSilently",SHELVE:"ChangesView.Shelve",UNSHELVE_SILENTLY:"ChangesView.UnshelveSilently",NEW_CHANGELIST:"ChangesView.NewChangeList",ADD_UNVERSIONED:"ChangesView.AddUnversioned",RENAME_CHANGELIST:"ChangesView.Rename",REMOVE_CHANGELIST:"ChangesView.RemoveChangeList",SET_DEFAULT_CHANGELIST:"ChangesView.SetDefault",MOVE_TO_ANOTHER_CHANGELIST:"ChangesView.Move",SHOW_DIFF:"Diff.ShowDiff",CHECKIN_FILES:"CheckinFiles",CHECKIN_PROJECT:"CheckinProject",JUMP_TO_SOURCE:vt.$.EDIT_SOURCE,GROUP_CHANGES_VIEW_POPUP_MENU:"ChangesViewPopupMenu",GROUP_BY_DIRECTORY:"ChangesView.GroupBy.Directory",GIT_ADD:"Git.Add",GIT_INIT:"Git.Init",GIT_CREATE_NEW_BRANCH:"Git.CreateNewBranch",GIT_BRANCHES:"Git.Branches",GIT_LOG_HIDE_BRANCHES:"Git.Log.Hide.Branches",GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH:"Git.Log.Branches.Navigate.Log.To.Selected.Branch",GIT_UPDATE_SELECTED:"Git.Update.Selected",FOCUS_TEXT_FILTER:"Vcs.Log.FocusTextFilter",MATCH_CASE:"Vcs.Log.MatchCaseAction",REG_EXP:"Vcs.Log.EnableFilterByRegexAction",COPY_REVISION_NUMBER:"Vcs.CopyRevisionNumberAction",LOG_REFRESH:"Vcs.Log.Refresh",SHOW_DETAILS:"Vcs.Log.ShowDetailsAction",SHOW_DIFF_PREVIEW:"Vcs.Log.ShowDiffPreview",PRESENTATION_SETTINGS:"Vcs.PresentationSettings",FILE_HISTORY_PRESENTATION_SETTINGS:"Vcs.FileHistory.PresentationSettings",CopyPathFromRepositoryRootProvider:"CopyPathFromRepositoryRootProvider"},mr={id:"repository",title:"Repository",isAvailable:(0,i.nZ)({key:"repositoryGrouping/isAvailable",get:e=>{let{get:t}=e;return t(rt).length>1}}),groupFn:(0,i.nZ)({key:"repositoryGrouping/groupFn",get:e=>{let{get:t}=e;return e=>t(rt).map((t=>function(e,t){return void 0===t&&(t=[]),{type:"repo",key:rr("repo",e.dir),repository:e,children:t}}(t,e.filter((e=>{var n;return null==(n=Qn.path(e.change))?void 0:n.startsWith(t.dir)})))))}})},ur={id:"directory",title:"Directory",isAvailable:!0,useShortcutOf:cr.GROUP_BY_DIRECTORY,groupFn:er({shouldCollapseDirectories:!0,createDirectoryNode:e=>{let{dirPath:t,parentNodePath:n,children:r}=e;return function(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r=""),{type:"directory",key:r+rr("directory",e),dirPath:e,parentNodePath:t,children:n}}(t,n,r)},mapNode:e=>ar(e.change,!1),getPath:e=>Qn.path(e.change)})},dr=[mr,ur],pr=(0,i.nZ)({key:"changes.availableGroupings",get:e=>{let{get:t}=e;return dr.filter((e=>(0,i.Oy)(e.isAvailable)?t(e.isAvailable):e.isAvailable))}}),hr=(e,t)=>{if(0===e.length||0===t.length)return t;const n=e.slice(1),r=t.filter(lr),o=t.filter(ir),a=e[0](r);return[...o,...a].forEach((e=>{e.children=hr(n,e.children)})),a.filter((e=>e.children.length>0))},gr=e=>{let{get:t,isActive:n,groupings:r}=e;return e=>{const o=e=>(0,i.Oy)(e)?t(e):e,a=r.filter((e=>{let{id:t,isAvailable:r}=e;return o(r)&&o(n(t))})).map((e=>{let{groupFn:t}=e;return o(t)})).map((t=>e?function(){return t(...arguments).map((t=>({...t,key:`${e}:${t.key}`})))}:t));return e=>hr(a,e)}};var fr=n(27780),Ar=n(22991),Er=n(2256);const yr=(0,i.cn)({key:"rollbackView.isOpen",default:!1}),vr=(0,i.cn)({key:"rollbackView.windowBounds",default:{height:500}}),br=(0,i.cn)({key:"rollbackView.initiallySelectedChanges",default:[]}),wr=(0,i.nZ)({key:"rollbackView.includedRootNodes",get:e=>{let{get:t}=e;const n=t(br),{rootNodes:r}=t(Gr),o=r.filter((e=>"changelist"===e.type&&n.some((t=>e.changeList.changes.includes(t)))));return 0===o.length?r.filter((e=>"changelist"===e.type&&e.changeList.active)):o}}),Cr={isOpen:yr,windowBounds:vr,initiallyExpandedKeys:(0,i.nZ)({key:"rollbackView.initiallyExpandedKeys",get:e=>{let{get:t}=e;const n=t(br),r=t(wr),o=(0,fr.Bp)((e=>ir(e)?e.children:null),(e=>e.key),r,n.map(or));return new Set(o.length?o:(0,fr.Om)((e=>ir(e)?e.children:null),(e=>e.key),r))}}),initiallyIncludedChanges:br,rootNodes:wr};function kr(e){const t=new Map,n=new Map,r=new Set;return(0,fr.Ck)(sr,((e,o)=>{if(n.set(e.key,e),"children"in e&&r.add(e.key),!o)return 1;const a=o.reduce(((e,t)=>e+t),0);return t.set(e.key,a),a}),e),{rootNodes:e,fileCountsMap:t,byKey:n,expandAllKeys:r}}const Sr=e=>({type:"changelist",key:rr("changelist",e.id),changeList:e,children:e.changes.map((e=>ar(e)))}),Ir=(0,i.cn)({key:"changesView/showIgnoredFiles",default:!1}),Br=(0,i.cn)({key:"changesView/showRelatedFiles",default:!1}),Tr=(0,i.xu)({key:"changesView/isGroupingActive",default:!0}),Rr=(0,i.cn)({key:"changesView.selectedKeys",default:new Set([])}),Pr=(0,i.nZ)({key:"changesView.resolvedSelectedKeys",get:e=>{let{get:t}=e;const n=t(Rr);if("all"===n){const{rootNodes:e}=t(Gr);return new Set((0,fr.eA)((e=>"children"in e?e.children:[]),((e,t)=>{const n=t??[];return n.push(e),n}),e).flat().map((e=>e.key)))}return n}}),Dr=(0,i.nZ)({key:"changesView.selectedNodes",get:e=>{let{get:t}=e;const n=t(Pr),{byKey:r}=t(Gr);return new Set([...n].map((e=>r.get(e))).filter(We.N))}}),xr=(0,i.nZ)({key:"changesView.selectedKeys.changes",get:e=>{let{get:t}=e;const n=t(Dr),r=new Set,o=e=>{e&&("change"===e.type&&r.add(e.change),ir(e)&&e.children.forEach(o))};return n.forEach(o),r}}),Nr=(0,i.nZ)({key:"changesView.selectedChangeLists",get:e=>{let{get:t}=e;const n=t(Dr),r=t(Jn),o=new Set,a=e=>{if(e){if("changelist"===e.type&&o.add(e.changeList),"change"===e.type){const t=r.find((t=>t.changes.includes(e.change)));t&&o.add(t)}ir(e)&&e.children.forEach(a)}};return n.forEach(a),o}}),Fr=(0,i.cn)({key:"changesView.includedChangeKeys",default:new Set([])}),_r=(0,i.nZ)({key:"changesView.includedChanges",get:e=>{let{get:t}=e;const n=t(Fr);return t(Zn).filter((e=>n.has(or(e))))}}),Lr=(0,i.nZ)({key:"changesView.selectedChanges.nestedSelectionState",get:e=>{let{get:t,getCallback:n}=e;const{rootNodes:r}=t(Gr),o=t(Fr),a=n((e=>{let{set:t}=e;return e=>t(Fr,e)}));return new Ar.f({items:o,...(0,Er.y)(a)},{rootNodes:r,getChildren:e=>ir(e)?e.children:null,getKey:e=>e.key})}}),Mr=(0,i.cn)({key:"changesView.expandedKeys",default:(0,i.nZ)({key:"changesView.expandedKeys/temporaryDefault",get:e=>{let{get:t}=e;return new Set(t(Gr).rootNodes.map((e=>[e.key,...e.children.map((e=>e.key))])).flat())}})}),Vr=(0,i.nZ)({key:"changes.groupings",get:e=>{let{get:t,getCallback:n}=e;return t(pr).map((e=>({...e,isActive:t(Tr(e.id))})))}}),Or=(e,t)=>({...e,children:t(e.children)}),Gr=(0,i.nZ)({key:"changesView.treeNodes",get:e=>{let{get:t}=e;const n=(0,Yt.Z)((e=>{let{active:t}=e;return!t}),t(Jn)).map(Sr),r=gr({get:t,groupings:dr,isActive:Tr}),o=t(Wn),a=n.map((e=>Or(e,r(e.key))));if(o.length>0){const e={key:"unversioned",type:"unversioned",children:o.map((e=>ar(e)))};a.push(Or(e,r("unversioned")))}return kr(a)}}),Hr=(0,i.xu)({key:"changesView/splitter/commitMessageSize",default:e=>"horizontal"===e?.4:.3}),Kr=(0,i.cn)({key:"changesView/amendCommit",default:!1}),$r=(0,i.cn)({key:"changesView/commitMessage",default:""}),Qr=(0,i.cn)({key:"changesView/commitErrorMessage",default:""}),Ur=(0,i.cn)({key:"changesView/commitTaskId",default:null}),jr=(0,i.nZ)({key:"changesView/changesFromActivePaths",get:e=>{let{get:t}=e;const n=t(Pe);return t(Zn).filter((e=>n.some((t=>Qn.path(e).startsWith(t)))))}}),qr=e=>{let{set:t,snapshot:n}=e;return e=>{const r=(e?n.getLoadable(Zn).getValue().filter((t=>e.some((e=>Qn.path(t).startsWith(e))))):n.getLoadable(jr).getValue()).map(or);if(t(Fr,new Set(r)),r.length>0){const e=(0,fr.Bp)((e=>ir(e)?e.children:null),(e=>e.key),n.getLoadable(Gr).getValue().rootNodes,r);t(Mr,(t=>new Set([..."all"!==t?t:new Set,...e]))),t(Rr,new Set([r[0]]))}}},Zr=e=>{let{set:t,snapshot:n}=e;return function(e){void 0===e&&(e=!0);const r=n.getLoadable(Pe).getValue(),o=n.getLoadable(xr).getValue(),a=e&&r.length>0?n.getLoadable(jr).getValue():null;t(Cr.initiallyIncludedChanges,a??[...o]),t(Cr.isOpen,!0)}};var Jr=n(33659),zr=n(97747);const Wr=()=>0===[...(0,i.sJ)(Rr)].length?null:a.createElement(en.C,{"aria-label":"Changes actions",actions:[(0,w.BH)(cr.CHECKIN_FILES),(0,w.BH)(cr.ROLLBACK),(0,w.BH)(cr.JUMP_TO_SOURCE),new tn.P,(0,w.BH)(cr.SHELVE),new tn.P,(0,w.BH)(cr.NEW_CHANGELIST),(0,w.BH)(cr.RENAME_CHANGELIST),(0,w.BH)(cr.REMOVE_CHANGELIST),(0,w.BH)(cr.SET_DEFAULT_CHANGELIST),(0,w.BH)(cr.MOVE_TO_ANOTHER_CHANGELIST),new tn.P,(0,w.BH)(vt.$.REFRESH)].filter(We.N)});async function Yr(e,t){const n=await Promise.all(t.map((t=>e(t).catch((()=>!1)))));return t.filter(((e,t)=>n[t]))}async function Xr(e){let{fs:t,dir:n,localBranchName:r}=e;const o=await l.ZP.getConfig({fs:t,dir:n,path:`branch.${r}.merge`}),a=await l.ZP.getConfig({fs:t,dir:n,path:`branch.${r}.remote`});return o&&a?`${a}/${o.replace(/^refs\/heads\//,"")}`:null}Wr.__docgenInfo={description:"",methods:[],displayName:"ChangesViewTreeContextMenu"};const eo=(0,i.CG)({key:"vcs/repoLocalBranches",get:e=>async t=>{let{}=t;const n=await l.ZP.listBranches({fs:se,dir:e});return Promise.all(n.map((async t=>({name:t,trackingBranch:await Xr({fs:se,dir:e,localBranchName:t})}))))}}),to=(0,i.CG)({key:"vcs/repoRemoteBranches",get:e=>async()=>{const t=await l.ZP.listRemotes({fs:se,dir:e});return(await Promise.all(t.map((t=>{let{remote:n}=t;return l.ZP.listBranches({fs:se,dir:e,remote:n}).then((e=>e.filter((e=>"HEAD"!==e)).map((e=>({name:e,remote:n})))))})))).flat()}}),no=(0,i.CG)({key:"vcs/repoBranches",get:e=>async t=>{let{get:n}=t;const r=n(ro(e));let o=n(eo(e));return 0===o.length&&r&&(o=o.concat({name:r,trackingBranch:null})),{repoRoot:e,currentBranch:o.find((e=>e.name===r))||null,localBranches:o,remoteBranches:n(to(e))}}}),ro=(0,i.CG)({key:"vcs/repoCurrentBranch",get:e=>()=>l.ZP.currentBranch({fs:se,dir:e,fullname:!1})}),oo=(0,i.nZ)({key:"vcs/allBranches",get:e=>{let{get:t}=e;return t(rt).map((e=>{let{dir:n}=e;return t(no(n))}))}}),ao=(0,i.CG)({key:"gitBranchForFile",get:e=>t=>{var n;let{get:r}=t;const o=r(at(e));return console.log(`repo root for ${e}`,o,o&&r(no(o))),o&&(null==(n=r(no(o)).currentBranch)?void 0:n.name)||null}}),io=[{branchType:"LOCAL",branchName:"master"},{branchType:"REMOTE",branchName:"origin/master"}],lo=e=>Array.isArray(e)?e:e?[e]:[];function so(e){return lo(null==e?void 0:e.map).flatMap((e=>lo(null==e?void 0:e.entry.value.list).map((t=>{let{"branch-info":{"@source":n,"@repo":r}}=t;return{branchType:null==e?void 0:e.entry["@type"],branchName:n,repoRoot:r}}))))||[]}function co(e){const t=(0,$n.Z)((e=>{let{branchType:t}=e;return t}),e);return{map:Object.entries(t).map((e=>{let[t,n]=e;return{entry:{"@type":t,value:{list:n.map((e=>({"branch-info":{"@repo":e.repoRoot,"@source":e.branchName}})))}}}}))}}const mo=(0,tt.IX)((0,tt.Ry)({branchType:(0,tt.G0)((0,tt.i0)("LOCAL"),(0,tt.i0)("REMOTE")),branchName:(0,tt.Z_)(),repoRoot:(0,tt.Z_)()})),uo=(0,i.cn)({key:"vcs/branches/favorite",default:[],effects:[et({refine:mo,componentName:"Git.Settings",read:e=>{var t;return so(null==e||null==(t=e["favorite-branches"])?void 0:t["branch-storage"])},update:e=>t=>({...t||{},"favorite-branches":{"branch-storage":co(e)}})})]}),po=(0,i.CG)({key:"vcs/branches/isFavorite",get:e=>t=>{let{get:n}=t;return fo(n(uo),n(ho),e)}}),ho=(0,i.cn)({key:"vcs/branches/favorite-excluded",default:[],effects:[et({refine:mo,componentName:"Git.Settings",read:e=>{var t;return so(null==e||null==(t=e["exclude-from-favorite"])?void 0:t["branch-storage"])},update:e=>t=>({...t||{},"exclude-from-favorite":{"branch-storage":co(e)}})})]});function go(e){return io.some((t=>{let{branchType:n,branchName:r}=t;return r===e.branchName&&n===e.branchType}))}const fo=(e,t,n)=>!!e.find((0,Ee.Z)(n))||!t.find((0,Ee.Z)(n))&&go(n);function Ao(){return(0,i._8)((e=>{let{set:t,snapshot:n}=e;return function(e,r){void 0===r&&(r=!fo(n.getLoadable(uo).getValue(),n.getLoadable(ho).getValue(),e));const o=t=>t.filter((t=>!(0,Ee.Z)(t,e))),a=t=>t.some((0,Ee.Z)(e))?t:t.concat(e);r?(t(ho,o),go(e)||t(uo,a)):(t(uo,o),go(e)&&t(ho,a))}}),[])}function Eo(){const e=(0,i.sJ)(uo),t=(0,i.sJ)(ho);return{isFavorite:n=>fo(e,t,n),toggleFavorite:Ao()}}const yo=e=>{let{repo:t}=e;const n=(0,i.sJ)(ao(t.dir));return a.createElement(a.Fragment,null,n)};yo.__docgenInfo={description:"",methods:[],displayName:"RepoCurrentBranchName",props:{repo:{required:!0,tsType:{name:"VcsDirectoryMapping"},description:""}}};const vo=E.zo.span`
  width: 14px;
  height: 14px;
  align-self: center;
  margin-right: 0.2rem;
  position: relative;

  //  after pseudo element is used to create the color mixing implemented here:
  //  https://github.com/JetBrains/intellij-community/blob/82f201386c3f7a339ff25fc8f3389024c8078a87/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/VcsLogColorManagerImpl.java#L60
  &&:after {
    content: "";
    position: absolute;
    inset: 0;
    opacity: 0.75;
    background: ${e=>{let{theme:t}=e;return t.color("Table.background")||(t.dark?"#3C3F41":"#fff")}};
  }
`,bo=e=>{const t=(0,i.sJ)(rt).findIndex((t=>t.dir===e)),n=(0,d.Fg)(),r=[n.commonColors.red,n.commonColors.blue];return r[t%r.length]??r[0]},wo=a.forwardRef(((e,t)=>{let{rootPath:n,...r}=e;return a.createElement(vo,(0,p.Z)({ref:t},r,{style:{...r.style,backgroundColor:bo(n)}}))}));wo.__docgenInfo={description:"",methods:[],displayName:"RepoColorIcon",props:{rootPath:{required:!0,tsType:{name:"string"},description:""}}};const Co=E.zo.span`
  display: inline-flex;
  align-self: center;
  height: 1.1rem;
  line-height: 1.1rem;
  padding: 0 0.25rem;

  background: ${e=>{let{theme:t}=e;return t.currentBackgroundAware(`color-mix(in srgb, ${t.color("VersionControl.Log.Commit.currentBranchBackground",t.dark?"rgb(63, 71, 73)":"rgb(228, 250, 255)")}, ${t.color("VersionControl.RefLabel.backgroundBase",t.dark?"#fff":"#000")} ${100*(t.value("VersionControl.RefLabel.backgroundBrightness")??.08)}%)`)}};
  color: ${e=>{let{theme:t}=e;return t.currentForegroundAware(t.color("VersionControl.RefLabel.foreground",t.dark?"#909090":"#7a7a7a"))}};
`,ko=new Tn.C("{fileCount, plural,\n    =0 {No files}\n    =1 {1 file}\n    other {# files}\n  }","en-US");function So(e){return ko.format({fileCount:e})}const Io=e=>{let{node:t}=e;return a.createElement(Jt.e.Hint,null,t.showPath&&o().dirname(Qn.path(t.change)))},Bo={repo:(e,t)=>{let{fileCount:n}=t;return{textValue:o().basename(e.repository.dir),rendered:a.createElement(Jt.e,null,a.createElement(wo,{rootPath:e.repository.dir}),a.createElement(zt.J,null),a.createElement(Jt.e.Hint,null,So(n)),a.createElement(Co,null,a.createElement(yo,{repo:e.repository})))}},directory:(e,t)=>{let{fileCount:n}=t;return{textValue:e.parentNodePath?o().relative(e.parentNodePath,e.dirPath):e.dirPath,rendered:a.createElement(Jt.e,null,a.createElement(R.vq,{icon:V}),a.createElement(zt.J,null),a.createElement(Jt.e.Hint,null,So(n)))}},change:e=>({textValue:o().basename(Qn.path(e.change)),rendered:a.createElement(Jt.e,null,a.createElement(R.vq,{icon:G(Qn.path(e.change))}),a.createElement(gt,{status:Qn.fileStatus(e.change)},a.createElement(zt.J,null)),Qn.isRename(e.change)?` - renamed from ${o().basename(e.change.before.path)}`:Qn.isMove(e.change)&&` - moved from ${o().relative(o().dirname(e.change.after.path),o().dirname(e.change.before.path)).replace(/(\.\.\/){2,}[!.]/g,"..")}/`,a.createElement(Io,{node:e}))})},To=(e,t)=>{const n={...Bo,...t,...e},r=e=>{var t;let{node:r,fileCountsMap:o}=e;const a=n[r.type],{textValue:i,rendered:l}=a(r,{fileCount:o.get(r.key)||0,dirCount:0});return{key:r.key,childItems:ir(r)?r.children:[],hasChildItems:ir(r)&&(null==(t=r.children)?void 0:t.length)>0,textValue:i,children:l}};return{getItemProps:r,getTextValue:(e,t)=>{let{fileCountsMap:r}=t;return(0,n[e.type])(e,{fileCount:r.get(e.key)||0,dirCount:0}).textValue},itemRenderer:e=>{let{fileCountsMap:t}=e;return e=>a.createElement(B.c,r({node:e,fileCountsMap:t}))}}};function Ro(){const e=(0,i.sJ)(st);return a.createElement(a.Fragment,null,e&&a.createElement(Kn,null,", updating..."))}const Po=To({changelist:(e,t)=>{let{fileCount:n}=t;return{textValue:e.changeList.name,rendered:a.createElement(Jt.e,null,a.createElement("span",{style:{fontWeight:e.changeList.active?"bold":void 0}},a.createElement(zt.J,null)),a.createElement(Jt.e.Hint,null,So(n),a.createElement(Ro,null)))}},unversioned:(e,t)=>{let{fileCount:n}=t;return{textValue:"Unversioned Files",rendered:a.createElement(Jt.e,null,a.createElement(zt.J,null),a.createElement(Jt.e.Hint,null,So(n),a.createElement(Ro,null)))}}});function Do(e){return"directory"===(null==e?void 0:e.type)?[e.dirPath]:"change"===(null==e?void 0:e.type)?[Qn.path(e.change)]:ir(e)?e.children.flatMap(Do):[]}const xo=e=>{let{treeRef:t}=e;const{rootNodes:n,fileCountsMap:r,byKey:o}=(0,i.sJ)(Gr),[l,s]=(0,i.FV)(Rr),[c,m]=(0,i.FV)(Mr),u=(0,i.sJ)(Lr),{openPath:d}=Je(),h=(0,i._8)((e=>{let{snapshot:t}=e;return e=>{const n=t.getLoadable(Gr).getValue().byKey.get(e);return"change"===(null==n?void 0:n.type)&&d(Qn.path(n.change)),n}}),[]),g=xe("all"===l?[]:[...l].flatMap((e=>{const t=o.get(e);return t?Do(t):[]})));return a.createElement(S.X,{renderMenu:()=>a.createElement(Wr,null),style:{height:"100%"}},a.createElement(Jr.G,(0,p.Z)({"aria-label":"Commit changes tree",treeRef:t,items:n,selectionMode:"multiple",selectedKeys:l,expandedKeys:c,onExpandedChange:m,onSelectionChange:s,onAction:h,nestedSelection:u,fillAvailableSpace:!0,autoFocus:"first"},g),(e=>{var t;const n=Po.getItemProps({fileCountsMap:r,node:e});return a.createElement(B.c,n,0!==(null==(t=e.children)?void 0:t.length)&&a.createElement(zr.x,{selectionState:u.getSelectionState(e),onToggle:()=>u.toggle(e)}),n.children)})))};xo.__docgenInfo={description:"TODO: unversioned files\nTODO: show diff/source on double click (on action to be more precise)",methods:[],displayName:"ChangeViewTree",props:{treeRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"TreeRefValue"}],raw:"RefObject<TreeRefValue>"},description:""}}};var No=n(99559),Fo=n(71818),_o=n(10888);const Lo=()=>{const e=[(0,w.BH)(cr.NEW_CHANGELIST),(0,w.BH)(cr.RENAME_CHANGELIST),(0,w.BH)(cr.REMOVE_CHANGELIST),(0,w.BH)(cr.SET_DEFAULT_CHANGELIST),(0,w.BH)(cr.MOVE_TO_ANOTHER_CHANGELIST)].filter(We.N);return a.createElement(Fo.p,{renderMenu:t=>{let{menuProps:n}=t;return a.createElement(en.C,{actions:e},(e=>a.createElement(_o.w,(0,p.Z)({},n,e))))}},a.createElement(R.vq,{icon:"vcs/changelist.svg"}))};Lo.__docgenInfo={description:"",methods:[],displayName:"ChangeListsActionButton"};var Mo=n(14421),Vo=n(566);function Oo(e){let{groupings:t,onToggle:n}=e;return 1===t.length&&t[0].icon?a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:`Group By ${t[0].title}`})},a.createElement(Mo.hU,{isPressed:t[0].isActive,onPress:()=>n(t[0].id)},t[0].icon)):a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Group By"})},a.createElement(Fo.p,{renderMenu:e=>{let{menuProps:r}=e;return a.createElement(I.v2,(0,p.Z)({},r,{selectedKeys:t.filter((e=>{let{isActive:t}=e;return t})).map((e=>{let{id:t}=e;return t})),onAction:e=>{var r;const o=null==(r=t.find((t=>{let{id:n}=t;return n===e})))?void 0:r.id;o&&n(o)}}),a.createElement(Vo.$0,{title:"Group By"},t.map((e=>{let{id:t,title:n}=e;return a.createElement(B.c,{key:t},n)}))))}},a.createElement(R.vq,{icon:"actions/groupBy.svg"})))}Oo.__docgenInfo={description:"",methods:[],displayName:"GroupByActionButton",props:{groupings:{required:!0,tsType:{name:"Array",elements:[{name:"Grouping",elements:[{name:"K"}],raw:"Grouping<K>"}],raw:"Array<Grouping<K>>"},description:""},onToggle:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: K) => void",signature:{arguments:[{name:"id",type:{name:"K"}}],return:{name:"void"}}},description:""}}};const Go=()=>{const e=(0,i.sJ)(Vr),t=(0,i._8)((e=>{let{set:t}=e;return e=>{t(Tr(e),(e=>!e))}}),[]);return a.createElement(Oo,{groupings:e,onToggle:t})};Go.__docgenInfo={description:"",methods:[],displayName:"ChangesGroupByActionButton"};const Ho=()=>{const[e,t]=(0,i.FV)(Br),[n,r]=(0,i.FV)(Ir),o={showRelatedFiles:e,showIgnoredFiles:n};return a.createElement(Fo.p,{renderMenu:e=>{let{menuProps:n}=e;return a.createElement(I.v2,(0,p.Z)({},n,{selectedKeys:Object.keys(o).filter((e=>o[e])),onAction:e=>{switch(e){case"showIgnoredFiles":return r((e=>!e));case"showRelatedFiles":return t((e=>!e))}}}),a.createElement(B.c,{key:"showIgnoredFiles"},"Show Ignored Files"),a.createElement(B.c,{key:"showRelatedFiles"},"Show Files Related to Active Changelist"))}},a.createElement(R.vq,{icon:"actions/show.svg"}))};function Ko(){return a.createElement(No.o,{border:"bottom"},a.createElement(Mt.K,{actionId:vt.$.REFRESH}),a.createElement(Mt.K,{actionId:cr.ROLLBACK}),a.createElement(Mt.K,{actionId:cr.SHOW_DIFF}),a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Changelists"})},a.createElement(Lo,null)),a.createElement(Mt.K,{actionId:cr.SHELVE_SILENTLY}),a.createElement(No.J,null),a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Group By"})},a.createElement(Go,null)),a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"View Options"})},a.createElement(Ho,null)),a.createElement(Mt.K,{actionId:vt.$.EXPAND_ALL}),a.createElement(Mt.K,{actionId:vt.$.COLLAPSE_ALL}))}Ho.__docgenInfo={description:"",methods:[],displayName:"ViewOptionsActionButton"},Ko.__docgenInfo={description:"",methods:[],displayName:"ChangesViewToolbar"};var $o=n(64162);const Qo=(0,i.cn)({key:"tasks.list",default:[]}),Uo=(0,i.nZ)({key:"tasks.first",get:e=>{let{get:t}=e;return t(Qo)[0]}}),jo=(0,i.nZ)({key:"tasks.count",get:e=>{let{get:t}=e;return t(Qo).length}});let qo=0;const Zo=()=>{const e=(0,i.Zl)(Qo);return(0,$o.$)(((t,n)=>{let{title:r,isCancelable:o=!1}=t;const a=new re.qf.cancelToken,i=++qo;e((e=>[...e,{id:qo++,title:r,abortController:a,isCancelable:o,progress:{fraction:0,text:"",secondaryText:"",isIndeterminate:!1}}]));const l=t=>{e((e=>e.map((e=>e.id===i?{...e,progress:{...e.progress,...t}}:e))))},s="function"==typeof n?{run:n}:n;return Promise.resolve(s.run({setFraction(e){l({fraction:e})},setText(e){l({text:e})},setSecondaryText(e){l({secondaryText:e})},setIndeterminate(e){l({isIndeterminate:e})}},a.signal)).finally((()=>{e((e=>e.filter((e=>e.id!==i)))),null==s.onFinished||s.onFinished()})),i}))},Jo=()=>(0,i._8)((e=>{let{snapshot:t}=e;return e=>{const n=t.getLoadable(Qo).getValue().find((t=>t.id===e));n&&n.abortController.abort()}})),zo=(0,i.CG)({key:"vcs/resolved-branche-ref",get:e=>{let{repoRoot:t,ref:n}=e;return()=>l.ZP.resolveRef({fs:se,dir:t,ref:n,depth:3})}});var Wo=n(13302);const Yo=e=>`${e.getMonth()+1}/${e.getDate()}/${e.getFullYear().toString().slice(-2)}`,Xo=e=>e.from&&e.to?`Between ${Yo(e.from)} and ${Yo(e.to)}`:e.from?`since ${Yo(e.from)}`:e.to?`until ${Yo(e.to)}`:"",ea=(0,i.cn)({key:"vcs/log/tabs/keys",default:["MAIN"]}),ta=(0,i.cn)({key:"vcs/log/tabs/activeKey",default:"MAIN"}),na=(0,i.CG)({key:"vcs/logs/tab/title",get:e=>t=>{let{get:n}=t;const r=n(sa.searchQuery(e)),o=n(sa.user(e)),a=n(sa.date(e)),i=n(sa.branch(e)),l=[];return(null==i?void 0:i.length)>0&&l.push({short:i.join(", "),long:`on ${i.join(", ")}`}),a&&l.push({short:Xo(a),long:`made ${Xo(a)}`}),r&&l.push({short:`'${r}'`,long:`containing '${r}'`}),o&&l.push({short:o,long:`by ${o}`}),`Log${l.length>0?": ":""}${1===l.length?l[0].short:l.map((e=>e.long)).join(" ")}`}}),ra=[],oa=e=>(ra.push(e),e),aa=oa((0,i.xu)({key:"vcs/logs/filter/showBranches",default:!1})),ia=oa((0,i.xu)({key:"vcs/logs/showCommitDetails",default:!0})),la=(0,i.nZ)({key:"vcs/logs/showCommitDetails/currentTab",get:e=>{let{get:t}=e;return t(ia(t(ta)))}}),sa={searchQuery:oa((0,i.xu)({key:"vcs/logs/filter/searchQuery",default:""})),matchCase:oa((0,i.xu)({key:"vcs/logs/filter/matchCase",default:!1})),regExp:oa((0,i.xu)({key:"vcs/logs/filter/regExp",default:!1})),user:oa((0,i.xu)({key:"vcs/logs/filter/user",default:null})),date:(0,i.xu)({key:"vcs/logs/filter/date",default:null}),branch:oa((0,i.xu)({key:"vcs/logs/filter/branch",default:[]}))},ca=(0,Wo.Z)(((e,t)=>(0,i.nZ)({key:`vcs/logs/currentTabFilter/${t}`,get:t=>{let{get:n}=t;return n(e(n(ta)))},set:(t,n)=>{let{set:r,get:o}=t;r(e(o(ta)),n)}})),sa),ma=e=>{let{set:t,snapshot:n,reset:r}=e;return e=>{const o=n.getLoadable(ea).getValue();n.getLoadable(ta).getValue()===e&&t(ta,o[o.findIndex((t=>t===e))-1]||o[0]),t(ea,(t=>t.filter((t=>t!==e)))),ra.forEach((t=>r(t(e))))}};var ua=n(89921);const da={},pa=(e,t)=>t.commit.committer.timestamp-e.commit.committer.timestamp;var ha=n(53783);function ga(e,t,n){return void 0===n&&(n={}),n.regExp?new RegExp(t,n.matchCase?"":"i").test(e):n.matchCase?e.includes(t):e.toLowerCase().includes(t.toLowerCase())}const fa=(0,i.nZ)({key:"vcs/allRepoCommits",get:e=>{let{get:t}=e;return async function(e){const t=[],n={};let r=[];r.forEach((e=>{n[e.readCommitResult.oid]=e}));for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];const s=await Promise.all(a.flatMap((e=>{let{refs:t,repoPath:n,isBare:r}=e;return t.map((async e=>{const t=await l.ZP.resolveRef({...m({repoPath:n,isBare:r}),ref:e,depth:3}).then((e=>l.ZP.readCommit({...m({repoPath:n,isBare:r}),oid:e})));return{repoPath:n,isBare:r,commit:t,refs:new Set([e])}}))})));for((0,ua.Z)(((e,t)=>{let{commit:n}=e,{commit:r}=t;return pa(n,r)}),s).forEach((e=>{let{commit:t,refs:n,repoPath:r,isBare:o}=e;return c({repoPath:r,isBare:o},t,-1,n)}));r.length>0;){const{readCommitResult:e,repoPath:n,isBare:o,containingRefs:a}=r.shift();t.push({repoPath:n,readCommitResult:e,containingRefs:a}),(await Promise.all(e.commit.parent.map((e=>l.ZP.readCommit({...m({repoPath:n,isBare:o}),oid:e}))))).forEach((e=>{const t=r.findIndex((t=>{let{readCommitResult:n}=t;return pa(n,e)>0}));c({repoPath:n,isBare:o},e,t,a)}))}return t;function c(e,t,o,a){let{repoPath:i,isBare:l}=e;if(n[t.oid])n[t.oid].containingRefs=new Set([...n[t.oid].containingRefs,...a]);else{const e={readCommitResult:t,containingRefs:n[t.oid]?new Set([...n[t.oid].containingRefs,...a]):a,repoPath:i,isBare:l};n[t.oid]=e,r.splice(o>=0?o:r.length,0,e)}}function m(t){let{repoPath:n,isBare:r}=t;return{fs:e,cache:da,[r?"gitdir":"dir"]:n}}}(se,...t(oo).map((e=>{let{repoRoot:t,localBranches:n,remoteBranches:r}=e;return{repoPath:t,refs:["HEAD"].concat(n.map((e=>e.name))).concat(r.map((e=>`${e.remote}/${e.name}`)))}})))}}),Aa=(0,i.nZ)({key:"vcs/log/rows",get:e=>{let{get:t}=e;const n=t(ca.searchQuery),r=t(ca.branch),o={matchCase:t(ca.matchCase),regExp:t(ca.regExp)},a=t(ca.date),i=t(fa).filter((e=>{let{containingRefs:t}=e;return!(null!=r&&r.length)||r.some((e=>t.has(e)))})).filter((e=>{let{readCommitResult:{commit:t}}=e;return!(null!=a&&a.from&&!(1e3*t.author.timestamp>a.from.getTime())||null!=a&&a.to&&!(1e3*t.author.timestamp<a.to.getTime()))})).filter((e=>{let{readCommitResult:{commit:t}}=e;return!n||ga(t.message,n,o)||ga(t.tree,n,{matchCase:!1})}));return{rows:i,byOid:(0,ha.Z)((e=>{let{readCommitResult:t}=e;return t.oid}),i)}}}),Ea=(0,i.nZ)({key:"vcs/logs/all-refs",get:e=>{let{get:t}=e;const n=t(oo),r={},o=(e,t)=>{r[e]=r[e]||[],r[e].push(t)};return n.forEach((e=>{let{repoRoot:n}=e;o(t(zo({repoRoot:n,ref:"HEAD"})),{type:"head",name:"HEAD"})})),n.forEach((e=>{let{repoRoot:n,localBranches:r,currentBranch:a}=e;r.forEach((e=>{o(t(zo({repoRoot:n,ref:e.name})),{type:"localBranch",name:e.name,isCurrent:(null==a?void 0:a.name)===e.name,trackingBranch:e.trackingBranch})}))})),n.forEach((e=>{let{repoRoot:n,remoteBranches:r}=e;return r.forEach((e=>{const r=`${e.remote}/${e.name}`;o(t(zo({repoRoot:n,ref:r})),{type:"remoteBranch",name:r})}))})),r}}),ya=(0,i.cn)({key:"vcs/log/commits/selection",default:new Set([])}),va=(0,i.nZ)({key:`${ya.key}/keys`,get:e=>{let{get:t}=e;const n=t(ya);return"all"===n?t(Aa).rows.map((e=>{let{readCommitResult:{oid:t}}=e;return t})):[...n].map((e=>`${e}`))}}),ba=(0,i.nZ)({key:`${ya.key}/items`,get:e=>{let{get:t}=e;return t(va).map((e=>t(Aa).byOid[e]))}}),wa=(0,i.nZ)({key:"vcs/log/details/selectedCommit",get:e=>{let{get:t}=e;const n=t(va)[0];return n&&t(Aa).byOid[n]||null}}),Ca=(0,i.cn)({key:"vcs/log/commits/showCommitTimestamp",default:!1}),ka=(0,i.cn)({key:"vcs/log/commits/referencesOnTheLeft",default:!1}),Sa=(0,i.cn)({key:"vcs/log/commits/highlightMyCommits",default:!1}),Ia={id:"Default.Author",name:"Author"},Ba={id:"Default.Hash",name:"Hash"},Ta={id:"Date.Date",name:"Date"},Ra=[Ia.id,Ta.id],Pa=(0,i.xu)({key:"vcs/log/commits/highlightMyCommits",default:e=>Ra.includes(e)}),Da=new Tn.C("{count, plural,\n    =1 {1 file committed}\n    other {# files committed}\n  }","en-US");function xa(){const e=dt(),t=(0,v.L)(),n=Zo();return(0,i._8)((r=>{let{snapshot:i,set:s,refresh:c}=r;return(r,m)=>{const u=n({title:"Committing...",isCancelable:!1},{run:async n=>{let{setIndeterminate:s}=n;s(!0);const u=(0,$n.Z)((e=>{let{repoRoot:t}=e;return t}),(await Promise.all(r.map((async e=>{const t=Qn.path(e),n=i.getLoadable(at(t)).getValue(),r=await se.promises.exists(t)?await se.promises.readFile(t):null;return n?{repoRoot:n,filePath:o().relative(n,t),content:r}:null})))).filter(We.N));await Promise.all(Object.entries(u).map((async e=>{let[t,n]=e;const r=n.reduce(((e,t)=>{let{filePath:n,content:r}=t;return{...e,[n]:"string"==typeof r?(new TextEncoder).encode(r):r}}),{});await async function(e){let{updates:t,fs:n,dir:r,gitdir:o,...a}=e;const i=await l.ZP.resolveRef({fs:n,dir:r,gitdir:o,ref:"HEAD"}),s=(await l.ZP.readTree({fs:n,dir:r,gitdir:o,oid:i})).tree;let c=!1;if(await Promise.all(Object.entries(t).map((async e=>{let[t,a]=e;const i=s.findIndex((e=>{let{path:n}=e;return n===t}));if(null==a)return void(i>-1&&(c=!0,s.splice(i,1)));const m=s[i],u=await l.ZP.writeBlob({fs:n,dir:r,gitdir:o,blob:a});m?m.oid=u:s.push({type:"blob",mode:"100644",oid:u,path:t}),c=!0}))),!c)throw new Error("Nothing to commit!");const m=await l.ZP.writeTree({fs:n,dir:r,gitdir:o,tree:s}),u=await l.ZP.commit({...a,fs:n,dir:r,gitdir:o,tree:m});await Promise.all(Object.keys(t).map((e=>l.ZP.resetIndex({fs:n,dir:r,gitdir:o,filepath:e,ref:u}))))}({fs:se,dir:t,updates:r,message:m,author:{name:"Alireza",email:"alireza.mirian@gmail.com"}});const o=await i.getPromise(ro(t));o&&c(zo({repoRoot:t,ref:o})),c(zo({repoRoot:t,ref:"HEAD"}))}))).then((()=>{c(fa),e().catch(console.error),t.show({icon:"Info",body:a.createElement(a.Fragment,null,`${Da.format({count:r.length})}: `,m.split("\n").flatMap(((e,t)=>[a.createElement("br",{key:t}),e])).slice(1))})}),(e=>{t.show({icon:"Error",title:"Commit failed!",body:"Could not commit files."}),console.error("Commit error",e)}))},onFinished:()=>{s(Ur,null)}});s(Ur,u)}}),[])}const Na=E.zo.div`
  background: ${e=>{let{theme:t}=e;return t.dark?"#2b2b2b":"#fff"}};
  height: 100%;
  display: flex;
  flex-direction: column;
`,Fa=E.zo.textarea`
  flex: 1;
  background: none;
  padding: 0.25rem 0.375rem;
  color: ${e=>{let{theme:t}=e;return t.dark?"#a9b7c6":"#000"}};
  font-family: inherit;
  border: none;
  resize: none;
  outline: none;
`,_a=E.zo.div`
  display: flex;
  gap: 0.3rem;
  padding: 0.4rem;
`,La=E.zo.div`
  display: flex;
  align-items: center;
  padding: 0.125rem 0.5rem;
  gap: 0.25rem;
  position: sticky; // prevents commit message scroll jump when message is toggled on and off
  color: ${e=>{let{theme:t}=e;return t.commonColors.red}};
`;function Ma(e){let{editorRef:t}=e;const n=(0,a.useRef)(null),[r,o]=(0,i.FV)($r),l=xa(),s=(0,i.sJ)(Kr),c=(0,v.L)(),[m,u]=(0,i.FV)(Qr),d=(0,i.sJ)(Ur);(0,a.useEffect)((()=>{r&&u("")}),[r]);const p=(0,i._8)((e=>{let{snapshot:t}=e;const n=t.getLoadable(_r).getValue(),r=t.getLoadable($r).getValue();return()=>{0!==n.length?r?t.getLoadable(Kr).getValue()?c.show({icon:"Error",title:"Unsupported action",body:"Amending commits is not yet supported."}):l(n,r):u("Specify commit message"):u("Select files to commit")}}),[]),{hasFocus:h}=(0,xt.e)();return(0,a.useImperativeHandle)(t,(()=>({focus:()=>{var e;null==(e=n.current)||e.focus()}})),[]),a.createElement(Na,null,a.createElement(Fa,{ref:n,value:r,onChange:e=>{o(e.target.value)},placeholder:"Commit Message","data-gramm":"false"}),m&&a.createElement(La,null,a.createElement(R.vq,{icon:"general/error.svg"})," ",m),a.createElement(_a,null,a.createElement(vn.z,{preventFocusOnPress:!0,variant:h?"default":void 0,onPress:p,isDisabled:null!=d,mnemonic:"i"},s?"Amend Commit":"Commit"),a.createElement(vn.z,{preventFocusOnPress:!0,onPress:yt,mnemonic:"P"},s?"Amend Commit and Push...":"Commit and Push...")))}Ma.__docgenInfo={description:"Commit message and commit buttons shown in the bottom/right split view of the commit toolwindow",methods:[],displayName:"CommitView",props:{editorRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<{ focus: () => void }>",elements:[{name:"signature",type:"object",raw:"{ focus: () => void }",signature:{properties:[{key:"focus",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!0}}]}}]},description:""}}};var Va=n(93193);const Oa=e=>{let{changes:t}=e;const n=t.filter((e=>"MODIFIED"===Qn.fileStatus(e))).length,r=t.filter(Qn.isAddition).length,o=t.filter(Qn.isDeletion).length;return a.createElement(a.Fragment,null,r>0&&a.createElement(gt,{status:"ADDED"},r," added"),n>0&&a.createElement(gt,{status:"MODIFIED"},n," modified"),o>0&&a.createElement(gt,{status:"DELETED"},o," deleted"))};Oa.__docgenInfo={description:"",methods:[],displayName:"ChangesSummary",props:{changes:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"AnyChange"}],raw:"ReadonlyArray<AnyChange>"},description:""}}};const Ga=E.zo.div`
  display: flex;
  padding: 0.125rem;
  position: relative;
`,Ha=(0,E.zo)(yn.X)`
  padding-right: 0.625rem;
`,Ka=E.zo.span`
  position: absolute;
  right: 0.5rem;
  top: 0.25rem;
  background: ${e=>{let{theme:t}=e;return t.color("Panel.background")}};
  z-index: 1;
`,$a=()=>{const e=(0,i.sJ)(_r);return a.createElement(Oa,{changes:e})};function Qa(){const[e,t]=(0,i.FV)(Kr);return a.createElement(Ga,null,a.createElement(x.a,{tooltip:a.createElement(Va.h,{actionName:"Amend Commit",helpText:"Modify the latest commit of the current branch"})},(n=>a.createElement("span",n,a.createElement(Ha,{isSelected:e,onChange:e=>{t(e),ei()},preventFocus:!0,mnemonic:"m"},"Amend")))),a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Show Commit Options"})},a.createElement(Mo.hU,{onPress:yt},a.createElement(R.vq,{icon:"general/gear.svg"}))),a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Commit Message History"})},a.createElement(Mo.hU,{isDisabled:!0,onPress:yt},a.createElement(R.vq,{icon:"vcs/historyInline.svg"}))),a.createElement(Ka,null,a.createElement($a,null)))}Qa.__docgenInfo={description:"Amend checkbox, commit message history button, and summary of included changes, shown as a row\nbellow changes tree, in commit tool window.",methods:[],displayName:"CommitActionsRow"};const Ua=new Tn.C("Delete {count, plural,\n    =1 {Changelist}\n    other {Changelists}\n  }","en-US"),ja=new Tn.C("{count, plural,\n    =1 {1 selected file}\n    other {# selected files}\n  }","en-US"),qa=(0,i.nZ)({key:"changesView.selectedKeys.deletablePaths",get:e=>{let{get:t}=e;return[...t(xr).values()].filter((e=>"DELETED"!==e.type)).map(Qn.path)}}),Za=(0,i.nZ)({key:`vcs.changesView.action.${vt.$.DELETE}`,get:e=>{let{get:t,getCallback:n}=e;return{id:vt.$.DELETE,title:"Delete",description:"Delete selected item",isDisabled:0===t(qa).length,actionPerformed:n((e=>async()=>{const{snapshot:t}=e,n=Sn(e),r=t.getLoadable(qa).getValue(),o=t.getLoadable(_e).getValue().current;if(0===r.length)return;await(null==o?void 0:o.confirm({title:"Delete",okText:"Delete",message:a.createElement("div",{style:{width:354}},`Are you sure you want to delete ${ja.format({count:r.length})}?`)}))&&(console.log(`deleting ${r}`),await n(r))}))}}});function Ja(){const e=(0,i.sJ)(Nr),t=(0,i._8)((e=>{let{set:t,snapshot:n}=e;return e=>{const r=n.getLoadable(Jn).getValue(),o=r.find((t=>{let{id:n}=t;return n===e}));o&&t(Jn,r.map((e=>({...e,active:e===o}))))}}),[]),n=[...e].filter((e=>!e.active)),r=dt(),o=[{id:vt.$.REFRESH,title:"Refresh",icon:a.createElement(R.vq,{icon:"actions/refresh.svg"}),actionPerformed:r},{id:cr.SHELVE_SILENTLY,title:"Shelve Silently",icon:a.createElement(R.vq,{icon:"vcs/shelveSilent.svg"}),actionPerformed:yt},(0,i.sJ)(Za)];return 1===e.size&&o.push({id:cr.RENAME_CHANGELIST,title:"Edit Changelist...",description:"Edit name and description of selected changelist",icon:a.createElement(R.vq,{icon:"actions/edit.svg"}),actionPerformed:yt}),n.length>0&&o.push({id:cr.REMOVE_CHANGELIST,title:Ua.format({count:n.length}),description:"Remove changelist and move all changes to another",icon:a.createElement(R.vq,{icon:"general/remove.svg"}),actionPerformed:yt}),1===n.length&&o.push({title:"Set Active Changelist",description:"Set changelist to which new changes are placed by default",id:cr.SET_DEFAULT_CHANGELIST,icon:a.createElement(R.vq,{icon:"actions/selectall.svg"}),actionPerformed:()=>{t(n[0].id)}}),o}const za=E.zo.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,Wa=E.zo.div`
  flex: 1;
  overflow: auto;
  position: relative;
`,Ya=E.zo.div`
  position: absolute;
  right: 0.125rem;
  top: 0.125rem;
  z-index: 1;
`;let Xa=null,ei=()=>{setTimeout((()=>{var e;null==(e=Xa)||e.focus()}))};const ti=()=>{const{state:{anchor:e}}=(0,On.j)(),t=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,Gn.Ss)(e),o=(0,i.sJ)(st),[l,s]=(0,i.FV)(Hr(r)),c=Ja(),m=(0,Lt.x)({treeRef:t});return Xa=n.current,a.createElement(Hn.D,{orientation:r,innerView:a.createElement(w.DG,{actions:[...m,...c]},(e=>{let{shortcutHandlerProps:n}=e;return a.createElement(za,n,a.createElement(Ko,null),a.createElement(Wa,null,o&&a.createElement(Kn,null,a.createElement(Ya,null,a.createElement(g,null))),a.createElement(xo,{treeRef:t})),a.createElement(Qa,null))})),innerViewMinSize:50,lastView:a.createElement(Ma,{editorRef:n}),lastSize:l,onLastResize:s})};ti.__docgenInfo={description:"",methods:[],displayName:"ChangesViewSplitter"};const ni=E.zo.div`
  min-height: 70%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 50px;
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  white-space: nowrap;
`;function ri(){const e=(0,w.DI)();return a.createElement(ni,null,a.createElement("div",{style:{textAlign:"center"}},"To commit changes,"," ",a.createElement(At.r,{onPress:()=>e(cr.GIT_INIT)},"Create Git repository..."),a.createElement("br",null),"For recent changes, see"," ",a.createElement(At.r,{onPress:yt},"Local History..."),a.createElement("br",null),a.createElement("br",null),a.createElement(R.vq,{style:{verticalAlign:"text-top"},icon:"general/contextHelp.svg"})," ",a.createElement(At.r,{onPress:yt},"Version Control integration")," "))}ri.__docgenInfo={description:"",methods:[],displayName:"ChangesViewZeroState"};const oi=d.ZP.div.withConfig({displayName:"ChangesViewPane__StyledContainer",componentId:"sc-1pqba05-0"})(["display:flex;flex-direction:column;height:100%;"]),ai=()=>{const e=(0,i.sJ)(rt);return a.createElement(oi,null,e.length>0?a.createElement(ti,null):a.createElement(ri,null))};function ii(e){let{branches:t}=e;return a.createElement("table",{style:{borderSpacing:0}},t.map((e=>{let{branch:n,repoRoot:r}=e;const i=n.trackingBranch?`${n.name} \u2192 ${n.trackingBranch}`:t.length>1?`${n.name} (no tracking branch)`:"No tracking branch";return t.length>1?a.createElement("tr",{key:r},a.createElement("td",null,o().basename(r),": \xa0"),a.createElement("td",null,i)):a.createElement("tr",{key:r},a.createElement("td",null,i))})))}ai.__docgenInfo={description:"",methods:[],displayName:"ChangesViewPane"},ii.__docgenInfo={description:"",methods:[],displayName:"TrackingBranchInfo",props:{branches:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ repoRoot: string; branch: LocalBranch }",signature:{properties:[{key:"repoRoot",value:{name:"string",required:!0}},{key:"branch",value:{name:"LocalBranch",required:!0}}]}}],raw:"Array<{ repoRoot: string; branch: LocalBranch }>"},description:""}}};const li="Commit",si=(0,i.nZ)({key:"vcs/commitToolWindow/changedRepos",get:e=>{let{get:t}=e;return t(Zn).map((e=>t(at(Qn.path(e))))).filter(We.N).map((e=>{const n=t(no(e)).currentBranch;return n?{repoRoot:e,branch:n}:null})).filter(We.N)}}),ci=()=>{var e,t;const n=(0,i.sJ)(Tr("repository")),r=(0,i.sJ)(si),o=!n&&r[0]?`Commit to ${(null==(e=r[0])||null==(t=e.branch)?void 0:t.name)||"!"}`:"Commit";return a.createElement(Vn.y,null,a.createElement(Vn.y.View,{tabContent:a.createElement(x.a,{isDisabled:n||0===r.length,tooltip:a.createElement(N.M,{actionName:a.createElement(ii,{branches:r})})},a.createElement("span",null,o)),key:"commit"},a.createElement(ai,null)))};function mi(e){let{children:t=null}=e;return(0,a.useEffect)((()=>{const e=document.activeElement;return()=>{e instanceof HTMLElement&&e!==document.activeElement&&document.activeElement===document.body&&e.isConnected&&e.focus()}}),[]),a.createElement(a.Fragment,null,t)}ci.__docgenInfo={description:"",methods:[],displayName:"CommitToolWindow"},mi.__docgenInfo={description:"Works around an issue where the focus is lost after a component rendering the focused element is suspended and\nunsuspended. Haven't tracked down the issue, but it can be the same react 17 issue we worked around in\n{@link UNSAFE_React17SuspenseFix}.",methods:[],displayName:"UNSAFE_FocusRestoringSuspense",props:{children:{defaultValue:{value:"null",computed:!1},required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};var ui=n(94769),di=n(86688),pi=n(74990),hi=n(38827);const gi=E.zo.div`
  box-sizing: border-box;
  display: flex;
  align-items: center;
  height: 2.0625rem;
  border-bottom: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.borderColor}};
  flex-shrink: 0;
`,fi=E.zo.div`
  flex-grow: 1;
`,Ai=E.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  display: flex;
  flex-direction: column;
  justify-content: end;
  align-items: center;
  gap: 0.25rem;
  min-height: 37%;
  overflow: hidden;
`;var Ei=n(13516);const yi=e=>{const t=e.split("\n"),n=t.slice(1);return{subject:t[0],bodyAsString:n.join("\n"),body:a.createElement(a.Fragment,null,n.map(((e,t)=>a.createElement(a.Fragment,{key:t},t>0&&a.createElement("br",null),e))))}};function vi(e){return e.slice(0,8)}const bi=new Intl.DateTimeFormat([],{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric",hour12:!0}),wi=new Intl.DateTimeFormat([],{hour:"numeric",minute:"numeric",hour12:!0}),Ci=new Intl.DateTimeFormat([],{day:"numeric",month:"numeric",year:"2-digit"});var ki;const Si=To({commitParent:(ki=e=>`Changes to ${vi(o().basename(e.oid))} ${e.subject.slice(0,50)}`,(e,t)=>{let{fileCount:n}=t;return{textValue:ki(e),rendered:a.createElement(Jt.e,null,a.createElement(zt.J,null),a.createElement(Jt.e.Hint,null,So(n)))}})},{repo:(e,t)=>{let{fileCount:n}=t;return{textValue:o().basename(e.repository.dir),rendered:a.createElement(Jt.e,null,a.createElement(wo,{rootPath:e.repository.dir}),a.createElement(zt.J,null),a.createElement(Jt.e.Hint,null,So(n)))}}}),Ii={};var Bi=n(37698);async function Ti(e){return async function(e){const t=e.filter(Qn.isDeletion),n=e.filter(Qn.isAddition),r=new Map,o=async e=>(r.get(e)||r.set(e,await Qn.content(e)),r.get(e)??""),a=new Map;return await Promise.all(t.map((async e=>Promise.all(n.map((async t=>{const n=await async function(e,t){return new Promise(((n,r)=>{(0,Bi.Mp)(e,t,(function(e,t){if(void 0===t&&(t=[]),e)return r(e);const{unchanged:o,total:a}=t.reduce(((e,t)=>{let{total:n,unchanged:r}=e;const o=t.count??0;return{total:n+o,unchanged:r+(t.added||t.removed?0:o)}}),{total:0,unchanged:0});n(o/a*100)}))}))}(await o(e),await o(t)),r=a.get(e);n>=50&&(!r||n>r.similarity)&&a.set(e,{similarity:n,to:t})})))))),Ri(a,e)}(function(e){const t=e.filter(Qn.isDeletion),n=e.filter(Qn.isAddition);return Ri(new Map(t.map((e=>{const t=n.find((t=>{let{after:{hash:n}}=t;return n===e.before.hash}));return t?[e,{to:t}]:null})).filter(We.N)),e)}(e))}function Ri(e,t){const n=[...e.values()].map((e=>e.to));return t.map((t=>{if(Qn.isDeletion(t)){const n=e.get(t);if(n)return Qn(t.before,null==n?void 0:n.to.after)}return t})).filter((e=>!n.includes(e)))}const Pi=(0,i.xu)({key:"vcs/log/commits/changes/isGroupingActive",default:e=>e===ur.id}),Di=(0,i.cn)({key:"vcs/log/commits/changes/treeRef",default:a.createRef(),dangerouslyAllowMutability:!0}),xi=(0,i.cn)({key:"vcs/log/commits/changes/expandedKeys",default:new Set}),Ni=(0,i.cn)({key:"vcs/log/commits/changes/selectedKeys",default:new Set}),Fi="commitParent",_i=(0,i.CG)({key:"vcs/log/commits/diffWithoutRenamesState",get:e=>()=>async function(e){let{fromRef:t,toRef:n,...r}=e;return(await l.ZP.walk({...r,cache:Ii,trees:[l.ZP.TREE({ref:t}),l.ZP.TREE({ref:n})],map:async function(e,t){let[n,a]=t;const i=await(null==a?void 0:a.oid()),l=await(null==n?void 0:n.oid()),s=await(null==a?void 0:a.type()),c=await(null==n?void 0:n.type());if(i===l)return null;const m=i?{hash:i,path:o().join(r.dir||"",e),isDir:"tree"===s,content:async()=>(new TextDecoder).decode(await(null==a?void 0:a.content())??new Uint8Array)}:null,u=l?{hash:l,path:o().join(r.dir||"",e),isDir:"tree"===c,content:async()=>(new TextDecoder).decode(await(null==n?void 0:n.content())??new Uint8Array)}:null,d=m||u?Qn(u,m):null;return!(!d||Qn.revision(d).isDir)&&d}})||[]).filter((e=>e))}({fs:se,...e})}),Li=(0,i.CG)({key:"vcs/log/commits/diffState",get:e=>t=>{let{get:n}=t;return Ti(n(_i(e)))}}),Mi=e=>async t=>{var n;let{get:r}=t;const o=r(ba)[0],{byOid:a}=r(Aa),i=null==o||null==(n=o.readCommitResult)?void 0:n.oid,l=null==o?void 0:o.readCommitResult.commit.parent;if(i&&l){const t=function(){return gr(...arguments)("")}({get:r,groupings:dr,isActive:Pi}),n=null==l?void 0:l.map((n=>{var l;return{type:Fi,key:rr(Fi,n),oid:n,subject:(null==(l=a[n])?void 0:l.readCommitResult.commit.message)||"",children:t([...r(e({toRef:i,fromRef:n,dir:o.repoPath}))].map((e=>ar(e))))}})),{expandAllKeys:s,fileCountsMap:c,...m}=kr(1===n.length?n[0].children:n.filter((e=>{let{children:t}=e;return t.length>0})));return(0,fr.kD)((e=>("directory"===e.type?"a_":"b_")+Si.getTextValue(e,{fileCountsMap:c}).toLowerCase()),{roots:m.rootNodes,getChildren:e=>"children"in e?e.children:null}),{...m,fileCountsMap:c,expandAllKeys:new Set([...s].filter((e=>!`${e}`.startsWith(Fi))))}}return null},Vi=(0,i.nZ)({key:"vcs/log/commits/selection/changesWithoutRename",get:Mi(_i)}),Oi=(0,i.nZ)({key:"vcs/log/commits/selection/changes",get:Mi(Li)}),Gi=E.zo.div`
  position: absolute;
  inset: 0;
  gap: 0.5rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
`;function Hi(e){let{treeShortcutHandlerProps:t}=e;const[n]=ye(ba),r=(0,i.sJ)(Di),o=!(null!=n&&n.length),l=function(e){const t=e.map((e=>(0,i.$P)(e)));return t.find((e=>{let{state:t}=e;return"hasValue"===t}))||t.slice(-1)[0]}([Oi,Vi]),s=l.valueMaybe(),[c,m]=(0,i.FV)(xi),[u,d]=(0,i.FV)(Ni);return(0,a.useEffect)((()=>{m((null==s?void 0:s.expandAllKeys)??new Set),d(new Set)}),[l.state]),o?a.createElement(Ai,null,"Select commits to to view changes"):a.createElement("div",(0,p.Z)({},t,{style:{height:"-webkit-fill-available",position:"relative"}}),"loading"===l.state&&a.createElement(Kn,null,a.createElement(Gi,null,a.createElement(g,{style:{width:"1.5rem"}}),"Loading...")),s&&a.createElement(Zt.b,{"aria-label":"Commit changes",treeRef:r,items:s.rootNodes,selectionMode:"multiple",expandedKeys:c,onExpandedChange:m,selectedKeys:u,onSelectionChange:d,style:{paddingBottom:"1rem"},fillAvailableSpace:!0},Si.itemRenderer({fileCountsMap:s.fileCountsMap})),n.length>1&&a.createElement(Ei.S,{placement:"top",tooltip:a.createElement(bn.k,{helpText:a.createElement(a.Fragment,null,"Showing diff for more than one commit is not currently supported. Only the first selected commit is taken into account.")})},(e=>a.createElement("span",(0,p.Z)({},e,{style:{position:"absolute",right:"0.5rem",bottom:"0.5rem"}}),a.createElement(R.vq,{icon:"general/warning"})))))}Hi.__docgenInfo={description:"TODO: handle multiple selected commits (check Changes.ShowChangesFromParents https://github.com/JetBrains/intellij-community/blob/ac57611a0612bd65ba2a19c841a4f95b40591134/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/frame/VcsLogChangesBrowser.java#L255-L254)",methods:[],displayName:"CommitChangedFiles",props:{treeShortcutHandlerProps:{required:!0,tsType:{name:"HTMLAttributes",elements:[{name:"HTMLElement"}],raw:"HTMLAttributes<HTMLElement>"},description:""}}};var Ki=n(90795);const $i=a.createElement("path",{fill:"currentColor",d:"M4.2 4.8 C4.8627 4.8 5.4 5.3373 5.4 6 C5.4 6.6627 4.8627 7.2 4.2 7.2 C3.5373 7.2 3 6.6627 3 6 C3 5.3373 3.5373 4.8 4.2 4.8 ZM0.6 2.4 L0.6 7.2 L7.8 14.4 L12.6 9.6 L5.4 2.4 Z"}),Qi={light:"#ffd100",dark:"#e1c731"},Ui={light:"#3cb45c",dark:"#3cb45c"},ji={light:"#9f79b5",dark:"#9f79b5"},qi={light:"#7a7a7a",dark:"#999999"},Zi={head:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.headIconColor",Qi)},localBranch:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.localBranchIconColor",Ui)},remoteBranch:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.remoteBranchIconColor",ji)},tag:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.tagIconColor",qi)}},Ji=(0,E.zo)(Co)`
  border-radius: 3px;
  align-items: stretch;
  font-size: 0.75rem;
`,zi=E.zo.svg.attrs({viewBox:"0 0 14.5 14.5"})`
  width: 1rem;
  height: 1rem;
  stroke: rgba(0, 0, 0, 0.25);
  stroke-width: 0.5px;
  color: ${e=>{let{type:t,theme:n}=e;return Zi[t]({theme:n})}};
  z-index: 1; // for the right vertical order of grouped labels
  &:not(:first-child) {
    margin-right: -11px;
  }
`,Wi=E.zo.span`
  display: inline-flex;
  flex-direction: row-reverse;
`,Yi=E.zo.span`
  text-overflow: ellipsis;
  overflow: hidden;
`;function Xi(e){let{type:t}=e;return a.createElement(zi,{type:t},$i)}function el(e){let{types:t}=e;return a.createElement(Wi,null,t.map(((e,t)=>a.createElement(zi,{key:t,type:e},$i))))}function tl(e){let{types:t,children:n}=e;return a.createElement(Ji,null,a.createElement(el,{types:t}),a.createElement(Yi,null,n))}Xi.__docgenInfo={description:"",methods:[],displayName:"RefIcon",props:{type:{required:!0,tsType:{name:'GitRef["type"]',raw:'GitRef["type"]'},description:""}}},el.__docgenInfo={description:"",methods:[],displayName:"RefIconGroup",props:{types:{required:!0,tsType:{name:"Array",elements:[{name:'GitRef["type"]',raw:'GitRef["type"]'}],raw:'Array<GitRef["type"]>'},description:""}}},tl.__docgenInfo={description:"",methods:[],displayName:"RefLabel",props:{types:{required:!0,tsType:{name:"Array",elements:[{name:'GitRef["type"]',raw:'GitRef["type"]'}],raw:'Array<GitRef["type"]>'},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const nl=E.zo.div`
  padding: 0.875rem;
  cursor: default;
`,rl=E.zo.div`
  font-family: "JetBrains Mono", monospace;
  line-height: 1.125rem;
  margin-bottom: 1.25rem;
  margin-right: 1.1875rem;
`,ol=E.zo.div`
  font-weight: bold;
`,al=E.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.label({disabled:!0})}};
`,il=E.zo.div`
  line-height: 1.2;
  display: flex;
  gap: 0.25rem;
  margin-bottom: 0.75rem;
`,ll=(0,E.zo)(wo)`
  align-self: start;
`,sl=E.zo.span`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.25rem;
  margin-bottom: 0.75rem;
`;function cl(){const[e]=ye(wa),[t]=ye(Ea),n=(0,i.sJ)(rt).length>0;if(!e)return a.createElement(Ai,null,"No commits selected");const{readCommitResult:{commit:r,oid:o},containingRefs:l,repoPath:s}=e,{subject:c,body:m}=yi(r.message),u=[];r.committer.name!==r.author.name&&u.push(a.createElement(a.Fragment,{key:r.committer.email},"by ",r.committer.name," ",a.createElement(dl,{email:r.committer.email}))),r.committer.timestamp!==r.author.timestamp&&u.push(pl(1e3*r.committer.timestamp));const d=(null==t?void 0:t[o])||[],h=(0,$n.Z)((e=>e.type),d);return a.createElement(nl,null,a.createElement(rl,null,a.createElement(ol,null,c),m),a.createElement(il,null,n&&a.createElement(x.a,{tooltip:a.createElement(Ki.u,null,s)},(e=>a.createElement(ll,(0,p.Z)({},e,{rootPath:s})))),a.createElement("div",null,`${vi(o)} ${r.author.name} `,a.createElement(dl,{email:r.author.email})," ",`${pl(new Date(1e3*r.author.timestamp))}`,u.length>0&&a.createElement(al,null,"committed ",u))),d.length>0&&a.createElement(sl,null,a.createElement(ul,{refs:h.head}),a.createElement(ul,{refs:h.localBranch}),a.createElement(ul,{refs:h.remoteBranch}),a.createElement(ul,{refs:h.tag})),a.createElement("div",null,"In ",l.size," branches: ",[...l].join(", ")))}const ml=E.zo.span`
  display: inline-flex;
  align-items: center;
`;function ul(e){let{refs:t}=e;return null!=t&&t.length?a.createElement(a.Fragment,null,t.map(((e,n)=>{const r=`${e.name}${n===t.length-1?"":","}`;return 0===n?a.createElement(ml,null,a.createElement(el,{types:t.map((e=>{let{type:t}=e;return t})).slice(0,2)}),r):a.createElement("span",null,r)}))):null}function dl(e){let{email:t}=e;return a.createElement("a",{href:`mailto:${t}`,style:{all:"unset"}},a.createElement(At.r,null,`<${t}>`))}function pl(e){return`on ${function(e){return Ci.format(e)}(e)} at ${function(e){return wi.format(e).replace(" ","\u202f")}(e)}`}function hl(e,t){const n=(0,w.ol)().find((t=>{let{id:n}=t;return n===e}));return(0,a.useMemo)((()=>{if(!n)return null;const{perform:e,id:r,...o}=n;return{...o,id:t,useShortcutsOf:r,isSearchable:!1,actionPerformed:t=>{e(t)}}}),[n])}cl.__docgenInfo={description:"",methods:[],displayName:"CommitDetails"};const gl=(0,i.cn)({key:"vcs/toolwindow/splitViewSize",default:.5}),fl=E.zo.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,Al=(0,i.nZ)({key:"vcs/log/commits/changes/groupingState",get:e=>{let{get:t}=e;return dr.filter((e=>(0,i.Oy)(e.isAvailable)?t(e.isAvailable):e.isAvailable)).map((e=>({...e,key:`groupBy:${e.id}`,isActive:t(Pi(e.id))})))}}),El="Vcs.log.detailsView.layout",yl="Vcs.log.detailsView.viewOptions",vl=`${El}.${cr.SHOW_DETAILS}`,bl=`${El}.${cr.SHOW_DIFF_PREVIEW}`,wl=e=>`Vcs.log.detailsView.groupBy.${e.id}`;function Cl(e){let{tabKey:t}=e;const[n,r]=(0,i.FV)(gl),o=(0,i.sJ)(ia(t)),l=(0,i._8)((e=>{let{set:t}=e;return e=>{t(Pi(e),(e=>!e))}})),s=(0,di.w)(),c=(0,i.sJ)(Al),m=(0,i.sJ)(Di),u=[s({id:yl,title:"View Options",icon:a.createElement(R.vq,{icon:"actions/groupBy.svg"}),children:[s({id:"Vcs.log.detailsView.groupBy",title:"Group By",menuPresentation:"titledSection",icon:a.createElement(R.vq,{icon:"actions/groupBy.svg"}),children:c.map((e=>({id:wl(e),useShortcutsOf:e.useShortcutOf,title:e.title,actionPerformed:()=>{l(e.id)}})))}),s({id:El,menuPresentation:"titledSection",title:"Layout",children:[hl(cr.SHOW_DETAILS,vl),hl(cr.SHOW_DIFF_PREVIEW,bl)].filter(We.N)})]}),...(0,Lt.x)({treeRef:m})];return a.createElement(w.DG,{actions:u},(e=>{let{shortcutHandlerProps:t}=e;return a.createElement(fl,null,a.createElement(gi,null,a.createElement(No.o,null,a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Show Diff",shortcut:"\u2318D"})},a.createElement(Mo.hU,{isDisabled:!0},a.createElement(R.vq,{icon:"actions/diff.svg"}))),a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Revert Selected Changes"})},a.createElement(Mo.hU,{isDisabled:!0},a.createElement(R.vq,{icon:"actions/rollback.svg"}))),a.createElement(Fo.p,{renderMenu:e=>{let{menuProps:t}=e;return a.createElement(Il,{menuProps:t})}},a.createElement(R.vq,{icon:"actions/groupBy.svg"}))),a.createElement(fi,null),a.createElement(No.o,{style:{flexShrink:0}},a.createElement(Mt.K,{actionId:vt.$.EXPAND_ALL}),a.createElement(Mt.K,{actionId:vt.$.COLLAPSE_ALL}))),a.createElement("div",{style:{flex:1,minHeight:0}},o?a.createElement(Hn.D,{orientation:"vertical",firstSize:n,onFirstResize:r,firstViewMinSize:10,firstView:a.createElement(Hi,{treeShortcutHandlerProps:t}),innerView:a.createElement(cl,null)}):a.createElement(Hi,{treeShortcutHandlerProps:t})))}))}const kl={[vl]:la,...Object.fromEntries(dr.map((e=>[wl(e),Pi(e.id)])))},Sl=(0,i.nZ)({key:"vcs/log/commits/detailsView/viewOptionsSelectedKeys",get:e=>{let{get:t}=e;return Object.entries(kl).filter((e=>{let[,n]=e;return t(n)})).map((e=>{let[t]=e;return t}))}});function Il(e){let{menuProps:t}=e;const n=(0,pi.y)(yl),r=(0,i.sJ)(Sl);return n&&a.createElement(hi.d,{actionGroup:n},(e=>a.createElement(_o.w,(0,p.Z)({},t,e,{selectedKeys:r}))))}Cl.__docgenInfo={description:"",methods:[],displayName:"VcsLogDetailsView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};var Bl=n(6364),Tl=n(70428),Rl=n(96776),Pl=n(35444),Dl=n(72011);const xl=E.zo.button`
  all: unset;
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding-left: 0.25rem;
  cursor: pointer;
  background: transparent;
  color: ${e=>{let{theme:t}=e;return t.commonColors.label({disabled:!0})}};

  line-height: 1.5;
  border-radius: 0.25rem;
  white-space: nowrap;
  border: 2px solid transparent;
  &:hover {
    color: ${e=>{let{theme:t}=e;return t.color("*.foreground")}};
  }
  &:focus-visible {
    border-color: ${e=>{let{theme:t}=e;return t.commonColors.focusRing({focused:!0})}};
  }
`,Nl=E.zo.span`
  margin-left: -1px;
  line-height: 1.2;
`,Fl=E.zo.span`
  color: ${e=>{let{theme:t}=e;return t.color("*.foreground")}};
  max-width: 8.25rem;
  overflow: hidden;
  text-overflow: ellipsis;
`,_l=(0,E.zo)(Rl.v)`
  &:focus-visible {
    outline: 2px solid
      ${e=>{let{theme:t}=e;return t.commonColors.focusRing({focused:!0})}};
    outline-offset: -2px;
  }
`;function Ll(e){let{label:t,value:n,onClear:r,...o}=e;return a.createElement(Pl.b,o,((e,o)=>a.createElement(xl,(0,p.Z)({},e,{ref:o}),t,n?a.createElement(a.Fragment,null,": ",a.createElement(Fl,null,n),a.createElement(Dl.V,{onPress:r},a.createElement(_l,{icon:"actions/close",hoverIcon:"actions/closeHovered"}))):a.createElement(Nl,null,a.createElement(R.vq,{icon:"general/arrowDownSmall.svg"})))))}Ll.__docgenInfo={description:"",methods:[],displayName:"VcsFilterDropdown",props:{label:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},value:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Ml=E.zo.span.attrs({role:"button"})`
  display: inline-flex;
`;function Vl(e){let{onClick:t,isFavorite:n,isCurrent:r}=e;return a.createElement(Ml,{onPointerUp:e=>{e.stopPropagation()},onClick:t},r?a.createElement(Rl.v,{icon:n?"/platform/dvcs-impl/resources/icons/currentBranchFavoriteLabel.svg":"/platform/dvcs-impl/resources/icons/currentBranchLabel.svg",hoverIcon:n?"nodes/favorite.svg":"nodes/notFavoriteOnHover.svg",hoverContainerSelector:"[role='menuitem']"}):n?a.createElement(R.vq,{icon:"nodes/favorite.svg"}):a.createElement(Rl.v,{icon:"nodes/emptyNode.svg",hoverIcon:"nodes/notFavoriteOnHover.svg",hoverContainerSelector:"[role='menuitem']"}))}function Ol(e){let{tabKey:t}=e;const[n,r]=(0,i.FV)(sa.branch(t)),o=(0,i.rb)(sa.branch(t));return a.createElement(Ll,{value:n.length>0?n.join("|"):null,onClear:o,renderMenu:e=>{let{menuProps:t}=e;return a.createElement(Kl,{menuProps:t,onBranchesSelected:r})},label:"Branch"})}Vl.__docgenInfo={description:"",methods:[],displayName:"BranchFavoriteButton",props:{isCurrent:{required:!1,tsType:{name:"boolean"},description:""},isFavorite:{required:!0,tsType:{name:"boolean"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Gl=e=>Object.entries((0,$n.Z)((e=>{let{branchName:t}=e;return t}),e)).map((e=>{let[t,n]=e;return{branchName:t,repoRoots:n.map((e=>e.repoRoot))}})),Hl=(0,i.nZ)({key:"vcs/allBranchesRepoConsolidated",get:e=>{let{get:t}=e;const n=t(oo),r=n.flatMap((e=>{let{remoteBranches:t,repoRoot:n}=e;return t.map((e=>({repoRoot:n,branchName:`${e.remote}/${e.name}`})))})),o=n.flatMap((e=>{let{localBranches:t,repoRoot:n}=e;return t.map((e=>({repoRoot:n,branchName:e.name})))}));return{localBranches:Gl(o),remoteBranches:Gl(r)}}});function Kl(e){let{menuProps:t,onBranchesSelected:n}=e;const[r,o]=(0,a.useState)([]),{toggleFavorite:i,isFavorite:l}=Eo(),[s]=ye(Hl),{localBranches:c=[],remoteBranches:m=[]}=s||{},u=(0,$n.Z)((e=>{let{branchName:t}=e;return t.split("/")[0]}),m);(0,a.useEffect)((()=>{const e=(e,t)=>t.filter((t=>{let{branchName:n,repoRoots:r}=t;return r.some((t=>l({branchType:e,branchName:n,repoRoot:t})))})).map((t=>{let{branchName:n,repoRoots:r}=t;return{branchType:e,branchName:n,repoRoots:r}}));o([{branchType:"LOCAL",branchName:"HEAD",repoRoots:[]}].concat(e("LOCAL",c)).concat(e("REMOTE",m)))}),[]);const d=e=>{let{branchName:t,branchType:n,repoRoots:r}=e;return a.createElement(B.c,{key:`branch:${t}`,textValue:t},a.createElement(D._,{content:t,icon:a.createElement(Vl,{isFavorite:"HEAD"===t||r.some((e=>l({branchType:n,repoRoot:e,branchName:t}))),onClick:()=>{"HEAD"!==t&&r.forEach((e=>{i({branchType:n,repoRoot:e,branchName:t})}))}})}))};return a.createElement(_o.w,(0,p.Z)({},t,{submenuBehavior:"toggleOnPress",autoFocus:"first",minWidth:250,onAction:e=>{const[t,o]=`${e}`.split(":");"branch"===t&&o?n([o]):"favorites"===t?n(r.map((e=>{let{branchName:t}=e;return t}))):"select"===t&&yt()}}),[a.createElement(B.c,{key:"select"},"Select..."),a.createElement(B.c,{key:"favorites"},"Favorites"),...r.map(d),a.createElement(tn.i,null),a.createElement(B.c,{key:"local",title:"Local"},c.map((e=>{let{branchName:t,repoRoots:n}=e;return d({branchType:"LOCAL",branchName:t,repoRoots:n})}))),...Object.entries(u).map((e=>{let[t,n]=e;return a.createElement(B.c,{key:`remote:${t}`,title:`${t}/...`},n.map((e=>{let{branchName:t,repoRoots:n}=e;return d({branchType:"REMOTE",branchName:t,repoRoots:n})})))}))])}Ol.__docgenInfo={description:"",methods:[],displayName:"BranchesFilterDropdown",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};var $l=n(27499),Ql=n(61158);const Ul="(\\w+)[\\p{Punct}\\s](\\w+)";function jl(e){const t=function(e){const t=e.match(Ul);if(t)return[t[1],t[2]];return null}(e);if(null!=t){const[e,n]=t;return e.toLowerCase()+" "+n.toLowerCase()}return function(e){return e.match(ql)?e.toLowerCase():e}(e)}const ql="[ -~]*";const Zl=(0,i.CG)({key:"vcs/repo-user",get:e=>async()=>({name:await l.ZP.getConfig({fs:se,dir:e,path:"user.name"})??"",email:await l.ZP.getConfig({fs:se,dir:e,path:"user.email"})??""})}),Jl=E.zo.div`
  display: flex;
  height: 1.5rem;
  align-items: center;
  width: 100%;
  --column-width-1: 130px;
  --column-width-2: 130px;
  --column-width-3: 70px;
`,zl=E.zo.div`
  overflow: hidden;
  padding-left: 0.25rem;
`,Wl=E.zo.div`
  ${e=>{let{asOverlay:t}=e;return t?E.iv`
          flex-shrink: 0;
        `:E.iv`
          position: absolute;
          right: 0;
          top: 1px;
          max-width: calc(100% - 100px);
        `}};

  display: flex;
  gap: 0.25rem;
  overflow: hidden;
  background: ${e=>{let{theme:t}=e;return t.currentBackgroundAware(t.color("List.background"))}};
`,Yl=E.zo.div`
  position: relative;
  display: flex;
  gap: 0.25rem;
`,Xl=E.zo.div`
  display: flex;
  align-items: center;
  margin: 0 0.25rem;
  font-size: 0.75rem;
`,es=e=>{let{repoRoot:t,author:n}=e;const r=(0,i.sJ)(Zl(t)),o=(0,i.sJ)(Sa),a=(0,i.sJ)(ca.user);var l;return{fontWeight:o&&"*"!==a&&(l=n,jl(r.name)===jl(l.name))?"bold":void 0}};function ts(e){let{refs:t,readCommitResult:{oid:n,commit:{author:r,committer:o,message:l}},repoRoot:s}=e;const c=(0,i.sJ)(Ca),m=(0,i.sJ)(ka),u=(0,i.sJ)(Pa(Ia.id)),d=(0,i.sJ)(Pa(Ta.id)),p=(0,i.sJ)(Pa(Ba.id)),h=es({author:r,repoRoot:s});return a.createElement(Jl,null,a.createElement(zl,{style:{flexBasis:"0%",flexGrow:1,flexShrink:1}},a.createElement(Yl,null,t&&a.createElement(rs,{onLeft:m,refs:t}),a.createElement("span",{style:h},yi(l).subject))),u&&a.createElement(zl,{style:{flexBasis:"auto",width:"var(--column-width-1)",flexShrink:1,...h}},r.name,o.name!==r.name&&"*"),d&&a.createElement(zl,{style:{flexBasis:"auto",width:"var(--column-width-2)",flexShrink:1,...h}},(g=1e3*(c?o:r).timestamp,bi.format(g).replace(" ","\u202f"))),p&&a.createElement(zl,{style:{flexBasis:"auto",width:"var(--column-width-3)",flexShrink:1,...h}},vi(n)));var g}function ns(e){return`${e.type}${e.name}`}function rs(e){let{refs:t,onLeft:n}=e;const{filteredRefs:r}=(0,a.useMemo)((()=>{const e=t.some((e=>"localBranch"===e.type&&e.isCurrent));return{filteredRefs:t.filter((n=>!("head"===n.type&&e||"remoteBranch"===n.type&&t.find((e=>"localBranch"===e.type&&e.trackingBranch===n.name)))))}}),[t]);return a.createElement(x.a,{placement:"bottom",delay:800,isDisabled:t.length<2,tooltip:a.createElement(Ki.u,{withPointer:!0},t.map((e=>a.createElement(Xl,{key:ns(e)},a.createElement(Xi,{type:e.type}),e.name))))},(e=>{let{ref:o,...i}=e;return a.createElement(Wl,(0,p.Z)({ref:o,asOverlay:n},i),r.filter((e=>"remoteBranch"!==e.type||!t.find((t=>"localBranch"===t.type&&t.trackingBranch===e.name)))).map((e=>{let t=e.name;const n=[e.type];return"localBranch"===e.type&&e.trackingBranch&&(n.unshift("remoteBranch"),t=`${e.trackingBranch.split("/")[0]} & ${e.name}`),"localBranch"===e.type&&e.isCurrent&&n.push("head"),a.createElement(tl,{key:ns(e),types:n},t)})))}))}ts.__docgenInfo={description:"",methods:[],displayName:"CommitsTableRow",props:{repoRoot:{required:!0,tsType:{name:"string"},description:""},readCommitResult:{required:!0,tsType:{name:"ReadCommitResult"},description:""},refs:{required:!0,tsType:{name:"union",raw:"GitRef[] | undefined",elements:[{name:"Array",elements:[{name:"GitRef"}],raw:"GitRef[]"},{name:"undefined"}]},description:""}}};var os=n(37988);const as=(0,E.zo)($l.ko)`
  position: absolute;
  width: 100%;
  z-index: 1;
`,is=E.zo.div`
  position: relative;
  min-height: 0;
  flex: 1;
  ${os.o} {
    // the default "min-width: min-content", which is necessary for sizing overlays (e.g. Popup) containing list/tree,
    // results in horizontally scrollable table. Probably not an issue when a proper Table component is implemented.
    min-width: unset;
  }
`,ls=a.createContext({});function ss(){const e=(0,i.sJ)(ta),t=(0,i._8)((e=>{let{reset:t}=e;return e=>{Object.values(sa).map((t=>t(e))).forEach(t)}}),[]),[n,r]=ye(Aa),o=null==n?void 0:n.rows,[l]=ye(Ea),[s,c]=(0,i.FV)(ya);return a.createElement(ls.Provider,{value:l??{}},a.createElement(is,null,"loading"===r&&a.createElement(as,{"aria-label":"Loading commits",isIndeterminate:!0}),o&&o.length>0&&a.createElement(Ql.a,{"aria-label":"Commits list",items:o,fillAvailableSpace:!0,selectionMode:"multiple",selectedKeys:s,onSelectionChange:c,estimatedItemHeight:24},(e=>{let{readCommitResult:t,repoPath:n}=e;return a.createElement(B.c,{key:t.oid,textValue:t.commit.message},a.createElement(ls.Consumer,null,(e=>a.createElement(ts,{readCommitResult:t,repoRoot:n,refs:e[t.oid]}))))})),"hasValue"===r&&o&&0===o.length&&a.createElement(Ai,null,"No commits matching filters",a.createElement(At.r,{onPress:()=>t(e)},"Reset filters"))))}ss.__docgenInfo={description:"",methods:[],displayName:"CommitsTable"};const cs=[{name:"Commit Timestamp",state:Ca},{name:"References on the Left",state:ka}],ms=[{name:"My Commits",state:Sa}],us=[Ia,Ba,Ta].map((e=>{let{name:t,id:n}=e;return{name:t,state:Pa(n)}})),ds=e=>{const[t,n]=(0,i.FV)(e.state);return{...e,key:e.state.key.replace(/"/g,"_"),value:t,set:n}};function ps(){const e=cs.map(ds),t=ms.map(ds),n=us.map(ds),r=e.concat(t).concat(n);return a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"View Options"})},a.createElement(Fo.p,{renderMenu:o=>{let{menuProps:i}=o;return a.createElement(_o.w,(0,p.Z)({},i,{selectedKeys:r.filter((e=>{let{value:t}=e;return t})).map((e=>{let{key:t}=e;return t})),onAction:e=>{const t=r.find((t=>{let{key:n}=t;return n===e}));t?t.set((e=>!e)):yt()}}),a.createElement(Vo.$0,{title:"Show"},a.createElement(B.c,null,"Compact References View"),a.createElement(B.c,null,"Tag Names"),a.createElement(B.c,null,"Long Edges"),e.map((e=>{let{name:t,key:n}=e;return a.createElement(B.c,{key:n},t)})),a.createElement(B.c,{title:"Columns"},n.map((e=>{let{name:t,key:n}=e;return a.createElement(B.c,{key:n},t)})))),a.createElement(Vo.$0,{title:"Highlight"},t.map((e=>{let{name:t,key:n}=e;return a.createElement(B.c,{key:n},t)})),a.createElement(B.c,null,"Merge Commits"),a.createElement(B.c,null,"Current Branch"),a.createElement(B.c,null,"Not Cherry-Picked Commits")))}},a.createElement(R.vq,{icon:"actions/groupBy.svg"})))}ps.__docgenInfo={description:"",methods:[],displayName:"CommitsTableViewOptionsMenuIconButton"};const hs=(0,E.zo)(Tl.M)`
  border-radius: 2px;
  width: 219px;
  margin-right: 0.0625rem;
  margin-left: 0.2rem;
`,gs=E.zo.div`
  height: 100%;
  display: flex;
  flex-direction: column;
`,fs=(0,i.cn)({key:"vcs/toolwindow/searchHistory",default:[]});function As(e){let{tabKey:t}=e;const n=(0,i.sJ)(nc),[r,o]=(0,i.FV)(sa.searchQuery(t)),[l,s]=(0,i.FV)(sa.user(t)),c=(0,i.rb)(sa.user(t)),[m,u]=(0,i.FV)(sa.date(t)),d=(0,i.rb)(sa.date(t)),[h,g]=(0,i.FV)(fs),[f,A]=(0,a.useState)(r),E=(0,bt.k)(),y=(0,i.sJ)(sa.regExp(t)),v=(0,i.sJ)(sa.matchCase(t)),b=function(e){void 0===e&&(e=f),o(e),e&&!h.includes(e)&&g((t=>[e,...t.filter((t=>t!==e))]))};(0,a.useEffect)((()=>{A(r)}),[r]);const w=(0,i._8)((e=>{let{set:t,snapshot:n}=e;return()=>{const e=(0,Bl.Z)();t(ea,(t=>[...t,e])),Object.values(sa).forEach((r=>{t(r(e),n.getLoadable(r(n.getLoadable(ta).getValue())).getValue())})),t(ta,e)}}),[]),C=new Date,k=new Date;k.setDate(C.getDate()-7);const S=new Date;S.setDate(C.getDate()-1);const T=[{name:"Last 24 hours",value:{from:S}},{name:"Last 7 days",value:{from:k}}];return a.createElement(gs,null,a.createElement(gi,null,a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Text or Hash Filter",shortcut:E(cr.FOCUS_TEXT_FILTER)})},a.createElement(hs,{inputRef:n,value:f,onChange:A,onSubmit:b,onBlur:()=>b(),onClear:()=>b(""),searchHistory:h,addonAfter:a.createElement(a.Fragment,null,a.createElement(Rl.R,{as:Mt.K,excludeFromTabOrder:!1,actionId:cr.REG_EXP},a.createElement(Rl.v,{icon:y?"actions/regexSelected":"actions/regex",hoverIcon:y?"actions/regexSelected":"actions/regexHovered"})),a.createElement(Rl.R,{as:Mt.K,excludeFromTabOrder:!1,actionId:cr.MATCH_CASE},v?a.createElement(R.vq,{icon:"actions/matchCaseSelected"}):a.createElement(Rl.v,{icon:"actions/matchCase",hoverIcon:"actions/matchCaseHovered"})))})),a.createElement(No.o,null,a.createElement(Ol,{tabKey:t}),a.createElement(Ll,{value:"*"===l?"me":l,onClear:c,renderMenu:e=>{let{menuProps:t}=e;return a.createElement(I.v2,(0,p.Z)({},t,{onAction:e=>{if("select"===e)return yt();s(`${e}`)}}),a.createElement(B.c,{key:"select"},"Select..."),a.createElement(B.c,{key:"*"},"me"))},label:"User"}),a.createElement(Ll,{value:m&&Es(m),onClear:d,renderMenu:e=>{let{menuProps:t}=e;return a.createElement(I.v2,(0,p.Z)({},t,{onAction:e=>{const t=T.find((t=>{let{name:n}=t;return n===e}));t?u(t.value):yt()}}),[a.createElement(B.c,{key:"select"},"Select..."),...T.map((e=>{let{name:t}=e;return a.createElement(B.c,{key:t},t)}))])},label:"Date"}),a.createElement(Ll,{renderMenu:e=>{let{menuProps:t}=e;return a.createElement(I.v2,(0,p.Z)({},t,{onAction:yt}),a.createElement(B.c,null,"Select in..."),a.createElement(B.c,null,"Select in Tree..."))},label:"Paths"}),a.createElement(No.J,null),a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Open New Git Log Tab"})},a.createElement(Mo.hU,{"aria-label":"Checkout",onPress:w},a.createElement(R.vq,{icon:"actions/openNewTab.svg"})))),a.createElement(fi,null),a.createElement(No.o,{style:{flexShrink:0}},a.createElement(Mt.K,{actionId:cr.LOG_REFRESH}),a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Cherry-Pick"})},a.createElement(Mo.hU,{isDisabled:!0},a.createElement(R.vq,{icon:"/platform/dvcs-impl/resources/icons/cherryPick.svg"}))),a.createElement(ps,null),a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Go To Hash/Branch/Tag",shortcut:"\u2318F"})},a.createElement(Mo.hU,null,a.createElement(R.vq,{icon:"actions/find"}))))),a.createElement(ss,null))}function Es(e){return e.from&&e.to?`Between ${Yo(e.from)} and ${Yo(e.to)}`:e.from?`since ${Yo(e.from)}`:e.to?`until ${Yo(e.to)}`:""}function ys(e,t){const n=e.flatMap((e=>{let{repoRoot:t,localBranches:n,currentBranch:r}=e;return n.map((e=>({repoRoot:t,isCurrent:(null==r?void 0:r.name)===e.name,branch:e})))})),o=Object.entries((0,$n.Z)((e=>{let{branch:t}=e;return t.name}),n)).map((t=>{let[n,o]=t;const a=o.map((e=>{let{repoRoot:t}=e;return(0,r.basename)(t)}));return{type:"localBranch",key:`localBranch:${a.join("|")}:${n}`,name:n,branches:o,isFavorite:o.some((e=>{let{repoRoot:t,branch:n}=e;return po({repoRoot:t,branchType:"LOCAL",branchName:n.name})})),isCurrent:o.some((e=>{let{isCurrent:t}=e;return t})),repos:a.length===e.length?null:a}}));return t?ws(o):o}function vs(e,t){const n=e.flatMap((e=>{let{repoRoot:t,remoteBranches:n}=e;return n.map((e=>({repoRoot:t,branch:e})))})),o=Object.entries((0,$n.Z)((e=>{let{branch:t}=e;return`${t.remote}/${t.name}`}),n)).map((t=>{let[n,o]=t;const a=o.map((e=>{let{repoRoot:t}=e;return(0,r.basename)(t)}));return{type:"remoteBranch",key:`remoteBranch:${a.join("|")}:${n}`,name:n,branches:o,isFavorite:o.some((e=>{let{repoRoot:t,branch:n}=e;return po({repoRoot:t,branchType:"REMOTE",branchName:n.name})})),repos:a.length===e.length?null:a}}));return t?ws(o):o}As.__docgenInfo={description:"",methods:[],displayName:"VcsLogCommitsView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};const bs=(0,i.nZ)({key:"vcs/logs/branchesTree/nodes",get:e=>{let{get:t}=e;const n=t(oo),r=t(Cs("directory")),o=t(ks)&&t(Cs("repository"));return[{type:"head"},{type:"branchType",branchType:"LOCAL",children:o?n.map((e=>({type:"repository",key:`LOCAL:repository:${e.repoRoot}`,repoRoot:e.repoRoot,children:ys([e],r)}))):ys(n,r)},{type:"branchType",branchType:"REMOTE",children:o?n.map((e=>({type:"repository",key:`REMOTE:repository:${e.repoRoot}`,repoRoot:e.repoRoot,children:vs([e],r)}))):vs(n,r)}]}}),ws=er({shouldCollapseDirectories:!1,getPath:e=>e.name}),Cs=(0,i.xu)({key:"vcs/logs/branchesTree/grouping",default:!0}),ks=(0,i.nZ)({key:"vcs/logs/branchesTree/grouping/repo/available",get:e=>{let{get:t}=e;return t(rt).length>1}}),Ss=oa((0,i.xu)({key:"vcs/logs/branchesTree/ref",default:a.createRef(),dangerouslyAllowMutability:!0})),Is=oa((0,i.xu)({key:"vcs/logs/branchesTree/selectedKeys",default:new Set})),Bs=oa((0,i.xu)({key:"vcs/logs/branchesTree/expandedKeys",default:new Set})),Ts=oa((0,i.xu)({key:"vcs/logs/branchesTree/searchInput",default:""})),Rs=[{id:"directory",title:"Directory",icon:a.createElement(R.vq,{icon:"actions/GroupByPackage.svg"}),isActive:Cs("directory"),isAvailable:!0},{id:"repository",title:"Repository",isActive:Cs("repository"),isAvailable:ks}],Ps=(0,i.nZ)({key:"vcs/logs/branchesTree/availableGroupings",get:e=>{let{get:t}=e;return Rs.filter((e=>(0,i.Oy)(e.isAvailable)?t(e.isAvailable):e.isAvailable)).map((e=>({...e,isActive:t(Cs(e.id))})))}});function Ds(){const e=(0,i._8)((e=>{let{set:t}=e;return e=>{t(Cs(e),(e=>!e))}}),[]),t=(0,i.sJ)(Ps);return a.createElement(Oo,{groupings:t,onToggle:e})}Ds.__docgenInfo={description:"",methods:[],displayName:"BranchesGroupByActionButton"};var xs=n(43194);const Ns={branchType:e=>{return a.createElement(B.c,{key:`${e.type}:${e.branchType}`,textValue:(t=e.branchType,t[0].toUpperCase()+t.slice(1).toLowerCase()),childItems:e.children},a.createElement(zt.J,null));var t},localBranch:e=>a.createElement(B.c,{key:`${e.key}`,textValue:(0,r.basename)(e.name)},a.createElement(Jt.e,null,a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:a.createElement(ii,{branches:e.branches})})},(t=>a.createElement(Jt.e.Group,t,e.isCurrent?a.createElement(x.a,{tooltip:a.createElement(Ki.u,null,"Current ",e.isFavorite&&"favorite ","branch")},(t=>a.createElement(Jt.e.Group,t,a.createElement(R.vq,{icon:e.isFavorite?"/platform/dvcs-impl/resources/icons/currentBranchFavoriteLabel.svg":"/platform/dvcs-impl/resources/icons/currentBranchLabel.svg"})))):a.createElement(R.vq,{icon:"vcs/branchNode"}),a.createElement(zt.J,null),e.repos&&a.createElement(Jt.e.Hint,null,"(",e.repos.join(", "),")")))))),remoteBranch:e=>a.createElement(B.c,{key:`${e.key}`,textValue:(0,r.basename)(e.name)},a.createElement(Jt.e,null,a.createElement(R.vq,{icon:e.isFavorite?"nodes/favorite.svg":"vcs/branchNode"}),a.createElement(zt.J,null),e.repos&&a.createElement(Jt.e.Hint,null,"(",e.repos.join(", "),")"))),repository:e=>a.createElement(B.c,{key:`${e.key}`,textValue:(0,r.basename)(e.repoRoot),childItems:e.children},a.createElement(Jt.e,null,a.createElement(wo,{rootPath:e.repoRoot}),a.createElement(zt.J,null))),directory:e=>a.createElement(B.c,{key:`${e.type}_${e.parentNodePath}${e.dirPath}`,textValue:(0,r.basename)(e.dirPath),childItems:e.children},a.createElement(Jt.e,null,a.createElement(R.vq,{icon:"nodes/folder.svg"}),a.createElement(zt.J,null))),head:e=>a.createElement(B.c,{key:`${e.type}`,textValue:"HEAD (Current Branch)"},a.createElement(zt.J,null))};const Fs=E.zo.input`
  all: unset;
  flex: 1;
  align-self: stretch;
`,_s=E.zo.div`
  min-width: 0; // don't outgrow the container
  flex-grow: 1; // fill the available space
  display: flex;
  flex-direction: column;
`,Ls=E.zo.span`
  display: inline-flex;
  margin-top: -0.0625rem;
  margin-left: 0.7rem;
  margin-right: 0.25rem;
  cursor: text;
`;function Ms(e){let{tabKey:t}=e;const[n]=ye(bs),[r,o]=(0,i.FV)(Is(t)),[l,s]=(0,i.FV)(Bs(t)),[c,m]=(0,i.FV)(Ts(t)),u=(0,i.sJ)(Ss(t)),d=(0,a.useRef)(null),h=(0,a.useRef)(null),g=(0,a.useRef)(null),[f,A]=(0,a.useState)(!1),E=(0,i.Zl)(ca.branch),{collectionSearchInputProps:y}=(0,xs.R)({collectionRef:d,selectionManager:g.current});return a.createElement(_s,null,a.createElement(gi,null,a.createElement(Ls,null,a.createElement(R.vq,{icon:"actions/search"})),a.createElement(Fs,(0,p.Z)({ref:h,tabIndex:-1,value:c,onChange:e=>m(e.target.value)},(0,ft.dG)(y,{onFocus:()=>{A(!0)},onBlur:()=>{A(!1)}})))),a.createElement(Zt.b,{ref:d,treeRef:u,selectionManagerRef:g,items:n??[],selectionMode:"multiple",selectedKeys:r,onSelectionChange:o,expandedKeys:l,onExpandedChange:s,onAction:e=>{const t=(e=>{const[t,n,r]=e.split(":");return"head"===t?"HEAD":"localBranch"===t||"remoteBranch"===t?r??null:null})(`${e}`);t&&E([t])},fillAvailableSpace:!0,showAsFocused:f,searchTerm:c,onSearchTermChange:m,keepSearchActiveOnBlur:!0,hideSpeedSearchPopup:!0,isSearchActive:!0},(e=>Ns[e.type](e))))}Ms.__docgenInfo={description:"",methods:[],displayName:"BranchesTree",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};const Vs="Git.DeleteBranch",Os="Git.Compare.With.Current",Gs="Git.Show.My.Branches",Hs="Git.Fetch",Ks="Git.Toggle.Favorite",$s=d.ZP.div.withConfig({displayName:"VcsBranchesView__StyledContainer",componentId:"sc-vamle4-0"})(["display:flex;height:100%;"]);function Qs(e){let{tabKey:t}=e;const n=(0,i.sJ)(Ss(t)),r=[{id:cr.GIT_UPDATE_SELECTED,title:"Update Selected",icon:a.createElement(R.vq,{icon:"actions/checkOut"}),actionPerformed:()=>{yt()}},{id:Vs,title:"Delete branch",icon:a.createElement(R.vq,{icon:"actions/gc"}),useShortcutsOf:"SafeDelete",actionPerformed:()=>{yt()}},{id:Os,title:"Compare with current",icon:a.createElement(R.vq,{icon:"actions/diff"}),useShortcutsOf:cr.SHOW_DIFF,actionPerformed:()=>{yt()}},{id:Gs,title:"Show My Branches",icon:a.createElement(R.vq,{icon:"actions/find"}),actionPerformed:()=>{yt()}},{id:Hs,title:"Fetch All Remotes",icon:a.createElement(R.vq,{icon:"vcs/fetch"}),actionPerformed:()=>{yt()}},{id:Ks,title:"Mark/Unmark as Favorite",icon:a.createElement(R.vq,{icon:"nodes/favorite"}),actionPerformed:()=>{yt()}},...(0,Lt.x)({treeRef:n})];return a.createElement(w.DG,{actions:r},(e=>{let{shortcutHandlerProps:n}=e;return a.createElement($s,n,a.createElement(js,null),a.createElement(Ms,{tabKey:t}))}))}const Us=(0,d.ZP)(No.o).withConfig({displayName:"VcsBranchesView__StyledToolbar",componentId:"sc-vamle4-1"})(["height:100%;flex-shrink:0;"]);function js(){return a.createElement(Us,{border:"right",orientation:"vertical"},a.createElement(Mt.K,{actionId:cr.GIT_LOG_HIDE_BRANCHES}),a.createElement(No.J,null),a.createElement(Mt.K,{actionId:cr.GIT_CREATE_NEW_BRANCH}),a.createElement(Mt.K,{actionId:cr.GIT_UPDATE_SELECTED}),a.createElement(Mt.K,{actionId:Vs}),a.createElement(Mt.K,{actionId:Os}),a.createElement(Mt.K,{actionId:Gs}),a.createElement(Mt.K,{actionId:Hs}),a.createElement(Mt.K,{actionId:Ks}),a.createElement(Mt.K,{actionId:cr.GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH}),a.createElement(No.J,null),a.createElement(Ds,null),a.createElement(Mt.K,{actionId:vt.$.EXPAND_ALL}),a.createElement(Mt.K,{actionId:vt.$.COLLAPSE_ALL}))}Qs.__docgenInfo={description:"",methods:[],displayName:"VcsBranchesView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};var qs=n(34273),Zs=n.n(qs);const Js=()=>{const e=(0,i._8)((e=>{let{snapshot:t}=e;return()=>{const e=t.getLoadable(va).getValue();Zs()(e.join(" ")).catch(console.error)}}),[]),t=(0,i._8)((e=>{let{refresh:t}=e;return()=>{t(fa)}}),[]);return[{id:cr.COPY_REVISION_NUMBER,title:"Copy Revision Number",icon:a.createElement(R.vq,{icon:"actions/copy.svg"}),useShortcutsOf:vt.$.COPY_REFERENCE,actionPerformed:e},{id:cr.LOG_REFRESH,title:"Refresh",icon:a.createElement(R.vq,{icon:"actions/refresh.svg"}),useShortcutsOf:vt.$.REFRESH,actionPerformed:()=>{t()}}]},zs=E.zo.div`
  min-height: 70%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 50px;
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  white-space: nowrap;
`;function Ws(){const e=(0,w.DI)();return a.createElement(zs,null,a.createElement("div",{style:{textAlign:"center"}},"To track changes to code:",a.createElement("br",null),a.createElement(At.r,{onPress:()=>e(cr.GIT_INIT)},"Create Git repository..."),a.createElement("br",null),a.createElement(At.r,{onPress:yt},"Use Local History..."),a.createElement("br",null),a.createElement("br",null),a.createElement(R.vq,{style:{verticalAlign:"text-top"},icon:"general/contextHelp.svg"})," ",a.createElement(At.r,{onPress:yt},"Version Control integration")," "))}Ws.__docgenInfo={description:"",methods:[],displayName:"VersionControlToolWindowZeroState"};const Ys=(0,i.cn)({key:"vcs/toolwindow/firstViewSize",default:.25}),Xs=(0,i.cn)({key:"vcs/toolwindow/lastViewSize",default:.35}),ec=E.zo.span`
  margin: 0 0.5rem 0 0.125rem;
`,tc=E.zo.div`
  height: 100%;
  display: flex;
  :focus-visible {
    outline: none;
  }
`,nc=(0,i.cn)({key:"vcs/toolWindow/searchInputRef",default:a.createRef(),dangerouslyAllowMutability:!0}),rc=()=>{const e=(0,i.sJ)(ea),[t,n]=(0,i.FV)(ta);return(0,i.sJ)(rt).length>0?a.createElement(Vn.y,{headerContent:a.createElement(ec,null,"Git:"),activeKey:t,onActiveKeyChange:e=>n(`${e}`)},e.map((e=>a.createElement(Vn.y.View,{tabContent:a.createElement(mc,{tabKey:e}),key:e},a.createElement(sc,{tabKey:e}))))):a.createElement(xt.n,{headerContent:"Version Control"},a.createElement(Ws,null))},oc=E.zo.button.attrs({tabIndex:-1})`
  box-sizing: border-box;
  all: unset;
  width: 1.71875rem;
  align-items: center;
  display: flex;
  flex-direction: column;
  padding: 0.5rem 0;
  gap: 0.625rem;
  background: ${e=>{let{theme:t}=e;return t.color("*.background")}};
  color: ${e=>{let{theme:t}=e;return t.color("*.foreground")}};
  :disabled {
    color: ${e=>{let{theme:t}=e;return t.color("Button.disabledText")}};
  }
  &:hover {
    background: ${e=>{let{theme:t}=e;return t.color("ToolWindow.Button.hoverBackground",t.dark?"#0f0f0f28":"#55555528")}};
  }
`,ac=(0,E.zo)(oc)`
  border-right: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.borderColor}};
`,ic=E.zo.span`
  writing-mode: vertical-lr;
  transform: rotateZ(180deg);
  font-size: 0.6875rem;
`;function lc(e){let{onPress:t}=e;return a.createElement(ac,{onClick:t},a.createElement(R.vq,{icon:"actions/arrowExpand"}),a.createElement(ic,null,"Branches"))}function sc(e){let{tabKey:t}=e;const[n,r]=(0,i.FV)(Ys),[o,l]=(0,i.FV)(Xs),s=function(){const e=(0,i.sJ)(nc),t=(0,i._8)((e=>{let{set:t,snapshot:n}=e;return()=>{t(aa(n.getLoadable(ta).getValue()),!1)}}),[]),n=cc(sa.matchCase),r=cc(sa.regExp),o=cc(ia);return[...Js(),{id:cr.FOCUS_TEXT_FILTER,title:"Focus Text Filter",actionPerformed:()=>{var t;null==(t=e.current)||t.focus()}},{id:cr.GIT_LOG_HIDE_BRANCHES,title:"Hide Git Branches",icon:a.createElement(R.vq,{icon:"actions/arrowCollapse"}),actionPerformed:t},{id:cr.MATCH_CASE,title:"Match Case",icon:a.createElement(R.vq,{icon:"actions/matchCase.svg"}),actionPerformed:n},{id:cr.REG_EXP,title:"Regex",icon:a.createElement(R.vq,{icon:"actions/regex"}),actionPerformed:r},{id:cr.SHOW_DETAILS,title:"Show Details",description:"Display details panel",actionPerformed:o},{id:cr.SHOW_DIFF_PREVIEW,title:"Show Diff Preview",description:"Show Diff Preview Panel",actionPerformed:()=>yt()}]}(),[c,m]=(0,i.FV)(aa(t)),u=c?{firstView:a.createElement(Qs,{tabKey:t}),firstSize:n,onFirstResize:r,firstViewMinSize:85}:{};return a.createElement(w.DG,{actions:s},(e=>{let{shortcutHandlerProps:n}=e;return a.createElement(tc,(0,p.Z)({},n,{tabIndex:c?-1:0}),!c&&a.createElement(lc,{onPress:()=>m(!0)}),a.createElement(Hn.D,(0,p.Z)({},u,{innerView:a.createElement(As,{tabKey:t}),innerViewMinSize:200,lastView:a.createElement(Cl,{tabKey:t}),lastSize:o,onLastResize:l,lastViewMinSize:40})))}))}function cc(e){return(0,i._8)((t=>{let{set:n,snapshot:r}=t;return()=>{n(e(r.getLoadable(ta).getValue()),(e=>!e))}}),[])}function mc(e){let{tabKey:t}=e;const n=(0,i._8)(ma,[]);return a.createElement(ui.v,{title:(0,i.sJ)(na(t)),closeButton:"MAIN"!==t&&a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Close Tab"})},a.createElement(_.W,{onPress:()=>n(t)}))})}rc.__docgenInfo={description:"",methods:[],displayName:"VersionControlToolWindow"};const uc=[{id:"Project",title:"Project",icon:a.createElement(R.vq,{icon:"toolwindows/toolWindowProject"}),content:a.createElement(Mn,null),initialState:(0,Dt.x5)({isVisible:!0,weight:.23})},{id:"Terminal",title:"Terminal",icon:a.createElement(R.vq,{icon:"toolwindows/toolWindowProject"}),content:a.createElement(xt.n,{headerContent:"Terminal"},a.createElement(_t,null)),initialState:(0,Dt.x5)({anchor:"bottom"})},{id:li,title:"Commit",icon:a.createElement(R.vq,{icon:"toolwindows/toolWindowCommit"}),content:a.createElement(a.Suspense,{fallback:a.createElement(mi,null)},a.createElement(ci,null)),initialState:(0,Dt.x5)({anchor:"left",isSplit:!0,isVisible:!1})},{id:"Version Control",title:"Version Control",icon:a.createElement(R.vq,{icon:"toolwindows/toolWindowChanges"}),content:a.createElement(a.Suspense,{fallback:a.createElement(mi,null)},a.createElement(rc,null)),initialState:(0,Dt.x5)({anchor:"bottom",weight:.35})}];var dc=n(14242),pc=n(20898),hc=n(68316);const gc=(0,i.cn)({key:"ide.statusbar.showProgressPanel",default:!1}),fc=(0,i.cn)({key:"ide.statusbar.tasksPopup",default:null});var Ac=n(43557),Ec=n(92338);const yc=d.ZP.div.withConfig({displayName:"TasksPopup__StyledPopupTitle",componentId:"sc-rjwznj-0"})(["flex:1;text-align:center;overflow:hidden;text-overflow:ellipsis;margin:0 0.625rem;"]);function vc(){const e=(0,i.Zl)(gc),t=(0,i.sJ)(Qo),n=Jo(),[r,o]=(0,i.FV)(fc);return a.createElement(Ec.GI,{bounds:r||{width:300,left:window.innerWidth-300-150,top:window.innerHeight-80*t.length-30-100},onBoundsChange:e=>{o(e)},minHeight:100,minWidth:300,nonDismissable:!0,interactions:"all"},a.createElement(Ec.GI.Layout,{header:a.createElement(Ec.GI.Header,{hasControls:!0},a.createElement(yc,null,"Background Tasks"),a.createElement(x.a,{tooltip:a.createElement(Ki.u,null,"Hide")},a.createElement(Mo.hU,{preventFocusOnPress:!0,excludeFromTabOrder:!0,onPress:()=>e(!1)},a.createElement(R.vq,{icon:"general/hideToolWindow"})))),content:a.createElement(a.Fragment,null,t.map(((e,r)=>a.createElement(a.Fragment,{key:e.id},a.createElement($l.ko,{style:{margin:".5rem 0.75rem"},name:e.title,isIndeterminate:e.progress.isIndeterminate,"aria-label":`Progress of ${e.title}`,details:e.progress.text||(e.progress.secondaryText?a.createElement(a.Fragment,null,"\xa0"):void 0),secondaryDetails:e.progress.secondaryText,value:e.progress.fraction,maxValue:1,button:e.isCancelable&&a.createElement(hc.b,{onPress:()=>n(e.id)})}),t[r+1]&&a.createElement(Ac.lX,null)))))}))}function bc(e){return a.createElement($l.ko,(0,p.Z)({dense:!0,namePosition:"side",width:146},e))}vc.__docgenInfo={description:"",methods:[],displayName:"TasksPopup"};const wc=d.ZP.span.withConfig({displayName:"StatusBarTaskProgressBar__Spacer",componentId:"sc-vrkr3d-0"})(["width:0.5rem;"]),Cc=d.ZP.span.withConfig({displayName:"StatusBarTaskProgressBar__StyledProgressBarButton",componentId:"sc-vrkr3d-1"})(["cursor:pointer;","{cursor:unset;}"],$l.ko.Container),kc=()=>{const e=(0,i.sJ)(Uo),t=(0,i.sJ)(jo),n=Jo(),[r,o]=(0,i.FV)(gc);return(0,a.useEffect)((()=>{0===t&&o(!1)}),[t]),a.createElement(a.Fragment,null,e&&!r&&a.createElement(x.a,{tooltip:a.createElement(Ki.u,null,`${e.title}. Click to see all running background tasks.`)},a.createElement(Dl.V,{preventFocusOnPress:!0,excludeFromTabOrder:!0,onPress:()=>{o(!0)}},a.createElement(Cc,null,a.createElement(bc,{name:e.progress.text||e.title,isIndeterminate:e.progress.isIndeterminate,value:e.progress.fraction,maxValue:1,button:a.createElement(a.Fragment,null,e.isCancelable&&a.createElement(x.a,{tooltip:a.createElement(Ki.u,null,"Cancel")},a.createElement(hc.b,{small:!0,onPress:()=>n(e.id)})))})))),(t>1||r)&&a.createElement(a.Fragment,null,a.createElement(wc,null),a.createElement(At.r,{onPress:()=>o((e=>!e))},r?"Hide processes":"Show all"," (",t,")")),r&&t>0&&a.createElement(vc,null))};kc.__docgenInfo={description:'Intentionally, "processes" haven\'t been abstracted as an extension point for different features, since the focus\nhere is not to create an IDE, but to demo UI components.',methods:[],displayName:"StatusBarTaskProgressBar"};var Sc=n(30906);const Ic=(0,i.nZ)({key:"vcs/activeFileRepo",get:e=>{var t,n;let{get:r}=e;const o=null==(t=r(Oe))?void 0:t.filePath;return(o&&r(at(o)))??(null==(n=r(rt)[0])?void 0:n.dir)}}),Bc=(0,i.nZ)({key:"vcs/activeFileRepoBranches",get:e=>{let{get:t}=e;const n=t(Ic);return t(no(n))}}),Tc=(0,i.nZ)({key:"vcs/activeFileCurrentBranch",get:e=>{var t;let{get:n}=e;const r=null==(t=n(Oe))?void 0:t.filePath;return r?ao(r):null}}),Rc=(0,i.nZ)({key:"vcs/activeFileRepoHead",get:async e=>{let{get:t}=e;const n=t(Tc);if(n)return{detached:!1,head:n};const r=t(Ic);return{detached:!0,head:await(0,l.qq)({fs:se,dir:r,ref:"HEAD"})}}});var Pc=n(31132),Dc=n(78766),xc=n(24103);function Nc(e,t){return e.remoteBranches.some((e=>`${e.remote}/${e.name}`===t))?"CLASHING_WITH_REMOTE":e.localBranches.some((e=>{let{name:n}=e;return n===t}))?"EXISTING":null}const Fc=new RegExp(`(^\\.)|(^-)|(^/)|(\\.\\.)+|[ ~:^?*\\[\\\\]+|(@\\{)+|[${Array(32).fill(null).map(((e,t)=>String.fromCharCode(t))).join("")}u007F]`);function _c(e){return e.replace(Fc,"_")}const Lc=E.zo.div`
  padding: 0.5rem 1rem;
`,Mc=(0,E.zo)(xc.U)`
  width: 100%;
`,Vc={EXISTING:e=>a.createElement(a.Fragment,null,"Branch name ",e," already exists ",a.createElement("br",null)),CLASHING_WITH_REMOTE:e=>a.createElement(a.Fragment,null,"Branch name ",e," clashes with remote branch ",a.createElement("br",null),"with the same name")};function Oc(e){var t;let{branchName:n,repoRoot:r,close:o}=e;const[s,c]=(0,a.useState)(n),[m,u]=(0,a.useState)(!1),d=(0,v.L)(),p=(0,i.sJ)(no(r)),h=function(){const e=Ao();return(0,i._8)((t=>{let{refresh:n,snapshot:r}=t;return async(t,o,a)=>{await(0,l.R_)({fs:se,dir:t,oldref:o,ref:a}),n(no(t));const i={branchType:"LOCAL",branchName:o,repoRoot:t};fo(r.getLoadable(uo).getValue(),r.getLoadable(ho).getValue(),i)&&(e(i,!1),e({...i,branchName:a},!0))}}),[])}(),g=Nc(p,s),f=g&&m?"error":"valid";return a.createElement(An.Du,{minWidth:"content",minHeight:"content"},a.createElement(En.b,{header:`Rename branch ${n}`,content:a.createElement(Lc,null,a.createElement("form",{id:"branch_rename_form",onSubmit:e=>{e.preventDefault(),g?u(!0):h(p.repoRoot,n,s).catch((e=>{d.show({icon:"Error",title:"Unexpected error",body:`Could not rename branch ${n} to ${s}.`}),console.error("Branch rename error: ",e)})).then((()=>{o()}))}},a.createElement(Mc,{labelPlacement:"above",label:"New branch name:",value:s,onChange:e=>{c(_c(e)),u(!0)},validationState:f,validationMessage:g&&"error"===f?null==(t=Vc[g])?void 0:t.call(Vc,n):void 0}))),footer:a.createElement(En.b.Footer,{right:a.createElement(a.Fragment,null,a.createElement(vn.z,{onPress:o},"Cancel"),a.createElement(vn.z,{variant:"default",type:"submit",form:"branch_rename_form",isDisabled:Boolean(g)&&m},"Rename"))})}))}Oc.__docgenInfo={description:"",methods:[],displayName:"RenameBranchWindow",props:{branchName:{required:!0,tsType:{name:"string"},description:""},repoRoot:{required:!0,tsType:{name:"string"},description:""},close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Gc=E.zo.div`
  box-sizing: border-box;
  padding: 0 0.375rem;
  display: flex;
  align-items: center;
  width: 100%;
`,Hc=E.zo.div`
  flex: 1;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  margin: 0 0.625rem;
`,Kc=(0,i.cn)({key:"branchesPopup.bounds",default:void 0});function $c(e){let{close:t}=e;const[n]=ye(oo),[r,s]=(0,i.FV)(Kc),[c,u]=(0,a.useState)(r??{}),d=(0,w.BH)(cr.GIT_CREATE_NEW_BRANCH),p=(0,i._8)((e=>{let{refresh:t}=e;return(e,n)=>(0,l.NA)({fs:se,dir:e,ref:n}).then((()=>{t(no(e))}))}),[]),h=(0,v.L)(),g=(0,m.S)(),f=(0,i._8)((e=>async(t,n,r)=>{const{refresh:o,snapshot:a,set:i}=e,s=ge(e);await(0,l.JE)({fs:se,dir:t,remote:r,ref:n}),o(no(t)),o(he(t));const c=a.getLoadable(Me).getValue(),m=await Yr((async e=>{let{filePath:t}=e;const n=await se.promises.exists(t);return n&&await s(t),n}),c);i(Me,m)}),[]),{isFavorite:A,toggleFavorite:E}=Eo();if(!n)return null;const y=1===n.length?`Git Branches in ${o().basename(n[0].repoRoot)}`:"Git Branches";return a.createElement(Ec.GI,{interactions:"all",minHeight:55,minWidth:300,bounds:c,onBoundsChange:(e,t)=>{"resize"===t&&s({width:e.width,height:e.height}),u(e)}},a.createElement(Pc.F,{header:a.createElement(Ec.GI.Header,{hasControls:!0},a.createElement(Gc,null,a.createElement(Hc,null,y),a.createElement(No.o,null,a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Fetch"})},a.createElement(Mo.hU,{onPress:()=>{yt(),t()}},a.createElement(R.vq,{icon:"vcs/fetch.svg"}))),a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:"Restore Popup Size"})},a.createElement(Mo.hU,{isDisabled:void 0===r,onPress:()=>{s(void 0),u((e=>{let{width:t,height:n,...r}=e;return{...r}}))}},a.createElement(R.vq,{icon:"general/fitContent.svg"})))))),content:a.createElement(_o.w,{"aria-label":y,submenuBehavior:"toggleOnPress",fillAvailableSpace:!0,autoFocus:"first",disabledKeys:n.flatMap((e=>{let{localBranches:t,repoRoot:n}=e;return t.filter((e=>{let{trackingBranch:t}=e;return!t})).map((e=>{let{name:t}=e;return`${n}/pull-${t}`}))})),onAction:e=>{const[t,r,o]=`${e}`.split("//");async function i(e){try{await e()}catch(t){t instanceof l.D1.CheckoutConflictError?h.show({icon:"Error",title:"Git Checkout Problem",body:t.message}):h.show({icon:"Error",title:"Checkout failed",body:`Could not checkout branch ${r}`})}}if(e===(null==d?void 0:d.id))return null==d?void 0:d.perform();switch(o){case"delete":return p(t,r).then((()=>{h.show({title:`Deleted branch: ${r}`,icon:"Info",actions:a.createElement(Dc.g,{onPress:yt},"Restore")})}),(()=>{h.show({title:`Could not deleted branch: ${r}`,icon:"Error"})}));case"rename":return g.open((e=>{let{close:n}=e;return a.createElement(Oc,{repoRoot:t,branchName:r,close:n})}));case"checkout":return i((()=>f(t,r)));case"remote-checkout":return function(){var e;const o=null==n||null==(e=n.find((e=>{let{repoRoot:n}=e;return n===t})))?void 0:e.remoteBranches.find((e=>{let{name:t,remote:n}=e;return`${n}/${t}`===r}));if(o)return i((()=>f(t,o.name,o.remote)))}();default:return yt()}},onClose:t},d&&a.createElement(B.c,{key:d.id,textValue:d.title},a.createElement(D._,{icon:d.icon,content:d.title})),a.createElement(B.c,{key:"checkout_revision"},"Checkout Tag or Revision..."),n.flatMap((e=>{let{remoteBranches:t,localBranches:r,repoRoot:i,currentBranch:l}=e;const s=(e,t)=>n.length>1?`${e} in ${o().basename(t)}`:e,c=(e,t)=>[!t&&a.createElement(B.c,{key:`${i}//${e}//compare-with-branch`},`Compare with '${e}'`),a.createElement(B.c,{key:`${i}//${e}//show-diff-with-working-tree`},"Show Diff with Working Tree"),a.createElement(tn.i,{key:"compare-actions-divider"})],m=(e,t)=>t&&e!==t&&[a.createElement(B.c,{key:`${i}//${e}//rebase-current-onto`},`Rebase '${t}' onto '${e}'`),a.createElement(B.c,{key:`${i}//${e}//merge-into-current`},`Merge '${e}' onto '${t}'`),a.createElement(tn.i,{key:"merge-actions-divider"})];return[a.createElement(Vo.$0,{key:`${i}//local_branches`,title:s("Local Branches",i)},r.map((e=>{let{name:t,trackingBranch:n}=e;const r=t===(null==l?void 0:l.name),o={branchName:t,branchType:"LOCAL",repoRoot:i};return a.createElement(B.c,{key:`${i}//${t}`,textValue:t,title:a.createElement(D._,{content:t,icon:a.createElement(Vl,{isFavorite:A(o),isCurrent:r,onClick:()=>{E(o)}}),shortcut:n&&a.createElement(Jt.e.Hint,{small:!0},n)})},!r&&a.createElement(B.c,{key:`${i}//${t}//checkout`},"Checkout"),a.createElement(B.c,{key:`${i}//${t}//new-branch-from`},`New Branch from '${t}'...`),!r&&a.createElement(B.c,{key:`${i}//${t}//checkout-and-rebase-onto`},`Checkout and rebase onto '${t}'`),a.createElement(tn.i,{key:"new-branch-actions-divider"}),c(t,r),m(t,null==l?void 0:l.name),a.createElement(B.c,{key:`${i}//${t}//pull`},"Update"),a.createElement(B.c,{key:`${i}//${t}//push`},"Push..."),a.createElement(tn.i,{key:"push-divider"}),a.createElement(B.c,{key:`${i}//${t}//rename`},"Rename..."),!r&&a.createElement(B.c,{key:`${i}//${t}//delete`},"Delete"))}))),a.createElement(Vo.$0,{key:`${i}//remote_branches`,title:s("Remote Branches",i)},t.map((e=>{const t=`${e.remote}/${e.name}`,n={branchName:t,branchType:"REMOTE",repoRoot:i};return a.createElement(B.c,{key:`${i}//${t}`,textValue:t,title:a.createElement(D._,{content:t,icon:a.createElement(Vl,{isFavorite:A(n),onClick:()=>{E(n)}})})},a.createElement(B.c,{key:`${i}//${t}//remote-checkout`},"Checkout"),a.createElement(B.c,{key:`${i}//${t}//new-branch-from`},`New Branch from '${t}'...`),a.createElement(B.c,{key:`${i}//${t}//checkout-and-rebase-onto`},`Checkout and rebase onto '${t}'`),a.createElement(tn.i,{key:"new-branch-actions-divider"}),c(t,!1),m(t,null==l?void 0:l.name),a.createElement(B.c,{key:`${i}//${t}//pull-into-using-merge`},`Pull into '${t}' Using Merge`),a.createElement(B.c,{key:`${i}//${t}//pull-into-using-rebase`},`Pull into '${t}' Using Rebase`),a.createElement(tn.i,null),a.createElement(B.c,{key:`${i}//${t}//delete`},"Delete"))})))]})))}))}$c.__docgenInfo={description:"",methods:[],displayName:"BranchesPopup",props:{close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var Qc=n(35471);const Uc=d.ZP.div.withConfig({displayName:"ProjectInitializer__StyledDialog",componentId:"sc-1x9ty0i-0"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:",";color:",";",";text-align:center;line-height:1.5;"],(e=>{let{theme:t}=e;return t.color("*.background")}),(e=>{let{theme:t}=e;return t.color("*.foreground")}),Qc.s),jc=d.ZP.div.withConfig({displayName:"ProjectInitializer__StyledDialogHeader",componentId:"sc-1x9ty0i-1"})(["background:",";padding:4px;text-align:center;"],(e=>{let{theme:t}=e;return t.color("Popup.Header.activeBackground")})),qc=d.ZP.div.withConfig({displayName:"ProjectInitializer__StyledDialogContent",componentId:"sc-1x9ty0i-2"})(["padding:8px 16px;"]);async function Zc(e){try{if(!(await se.promises.stat(e)).isDirectory())return console.info(`Already cloned repo was not found. "${e}" is not a directory.`),!1;const t=await se.promises.readdir(e);if(1===t.length&&".git"===t[0])return console.info(`Already cloned repo was not found at "${e}". ".git" folder exists, but it's not successfully unpacked.`),!1}catch(t){return console.info(`Already cloned repo was not found at "${e}".`),!1}return!0}const Jc=e=>{let{children:t,autoCloneSampleRepo:n=!1}=e;const[r,i]=(0,a.useState)("uninitialized");return(0,a.useEffect)((()=>{!async function(){await ie(se.promises,Se.path);const e=window.INITIALIZE_APP;try{e?(console.log("external initialization..."),await e({fs:se,git:l.ZP,path:o(),projectDir:Se.path})):n&&await async function(e,t){await Zc(e)||(i("cloning"),await zc({dir:e,url:t}))}(ke.path,ke.url),console.log("demo repo initialized"),i("initialized")}catch(t){console.error("could not initialize the demo repo",t),i("error")}}()}),[]),"uninitialized"===r?null:"initialized"===r?a.createElement(a.Fragment,null,t):a.createElement("div",{style:{minHeight:"100vh",position:"relative"}},a.createElement(Uc,null,a.createElement(jc,null,"Cloning sample repo"),a.createElement(qc,null,"cloning"===r?a.createElement(a.Fragment,null,"Cloning ",a.createElement("b",null,ke.url),". ",a.createElement("br",null),"It may take several seconds."):a.createElement(a.Fragment,null,"Something went wrong!"))))};async function zc(e){let{dir:t,url:n,onProgress:r}=e;console.log("cloning repo: "),await(0,l.d9)({fs:se,url:n,http:s.Z,corsProxy:"https://cors.isomorphic-git.org",dir:t,onProgress:r,singleBranch:!0})}Jc.__docgenInfo={description:"",methods:[],displayName:"ProjectInitializer",props:{autoCloneSampleRepo:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};let Wc=!1;const Yc=()=>{const e=(0,v.L)(),t=Zo(),n=(0,i.C)(Te),r=(()=>{const e=(0,i.Zl)(rt);return()=>ot().then((t=>{e(t)}))})();return(0,i._8)((o=>{let{reset:i}=o;return async()=>{await Zc(Ce.ExampleRepo.path)||Wc||(Wc=!0,e.showSticky({title:"Clone another repo",icon:a.createElement(R.vq,{icon:"actions/quickfixOffBulb.svg"}),body:"Git integration in the example app supports multiple repos within the same project. See it in action by cloning another repo",actions:a.createElement(a.Fragment,null,a.createElement(Dc.g,{onPress:()=>{t({title:`Cloning source repository ${Ce.ExampleRepo.url}`},{run:async t=>{let{setIndeterminate:o,setFraction:a,setSecondaryText:i}=t;await zc({dir:Ce.ExampleRepo.path,url:Ce.ExampleRepo.url,onProgress:e=>{if(e.total){const t=e.loaded/e.total;a(t),i(`${e.phase}: ${Math.round(100*t)}% ${e.loaded}/${e.total}`)}else i(e.phase),o(!0)}}).then((()=>{r(),n()}),(t=>{e.show({icon:"Error",title:"Clone failed",body:`Failed to clone git repo "${Ce.ExampleRepo.url} into ${Ce.ExampleRepo.path}: ${t}"`})}))}})}},"Clone example-repo"))}))}}),[])};function Xc(){const[e]=ye(Rc),t=Yc();return e&&a.createElement(Sc.q,{placement:"top",onOpenChange:e=>{e||setTimeout(t,500)},popup:e=>{let{close:t}=e;return a.createElement($c,{close:t})}},a.createElement(x.a,{tooltip:a.createElement(N.M,{actionName:e.detached?"Git: Detached HEAD doesn't point to any branch":`Git Branch: ${e.head}`})},a.createElement(pc.V,{icon:a.createElement(R.vq,{icon:e.detached?"general/warning.svg":"vcs/branch.svg"}),label:e.head.slice(0,e.detached?8:void 0)})))}Xc.__docgenInfo={description:"",methods:[],displayName:"BranchPopupTrigger"};const em=d.ZP.div.withConfig({displayName:"IdeStatusBar__StyledLastMessage",componentId:"sc-1hz1fp-0"})(["margin-left:0.75rem;cursor:pointer;"]),tm=()=>{const e=(0,i.sJ)(Ge);return a.createElement(dc.A,{left:a.createElement(a.Fragment,null,a.createElement(R.vq,{icon:"general/tbHidden.svg",role:"button",onClick:yt}),a.createElement(em,null,"Tooltip content or last message will show up here.")),right:a.createElement(a.Fragment,null,a.createElement(kc,null),a.createElement(pc.V,{onPress:yt,label:"LF"}),a.createElement(pc.V,{onPress:yt,label:`${e.lineNumber},${e.column}`}),a.createElement(pc.V,{label:"UTF-8"}),a.createElement(Pl.b,{renderMenu:e=>{let{menuProps:t}=e;return a.createElement(I.v2,(0,p.Z)({},t,{onAction:yt}),a.createElement(B.c,null,"Configure Indents for Typescript"),a.createElement(B.c,null,"Disable Indents Detection for Project"))}},((e,t)=>a.createElement(pc.V,(0,p.Z)({},e,{ref:t,label:"2 spaces"})))),a.createElement(Pl.b,{renderMenu:e=>{let{menuProps:t}=e;return a.createElement(I.v2,(0,p.Z)({},t,{onAction:yt}),a.createElement(B.c,{title:"Compile"},a.createElement(B.c,null,"packages/jui/tsconfig.json"),a.createElement(B.c,null,"packages/jui/src/StatusBar/StatusBar.stories.tsx"),a.createElement(B.c,null,"Compile All")),a.createElement(tn.i,null),a.createElement(B.c,null,a.createElement(D._,{icon:a.createElement(R.vq,{icon:"javaee/updateRunningApplication.svg"}),content:"Restart Typescript Service"})),a.createElement(B.c,null,a.createElement(D._,{icon:a.createElement(R.vq,{icon:"general/settings.svg"}),content:"Configure Typescript..."})))}},((e,t)=>a.createElement(pc.V,(0,p.Z)({},e,{ref:t,label:"TypeScript 4.4.3"})))),a.createElement(Xc,null),a.createElement(pc.V,{icon:a.createElement(R.vq,{icon:"ide/readwrite.svg"})}),a.createElement(pc.V,{icon:a.createElement(R.vq,{icon:"ide/fatalError.svg"})}))})};tm.__docgenInfo={description:"",methods:[],displayName:"IdeStatusBar"};var nm=n(6468);const rm=()=>a.createElement(I.v2,{disabledKeys:["showDiff"],"aria-label":"Context menu",onAction:yt},a.createElement(B.c,{key:"showDiff",textValue:"Show Diff"},a.createElement(D._,{icon:a.createElement(R.vq,{icon:"actions/diff.svg"}),content:"Show Diff"})));rm.__docgenInfo={description:"",methods:[],displayName:"RollbackTreeContextMenu"};const om=E.zo.div`
  box-sizing: border-box;
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 1rem 0.75rem 0;
`,am=E.zo.div`
  border: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.contrastBorder}};
  flex: 1;
  overflow: auto;
`,im=E.zo.div`
  &:not(:empty) {
    line-height: 1.5;
    padding-left: 0.375rem;
    margin-bottom: 0.75rem;
  }
`;function lm(){const e=(0,i.sJ)(Cr.initiallyExpandedKeys),t=(0,i.sJ)(Cr.initiallyIncludedChanges).map(or),{fileCountsMap:n}=(0,i.sJ)(Gr),[r,s]=(0,i.FV)(Cr.windowBounds),c=(0,i.sJ)(Cr.rootNodes),[m,u]=(0,a.useState)(new Set(t.slice(0,1))),[d,h]=(0,a.useState)(e),[g,f]=(0,a.useState)(new Set(t)),A=(0,nm.T)({rootNodes:c,getKey:e=>e.key,getChildren:e=>ir(e)?e.children:null},{selectedKeys:g,onSelectedKeysChange:f}),E=(0,i.sJ)(Zn).filter((e=>g.has(or(e)))),y=(()=>{const e=ut();return(0,i._8)((t=>async(n,r)=>{const{snapshot:a,refresh:i}=t,s=ge(t),c=(await Promise.all(n.filter((e=>!Qn.revision(e).isDir)).map((async e=>{const t=await a.getPromise(at(Qn.path(e)));if(t)return{repoRoot:t,change:e,relativePath:o().relative(t,Qn.path(e))}})))).filter(We.N),m=(0,$n.Z)((e=>{let{repoRoot:t}=e;return t}),c);await Promise.all(Object.entries(m).map((async t=>{let[c,m]=t;const{toReset:u=[],toCheckout:d=[]}=(0,$n.Z)((e=>{let{change:{type:t}}=e;return"ADDED"!==t||r?"toCheckout":"toReset"}),m);if(await Promise.allSettled(u.map((e=>{let{relativePath:t}=e;return(0,l.us)({fs:se,dir:c,filepath:t})}))),d.length>0&&(await l.ZP.resolveRef({fs:se,dir:c,ref:"HEAD"}).catch((()=>null))?await(0,l.JE)({fs:se,dir:c,force:!0,filepaths:d.map((e=>{let{relativePath:t,change:{type:n}}=e;return t}))}):await Promise.all(d.filter((e=>{let{change:t}=e;return"ADDED"===t.type})).map((e=>{let{change:t}=e;const n=Qn.path(t);return se.promises.unlink(n)})))),r){const e=await a.getPromise(Ze);n.filter(Qn.isAddition).forEach((t=>{e.closePath(Qn.path(t))}))}Cn(m.flatMap((e=>{let{change:t}=e;return"MODIFIED"===t.type?[]:"MOVED"===t.type?[t.before.path,t.after.path]:Qn.path(t)}))).map(o().dirname).forEach((e=>i(he(e)))),await Promise.allSettled(m.map((async t=>{let{relativePath:n,change:r}=t;const o=Qn.path(r);await s(o),await(0,l.us)({fs:se,dir:c,filepath:n}),await e(o)})))})))}),[])})(),b=(0,v.L)(),C=(0,i.Zl)(Cr.isOpen),k=()=>C(!1),T=(0,a.useRef)(null),P=(0,Lt.x)({treeRef:T}),[D,x]=(0,a.useState)(!1),N=E.some((e=>"ADDED"===e.type));return a.createElement(An.Du,{onClose:k,bounds:r,onBoundsChange:s,minHeight:200,minWidth:275},a.createElement(En.b,{header:"Rollback changes",content:a.createElement(w.DG,{actions:P},(e=>{let{shortcutHandlerProps:t}=e;return a.createElement(om,t,a.createElement("div",{style:{display:"flex"}},a.createElement(No.o,null,a.createElement(Mo.hU,{isDisabled:!0},a.createElement(R.vq,{icon:"actions/diff"})),a.createElement(Fo.p,{renderMenu:e=>{let{menuProps:t}=e;return a.createElement(I.v2,(0,p.Z)({},t,{selectedKeys:[],onAction:yt}),a.createElement(Vo.$0,{title:"Group By"},dr.map((e=>a.createElement(B.c,{key:e.id},e.title)))))}},a.createElement(R.vq,{icon:"actions/groupBy.svg"}))),a.createElement("span",{style:{flex:1}}),a.createElement(No.o,null,a.createElement(Mt.K,{actionId:vt.$.EXPAND_ALL}),a.createElement(Mt.K,{actionId:vt.$.COLLAPSE_ALL}))),a.createElement(am,null,a.createElement(S.X,{renderMenu:()=>a.createElement(rm,null),style:{height:"100%"}},a.createElement(Jr.G,{treeRef:T,items:c,selectionMode:"multiple",selectedKeys:m,onSelectionChange:u,expandedKeys:d,onExpandedChange:h,nestedSelection:A,fillAvailableSpace:!0},(e=>{var t;const r=Po.getItemProps({node:e,fileCountsMap:n});return a.createElement(B.c,r,0!==(null==(t=e.children)?void 0:t.length)&&a.createElement(zr.x,{selectionState:A.getSelectionState(e),onToggle:()=>A.toggle(e)}),r.children)})))))})),footer:a.createElement(a.Fragment,null,a.createElement("div",{style:{padding:".5rem 0.75rem 0",display:"flex",flexDirection:"column"}},a.createElement(im,null,a.createElement(Oa,{changes:E})),a.createElement(yn.X,{isDisabled:!N,isSelected:D,onChange:x,mnemonic:"D"},"Delete local copies of the added files")),a.createElement(En.b.Footer,{right:a.createElement(a.Fragment,null,a.createElement(vn.z,{onPress:k,mnemonic:"C"},"Close"),a.createElement(vn.z,{variant:"default",mnemonic:"R",isDisabled:0===E.length,onPress:()=>{y(E,D).catch((e=>{b.show({title:"Reverting changes failed",icon:"Error",body:"Could not revert selected changes. See console for more info"}),console.error("Git revert error:",e)})).finally(k)}},"Rollback"))}))}))}lm.__docgenInfo={description:"",methods:[],displayName:"RollbackWindow"};const sm=(0,i.cn)({key:"toolWindows",default:new Dt.iC(Object.fromEntries(uc.map((e=>{let{id:t,initialState:n}=e;return[t,n]}))),{removedFromSideBarIds:uc.filter((e=>{let{showStripeButton:t}=e;return!1===t})).map((e=>{let{id:t}=e;return t}))})});var cm=n(24242),mm=n(77305),um=n(86094);const dm=[{actionId:vt.$.EXPAND_SELECTION,title:"Press $shortcut to expand selection"},{actionId:vt.$.SHRINK_SELECTION,title:"Press $shortcut to shrink selection"}],pm=()=>{const e=(0,c.og)(),t=(0,a.useMemo)((()=>dm.map((t=>{var n;let{actionId:r,title:o}=t;return{keyboardShortcut:null==e||null==(n=e[r])?void 0:n.find((e=>"keyboard"===e.type)),title:o}})).filter((e=>{let{keyboardShortcut:t}=e;return t})).map((e=>{let{keyboardShortcut:t,title:n}=e;return n.replace("$shortcut",(0,um.W)(t))}))),[e]),[n,r]=(0,a.useState)(Math.floor(Math.random()*t.length));return{current:t[n],next:()=>{const e=Math.floor(Math.random()*(t.length-1)),o=e<n?e:e+1;console.log("changing index to",o,"tmpIndex",e),r(o)}}},hm=a.forwardRef((function(e,t){const n=(0,ft.B3)(t),{focusableProps:r}=(0,mm.kc)({autoFocus:e.autoFocus},n);return a.createElement("input",(0,p.Z)({},(0,ft.dG)(r,e),{ref:n}))}));hm.__docgenInfo={description:"",methods:[],displayName:"Input"};const gm={isOpen:(0,i.cn)({key:"search.everywhere.isOpen",default:!1}),tab:(0,i.cn)({key:"search.everywhere.tab",default:"All"}),contextElement:(0,i.cn)({key:"search.everywhere.contextElement",default:void 0}),initialSearchQuery:(0,i.xu)({key:"search.everywhere.initialQuery",default:""}),bounds:(0,i.cn)({key:"search.everywhere.bounds",default:null})};function fm(e){let{hasContent:t,persistedBoundsState:n,noContentHeight:r,minHeight:o,...l}=e;const s=(0,i.Zl)(n),c=be(n,{top:150,height:Math.max(200,window.innerHeight-300)}),[m,u]=(0,a.useState)(c),d=(0,a.useRef)(m.height);return(0,a.useEffect)((()=>{u((e=>({...e,height:t?d.current:r})))}),[t]),a.createElement(Ec.GI,(0,p.Z)({},l,{bounds:m,onBoundsChange:e=>{t&&(d.current=e.height,s(e)),u(e)},minHeight:t?o:r}))}fm.__docgenInfo={description:"A special type of popup, where the content can be toggled on and off. Needed only for SearchEveryWhere at the moment,\nbut extracted as a component, to collocate related pieces, rather than leave them with the rest of the code in the\ncomponent.\n- Updates persisted {@param boundsState}, when the bounds are changed, only if the content is shown when the bounds\n  is changed.\n- Minimizes the popup into {@param noContentHeight}, when {@param hasContent} is `false`.\n- Restores the popup height to it's latest value, or based on content, when {@param hasContent} changes to `true`.\n- Returns the right to be applied based on the input {@param minHeight} and {@param hasContent}.",methods:[],displayName:"ContentAwarePopup",props:{hasContent:{required:!0,tsType:{name:"boolean"},description:"Whether the popup has content. If `false`, the popup is minimized to `noContentHeight`."},noContentHeight:{required:!0,tsType:{name:"number"},description:"The minimized height of the popup, when there is no content."},persistedBoundsState:{required:!0,tsType:{name:"RecoilState",elements:[{name:"union",raw:"Partial<Bounds> | null",elements:[{name:"Partial",elements:[{name:"Bounds"}],raw:"Partial<Bounds>"},{name:"null"}]}],raw:"RecoilState<Partial<Bounds> | null>"},description:"Persisted state of the popup bounds, in form of a recoil state."}}};var Am=n(77629),Em=n(35256),ym=n(85392);const vm=E.zo.span`
  width: 0.9375rem;
  margin-right: 0.25rem;
  display: inline-flex;
  justify-content: center;
`,bm=(0,E.zo)(Jt.e)`
  min-height: 1.375rem;
  width: 100%;
  padding: 0;
`,wm=E.zo.span`
  color: ${e=>{let{theme:t,isDisabled:n}=e;return n&&t.currentForegroundAware(t.commonColors.inactiveTextColor)}};
`,Cm=E.zo.div`
  flex: 1;
`;function km(e){let{action:t,highlights:n}=e;const{isSelected:r}=(0,a.useContext)(Wt.k)||{};return a.createElement(bm,null,a.createElement(vm,null,t.icon),a.createElement(wm,{isDisabled:t.isDisabled},r?a.createElement(Em.x,{highlights:n},t.title):t.title),a.createElement(Jt.e.Hint,{style:{fontSize:".85em",fontWeight:"bold"}},t.shortcut),a.createElement(Cm,null),a.createElement(Jt.e.Hint,{style:{marginRight:"-0.375rem"}},function(e,t){let n=(0,ym.nf)(e)?e.parent:null;const r=[];for(;n;)r.unshift(t?n[t]:n),n=n.parent;return r}(t,"title").join(" | ")))}km.__docgenInfo={description:"UI of actions in SearchEverywhere list",methods:[],displayName:"ActionItem",props:{action:{required:!0,tsType:{name:"Action"},description:""},highlights:{required:!0,tsType:{name:"union",raw:"null | TextRange[]",elements:[{name:"null"},{name:"Array",elements:[{name:"TextRange"}],raw:"TextRange[]"}]},description:""}}};const Sm={id:"Actions",title:"Actions",actionId:vt.$.GO_TO_ACTION,use:e=>{let{everyWhereAutoSet:t}=e;const n=(0,i.sJ)(gm.contextElement),[r,o]=(0,a.useState)(null),l=(0,a.useMemo)((()=>n?(0,w.C9)(n):[]),[n]),s=r??t,c=[{id:vt.$.SHOW_INTENTION_ACTIONS,title:"Assign a shortcut",actionPerformed:yt}];return{search:e=>{const t=l.map((t=>({highlights:(0,Am.M)(t.title,e),action:t}))).filter((t=>{let{action:n,highlights:r}=t;return r||(0,Am.M)(n.description||"",e)}));return s?t:t.filter((e=>{let{action:t}=e;return!t.isDisabled}))},searchDeps:[s],isEverywhere:s,toggleEverywhere:()=>{o((e=>!e))},searchAdvertiser:a.createElement(bt.i,{actionId:vt.$.SHOW_INTENTION_ACTIONS},(e=>`Press ${e} to assign a shortcut`)),headerFilters:a.createElement(yn.X,{preventFocus:!0,isSelected:s,onChange:e=>{o(e)}},"Include disabled actions"),actions:c,processSelectedItem(e){let{action:t}=e;null==t||t.perform({event:null,element:n})},getKey:e=>{let{action:t}=e;return t.id},getItemText(e){let{action:{title:t}}=e;return t},renderItem(e){let{action:t,highlights:n}=e;return a.createElement(km,{action:t,highlights:n})}}}};var Im=n(65617);function Bm(e){let{file:t,matches:n}=e;const{isSelected:r}=(0,a.useContext)(Wt.k)||{},i=t.name,l=o().dirname(t.relativePath),[s,c]=(0,Im.Z)((e=>e.from>=l.length),n||[]),m=c.map((e=>{let{from:t,to:n}=e;return{from:t-l.length,to:n-l.length}}));return a.createElement(bm,null,a.createElement(vm,null,a.createElement(R.vq,{icon:G(t.path)})),a.createElement(wm,null,r?a.createElement(Em.x,{highlights:m},i):i),a.createElement(Jt.e.Hint,null,r?a.createElement(Em.x,{highlights:s},l):l))}Bm.__docgenInfo={description:"UI of paths in SearchEverywhere list.",methods:[],displayName:"FileItem",props:{file:{required:!0,tsType:{name:"ProjectFsItem"},description:""},matches:{required:!0,tsType:{name:"union",raw:"null | TextRange[]",elements:[{name:"null"},{name:"Array",elements:[{name:"TextRange"}],raw:"TextRange[]"}]},description:"matches on file.relativePath"}}};const Tm={id:"Files",title:"Files",actionId:vt.$.GO_TO_FILE,use:()=>{const e=(0,i._8)((e=>{let{snapshot:t}=e;return()=>t.getLoadable(Te).getValue()}),[]),{openPath:t}=Je(),n=qt();return{search:t=>e().map((e=>({matches:(0,Am.M)(e.relativePath,t),file:e}))).filter((e=>{let{matches:t}=e;return null==t?void 0:t.length})),searchDeps:[],isEverywhere:!0,processSelectedItem(e){let{file:r}=e;"file"===(null==r?void 0:r.type)&&t(r.path,!0),"dir"===(null==r?void 0:r.type)&&n(r.path)},getKey(e){let{file:t}=e;return t.path},renderItem(e){let{file:t,matches:n}=e;return a.createElement(Bm,{file:t,matches:n})},getItemText(e){let{file:{relativePath:t}}=e;return t}}}},Rm="SearchEverywhere.PrevTab",Pm="SearchEverywhere.NextTab",Dm=E.zo.div`
  display: flex;
  width: 100%;
  background: ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.Header.background")}};
  border-bottom: 1px solid
    ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.SearchField.borderColor")}};
`,xm=E.zo.button`
  all: unset;
  background: ${e=>{let{theme:t,selected:n}=e;return n&&t.color("SearchEverywhere.Tab.selectedBackground")}};
  color: ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.Tab.selectedForeground")}};
  opacity: ${e=>{let{disabled:t}=e;return t&&".5"}};
`,Nm=E.zo.span`
  display: flex;
  padding: 0 0.75rem;
  height: 1.8rem;
  align-items: center;
`,Fm=E.zo.div`
  line-height: normal;
  border-bottom: none;
`,_m=E.zo.div`
  display: flex;
  flex-shrink: 0;
  height: 1.85rem;
  align-items: center;
  padding: 0 0.75rem 0;
  gap: 0.75rem;

  input {
    all: unset;
    flex: 1;
    line-height: 1.25;

    &::selection {
      color: ${e=>{let{theme:t}=e;return t.color("*.selectionForeground")}};
      background: ${e=>{let{theme:t}=e;return t.color("*.selectionBackground")}};
    }
  }
`,Lm=E.zo.div`
  height: 24rem;
  flex: 1;
  min-height: 0; // for it to properly fill the remaining height and not to exceed that
`,Mm=E.zo.hr`
  all: unset;
  height: 1px;
  width: 100%;
  border-bottom: 1px solid
    ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.SearchField.borderColor")}};
`,Vm=E.zo.div`
  color: ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.SearchField.infoForeground")}};
  white-space: nowrap;
`,Om=E.zo.div`
  color: ${e=>{let{theme:t}=e;return t.currentForegroundAware(t.color("SearchEverywhere.SearchField.infoForeground"))}};
  font-size: 0.7rem;
  min-height: 1.375rem;
`,Gm=E.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  position: absolute;
  text-align: center;
  width: 100%;
  top: 50%;
`,Hm=[Sm,Tm],Km={},$m="LOAD_MORE_ITEM_KEY";function Qm(){const e=(0,i.Zl)(gm.isOpen),[t,n]=(0,i.FV)(gm.tab),[r,o]=(0,a.useState)(!1),[l,s]=(0,a.useState)(be(gm.initialSearchQuery(t))),c=(0,i.Zl)(gm.initialSearchQuery(t)),m=(0,bt.k)(),[u,d]=(0,a.useState)(new Set),h={};Hm.forEach((e=>{h[e.id]={...e,...e.use({everyWhereAutoSet:r})}}));const g=Hm.filter((e=>""===t||e.id===t)).map((e=>{let{id:t}=e;return h[t]})),[f,A]=(0,a.useState)(30),{searchResult:E}=(0,a.useMemo)((()=>({searchResult:g.flatMap((e=>e.search(l).map((t=>({key:`${e.id}_${e.getKey(t)}`,contributor:e,item:t})))))})),[l,t,...g.flatMap((e=>{let{searchDeps:t}=e;return t}))]),y=h[t],v=(0,a.useMemo)((()=>{const e=E.slice(0,f);return E.length>e.length&&e.push({key:$m,item:Km,contributor:null}),e}),[f,E]),b=(0,a.useRef)(null);(0,a.useEffect)((()=>{l&&c(l)}),[l,t]),(0,a.useEffect)((()=>{if(E[0]){var e;const{key:t}=E[0];d(new Set([t])),null==(e=T.current)||e.setFocusedKey(t),requestAnimationFrame((()=>{var e;null==(e=T.current)||e.setFocusedKey(t)}))}A(30)}),[E]);const C=[{id:Rm,title:"Prev tab",description:"Switch to previous tab in Search Everywhere dialog",actionPerformed:()=>{var e;const r=Hm.findIndex((e=>{let{id:n}=e;return t===n}));n(""===t?Hm.slice(-1)[0].id:(null==(e=Hm[r-1])?void 0:e.id)||"")}},{id:Pm,title:"Next tab",description:"Switch to next tab in Search Everywhere dialog",actionPerformed:()=>{var e;const r=Hm.findIndex((e=>{let{id:n}=e;return t===n}));n((null==(e=Hm[r+1])?void 0:e.id)||"")}}],k=Hm.flatMap((e=>{let{id:r,actionId:o,title:a}=e;return o?[{id:o,title:`Find ${a}`,description:`Quickly go to ${a} by name`,actionPerformed:()=>{t!==r?n(r):null==y||null==y.toggleEverywhere||y.toggleEverywhere()}}]:[]})),S=()=>e(!1),I=(0,a.useRef)(null),T=(0,a.useRef)(null),{collectionSearchInputProps:P}=(0,xs.R)({collectionRef:I,selectionManager:T.current}),D=pm();return a.createElement(fm,{persistedBoundsState:gm.bounds,hasContent:Boolean(l),noContentHeight:59,minWidth:670,minHeight:160,interactions:"all",onClose:S},a.createElement(w.DG,{actions:[...(null==y?void 0:y.actions)||[],...k,...C]},(e=>{let{shortcutHandlerProps:r}=e;return a.createElement("div",(0,p.Z)({},r,{style:{height:"inherit"}}),a.createElement(Ec.GI.Layout,{header:a.createElement(a.Fragment,null,a.createElement(Ec.GI.Header,{hasControls:!0},a.createElement(Dm,null,a.createElement("div",{style:{flex:1}},a.createElement(cm.m,{TabComponent:xm,TabsComponent:Fm,selectedKey:t,onSelectionChange:e=>n(e)},a.createElement(B.c,{key:""},a.createElement(Nm,null,"All")),Hm.map((e=>{const t=m(e.actionId),n=a.createElement(Nm,null,e.title);return a.createElement(B.c,{key:e.id},t?a.createElement(x.a,{tooltip:a.createElement(Ki.u,null,t)},a.createElement("span",null,n)):n)})))),null==y?void 0:y.headerFilters,a.createElement(Mo.hU,{style:{margin:"0 0.5rem"},isDisabled:!0},a.createElement(R.vq,{icon:"actions/moveToLeftBottom"})))),a.createElement(_m,null,a.createElement(R.vq,{icon:"actions/search"}),a.createElement(mm.MT,{contain:!0},a.createElement(hm,(0,p.Z)({},P,{autoFocus:!0,onFocus:e=>{e.target.select()},value:l,onChange:e=>(e=>{const t=b.current&&e.includes(b.current);null!=y&&y.isEverywhere&&!t&&o(!1),s(e)})(e.currentTarget.value)}))),a.createElement(Vm,null,null==y?void 0:y.searchAdvertiser))),content:a.createElement(a.Fragment,null,a.createElement(Mm,null),l&&a.createElement(Lm,null,a.createElement(Ql.a,{ref:I,selectionManagerRef:T,items:v,selectionMode:"single",showAsFocused:!0,shouldFocusWrap:!0,fillAvailableSpace:!0,selectedKeys:u,onSelectionChange:d,onAction:e=>{if(e===$m){A((e=>e+30));const e=E[v.length+1];e&&setTimeout((()=>{var t;d(new Set([e.key])),null==(t=T.current)||t.setFocusedKey(e.key)}))}else S(),setTimeout((()=>{const t=E.find((t=>t.key===e));null==t||t.contributor.processSelectedItem(t.item)}),50)}},(e=>{let{key:t,item:n,contributor:r}=e;if(t===$m)return a.createElement(B.c,{key:$m},a.createElement(Om,null,"...more"));const o=r.getItemText(n);return a.createElement(B.c,{key:t,textValue:o,"aria-label":o},r.renderItem(n))})),0===E.length&&a.createElement(Gm,null,"No actions with such name found"))),footer:a.createElement(Ec.GI.Hint,null,D.current," ",a.createElement(At.r,{onPress:D.next},"Next Tip"))}))})))}Qm.__docgenInfo={description:"TODO: implement history navigation",methods:[],displayName:"SearchEverywherePopup"};const Um=e=>async t=>{const n=mt(e),r=await l.ZP.findRoot({fs:se,filepath:t});await l.ZP.add({fs:se,dir:r,filepath:o().relative(r,t)}),await n(t)};var jm=n(92012),qm=n(6507);const Zm=(0,E.zo)(jm.I)`
  width: 20.5rem;
  /**
     * To have the validation box shadow not clipped by the popup.
     * Maybe it should be an option on input to make sure margin is always in sync with the box-shadow thickness
     */
  margin: 3px;

  input {
    padding-top: 1px;
    padding-bottom: 1px;
  }
`,Jm=(0,E.zo)(Ec.GI.Header)`
  border-bottom: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.border()}};
`;function zm(e){let{title:t,inputName:n="Name",onSubmit:r,validationMessage:o,validationType:i="error",value:l,onChange:s}=e;const[c,m]=(0,a.useState)(!1);return a.createElement(Ec.GI,null,a.createElement(Pc.F,{header:a.createElement(Jm,null,t),content:a.createElement("form",{onSubmit:e=>{e.preventDefault(),r()},onMouseDown:()=>{m(!0)}},a.createElement(Ei.S,{isOpen:Boolean(o)&&!c,placement:"top start",offset:6,crossOffset:-6,tooltip:a.createElement(qm.p,{type:i},o)},a.createElement(Zm,{appearance:"embedded",validationState:o?i:void 0,placeholder:n,value:l,onChange:e=>{m(!1),s(e.target.value)}})))}))}zm.__docgenInfo={description:"A simple Popup with an input, used in actions such as create file, or create directory",methods:[],displayName:"NewItemPopup",props:{inputName:{defaultValue:{value:'"Name"',computed:!1},required:!1,tsType:{name:"string"},description:""},validationType:{defaultValue:{value:'"error"',computed:!1},required:!1,tsType:{name:"union",raw:'"error" | "warning"',elements:[{name:"literal",value:'"error"'},{name:"literal",value:'"warning"'}]},description:""},title:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(newValue: string) => void",signature:{arguments:[{name:"newValue",type:{name:"string"}}],return:{name:"void"}}},description:""},validationMessage:{required:!1,tsType:{name:"string"},description:""}}};const Wm=(0,i.nZ)({key:`action.${rn}`,get:e=>{let{get:t,getCallback:n}=e;return{id:rn,icon:a.createElement(R.vq,{icon:"fileTypes/text"}),title:"File",description:"Create new file",isDisabled:!t(De),actionPerformed:n((e=>{let{snapshot:t,refresh:n}=e;return async()=>{const e=t.getLoadable(Pe).getValue();if(0===e.length)return;const n=t.getLoadable(Ne).getValue().current,r=(await se.promises.stat(e[0])).isDirectory()?e[0]:o().dirname(e[0]);if(!n)throw new Error("Could not find popup manager");n.show((e=>{let{close:t}=e;return a.createElement(Ym,{close:t,destinationDir:r})}))}}))}}});function Ym(e){let{destinationDir:t,close:n}=e;const r=(0,i._8)((e=>{const r=(e=>{const t=mt(e);return async(n,r)=>{const a=o().join(n,r),{snapshot:i,refresh:l,reset:s}=e,c=i.retain();try{if(await ie(se.promises,o().dirname(a)),await se.promises.exists(a))throw new Error(`File ${a} already exists`);await se.promises.writeFile(a,"","utf-8"),s(Ae(a)),(await i.getPromise(Ze)).openPath(a),await t(a),l(he(n))}finally{c()}}})(e);return async(i,l)=>{const s=o().join(t,l),{snapshot:c}=e,m=c.getLoadable(Ze).getValue(),u=c.getLoadable(Fe).getValue().current,d=await c.getPromise(at(s));await r(t,l),n(),m.focus(),await eu((()=>document.activeElement instanceof HTMLTextAreaElement)),d&&(null==u||u.open((e=>{let{close:t}=e;return a.createElement(Xm,{filepath:s,close:t})})))}}),[n]),[l,s]=(0,a.useState)(""),[c,m]=(0,a.useState)("");return a.createElement(zm,{title:"New File",onSubmit:()=>{l&&(async()=>{const e=o().join(t,l),n=await le(e);null!=n&&n.isFile()?m(`A file with the name '${o().basename(l)}' already exists`):null!=n&&n.isDirectory()?m(`A directory with the name '${o().basename(l)}' already exists`):await r(t,l)})()},value:l,onChange:e=>{m(""),s(e)},validationMessage:c})}function Xm(e){let{close:t,filepath:n}=e;const r=(0,i._8)(Um,[]);return a.createElement(An.Du,{minWidth:"content",minHeight:"content"},a.createElement(En.b,{header:"Add File to Git",content:a.createElement(a.Fragment,null,a.createElement("div",{style:{display:"flex",gap:"1rem",padding:"0.75rem 0.75rem 0rem"}},a.createElement(R.vq,{icon:"general/questionDialog.svg",size:32}),a.createElement("div",null,"Do you want to add the following file to Git?",a.createElement("br",null),n,a.createElement("br",null),a.createElement("br",null),"If you choose Cancel, you can still add it later manually."))),footer:a.createElement(En.b.Footer,{left:a.createElement(yn.X,{isDisabled:!0},"Don't ask again"),right:a.createElement(a.Fragment,null,a.createElement(vn.z,{onPress:t},"Cancel"),a.createElement(vn.z,{autoFocus:!0,variant:"default",onPress:()=>{r(n).then(t)}},"Add"))})}))}async function eu(e,t){void 0===t&&(t=2e3),e()||t<0||(await new Promise((e=>setTimeout(e,50))),await eu(e,t-50))}const tu=(0,i.nZ)({key:`action.${on}`,get:e=>{let{get:t,getCallback:n}=e;return{id:on,icon:a.createElement(R.vq,{icon:V}),title:"Directory",description:"Create new directory",isDisabled:!t(De),actionPerformed:n((e=>{let{snapshot:t,refresh:n}=e;return async()=>{const e=t.getLoadable(Pe).getValue();if(0===e.length)return;const n=t.getLoadable(Ne).getValue().current,r=(await se.promises.stat(e[0])).isDirectory()?e[0]:o().dirname(e[0]);if(!n)throw new Error("Could not find popup manager");n.show((e=>{let{close:t}=e;return a.createElement(nu,{close:t,destinationDir:r})}))}}))}}});function nu(e){let{destinationDir:t,close:n}=e;const r=(0,i._8)(Bn,[]),[o,l]=(0,a.useState)(""),[s,c]=(0,a.useState)(null),m=(e=>{const t=(0,a.useRef)(null),n=(0,a.useRef)(e);return n.current=e,function(){var e;null==(e=t.current)||e.abort(),t.current=new re.qf.cancelToken;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];(0,re.qf)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return n.current(...r)}))(t.current,...o)}})((function*(e,t){c(yield ru(e,t))}));(0,a.useEffect)((()=>{m(t,o)}),[t,o]);return a.createElement(zm,{title:"New Directory",onSubmit:()=>{o&&(async()=>{null==await ru(t,o)&&(await r(t,o),n())})()},value:o,onChange:l,validationMessage:null==s?void 0:s.message,validationType:null==s?void 0:s.type})}const ru=async function(e,t){const n=o().join(e,t);if(!t)return null;if(t.includes("."))return{type:"warning",message:'Note: "." in the name is treated as a regular character. Use "/" instead if you mean to create nested directories'};let r=await le(n);return null!=r&&r.isFile()?{type:"error",message:`A file with the name '${t}' already exists`}:null!=r&&r.isDirectory()?{type:"error",message:`A directory with the name '${t}' already exists`}:null},ou=(0,i.nZ)({key:`action.${cn}`,get:e=>{let{get:t,getCallback:n}=e;return{id:cn,title:"File Name",isDisabled:!t(De),actionPerformed:n((e=>{let{snapshot:t}=e;return async()=>{yt();t.getLoadable(Pe).getValue().length}}))}}}),au=(0,i.nZ)({key:`action.${sn}`,get:e=>{let{get:t,getCallback:n}=e;return{id:sn,title:"Absolute Path",isDisabled:!t(De),useShortcutsOf:"CopyPaths",actionPerformed:n((e=>{let{snapshot:t}=e;return async()=>{yt();t.getLoadable(Pe).getValue().length}}))}}}),iu=(0,i.nZ)({key:`action.${cr.CopyPathFromRepositoryRootProvider}`,get:e=>{let{get:t,getCallback:n}=e;return{id:cr.CopyPathFromRepositoryRootProvider,title:"Path From Repository Root",isDisabled:!t(De),actionPerformed:n((e=>{let{snapshot:t,refresh:n}=e;return async()=>{yt();t.getLoadable(Pe).getValue().length}}))}}});function lu(){const e=(0,i._8)((e=>{let{set:t}=e;return(e,n)=>{let{element:r}=e;r&&(t(gm.isOpen,!0),t(gm.tab,n),t(gm.contextElement,r))}}),[]),t=(0,di.w)(),n=t({id:"NewElement",title:"New...",description:"Create new class, interface, file or directory",isSearchable:!0,children:[(0,i.sJ)(Wm),(0,i.sJ)(tu)]}),r=t({id:an,title:"Copy Path/Reference...",menuPresentation:"none",children:[t({id:ln,title:"Copy File Reference",isSearchable:!1,menuPresentation:"section",children:[(0,i.sJ)(au),(0,i.sJ)(ou),(0,i.sJ)(iu)]})]});return[{id:vt.$.GO_TO_ACTION,title:"Find Action",description:"Quickly navigate to action by name",actionPerformed:t=>{e(t,"Actions")}},{id:vt.$.GO_TO_FILE,title:"Go to file",description:"Quickly navigate to file by name",actionPerformed:t=>{e(t,"Files")}},n,r]}const su=a.createContext(null),cu=()=>{const e=(0,a.useContext)(su);return{open:t=>{var n,r;null==e||null==(n=e.current)||n.changeState((e=>e.show(t))),null==e||null==(r=e.current)||r.focus(t)}}},mu=()=>{const e=(0,i._8)(Zr,[]),t=dt();return[pu(),hu(),gu(),{id:cr.ROLLBACK,title:"Rollback...",icon:a.createElement(R.vq,{icon:"actions/rollback.svg"}),actionPerformed:t=>{e(Boolean(t))}},{id:cr.REFRESH,title:"Refresh VCS Changes",description:"Refresh VCS Changes",icon:a.createElement(R.vq,{icon:"actions/refresh.svg"}),actionPerformed:t},{id:cr.SHOW_DIFF,title:"Show Diff",icon:a.createElement(R.vq,{icon:"actions/diff.svg"}),actionPerformed:yt},{id:cr.SHELVE,title:"Shelve Changes...",description:"Save changes to an external patch file and remove them from the code",icon:a.createElement(R.vq,{icon:"vcs/shelve.svg"}),actionPerformed:yt},...fu()]},uu=new Tn.C("{count, plural,\n    =1 {Commit File...}\n    other {Commit Files...}\n  }","en-US"),du=new Tn.C("{count, plural,\n    =1 {Commit Directory...}\n    other {Commit Directories...}\n  }","en-US");function pu(){const e=(0,i._8)(qr,[]),t=cu(),n=(0,i.sJ)(Pe),[r]=ye(Te),a=Cn(n),l=(0,i.sJ)(Zn),s=a.some((e=>l.find((t=>function(e,t){const n=o().relative(e,t);return!n||!n.startsWith("..")&&!o().isAbsolute(n)}(e,Qn.path(t)))))),c=a.every((e=>null==r?void 0:r.some((t=>"dir"===t.type&&t.path===e))));return{id:cr.CHECKIN_FILES,title:c?du.format({count:a.length}):uu.format({count:a.length}),isDisabled:!s,actionPerformed:()=>{e(),t.open(li),ei()}}}function hu(){const e=cu(),t=(0,i._8)((e=>{let{snapshot:t,set:n}=e;return()=>{const e=t.getLoadable(Fr).getValue();let r=e.values().next().value;if(0===e.size){var o;const e=null==(o=t.getLoadable(zn).getValue())?void 0:o.changes.map(or);n(Fr,new Set(e)),r=null==e?void 0:e[0]}if(r){const{rootNodes:e}=t.getLoadable(Gr).getValue();n(Mr,new Set([...t.getLoadable(Mr).getValue(),...(0,fr.Bp)((e=>ir(e)?e.children:null),(e=>e.key),e,[r])])),n(Rr,new Set([r]))}}}),[]);return{id:cr.CHECKIN_PROJECT,title:"Commit",actionPerformed:()=>{t(),e.open(li),ei()}}}function gu(){const e=Je(),t=(0,i.sJ)(xr);return{id:cr.JUMP_TO_SOURCE,title:"Jump to source",icon:a.createElement(R.vq,{icon:"actions/editSource.svg"}),actionPerformed:()=>{[...t].forEach(((t,n,r)=>{const o=Qn.path(t);o||e.openPath(o,n===r.length-1)}))}}}function fu(){const e=(0,i.sJ)(xr),t=[{id:cr.NEW_CHANGELIST,title:"New Changelist...",description:"Create new changelist",icon:a.createElement(R.vq,{icon:"general/add.svg"}),actionPerformed:yt}];return e.size>0&&t.push({title:"Move to Another Changelist...",description:"Move selected changes to another changelist",id:cr.MOVE_TO_ANOTHER_CHANGELIST,actionPerformed:yt}),t}const Au=E.zo.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  padding: 1rem 0.875rem 0.25rem;
  gap: 0.6rem;
`,Eu=E.zo.div`
  margin-left: -0.25rem; // to align with the field. Maybe something to look into in checkbox.
  display: flex;
  gap: 0.75rem;
`,yu={EXISTING:e=>a.createElement(a.Fragment,null,"Branch name ",e," already exists. ",a.createElement("br",null),"Change the name or overwrite existing branch"),CLASHING_WITH_REMOTE:e=>a.createElement(a.Fragment,null,"Branch name ",e," clashes with remote branch ",a.createElement("br",null),"with the same name")};function vu(e){var t;let{close:n}=e;const[r,o]=(0,a.useState)(!0),[s,c]=(0,a.useState)(!1),m=(0,i.sJ)(Bc),[u,d]=(0,a.useState)(!1),p=(0,v.L)(),h=(0,i._8)((e=>{let{refresh:t}=e;return function(e,n,r){return void 0===r&&(r=!0),(0,l.WY)({fs:se,dir:e,checkout:r,ref:n}).then((()=>{t(no(e))}))}}),[]),g=null==(t=m.currentBranch)?void 0:t.name,[f,A]=(0,a.useState)(g||""),E=Nc(m,f),y=!E||"EXISTING"===E&&s,b=!y&&u?"error":"valid";return a.createElement(An.Du,{minWidth:"content",minHeight:"content"},a.createElement(En.b,{header:"Create New Branch",content:a.createElement(Au,{id:"create_branch_form",as:"form",onSubmit:e=>{e.preventDefault(),y?h(m.repoRoot,f,r).catch((e=>{e instanceof l.D1.AlreadyExistsError?p.show({icon:"Error",title:"Unimplemented action",body:"Overwrite option is currently not supported."}):p.show({icon:"Error",title:"Unexpected error",body:`Could not create branch ${f}.`}),console.error("Branch creation error: ",e)})).then((()=>{n()})):d(!0)}},a.createElement(xc.U,{autoFocus:!0,autoSelect:!0,value:f,onChange:e=>{A(_c(e)),d(!0)},validationState:b,validationMessage:"error"===b&&E&&yu[E](f),label:"New branch name:",labelPlacement:"above"}),a.createElement(Eu,null,a.createElement(yn.X,{isSelected:r,onChange:o},"Checkout branch"),a.createElement(yn.X,{isSelected:s,isDisabled:!u||"EXISTING"!==E,onChange:c},"Overwrite existing branch"))),footer:a.createElement(En.b.Footer,{right:a.createElement(a.Fragment,null,a.createElement(vn.z,{onPress:n},"Cancel"),a.createElement(vn.z,{variant:"default",type:"submit",form:"create_branch_form",isDisabled:"error"===b},"Create"))})}))}vu.__docgenInfo={description:"",methods:[],displayName:"CreateNewBranchWindow",props:{close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const bu=e=>{let{isSearchable:t,isDisabled:n,actionPerformed:r,...o}=e;return(0,i.nZ)({key:`action.${o.id}`,get:e=>{let{get:a,getCallback:l}=e;const s=e=>(0,i.Oy)(e)?a(e):e;return{...o,isDisabled:s(n),isSearchable:s(t),actionPerformed:l(r)}}})},wu=(0,i.nZ)({key:`vcs.action.${cr.GIT_ADD}.pathsToAdd`,get:async e=>{let{get:t}=e;return Yr((async e=>{const n=t(at(e));if(n){const r=await l.ZP.isIgnored({fs:se,dir:n,filepath:o().relative(n,e)}),a=await se.promises.stat(e).then((e=>e.isFile())).catch((()=>!1)),i=a&&"NOT_CHANGED"===t(ct(e));return!r&&!i}return!1}),t(Pe))}}),Cu=(0,i.nZ)({key:`vcs.action.${cr.GIT_ADD}.disabled`,get:e=>{let{get:t}=e;return 0===t(wu).length}}),ku=bu({id:cr.GIT_ADD,title:"Add",icon:a.createElement(R.vq,{icon:"general/add.svg"}),useShortcutsOf:cr.ADD_UNVERSIONED,isDisabled:Cu,actionPerformed:e=>async()=>{const t=Um(e),{snapshot:n}=e,r=await n.getPromise(wu);return Promise.all(r.map(t))}}),Su=bu({id:cr.GIT_INIT,title:"Create Git Repository...",actionPerformed:e=>{let{snapshot:t,set:n}=e;return async()=>{const e=(await t.getPromise(Ie)).path;await l.ZP.init({fs:se,dir:e}),n(rt,(t=>t.filter((t=>t.dir!==e)).concat({vcs:"Git",dir:e})))}}});function Iu(){const e=(0,u.U)(),t=(0,m.S)(),[n]=ve(ku),[r]=ve(Su);return[...mu(),n,...0===(0,i.sJ)(rt).length?[r]:[],{id:cr.GIT_CREATE_NEW_BRANCH,title:"New Branch\u2026",description:"Create new branch starting from the selected commit",icon:a.createElement(R.vq,{icon:"general/add.svg"}),actionPerformed:()=>{t.open((e=>{let{close:t}=e;return a.createElement(vu,{close:t})}))}},{id:cr.GIT_BRANCHES,title:"Branches\u2026",icon:a.createElement(R.vq,{icon:"vcs/branch.svg"}),actionPerformed:()=>{e.show((e=>{let{close:t}=e;return a.createElement($c,{close:t})}))}},{id:cr.GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH,title:"Navigate Log to Selected Branch Head",useShortcutsOf:"SelectIn",icon:a.createElement(R.vq,{icon:"general/locate.svg"}),actionPerformed:()=>{yt()}}]}var Bu=n(22215);const Tu={attributeNamePrefix:"@",ignoreAttributes:!1,isArray:(e,t)=>"project.component"===t},Ru={format:!0,attributeNamePrefix:"@",ignoreAttributes:!1};async function Pu(e){const t=new Bu.XMLParser(Tu);if(!await se.promises.exists(e))return null;const n=await se.promises.readFile(e,{encoding:"utf8"}),r=t.parse(n);return r.project=r.project||{},r.project.component=r.project.component||{component:[]},r}async function Du(e,t){const n=new Bu.XMLBuilder(Ru).build(t);await ie(se.promises,o().dirname(e)),await se.promises.writeFile(e,n)}const xu={[Xe.WORKSPACE_FILE]:"workspace.xml"};function Nu(e){let{children:t}=e;const n=o().join((0,i.sJ)(Ie).path,".idea"),r=(0,a.useRef)({}),l=e=>o().join(n,xu[e]||e),s=e=>{const t=l(e);return r.current[t]||(r.current[t]=Pu(t)),r.current[t]};return(0,a.useEffect)((()=>{s(Xe.WORKSPACE_FILE)}),[]),a.createElement(Ye.J1,{storeKey:"ProjectWorkspace",read:async e=>{const[t,n]=e.split("|"),r=await s(t);return null==r?void 0:r.project.component.find((e=>{let{"@name":t}=e;return t===n}))},write:async e=>{let{diff:t}=e;const n=(0,$n.Z)((e=>{let{storageFile:t}=e;return t}),[...t.entries()].map((e=>{let[t,n]=e;const[r,o]=t.split("|");return{storageFile:r,componentName:o,value:n}})));for(const r in n){const e=n[r],t=await Pu(r)||{"?xml":{"@version":"1.0","@encoding":"UTF-8"},project:{"@version":"4",component:[]}};for(const{value:n,componentName:r}of e){const e=t.project.component,o=e.findIndex((e=>{let{"@name":t}=e;return t===r})),a="function"==typeof n?n(e[o]||null):n;e.splice(o,o>=0?1:0,{"@name":r,...a})}await Du(l(r),t)}}},t)}function Fu(){const e=Zo();return[{id:"AddTestProcessAction",title:"Add Test Process",actionPerformed:()=>{e({title:"Test process",isCancelable:!0},(async(e,t)=>{let{setText:n,setSecondaryText:r,setFraction:o}=e;n("Welcome!"),await(0,re.qf)((function*(){for(let e=0;e<1e3;e++)n(Lu(e)),o(e/1e3),yield _u(100),r("Bla bla bla")}))(t)}))}}]}async function _u(e){return new Promise((t=>setTimeout(t,e)))}function Lu(e){return e/10==Math.round(e/10)?"":"Found: "+Math.round(e/20)+1}Nu.__docgenInfo={description:"",methods:[],displayName:"PersistentStateProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Mu=E.zo.div`
  display: flex;
  flex-direction: column;
  height: 100vh;
  min-height: 0;
`,Vu=e=>{let{height:t}=e;const n=(0,a.useRef)(null),[r,o]=(0,i.FV)(sm),l=(0,i.sJ)(Cr.isOpen),s=(0,i.sJ)(gm.isOpen);return(0,i.sJ)(Ne).current=(0,u.U)(),(0,i.sJ)(Fe).current=(0,m.S)(),(0,i.sJ)(_e).current=(0,y.i)(),a.createElement(Nu,null,a.createElement(Yn,null),a.createElement(v.a,{disablePortal:!0},a.createElement(Gu,null),a.createElement(Hu,null),a.createElement(su.Provider,{value:n},a.createElement(Mu,{style:{height:t}},a.createElement(Ou,null,(e=>{let{shortcutHandlerProps:t}=e;return a.createElement(a.Fragment,null,a.createElement(b.u,{ref:n,toolWindowsState:r,onToolWindowStateChange:e=>{o(e)},windows:uc,containerProps:t},a.createElement(Tt,null)),a.createElement(tm,null))})),s&&a.createElement(Qm,null),l&&a.createElement(lm,null)))))};function Ou(e){const t=[...lu(),...Iu(),...Fu()];return a.createElement(w.DG,(0,p.Z)({},e,{actions:t,useCapture:!0}))}function Gu(){return Et.value=(0,v.L)(),null}function Hu(){return function(){const e=(0,v.L)(),t=Zo();(0,a.useEffect)((()=>{const n=setTimeout((()=>{null==ce.get()&&e.showSticky({title:"Switch to IndexedDB filesystem",body:"By default an in-memory filesystem is used to have a faster git clone. But it means all changes will be lost upon refresh. You can switch in the background to a persistence fs implementation which uses IndexedDB to store files.",actions:a.createElement(a.Fragment,null,a.createElement(Dc.g,{onPress:()=>{t({title:"Switching to IndexedDB FS",isCancelable:!0},(async(e,t)=>{let{setIndeterminate:n,setText:r}=e;r("Copying ..."),n(!0),await ue({cancelSignal:t,onCopy:e=>{r(`Copying ${o().dirname(e)}`)}}).then((()=>{ce.set("yes")})).catch((()=>{}))}))}},"Switch to IndexedDB FS"),a.createElement(Dc.g,{onPress:()=>ce.set("no")},"Don't ask again"))})}),3e3);return()=>clearTimeout(n)}),[])}(),null}Vu.__docgenInfo={description:"",methods:[],displayName:"Project",props:{height:{required:!0,tsType:{name:'CSSProperties["height"]',raw:'CSSProperties["height"]'},description:""}}};const Ku={ActivateProjectWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit1",modifiers:["Meta"]}}],ActivateCommitWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit0",modifiers:["Meta"]}}],ActivateVersionControlWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit9",modifiers:["Meta"]}}],ActivateTerminalWindow:[{type:"keyboard",firstKeyStroke:{code:"F12",modifiers:["Alt"]}}],[cr.ROLLBACK]:[{type:"keyboard",firstKeyStroke:{code:"KeyZ",modifiers:["Alt","Meta"]}}],[cr.SHOW_DIFF]:[{type:"keyboard",firstKeyStroke:{code:"KeyD",modifiers:["Meta"]}}],[cr.SHELVE_SILENTLY]:[{type:"keyboard",firstKeyStroke:{code:"KeyH",modifiers:["Meta","Shift"]}}],[cr.UNSHELVE_SILENTLY]:[{type:"keyboard",firstKeyStroke:{code:"KeyU",modifiers:["Meta","Alt"]}}],[Rm]:[{type:"keyboard",firstKeyStroke:{code:"Tab",modifiers:["Shift"]}}],[Pm]:[{type:"keyboard",firstKeyStroke:{code:"Tab"}}],[cr.RENAME_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{code:"F2"}}],[cr.MOVE_TO_ANOTHER_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyM"}}],[cr.SET_DEFAULT_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{modifiers:["Control"],code:"Space"}}],[cr.REMOVE_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{code:"Backspace"}}],[cr.CHECKIN_PROJECT]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyK"}}],[cr.ADD_UNVERSIONED]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"KeyA"}}],[cr.FOCUS_TEXT_FILTER]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyL"}}],[cr.GROUP_BY_DIRECTORY]:[{type:"keyboard",firstKeyStroke:{modifiers:["Control"],code:"KeyP"}}],SafeDelete:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"Backspace"}}],CopyPaths:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyC"}}],NewElement:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyN"}}]};window.git=l.ZP,window.fs=se,window.path=r,window.http=s.Z;const $u=e=>{let{height:t,autoCloneSampleRepo:n}=e;return a.createElement(A,null,a.createElement(pe,null,a.createElement(Jc,{autoCloneSampleRepo:n},a.createElement(c.ur,{keymap:Ku},a.createElement(i.Wh,null,a.createElement(m.f,null,a.createElement(u.q,null,a.createElement(Vu,{height:t}))))))))};$u.__docgenInfo={description:"Example app root component. It expects ThemeProvider to be provided based on where it's rendered.",methods:[],displayName:"App",props:{height:{required:!1,tsType:{name:'CSSProperties["height"]',raw:'CSSProperties["height"]'},description:""},autoCloneSampleRepo:{required:!1,tsType:{name:"boolean"},description:""}}};const Qu=$u}}]);
//# sourceMappingURL=4365.8f1e632c.js.map