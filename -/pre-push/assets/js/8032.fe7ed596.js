(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["8032"],{49719:function(e,t,n){"use strict";let r,i,o,a,s,l,c,d;n.r(t),n.d(t,{default:()=>ur,App:()=>un});var u,h,p=n("21023"),m=n.n(p),g=n("2784"),f=n("31128"),A=n("47040"),x=n("37044"),y=n("76826"),j=n("63981"),v=n("20569"),w=n("72516"),C=n("52322");let b=e=>(0,C.jsx)(w.E,{...e,src:"data:image/gif;base64,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",darkSrc:"data:image/gif;base64,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"});b.__docgenInfo={description:"",methods:[],displayName:"LoadingGif"};let E=(0,v.ZP)(b).withConfig({displayName:"DefaultSuspense__Loading",componentId:"sc-1n9vzm7-0"})(["width:fit-content;margin:auto;"]),S=e=>{let{fallback:t=(0,C.jsx)(E,{}),children:n}=e;return(0,C.jsx)(g.Suspense,{fallback:t,children:n})};S.__docgenInfo={description:"",methods:[],displayName:"DefaultSuspense",props:{fallback:{defaultValue:{value:"<Loading />",computed:!1},required:!1}}};var D=n("40145"),I=n("63631"),k=n("82540"),T=n("52761"),P=n("44668"),B=n("42181"),R=n("61741"),N=n("28266"),F=n("88089"),L=n("89349"),O=n("32396"),_=n("47386"),M=n("39472"),G=n("79532"),K=n("57385"),H=n("17560"),V=n("90046"),U=n("30775"),$=n("28818"),Q=n("36588"),q=n("2533"),z=n("29362"),W=n("1554"),Y=n("6771"),Z=n("2362");let J="fileTypes/text",X="nodes/folder",ee={editorconfig:"nodes/editorconfig",js:"fileTypes/javaScript",gitignore:"vcs/ignore_file",archive:"fileTypes/archive",as:"fileTypes/as",config:"fileTypes/config",css:"fileTypes/css",dtd:"fileTypes/dtd",hpr:"fileTypes/hprof",htaccess:"fileTypes/htaccess",html:"fileTypes/html",idl:"fileTypes/idl",java:"fileTypes/java",jfr:"fileTypes/jfr",json:"fileTypes/json",jsp:"fileTypes/jsp",jspx:"fileTypes/jspx",manifest:"fileTypes/manifest",properties:"fileTypes/properties",txt:"fileTypes/text",wsdl:"fileTypes/wsdlFile",xhtml:"fileTypes/xhtml",xml:"fileTypes/xml",xsd:"fileTypes/xsdFile",yaml:"fileTypes/yaml"},et=e=>ee[en(e)]||J,en=e=>e.split(".").pop()||"";function er(e,t){return void 0===t&&(t=m().sep),function e(t,n,r){void 0===r&&(r=[]);let i=m().dirname(t);return i!==n?[i].concat(e(i,n,r)):r}(e,t)}var ei=n("42615");let eo=new WeakMap,ea=new WeakSet;function es(e,t){let n=(0,Z.cn)(0),r=(0,Z.cn)((t,r)=>{t(n);let i=new Set,o=e(function(){let e=arguments.length<=0?void 0:arguments[0];return ea.has(e)&&i.add(e),t(...arguments)},r);return eo.set(o,i),o},function(e,i){for(var o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];if(0===a.length){let t=e(r);for(let e of eo.get(t)??[])i(e);i(n,e=>e+1)}else if(t)return t(e,i,...a)});return ea.add(r),r}var el=n("22633"),ec=n("42378"),ed=n.n(ec);async function eu(){return await eg(e=>{el.FileSystem.InMemory.Create({},e)})}async function eh(e){void 0===e&&(e="bfs-local-fs");let t=await eg(t=>{el.FileSystem.IndexedDB.Create({storeName:e},t)});return await new Promise(e=>t.init(t.store,e)),t}function ep(e){el.initialize(e);let t=el.BFSRequire("fs");return t.promises=ed()({...t,exists:(e,n)=>t.exists(e,e=>n(null,e))}),t}let em=e=>{let t=new(el.BFSRequire("fs")).FS;return t.initialize(e),t};function eg(e){return new Promise((t,n)=>{e((e,r)=>{if(e||!r)return n(e);t(r)})})}var ef=n("67481");async function eA(e){let{source:t,target:n,cancelSignal:r,...i}=e;await ex(r,{...i,source:ed()(t),target:ed()(n),rootDir:"/"})}let ex=(0,ef.qf)(function*(e,t){let{source:n,target:r,rootDir:i,onCopy:o,force:a}=t;for(let s of yield n.readdir(i)){let l=m().join(i,s),c=yield n.stat(l);if(c.isFile()||c.isSymbolicLink()){if(!a&&(yield ey(r,l)))return;o?.(l);let e=yield n.readFile(l);yield ej(r,m().dirname(l)),yield r.writeFile(l,e)}else c.isDirectory()?yield ex(e,{...t,rootDir:m().join(i,s)}):console.warn("unsupported file system item skipped, when copying:",c)}}),ey=async(e,t)=>await e.exists(t)&&!(await e.stat(t)).isDirectory();async function ej(e,t){let n=await e.stat(t).catch(e=>"ENOENT"!==e.code&&Promise.reject(e));if(!1===n){let n=m().dirname(t);n!==m().dirname(n)&&await ej(e,n),await e.mkdir(t).catch(e=>"EEXIST"===e.code?Promise.resolve():Promise.reject(e))}else if(!n.isDirectory())throw Error(`path is not a directory, but already exists: ${t}`)}let ev=e=>r.promises.stat(e).catch(()=>null),ew=(i="demo_app_use_persistent_fs",{get:()=>localStorage.getItem(i),set:e=>localStorage.setItem(i,e)});async function eC(e){let{onCopy:t=console.log,cancelSignal:n}=void 0===e?{}:e;if(!(r.getRootFS()instanceof el.FileSystem.InMemory)){console.log("Already on persistent fs. Nothing to do.");return}console.log("Creating IndexedDB FS"),console.time("creating db");let i=await eh();await eA({source:r,target:await em(i),cancelSignal:n,force:!0,onCopy:t}),console.timeEnd("creating db"),ep(i),console.log("FS switched to IndexedDB backend",i)}let eb=function(e){let t,n="pending",r=e.then(e=>{n="success",t=e},e=>{n="error",t=e});return{read:()=>{switch(n){case"pending":throw r;case"error":throw t;default:return t}}}}(("yes"===ew.get()?eh():eu()).then(ep).then(e=>(window.fs=e,r=e)).catch(e=>{throw console.log("could not initialize FS:",e),e})),eE=e=>{let{children:t}=e;return eb.read(),t},eS=async e=>{let t;try{t=await r.promises.readdir(e)}catch(e){return null}return(await Promise.all(t.map(t=>{let n=`${e}/${t}`;return r.promises.stat(n).then(e=>({...e,type:e.isDirectory()?"dir":"file",filePath:n}))}))).map(e=>({type:e.type,name:(0,p.basename)(e.filePath),path:e.filePath,lastModification:e.mtimeMs,size:e.size}))},eD=(0,ei.xu)(e=>{let t=es(()=>eS(e));return t.debugLabel=`DirContent(${e})`,t}),eI=(e,t)=>async e=>{await t(ek(e))},ek=(0,ei.xu)(e=>{let t=async()=>e?await r.promises.exists(e)?r.promises.readFile(e,{encoding:"utf8"}):null:"",n=(0,ei.wm)(t);return(0,Z.cn)(async e=>e(n),async function(i,o){let a=(arguments.length<=2?void 0:arguments[2])??"";if((arguments.length<=2?0:arguments.length-2)==0)return o(n,t());o(n,Promise.resolve(a)),e&&await r.promises.writeFile(e,a??"","utf8").catch(e=>{console.error("failed to sync the file back to the fs",e)})})});var eT=n("98738"),eP=n("23949"),eB=n("91924");function eR(e){return Array.isArray(e)?1===e[1]?["DELETED","NOT_CHANGED","MODIFIED"][e[2]]:0===e[1]&&0!==e[3]?"ADDED":"UNKNOWN":"modified"===e||"*modified"===e?"MODIFIED":"deleted"===e||"*deleted"===e?"DELETED":"added"===e?"ADDED":"unmodified"===e?"NOT_CHANGED":"UNKNOWN"}var eN=n("22215"),eF=n("59118"),eL=n("90187"),eO=n("14129");let e_=e=>{let{path:t}=e;return!t.split("/").includes(".git")},eM={path:"/workspace/jui",url:"https://github.com/alirezamirian/jui.git"},eG={name:"Workspace",path:"/workspace"},eK=(0,Z.cn)(eG),eH=(0,ei.xu)(e=>(0,Z.cn)(t=>m().join(t(eK).path,e))),eV=(0,Z.cn)(async e=>{let t=e(eK);return e(eU(t.path))}),eU=(0,ei.xu)(e=>(0,Z.cn)(async t=>{let n=await t(eD(e)),r=[],i=async n=>{if("dir"===n.type){if(e_(n)){let e=await t(eD(n.path));e&&e.forEach(i)}}else r.push({...n,relativePath:m().relative(e,n.path)})};return await Promise.all((n||[]).map(e=>i(e))),r})),e$=(0,Z.cn)([]),eQ=(0,Z.cn)(e=>e(e$).length>0),eq=(u=[],o=null,function(e,t){void 0===t&&(t="unknown");let n=function(e,t){let n=(0,D.oR)(void 0),r=(0,D.b9)(e);return(0,g.useCallback)(t=>{let i=n.get(e),o="function"==typeof t?t(i):t;return o!==i&&r(o),o},[D.b9,n])}(e$),r=(0,g.useRef)();return(0,g.useEffect)(()=>{o===r.current&&n(t=>(0,eL.Z)(e,t)?t:e)},[e]),(0,eO.L)({onFocusWithin:t=>{r.current=t.currentTarget,o=t.currentTarget,n(e)},onBlurWithin:e=>{!(e.relatedTarget instanceof Element&&e.relatedTarget?.closest("[data-overlay-container], [role=menu]"))&&n(u)}}).focusWithinProps}),ez=(0,Z.cn)((0,g.createRef)()),eW=(0,Z.cn)((0,g.createRef)()),eY=(0,Z.cn)((0,g.createRef)()),eZ=((h={}).WORKSPACE_FILE="$WORKSPACE_FILE$",h),eJ=(0,ei.xu)(e=>(0,Z.cn)(t=>{let n=m().join(t(eK).path,".idea");return m().join(n,e4[e]||e)})),eX=(0,ei.xu)(e=>{let t=(0,Z.cn)(null),n=(0,Z.cn)(t=>e6(t(eJ(e)))),r=null;return(0,Z.cn)(e=>e(t)??e(n),async(i,o,a)=>{let s=i(eJ(e)),l=i(t)??await i(n);o(t,e=>a(e??l)),null!==r&&clearTimeout(r),r=setTimeout(()=>{var e;o(ek(s),(e=i(t),new eN.XMLBuilder(e2).build(e)))},1e3)})});function e0(e,t){let n=(0,Z.cn)(e),r=function(e){let{storageFile:t=eZ.WORKSPACE_FILE,componentName:n,schema:r,...i}=e,o="write"in i?i.write:e=>e,a="read"in i?i.read:eF.Z;return(0,Z.cn)(async e=>{let i=await e(eX(t)),o=i?.project.component.find(e=>e["@name"]===n),s=r.safeParse(o);return s.error&&console.error(`Error parsing persisted state for component ${n} in file ${t}:`,s.error),await a(s.data)??void 0},async(e,r,i)=>{if("update"===i.type)return r(eX(t),e=>{let{value:t}=i,r=[...e.project.component],a=r.findIndex(e=>e["@name"]===n);return r.splice(a,a>=0?1:0,{"@name":n,...o(t,r[a])}),{...e,project:{...e.project,component:r}}})})}(t),i=(0,eP.v)((e,t)=>{e.peek(r).then(e=>{void 0!==e&&t(n,e)})});return(0,Z.cn)(e=>(e(i),e(n)),async(e,t,i)=>{let o="function"==typeof i?i(await e(n)):i;t(n,o),await t(r,{type:"update",value:o})})}e0({x:2},{componentName:"test",storageFile:"test.xml",schema:eB.z.object({whatever:eB.z.number()}).optional(),read:e=>({x:e?.whatever??2}),write:(e,t)=>({...t,whatever:e.x})}),e0({y:3},{componentName:"test2",storageFile:"test.xml",schema:eB.z.object({y:eB.z.number()}).optional()});let e1={attributeNamePrefix:"@",ignoreAttributes:!1,isArray:(e,t)=>"project.component"===t},e2={format:!0,attributeNamePrefix:"@",ignoreAttributes:!1},e5={"?xml":{"@version":"1.0","@encoding":"UTF-8"},project:{"@version":"4",component:[]}};async function e6(e){let t=new eN.XMLParser(e1);if(!await r.promises.exists(e))return e5;let n=await r.promises.readFile(e,{encoding:"utf8"}),i=Object.assign({...e5},t.parse(n));return i.project.component=i.project.component??[],i}let e4={[eZ.WORKSPACE_FILE]:"workspace.xml"},e7=e=>eB.z.union([e,e.array()]).transform(e=>Array.isArray(e)?e:[e]),e3=(e,t)=>{let n=e7(e);return eB.z.object({[t]:n})},e8=async e=>{let{filepath:t,...n}=e;return f.ZP.statusMatrix({...n,filepaths:[t]}).then(e=>e[0])},e9=()=>Promise.all(["/workspace/jui","/workspace"].map(async e=>{if(await r.promises.exists(e))return f.ZP.findRoot({fs:r,filepath:e}).catch(()=>null)})).then(e=>[...new Set(e.filter(e=>null!=e))].map(e=>({dir:e,vcs:"Git"}))),te=e0([],{componentName:"VcsDirectoryMappings",schema:eB.z.object({mapping:e7(eB.z.object({"@directory":eB.z.string(),"@vcs":eB.z.enum(["Git"])})).optional()}).optional(),storageFile:"vcs.xml",read:e=>e?.mapping?.map(e=>({dir:e["@directory"],vcs:e["@vcs"]}))??e9(),write:(e,t)=>({...t||{},mapping:e?.map(e=>{let{vcs:t,dir:n}=e;return{"@directory":n,"@vcs":t}})??[]})}),tt=(0,ei.xu)(e=>(0,Z.cn)(()=>(0,f.AY)({fs:r,filepath:e}).catch(()=>null))),tn=async e=>{console.time(`statusMatrix ${e}`);let t=await (0,f.ks)({fs:r,dir:e});console.timeEnd(`statusMatrix ${e}`);let n={};return t.forEach(e=>{n[e[0]]=eR(e)}),n},tr=(0,ei.xu)(e=>{let t=(0,Z.cn)({});return(0,eP.j)(t,(n,r)=>{tn(e).then(e=>{r(t,e)})})}),ti=(0,ei.xu)(e=>(0,Z.cn)(!1)),to=(0,Z.cn)(e=>e(te).some(t=>{let{dir:n}=t;return e(ti(n))})),ta=(0,ei.xu)(e=>es(async t=>{let n=await t(tt(e));if(n){let i=p.relative(n,e),o=t(tr(n));return o[i]||console.log("file status missing in repo status state, fetching individually",e),o[i]??eR(await e8({fs:r,dir:n,filepath:i}))}return"NOT_CHANGED"})),ts=async(e,t,n)=>{let i=await e(tt(n));if(i){let e=p.relative(i,n),o=await f.ZP.statusMatrix({fs:r,dir:i,filepaths:[e]});t(tr(i),t=>{let n={...t};return 0===o.length&&delete n[e],o.forEach(e=>{n[e[0]]=eR(e)}),n})}},tl=()=>(0,eT.lV)(ts),tc=async(e,t)=>{e(te)?.forEach(e=>{let{dir:n}=e;t(ti(n),!0),tn(n).then(e=>{console.log("setting repo status for git dirs:",n,e),t(tr(n),e)}).finally(()=>{t(ti(n),!1)})})},td=()=>(0,eT.lV)(tc),tu=e=>{let t=(0,v.Fg)();switch(e){case"MODIFIED":return t.dark?"#6897bb":"#0032a0";case"ADDED":return t.dark?"#629755":"#0a7700";case"DELETED":return t.dark?"#6c6c6c":"#616161";case"UNKNOWN":return t.dark?"#d1675a":"#993300"}},th=e=>tu((0,D.Dv)((0,ei.Wg)(ta(e)))??"NOT_CHANGED"),tp=e=>{let{children:t,filepath:n}=e,r=th(n);return(0,C.jsx)("span",{style:{color:r},children:t})},tm=e=>{let{children:t,status:n}=e,r=(0,v.Fg)().currentForegroundAware(tu(n));return(0,C.jsx)("span",{style:{color:r},children:t})};tp.__docgenInfo={description:"",methods:[],displayName:"FileStatusColor"},tm.__docgenInfo={description:"",methods:[],displayName:"StatusColor"};var tg=n("89076");let tf={value:null};function tA(){tf.value?.show({icon:"Warning",title:"Unimplemented action",body:"This action is not implemented yet.",actions:C.jsx(C.Fragment,{children:C.jsx(tg.r,{onPress:tA,children:"Read more..."})})})}var tx=n("26357"),ty=n("79955");let tj=I.zo.div.attrs({tabIndex:-1})`
  display: flex;
  flex-direction: column;
  height: inherit;
  justify-content: center;
  padding: 0 25%;
  font-size: 1rem;
  outline: none;
`,tv=I.zo.div`
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
`,tw=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.linkForegroundEnabled}};
`;function tC(){return(0,C.jsxs)(tj,{"data-testid":"EditorZeroState",children:[(0,C.jsx)(tb,{actionId:tx.$.GO_TO_FILE}),(0,C.jsx)(tb,{actionId:tx.$.GO_TO_ACTION})]})}function tb(e){let{actionId:t}=e,n=(0,ty.k)(),r=(0,B.BH)(t);return(0,C.jsxs)(tv,{children:[r?.title,(0,C.jsx)(tw,{children:n(t)})]})}tC.__docgenInfo={description:"",methods:[],displayName:"EditorZeroState"};var tE=n("34273"),tS=n.n(tE),tD=n("48813");let tI="PasteMultiple",tk="Generate",tT={EXPAND_REGION:"ExpandRegion",EXPAND_REGION_RECURSIVELY:"ExpandRegionRecursively",EXPAND_ALL_REGIONS:"ExpandAllRegions",EXPAND_ALL_TO_LEVEL:"ExpandToLevel",EXPAND_ALL_TO_LEVEL1:"ExpandToLevel1",EXPAND_ALL_TO_LEVEL2:"ExpandToLevel2",EXPAND_ALL_TO_LEVEL3:"ExpandToLevel3",EXPAND_ALL_TO_LEVEL4:"ExpandToLevel4",EXPAND_ALL_TO_LEVEL5:"ExpandToLevel5",COLLAPSE_REGION:"CollapseRegion",COLLAPSE_REGION_RECURSIVELY:"CollapseRegionRecursively",COLLAPSE_ALL_REGIONS:"CollapseAllRegions",COLLAPSE_DOC_COMMENTS:"CollapseDocComments",TOGGLE_FOLDING:"ToggleFolding",EDITOR_LANG_POPUP_MENU:"EditorLangPopupMenu",CompareClipboardWithSelection:"CompareClipboardWithSelection"};function tP(e){return e.event?e.event?.type?.includes("key")?"keyboard":"mouse":""}var tB=n("35848"),tR=n("68811");let tN=(0,Z.cn)((e,t)=>{let{setSelf:n}=t;return e=>function(){let{get:t,set:r}=n();for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return e(t,r,...o)}},(e,t)=>({get:e,set:t})),tF=(0,eP.j)((0,Z.cn)([]),(e,t)=>{e.peek(eV).then(n=>{t(tF,(0,tB.Z)([(0,tR.Z)(t=>t.path===e(eH("README.md"))),(0,tR.Z)(e=>e.path.endsWith(".ts")),(0,tR.Z)(e=>e.path.endsWith(".js"))],n.filter(e=>"file"===e.type)).filter(e=>!e.path.includes(".idea")).slice(0,12).map(e=>({filePath:e.path,editorState:{cursorPos:{lineNumber:0,column:0}}})))})}),tL=(0,Z.cn)(0),tO=(0,Z.cn)(e=>{let t=e(tF);return t[e(tL)]||t[0]||null}),t_=(0,Z.cn)(new Y.Ly(0,0)),tM=(0,Z.cn)(null),tG=function(e,t,n,r){void 0===r&&(r=!0);let i=e(tF),o=i.findIndex(e=>e.filePath===n),a=e=>{t(tL,e)};if(o>-1)a(o);else{let e=i.length;t(tF,e=>[...e,{filePath:n,editorState:{cursorPos:{lineNumber:0,column:0}}}]),a(e)}r&&setTimeout(()=>{e(tM)?.focus()})},tK=(e,t,n)=>t(tF,e=>e.filter((e,t)=>t!==n)),tH=(e,t,n)=>{let r=e(tF).findIndex(e=>e.filePath===n);r>-1&&(tK(e,t,r),t(tL,Math.max(r-1,0)))},tV=(e,t,n)=>{t(tF,e=>e.filter((e,t)=>t===n))},tU=(e,t,n)=>{let r=e(tF).length;n>=0&&n<r&&t(tL,n)},t$=(e,t)=>{e(tM)?.focus()},tQ=(a=(e,t)=>{let{getCallback:n}=t;return{openPath:n(tG),closeTab:n(tK),select:n(tU),focus:n(t$),closeOtherTabs:n(tV),closePath:n(tH)}},(0,Z.cn)((e,t)=>{let n=e(tN);return a(e,Object.assign(t,{getCallback:n}))})),tq=()=>(0,D.Dv)(tQ),tz=()=>[(0,D.Dv)(tF),(0,D.Dv)(tQ)];var tW=n("54695");let tY=JSON.parse('{"nG":[{"scope":"emphasis","settings":{"fontStyle":"italic"}},{"scope":"strong","settings":{"fontStyle":"bold"}},{"scope":"header","settings":{"foreground":"#000080"}},{"scope":"comment","settings":{"foreground":"#808080"}},{"scope":"constant.language","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":["constant.numeric"],"settings":{"foreground":"#6897BB"}},{"scope":"constant.regexp","settings":{"foreground":"#646695"}},{"scope":"entity.name.tag","settings":{"foreground":"#FFC66D"}},{"scope":"entity.name.tag.css","settings":{"foreground":"#d7ba7d"}},{"scope":"entity.other.attribute-name","settings":{"foreground":"#BABABA"}},{"scope":["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],"settings":{"foreground":"#d7ba7d"}},{"scope":"invalid","settings":{"foreground":"#f44747"}},{"scope":"markup.underline","settings":{"fontStyle":"underline"}},{"scope":"markup.bold","settings":{"foreground":"#A9B7C6"}},{"scope":"markup.heading","settings":{"foreground":"#A9B7C6"}},{"scope":"markup.italic","settings":{"fontStyle":"italic"}},{"scope":"markup.inserted","settings":{"foreground":"#b5cea8"}},{"scope":"markup.deleted","settings":{"foreground":"#ce9178"}},{"scope":"markup.changed","settings":{"foreground":"#A9B7C6"}},{"scope":"beginning.punctuation.definition.quote.markdown","settings":{"foreground":"#608b4e"}},{"scope":"beginning.punctuation.definition.list.markdown","settings":{"foreground":"#6796e6"}},{"scope":"markup.inline.raw","settings":{"foreground":"#ce9178"}},{"scope":"meta.selector","settings":{"foreground":"#d7ba7d"}},{"name":"brackets of XML/HTML tags","scope":"punctuation.definition.tag","settings":{"foreground":"#FFC66D"}},{"scope":"meta.preprocessor","settings":{"foreground":"#CC7832"}},{"scope":"meta.preprocessor.string","settings":{"foreground":"#ce9178"}},{"scope":"meta.preprocessor.numeric","settings":{"foreground":"#b5cea8"}},{"scope":"meta.structure.dictionary.key.python","settings":{"foreground":"#9876AA"}},{"scope":"meta.diff.header","settings":{"foreground":"#CC7832"}},{"scope":"storage","settings":{"foreground":"#ff0000"}},{"scope":"storage.type","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":["keyword.other.phpdoc.php","keyword.other.type.php","storage.type.class.jsdoc","entity.name.type.instance.jsdoc","variable.other.jsdoc"],"settings":{"foreground":"#808080"}},{"scope":"storage.modifier","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"string","settings":{"foreground":"#6A8759"}},{"scope":"string.tag","settings":{"foreground":"#6A8759"}},{"scope":"string.value","settings":{"foreground":"#6A8759"}},{"scope":"string.regexp","settings":{"foreground":"#6A8759"}},{"name":"JavaScript string interpolation ${}","scope":["punctuation.definition.template-expression.begin.js","punctuation.definition.template-expression.begin.ts","punctuation.definition.template-expression.end.ts","punctuation.definition.template-expression.end.js"],"settings":{"foreground":"#A9B7C6"}},{"scope":["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less"],"settings":{"foreground":"#9876AA"}},{"scope":["variable.other.property","support.variable.property.dom","entity.other.inherited-class"],"settings":{"foreground":"#9876AA"}},{"scope":["variable.other.object","variable.other.object.property","support.class.dom","meta.function-call","entity.name.type.module"],"settings":{"foreground":"#A9B7C6"}},{"scope":["variable.other.readwrite","variable.other.constant.ts","variable.parameter","variable.other.readwrite.alias"],"settings":{"foreground":"#A9B7C6"}},{"scope":"keyword","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"keyword.control","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"scope":"keyword.operator","settings":{"foreground":"#A9B7C6"}},{"scope":["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.logical.python"],"settings":{"foreground":"#CC7832"}},{"scope":"keyword.other.unit","settings":{"foreground":"#b5cea8"}},{"scope":["punctuation.section.embedded.begin.metatag.php","punctuation.section.embedded.end.metatag.php"],"settings":{"foreground":"#CC7832"}},{"scope":"support.function.git-rebase","settings":{"foreground":"#9876AA"}},{"scope":"constant.sha.git-rebase","settings":{"foreground":"#b5cea8"}},{"name":"coloring of the Java import and package identifiers","scope":["storage.modifier.import.java","storage.modifier.package.java"],"settings":{"foreground":"#d4d4d4"}},{"name":"this.self","scope":"variable.language","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"name":"Source Python","scope":["source.python"],"settings":{"foreground":"#A9B7C6"}},{"name":"Magic function python","scope":["support.function.magic.python"],"settings":{"foreground":"#9876AA"}},{"name":"Self keyword python","scope":["variable.language.special.self.python","variable.parameter.function.language.special.self.python"],"settings":{"foreground":"#9876AA","fontStyle":""}},{"name":"Function declarations Python","scope":["entity.name.function.python","meta.function-call.generic.python"],"settings":{"foreground":"#FFC66D"}},{"name":"Function declarations","scope":["entity.name.function","support.function","support.constant.handlebars"],"settings":{"foreground":"#FFC66D"}},{"name":"Types declaration and references","scope":["meta.return-type","support.class","support.type","entity.name.type","entity.name.class","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],"settings":{"foreground":"#4EC9B0"}},{"name":"Types declaration and references","scope":["support.class","entity.name.class","support.type","entity.name.type"],"settings":{"foreground":"#FFC66D"}},{"name":"Arrow Function","scope":["storage.type.function.arrow"],"settings":{"foreground":"#A9B7C6"}},{"name":"Types declaration and references, TS grammar specific","scope":["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json"],"settings":{"foreground":"#4EC9B0"}},{"name":"Control flow keywords","scope":"keyword.control","settings":{"foreground":"#CC7832","fontStyle":"bold"}},{"name":"Variable and parameter name","scope":["meta.definition.variable.name","support.variable"],"settings":{"foreground":"#A9B7C6"}},{"scope":["variable"],"settings":{"foreground":"#9876AA"}},{"name":"Object keys, TS grammar specific","scope":["meta.object-literal.key","meta.object-literal.key entity.name.function"],"settings":{"foreground":"#9876AA"}},{"name":"CSS property value","scope":["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],"settings":{"foreground":"#CE9178"}},{"scope":"token.info-token","settings":{"foreground":"#6796e6"}},{"scope":"token.warn-token","settings":{"foreground":"#cd9731"}},{"scope":"token.error-token","settings":{"foreground":"#f44747"}},{"scope":"token.debug-token","settings":{"foreground":"#b267e6"}}]}').nG.flatMap(e=>{let{scope:t,settings:n}=e;return[].concat(t).flatMap(e=>e.split(" ")).map(e=>{let t={token:e};return Object.keys(n).forEach(e=>{let r=n[e];r&&(t[e]=r)}),t})}),tZ=()=>{let e=(0,tW.useMonaco)(),t=(0,v.Fg)(),[n,r]=(0,g.useState)(void 0);return(0,g.useLayoutEffect)(()=>{if(e){let n=`jui-theme-${t.name.replace(" ","")}`,i=t.dark?"#dcdcdc":"#000";e.editor.defineTheme(n,{base:t.dark?"vs-dark":"vs",inherit:!0,colors:t.dark?{"editor.background":"#2B2B2B","editor.lineHighlightBackground":"#323232","editorLineNumber.foreground":"#606366","editorActiveLineNumber.foreground":"#a4a3a3","editorIndentGuide.background":"#373737","editorIndentGuide.activeBackground":"#505050","editorGutter.background":t.dark?"#313335":"#f0f0f0","editorBracketHighlight.foreground1":i,"editorBracketHighlight.foreground2":i,"editorBracketHighlight.foreground3":i,"editorBracketHighlight.foreground4":i,"editorBracketMatch.background":"#43454b","editorBracketMatch.border":"#00000000"}:{},rules:tY}),r(n)}},[e,t]),n},tJ=(0,I.zo)(tW.default)`
  .monaco-editor {
    .margin-view-overlays .line-numbers {
      text-align: left;
      padding-left: 7px;
    }

    .scrollbar .slider {
      border-radius: 0.25rem;
    }
  }
`,tX=e=>{let t=tZ();return(0,C.jsx)(C.Fragment,{children:t&&(0,C.jsx)(tJ,{...e,options:{minimap:{enabled:!1},lineHeight:22,showFoldingControls:"always",guides:{indentation:!0},overviewRulerBorder:!1,fontFamily:"JetBrains Mono",fontSize:13,scrollbar:{verticalScrollbarSize:14,horizontalScrollbarSize:8,verticalSliderSize:8,horizontalSliderSize:8,horizontal:"auto",vertical:"visible",alwaysConsumeMouseWheel:!1},...e.options},theme:t})})};function t0(e,t,n){return(t.has(n)?t:t.set(n,e())).get(n)}tX.__docgenInfo={description:"Monaco Editor styled to look like Intellij Platform's editor.\nTODO:\n - folding controls appearance is different and should be changed\n - highlighting pairs of parens, brackets, etc. is different.\n - context menu look different.\n - selection look different.\n - BUG: height is more than necessary. Needs investigation first.",methods:[],displayName:"Editor"};let t1=new WeakMap,t2=(e,t,n)=>{let r=t0(()=>"object"==typeof n?new WeakMap:new Map,t1,t);return t0(e,r,n)},t5={};function t6(e,t){return t2(()=>{let n=(0,Z.cn)(async t=>({value:await t(e),isLoading:!1})),r=(0,ei.Wg)(n,e=>{let n=void 0===e?t:e.value;return void 0!==n?{value:n,isLoading:!0}:void 0});return(0,Z.cn)(e=>e(r)??e(n))},e,t??t5)}let t4=t6((0,Z.cn)(async e=>{let t=e(tO);return{...t,content:await e(ek(t?.filePath??null))}})),t7=()=>{let[e,t]=tz(),n=(0,g.useRef)(),[r,i]=(0,g.useState)(!1),[o,a]=(0,g.useState)(null),s=(0,B.BH)(R.xm),l=(0,D.b9)(t_),{value:{content:c,filePath:d},isLoading:u}=(0,D.Dv)(t4),h=(0,N.d)({closePath:t.closePath,closeOthersTabs:t.closeOtherTabs}),m=(0,D.b9)(tM),f=(0,D.b9)(ek(d??null)),A=tl(),x=function(e){let t=(0,tD.w)(),n=e.current,r=n?.getSelection(),i=r?n?.getModel()?.getValueInRange(r):"";return t({id:"EditorPopupMenu",title:"Editor Popup Menu",description:"Editor Popup Menu",children:[t({id:"ShowIntentionsGroup",title:"Show Intentions Group",isSearchable:!1,menuPresentation:"section",children:[{id:"ShowIntentionActions",title:"Show Context Actions",icon:(0,C.jsx)(M.vq,{icon:"actions/intentionBulbGrey.svg"}),actionPerformed:()=>{tA()}}]}),i?{id:tx.$.COPY,title:"Copy",icon:(0,C.jsx)(M.vq,{icon:"actions/copy"}),actionPerformed:()=>{let e=n?.getSelection(),t=e?n?.getModel()?.getValueInRange(e):"";t&&tS()(t)}}:null,{id:tx.$.PASTE,title:"Paste",icon:(0,C.jsx)(M.vq,{icon:"actions/menu-paste"}),actionPerformed:()=>{n?.focus(),n?.trigger("keyboard","editor.action.clipboardPasteAction",{})}},t({id:"Copy.Paste.Special",title:"Copy / Paste Special",description:"Copy / Paste Special Editor Actions",menuPresentation:"submenu",children:[{id:tx.$.COPY_REFERENCE,title:"Copy Reference",description:"Copy reference to selected class, method or function, or a relative path to selected file",actionPerformed:()=>{tA()}},{id:tI,title:"Paste from history",description:"Paste from recent clipboards",actionPerformed:()=>{tA()}}]}),"divider",t({id:"FoldingGroup",title:"Folding",menuPresentation:"submenu",children:[{id:tT.EXPAND_REGION,title:"Expand",actionPerformed:t=>{e.current?.trigger(tP(t),"editor.unfold",{})}},{id:tT.EXPAND_REGION_RECURSIVELY,title:"Expand Recursively",actionPerformed:t=>{e.current?.trigger(tP(t),"editor.unfoldRecursively",{})}},{id:tT.EXPAND_ALL_REGIONS,title:"Expand All",actionPerformed:t=>{e.current?.trigger(tP(t),"editor.unfoldAll",{})}},"divider",{id:tT.COLLAPSE_REGION,title:"Collapse",actionPerformed:t=>{e.current?.trigger(tP(t),"editor.fold",{})}},{id:tT.COLLAPSE_REGION_RECURSIVELY,title:"Collapse Recursively",actionPerformed:t=>{e.current?.trigger(tP(t),"editor.foldRecursively",{})}},{id:tT.COLLAPSE_ALL_REGIONS,title:"Collapse All",actionPerformed:t=>{e.current?.trigger(tP(t),"editor.foldAll",{})}},"divider",t({id:tT.EXPAND_ALL_TO_LEVEL,title:"Expand all to level",menuPresentation:"submenu",children:[1,2,3,4,5].map(t=>({id:tT[`EXPAND_ALL_TO_LEVEL${t}`],title:`${t}`,actionPerformed:n=>{e.current?.trigger(tP(n),`editor.foldLevel${t}`,{})}}))}),"divider",{id:tT.COLLAPSE_DOC_COMMENTS,title:"Collapse Doc Comments",actionPerformed:t=>{e.current?.trigger(tP(t),"editor.foldAllBlockComments",{})}},"divider",{id:tT.TOGGLE_FOLDING,title:"Toggle Folding",actionPerformed:t=>{e.current?.trigger(tP(t),"editor.toggleFold",{})}}]}),t({id:"EditorLangPopupMenu",title:"EditorLangPopupMenu",menuPresentation:"section",children:[{id:tk,title:"Generate...",actionPerformed:()=>{tA()}}]}),"divider",{id:tT.CompareClipboardWithSelection,title:"Compare with Clipboard",description:"Compare current selection with clipboard",icon:(0,C.jsx)(M.vq,{icon:"actions/diffWithClipboard.svg"}),actionPerformed:()=>{tA()}}].filter(e=>null!=e)})}(n),y=function(e){void 0===e&&(e=""),i(!1),f(e),d&&A(d).catch(e=>{console.error("Could not update file status",e)})},j=eq(d?[d]:[]);return(0,C.jsx)(B.DG,{actions:[x],children:g=>{let{shortcutHandlerProps:f}=g;return(0,C.jsxs)(t8,{...(0,W.d)(j,f,{onFocus:()=>{i(!0),m({focus:()=>n.current?.focus()})}}),children:[e.length>0?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(F.X,{renderMenu:()=>(0,C.jsxs)(L.v2,{onAction:tA,children:[(0,C.jsx)(O.c,{children:"Close"},"close"),(0,C.jsx)(O.c,{children:"Close Other tabs"},"closeOthers"),(0,C.jsx)(O.c,{children:"Close all tabs"},"closeAll"),(0,C.jsx)(O.c,{children:"Close tabs to the left"},"closeLeft"),(0,C.jsx)(O.c,{children:"Close tabs to the right"},"closeRight")]}),children:(0,C.jsx)(_.s,{items:e,active:r,selectedKey:d,onSelectionChange:n=>{t.select(e.findIndex(e=>e.filePath===n))},noBorders:!0,children:t=>{let n=p.basename(t.filePath),r=(0,C.jsx)(M.vq,{icon:et(t.filePath)});return(0,C.jsx)(G.E,{textValue:n,inOverflowMenu:(0,C.jsx)(K._,{content:n,icon:r}),children:(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:t.filePath}),children:(0,C.jsx)(U.X,{icon:r,title:(0,C.jsx)(tp,{filepath:t.filePath,children:n}),closeButton:(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Close. Alt-Click to Close Others"}),children:(0,C.jsx)($.W,{onPress:n=>{n.altKey?h.current.closeOthersTabs(e.indexOf(t)):h.current.closePath(t.filePath)}})}),containerProps:{onDoubleClick:()=>{s?.perform()}}})})},t.filePath)}})}),"string"==typeof c?(0,C.jsx)(tX,{height:"100%",path:d,options:{contextmenu:!1},onMount:(e,t)=>{var r;e.focus(),e.onContextMenu(e=>{e.event.preventDefault(),Promise.resolve().then(()=>{a(e)})}),e.onDidScrollChange(()=>{a(null)}),(r=t).languages.typescript.typescriptDefaults.setCompilerOptions({jsx:Y.Mj.typescript.JsxEmit.React}),r.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),n.current=e,e.onDidChangeCursorPosition(e=>{l(e.position)}),e.onDidChangeModel(()=>{})},onChange:y,value:c??""}):c&&"UNSUPPORTED CONTENT"]}):(0,C.jsx)(tC,{}),u&&(0,C.jsx)(t9,{}),o&&(0,C.jsx)(Q.Z,{origin:o.event.browserEvent,onClose:()=>a(null),children:(0,C.jsx)(t3,{})})]})}})};function t3(){let e=(0,q.y)("EditorPopupMenu");return e?(0,C.jsx)(z.d,{actionGroup:e,children:e=>(0,C.jsx)(L.v2,{autoFocus:!0,...e})}):null}let t8=I.zo.div`
  position: relative;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: ${e=>{let{theme:t}=e;return t.color("Editor.background",t.isUnderDarcula()?"rgb(40,40,40)":t.commonColors.panelBackground)}};
`,t9=(0,I.zo)(b)`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`;t7.__docgenInfo={description:"Used as main content in the main ToolWindows. Shows currently opened files tabs and the editor.\n\nTODO: preserve editor state when switching between tabs\nTODO: support multiple editors in split view.",methods:[],displayName:"FileEditor"};var ne=n("45630"),nt=n("59683"),nn=n("29902");let nr=()=>(0,g.useMemo)(()=>({theme:{background:"rgb(43,43,43)",selection:"#214283"},fontFamily:"sans-serif",letterSpacing:-8,fontSize:12,lineHeight:1.3,cursorStyle:"block",cursorBlink:!0,cursorWidth:8,rendererType:"dom"}),[]),ni=(0,v.ZP)(nn.O).withConfig({displayName:"Terminal__StyledXterm",componentId:"sc-19jke66-0"})(["height:100%;background:rgb(43,43,43);"]),no=()=>{let[e,t]=(0,g.useState)(""),n=(0,g.useRef)(null),r=nr();return(0,g.useEffect)(()=>{setTimeout(()=>{n.current?.terminal.resize(80,10),n.current?.terminal.write("$ ")},3e3)},[]),(0,C.jsx)(ni,{ref:n,options:r,onData:r=>{let i=r.charCodeAt(0);if(13===i)e.length>0&&n.current?.terminal.write("\r\nYou typed: '"+e+"'"),n.current?.terminal.write("\r\n"+"$ "),t("");else{if(i<32||127===i)return;n.current?.terminal.write(r),t(e+r)}}})};no.__docgenInfo={description:"",methods:[],displayName:"Terminal"};var na=n("96730"),ns=n("19295");let nl=(0,Z.cn)(!0),nc=(0,ei.qs)(e=>new Set(e(te).flatMap(e=>{let{dir:t}=e;return er(t).concat(t)}).concat(e(eK).path))),nd=(0,Z.cn)(new Set([])),nu=(0,Z.cn)(async e=>{let t=e(nd),n=(await e(np)).byKey;return[..."all"===t?n.keys():t].map(e=>n.get(`${e}`)).filter(e=>null!=e)}),nh=(0,Z.cn)(g.createRef()),np=(0,Z.cn)(e=>ng(e(eK),e));function nm(e){e.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)}async function ng(e,t){let n=await t(eD(e.path)),r=new Map,i=e=>async n=>{let o={...n,parent:e};if("dir"===n.type){if(e_(n)){let e={...o,children:[]};return e.children=(await Promise.all((await t(eD(n.path))??[]).map(i(e)))).filter(e=>null!=e),nm(e.children),r.set(e.path,e),e}return null}return r.set(o.path,o),o},o=(await Promise.all((n||[]).map(i(null)))).filter(e=>null!=e);nm(o);let a={type:"project",path:e.path,name:e.name,parent:null,children:o};return r.set(a.path,a),{root:a,byKey:r}}(0,Z.cn)("name");let nf=(e,t,n)=>{let r=e(nc);t(nc,new Set([...r,...[e(eK).path].concat(er(n))]))},nA=(e,t,n)=>{let r=e(nh)?.current;r?.replaceSelection(n),r?.focus(n)},nx=()=>{let e=(0,eT.lV)(nf),t=(0,eT.lV)(nA);return n=>{e(n),t(n)}};var ny=n("76164"),nj=n("3414"),nv=n("38626"),nw=n("12550"),nC=n("10463"),nb=n("88710"),nE=n("39985");let nS="NewElement",nD="CopyReferencePopupGroup";function nI(e){let{getActionContext:t}=e;return(0,C.jsx)(nb.C,{"aria-label":"Project Tree actions",actionContext:t,actions:[{...(0,B.BH)(nS),title:"New",shortcut:void 0},new nE.P,(0,B.BH)(tx.$.CUT),(0,B.BH)(tx.$.COPY),(0,B.BH)(nD),(0,B.BH)(tx.$.PASTE),new nE.P,(0,B.BH)(tx.$.DELETE),new nE.P].filter(e=>null!=e)})}nI.__docgenInfo={description:"",methods:[],displayName:"ProjectViewContextMenu",props:{getActionContext:{required:!0,tsType:{name:"signature",type:"function",raw:"() => ActionContext",signature:{arguments:[],return:{name:"ActionContext"}}},description:""}}};let nk=e=>{let t=new WeakMap;return n=>{let r=t.get(n);return void 0===r&&(r=e(n),t.set(n,r)),r}},nT=nk(e=>{let t=(0,ei.Wg)(e,e=>e);return(0,Z.cn)(n=>n(t)??n(e))}),nP=nk(e=>(0,ei.Wg)(e,e=>e??null)),nB=()=>{let e=(0,D.Dv)(eK),t=tq(),n=(0,g.useRef)(null),r=(0,D.b9)(nh);(0,g.useLayoutEffect)(()=>{r(n)},[n]);let i=(0,D.Dv)(nT(np)),[o,a]=(0,D.KO)(nc),[s,l]=(0,D.KO)(nd),c=(0,D.KO)(nl)?(0,nC.Z)(e=>"dir"===e.type?1:2):eF.Z,d=eq("all"===s?[]:[...s].filter(e=>"string"==typeof e)),u=(0,g.useRef)(null),h=(0,g.useRef)(),p=()=>({element:u.current?.querySelector(`[data-key="${h.current}"]`)??null,event:null});return(0,C.jsx)(S,{children:i.root&&(0,C.jsx)(F.X,{ref:u,style:{height:"100%"},onOpen:e=>{let{target:t}=e;return h.current=t?.closest("[data-key]")?.dataset.key},renderMenu:()=>(0,C.jsx)(nI,{getActionContext:p}),children:(0,C.jsx)(ny.b,{"aria-label":"Project structure tree",treeRef:n,...d,items:[i.root],onAction:e=>{t.openPath(`${e}`)},fillAvailableSpace:!0,autoFocus:!0,selectionMode:"multiple",selectedKeys:s,onSelectionChange:l,expandedKeys:o,onExpandedChange:a,children:t=>(0,C.jsx)(O.c,{textValue:t.name,childItems:"children"in t?c(t.children):void 0,children:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)(nO,{node:t}),"project"===t.type?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("b",{children:(0,C.jsx)(nv.J,{})}),(0,C.jsx)(nj.e.Hint,{children:e.path})]}):(0,C.jsx)(nR,{node:t})]})},t.path)})})})},nR=e=>{let{node:t}=e;return"dir"===t.type?(0,C.jsx)(nN,{node:t}):(0,C.jsx)(nF,{node:t})},nN=e=>{let{}=e;return(0,C.jsx)(nv.J,{})},nF=e=>{let{node:t}=e,n=(0,g.useContext)(nw.k);return n?.isSelected&&n?.isContainerFocused?(0,C.jsx)(nv.J,{}):(0,C.jsx)(tp,{filepath:t.path,children:(0,C.jsx)(nv.J,{})})},nL={project:"nodes/folder",dir:X,file:J};function nO(e){let{node:t}=e,n="file"===t.type?et(t.name):nL[t.type]??null;return(0,C.jsx)(C.Fragment,{children:n&&(0,C.jsx)(M.vq,{icon:n})})}nB.__docgenInfo={description:"",methods:[],displayName:"ProjectViewPane"};var n_=n("66899"),nM=n("22188"),nG=n("39060"),nK=n("44233"),nH=n("39");function nV(e){let{tooltip:t="Show help contents",...n}=e;return(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(nH.k,{helpText:t}),children:(0,C.jsx)(nK.z,{variant:"icon","aria-label":"Help","aria-description":"Show help contents",...n,children:(0,C.jsx)("span",{style:{fontSize:18},children:"?"})})})}function nU(e,t){return void 0===t&&(t=eF.Z),e.filter(n=>{let r=t(n);return!e.find(e=>{var i;return e!==n&&(i=t(e),r.startsWith(i+m().sep))})})}nV.__docgenInfo={description:"",methods:[],displayName:"HelpButton",props:{tooltip:{defaultValue:{value:'"Show help contents"',computed:!1},required:!1,tsType:{name:"string"},description:""}}};let n$=async(e,t,n)=>{try{await r.promises.unlink(n);let i=await e(tt(n));i&&(await f.ZP.remove({fs:r,dir:i,filepath:m().relative(i,n)}),await ts(e,t,n))}catch(e){console.error(`error in deleting file ${n}`,e)}finally{e(tQ).closePath(n),t(eD(m().dirname(n))),t(ek(n))}},nQ=async(e,t,n)=>Promise.all(n.map(n=>n$(e,t,n))),nq=async(e,t,n)=>{let i=async o=>{let a=await r.promises.readdir(o);await Promise.all(a.map(async n=>{let a=m().resolve(o,n),s=await r.promises.stat(a);s.isFile()?await n$(e,t,a):s.isDirectory()&&await i(a)})),await r.promises.rmdir(o),t(eD(n))};try{await i(n)}catch(e){console.error(`error in deleting directory ${n}`,e)}finally{t(eD(m().dirname(n)))}},nz=async(e,t,n,i)=>{let o=m().join(n,i);if(await ej(r.promises,m().dirname(o)),await r.promises.exists(o))throw Error(`File ${o} already exists`);await r.promises.writeFile(o,"","utf-8"),t(ek(o)),e(tQ).openPath(o),await ts(e,t,o),t(eD(n))},nW=async(e,t,n,i)=>{let o=m().join(n,i);if(await r.promises.exists(o))throw Error(`File ${o} already exists`);await ej(r.promises,o),t(eD(n))};var nY=n("42133");let nZ=e=>"object"==typeof e&&null!==e&&"read"in e,nJ=e=>{let{isSearchable:t,isDisabled:n,actionPerformed:r,...i}=e,o=nZ(n)?(0,ei.Wg)(n,()=>!0):n,a=nZ(t)?(0,ei.Wg)(t,()=>!1):t;return(0,Z.cn)((e,t)=>{let{setSelf:n}=t,r=t=>nZ(t)?e(t):t;return{...i,isDisabled:r(o),isSearchable:r(a),actionPerformed:n}},async function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return r({get:e,set:t},...i)})},nX=new nY.C(`{count, plural,
    =1 {1 file}
    other {# files}
  }`,"en-US"),n0=new nY.C(`{count, plural,
    =1 {1 directory}
    other {# directories}
  }`,"en-US"),n1=nJ({id:tx.$.DELETE,title:"Delete",description:"Delete selected item",isDisabled:(0,Z.cn)(e=>!e(eQ)),actionPerformed:async e=>{let{get:t,set:n}=e,r=await t(nu),i=t(eW).current,o=t(eY).current;if(0===r.length)return;let a=nU(r,e=>e.path),s=a.filter(e=>"file"===e.type).map(e=>e.path),l=a.filter(e=>"project"===e.type||"dir"===e.type).map(e=>e.path);if(l.length>0){let e=1===l.length&&0===s.length?m().basename(l[0]):null;await o?.confirm({title:"Delete",okText:"Delete",message:C.jsxs("div",{style:{width:354},children:["Delete"," ",e?`"${e}"`:[{count:l.length,message:n0},{count:s.length,message:nX}].filter(e=>{let{count:t}=e;return t>0}).map(e=>{let{message:t,count:n}=e;return t.format({count:n})}).join(" and "),"?",C.jsx("br",{}),"All files and subdirectories in",e?` "${e}" `:" the selected directories ","will be deleted. ",C.jsx("br",{}),"You might not be able to fully undo this operation!"]})})&&await Promise.all([...l.map(e=>nq(t,n,e)),nQ(t,n,s)])}else i?.open(e=>{let{close:t}=e;return C.jsx(n2,{filePaths:s,close:t})}).then(e=>{e&&requestAnimationFrame(()=>{nQ(t,n,s)})})}});function n2(e){let{close:t,filePaths:n}=e;return(0,C.jsx)(n_.Du,{minWidth:"content",minHeight:"content",children:(0,C.jsx)(nM.b,{header:"Delete",content:(0,C.jsxs)("form",{id:"delete_dialog_form",onSubmit:e=>{e.preventDefault()},style:{padding:"0.75rem 1rem"},children:[(0,C.jsxs)("div",{style:{marginBottom:".5rem"},children:[1===n.length?`Delete file "${m().basename(n[0])}"`:`Delete ${n.length} files`,"?"]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[(0,C.jsx)(nG.X,{isDisabled:!0,children:"Safe delete (with usage search)"}),(0,C.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,C.jsx)(nG.X,{isDisabled:!0,children:"Search in comments and strings"}),(0,C.jsx)(nG.X,{isDisabled:!0,children:"Search for text occurrences"})]})]})]}),footer:(0,C.jsx)(nM.b.Footer,{left:(0,C.jsx)(nV,{onPress:()=>tA()}),right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nK.z,{onPress:()=>t(),children:"Cancel"}),(0,C.jsx)(nK.z,{autoFocus:!0,type:"submit",form:"delete_dialog_form",variant:"default",onPress:()=>{t(!0)},children:"Ok"})]})})})})}let n5=nJ({id:tx.$.COPY,title:"Copy",description:"Copy to clipboard",icon:(0,C.jsx)(M.vq,{icon:"actions/copy"}),isDisabled:(0,Z.cn)(e=>!e(eQ)),actionPerformed:async()=>{tA()}}),n6=nJ({id:tx.$.CUT,title:"Cut",description:"Cut to clipboard",icon:(0,C.jsx)(M.vq,{icon:"actions/menu-cut"}),isDisabled:(0,Z.cn)(e=>!e(eQ)),actionPerformed:async()=>{tA()}}),n4=nJ({id:tx.$.PASTE,title:"Paste",description:"Paste from clipboard",icon:(0,C.jsx)(M.vq,{icon:"actions/menu-paste"}),isDisabled:(0,Z.cn)(e=>!e(eQ)),actionPerformed:async()=>{tA()}}),{SELECT_IN_PROJECT_VIEW:n7}={SELECT_IN_PROJECT_VIEW:"SelectInProjectView"};function n3(){let e=(0,D.Dv)(nh),t=(0,na.x)({treeRef:e}),n=function(){let e=(0,D.Dv)(tO),t=nx();return[{id:n7,title:"Select Opened File",icon:(0,C.jsx)(M.vq,{icon:"general/locate"}),actionPerformed:()=>{e&&t(e.filePath)},isDisabled:!e,description:"Selects a context file in the Project View"},(0,D.Dv)(n1),(0,D.Dv)(n6),(0,D.Dv)(n5),(0,D.Dv)(n4)]}();return(0,C.jsx)(nt.n,{headerContent:"Project",actions:[...t,...n],additionalActions:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ns.K,{actionId:n7}),(0,C.jsx)(ns.K,{actionId:tx.$.EXPAND_ALL}),(0,C.jsx)(ns.K,{actionId:tx.$.COLLAPSE_ALL})]}),children:(0,C.jsx)(nB,{})})}n3.__docgenInfo={description:"",methods:[],displayName:"ProjectToolWindow"};var n8=n("87508"),n9=n("98454"),re=n("79926"),rt=n("89639");function rn(e){let{children:t}=e,[n,r]=(0,g.useState)(!1);return((0,g.useEffect)(()=>{let e=setTimeout(()=>{r(!0)},500);return()=>clearTimeout(e)},[]),n)?(0,C.jsx)(C.Fragment,{children:t}):null}rn.__docgenInfo={description:"",methods:[],displayName:"Delayed",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};var rr=n("61262");let ri=e=>e;function ro(e,t){return t?e?e.path!==t.path?(0,p.dirname)(e.path)===(0,p.dirname)(t.path)?ri({type:"RENAMED",before:e,after:t}):ri({type:"MOVED",before:e,after:t}):ri({type:"MODIFIED",before:e,after:t}):ri({type:"ADDED",after:t}):ri({type:"DELETED",before:e})}ro.Unversioned=e=>ri({type:"UNVERSIONED",after:e});let ra={ADDED:"ADDED",DELETED:"DELETED",MOVED:"MODIFIED",RENAMED:"MODIFIED",MODIFIED:"MODIFIED",UNVERSIONED:"UNKNOWN"};function rs(e,t){return e?.path===t?.path&&e.isDir===t.isDir}ro.fileStatus=function(e){return ra[e.type]??"NOT_CHANGED"},ro.path=function(e){return ro.revision(e).path},ro.content=function(e){return"after"in e?e.after.content():"before"in e?e.before.content():Promise.resolve("")},ro.isAddition=function(e){return"ADDED"===e.type},ro.isDeletion=function(e){return"DELETED"===e.type},ro.isRename=function(e){return"RENAMED"===e.type},ro.isMove=function(e){return"MOVED"===e.type},ro.isModified=function(e){return"MODIFIED"===e.type},ro.isUnversioned=function(e){return"UNVERSIONED"===e.type},ro.revision=function(e){return"after"in e?e.after:e.before},ro.equals=function(e,t){let n="before"in e&&"before"in t?rs(e.before,t.before):"before"in e=="before"in t,r="after"in e&&"after"in t?rs(e.after,t.after):"after"in e=="after"in t;return n&&r};let rl=(0,ei.xu)(e=>(0,Z.cn)(t=>Object.entries(t(tr(e))).map(t=>{let[n,r]=t,i={path:m().join(e,n),isDir:!1,content(){throw Error("Not implemented")}};return"ADDED"===r?ro(null,i):"MODIFIED"===r?ro(i,i):"DELETED"===r?ro(i,null):"UNKNOWN"===r?ro.Unversioned(i):null}).filter(e=>null!=e))),rc=(0,Z.cn)(e=>e(te).map(t=>{let{dir:n}=t;return e(rl(n))}).flat()),rd=async(e,t,n,i)=>{let o=eI(e,t),a=(await Promise.all(n.filter(e=>!ro.revision(e).isDir).map(async t=>{let n=await e(tt(ro.path(t)));if(n)return{repoRoot:n,change:t,relativePath:m().relative(n,ro.path(t))}}))).filter(e=>null!=e),s=(0,rr.Z)(e=>{let{repoRoot:t}=e;return t},a);await Promise.all(Object.entries(s).map(async a=>{let[s,l]=a,{toReset:c=[],toCheckout:d=[]}=(0,rr.Z)(e=>{let{change:{type:t}}=e;return"ADDED"!==t||i?"toCheckout":"toReset"},l);if(await Promise.allSettled(c.map(e=>{let{relativePath:t}=e;return(0,f.us)({fs:r,dir:s,filepath:t})})),d.length>0&&(await f.ZP.resolveRef({fs:r,dir:s,ref:"HEAD"}).catch(()=>null)?await (0,f.JE)({fs:r,dir:s,force:!0,filepaths:d.map(e=>{let{relativePath:t,change:{type:n}}=e;return t})}):await Promise.all(d.filter(e=>{let{change:t}=e;return"ADDED"===t.type}).map(e=>{let{change:t}=e,n=ro.path(t);return r.promises.unlink(n)}))),i){let t=e(tQ);n.filter(ro.isAddition).forEach(e=>{t.closePath(ro.path(e))})}nU(l.flatMap(e=>{let{change:t}=e;return"MODIFIED"===t.type?[]:"MOVED"===t.type?[t.before.path,t.after.path]:ro.path(t)})).map(m().dirname).forEach(e=>t(eD(e))),await Promise.allSettled(l.map(async n=>{let{relativePath:i,change:a}=n,l=ro.path(a);await o(l),await (0,f.us)({fs:r,dir:s,filepath:i}),await ts(e,t,l)}))}))},ru=()=>(0,eT.lV)(rd),rh=(0,Z.cn)([{id:"some-UUID",name:"Changes",comment:"last modified commit message",changes:[],active:!0},{id:"some-other-UUID",name:"Some other changelist",comment:"Some empty changelist for testing",changes:[],active:!1}]),rp=(0,Z.cn)(e=>e(rh).find(e=>e.active)??null),rm=(0,Z.cn)(e=>e(rc).filter(ro.isUnversioned)),rg=()=>(0,eT.lV)((0,g.useCallback)((e,t,n)=>{let r=e(rh),i=r.find(e=>{let{id:t}=e;return t===n});i&&t(rh,r.map(e=>({...e,active:e===i})))},[]));function rf(){let e=(0,D.Dv)(rc),t=(0,D.b9)(rh);return(0,g.useEffect)(()=>{t(t=>{let n=e.filter(e=>!ro.isUnversioned(e)),r=t.map(e=>({...e,changes:e.changes.map(e=>n.find(t=>ro.equals(t,e))).filter(e=>null!=e)})),i=r.flatMap(e=>{let{changes:t}=e;return t}),o=n.filter(e=>!i.find(t=>ro.equals(e,t)));return(r.find(e=>{let{active:t}=e;return t})??r[0]).changes.push(...o),r})},[e]),null}var rA=n("20619");let rx=e=>{let{getPath:t,mapNode:n=eF.Z,createDirectoryNode:r=e=>e,shouldCollapseDirectories:i=!1}=e;return e=>{let o={},a=e.map(n).map(e=>{let n=t(e);return er(n.startsWith("/")?n:`/${n}`).reduce((e,t)=>{o[t]||(o[t]=r({type:"directory",dirPath:t,parentNodePath:"",children:[]})),ry(e)&&(e.parentNodePath=t);let n=o[t];return n.children=n.children.includes(e)?n.children:[e,...n.children],n},e)}),s=(0,rA.Z)(a);return i?s.map(e=>(function e(t,n){let{children:r,dirPath:i,parentNodePath:o}=n;return 1===n.children.length&&ry(n.children[0])?(i=n.children[0].dirPath,r=n.children[0].children.map(n=>ry(n)?e(t,{...n,parentNodePath:i}):n),e(t,t({type:"directory",dirPath:i,parentNodePath:o,children:r}))):{...n,children:r.map(n=>ry(n)?e(t,n):n)}})(r,e)):s}};function ry(e){return"type"in e&&"directory"===e.type}let rj={ROLLBACK:"ChangesView.Revert",REFRESH:"ChangesView.Refresh",SHELVE_SILENTLY:"ChangesView.ShelveSilently",SHELVE:"ChangesView.Shelve",UNSHELVE_SILENTLY:"ChangesView.UnshelveSilently",NEW_CHANGELIST:"ChangesView.NewChangeList",ADD_UNVERSIONED:"ChangesView.AddUnversioned",RENAME_CHANGELIST:"ChangesView.Rename",REMOVE_CHANGELIST:"ChangesView.RemoveChangeList",SET_DEFAULT_CHANGELIST:"ChangesView.SetDefault",MOVE_TO_ANOTHER_CHANGELIST:"ChangesView.Move",SHOW_DIFF:"Diff.ShowDiff",CHECKIN_FILES:"CheckinFiles",CHECKIN_PROJECT:"CheckinProject",JUMP_TO_SOURCE:tx.$.EDIT_SOURCE,GROUP_CHANGES_VIEW_POPUP_MENU:"ChangesViewPopupMenu",GROUP_BY_DIRECTORY:"ChangesView.GroupBy.Directory",GIT_ADD:"Git.Add",GIT_INIT:"Git.Init",GIT_CLONE:"Git.Clone",GIT_CREATE_NEW_BRANCH:"Git.CreateNewBranch",GIT_BRANCHES:"Git.Branches",GIT_LOG_HIDE_BRANCHES:"Git.Log.Hide.Branches",GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH:"Git.Log.Branches.Navigate.Log.To.Selected.Branch",GIT_UPDATE_SELECTED:"Git.Update.Selected",FOCUS_TEXT_FILTER:"Vcs.Log.FocusTextFilter",MATCH_CASE:"Vcs.Log.MatchCaseAction",REG_EXP:"Vcs.Log.EnableFilterByRegexAction",COPY_REVISION_NUMBER:"Vcs.CopyRevisionNumberAction",LOG_REFRESH:"Vcs.Log.Refresh",SHOW_DETAILS:"Vcs.Log.ShowDetailsAction",SHOW_DIFF_PREVIEW:"Vcs.Log.ShowDiffPreview",PRESENTATION_SETTINGS:"Vcs.PresentationSettings",FILE_HISTORY_PRESENTATION_SETTINGS:"Vcs.FileHistory.PresentationSettings",CopyPathFromRepositoryRootProvider:"CopyPathFromRepositoryRootProvider"},rv=(e,t)=>`${e}_${t}`,rw=e=>rv("change",ro.path(e)),rC=function(e,t){return void 0===t&&(t=!0),{type:"change",key:rw(e),change:e,showPath:t}},rb=e=>"children"in e,rE=e=>"change"===e.type,rS=e=>rb(e)?e.children:null,rD={id:"repository",title:"Repository",isAvailable:(0,Z.cn)(e=>e(te).length>1),groupFn:(0,Z.cn)(e=>t=>e(te).map(e=>{var n;return void 0===(n=t.filter(t=>ro.path(t.change)?.startsWith(e.dir)))&&(n=[]),{type:"repo",key:rv("repo",e.dir),repository:e,children:n}}))},rI={id:"directory",title:"Directory",isAvailable:!0,useShortcutOf:rj.GROUP_BY_DIRECTORY,groupFn:rx({shouldCollapseDirectories:!0,createDirectoryNode:e=>{var t,n;let{dirPath:r,parentNodePath:i,children:o}=e;return void 0===(t=o)&&(t=[]),void 0===n&&(n=""),{type:"directory",key:n+rv("directory",r),dirPath:r,parentNodePath:i,children:t}},mapNode:e=>rC(e.change,!1),getPath:e=>ro.path(e.change)})},rk=[rD,rI],rT=(0,Z.cn)(e=>rk.filter(t=>nZ(t.isAvailable)?e(t.isAvailable):t.isAvailable)),rP=(e,t)=>{if(0===e.length||0===t.length)return t;let n=e.slice(1),r=t.filter(rE),i=t.filter(rb),o=e[0](r);return[...i,...o].forEach(e=>{e.children=rP(n,e.children)}),o.filter(e=>e.children.length>0)},rB=e=>{let{get:t,isActive:n,groupings:r}=e;return e=>{let i=e=>nZ(e)?t(e):e,o=r.filter(e=>{let{id:t,isAvailable:r}=e;return i(r)&&i(n(t))}).map(e=>{let{groupFn:t}=e;return i(t)}).map(t=>e?function(){return t(...arguments).map(t=>({...t,key:`${e}:${t.key}`}))}:t);return e=>rP(o,e)}};var rR=n("64374"),rN=n("69611"),rF=n("66095");let rL=(0,Z.cn)(!1),rO=(0,Z.cn)({height:500}),r_=(0,Z.cn)([]),rM=(0,Z.cn)(e=>{let t=e(r_),{rootNodes:n}=e(r5),r=n.filter(e=>"changelist"===e.type&&t.some(t=>e.changeList.changes.includes(t)));return 0===r.length?n.filter(e=>"changelist"===e.type&&e.changeList.active):r}),rG=(0,Z.cn)(e=>{let t=e(r_),n=e(rM),r=(0,rR.Bp)(e=>rb(e)?e.children:null,e=>e.key,n,t.map(rw));return new Set(r.length?r:(0,rR.Om)(e=>rb(e)?e.children:null,e=>e.key,n))});function rK(e){let t=new Map,n=new Map,r=new Set;return(0,rR.Ck)(rS,(e,i)=>{if(n.set(e.key,e),"children"in e&&r.add(e.key),!i)return 1;let o=i.reduce((e,t)=>e+t,0);return t.set(e.key,o),o},e),{rootNodes:e,fileCountsMap:t,byKey:n,expandAllKeys:r}}let rH=e=>({type:"changelist",key:rv("changelist",e.id),changeList:e,children:e.changes.map(e=>rC(e))}),rV=(0,Z.cn)(!1),rU=(0,Z.cn)(!1),r$=(0,ei.xu)(e=>(0,Z.cn)(!0)),rQ=(0,Z.cn)(new Set([])),rq=(0,Z.cn)(e=>{let t=e(rQ);if("all"===t){let{rootNodes:t}=e(r5);return new Set((0,rR.eA)(e=>"children"in e?e.children:[],(e,t)=>{let n=t??[];return n.push(e),n},t).flat().map(e=>e.key))}return t}),rz=(0,Z.cn)(e=>{let t=e(rq),{byKey:n}=e(r5);return new Set([...t].map(e=>n.get(e)).filter(e=>null!=e))}),rW=(0,Z.cn)(e=>{let t=e(rz),n=new Set,r=e=>{e&&("change"===e.type&&n.add(e.change),rb(e)&&e.children.forEach(r))};return t.forEach(r),n}),rY=(0,Z.cn)(e=>{let t=e(rz),n=e(rh),r=new Set,i=e=>{if(e){if("changelist"===e.type&&r.add(e.changeList),"change"===e.type){let t=n.find(t=>t.changes.includes(e.change));t&&r.add(t)}rb(e)&&e.children.forEach(i)}};return t.forEach(i),r}),rZ=(0,Z.cn)(new Set([])),rJ=(0,Z.cn)(e=>{let t=e(rZ);return e(rc).filter(e=>t.has(rw(e)))}),rX=(0,Z.cn)((e,t)=>{let{setSelf:n}=t,{rootNodes:r}=e(r5),i=e(rZ);return new rN.f({items:i,...(0,rF.y)(n)},{rootNodes:r,getChildren:e=>rb(e)?e.children:null,getKey:e=>e.key})},(e,t,n)=>{t(rZ,n)}),r0=(0,ei.qs)(e=>new Set(e(r5).rootNodes.map(e=>[e.key,...e.children.map(e=>e.key)]).flat())),r1=(0,Z.cn)(e=>e(rT).map(t=>({...t,isActive:e(r$(t.id))}))),r2=(e,t)=>({...e,children:t(e.children)}),r5=(0,Z.cn)(e=>{let t=(0,nC.Z)(e=>{let{active:t}=e;return!t},e(rh)).map(rH),n=rB({get:e,groupings:rk,isActive:r$}),r=e(rm),i=t.map(e=>r2(e,n(e.key)));if(r.length>0){let e={key:"unversioned",type:"unversioned",children:r.map(e=>rC(e))};i.push(r2(e,n("unversioned")))}return rK(i)}),r6=(0,ei.xu)(e=>(0,Z.cn)("horizontal"===e?.4:.3)),r4=(0,Z.cn)(!1),r7=(0,Z.cn)(""),r3=(0,Z.cn)(""),r8=(0,Z.cn)(null),r9=(0,Z.cn)(e=>{let t=e(e$);return e(rc).filter(e=>t.some(t=>ro.path(e).startsWith(t)))}),ie=(e,t,n)=>{let r=(n?e(rc).filter(e=>n.some(t=>ro.path(e).startsWith(t))):e(r9)).map(rw);if(t(rZ,new Set(r)),r.length>0){let n=(0,rR.Bp)(e=>rb(e)?e.children:null,e=>e.key,e(r5).rootNodes,r);t(r0,e=>new Set([...e??new Set,...n])),t(rQ,new Set([r[0]]))}},it=function(e,t,n){void 0===n&&(n=!0);let r=e(e$),i=e(rW);t(r_,(n&&r.length>0?e(r9):null)??[...i]),t(rL,!0)};var ir=n("50907"),ii=n("51726");let io=()=>0==[...(0,D.Dv)(rQ)].length?null:(0,C.jsx)(nb.C,{"aria-label":"Changes actions",actions:[(0,B.BH)(rj.CHECKIN_FILES),(0,B.BH)(rj.ROLLBACK),(0,B.BH)(rj.JUMP_TO_SOURCE),new nE.P,(0,B.BH)(rj.SHELVE),new nE.P,(0,B.BH)(rj.NEW_CHANGELIST),(0,B.BH)(rj.RENAME_CHANGELIST),(0,B.BH)(rj.REMOVE_CHANGELIST),(0,B.BH)(rj.SET_DEFAULT_CHANGELIST),(0,B.BH)(rj.MOVE_TO_ANOTHER_CHANGELIST),new nE.P,(0,B.BH)(tx.$.REFRESH)].filter(e=>null!=e)});io.__docgenInfo={description:"",methods:[],displayName:"ChangesViewTreeContextMenu"};var ia=n("84174");async function is(e,t){let n=await Promise.all(t.map(t=>e(t).catch(()=>!1)));return t.filter((e,t)=>n[t])}async function il(e){let{fs:t,dir:n,localBranchName:r}=e,i=await f.ZP.getConfig({fs:t,dir:n,path:`branch.${r}.merge`}),o=await f.ZP.getConfig({fs:t,dir:n,path:`branch.${r}.remote`});return i&&o?`${o}/${i.replace(/^refs\/heads\//,"")}`:null}let ic=(0,ei.xu)(e=>es(async t=>{let{}=t;return Promise.all((await f.ZP.listBranches({fs:r,dir:e})).map(async t=>({name:t,trackingBranch:await il({fs:r,dir:e,localBranchName:t})})))})),id=(0,ei.xu)(e=>es(async()=>{let t=await f.ZP.listRemotes({fs:r,dir:e});return(await Promise.all(t.map(t=>{let{remote:n}=t;return f.ZP.listBranches({fs:r,dir:e,remote:n}).then(e=>e.filter(e=>"HEAD"!==e).map(e=>({name:e,remote:n})))}))).flat()})),iu=(0,ei.xu)(e=>es(async t=>{let n=await t(ih(e)),r=await t(ic(e));return 0===r.length&&n&&(r=r.concat({name:n,trackingBranch:null})),{repoRoot:e,currentBranch:r.find(e=>e.name===n)||null,localBranches:r,remoteBranches:await t(id(e))}})),ih=(0,ei.xu)(e=>es(()=>f.ZP.currentBranch({fs:r,dir:e,fullname:!1}))),ip=(0,Z.cn)(async e=>Promise.all(e(te).map(t=>{let{dir:n}=t;return e(iu(n))}))),im=(0,ei.xu)(e=>(0,Z.cn)(async t=>{let n=await t(tt(e)),r=n?await t(iu(n)):null;return console.log(`repo root for ${e}`,n,n&&r),n&&r?.currentBranch?.name||null})),ig=[{branchType:"LOCAL",branchName:"master"},{branchType:"REMOTE",branchName:"origin/master"}];function iA(e){return e?.map.entry.flatMap(e=>e?.value.list["branch-info"].map(t=>{let{"@source":n,"@repo":r}=t;return{branchType:e["@type"],branchName:n,repoRoot:r}}))||[]}function ix(e){return{map:{entry:Object.entries((0,rr.Z)(e=>{let{branchType:t}=e;return t},e)).map(e=>{let[t,n]=e;return{"@type":t,value:{list:{"branch-info":n.map(e=>({"@repo":e.repoRoot,"@source":e.branchName}))}}}})}}}let iy=eB.z.object({"branch-storage":eB.z.object({map:(s=eB.z.enum(["LOCAL","REMOTE"]),l=eB.z.object({list:e3(eB.z.object({"@repo":eB.z.string(),"@source":eB.z.string()}),"branch-info")}),eB.z.object({entry:e7(eB.z.object({"@type":s,value:l}))}))})}),ij=e0({branches:[],excludedBranches:[]},{schema:eB.z.object({"favorite-branches":iy.optional(),"exclude-from-favorite":iy.optional()}).optional(),componentName:"Git.Settings",read:e=>({branches:iA(e?.["favorite-branches"]?.["branch-storage"]),excludedBranches:iA(e?.["exclude-from-favorite"]?.["branch-storage"])}),write:(e,t)=>{let n={...t};return e.branches.length>0?n["favorite-branches"]={"branch-storage":ix(e.branches)}:delete n["favorite-branches"],e.excludedBranches.length>0?n["exclude-from-favorite"]={"branch-storage":ix(e.excludedBranches)}:delete n["exclude-from-favorite"],n}}),iv=(0,ia.R)(ij,e=>e.prop("branches")),iw=(0,ia.R)(ij,e=>e.prop("excludedBranches")),iC=(0,ei.xu)(e=>(0,Z.cn)(t=>iE(t(iv),t(iw),e)),eL.Z);function ib(e){return ig.some(t=>{let{branchType:n,branchName:r}=t;return r===e.branchName&&n===e.branchType})}let iE=(e,t,n)=>!!e.find((0,eL.Z)(n))||!t.find((0,eL.Z)(n))&&ib(n);function iS(){return(0,eT.lV)((0,g.useCallback)(function(e,t,n,r){void 0===r&&(r=!iE(e(iv),e(iw),n));let i=e=>e.filter(e=>!(0,eL.Z)(e,n)),o=e=>e.some((0,eL.Z)(n))?e:e.concat(n);r?(t(iw,i),ib(n)||t(iv,o)):(t(iv,i),ib(n)&&t(iw,o))},[]))}function iD(){let e=(0,D.Dv)(iv),t=(0,D.Dv)(iw);return{isFavorite:n=>iE(e,t,n),toggleFavorite:iS()}}let iI=e=>{let{repo:t}=e,n=(0,D.Dv)(im(t.dir));return(0,C.jsx)(C.Fragment,{children:n})};iI.__docgenInfo={description:"",methods:[],displayName:"RepoCurrentBranchName",props:{repo:{required:!0,tsType:{name:"VcsDirectoryMapping"},description:""}}};let ik=I.zo.span`
  width: 14px;
  height: 14px;
  align-self: center;
  margin-right: 0.2rem;
  position: relative;

  //  after pseudo element is used to create the color mixing implemented here:
  //  https://github.com/JetBrains/intellij-community/blob/82f201386c3f7a339ff25fc8f3389024c8078a87/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/VcsLogColorManagerImpl.java#L60
  &&:after {
    content: "";
    position: absolute;
    inset: 0;
    opacity: 0.75;
    background: ${e=>{let{theme:t}=e;return t.color("Table.background")||(t.dark?"#3C3F41":"#fff")}};
  }
`,iT=e=>{let t=(0,D.Dv)(te).findIndex(t=>t.dir===e),n=(0,v.Fg)(),r=[n.commonColors.red,n.commonColors.blue];return r[t%r.length]??r[0]},iP=g.forwardRef((e,t)=>{let{rootPath:n,...r}=e;return(0,C.jsx)(ik,{ref:t,...r,style:{...r.style,backgroundColor:iT(n)}})});iP.__docgenInfo={description:"",methods:[],displayName:"RepoColorIcon",props:{rootPath:{required:!0,tsType:{name:"string"},description:""}}};let iB=I.zo.span`
  display: inline-flex;
  align-self: center;
  height: 1.1rem;
  line-height: 1.1rem;
  padding: 0 0.25rem;

  background: ${e=>{let{theme:t}=e;return t.currentBackgroundAware(`color-mix(in srgb, ${t.color("VersionControl.Log.Commit.currentBranchBackground",t.dark?"rgb(63, 71, 73)":"rgb(228, 250, 255)")}, ${t.color("VersionControl.RefLabel.backgroundBase",t.dark?"#fff":"#000")} ${(t.value("VersionControl.RefLabel.backgroundBrightness")??.08)*100}%)`)}};
  color: ${e=>{let{theme:t}=e;return t.currentForegroundAware(t.color("VersionControl.RefLabel.foreground",t.dark?"#909090":"#7a7a7a"))}};
`,iR=new nY.C(`{fileCount, plural,
    =0 {No files}
    =1 {1 file}
    other {# files}
  }`,"en-US");function iN(e){return iR.format({fileCount:e})}let iF=e=>{let{node:t}=e;return(0,C.jsx)(nj.e.Hint,{children:t.showPath&&m().dirname(ro.path(t.change))})},iL={repo:(e,t)=>{let{fileCount:n}=t;return{textValue:m().basename(e.repository.dir),rendered:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)(iP,{rootPath:e.repository.dir}),(0,C.jsx)(nv.J,{}),(0,C.jsx)(nj.e.Hint,{children:iN(n)}),(0,C.jsx)(iB,{children:(0,C.jsx)(iI,{repo:e.repository})})]})}},directory:(e,t)=>{let{fileCount:n}=t;return{textValue:e.parentNodePath?m().relative(e.parentNodePath,e.dirPath):e.dirPath,rendered:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)(M.vq,{icon:X}),(0,C.jsx)(nv.J,{}),(0,C.jsx)(nj.e.Hint,{children:iN(n)})]})}},change:e=>({textValue:m().basename(ro.path(e.change)),rendered:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)(M.vq,{icon:et(ro.path(e.change))}),(0,C.jsx)(tm,{status:ro.fileStatus(e.change),children:(0,C.jsx)(nv.J,{})}),ro.isRename(e.change)?` - renamed from ${m().basename(e.change.before.path)}`:ro.isMove(e.change)&&` - moved from ${m().relative(m().dirname(e.change.after.path),m().dirname(e.change.before.path)).replace(/(\.\.\/){2,}[!.]/g,"..")}/`,(0,C.jsx)(iF,{node:e})]})})},iO=(e,t)=>{let n={...iL,...t,...e},r=e=>{let{node:t,fileCountsMap:r}=e,{textValue:i,rendered:o}=(0,n[t.type])(t,{fileCount:r.get(t.key)||0,dirCount:0});return{key:t.key,childItems:rb(t)?t.children:[],hasChildItems:rb(t)&&t.children?.length>0,textValue:i,children:o}};return{getItemProps:r,getTextValue:(e,t)=>{let{fileCountsMap:r}=t;return(0,n[e.type])(e,{fileCount:r.get(e.key)||0,dirCount:0}).textValue},itemRenderer:e=>{let{fileCountsMap:t}=e;return e=>(0,C.jsx)(O.c,{...r({node:e,fileCountsMap:t})})}}};function i_(){let e=(0,D.Dv)(to);return(0,C.jsx)(C.Fragment,{children:e&&(0,C.jsx)(rn,{children:", updating..."})})}let iM=iO({changelist:(e,t)=>{let{fileCount:n}=t;return{textValue:e.changeList.name,rendered:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)("span",{style:{fontWeight:e.changeList.active?"bold":void 0},children:(0,C.jsx)(nv.J,{})}),(0,C.jsxs)(nj.e.Hint,{children:[iN(n),(0,C.jsx)(i_,{})]})]})}},unversioned:(e,t)=>{let{fileCount:n}=t;return{textValue:"Unversioned Files",rendered:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)(nv.J,{}),(0,C.jsxs)(nj.e.Hint,{children:[iN(n),(0,C.jsx)(i_,{})]})]})}}}),iG=e=>{let{treeRef:t}=e,{rootNodes:n,fileCountsMap:r,byKey:i}=(0,D.Dv)(r5),[o,a]=(0,D.KO)(rQ),[s,l]=(0,D.KO)(r0),c=(0,D.Dv)(rX),{openPath:d}=tq(),u=(0,eT.lV)((0,g.useCallback)((e,t,n)=>{let r=e(r5).byKey.get(n);return r?.type==="change"&&d(ro.path(r.change)),r},[])),h=eq("all"===o?[]:[...o].flatMap(e=>{let t=i.get(e);return t?function e(t){return t?.type==="directory"?[t.dirPath]:t?.type==="change"?[ro.path(t.change)]:rb(t)?t.children.flatMap(e):[]}(t):[]}));return(0,C.jsx)(F.X,{renderMenu:()=>(0,C.jsx)(io,{}),style:{height:"100%"},children:(0,C.jsx)(ir.G,{"aria-label":"Commit changes tree",treeRef:t,items:n,selectionMode:"multiple",selectedKeys:o,expandedKeys:s,onExpandedChange:l,onSelectionChange:a,onAction:u,nestedSelection:c,fillAvailableSpace:!0,autoFocus:"first",...h,children:e=>{let t=iM.getItemProps({fileCountsMap:r,node:e});return(0,C.jsxs)(O.c,{...t,children:[e.children?.length!==0&&(0,C.jsx)(ii.x,{selectionState:c.getSelectionState(e),onToggle:()=>c.toggle(e)}),t.children]})}})})};iG.__docgenInfo={description:"TODO: unversioned files\nTODO: show diff/source on double click (on action to be more precise)",methods:[],displayName:"ChangeViewTree",props:{treeRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"TreeRefValue"}],raw:"RefObject<TreeRefValue>"},description:""}}};var iK=n("15397"),iH=n("39664"),iV=n("51837");let iU=()=>{let e=[(0,B.BH)(rj.NEW_CHANGELIST),(0,B.BH)(rj.RENAME_CHANGELIST),(0,B.BH)(rj.REMOVE_CHANGELIST),(0,B.BH)(rj.SET_DEFAULT_CHANGELIST),(0,B.BH)(rj.MOVE_TO_ANOTHER_CHANGELIST)].filter(e=>null!=e);return(0,C.jsx)(iH.p,{renderMenu:t=>{let{menuProps:n}=t;return(0,C.jsx)(nb.C,{actions:e,children:e=>(0,C.jsx)(iV.w,{...n,...e})})},children:(0,C.jsx)(M.vq,{icon:"vcs/changelist.svg"})})};iU.__docgenInfo={description:"",methods:[],displayName:"ChangeListsActionButton"};var i$=n("83556"),iQ=n("12152");function iq(e){let{groupings:t,onToggle:n}=e;return 1===t.length&&t[0].icon?(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:`Group By ${t[0].title}`}),children:(0,C.jsx)(i$.hU,{isPressed:t[0].isActive,onPress:()=>n(t[0].id),children:t[0].icon})}):(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Group By"}),children:(0,C.jsx)(iH.p,{renderMenu:e=>{let{menuProps:r}=e;return(0,C.jsx)(L.v2,{...r,selectedKeys:t.filter(e=>{let{isActive:t}=e;return t}).map(e=>{let{id:t}=e;return t}),onAction:e=>{let r=t.find(t=>{let{id:n}=t;return n===e})?.id;r&&n(r)},children:(0,C.jsx)(iQ.$,{title:"Group By",children:t.map(e=>{let{id:t,title:n}=e;return(0,C.jsx)(O.c,{children:n},t)})})})},children:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"})})})}iq.__docgenInfo={description:"",methods:[],displayName:"GroupByActionButton",props:{groupings:{required:!0,tsType:{name:"Array",elements:[{name:"Grouping",elements:[{name:"K"}],raw:"Grouping<K>"}],raw:"Array<Grouping<K>>"},description:""},onToggle:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: K) => void",signature:{arguments:[{name:"id",type:{name:"K"}}],return:{name:"void"}}},description:""}}};let iz=()=>{let e=(0,D.Dv)(r1),t=(0,eT.lV)((0,g.useCallback)((e,t,n)=>{t(r$(n),e=>!e)},[]));return(0,C.jsx)(iq,{groupings:e,onToggle:t})};iz.__docgenInfo={description:"",methods:[],displayName:"ChangesGroupByActionButton"};let iW=()=>{let[e,t]=(0,D.KO)(rU),[n,r]=(0,D.KO)(rV),i={showRelatedFiles:e,showIgnoredFiles:n};return(0,C.jsx)(iH.p,{renderMenu:e=>{let{menuProps:n}=e;return(0,C.jsxs)(L.v2,{...n,selectedKeys:Object.keys(i).filter(e=>i[e]),onAction:e=>{switch(e){case"showIgnoredFiles":return r(e=>!e);case"showRelatedFiles":return t(e=>!e)}},children:[(0,C.jsx)(O.c,{children:"Show Ignored Files"},"showIgnoredFiles"),(0,C.jsx)(O.c,{children:"Show Files Related to Active Changelist"},"showRelatedFiles")]})},children:(0,C.jsx)(M.vq,{icon:"actions/show.svg"})})};function iY(){return(0,C.jsxs)(iK.o,{border:"bottom",children:[(0,C.jsx)(ns.K,{actionId:tx.$.REFRESH}),(0,C.jsx)(ns.K,{actionId:rj.ROLLBACK}),(0,C.jsx)(ns.K,{actionId:rj.SHOW_DIFF}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Changelists"}),children:(0,C.jsx)(iU,{})}),(0,C.jsx)(ns.K,{actionId:rj.SHELVE_SILENTLY}),(0,C.jsx)(iK.J,{}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Group By"}),children:(0,C.jsx)(iz,{})}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"View Options"}),children:(0,C.jsx)(iW,{})}),(0,C.jsx)(ns.K,{actionId:tx.$.EXPAND_ALL}),(0,C.jsx)(ns.K,{actionId:tx.$.COLLAPSE_ALL})]})}async function iZ(e){let{updates:t,fs:n,dir:r,gitdir:i,...o}=e,a=await f.ZP.resolveRef({fs:n,dir:r,gitdir:i,ref:"HEAD"}),s=(await f.ZP.readTree({fs:n,dir:r,gitdir:i,oid:a})).tree,l=!1;if(await Promise.all(Object.entries(t).map(async e=>{let[t,o]=e,a=s.findIndex(e=>{let{path:n}=e;return n===t});if(null==o){a>-1&&(l=!0,s.splice(a,1));return}let c=s[a],d=await f.ZP.writeBlob({fs:n,dir:r,gitdir:i,blob:o});c?c.oid=d:s.push({type:"blob",mode:"100644",oid:d,path:t}),l=!0})),!l)throw Error("Nothing to commit!");let c=await f.ZP.writeTree({fs:n,dir:r,gitdir:i,tree:s}),d=await f.ZP.commit({...o,fs:n,dir:r,gitdir:i,tree:c});await Promise.all(Object.keys(t).map(e=>f.ZP.resetIndex({fs:n,dir:r,gitdir:i,filepath:e,ref:d})))}iW.__docgenInfo={description:"",methods:[],displayName:"ViewOptionsActionButton"},iY.__docgenInfo={description:"",methods:[],displayName:"ChangesViewToolbar"};var iJ=n("76680");let iX=(0,Z.cn)([]),i0=(0,Z.cn)(e=>e(iX)[0]),i1=(0,Z.cn)(e=>e(iX).length),i2=0,i5=()=>{let e=(0,D.b9)(iX);return(0,iJ.$)((t,n)=>{let{title:r,isCancelable:i=!1}=t,o=new ef.qf.cancelToken,a=++i2;e(e=>[...e,{id:i2++,title:r,abortController:o,isCancelable:i,progress:{fraction:0,text:"",secondaryText:"",isIndeterminate:!1}}]);let s=t=>{e(e=>e.map(e=>e.id===a?{...e,progress:{...e.progress,...t}}:e))},l="function"==typeof n?{run:n}:n;return Promise.resolve(l.run({setFraction(e){s({fraction:e})},setText(e){s({text:e})},setSecondaryText(e){s({secondaryText:e})},setIndeterminate(e){s({isIndeterminate:e})}},o.signal)).finally(()=>{e(e=>e.filter(e=>e.id!==a)),l.onFinished?.()}),a})},i6=()=>(0,eT.lV)((0,g.useCallback)((e,t,n)=>{let r=e(iX).find(e=>e.id===n);r&&r.abortController.abort()},[])),i4=(0,ei.xu)(e=>{let{repoRoot:t,ref:n}=e;return es(()=>f.ZP.resolveRef({fs:r,dir:t,ref:n,depth:3}))},eL.Z);var i7=n("53783"),i3=n("13302");let i8=e=>`${e.getMonth()+1}/${e.getDate()}/${e.getFullYear().toString().slice(-2)}`,i9=e=>e.from&&e.to?`Between ${i8(e.from)} and ${i8(e.to)}`:e.from?`since ${i8(e.from)}`:e.to?`until ${i8(e.to)}`:"",oe=(0,Z.cn)(["MAIN"]),ot=(0,Z.cn)("MAIN"),on=(0,ei.xu)(e=>(0,Z.cn)(t=>{let n=t(ol.searchQuery(e)),r=t(ol.user(e)),i=t(ol.date(e)),o=t(ol.branch(e)),a=[];return o?.length>0&&a.push({short:o.join(", "),long:`on ${o.join(", ")}`}),i&&a.push({short:i9(i),long:`made ${i9(i)}`}),n&&a.push({short:`'${n}'`,long:`containing '${n}'`}),r&&a.push({short:r,long:`by ${r}`}),`Log${a.length>0?": ":""}${1===a.length?a[0].short:a.map(e=>e.long).join(" ")}`})),or=[],oi=e=>{let t=(0,ei.xu)(t=>(0,ei.rw)(e));return or.push(t),t},oo=oi(!1),oa=oi(!0),os=(0,Z.cn)(e=>e(oa(e(ot)))),ol={searchQuery:oi(""),matchCase:oi(!1),regExp:oi(!1),user:oi(null),date:oi(null),branch:oi([])},oc=(0,i3.Z)((e,t)=>(0,Z.cn)(t=>t(e(t(ot))),(t,n,r)=>{n(e(t(ot)),r)}),ol),od=()=>(0,eT.lV)((0,g.useCallback)((e,t,n)=>{Object.values(ol).map(e=>e(n)).forEach(e=>t(e,ei.td))},[])),ou=(e,t,n)=>{let r=e(oe);e(ot)===n&&t(ot,r[r.findIndex(e=>e===n)-1]||r[0]),t(oe,e=>e.filter(e=>e!==n)),or.forEach(e=>e.remove(n))};var oh=n("89921");let op={},om=(e,t)=>t.commit.committer.timestamp-e.commit.committer.timestamp;async function og(e){let t=[],n={},r=[];r.forEach(e=>{n[e.readCommitResult.oid]=e});for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];let s=await Promise.all(o.flatMap(e=>{let{refs:t,repoPath:n,isBare:r}=e;return t.map(async e=>{let t=await f.ZP.resolveRef({...c({repoPath:n,isBare:r}),ref:e,depth:3}).then(e=>f.ZP.readCommit({...c({repoPath:n,isBare:r}),oid:e}));return{repoPath:n,isBare:r,commit:t,refs:new Set([e])}})}));for((0,oh.Z)((e,t)=>{let{commit:n}=e,{commit:r}=t;return om(n,r)},s).forEach(e=>{let{commit:t,refs:n,repoPath:r,isBare:i}=e;return l({repoPath:r,isBare:i},t,-1,n)});r.length>0;){let{readCommitResult:e,repoPath:n,isBare:i,containingRefs:o}=r.shift();t.push({repoPath:n,readCommitResult:e,containingRefs:o}),(await Promise.all(e.commit.parent.map(e=>f.ZP.readCommit({...c({repoPath:n,isBare:i}),oid:e})))).forEach(e=>{let t=r.findIndex(t=>{let{readCommitResult:n}=t;return om(n,e)>0});l({repoPath:n,isBare:i},e,t,o)})}return t;function l(e,t,i,o){let{repoPath:a,isBare:s}=e;if(n[t.oid])n[t.oid].containingRefs=new Set([...n[t.oid].containingRefs,...o]);else{let e={readCommitResult:t,containingRefs:n[t.oid]?new Set([...n[t.oid].containingRefs,...o]):o,repoPath:a,isBare:s};n[t.oid]=e,r.splice(i>=0?i:r.length,0,e)}}function c(t){let{repoPath:n,isBare:r}=t;return{fs:e,cache:op,[r?"gitdir":"dir"]:n}}}function of(e,t,n){return(void 0===n&&(n={}),n.regExp)?new RegExp(t,n.matchCase?"":"i").test(e):n.matchCase?e.includes(t):e.toLowerCase().includes(t.toLowerCase())}let oA=es(async e=>og(r,...(await e(ip)).map(e=>{let{repoRoot:t,localBranches:n,remoteBranches:r}=e;return{repoPath:t,refs:["HEAD"].concat(n.map(e=>e.name)).concat(r.map(e=>`${e.remote}/${e.name}`))}}))),ox=(0,Z.cn)(async e=>{let t=e(oc.searchQuery),n=e(oc.branch),r={matchCase:e(oc.matchCase),regExp:e(oc.regExp)},i=e(oc.date),o=(await e(oA)).filter(e=>{let{containingRefs:t}=e;return!n?.length||n.some(e=>t.has(e))}).filter(e=>{let{readCommitResult:{commit:t}}=e;return(!i?.from||1e3*t.author.timestamp>i.from.getTime())&&(!i?.to||1e3*t.author.timestamp<i.to.getTime())}).filter(e=>{let{readCommitResult:{commit:n}}=e;return!t||of(n.message,t,r)||of(n.tree,t,{matchCase:!1})});return{rows:o,byOid:(0,i7.Z)(e=>{let{readCommitResult:t}=e;return t.oid},o)}}),oy=(0,Z.cn)(async e=>{let t=await e(ip),n={},r=(e,t)=>{n[e]=n[e]||[],n[e].push(t)};for(let{repoRoot:n,localBranches:i,currentBranch:o}of((await Promise.all(t.map(t=>{let{repoRoot:n}=t;return e(i4({repoRoot:n,ref:"HEAD"}))}))).forEach(e=>{r(e,{type:"head",name:"HEAD"})}),t))for(let t of i)r(await e(i4({repoRoot:n,ref:t.name})),{type:"localBranch",name:t.name,isCurrent:o?.name===t.name,trackingBranch:t.trackingBranch});for(let{repoRoot:n,remoteBranches:i}of t)for(let t of i){let i=`${t.remote}/${t.name}`;r(await e(i4({repoRoot:n,ref:i})),{type:"remoteBranch",name:i})}return n}),oj=(0,Z.cn)(new Set([])),ov=(0,Z.cn)(async e=>{let t=e(oj);return"all"===t?(await e(ox)).rows.map(e=>{let{readCommitResult:{oid:t}}=e;return t}):[...t].map(e=>`${e}`)}),ow=(0,Z.cn)(async e=>Promise.all((await e(ov)).map(async t=>(await e(ox)).byOid[t]))),oC=(0,Z.cn)(async e=>{let t=(await e(ov))[0];return t&&(await e(ox)).byOid[t]||null}),ob=(0,Z.cn)(!1),oE=(0,Z.cn)(!1),oS=(0,Z.cn)(!1),oD={id:"Default.Author",name:"Author"},oI={id:"Default.Hash",name:"Hash"},ok={id:"Date.Date",name:"Date"},oT=[oD.id,ok.id],oP=(0,ei.xu)(e=>(0,Z.cn)(oT.includes(e))),oB=new nY.C(`{count, plural,
    =1 {1 file committed}
    other {# files committed}
  }`,"en-US"),oR=I.zo.div`
  background: ${e=>{let{theme:t}=e;return t.dark?"#2b2b2b":"#fff"}};
  height: 100%;
  display: flex;
  flex-direction: column;
`,oN=I.zo.textarea`
  flex: 1;
  background: none;
  padding: 0.25rem 0.375rem;
  color: ${e=>{let{theme:t}=e;return t.dark?"#a9b7c6":"#000"}};
  font-family: inherit;
  border: none;
  resize: none;
  outline: none;
`,oF=I.zo.div`
  display: flex;
  gap: 0.3rem;
  padding: 0.4rem;
`,oL=I.zo.div`
  display: flex;
  align-items: center;
  padding: 0.125rem 0.5rem;
  gap: 0.25rem;
  position: sticky; // prevents commit message scroll jump when message is toggled on and off
  color: ${e=>{let{theme:t}=e;return t.commonColors.red}};
`;function oO(e){let{editorRef:t}=e,n=(0,g.useRef)(null),[i,o]=(0,D.KO)(r7),a=function(){let e=td(),t=(0,T.L)(),n=i5();return(0,eT.lV)((0,g.useCallback)((i,o,a,s)=>{let l=n({title:"Committing...",isCancelable:!1},{run:async n=>{let{setIndeterminate:l}=n;l(!0);let c=(0,rr.Z)(e=>{let{repoRoot:t}=e;return t},(await Promise.all(a.map(async e=>{let t=ro.path(e),n=await i(tt(t)),o=await r.promises.exists(t)?await r.promises.readFile(t):null;return n?{repoRoot:n,filePath:m().relative(n,t),content:o}:null}))).filter(e=>null!=e));await Promise.all(Object.entries(c).map(async e=>{let[t,n]=e,a=n.reduce((e,t)=>{let{filePath:n,content:r}=t;return{...e,[n]:"string"==typeof r?new TextEncoder().encode(r):r}},{});await iZ({fs:r,dir:t,updates:a,message:s,author:{name:"Alireza",email:"alireza.mirian@gmail.com"}});let l=await i(ih(t));l&&o(i4({repoRoot:t,ref:l})),o(i4({repoRoot:t,ref:"HEAD"}))})).then(()=>{o(oA),e().catch(console.error),t.show({icon:"Info",body:(0,C.jsxs)(C.Fragment,{children:[`${oB.format({count:a.length})}: `,s.split("\n").flatMap((e,t)=>[(0,C.jsx)("br",{},t),e]).slice(1)]})})},e=>{t.show({icon:"Error",title:"Commit failed!",body:"Could not commit files."}),console.error("Commit error",e)})},onFinished:()=>{o(r8,null)}});o(r8,l)},[]))}(),s=(0,D.Dv)(r4),l=(0,T.L)(),[c,d]=(0,D.KO)(r3),u=(0,D.Dv)(r8);(0,g.useEffect)(()=>{i&&d("")},[i]);let h=(0,eT.lV)((0,g.useCallback)(e=>{let t=e(rJ),n=e(r7);if(0===t.length){d("Select files to commit");return}if(!n){d("Specify commit message");return}if(e(r4)){l.show({icon:"Error",title:"Unsupported action",body:"Amending commits is not yet supported."});return}a(t,n)},[])),{hasFocus:p}=(0,nt.e)();return(0,g.useImperativeHandle)(t,()=>({focus:()=>{n.current?.focus()}}),[]),(0,C.jsxs)(oR,{children:[(0,C.jsx)(oN,{ref:n,value:i,onChange:e=>{o(e.target.value)},placeholder:"Commit Message","data-gramm":"false"}),c&&(0,C.jsxs)(oL,{children:[(0,C.jsx)(M.vq,{icon:"general/error.svg"})," ",c]}),(0,C.jsxs)(oF,{children:[(0,C.jsx)(nK.z,{preventFocusOnPress:!0,variant:p?"default":void 0,onPress:h,isDisabled:null!=u,mnemonic:"i",children:s?"Amend Commit":"Commit"}),(0,C.jsx)(nK.z,{preventFocusOnPress:!0,onPress:tA,mnemonic:"P",children:s?"Amend Commit and Push...":"Commit and Push..."})]})]})}oO.__docgenInfo={description:"Commit message and commit buttons shown in the bottom/right split view of the commit toolwindow",methods:[],displayName:"CommitView",props:{editorRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<{ focus: () => void }>",elements:[{name:"signature",type:"object",raw:"{ focus: () => void }",signature:{properties:[{key:"focus",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!0}}]}}]},description:""}}};var o_=n("78965");let oM=e=>{let{changes:t}=e,n=t.filter(e=>"MODIFIED"===ro.fileStatus(e)).length,r=t.filter(ro.isAddition).length,i=t.filter(ro.isDeletion).length;return(0,C.jsxs)(C.Fragment,{children:[r>0&&(0,C.jsxs)(tm,{status:"ADDED",children:[r," added"]}),n>0&&(0,C.jsxs)(tm,{status:"MODIFIED",children:[n," modified"]}),i>0&&(0,C.jsxs)(tm,{status:"DELETED",children:[i," deleted"]})]})};oM.__docgenInfo={description:"",methods:[],displayName:"ChangesSummary",props:{changes:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"AnyChange"}],raw:"ReadonlyArray<AnyChange>"},description:""}}};let oG=I.zo.div`
  display: flex;
  padding: 0.125rem;
  position: relative;
`,oK=(0,I.zo)(nG.X)`
  padding-right: 0.625rem;
`,oH=I.zo.span`
  position: absolute;
  right: 0.5rem;
  top: 0.25rem;
  background: ${e=>{let{theme:t}=e;return t.color("Panel.background")}};
  z-index: 1;
`,oV=()=>{let e=(0,D.Dv)(rJ);return(0,C.jsx)(oM,{changes:e})};function oU(){let[e,t]=(0,D.KO)(r4),n=(0,D.b9)(oX);return(0,C.jsxs)(oG,{children:[(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(o_.h,{actionName:"Amend Commit",helpText:"Modify the latest commit of the current branch"}),children:r=>(0,C.jsx)("span",{...r,children:(0,C.jsx)(oK,{isSelected:e,onChange:e=>{t(e),n()},preventFocus:!0,mnemonic:"m",children:"Amend"})})}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Show Commit Options"}),children:(0,C.jsx)(i$.hU,{onPress:tA,children:(0,C.jsx)(M.vq,{icon:"general/gear.svg"})})}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Commit Message History"}),children:(0,C.jsx)(i$.hU,{isDisabled:!0,onPress:tA,children:(0,C.jsx)(M.vq,{icon:"vcs/historyInline.svg"})})}),(0,C.jsx)(oH,{children:(0,C.jsx)(oV,{})})]})}oU.__docgenInfo={description:"Amend checkbox, commit message history button, and summary of included changes, shown as a row\nbellow changes tree, in commit tool window.",methods:[],displayName:"CommitActionsRow"};let o$=new nY.C(`Delete {count, plural,
    =1 {Changelist}
    other {Changelists}
  }`,"en-US"),oQ=new nY.C(`{count, plural,
    =1 {1 selected file}
    other {# selected files}
  }`,"en-US"),oq=(0,Z.cn)(e=>[...e(rW).values()].filter(e=>"DELETED"!==e.type).map(ro.path)),oz=nJ({id:tx.$.DELETE,title:"Delete",description:"Delete selected item",isDisabled:(0,Z.cn)(e=>0===e(oq).length),actionPerformed:async e=>{let{get:t,set:n}=e,r=t(oq),i=t(eY).current;0!==r.length&&await i?.confirm({title:"Delete",okText:"Delete",message:C.jsx("div",{style:{width:354},children:`Are you sure you want to delete ${oQ.format({count:r.length})}?`})})&&(console.log(`deleting ${r}`),await nQ(t,n,r))}}),oW=I.zo.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,oY=I.zo.div`
  flex: 1;
  overflow: auto;
  position: relative;
`,oZ=I.zo.div`
  position: absolute;
  right: 0.125rem;
  top: 0.125rem;
  z-index: 1;
`,oJ=(0,Z.cn)(!1),oX=(0,Z.cn)(null,(e,t)=>{t(oJ,!0)}),o0=()=>{let{state:{anchor:e}}=(0,n9.j)(),t=(0,g.useRef)(null),n=(0,g.useRef)(null),r=(0,re.Ss)(e),i=(0,D.Dv)(to),[o,a]=(0,D.KO)(r6(r)),[s,l]=(0,D.KO)(oJ),c=function(){let e=(0,D.Dv)(rY),t=rg(),n=[...e].filter(e=>!e.active),r=td(),i=[{id:tx.$.REFRESH,title:"Refresh",icon:(0,C.jsx)(M.vq,{icon:"actions/refresh.svg"}),actionPerformed:r},{id:rj.SHELVE_SILENTLY,title:"Shelve Silently",icon:(0,C.jsx)(M.vq,{icon:"vcs/shelveSilent.svg"}),actionPerformed:tA},(0,D.Dv)(oz)];return 1===e.size&&i.push({id:rj.RENAME_CHANGELIST,title:"Edit Changelist...",description:"Edit name and description of selected changelist",icon:(0,C.jsx)(M.vq,{icon:"actions/edit.svg"}),actionPerformed:tA}),n.length>0&&i.push({id:rj.REMOVE_CHANGELIST,title:o$.format({count:n.length}),description:"Remove changelist and move all changes to another",icon:(0,C.jsx)(M.vq,{icon:"general/remove.svg"}),actionPerformed:tA}),1===n.length&&i.push({title:"Set Active Changelist",description:"Set changelist to which new changes are placed by default",id:rj.SET_DEFAULT_CHANGELIST,icon:(0,C.jsx)(M.vq,{icon:"actions/selectall.svg"}),actionPerformed:()=>{t(n[0].id)}}),i}(),d=(0,na.x)({treeRef:t});return(0,g.useEffect)(()=>{s&&(setTimeout(()=>{n.current?.focus()}),l(!1))},[s]),(0,C.jsx)(rt.D,{orientation:r,innerView:(0,C.jsx)(B.DG,{actions:[...d,...c],children:e=>{let{shortcutHandlerProps:n}=e;return(0,C.jsxs)(oW,{...n,children:[(0,C.jsx)(iY,{}),(0,C.jsxs)(oY,{children:[i&&(0,C.jsx)(rn,{children:(0,C.jsx)(oZ,{children:(0,C.jsx)(b,{})})}),(0,C.jsx)(iG,{treeRef:t})]}),(0,C.jsx)(oU,{})]})}}),innerViewMinSize:50,lastView:(0,C.jsx)(oO,{editorRef:n}),lastSize:o,onLastResize:a})};o0.__docgenInfo={description:"",methods:[],displayName:"ChangesViewSplitter"};let o1=I.zo.div`
  min-height: 70%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 50px;
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  white-space: nowrap;
`;function o2(){let e=(0,B.DI)();return(0,C.jsx)(o1,{children:(0,C.jsxs)("div",{style:{textAlign:"center"},children:["To commit changes,"," ",(0,C.jsx)(tg.r,{onPress:()=>e(rj.GIT_INIT),children:"Create Git repository..."}),(0,C.jsx)("br",{}),"For recent changes, see"," ",(0,C.jsx)(tg.r,{onPress:tA,children:"Local History..."}),(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),(0,C.jsx)(M.vq,{style:{verticalAlign:"text-top"},icon:"general/contextHelp.svg"})," ",(0,C.jsx)(tg.r,{onPress:tA,children:"Version Control integration"})," "]})})}o2.__docgenInfo={description:"",methods:[],displayName:"ChangesViewZeroState"};let o5=v.ZP.div.withConfig({displayName:"ChangesViewPane__StyledContainer",componentId:"sc-1pqba05-0"})(["display:flex;flex-direction:column;height:100%;"]),o6=()=>{let e=(0,D.Dv)(te);return(0,C.jsx)(o5,{children:e.length>0?(0,C.jsx)(o0,{}):(0,C.jsx)(o2,{})})};function o4(e){let{branches:t}=e;return(0,C.jsx)("table",{style:{borderSpacing:0},children:t.map(e=>{let{branch:n,repoRoot:r}=e,i=n.trackingBranch?`${n.name} \u{2192} ${n.trackingBranch}`:t.length>1?`${n.name} (no tracking branch)`:"No tracking branch";return t.length>1?(0,C.jsxs)("tr",{children:[(0,C.jsxs)("td",{children:[m().basename(r),": \xa0"]}),(0,C.jsx)("td",{children:i})]},r):(0,C.jsx)("tr",{children:(0,C.jsx)("td",{children:i})},r)})})}o6.__docgenInfo={description:"",methods:[],displayName:"ChangesViewPane"},o4.__docgenInfo={description:"",methods:[],displayName:"TrackingBranchInfo",props:{branches:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ repoRoot: string; branch: LocalBranch }",signature:{properties:[{key:"repoRoot",value:{name:"string",required:!0}},{key:"branch",value:{name:"LocalBranch",required:!0}}]}}],raw:"Array<{ repoRoot: string; branch: LocalBranch }>"},description:""}}};let o7="Commit",o3=(0,Z.cn)(async e=>{let t=(await Promise.all(e(rc).map(t=>e(tt(ro.path(t)))))).filter(e=>null!=e);return(await Promise.all(t.map(async t=>{let n=(await e(iu(t))).currentBranch;return n?{repoRoot:t,branch:n}:null}))).filter(e=>null!=e)}),o8=()=>{let e=(0,D.Dv)(r$("repository")),t=(0,D.Dv)(o3),n=!e&&t[0]?`Commit to ${t[0]?.branch?.name||"!"}`:"Commit";return(0,C.jsx)(n8.y,{children:(0,C.jsx)(n8.y.View,{tabContent:(0,C.jsx)(H.a,{isDisabled:e||0===t.length,tooltip:(0,C.jsx)(V.M,{actionName:(0,C.jsx)(o4,{branches:t})}),children:(0,C.jsx)("span",{children:n})}),children:(0,C.jsx)(o6,{})},"commit")})};o8.__docgenInfo={description:"",methods:[],displayName:"CommitToolWindow"};var o9=n("84824");let ae=I.zo.div`
  box-sizing: border-box;
  display: flex;
  align-items: center;
  height: 2.0625rem;
  border-bottom: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.borderColor}};
  flex-shrink: 0;
`,at=I.zo.div`
  flex-grow: 1;
`,an=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  display: flex;
  flex-direction: column;
  justify-content: end;
  align-items: center;
  gap: 0.25rem;
  min-height: 37%;
  overflow: hidden;
`;var ar=n("76344");let ai=e=>{let t=e.split("\n"),n=t.slice(1);return{subject:t[0],bodyAsString:n.join("\n"),body:(0,C.jsx)(C.Fragment,{children:n.map((e,t)=>(0,C.jsxs)(g.Fragment,{children:[t>0&&(0,C.jsx)("br",{}),e]},t))})}};function ao(e){return e.slice(0,8)}let aa=new Intl.DateTimeFormat([],{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric",hour12:!0}),as=new Intl.DateTimeFormat([],{hour:"numeric",minute:"numeric",hour12:!0}),al=new Intl.DateTimeFormat([],{day:"numeric",month:"numeric",year:"2-digit"}),ac=iO({commitParent:(c=e=>`Changes to ${ao(m().basename(e.oid))} ${e.subject.slice(0,50)}`,(e,t)=>{let{fileCount:n}=t;return{textValue:c(e),rendered:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)(nv.J,{}),(0,C.jsx)(nj.e.Hint,{children:iN(n)})]})}})},{repo:(e,t)=>{let{fileCount:n}=t;return{textValue:m().basename(e.repository.dir),rendered:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)(iP,{rootPath:e.repository.dir}),(0,C.jsx)(nv.J,{}),(0,C.jsx)(nj.e.Hint,{children:iN(n)})]})}}}),ad={};async function au(e){let{fromRef:t,toRef:n,...r}=e;return(await f.ZP.walk({...r,cache:ad,trees:[f.ZP.TREE({ref:t}),f.ZP.TREE({ref:n})],map:async function(e,t){let[n,i]=t,o=await i?.oid(),a=await n?.oid(),s=await i?.type(),l=await n?.type();if(o===a)return null;let c=o?{hash:o,path:m().join(r.dir||"",e),isDir:"tree"===s,content:async()=>new TextDecoder().decode(await i?.content()??new Uint8Array)}:null,d=a?{hash:a,path:m().join(r.dir||"",e),isDir:"tree"===l,content:async()=>new TextDecoder().decode(await n?.content()??new Uint8Array)}:null,u=c||d?ro(d,c):null;return!!u&&!ro.revision(u).isDir&&u}})||[]).filter(e=>e)}var ah=n("2834");async function ap(e){return am(function(e){let t=e.filter(ro.isDeletion),n=e.filter(ro.isAddition);return ag(new Map(t.map(e=>{let t=n.find(t=>{let{after:{hash:n}}=t;return n===e.before.hash});return t?[e,{to:t}]:null}).filter(e=>null!=e)),e)}(e))}async function am(e){let t=e.filter(ro.isDeletion),n=e.filter(ro.isAddition),r=new Map,i=async e=>(r.get(e)||r.set(e,await ro.content(e)),r.get(e)??""),o=new Map;return await Promise.all(t.map(async e=>Promise.all(n.map(async t=>{let n=await af(await i(e),await i(t)),r=o.get(e);n>=50&&(!r||n>r.similarity)&&o.set(e,{similarity:n,to:t})})))),ag(o,e)}function ag(e,t){let n=[...e.values()].map(e=>e.to);return t.map(t=>{if(ro.isDeletion(t)){let n=e.get(t);if(n)return ro(t.before,n?.to.after)}return t}).filter(e=>!n.includes(e))}async function af(e,t){return new Promise((n,r)=>{(0,ah.Mp)(e,t,function(e,t){if(void 0===t&&(t=[]),e)return r(e);let{unchanged:i,total:o}=t.reduce((e,t)=>{let{total:n,unchanged:r}=e,i=t.count??0;return{total:n+i,unchanged:r+(t.added||t.removed?0:i)}},{total:0,unchanged:0});n(i/o*100)})})}let aA=(0,ei.xu)(e=>(0,Z.cn)(e===rI.id)),ax=(0,Z.cn)(g.createRef()),ay=(0,Z.cn)(new Set),aj=(0,Z.cn)(new Set),av="commitParent",aw=(0,ei.xu)(e=>(0,Z.cn)(()=>au({fs:r,...e})),eL.Z),aC=(0,ei.xu)(e=>(0,Z.cn)(async t=>ap(await t(aw(e)))),eL.Z),ab=e=>async t=>{let n=(await t(ow))[0],{byOid:r}=await t(ox),i=n?.readCommitResult?.oid,o=n?.readCommitResult.commit.parent;if(i&&o){let a=function(){return rB(...arguments)("")}({get:t,groupings:rk,isActive:aA}),s=await Promise.all(o?.map(async o=>({type:av,key:rv(av,o),oid:o,subject:r[o]?.readCommitResult.commit.message||"",children:a([...await t(e({toRef:i,fromRef:o,dir:n.repoPath}))].map(e=>rC(e)))}))),{expandAllKeys:l,fileCountsMap:c,...d}=rK(1===s.length?s[0].children:s.filter(e=>{let{children:t}=e;return t.length>0}));return(0,rR.kD)(e=>("directory"===e.type?"a_":"b_")+ac.getTextValue(e,{fileCountsMap:c}).toLowerCase(),{roots:d.rootNodes,getChildren:e=>"children"in e?e.children:null}),{...d,fileCountsMap:c,expandAllKeys:new Set([...l].filter(e=>!`${e}`.startsWith(av)))}}return null},aE=(0,Z.cn)(ab(aw)),aS=(0,Z.cn)(ab(aC)),aD=I.zo.div`
  position: absolute;
  inset: 0;
  gap: 0.5rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
`,aI=[aS,aE].map(ei.n7),ak=(0,Z.cn)(e=>e(aI.find(t=>"hasData"===e(t).state)??aI.slice(-1)[0]));function aT(e){let{treeShortcutHandlerProps:t}=e,n=(0,D.Dv)(nP(ow)),r=(0,D.Dv)(ax),i=!n?.length,o=(0,D.Dv)(ak),a="hasData"===o.state?o.data:null,[s,l]=(0,D.KO)(ay),[c,d]=(0,D.KO)(aj);return((0,g.useEffect)(()=>{l(a?.expandAllKeys??new Set),d(new Set)},[o.state]),i)?(0,C.jsx)(an,{children:"Select commits to to view changes"}):(0,C.jsxs)("div",{...t,style:{height:"-webkit-fill-available",position:"relative"},children:["loading"===o.state&&(0,C.jsx)(rn,{children:(0,C.jsxs)(aD,{children:[(0,C.jsx)(b,{style:{width:"1.5rem"}}),"Loading..."]})}),a&&(0,C.jsx)(ny.b,{"aria-label":"Commit changes",treeRef:r,items:a.rootNodes,selectionMode:"multiple",expandedKeys:s,onExpandedChange:l,selectedKeys:c,onSelectionChange:d,style:{paddingBottom:"1rem"},fillAvailableSpace:!0,children:ac.itemRenderer({fileCountsMap:a.fileCountsMap})}),n.length>1&&(0,C.jsx)(ar.S,{placement:"top",tooltip:(0,C.jsx)(nH.k,{helpText:(0,C.jsx)(C.Fragment,{children:"Showing diff for more than one commit is not currently supported. Only the first selected commit is taken into account."})}),children:e=>(0,C.jsx)("span",{...e,style:{position:"absolute",right:"0.5rem",bottom:"0.5rem"},children:(0,C.jsx)(M.vq,{icon:"general/warning"})})})]})}aT.__docgenInfo={description:"TODO: handle multiple selected commits (check Changes.ShowChangesFromParents https://github.com/JetBrains/intellij-community/blob/ac57611a0612bd65ba2a19c841a4f95b40591134/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/frame/VcsLogChangesBrowser.java#L255-L254)",methods:[],displayName:"CommitChangedFiles",props:{treeShortcutHandlerProps:{required:!0,tsType:{name:"HTMLAttributes",elements:[{name:"HTMLElement"}],raw:"HTMLAttributes<HTMLElement>"},description:""}}};var aP=n("7228");let aB=(0,C.jsx)("path",{fill:"currentColor",d:"M4.2 4.8 C4.8627 4.8 5.4 5.3373 5.4 6 C5.4 6.6627 4.8627 7.2 4.2 7.2 C3.5373 7.2 3 6.6627 3 6 C3 5.3373 3.5373 4.8 4.2 4.8 ZM0.6 2.4 L0.6 7.2 L7.8 14.4 L12.6 9.6 L5.4 2.4 Z"}),aR={light:"#ffd100",dark:"#e1c731"},aN={light:"#3cb45c",dark:"#3cb45c"},aF={light:"#9f79b5",dark:"#9f79b5"},aL={light:"#7a7a7a",dark:"#999999"},aO={head:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.headIconColor",aR)},localBranch:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.localBranchIconColor",aN)},remoteBranch:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.remoteBranchIconColor",aF)},tag:e=>{let{theme:t}=e;return t.color("VersionControl.GitLog.tagIconColor",aL)}},a_=(0,I.zo)(iB)`
  border-radius: 3px;
  align-items: stretch;
  font-size: 0.75rem;
`,aM=I.zo.svg.attrs({viewBox:"0 0 14.5 14.5"})`
  width: 1rem;
  height: 1rem;
  stroke: rgba(0, 0, 0, 0.25);
  stroke-width: 0.5px;
  color: ${e=>{let{type:t,theme:n}=e;return aO[t]({theme:n})}};
  z-index: 1; // for the right vertical order of grouped labels
  &:not(:first-child) {
    margin-right: -11px;
  }
`,aG=I.zo.span`
  display: inline-flex;
  flex-direction: row-reverse;
`,aK=I.zo.span`
  text-overflow: ellipsis;
  overflow: hidden;
`;function aH(e){let{type:t}=e;return(0,C.jsx)(aM,{type:t,children:aB})}function aV(e){let{types:t}=e;return(0,C.jsx)(aG,{children:t.map((e,t)=>(0,C.jsx)(aM,{type:e,children:aB},t))})}function aU(e){let{types:t,children:n}=e;return(0,C.jsxs)(a_,{children:[(0,C.jsx)(aV,{types:t}),(0,C.jsx)(aK,{children:n})]})}aH.__docgenInfo={description:"",methods:[],displayName:"RefIcon",props:{type:{required:!0,tsType:{name:'GitRef["type"]',raw:'GitRef["type"]'},description:""}}},aV.__docgenInfo={description:"",methods:[],displayName:"RefIconGroup",props:{types:{required:!0,tsType:{name:"Array",elements:[{name:'GitRef["type"]',raw:'GitRef["type"]'}],raw:'Array<GitRef["type"]>'},description:""}}},aU.__docgenInfo={description:"",methods:[],displayName:"RefLabel",props:{types:{required:!0,tsType:{name:"Array",elements:[{name:'GitRef["type"]',raw:'GitRef["type"]'}],raw:'Array<GitRef["type"]>'},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};let a$=I.zo.div`
  padding: 0.875rem;
  cursor: default;
`,aQ=I.zo.div`
  font-family: "JetBrains Mono", monospace;
  line-height: 1.125rem;
  margin-bottom: 1.25rem;
  margin-right: 1.1875rem;
`,aq=I.zo.div`
  font-weight: bold;
`,az=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.label({disabled:!0})}};
`,aW=I.zo.div`
  line-height: 1.2;
  display: flex;
  gap: 0.25rem;
  margin-bottom: 0.75rem;
`,aY=(0,I.zo)(iP)`
  align-self: start;
`,aZ=I.zo.span`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.25rem;
  margin-bottom: 0.75rem;
`;function aJ(){let e=(0,D.Dv)(nP(oC)),t=(0,D.Dv)(nP(oy)),n=(0,D.Dv)(te).length>0;if(!e)return(0,C.jsx)(an,{children:"No commits selected"});let{readCommitResult:{commit:r,oid:i},containingRefs:o,repoPath:a}=e,{subject:s,body:l}=ai(r.message),c=[];r.committer.name!==r.author.name&&c.push((0,C.jsxs)(g.Fragment,{children:["by ",r.committer.name," ",(0,C.jsx)(a1,{email:r.committer.email})]},r.committer.email)),r.committer.timestamp!==r.author.timestamp&&c.push(a2(1e3*r.committer.timestamp));let d=t?.[i]||[],u=(0,rr.Z)(e=>e.type,d);return(0,C.jsxs)(a$,{children:[(0,C.jsxs)(aQ,{children:[(0,C.jsx)(aq,{children:s}),l]}),(0,C.jsxs)(aW,{children:[n&&(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(aP.u,{children:a}),children:e=>(0,C.jsx)(aY,{...e,rootPath:a})}),(0,C.jsxs)("div",{children:[`${ao(i)} ${r.author.name} `,(0,C.jsx)(a1,{email:r.author.email})," ",`${a2(new Date(1e3*r.author.timestamp))}`,c.length>0&&(0,C.jsxs)(az,{children:["committed ",c]})]})]}),d.length>0&&(0,C.jsxs)(aZ,{children:[(0,C.jsx)(a0,{refs:u.head}),(0,C.jsx)(a0,{refs:u.localBranch}),(0,C.jsx)(a0,{refs:u.remoteBranch}),(0,C.jsx)(a0,{refs:u.tag})]}),(0,C.jsxs)("div",{children:["In ",o.size," branches: ",[...o].join(", ")]})]})}let aX=I.zo.span`
  display: inline-flex;
  align-items: center;
`;function a0(e){let{refs:t}=e;return t?.length?(0,C.jsx)(C.Fragment,{children:t.map((e,n)=>{let r=`${e.name}${n===t.length-1?"":","}`;return 0===n?(0,C.jsxs)(aX,{children:[(0,C.jsx)(aV,{types:t.map(e=>{let{type:t}=e;return t}).slice(0,2)}),r]}):(0,C.jsx)("span",{children:r})})}):null}function a1(e){let{email:t}=e;return(0,C.jsx)("a",{href:`mailto:${t}`,style:{all:"unset"},children:(0,C.jsx)(tg.r,{children:`<${t}>`})})}function a2(e){return`on ${al.format(e)} at ${as.format(e).replace(" ","\u202F")}`}function a5(e,t){let n=(0,B.ol)().find(t=>{let{id:n}=t;return n===e});return(0,g.useMemo)(()=>{if(!n)return null;let{perform:e,id:r,...i}=n;return{...i,id:t,useShortcutsOf:r,isSearchable:!1,actionPerformed:t=>{e(t)}}},[n])}aJ.__docgenInfo={description:"",methods:[],displayName:"CommitDetails"};let a6=(0,Z.cn)(.5),a4=I.zo.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,a7=(0,Z.cn)(e=>rk.filter(t=>nZ(t.isAvailable)?e(t.isAvailable):t.isAvailable).map(t=>({...t,key:`groupBy:${t.id}`,isActive:e(aA(t.id))}))),a3="Vcs.log.detailsView.layout",a8="Vcs.log.detailsView.viewOptions",a9=`${a3}.${rj.SHOW_DETAILS}`,se=`${a3}.${rj.SHOW_DIFF_PREVIEW}`,st=e=>`Vcs.log.detailsView.groupBy.${e.id}`;function sn(e){let{tabKey:t}=e,[n,r]=(0,D.KO)(a6),i=(0,D.Dv)(oa(t)),o=(0,eT.lV)((0,g.useCallback)((e,t,n)=>{t(aA(n),e=>!e)},[])),a=(0,tD.w)(),s=(0,D.Dv)(a7),l=(0,D.Dv)(ax),c=[a({id:a8,title:"View Options",icon:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"}),children:[a({id:"Vcs.log.detailsView.groupBy",title:"Group By",menuPresentation:"titledSection",icon:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"}),children:s.map(e=>({id:st(e),useShortcutsOf:e.useShortcutOf,title:e.title,actionPerformed:()=>{o(e.id)}}))}),a({id:a3,menuPresentation:"titledSection",title:"Layout",children:[a5(rj.SHOW_DETAILS,a9),a5(rj.SHOW_DIFF_PREVIEW,se)].filter(e=>null!=e)})]}),...(0,na.x)({treeRef:l})];return(0,C.jsx)(B.DG,{actions:c,children:e=>{let{shortcutHandlerProps:t}=e;return(0,C.jsxs)(a4,{children:[(0,C.jsxs)(ae,{children:[(0,C.jsxs)(iK.o,{children:[(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Show Diff",shortcut:"\u2318D"}),children:(0,C.jsx)(i$.hU,{isDisabled:!0,children:(0,C.jsx)(M.vq,{icon:"actions/diff.svg"})})}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Revert Selected Changes"}),children:(0,C.jsx)(i$.hU,{isDisabled:!0,children:(0,C.jsx)(M.vq,{icon:"actions/rollback.svg"})})}),(0,C.jsx)(iH.p,{renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsx)(so,{menuProps:t})},children:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"})})]}),(0,C.jsx)(at,{}),(0,C.jsxs)(iK.o,{style:{flexShrink:0},children:[(0,C.jsx)(ns.K,{actionId:tx.$.EXPAND_ALL}),(0,C.jsx)(ns.K,{actionId:tx.$.COLLAPSE_ALL})]})]}),(0,C.jsx)("div",{style:{flex:1,minHeight:0},children:i?(0,C.jsx)(rt.D,{orientation:"vertical",firstSize:n,onFirstResize:r,firstViewMinSize:10,firstView:(0,C.jsx)(aT,{treeShortcutHandlerProps:t}),innerView:(0,C.jsx)(aJ,{})}):(0,C.jsx)(aT,{treeShortcutHandlerProps:t})})]})}})}let sr={[a9]:os,...Object.fromEntries(rk.map(e=>[st(e),aA(e.id)]))},si=(0,Z.cn)(e=>Object.entries(sr).filter(t=>{let[,n]=t;return e(n)}).map(e=>{let[t]=e;return t}));function so(e){let{menuProps:t}=e,n=(0,q.y)(a8),r=(0,D.Dv)(si);return n&&(0,C.jsx)(z.d,{actionGroup:n,children:e=>(0,C.jsx)(iV.w,{...t,...e,selectedKeys:r})})}sn.__docgenInfo={description:"",methods:[],displayName:"VcsLogDetailsView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};var sa=n("67074"),ss=n("66344"),sl=n("46377"),sc=n("88524"),sd=n("51515");let su=I.zo.button`
  all: unset;
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding-left: 0.25rem;
  cursor: pointer;
  background: transparent;
  color: ${e=>{let{theme:t}=e;return t.commonColors.label({disabled:!0})}};

  line-height: 1.5;
  border-radius: 0.25rem;
  white-space: nowrap;
  border: 2px solid transparent;
  &:hover {
    color: ${e=>{let{theme:t}=e;return t.color("*.foreground")}};
  }
  &:focus-visible {
    border-color: ${e=>{let{theme:t}=e;return t.commonColors.focusRing({focused:!0})}};
  }
`,sh=I.zo.span`
  margin-left: -1px;
  line-height: 1.2;
`,sp=I.zo.span`
  color: ${e=>{let{theme:t}=e;return t.color("*.foreground")}};
  max-width: 8.25rem;
  overflow: hidden;
  text-overflow: ellipsis;
`,sm=(0,I.zo)(sl.v)`
  &:focus-visible {
    outline: 2px solid
      ${e=>{let{theme:t}=e;return t.commonColors.focusRing({focused:!0})}};
    outline-offset: -2px;
  }
`;function sg(e){let{label:t,value:n,onClear:r,...i}=e;return(0,C.jsx)(sc.b,{...i,children:(e,i)=>(0,C.jsxs)(su,{...e,ref:i,children:[t,n?(0,C.jsxs)(C.Fragment,{children:[": ",(0,C.jsx)(sp,{children:n}),(0,C.jsx)(sd.V,{onPress:r,children:(0,C.jsx)(sm,{icon:"actions/close",hoverIcon:"actions/closeHovered"})})]}):(0,C.jsx)(sh,{children:(0,C.jsx)(M.vq,{icon:"general/arrowDownSmall.svg"})})]})})}sg.__docgenInfo={description:"",methods:[],displayName:"VcsFilterDropdown",props:{label:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},value:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let sf=I.zo.span.attrs({role:"button"})`
  display: inline-flex;
`;function sA(e){let{onClick:t,isFavorite:n,isCurrent:r}=e;return(0,C.jsx)(sf,{onPointerUp:e=>{e.stopPropagation()},onClick:t,children:r?(0,C.jsx)(sl.v,{icon:n?"/platform/dvcs-impl/resources/icons/currentBranchFavoriteLabel.svg":"/platform/dvcs-impl/resources/icons/currentBranchLabel.svg",hoverIcon:n?"nodes/favorite.svg":"nodes/notFavoriteOnHover.svg",hoverContainerSelector:"[role='menuitem']"}):n?(0,C.jsx)(M.vq,{icon:"nodes/favorite.svg"}):(0,C.jsx)(sl.v,{icon:"nodes/emptyNode.svg",hoverIcon:"nodes/notFavoriteOnHover.svg",hoverContainerSelector:"[role='menuitem']"})})}function sx(e){let{tabKey:t}=e,[n,r]=(0,D.KO)(ol.branch(t)),i=(0,eT.oC)(ol.branch(t));return(0,C.jsx)(sg,{value:n.length>0?n.join("|"):null,onClear:i,renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsx)(sv,{menuProps:t,onBranchesSelected:r})},label:"Branch"})}sA.__docgenInfo={description:"",methods:[],displayName:"BranchFavoriteButton",props:{isCurrent:{required:!1,tsType:{name:"boolean"},description:""},isFavorite:{required:!0,tsType:{name:"boolean"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let sy=e=>Object.entries((0,rr.Z)(e=>{let{branchName:t}=e;return t},e)).map(e=>{let[t,n]=e;return{branchName:t,repoRoots:n.map(e=>e.repoRoot)}}),sj=(0,Z.cn)(async e=>{let t=await e(ip),n=t.flatMap(e=>{let{remoteBranches:t,repoRoot:n}=e;return t.map(e=>({repoRoot:n,branchName:`${e.remote}/${e.name}`}))});return{localBranches:sy(t.flatMap(e=>{let{localBranches:t,repoRoot:n}=e;return t.map(e=>({repoRoot:n,branchName:e.name}))})),remoteBranches:sy(n)}});function sv(e){let{menuProps:t,onBranchesSelected:n}=e,[r,i]=(0,g.useState)([]),{toggleFavorite:o,isFavorite:a}=iD(),{localBranches:s=[],remoteBranches:l=[]}=(0,D.Dv)(nP(sj))||{},c=(0,rr.Z)(e=>{let{branchName:t}=e;return t.split("/")[0]},l);(0,g.useEffect)(()=>{let e=(e,t)=>t.filter(t=>{let{branchName:n,repoRoots:r}=t;return r.some(t=>a({branchType:e,branchName:n,repoRoot:t}))}).map(t=>{let{branchName:n,repoRoots:r}=t;return{branchType:e,branchName:n,repoRoots:r}});i([{branchType:"LOCAL",branchName:"HEAD",repoRoots:[]}].concat(e("LOCAL",s)).concat(e("REMOTE",l)))},[]);let d=e=>{let{branchName:t,branchType:n,repoRoots:r}=e;return(0,C.jsx)(O.c,{textValue:t,children:(0,C.jsx)(K._,{content:t,icon:(0,C.jsx)(sA,{isFavorite:"HEAD"===t||r.some(e=>a({branchType:n,repoRoot:e,branchName:t})),onClick:()=>{"HEAD"!==t&&r.forEach(e=>{o({branchType:n,repoRoot:e,branchName:t})})}})})},`branch:${t}`)};return(0,C.jsx)(iV.w,{...t,submenuBehavior:"toggleOnPress",autoFocus:"first",minWidth:250,onAction:e=>{let[t,i]=`${e}`.split(":");"branch"===t&&i?n([i]):"favorites"===t?n(r.map(e=>{let{branchName:t}=e;return t})):"select"===t&&tA()},children:[(0,C.jsx)(O.c,{children:"Select..."},"select"),(0,C.jsx)(O.c,{children:"Favorites"},"favorites"),...r.map(d),(0,C.jsx)(nE.i,{}),(0,C.jsx)(O.c,{title:"Local",children:s.map(e=>{let{branchName:t,repoRoots:n}=e;return d({branchType:"LOCAL",branchName:t,repoRoots:n})})},"local"),...Object.entries(c).map(e=>{let[t,n]=e;return(0,C.jsx)(O.c,{title:`${t}/...`,children:n.map(e=>{let{branchName:t,repoRoots:n}=e;return d({branchType:"REMOTE",branchName:t,repoRoots:n})})},`remote:${t}`)})]})}sx.__docgenInfo={description:"",methods:[],displayName:"BranchesFilterDropdown",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};var sw=n("88808"),sC=n("74546"),sb=n("84244");function sE(e){var t;let n=function(e){let t=e.match("(\\w+)[\\p{Punct}\\s](\\w+)");return t?[t[1],t[2]]:null}(e);if(null!=n){let[e,t]=n;return e.toLowerCase()+" "+t.toLowerCase()}return(t=e).match("[ -~]*")?t.toLowerCase():t}let sS=(0,ei.xu)(e=>(0,Z.cn)(async()=>({name:await f.ZP.getConfig({fs:r,dir:e,path:"user.name"})??"",email:await f.ZP.getConfig({fs:r,dir:e,path:"user.email"})??""}))),sD=I.zo.div`
  display: flex;
  height: 1.5rem;
  align-items: center;
  width: 100%;
  --column-width-1: 130px;
  --column-width-2: 130px;
  --column-width-3: 70px;
`,sI=I.zo.div`
  overflow: hidden;
  padding-left: 0.25rem;
`,sk=I.zo.div`
  ${e=>{let{asOverlay:t}=e;return t?(0,I.iv)`
          flex-shrink: 0;
        `:(0,I.iv)`
          position: absolute;
          right: 0;
          top: 1px;
          max-width: calc(100% - 100px);
        `}};

  display: flex;
  gap: 0.25rem;
  overflow: hidden;
  background: ${e=>{let{theme:t}=e;return t.currentBackgroundAware(t.color("List.background"))}};
`,sT=I.zo.div`
  position: relative;
  display: flex;
  gap: 0.25rem;
`,sP=I.zo.div`
  display: flex;
  align-items: center;
  margin: 0 0.25rem;
  font-size: 0.75rem;
`,sB=e=>{let{repoRoot:t,author:n}=e,r=(0,D.Dv)(sS(t)),i=(0,D.Dv)(oS),o=(0,D.Dv)(oc.user);return{fontWeight:i&&"*"!==o&&sE(r.name)===sE(n.name)?"bold":void 0}};function sR(e){var t;let{refs:n,readCommitResult:{oid:r,commit:{author:i,committer:o,message:a}},repoRoot:s}=e,l=(0,D.Dv)(ob),c=(0,D.Dv)(oE),d=(0,D.Dv)(oP(oD.id)),u=(0,D.Dv)(oP(ok.id)),h=(0,D.Dv)(oP(oI.id)),p=sB({author:i,repoRoot:s});return(0,C.jsxs)(sD,{children:[(0,C.jsx)(sI,{style:{flexBasis:"0%",flexGrow:1,flexShrink:1},children:(0,C.jsxs)(sT,{children:[n&&(0,C.jsx)(sF,{onLeft:c,refs:n}),(0,C.jsx)("span",{style:p,children:ai(a).subject})]})}),d&&(0,C.jsxs)(sI,{style:{flexBasis:"auto",width:"var(--column-width-1)",flexShrink:1,...p},children:[i.name,o.name!==i.name&&"*"]}),u&&(0,C.jsx)(sI,{style:{flexBasis:"auto",width:"var(--column-width-2)",flexShrink:1,...p},children:(t=1e3*(l?o:i).timestamp,aa.format(t).replace(" ","\u202F"))}),h&&(0,C.jsx)(sI,{style:{flexBasis:"auto",width:"var(--column-width-3)",flexShrink:1,...p},children:ao(r)})]})}function sN(e){return`${e.type}${e.name}`}function sF(e){let{refs:t,onLeft:n}=e,{filteredRefs:r}=(0,g.useMemo)(()=>{let e=t.some(e=>"localBranch"===e.type&&e.isCurrent);return{filteredRefs:t.filter(n=>!("head"===n.type&&e||"remoteBranch"===n.type&&t.find(e=>"localBranch"===e.type&&e.trackingBranch===n.name)))}},[t]);return(0,C.jsx)(H.a,{placement:"bottom",delay:800,isDisabled:t.length<2,tooltip:(0,C.jsx)(aP.u,{withPointer:!0,children:t.map(e=>(0,C.jsxs)(sP,{children:[(0,C.jsx)(aH,{type:e.type}),e.name]},sN(e)))}),children:e=>{let{ref:i,...o}=e;return(0,C.jsx)(sk,{ref:i,asOverlay:n,...o,children:r.filter(e=>"remoteBranch"!==e.type||!t.find(t=>"localBranch"===t.type&&t.trackingBranch===e.name)).map(e=>{let t=e.name,n=[e.type];return"localBranch"===e.type&&e.trackingBranch&&(n.unshift("remoteBranch"),t=`${e.trackingBranch.split("/")[0]} & ${e.name}`),"localBranch"===e.type&&e.isCurrent&&n.push("head"),(0,C.jsx)(aU,{types:n,children:t},sN(e))})})}})}sR.__docgenInfo={description:"",methods:[],displayName:"CommitsTableRow",props:{repoRoot:{required:!0,tsType:{name:"string"},description:""},readCommitResult:{required:!0,tsType:{name:"ReadCommitResult"},description:""},refs:{required:!0,tsType:{name:"union",raw:"GitRef[] | undefined",elements:[{name:"Array",elements:[{name:"GitRef"}],raw:"GitRef[]"},{name:"undefined"}]},description:""}}};let sL=(0,I.zo)(sw.ko)`
  position: absolute;
  width: 100%;
  z-index: 1;
`,sO=I.zo.div`
  position: relative;
  min-height: 0;
  flex: 1;
  ${sb.o} {
    // the default "min-width: min-content", which is necessary for sizing overlays (e.g. Popup) containing list/tree,
    // results in horizontally scrollable table. Probably not an issue when a proper Table component is implemented.
    min-width: unset;
  }
`,s_=g.createContext({});function sM(){let e=(0,D.Dv)(ot),t=od(),{value:n,isLoading:r}=(0,D.Dv)(t6(ox,null)),i=n?.rows,o=(0,D.Dv)(nP(oy)),[a,s]=(0,D.KO)(oj);return(0,C.jsx)(s_.Provider,{value:o??{},children:(0,C.jsxs)(sO,{children:[r&&(0,C.jsx)(sL,{"aria-label":"Loading commits",isIndeterminate:!0}),i&&i.length>0&&(0,C.jsx)(sC.a,{"aria-label":"Commits list",items:i,fillAvailableSpace:!0,selectionMode:"multiple",selectedKeys:a,onSelectionChange:s,estimatedItemHeight:24,children:e=>{let{readCommitResult:t,repoPath:n}=e;return(0,C.jsx)(O.c,{textValue:t.commit.message,children:(0,C.jsx)(s_.Consumer,{children:e=>(0,C.jsx)(sR,{readCommitResult:t,repoRoot:n,refs:e[t.oid]})})},t.oid)}}),i&&0===i.length&&(0,C.jsxs)(an,{children:["No commits matching filters",(0,C.jsx)(tg.r,{onPress:()=>t(e),children:"Reset filters"})]})]})})}sM.__docgenInfo={description:"",methods:[],displayName:"CommitsTable"};let sG=[{key:"commitTimestamp",name:"Commit Timestamp",atom:ob},{key:"referencesOnLeft",name:"References on the Left",atom:oE}],sK=[{key:"myCommits",name:"My Commits",atom:oS}],sH=[oD,oI,ok].map(e=>{let{name:t,id:n}=e;return{name:t,key:n,atom:oP(n)}}),sV=e=>{let[t,n]=(0,D.KO)(e.atom);return{...e,value:t,set:n}};function sU(){let e=sG.map(sV),t=sK.map(sV),n=sH.map(sV),r=e.concat(t).concat(n);return(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"View Options"}),children:(0,C.jsx)(iH.p,{renderMenu:i=>{let{menuProps:o}=i;return(0,C.jsxs)(iV.w,{...o,selectedKeys:r.filter(e=>{let{value:t}=e;return t}).map(e=>{let{name:t}=e;return t}),onAction:e=>{let t=r.find(t=>{let{name:n}=t;return n===e});t?t.set(e=>!e):tA()},children:[(0,C.jsxs)(iQ.$,{title:"Show",children:[(0,C.jsx)(O.c,{children:"Compact References View"}),(0,C.jsx)(O.c,{children:"Tag Names"}),(0,C.jsx)(O.c,{children:"Long Edges"}),e.map(e=>{let{name:t,key:n}=e;return(0,C.jsx)(O.c,{children:t},n)}),(0,C.jsx)(O.c,{title:"Columns",children:n.map(e=>{let{name:t,key:n}=e;return(0,C.jsx)(O.c,{children:t},n)})})]}),(0,C.jsxs)(iQ.$,{title:"Highlight",children:[t.map(e=>{let{name:t,key:n}=e;return(0,C.jsx)(O.c,{children:t},n)}),(0,C.jsx)(O.c,{children:"Merge Commits"}),(0,C.jsx)(O.c,{children:"Current Branch"}),(0,C.jsx)(O.c,{children:"Not Cherry-Picked Commits"})]})]})},children:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"})})})}sU.__docgenInfo={description:"",methods:[],displayName:"CommitsTableViewOptionsMenuIconButton"};let s$=(0,I.zo)(ss.M)`
  border-radius: 2px;
  width: 219px;
  margin-right: 0.0625rem;
  margin-left: 0.2rem;
`,sQ=I.zo.div`
  height: 100%;
  display: flex;
  flex-direction: column;
`,sq=(0,Z.cn)([]);function sz(e){var t;let{tabKey:n}=e,r=(0,D.Dv)(lw),[i,o]=(0,D.KO)(ol.searchQuery(n)),[a,s]=(0,D.KO)(ol.user(n)),l=(0,eT.oC)(ol.user(n)),[c,d]=(0,D.KO)(ol.date(n)),u=(0,eT.oC)(ol.date(n)),[h,p]=(0,D.KO)(sq),[m,f]=(0,g.useState)(i),A=(0,ty.k)(),x=(0,D.Dv)(ol.regExp(n)),y=(0,D.Dv)(ol.matchCase(n)),j=function(e){void 0===e&&(e=m),o(e),e&&!h.includes(e)&&p(t=>[e,...t.filter(t=>t!==e)])};(0,g.useEffect)(()=>{f(i)},[i]);let v=(0,eT.lV)((0,g.useCallback)((e,t)=>{let n=(0,sa.Z)();t(oe,e=>[...e,n]),Object.values(ol).forEach(r=>{t(r(n),e(r(e(ot))))}),t(ot,n)},[])),w=new Date,b=new Date;b.setDate(w.getDate()-7);let E=new Date;E.setDate(w.getDate()-1);let S=[{name:"Last 24 hours",value:{from:E}},{name:"Last 7 days",value:{from:b}}];return(0,C.jsxs)(sQ,{children:[(0,C.jsxs)(ae,{children:[(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Text or Hash Filter",shortcut:A(rj.FOCUS_TEXT_FILTER)}),children:(0,C.jsx)(s$,{inputRef:r,value:m,onChange:f,onSubmit:j,onBlur:()=>j(),onClear:()=>j(""),searchHistory:h,addonAfter:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(sl.R,{as:ns.K,excludeFromTabOrder:!1,actionId:rj.REG_EXP,children:(0,C.jsx)(sl.v,{icon:x?"actions/regexSelected":"actions/regex",hoverIcon:x?"actions/regexSelected":"actions/regexHovered"})}),(0,C.jsx)(sl.R,{as:ns.K,excludeFromTabOrder:!1,actionId:rj.MATCH_CASE,children:y?(0,C.jsx)(M.vq,{icon:"actions/matchCaseSelected"}):(0,C.jsx)(sl.v,{icon:"actions/matchCase",hoverIcon:"actions/matchCaseHovered"})})]})})}),(0,C.jsxs)(iK.o,{children:[(0,C.jsx)(sx,{tabKey:n}),(0,C.jsx)(sg,{value:"*"===a?"me":a,onClear:l,renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsxs)(L.v2,{...t,onAction:e=>{if("select"===e)return tA();s(`${e}`)},children:[(0,C.jsx)(O.c,{children:"Select..."},"select"),(0,C.jsx)(O.c,{children:"me"},"*")]})},label:"User"}),(0,C.jsx)(sg,{value:c&&((t=c).from&&t.to?`Between ${i8(t.from)} and ${i8(t.to)}`:t.from?`since ${i8(t.from)}`:t.to?`until ${i8(t.to)}`:""),onClear:u,renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsx)(L.v2,{...t,onAction:e=>{let t=S.find(t=>{let{name:n}=t;return n===e});t?d(t.value):tA()},children:[(0,C.jsx)(O.c,{children:"Select..."},"select"),...S.map(e=>{let{name:t}=e;return(0,C.jsx)(O.c,{children:t},t)})]})},label:"Date"}),(0,C.jsx)(sg,{renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsxs)(L.v2,{...t,onAction:tA,children:[(0,C.jsx)(O.c,{children:"Select in..."}),(0,C.jsx)(O.c,{children:"Select in Tree..."})]})},label:"Paths"}),(0,C.jsx)(iK.J,{}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Open New Git Log Tab"}),children:(0,C.jsx)(i$.hU,{"aria-label":"Checkout",onPress:v,children:(0,C.jsx)(M.vq,{icon:"actions/openNewTab.svg"})})})]}),(0,C.jsx)(at,{}),(0,C.jsxs)(iK.o,{style:{flexShrink:0},children:[(0,C.jsx)(ns.K,{actionId:rj.LOG_REFRESH}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Cherry-Pick"}),children:(0,C.jsx)(i$.hU,{isDisabled:!0,children:(0,C.jsx)(M.vq,{icon:"/platform/dvcs-impl/resources/icons/cherryPick.svg"})})}),(0,C.jsx)(sU,{}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Go To Hash/Branch/Tag",shortcut:"\u2318F"}),children:(0,C.jsx)(i$.hU,{children:(0,C.jsx)(M.vq,{icon:"actions/find"})})})]})]}),(0,C.jsx)(sM,{})]})}function sW(e,t){let n=e.flatMap(e=>{let{repoRoot:t,localBranches:n,currentBranch:r}=e;return n.map(e=>({repoRoot:t,isCurrent:r?.name===e.name,branch:e}))}),r=Object.entries((0,rr.Z)(e=>{let{branch:t}=e;return t.name},n)).map(t=>{let[n,r]=t,i=r.map(e=>{let{repoRoot:t}=e;return(0,p.basename)(t)});return{type:"localBranch",key:`localBranch:${i.join("|")}:${n}`,name:n,branches:r,isFavorite:r.some(e=>{let{repoRoot:t,branch:n}=e;return iC({repoRoot:t,branchType:"LOCAL",branchName:n.name})}),isCurrent:r.some(e=>{let{isCurrent:t}=e;return t}),repos:i.length===e.length?null:i}});return t?sJ(r):r}function sY(e,t){let n=e.flatMap(e=>{let{repoRoot:t,remoteBranches:n}=e;return n.map(e=>({repoRoot:t,branch:e}))}),r=Object.entries((0,rr.Z)(e=>{let{branch:t}=e;return`${t.remote}/${t.name}`},n)).map(t=>{let[n,r]=t,i=r.map(e=>{let{repoRoot:t}=e;return(0,p.basename)(t)});return{type:"remoteBranch",key:`remoteBranch:${i.join("|")}:${n}`,name:n,branches:r,isFavorite:r.some(e=>{let{repoRoot:t,branch:n}=e;return iC({repoRoot:t,branchType:"REMOTE",branchName:n.name})}),repos:i.length===e.length?null:i}});return t?sJ(r):r}sz.__docgenInfo={description:"",methods:[],displayName:"VcsLogCommitsView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};let sZ=(0,Z.cn)(async e=>{let t=await e(ip),n=e(sX("directory")),r=e(s0)&&e(sX("repository"));return[{type:"head"},{type:"branchType",branchType:"LOCAL",children:r?t.map(e=>({type:"repository",key:`LOCAL:repository:${e.repoRoot}`,repoRoot:e.repoRoot,children:sW([e],n)})):sW(t,n)},{type:"branchType",branchType:"REMOTE",children:r?t.map(e=>({type:"repository",key:`REMOTE:repository:${e.repoRoot}`,repoRoot:e.repoRoot,children:sY([e],n)})):sY(t,n)}]}),sJ=rx({shouldCollapseDirectories:!1,getPath:e=>e.name}),sX=(0,ei.xu)(e=>(0,Z.cn)(!1)),s0=(0,Z.cn)(e=>e(te).length>1),s1=oi(g.createRef()),s2=oi(new Set),s5=oi(new Set),s6=oi(""),s4=[{id:"directory",title:"Directory",icon:(0,C.jsx)(M.vq,{icon:"actions/GroupByPackage.svg"}),isActive:sX("directory"),isAvailable:!0},{id:"repository",title:"Repository",isActive:sX("repository"),isAvailable:s0}],s7=(0,Z.cn)(e=>s4.filter(t=>"boolean"!=typeof t.isAvailable?e(t.isAvailable):t.isAvailable).map(t=>({...t,isActive:e(sX(t.id))})));function s3(){let e=(0,eT.lV)((0,g.useCallback)((e,t)=>e=>{t(sX(e),e=>!e)},[])),t=(0,D.Dv)(s7);return(0,C.jsx)(iq,{groupings:t,onToggle:e})}s3.__docgenInfo={description:"",methods:[],displayName:"BranchesGroupByActionButton"};let s8={branchType:e=>{var t;return(0,C.jsx)(O.c,{textValue:(t=e.branchType)[0].toUpperCase()+t.slice(1).toLowerCase(),childItems:e.children,children:(0,C.jsx)(nv.J,{})},`${e.type}:${e.branchType}`)},localBranch:e=>(0,C.jsx)(O.c,{textValue:(0,p.basename)(e.name),children:(0,C.jsx)(nj.e,{children:(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:(0,C.jsx)(o4,{branches:e.branches})}),children:t=>(0,C.jsxs)(nj.e.Group,{...t,children:[e.isCurrent?(0,C.jsx)(H.a,{tooltip:(0,C.jsxs)(aP.u,{children:["Current ",e.isFavorite&&"favorite ","branch"]}),children:t=>(0,C.jsx)(nj.e.Group,{...t,children:(0,C.jsx)(M.vq,{icon:e.isFavorite?"/platform/dvcs-impl/resources/icons/currentBranchFavoriteLabel.svg":"/platform/dvcs-impl/resources/icons/currentBranchLabel.svg"})})}):(0,C.jsx)(M.vq,{icon:"vcs/branchNode"}),(0,C.jsx)(nv.J,{}),e.repos&&(0,C.jsxs)(nj.e.Hint,{children:["(",e.repos.join(", "),")"]})]})})})},`${e.key}`),remoteBranch:e=>(0,C.jsx)(O.c,{textValue:(0,p.basename)(e.name),children:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)(M.vq,{icon:e.isFavorite?"nodes/favorite.svg":"vcs/branchNode"}),(0,C.jsx)(nv.J,{}),e.repos&&(0,C.jsxs)(nj.e.Hint,{children:["(",e.repos.join(", "),")"]})]})},`${e.key}`),repository:e=>(0,C.jsx)(O.c,{textValue:(0,p.basename)(e.repoRoot),childItems:e.children,children:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)(iP,{rootPath:e.repoRoot}),(0,C.jsx)(nv.J,{})]})},`${e.key}`),directory:e=>(0,C.jsx)(O.c,{textValue:(0,p.basename)(e.dirPath),childItems:e.children,children:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)(M.vq,{icon:"nodes/folder.svg"}),(0,C.jsx)(nv.J,{})]})},`${e.type}_${e.parentNodePath}${e.dirPath}`),head:e=>(0,C.jsx)(O.c,{textValue:"HEAD (Current Branch)",children:(0,C.jsx)(nv.J,{})},`${e.type}`)},s9=e=>{let[t,n,r]=e.split(":");return"head"===t?"HEAD":"localBranch"===t||"remoteBranch"===t?r??null:null},le=I.zo.input`
  all: unset;
  flex: 1;
  align-self: stretch;
`,lt=I.zo.div`
  min-width: 0; // don't outgrow the container
  flex-grow: 1; // fill the available space
  display: flex;
  flex-direction: column;
`,ln=I.zo.span`
  display: inline-flex;
  margin-top: -0.0625rem;
  margin-left: 0.7rem;
  margin-right: 0.25rem;
  cursor: text;
`;function lr(e){let{tabKey:t}=e,n=(0,D.Dv)(nP(sZ)),[r,i]=(0,D.KO)(s2(t)),[o,a]=(0,D.KO)(s5(t)),[s,l]=(0,D.KO)(s6(t)),c=(0,D.Dv)(s1(t)),d=(0,g.useRef)(null),u=(0,g.useRef)(null),[h,p]=(0,g.useState)(!1),m=(0,D.b9)(oc.branch);return(0,C.jsxs)(lt,{children:[(0,C.jsxs)(ae,{children:[(0,C.jsx)(ln,{children:(0,C.jsx)(M.vq,{icon:"actions/search"})}),(0,C.jsx)(le,{ref:u,tabIndex:-1,value:s,onChange:e=>l(e.target.value),onFocus:()=>{p(!0)},onBlur:()=>{p(!1)}})]}),(0,C.jsx)(ny.b,{ref:d,treeRef:c,focusProxyRef:u,items:n??[],selectionMode:"multiple",selectedKeys:r,onSelectionChange:i,expandedKeys:o,onExpandedChange:a,onAction:e=>{let t=s9(`${e}`);t&&m([t])},fillAvailableSpace:!0,showAsFocused:h,searchTerm:s,onSearchTermChange:l,keepSearchActiveOnBlur:!0,hideSpeedSearchPopup:!0,isSearchActive:!0,children:e=>s8[e.type](e)})]})}lr.__docgenInfo={description:"",methods:[],displayName:"BranchesTree",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};let li="Git.DeleteBranch",lo="Git.Compare.With.Current",la="Git.Show.My.Branches",ls="Git.Fetch",ll="Git.Toggle.Favorite",lc=v.ZP.div.withConfig({displayName:"VcsBranchesView__StyledContainer",componentId:"sc-vamle4-0"})(["display:flex;height:100%;"]);function ld(e){let{tabKey:t}=e,n=(0,D.Dv)(s1(t)),r=[{id:rj.GIT_UPDATE_SELECTED,title:"Update Selected",icon:(0,C.jsx)(M.vq,{icon:"actions/checkOut"}),actionPerformed:()=>{tA()}},{id:li,title:"Delete branch",icon:(0,C.jsx)(M.vq,{icon:"actions/gc"}),useShortcutsOf:"SafeDelete",actionPerformed:()=>{tA()}},{id:lo,title:"Compare with current",icon:(0,C.jsx)(M.vq,{icon:"actions/diff"}),useShortcutsOf:rj.SHOW_DIFF,actionPerformed:()=>{tA()}},{id:la,title:"Show My Branches",icon:(0,C.jsx)(M.vq,{icon:"actions/find"}),actionPerformed:()=>{tA()}},{id:ls,title:"Fetch All Remotes",icon:(0,C.jsx)(M.vq,{icon:"vcs/fetch"}),actionPerformed:()=>{tA()}},{id:ll,title:"Mark/Unmark as Favorite",icon:(0,C.jsx)(M.vq,{icon:"nodes/favorite"}),actionPerformed:()=>{tA()}},...(0,na.x)({treeRef:n})];return(0,C.jsx)(B.DG,{actions:r,children:e=>{let{shortcutHandlerProps:n}=e;return(0,C.jsxs)(lc,{...n,children:[(0,C.jsx)(lh,{}),(0,C.jsx)(lr,{tabKey:t})]})}})}let lu=(0,v.ZP)(iK.o).withConfig({displayName:"VcsBranchesView__StyledToolbar",componentId:"sc-vamle4-1"})(["height:100%;flex-shrink:0;"]);function lh(){return(0,C.jsxs)(lu,{border:"right",orientation:"vertical",children:[(0,C.jsx)(ns.K,{actionId:rj.GIT_LOG_HIDE_BRANCHES}),(0,C.jsx)(iK.J,{}),(0,C.jsx)(ns.K,{actionId:rj.GIT_CREATE_NEW_BRANCH}),(0,C.jsx)(ns.K,{actionId:rj.GIT_UPDATE_SELECTED}),(0,C.jsx)(ns.K,{actionId:li}),(0,C.jsx)(ns.K,{actionId:lo}),(0,C.jsx)(ns.K,{actionId:la}),(0,C.jsx)(ns.K,{actionId:ls}),(0,C.jsx)(ns.K,{actionId:ll}),(0,C.jsx)(ns.K,{actionId:rj.GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH}),(0,C.jsx)(iK.J,{}),(0,C.jsx)(s3,{}),(0,C.jsx)(ns.K,{actionId:tx.$.EXPAND_ALL}),(0,C.jsx)(ns.K,{actionId:tx.$.COLLAPSE_ALL})]})}ld.__docgenInfo={description:"",methods:[],displayName:"VcsBranchesView",props:{tabKey:{required:!0,tsType:{name:"string"},description:""}}};let lp=nJ({id:rj.LOG_REFRESH,title:"Refresh",icon:(0,C.jsx)(M.vq,{icon:"actions/refresh.svg"}),useShortcutsOf:tx.$.REFRESH,actionPerformed:e=>{let{set:t}=e;t(oA)}}),lm=nJ({id:rj.COPY_REVISION_NUMBER,title:"Copy Revision Number",icon:(0,C.jsx)(M.vq,{icon:"actions/copy.svg"}),useShortcutsOf:tx.$.COPY_REFERENCE,actionPerformed:async e=>{let{get:t}=e,n=await t(ov);tS()(n.join(" ")).catch(console.error)}}),lg=()=>[(0,D.Dv)(lm),(0,D.Dv)(lp)],lf=I.zo.div`
  min-height: 70%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 50px;
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  white-space: nowrap;
`;function lA(){let e=(0,B.DI)();return(0,C.jsx)(lf,{children:(0,C.jsxs)("div",{style:{textAlign:"center"},children:["To track changes to code:",(0,C.jsx)("br",{}),(0,C.jsx)(tg.r,{onPress:()=>e(rj.GIT_INIT),children:"Create Git repository..."}),(0,C.jsx)("br",{}),(0,C.jsx)(tg.r,{onPress:tA,children:"Use Local History..."}),(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),(0,C.jsx)(M.vq,{style:{verticalAlign:"text-top"},icon:"general/contextHelp.svg"})," ",(0,C.jsx)(tg.r,{onPress:tA,children:"Version Control integration"})," "]})})}lA.__docgenInfo={description:"",methods:[],displayName:"VersionControlToolWindowZeroState"};let lx=(0,Z.cn)(.25),ly=(0,Z.cn)(.35),lj=I.zo.span`
  margin: 0 0.5rem 0 0.125rem;
`,lv=I.zo.div`
  height: 100%;
  display: flex;
  :focus-visible {
    outline: none;
  }
`,lw=(0,Z.cn)(g.createRef()),lC=()=>{let e=(0,D.Dv)(oe),[t,n]=(0,D.KO)(ot);return(0,D.Dv)(te).length>0?(0,C.jsx)(n8.y,{headerContent:(0,C.jsx)(lj,{children:"Git:"}),activeKey:t,onActiveKeyChange:e=>n(`${e}`),children:e.map(e=>(0,C.jsx)(n8.y.View,{tabContent:(0,C.jsx)(lF,{tabKey:e}),children:(0,C.jsx)(lI,{tabKey:e})},e))}):(0,C.jsx)(nt.n,{headerContent:"Version Control",children:(0,C.jsx)(lA,{})})},lb=I.zo.button.attrs({tabIndex:-1})`
  box-sizing: border-box;
  all: unset;
  width: 1.71875rem;
  align-items: center;
  display: flex;
  flex-direction: column;
  padding: 0.5rem 0;
  gap: 0.625rem;
  background: ${e=>{let{theme:t}=e;return t.color("*.background")}};
  color: ${e=>{let{theme:t}=e;return t.color("*.foreground")}};
  :disabled {
    color: ${e=>{let{theme:t}=e;return t.color("Button.disabledText")}};
  }
  &:hover {
    background: ${e=>{let{theme:t}=e;return t.color("ToolWindow.Button.hoverBackground",t.dark?"#0f0f0f28":"#55555528")}};
  }
`,lE=(0,I.zo)(lb)`
  border-right: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.borderColor}};
`,lS=I.zo.span`
  writing-mode: vertical-lr;
  transform: rotateZ(180deg);
  font-size: 0.6875rem;
`;function lD(e){let{onPress:t}=e;return(0,C.jsxs)(lE,{onClick:t,children:[(0,C.jsx)(M.vq,{icon:"actions/arrowExpand"}),(0,C.jsx)(lS,{children:"Branches"})]})}function lI(e){let{tabKey:t}=e,[n,r]=(0,D.KO)(lx),[i,o]=(0,D.KO)(ly),a=[...lg(),(0,D.Dv)(lR),(0,D.Dv)(lT),(0,D.Dv)(lk),(0,D.Dv)(lP),(0,D.Dv)(lB),lN],[s,l]=(0,D.KO)(oo(t)),c=s?{firstView:(0,C.jsx)(ld,{tabKey:t}),firstSize:n,onFirstResize:r,firstViewMinSize:85}:{};return(0,C.jsx)(B.DG,{actions:a,children:e=>{let{shortcutHandlerProps:n}=e;return(0,C.jsxs)(lv,{...n,tabIndex:s?-1:0,children:[!s&&(0,C.jsx)(lD,{onPress:()=>l(!0)}),(0,C.jsx)(rt.D,{...c,innerView:(0,C.jsx)(sz,{tabKey:t}),innerViewMinSize:200,lastView:(0,C.jsx)(sn,{tabKey:t}),lastSize:i,onLastResize:o,lastViewMinSize:40})]})}})}let lk=nJ({id:rj.MATCH_CASE,title:"Match Case",icon:(0,C.jsx)(M.vq,{icon:"actions/matchCase.svg"}),actionPerformed:e=>{let{get:t,set:n}=e;n(ol.matchCase(t(ot)),e=>!e)}}),lT=nJ({id:rj.GIT_LOG_HIDE_BRANCHES,title:"Hide Git Branches",icon:(0,C.jsx)(M.vq,{icon:"actions/arrowCollapse"}),actionPerformed:e=>{let{get:t,set:n}=e;n(oo(t(ot)),!1)}}),lP=nJ({id:rj.REG_EXP,title:"Regex",icon:(0,C.jsx)(M.vq,{icon:"actions/regex"}),actionPerformed:e=>{let{get:t,set:n}=e;n(ol.regExp(t(ot)),e=>!e)}}),lB=nJ({id:rj.SHOW_DETAILS,title:"Show Details",description:"Display details panel",actionPerformed:e=>{let{get:t,set:n}=e;n(oa(t(ot)),e=>!e)}}),lR=nJ({id:rj.FOCUS_TEXT_FILTER,title:"Focus Text Filter",actionPerformed:e=>{let{get:t}=e;t(lw).current?.focus()}}),lN={id:rj.SHOW_DIFF_PREVIEW,title:"Show Diff Preview",description:"Show Diff Preview Panel",actionPerformed:()=>tA()};function lF(e){let{tabKey:t}=e,n=(0,eT.lV)(ou);return(0,C.jsx)(o9.v,{title:(0,D.Dv)(on(t)),closeButton:"MAIN"!==t&&(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Close Tab"}),children:(0,C.jsx)($.W,{onPress:()=>n(t)})})})}lC.__docgenInfo={description:"",methods:[],displayName:"VersionControlToolWindow"};let lL=[{id:"Project",title:"Project",icon:(0,C.jsx)(M.vq,{icon:"toolwindows/toolWindowProject"}),content:(0,C.jsx)(n3,{}),initialState:(0,ne.x5)({isVisible:!0,weight:.23})},{id:"Terminal",title:"Terminal",icon:(0,C.jsx)(M.vq,{icon:"toolwindows/toolWindowProject"}),content:(0,C.jsx)(nt.n,{headerContent:"Terminal",children:(0,C.jsx)(no,{})}),initialState:(0,ne.x5)({anchor:"bottom"})},{id:o7,title:"Commit",icon:(0,C.jsx)(M.vq,{icon:"toolwindows/toolWindowCommit"}),content:(0,C.jsx)(g.Suspense,{children:(0,C.jsx)(o8,{})}),initialState:(0,ne.x5)({anchor:"left",isSplit:!0,isVisible:!1})},{id:"Version Control",title:"Version Control",icon:(0,C.jsx)(M.vq,{icon:"toolwindows/toolWindowChanges"}),content:(0,C.jsx)(g.Suspense,{children:(0,C.jsx)(lC,{})}),initialState:(0,ne.x5)({anchor:"bottom",weight:.35})}];var lO=n("77298"),l_=n("29514"),lM=n("69842");let lG=(0,Z.cn)(!1),lK=(0,Z.cn)(null);var lH=n("83212"),lV=n("52973");let lU=v.ZP.div.withConfig({displayName:"TasksPopup__StyledPopupTitle",componentId:"sc-rjwznj-0"})(["flex:1;text-align:center;overflow:hidden;text-overflow:ellipsis;margin:0 0.625rem;"]);function l$(){let e=(0,D.b9)(lG),t=(0,D.Dv)(iX),n=i6(),[r,i]=(0,D.KO)(lK);return(0,C.jsx)(lV.GI,{bounds:r||{width:300,left:window.innerWidth-300-150,top:window.innerHeight-80*t.length-30-100},onBoundsChange:e=>{i(e)},minHeight:100,minWidth:300,nonDismissable:!0,interactions:"all",children:(0,C.jsx)(lV.GI.Layout,{header:(0,C.jsxs)(lV.GI.Header,{hasControls:!0,children:[(0,C.jsx)(lU,{children:"Background Tasks"}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(aP.u,{children:"Hide"}),children:(0,C.jsx)(i$.hU,{preventFocusOnPress:!0,excludeFromTabOrder:!0,onPress:()=>e(!1),children:(0,C.jsx)(M.vq,{icon:"general/hideToolWindow"})})})]}),content:(0,C.jsx)(C.Fragment,{children:t.map((e,r)=>(0,C.jsxs)(g.Fragment,{children:[(0,C.jsx)(sw.ko,{style:{margin:".5rem 0.75rem"},name:e.title,isIndeterminate:e.progress.isIndeterminate,"aria-label":`Progress of ${e.title}`,details:e.progress.text||(e.progress.secondaryText?(0,C.jsx)(C.Fragment,{children:"\xa0"}):void 0),secondaryDetails:e.progress.secondaryText,value:e.progress.fraction,maxValue:1,button:e.isCancelable&&(0,C.jsx)(lM.b,{onPress:()=>n(e.id)})}),t[r+1]&&(0,C.jsx)(lH.lX,{})]},e.id))})})})}function lQ(e){return(0,C.jsx)(sw.ko,{dense:!0,namePosition:"side",width:146,...e})}l$.__docgenInfo={description:"",methods:[],displayName:"TasksPopup"};let lq=v.ZP.span.withConfig({displayName:"StatusBarTaskProgressBar__Spacer",componentId:"sc-vrkr3d-0"})(["width:0.5rem;"]),lz=v.ZP.span.withConfig({displayName:"StatusBarTaskProgressBar__StyledProgressBarButton",componentId:"sc-vrkr3d-1"})(["cursor:pointer;","{cursor:unset;}"],sw.ko.Container),lW=()=>{let e=(0,D.Dv)(i0),t=(0,D.Dv)(i1),n=i6(),[r,i]=(0,D.KO)(lG);return(0,g.useEffect)(()=>{0===t&&i(!1)},[t]),(0,C.jsxs)(C.Fragment,{children:[e&&!r&&(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(aP.u,{children:`${e.title}. Click to see all running background tasks.`}),children:(0,C.jsx)(sd.V,{preventFocusOnPress:!0,excludeFromTabOrder:!0,onPress:()=>{i(!0)},children:(0,C.jsx)(lz,{children:(0,C.jsx)(lQ,{name:e.progress.text||e.title,isIndeterminate:e.progress.isIndeterminate,value:e.progress.fraction,maxValue:1,button:(0,C.jsx)(C.Fragment,{children:e.isCancelable&&(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(aP.u,{children:"Cancel"}),children:(0,C.jsx)(lM.b,{small:!0,onPress:()=>n(e.id)})})})})})})}),(t>1||r)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(lq,{}),(0,C.jsxs)(tg.r,{onPress:()=>i(e=>!e),children:[r?"Hide processes":"Show all"," (",t,")"]})]}),r&&t>0&&(0,C.jsx)(l$,{})]})};lW.__docgenInfo={description:'Intentionally, "processes" haven\'t been abstracted as an extension point for different features, since the focus\nhere is not to create an IDE, but to demo UI components.',methods:[],displayName:"StatusBarTaskProgressBar"};var lY=n("60947");let lZ=(0,Z.cn)(e=>{let t=e(tO)?.filePath;return(t&&e(tt(t)))??e(te)[0]?.dir}),lJ=(0,Z.cn)(async e=>{let t=await e(lZ);return t?e(iu(t)):null}),lX=(d=(0,Z.cn)(async e=>{let t=e(tO)?.filePath;return t?e(im(t)):null}),(0,ei.kv)(d,(e,t)=>e instanceof Promise?Promise.all([e,t]).then(e=>{let[t,n]=e;return t??n??t}):e??t??e)),l0=(0,Z.cn)(async e=>{let t=await e(lX);if(t)return{detached:!1,head:t};let n=await e(lZ);return n?{detached:!0,head:await (0,f.qq)({fs:r,dir:n,ref:"HEAD"})}:null});var l1=n("80850"),l2=n("80842"),l5=n("70920");function l6(e,t){return e?.remoteBranches.some(e=>`${e.remote}/${e.name}`===t)?"CLASHING_WITH_REMOTE":e?.localBranches.some(e=>{let{name:n}=e;return n===t})?"EXISTING":null}let l4=RegExp(`(^\\.)|(^-)|(^/)|(\\.\\.)+|[ ~:^?*\\[\\\\]+|(@\\{)+|[${Array(32).fill(null).map((e,t)=>String.fromCharCode(t)).join("")}u007F]`);function l7(e){return e.replace(l4,"_")}let l3=I.zo.div`
  padding: 0.5rem 1rem;
`,l8=(0,I.zo)(l5.U)`
  width: 100%;
`,l9={EXISTING:e=>(0,C.jsxs)(C.Fragment,{children:["Branch name ",e," already exists ",(0,C.jsx)("br",{})]}),CLASHING_WITH_REMOTE:e=>(0,C.jsxs)(C.Fragment,{children:["Branch name ",e," clashes with remote branch ",(0,C.jsx)("br",{}),"with the same name"]})};function ce(e){let{branchName:t,repoRoot:n,close:i}=e,[o,a]=(0,g.useState)(t),[s,l]=(0,g.useState)(!1),c=(0,T.L)(),d=(0,D.Dv)(iu(n)),u=function(){let e=iS();return(0,eT.lV)((0,g.useCallback)(async(t,n,i,o,a)=>{await (0,f.R_)({fs:r,dir:i,oldref:o,ref:a}),n(iu(i));let s={branchType:"LOCAL",branchName:o,repoRoot:i};iE(t(iv),t(iw),s)&&(e(s,!1),e({...s,branchName:a},!0))},[]))}(),h=l6(d,o),p=h&&s?"error":"valid";return(0,C.jsx)(n_.Du,{minWidth:"content",minHeight:"content",children:(0,C.jsx)(nM.b,{header:`Rename branch ${t}`,content:(0,C.jsx)(l3,{children:(0,C.jsx)("form",{id:"branch_rename_form",onSubmit:e=>{e.preventDefault(),h?l(!0):u(d.repoRoot,t,o).catch(e=>{c.show({icon:"Error",title:"Unexpected error",body:`Could not rename branch ${t} to ${o}.`}),console.error("Branch rename error: ",e)}).then(()=>{i()})},children:(0,C.jsx)(l8,{labelPlacement:"above",label:"New branch name:",value:o,onChange:e=>{a(l7(e)),l(!0)},validationState:p,validationMessage:h&&"error"===p?l9[h]?.(t):void 0})})}),footer:(0,C.jsx)(nM.b.Footer,{right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nK.z,{onPress:i,children:"Cancel"}),(0,C.jsx)(nK.z,{variant:"default",type:"submit",form:"branch_rename_form",isDisabled:!!h&&s,children:"Rename"})]})})})})}ce.__docgenInfo={description:"",methods:[],displayName:"RenameBranchWindow",props:{branchName:{required:!0,tsType:{name:"string"},description:""},repoRoot:{required:!0,tsType:{name:"string"},description:""},close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let ct=I.zo.div`
  box-sizing: border-box;
  padding: 0 0.375rem;
  display: flex;
  align-items: center;
  width: 100%;
`,cn=I.zo.div`
  flex: 1;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  margin: 0 0.625rem;
`,cr=(0,Z.cn)(void 0);function ci(e){let{close:t}=e,n=(0,D.Dv)(nP(ip)),[i,o]=(0,D.KO)(cr),[a,s]=(0,g.useState)(i??{}),l=(0,B.BH)(rj.GIT_CREATE_NEW_BRANCH),c=(0,eT.lV)((0,g.useCallback)((e,t,n,i)=>(0,f.NA)({fs:r,dir:n,ref:i}).then(()=>{t(iu(n))}),[])),d=(0,T.L)(),u=(0,y.S)(),h=(0,eT.lV)((0,g.useCallback)(async(e,t,n,i,o)=>{let a=eI(e,t);await (0,f.JE)({fs:r,dir:n,remote:o,ref:i}),console.log(`checked out branch ${i}`),t(iu(n)),t(eD(n));let s=e(tF);t(tF,await is(async e=>{let{filePath:t}=e,n=await r.promises.exists(t);return console.log(`updating the content of the file ${t}`,n),n&&await a(t),n},s))},[])),{isFavorite:p,toggleFavorite:A}=iD();if(!n)return null;let x=1===n.length?`Git Branches in ${m().basename(n[0].repoRoot)}`:"Git Branches";return(0,C.jsx)(lV.GI,{interactions:"all",minHeight:55,minWidth:300,bounds:a,onBoundsChange:(e,t)=>{"resize"===t&&o({width:e.width,height:e.height}),s(e)},children:(0,C.jsx)(l1.F,{header:(0,C.jsx)(lV.GI.Header,{hasControls:!0,children:(0,C.jsxs)(ct,{children:[(0,C.jsx)(cn,{children:x}),(0,C.jsxs)(iK.o,{children:[(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Fetch"}),children:(0,C.jsx)(i$.hU,{onPress:()=>{tA(),t()},children:(0,C.jsx)(M.vq,{icon:"vcs/fetch.svg"})})}),(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Restore Popup Size"}),children:(0,C.jsx)(i$.hU,{isDisabled:void 0===i,onPress:()=>{o(void 0),s(e=>{let{width:t,height:n,...r}=e;return{...r}})},children:(0,C.jsx)(M.vq,{icon:"general/fitContent.svg"})})})]})]})}),content:(0,C.jsxs)(iV.w,{"aria-label":x,submenuBehavior:"toggleOnPress",fillAvailableSpace:!0,autoFocus:"first",disabledKeys:n.flatMap(e=>{let{localBranches:t,repoRoot:n}=e;return t.filter(e=>{let{trackingBranch:t}=e;return!t}).map(e=>{let{name:t}=e;return`${n}/pull-${t}`})}),onAction:e=>{let[t,r,i]=`${e}`.split("//");async function o(e){try{await e()}catch(e){e instanceof f.D1.CheckoutConflictError?d.show({icon:"Error",title:"Git Checkout Problem",body:e.message}):d.show({icon:"Error",title:"Checkout failed",body:`Could not checkout branch ${r}`})}}if(e===l?.id)return l?.perform();switch(i){case"delete":return c(t,r).then(()=>{d.show({title:`Deleted branch: ${r}`,icon:"Info",actions:(0,C.jsx)(l2.g,{onPress:tA,children:"Restore"})})},()=>{d.show({title:`Could not deleted branch: ${r}`,icon:"Error"})});case"rename":return u.open(e=>{let{close:n}=e;return(0,C.jsx)(ce,{repoRoot:t,branchName:r,close:n})});case"checkout":return o(()=>h(t,r));case"remote-checkout":return function(){let e=n?.find(e=>{let{repoRoot:n}=e;return n===t})?.remoteBranches.find(e=>{let{name:t,remote:n}=e;return`${n}/${t}`===r});if(e)return o(()=>h(t,e.name,e.remote))}();default:return tA()}},onClose:t,children:[l&&(0,C.jsx)(O.c,{textValue:l.title,children:(0,C.jsx)(K._,{icon:l.icon,content:l.title})},l.id),(0,C.jsx)(O.c,{children:"Checkout Tag or Revision..."},"checkout_revision"),n.flatMap(e=>{let{remoteBranches:t,localBranches:r,repoRoot:i,currentBranch:o}=e,a=(e,t)=>n.length>1?`${e} in ${m().basename(t)}`:e,s=(e,t)=>[!t&&(0,C.jsx)(O.c,{children:`Compare with '${e}'`},`${i}//${e}//compare-with-branch`),(0,C.jsx)(O.c,{children:"Show Diff with Working Tree"},`${i}//${e}//show-diff-with-working-tree`),(0,C.jsx)(nE.i,{},"compare-actions-divider")],l=(e,t)=>t&&e!==t&&[(0,C.jsx)(O.c,{children:`Rebase '${t}' onto '${e}'`},`${i}//${e}//rebase-current-onto`),(0,C.jsx)(O.c,{children:`Merge '${e}' onto '${t}'`},`${i}//${e}//merge-into-current`),(0,C.jsx)(nE.i,{},"merge-actions-divider")];return[(0,C.jsx)(iQ.$,{title:a("Local Branches",i),children:r.map(e=>{let{name:t,trackingBranch:n}=e,r=t===o?.name,a={branchName:t,branchType:"LOCAL",repoRoot:i};return(0,C.jsxs)(O.c,{textValue:t,title:(0,C.jsx)(K._,{content:t,icon:(0,C.jsx)(sA,{isFavorite:p(a),isCurrent:r,onClick:()=>{A(a)}}),shortcut:n&&(0,C.jsx)(nj.e.Hint,{small:!0,children:n})}),children:[!r&&(0,C.jsx)(O.c,{children:"Checkout"},`${i}//${t}//checkout`),(0,C.jsx)(O.c,{children:`New Branch from '${t}'...`},`${i}//${t}//new-branch-from`),!r&&(0,C.jsx)(O.c,{children:`Checkout and rebase onto '${t}'`},`${i}//${t}//checkout-and-rebase-onto`),(0,C.jsx)(nE.i,{},"new-branch-actions-divider"),s(t,r),l(t,o?.name),(0,C.jsx)(O.c,{children:"Update"},`${i}//${t}//pull`),(0,C.jsx)(O.c,{children:"Push..."},`${i}//${t}//push`),(0,C.jsx)(nE.i,{},"push-divider"),(0,C.jsx)(O.c,{children:"Rename..."},`${i}//${t}//rename`),!r&&(0,C.jsx)(O.c,{children:"Delete"},`${i}//${t}//delete`)]},`${i}//${t}`)})},`${i}//local_branches`),(0,C.jsx)(iQ.$,{title:a("Remote Branches",i),children:t.map(e=>{let t=`${e.remote}/${e.name}`,n={branchName:t,branchType:"REMOTE",repoRoot:i};return(0,C.jsxs)(O.c,{textValue:t,title:(0,C.jsx)(K._,{content:t,icon:(0,C.jsx)(sA,{isFavorite:p(n),onClick:()=>{A(n)}})}),children:[(0,C.jsx)(O.c,{children:"Checkout"},`${i}//${t}//remote-checkout`),(0,C.jsx)(O.c,{children:`New Branch from '${t}'...`},`${i}//${t}//new-branch-from`),(0,C.jsx)(O.c,{children:`Checkout and rebase onto '${t}'`},`${i}//${t}//checkout-and-rebase-onto`),(0,C.jsx)(nE.i,{},"new-branch-actions-divider"),s(t,!1),l(t,o?.name),(0,C.jsx)(O.c,{children:`Pull into '${t}' Using Merge`},`${i}//${t}//pull-into-using-merge`),(0,C.jsx)(O.c,{children:`Pull into '${t}' Using Rebase`},`${i}//${t}//pull-into-using-rebase`),(0,C.jsx)(nE.i,{}),(0,C.jsx)(O.c,{children:"Delete"},`${i}//${t}//delete`)]},`${i}//${t}`)})},`${i}//remote_branches`)]})]})})})}ci.__docgenInfo={description:"",methods:[],displayName:"BranchesPopup",props:{close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let co=!1,ca=()=>{let e=(0,T.L)(),t=(0,D.Dv)(te),n=(0,B.DI)();return async()=>{t.length<2&&!co&&(co=!0,e.showSticky({title:"Clone another repository",icon:(0,C.jsx)(M.vq,{icon:"actions/quickfixOffBulb.svg"}),body:"Git integration in the example app supports multiple repos within the same project. See it in action by cloning another repo",actions:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(l2.g,{onPress:()=>{n("ExampleApp.cloneExampleRepo")},children:"Clone another repo"})})}))}};function cs(){let e=(0,D.Dv)(nP(l0)),t=ca();return e&&(0,C.jsx)(lY.q,{placement:"top",onOpenChange:e=>{e||setTimeout(t,500)},popup:e=>{let{close:t}=e;return(0,C.jsx)(ci,{close:t})},children:(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:e.detached?"Git: Detached HEAD doesn't point to any branch":`Git Branch: ${e.head}`}),children:(0,C.jsx)(l_.V,{icon:(0,C.jsx)(M.vq,{icon:e.detached?"general/warning.svg":"vcs/branch.svg"}),label:e.head.slice(0,e.detached?8:void 0)})})})}cs.__docgenInfo={description:"",methods:[],displayName:"BranchPopupTrigger"};let cl=v.ZP.div.withConfig({displayName:"IdeStatusBar__StyledLastMessage",componentId:"sc-1hz1fp-0"})(["margin-left:0.75rem;cursor:pointer;"]),cc=()=>{let e=(0,D.Dv)(t_);return(0,C.jsx)(lO.A,{left:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(M.vq,{icon:"general/tbHidden.svg",role:"button",onClick:tA}),(0,C.jsx)(cl,{children:"Tooltip content or last message will show up here."})]}),right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(lW,{}),(0,C.jsx)(l_.V,{onPress:tA,label:"LF"}),(0,C.jsx)(l_.V,{onPress:tA,label:`${e.lineNumber},${e.column}`}),(0,C.jsx)(l_.V,{label:"UTF-8"}),(0,C.jsx)(sc.b,{renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsxs)(L.v2,{...t,onAction:tA,children:[(0,C.jsx)(O.c,{children:"Configure Indents for Typescript"}),(0,C.jsx)(O.c,{children:"Disable Indents Detection for Project"})]})},children:(e,t)=>(0,C.jsx)(l_.V,{...e,ref:t,label:"2 spaces"})}),(0,C.jsx)(sc.b,{renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsxs)(L.v2,{...t,onAction:tA,children:[(0,C.jsxs)(O.c,{title:"Compile",children:[(0,C.jsx)(O.c,{children:"packages/jui/tsconfig.json"}),(0,C.jsx)(O.c,{children:"packages/jui/src/StatusBar/StatusBar.stories.tsx"}),(0,C.jsx)(O.c,{children:"Compile All"})]}),(0,C.jsx)(nE.i,{}),(0,C.jsx)(O.c,{children:(0,C.jsx)(K._,{icon:(0,C.jsx)(M.vq,{icon:"javaee/updateRunningApplication.svg"}),content:"Restart Typescript Service"})}),(0,C.jsx)(O.c,{children:(0,C.jsx)(K._,{icon:(0,C.jsx)(M.vq,{icon:"general/settings.svg"}),content:"Configure Typescript..."})})]})},children:(e,t)=>(0,C.jsx)(l_.V,{...e,ref:t,label:"TypeScript 4.4.3"})}),(0,C.jsx)(cs,{}),(0,C.jsx)(l_.V,{icon:(0,C.jsx)(M.vq,{icon:"ide/readwrite.svg"})}),(0,C.jsx)(l_.V,{icon:(0,C.jsx)(M.vq,{icon:"ide/fatalError.svg"})})]})})};cc.__docgenInfo={description:"",methods:[],displayName:"IdeStatusBar"};var cd=n("91555");let cu=()=>(0,C.jsx)(L.v2,{disabledKeys:["showDiff"],"aria-label":"Context menu",onAction:tA,children:(0,C.jsx)(O.c,{textValue:"Show Diff",children:(0,C.jsx)(K._,{icon:(0,C.jsx)(M.vq,{icon:"actions/diff.svg"}),content:"Show Diff"})},"showDiff")});cu.__docgenInfo={description:"",methods:[],displayName:"RollbackTreeContextMenu"};let ch=I.zo.div`
  box-sizing: border-box;
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 1rem 0.75rem 0;
`,cp=I.zo.div`
  border: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.contrastBorder}};
  flex: 1;
  overflow: auto;
`,cm=I.zo.div`
  &:not(:empty) {
    line-height: 1.5;
    padding-left: 0.375rem;
    margin-bottom: 0.75rem;
  }
`;function cg(){let e=(0,D.Dv)(rG),t=(0,D.Dv)(r_).map(rw),{fileCountsMap:n}=(0,D.Dv)(r5),[r,i]=(0,D.KO)(rO),o=(0,D.Dv)(rM),[a,s]=(0,g.useState)(new Set(t.slice(0,1))),[l,c]=(0,g.useState)(e),[d,u]=(0,g.useState)(new Set(t)),h=(0,cd.T)({rootNodes:o,getKey:e=>e.key,getChildren:e=>rb(e)?e.children:null},{selectedKeys:d,onSelectedKeysChange:u}),p=(0,D.Dv)(rc).filter(e=>d.has(rw(e))),m=ru(),f=(0,T.L)(),A=(0,D.b9)(rL),x=()=>A(!1),y=(0,g.useRef)(null),j=(0,na.x)({treeRef:y}),[v,w]=(0,g.useState)(!1),b=p.some(e=>"ADDED"===e.type);return(0,C.jsx)(n_.Du,{onClose:x,bounds:r,onBoundsChange:i,minHeight:200,minWidth:275,children:(0,C.jsx)(nM.b,{header:"Rollback changes",content:(0,C.jsx)(B.DG,{actions:j,children:e=>{let{shortcutHandlerProps:t}=e;return(0,C.jsxs)(ch,{...t,children:[(0,C.jsxs)("div",{style:{display:"flex"},children:[(0,C.jsxs)(iK.o,{children:[(0,C.jsx)(i$.hU,{isDisabled:!0,children:(0,C.jsx)(M.vq,{icon:"actions/diff"})}),(0,C.jsx)(iH.p,{renderMenu:e=>{let{menuProps:t}=e;return(0,C.jsx)(L.v2,{...t,selectedKeys:[],onAction:tA,children:(0,C.jsx)(iQ.$,{title:"Group By",children:rk.map(e=>(0,C.jsx)(O.c,{children:e.title},e.id))})})},children:(0,C.jsx)(M.vq,{icon:"actions/groupBy.svg"})})]}),(0,C.jsx)("span",{style:{flex:1}}),(0,C.jsxs)(iK.o,{children:[(0,C.jsx)(ns.K,{actionId:tx.$.EXPAND_ALL}),(0,C.jsx)(ns.K,{actionId:tx.$.COLLAPSE_ALL})]})]}),(0,C.jsx)(cp,{children:(0,C.jsx)(F.X,{renderMenu:()=>(0,C.jsx)(cu,{}),style:{height:"100%"},children:(0,C.jsx)(ir.G,{treeRef:y,items:o,selectionMode:"multiple",selectedKeys:a,onSelectionChange:s,expandedKeys:l,onExpandedChange:c,nestedSelection:h,fillAvailableSpace:!0,children:e=>{let t=iM.getItemProps({node:e,fileCountsMap:n});return(0,C.jsxs)(O.c,{...t,children:[e.children?.length!==0&&(0,C.jsx)(ii.x,{selectionState:h.getSelectionState(e),onToggle:()=>h.toggle(e)}),t.children]})}})})})]})}}),footer:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{style:{padding:".5rem 0.75rem 0",display:"flex",flexDirection:"column"},children:[(0,C.jsx)(cm,{children:(0,C.jsx)(oM,{changes:p})}),(0,C.jsx)(nG.X,{isDisabled:!b,isSelected:v,onChange:w,mnemonic:"D",children:"Delete local copies of the added files"})]}),(0,C.jsx)(nM.b.Footer,{right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nK.z,{onPress:x,mnemonic:"C",children:"Close"}),(0,C.jsx)(nK.z,{variant:"default",mnemonic:"R",isDisabled:0===p.length,onPress:()=>{m(p,v).catch(e=>{f.show({title:"Reverting changes failed",icon:"Error",body:"Could not revert selected changes. See console for more info"}),console.error("Git revert error:",e)}).finally(x)},children:"Rollback"})]})})]})})})}cg.__docgenInfo={description:"",methods:[],displayName:"RollbackWindow"};let cf=(0,Z.cn)(new ne.iC(Object.fromEntries(lL.map(e=>{let{id:t,initialState:n}=e;return[t,n]})),{removedFromSideBarIds:lL.filter(e=>{let{showStripeButton:t}=e;return!1===t}).map(e=>{let{id:t}=e;return t})}));var cA=n("31671"),cx=n("10879"),cy=n("98688");let cj=[{actionId:tx.$.EXPAND_SELECTION,title:"Press $shortcut to expand selection"},{actionId:tx.$.SHRINK_SELECTION,title:"Press $shortcut to shrink selection"}],cv=()=>{let e=(0,x.og)(),t=(0,g.useMemo)(()=>cj.map(t=>{let{actionId:n,title:r}=t;return{keyboardShortcut:e?.[n]?.find(e=>"keyboard"===e.type),title:r}}).filter(e=>{let{keyboardShortcut:t}=e;return t}).map(e=>{let{keyboardShortcut:t,title:n}=e;return n.replace("$shortcut",(0,cy.W)(t))}),[e]),[n,r]=(0,g.useState)(Math.floor(Math.random()*t.length));return{current:t[n],next:()=>{let e=Math.floor(Math.random()*(t.length-1)),i=e<n?e:e+1;console.log("changing index to",i,"tmpIndex",e),r(i)}}};var cw=n("48233"),cC=n("35200");let cb=g.forwardRef(function(e,t){let n=(0,cw.B)(t),{focusableProps:r}=(0,cC.k)({autoFocus:e.autoFocus},n);return(0,C.jsx)("input",{...(0,W.d)(r,e),ref:n})});cb.__docgenInfo={description:"",methods:[],displayName:"Input"};let cE={isOpen:(0,Z.cn)(!1),tab:(0,Z.cn)("All"),contextElement:(0,Z.cn)(null),initialSearchQuery:(0,ei.xu)(e=>(0,Z.cn)("")),bounds:(0,Z.cn)(null)};function cS(e){let{hasContent:t,persistedBoundsAtom:n,noContentHeight:r,minHeight:i,...o}=e,a=(0,D.b9)(n),[s,l]=(0,g.useState)((0,D.Dv)(n)??{top:150,height:Math.max(200,window.innerHeight-300)}),c=(0,g.useRef)(s.height);return(0,g.useEffect)(()=>{l(e=>({...e,height:t?c.current:r}))},[t]),(0,C.jsx)(lV.GI,{...o,bounds:s,onBoundsChange:e=>{t&&(c.current=e.height,a(e)),l(e)},minHeight:t?i:r})}cS.__docgenInfo={description:"A special type of popup, where the content can be toggled on and off. Needed only for SearchEveryWhere at the moment,\nbut extracted as a component, to collocate related pieces, rather than leave them with the rest of the code in the\ncomponent.\n- Updates persisted {@param boundsState}, when the bounds are changed, only if the content is shown when the bounds\n  is changed.\n- Minimizes the popup into {@param noContentHeight}, when {@param hasContent} is `false`.\n- Restores the popup height to it's latest value, or based on content, when {@param hasContent} changes to `true`.\n- Returns the right to be applied based on the input {@param minHeight} and {@param hasContent}.",methods:[],displayName:"ContentAwarePopup",props:{hasContent:{required:!0,tsType:{name:"boolean"},description:"Whether the popup has content. If `false`, the popup is minimized to `noContentHeight`."},noContentHeight:{required:!0,tsType:{name:"number"},description:"The minimized height of the popup, when there is no content."},persistedBoundsAtom:{required:!0,tsType:{name:"WritableAtom",elements:[{name:"union",raw:"Partial<Bounds> | null",elements:[{name:"Partial",elements:[{name:"Bounds"}],raw:"Partial<Bounds>"},{name:"null"}]},{name:"tuple",raw:"[Partial<Bounds> | null]",elements:[{name:"union",raw:"Partial<Bounds> | null",elements:[{name:"Partial",elements:[{name:"Bounds"}],raw:"Partial<Bounds>"},{name:"null"}]}]},{name:"void"}],raw:"WritableAtom<\n  Partial<Bounds> | null,\n  [Partial<Bounds> | null],\n  void\n>"},description:"Persisted state of the popup bounds, in form of an atom."}}};var cD=n("12746"),cI=n("90297"),ck=n("81863");let cT=I.zo.span`
  width: 0.9375rem;
  margin-right: 0.25rem;
  display: inline-flex;
  justify-content: center;
`,cP=(0,I.zo)(nj.e)`
  min-height: 1.375rem;
  width: 100%;
  padding: 0;
`,cB=I.zo.span`
  color: ${e=>{let{theme:t,isDisabled:n}=e;return n&&t.currentForegroundAware(t.commonColors.inactiveTextColor)}};
`,cR=I.zo.div`
  flex: 1;
`;function cN(e){let{action:t,highlights:n}=e,{isSelected:r}=(0,g.useContext)(nw.k)||{};return(0,C.jsxs)(cP,{children:[(0,C.jsx)(cT,{children:t.icon}),(0,C.jsx)(cB,{isDisabled:t.isDisabled,children:r?(0,C.jsx)(cI.x,{highlights:n,children:t.title}):t.title}),(0,C.jsx)(nj.e.Hint,{style:{fontSize:".85em",fontWeight:"bold"},children:t.shortcut}),(0,C.jsx)(cR,{}),(0,C.jsx)(nj.e.Hint,{style:{marginRight:"-0.375rem"},children:(function(e,t){let n=(0,ck.nf)(e)?e.parent:null,r=[];for(;n;)r.unshift(t?n[t]:n),n=n.parent;return r})(t,"title").join(" | ")})]})}cN.__docgenInfo={description:"UI of actions in SearchEverywhere list",methods:[],displayName:"ActionItem",props:{action:{required:!0,tsType:{name:"Action"},description:""},highlights:{required:!0,tsType:{name:"union",raw:"null | TextRange[]",elements:[{name:"null"},{name:"Array",elements:[{name:"TextRange"}],raw:"TextRange[]"}]},description:""}}};let cF={id:"Actions",title:"Actions",actionId:tx.$.GO_TO_ACTION,use:e=>{let{everyWhereAutoSet:t}=e,n=(0,D.Dv)(cE.contextElement),[r,i]=(0,g.useState)(null),o=(0,g.useMemo)(()=>n?(0,B.C9)(n):[],[n]),a=r??t,s=[{id:tx.$.SHOW_INTENTION_ACTIONS,title:"Assign a shortcut",actionPerformed:tA}];return{search:e=>{let t=o.map(t=>({highlights:(0,cD.M)(t.title,e),action:t})).filter(t=>{let{action:n,highlights:r}=t;return r||(0,cD.M)(n.description||"",e)});return a?t:t.filter(e=>{let{action:t}=e;return!t.isDisabled})},searchDeps:[a],isEverywhere:a,toggleEverywhere:()=>{i(e=>!e)},searchAdvertiser:(0,C.jsx)(ty.i,{actionId:tx.$.SHOW_INTENTION_ACTIONS,children:e=>`Press ${e} to assign a shortcut`}),headerFilters:(0,C.jsx)(nG.X,{preventFocus:!0,isSelected:a,onChange:e=>{i(e)},children:"Include disabled actions"}),actions:s,processSelectedItem(e){let{action:t}=e;t?.perform({event:null,element:n})},getKey:e=>{let{action:t}=e;return t.id},getItemText(e){let{action:{title:t}}=e;return t},renderItem(e){let{action:t,highlights:n}=e;return(0,C.jsx)(cN,{action:t,highlights:n})}}}};var cL=n("65617");function cO(e){let{file:t,matches:n}=e,{isSelected:r}=(0,g.useContext)(nw.k)||{},i=t.name,o=m().dirname(t.relativePath),[a,s]=(0,cL.Z)(e=>e.from>=o.length,n||[]),l=s.map(e=>{let{from:t,to:n}=e;return{from:t-o.length,to:n-o.length}});return(0,C.jsxs)(cP,{children:[(0,C.jsx)(cT,{children:(0,C.jsx)(M.vq,{icon:et(t.path)})}),(0,C.jsx)(cB,{children:r?(0,C.jsx)(cI.x,{highlights:l,children:i}):i}),(0,C.jsx)(nj.e.Hint,{children:r?(0,C.jsx)(cI.x,{highlights:a,children:o}):o})]})}cO.__docgenInfo={description:"UI of paths in SearchEverywhere list.",methods:[],displayName:"FileItem",props:{file:{required:!0,tsType:{name:"ProjectFsItem"},description:""},matches:{required:!0,tsType:{name:"union",raw:"null | TextRange[]",elements:[{name:"null"},{name:"Array",elements:[{name:"TextRange"}],raw:"TextRange[]"}]},description:"matches on file.relativePath"}}};let c_={id:"Files",title:"Files",actionId:tx.$.GO_TO_FILE,use:()=>{let e=(0,D.Dv)(nP(eV))??[],{openPath:t}=tq(),n=nx();return{search:t=>e.map(e=>({matches:(0,cD.M)(e.relativePath,t),file:e})).filter(e=>{let{matches:t}=e;return t?.length}),searchDeps:[],isEverywhere:!0,processSelectedItem(e){let{file:r}=e;r?.type==="file"&&t(r.path,!0),r?.type==="dir"&&n(r.path)},getKey(e){let{file:t}=e;return t.path},renderItem(e){let{file:t,matches:n}=e;return(0,C.jsx)(cO,{file:t,matches:n})},getItemText(e){let{file:{relativePath:t}}=e;return t}}}},cM="SearchEverywhere.PrevTab",cG="SearchEverywhere.NextTab",cK=I.zo.div`
  display: flex;
  width: 100%;
  background: ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.Header.background")}};
  border-bottom: 1px solid
    ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.SearchField.borderColor")}};
`,cH=I.zo.button`
  all: unset;
  background: ${e=>{let{theme:t,selected:n}=e;return n&&t.color("SearchEverywhere.Tab.selectedBackground")}};
  color: ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.Tab.selectedForeground")}};
  opacity: ${e=>{let{disabled:t}=e;return t&&".5"}};
`,cV=I.zo.span`
  display: flex;
  padding: 0 0.75rem;
  height: 1.8rem;
  align-items: center;
`,cU=I.zo.div`
  line-height: normal;
  border-bottom: none;
`,c$=I.zo.div`
  display: flex;
  flex-shrink: 0;
  height: 1.85rem;
  align-items: center;
  padding: 0 0.75rem 0;
  gap: 0.75rem;

  input {
    all: unset;
    flex: 1;
    line-height: 1.25;

    &::selection {
      color: ${e=>{let{theme:t}=e;return t.color("*.selectionForeground")}};
      background: ${e=>{let{theme:t}=e;return t.color("*.selectionBackground")}};
    }
  }
`,cQ=I.zo.div`
  height: 24rem;
  flex: 1;
  min-height: 0; // for it to properly fill the remaining height and not to exceed that
`,cq=I.zo.hr`
  all: unset;
  height: 1px;
  width: 100%;
  border-bottom: 1px solid
    ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.SearchField.borderColor")}};
`,cz=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.color("SearchEverywhere.SearchField.infoForeground")}};
  white-space: nowrap;
`,cW=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.currentForegroundAware(t.color("SearchEverywhere.SearchField.infoForeground"))}};
  font-size: 0.7rem;
  min-height: 1.375rem;
`,cY=I.zo.div`
  color: ${e=>{let{theme:t}=e;return t.commonColors.inactiveTextColor}};
  position: absolute;
  text-align: center;
  width: 100%;
  top: 50%;
`,cZ=[cF,c_],cJ={},cX="LOAD_MORE_ITEM_KEY";function c0(){let e=(0,D.b9)(cE.isOpen),[t,n]=(0,D.KO)(cE.tab),[r,i]=(0,g.useState)(!1),[o,a]=(0,g.useState)((0,D.Dv)(cE.initialSearchQuery(t))),s=(0,D.b9)(cE.initialSearchQuery(t)),l=(0,ty.k)(),[c,d]=(0,g.useState)(new Set),u={};cZ.forEach(e=>{u[e.id]={...e,...e.use({everyWhereAutoSet:r})}});let h=cZ.filter(e=>""===t||e.id===t).map(e=>{let{id:t}=e;return u[t]}),[p,m]=(0,g.useState)(30),{searchResult:f}=(0,g.useMemo)(()=>({searchResult:h.flatMap(e=>e.search(o).map(t=>({key:`${e.id}_${e.getKey(t)}`,contributor:e,item:t})))}),[o,t,...h.flatMap(e=>{let{searchDeps:t}=e;return t})]),A=u[t],x=(0,g.useMemo)(()=>{let e=f.slice(0,p);return f.length>e.length&&e.push({key:cX,item:cJ,contributor:null}),e},[p,f]),y=(0,g.useRef)(null),j=e=>{let t=y.current&&e.includes(y.current);A?.isEverywhere&&!t&&i(!1),a(e)};(0,g.useEffect)(()=>{o&&s(o)},[o,t]),(0,g.useEffect)(()=>{if(f[0]){let{key:e}=f[0];d(new Set([e])),S.current?.setFocusedKey(e),requestAnimationFrame(()=>{S.current?.setFocusedKey(e)})}m(30)},[f]);let v=[{id:cM,title:"Prev tab",description:"Switch to previous tab in Search Everywhere dialog",actionPerformed:()=>{let e=cZ.findIndex(e=>{let{id:n}=e;return t===n});n(""===t?cZ.slice(-1)[0].id:cZ[e-1]?.id||"")}},{id:cG,title:"Next tab",description:"Switch to next tab in Search Everywhere dialog",actionPerformed:()=>{let e=cZ.findIndex(e=>{let{id:n}=e;return t===n});n(cZ[e+1]?.id||"")}}],w=cZ.flatMap(e=>{let{id:r,actionId:i,title:o}=e;return i?[{id:i,title:`Find ${o}`,description:`Quickly go to ${o} by name`,actionPerformed:()=>{t!==r?n(r):A?.toggleEverywhere?.()}}]:[]}),b=()=>e(!1),E=(0,g.useRef)(null),S=(0,g.useRef)(null),I=e=>{if(e===cX){m(e=>e+30);let e=f[x.length+1];e&&setTimeout(()=>{d(new Set([e.key])),S.current?.setFocusedKey(e.key)})}else b(),setTimeout(()=>{let t=f.find(t=>t.key===e);t?.contributor.processSelectedItem(t.item)},50)},k=cv();return(0,C.jsx)(cS,{persistedBoundsAtom:cE.bounds,hasContent:!!o,noContentHeight:59,minWidth:670,minHeight:160,interactions:"all",onClose:b,children:(0,C.jsx)(B.DG,{actions:[...A?.actions||[],...w,...v],children:e=>{let{shortcutHandlerProps:r}=e;return(0,C.jsx)("div",{...r,style:{height:"inherit"},children:(0,C.jsx)(lV.GI.Layout,{header:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(lV.GI.Header,{hasControls:!0,children:(0,C.jsxs)(cK,{children:[(0,C.jsx)("div",{style:{flex:1},children:(0,C.jsxs)(cA.m,{TabComponent:cH,TabsComponent:cU,selectedKey:t,onSelectionChange:e=>n(e),children:[(0,C.jsx)(O.c,{children:(0,C.jsx)(cV,{children:"All"})},""),cZ.map(e=>{let t=l(e.actionId),n=(0,C.jsx)(cV,{children:e.title});return(0,C.jsx)(O.c,{children:t?(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(aP.u,{children:t}),children:(0,C.jsx)("span",{children:n})}):n},e.id)})]})}),A?.headerFilters,(0,C.jsx)(i$.hU,{style:{margin:"0 0.5rem"},isDisabled:!0,children:(0,C.jsx)(M.vq,{icon:"actions/moveToLeftBottom"})})]})}),(0,C.jsxs)(c$,{children:[(0,C.jsx)(M.vq,{icon:"actions/search"}),(0,C.jsx)(cx.MT,{contain:!0,children:(0,C.jsx)(cb,{ref:E,autoFocus:!0,onFocus:e=>{e.target.select()},value:o,onChange:e=>j(e.currentTarget.value)})}),(0,C.jsx)(cz,{children:A?.searchAdvertiser})]})]}),content:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(cq,{}),o&&(0,C.jsxs)(cQ,{children:[(0,C.jsx)(sC.a,{focusProxyRef:E,selectionManagerRef:S,items:x,selectionMode:"single",showAsFocused:!0,shouldFocusWrap:!0,fillAvailableSpace:!0,selectedKeys:c,onSelectionChange:d,onAction:I,children:e=>{let{key:t,item:n,contributor:r}=e;if(t===cX)return(0,C.jsx)(O.c,{children:(0,C.jsx)(cW,{children:"...more"})},cX);let i=r.getItemText(n);return(0,C.jsx)(O.c,{textValue:i,"aria-label":i,children:r.renderItem(n)},t)}}),0===f.length&&(0,C.jsx)(cY,{children:"No actions with such name found"})]})]}),footer:(0,C.jsxs)(lV.GI.Hint,{children:[k.current," ",(0,C.jsx)(tg.r,{onPress:k.next,children:"Next Tip"})]})})})}})})}c0.__docgenInfo={description:"TODO: implement history navigation",methods:[],displayName:"SearchEverywherePopup"};let c1=async(e,t,n)=>{let i=await f.ZP.findRoot({fs:r,filepath:n});await f.ZP.add({fs:r,dir:i,filepath:m().relative(i,n)}),await ts(e,t,n)};var c2=n("58249"),c5=n("65465");let c6=(0,I.zo)(c2.I)`
  width: 20.5rem;
  /**
     * To have the validation box shadow not clipped by the popup.
     * Maybe it should be an option on input to make sure margin is always in sync with the box-shadow thickness
     */
  margin: 3px;

  input {
    padding-top: 1px;
    padding-bottom: 1px;
  }
`,c4=(0,I.zo)(lV.GI.Header)`
  border-bottom: 1px solid ${e=>{let{theme:t}=e;return t.commonColors.border()}};
`;function c7(e){let{title:t,inputName:n="Name",onSubmit:r,validationMessage:i,validationType:o="error",value:a,onChange:s}=e,[l,c]=(0,g.useState)(!1);return(0,C.jsx)(lV.GI,{children:(0,C.jsx)(l1.F,{header:(0,C.jsx)(c4,{children:t}),content:(0,C.jsx)("form",{onSubmit:e=>{e.preventDefault(),r()},onMouseDown:()=>{c(!0)},children:(0,C.jsx)(ar.S,{isOpen:!!i&&!l,placement:"top start",offset:6,crossOffset:-6,tooltip:(0,C.jsx)(c5.p,{type:o,children:i}),children:(0,C.jsx)(c6,{appearance:"embedded",validationState:i?o:void 0,placeholder:n,value:a,onChange:e=>{c(!1),s(e.target.value)}})})})})})}c7.__docgenInfo={description:"A simple Popup with an input, used in actions such as create file, or create directory",methods:[],displayName:"NewItemPopup",props:{inputName:{defaultValue:{value:'"Name"',computed:!1},required:!1,tsType:{name:"string"},description:""},validationType:{defaultValue:{value:'"error"',computed:!1},required:!1,tsType:{name:"union",raw:'"error" | "warning"',elements:[{name:"literal",value:'"error"'},{name:"literal",value:'"warning"'}]},description:""},title:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(newValue: string) => void",signature:{arguments:[{name:"newValue",type:{name:"string"}}],return:{name:"void"}}},description:""},validationMessage:{required:!1,tsType:{name:"string"},description:""}}};let c3=nJ({id:"NewFile",icon:(0,C.jsx)(M.vq,{icon:"fileTypes/text"}),title:"File",description:"Create new file",isDisabled:(0,Z.cn)(e=>!e(eQ)),actionPerformed:async e=>{let{get:t}=e,n=t(e$);if(0===n.length)return;let i=t(ez).current,o=(await r.promises.stat(n[0])).isDirectory()?n[0]:m().dirname(n[0]);if(!i)throw Error("Could not find popup manager");i.show(e=>{let{close:t}=e;return(0,C.jsx)(c8,{close:t,destinationDir:o})})}});function c8(e){let{destinationDir:t,close:n}=e,r=(0,eT.lV)((0,g.useCallback)(async(e,t,r,i)=>{let o=m().join(r,i),a=e(tQ),s=e(eW).current,l=await e(tt(o));await nz(e,t,r,i),n(),a.focus(),await de(()=>document.activeElement instanceof HTMLTextAreaElement),l&&s?.open(e=>{let{close:t}=e;return C.jsx(c9,{filepath:o,close:t})})},[n])),[i,o]=(0,g.useState)(""),[a,s]=(0,g.useState)(""),l=async()=>{let e=m().join(t,i),n=await ev(e);n?.isFile()?s(`A file with the name '${m().basename(i)}' already exists`):n?.isDirectory()?s(`A directory with the name '${m().basename(i)}' already exists`):await r(t,i)};return(0,C.jsx)(c7,{title:"New File",onSubmit:()=>{i&&l()},value:i,onChange:e=>{s(""),o(e)},validationMessage:a})}function c9(e){let{close:t,filepath:n}=e,r=(0,eT.lV)(c1);return(0,C.jsx)(n_.Du,{minWidth:"content",minHeight:"content",children:(0,C.jsx)(nM.b,{header:"Add File to Git",content:(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{style:{display:"flex",gap:"1rem",padding:"0.75rem 0.75rem 0rem"},children:[(0,C.jsx)(M.vq,{icon:"general/questionDialog.svg",size:32}),(0,C.jsxs)("div",{children:["Do you want to add the following file to Git?",(0,C.jsx)("br",{}),n,(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),"If you choose Cancel, you can still add it later manually."]})]})}),footer:(0,C.jsx)(nM.b.Footer,{left:(0,C.jsx)(nG.X,{isDisabled:!0,children:"Don't ask again"}),right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nK.z,{onPress:t,children:"Cancel"}),(0,C.jsx)(nK.z,{autoFocus:!0,variant:"default",onPress:()=>{r(n).then(t)},children:"Add"})]})})})})}async function de(e,t){void 0===t&&(t=2e3),!e()&&!(t<0)&&(await new Promise(e=>setTimeout(e,50)),await de(e,t-50))}let dt=e=>{let t=(0,g.useRef)(null),n=(0,g.useRef)(e);return n.current=e,function(){t.current?.abort(),t.current=new ef.qf.cancelToken;for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];(0,ef.qf)(function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n.current(...r)})(t.current,...r)}},dn=nJ({id:"NewDir",icon:(0,C.jsx)(M.vq,{icon:X}),title:"Directory",description:"Create new directory",isDisabled:(0,Z.cn)(e=>!e(eQ)),actionPerformed:async e=>{let{get:t}=e,n=t(e$);if(0===n.length)return;let i=t(ez).current,o=(await r.promises.stat(n[0])).isDirectory()?n[0]:m().dirname(n[0]);if(!i)throw Error("Could not find popup manager");i.show(e=>{let{close:t}=e;return(0,C.jsx)(dr,{close:t,destinationDir:o})})}});function dr(e){let{destinationDir:t,close:n}=e,r=(0,eT.lV)(nW),[i,o]=(0,g.useState)(""),[a,s]=(0,g.useState)(null),l=dt(function*(e,t){s((yield di(e,t)))});(0,g.useEffect)(()=>{l(t,i)},[t,i]);let c=async()=>{null==await di(t,i)&&(await r(t,i),n())};return(0,C.jsx)(c7,{title:"New Directory",onSubmit:()=>{i&&c()},value:i,onChange:o,validationMessage:a?.message,validationType:a?.type})}let di=async function(e,t){let n=m().join(e,t);if(!t)return null;if(t.includes("."))return{type:"warning",message:'Note: "." in the name is treated as a regular character. Use "/" instead if you mean to create nested directories'};let r=await ev(n);return r?.isFile()?{type:"error",message:`A file with the name '${t}' already exists`}:r?.isDirectory()?{type:"error",message:`A directory with the name '${t}' already exists`}:null},da=nJ({id:"CopyFileName",title:"File Name",isDisabled:(0,Z.cn)(e=>!e(eQ)),actionPerformed:async e=>{let{get:t}=e;if(tA(),0===t(e$).length)return}}),ds=nJ({id:"CopyAbsolutePath",title:"Absolute Path",isDisabled:(0,Z.cn)(e=>!e(eQ)),useShortcutsOf:"CopyPaths",actionPerformed:async e=>{let{get:t}=e;if(tA(),0===t(e$).length)return}}),dl=nJ({id:rj.CopyPathFromRepositoryRootProvider,title:"Path From Repository Root",isDisabled:(0,Z.cn)(e=>!e(eQ)),actionPerformed:async e=>{let{get:t}=e;if(tA(),0===t(e$).length)return}});var dc=n("45890");let dd=(0,Z.cn)(async()=>{let e=await fetch("https://api.github.com/repos/alirezamirian/jui/tags");if(!e.ok)throw e;let t=await e.json();return(0,tB.Z)([(0,tR.Z)((0,dc.Z)("date"))],await Promise.all(t.map(async e=>{let t=await fetch(`https://api.github.com/repos/alirezamirian/jui/commits/${e.commit.sha}`);if(!t.ok)throw t;let n=await t.json(),r=e.name.replace(/^docs\//,"");return{name:r,url:`https://alirezamirian.github.io/jui/-/${r}/example-app`,date:new Date(n.commit.author.date)}})))}),du=nJ({id:"example-app.switchVersion",icon:(0,C.jsx)(M.vq,{icon:"fileTypes/text"}),title:"Switch version",description:"Change to other versions of this demo app",actionPerformed:async e=>{let{get:t}=e,n=t(ez).current;if(!n)throw Error("Could not find popup manager");try{let e=await t(dd);n.show(t=>{let{close:n}=t;return(0,C.jsx)(dh,{close:n,tags:e})})}catch(e){tf.value?.show({icon:"Error",title:"Could not fetch versions",body:(e=>{if(e instanceof Response){let t=e.headers.get("x-ratelimit-reset");return`Github API rate limit is reached. Try again ${t?`after ${new Date(1e3*parseInt(t)).toLocaleTimeString()}`:"later"}.`}return"Unexpected error happened while fetching versions data."})(e)})}}});function dh(e){let{tags:t,close:n}=e;return(0,C.jsx)(lV.GI,{children:(0,C.jsx)(l1.F,{header:(0,C.jsx)(lV.GI.Header,{children:(0,C.jsx)("div",{style:{padding:"0 .5rem"},children:"Switch demo app version"})}),content:(0,C.jsx)(iV.w,{items:t,fillAvailableSpace:!0,onAction:e=>{window.location.href=`${e}`,n()},children:e=>(0,C.jsx)(O.c,{children:(0,C.jsx)(K._,{content:e.name,shortcut:(0,C.jsx)(nj.e.Hint,{children:e.date.toLocaleDateString()})})},e.url)})})})}let dp=(e,t,n,r)=>{let{element:i}=n;i&&(t(cE.isOpen,!0),t(cE.tab,r),t(cE.contextElement,i))},dm=g.createContext(null),dg=()=>{let e=(0,g.useContext)(dm);return{open:t=>{e?.current?.changeState(e=>e.show(t)),e?.current?.focus(t)}}},df=()=>{let e=(0,eT.lV)(it),t=td();return[function(){let e=(0,eT.lV)(ie),t=dg(),n=(0,D.b9)(oX),r=(0,D.Dv)(e$),i=(0,D.Dv)(nP(eV)),o=nU(r),a=(0,D.Dv)(rc),s=o.some(e=>a.find(t=>(function(e,t){let n=m().relative(e,t);return!n||!n.startsWith("..")&&!m().isAbsolute(n)})(e,ro.path(t)))),l=o.every(e=>i?.some(t=>"dir"===t.type&&t.path===e));return{id:rj.CHECKIN_FILES,title:l?dx.format({count:o.length}):dA.format({count:o.length}),isDisabled:!s,actionPerformed:()=>{e(),t.open(o7),n()}}}(),function(){let e=dg(),t=(0,D.b9)(oX),n=(0,eT.lV)((0,g.useCallback)((e,t)=>{let n=e(rZ),r=n.values().next().value;if(0===n.size){let n=e(rp)?.changes.map(rw);t(rZ,new Set(n)),r=n?.[0]}if(r){let{rootNodes:n}=e(r5);t(r0,new Set([...e(r0),...(0,rR.Bp)(e=>rb(e)?e.children:null,e=>e.key,n,[r])])),t(rQ,new Set([r]))}},[]));return{id:rj.CHECKIN_PROJECT,title:"Commit",actionPerformed:()=>{n(),e.open(o7),t()}}}(),function(){let e=tq(),t=(0,D.Dv)(rW);return{id:rj.JUMP_TO_SOURCE,title:"Jump to source",icon:(0,C.jsx)(M.vq,{icon:"actions/editSource.svg"}),actionPerformed:()=>{[...t].forEach((t,n,r)=>{let i=ro.path(t);i||e.openPath(i,n===r.length-1)})}}}(),{id:rj.ROLLBACK,title:"Rollback...",icon:(0,C.jsx)(M.vq,{icon:"actions/rollback.svg"}),actionPerformed:t=>{e(!!t)}},{id:rj.REFRESH,title:"Refresh VCS Changes",description:"Refresh VCS Changes",icon:(0,C.jsx)(M.vq,{icon:"actions/refresh.svg"}),actionPerformed:t},{id:rj.SHOW_DIFF,title:"Show Diff",icon:(0,C.jsx)(M.vq,{icon:"actions/diff.svg"}),actionPerformed:tA},{id:rj.SHELVE,title:"Shelve Changes...",description:"Save changes to an external patch file and remove them from the code",icon:(0,C.jsx)(M.vq,{icon:"vcs/shelve.svg"}),actionPerformed:tA},...function(){let e=(0,D.Dv)(rW),t=[{id:rj.NEW_CHANGELIST,title:"New Changelist...",description:"Create new changelist",icon:(0,C.jsx)(M.vq,{icon:"general/add.svg"}),actionPerformed:tA}];return e.size>0&&t.push({title:"Move to Another Changelist...",description:"Move selected changes to another changelist",id:rj.MOVE_TO_ANOTHER_CHANGELIST,actionPerformed:tA}),t}()]},dA=new nY.C(`{count, plural,
    =1 {Commit File...}
    other {Commit Files...}
  }`,"en-US"),dx=new nY.C(`{count, plural,
    =1 {Commit Directory...}
    other {Commit Directories...}
  }`,"en-US"),dy=I.zo.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  padding: 1rem 0.875rem 0.25rem;
  gap: 0.6rem;
`,dj=I.zo.div`
  margin-left: -0.25rem; // to align with the field. Maybe something to look into in checkbox.
  display: flex;
  gap: 0.75rem;
`,dv={EXISTING:e=>(0,C.jsxs)(C.Fragment,{children:["Branch name ",e," already exists. ",(0,C.jsx)("br",{}),"Change the name or overwrite existing branch"]}),CLASHING_WITH_REMOTE:e=>(0,C.jsxs)(C.Fragment,{children:["Branch name ",e," clashes with remote branch ",(0,C.jsx)("br",{}),"with the same name"]})};function dw(e){let{close:t}=e,[n,i]=(0,g.useState)(!0),[o,a]=(0,g.useState)(!1),s=(0,D.Dv)(lJ),[l,c]=(0,g.useState)(!1),d=(0,T.L)(),u=(0,eT.lV)((0,g.useCallback)(function(e,t,n,i,o){return void 0===o&&(o=!0),(0,f.WY)({fs:r,dir:n,checkout:o,ref:i}).then(()=>{t(iu(n))})},[])),h=s?.currentBranch?.name,[p,m]=(0,g.useState)(h||""),A=l6(s,p),x=!A||"EXISTING"===A&&o,y=!x&&l?"error":"valid",j=()=>{x&&s?.repoRoot?u(s.repoRoot,p,n).catch(e=>{e instanceof f.D1.AlreadyExistsError?d.show({icon:"Error",title:"Unimplemented action",body:"Overwrite option is currently not supported."}):d.show({icon:"Error",title:"Unexpected error",body:`Could not create branch ${p}.`}),console.error("Branch creation error: ",e)}).then(()=>{t()}):c(!0)};return(0,C.jsx)(n_.Du,{minWidth:"content",minHeight:"content",children:(0,C.jsx)(nM.b,{header:"Create New Branch",content:(0,C.jsxs)(dy,{id:"create_branch_form",as:"form",onSubmit:e=>{e.preventDefault(),j()},children:[(0,C.jsx)(l5.U,{autoFocus:!0,autoSelect:!0,value:p,onChange:e=>{m(l7(e)),c(!0)},validationState:y,validationMessage:"error"===y&&A&&dv[A](p),label:"New branch name:",labelPlacement:"above"}),(0,C.jsxs)(dj,{children:[(0,C.jsx)(nG.X,{isSelected:n,onChange:i,children:"Checkout branch"}),(0,C.jsx)(nG.X,{isSelected:o,isDisabled:!l||"EXISTING"!==A,onChange:a,children:"Overwrite existing branch"})]})]}),footer:(0,C.jsx)(nM.b.Footer,{right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nK.z,{onPress:t,children:"Cancel"}),(0,C.jsx)(nK.z,{variant:"default",type:"submit",form:"create_branch_form",isDisabled:"error"===y,children:"Create"})]})})})})}dw.__docgenInfo={description:"",methods:[],displayName:"CreateNewBranchWindow",props:{close:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let dC=(0,Z.cn)(async e=>is(async t=>{let n=await e(tt(t));if(n){let i=await f.ZP.isIgnored({fs:r,dir:n,filepath:m().relative(n,t)}),o=await r.promises.stat(t).then(e=>e.isFile()).catch(()=>!1)&&await e(ta(t))==="NOT_CHANGED";return!i&&!o}return!1},e(e$))),db=(0,Z.cn)(async e=>0===(await e(dC)).length),dE=nJ({id:rj.GIT_ADD,title:"Add",icon:(0,C.jsx)(M.vq,{icon:"general/add.svg"}),useShortcutsOf:rj.ADD_UNVERSIONED,isDisabled:db,actionPerformed:async e=>{let{get:t,set:n}=e,r=await t(dC);await Promise.all(r.map(e=>c1(t,n,e)))}}),dS=nJ({id:rj.GIT_INIT,title:"Create Git Repository...",actionPerformed:async e=>{let{get:t,set:n}=e,i=t(eK),o=t(e$)[0],a=await ev(o),s=a?.isDirectory()?o:i.path;await f.ZP.init({fs:r,dir:s}),n(te,e=>e.filter(e=>e.dir!==s).concat({vcs:"Git",dir:s})),await tc(t,n)}});var dD=n("28353"),dI=n("49407");let dk=eB.z.object({"@name":eB.z.enum(["visitedUrls"]),list:e3(eB.z.object({option:e7(eB.z.union([eB.z.object({"@name":eB.z.enum(["url"]),"@value":eB.z.string()}),eB.z.object({"@name":eB.z.enum(["userName"]),"@value":eB.z.string()})]))}),"UrlAndUserName")}),dT=eB.z.object({"@name":eB.z.enum(["cloneParentDir"]),"@value":eB.z.string()}),dP=e0({visitedUrls:[],cloneParentDir:""},{storageFile:"vcs.xml",componentName:"GitRememberedInputs",schema:eB.z.object({option:e7(eB.z.union([dk,dT]))}),read:function(e){let{option:t}=void 0===e?{option:[]}:e;return{visitedUrls:t?.find(e=>"visitedUrls"===e["@name"])?.list.UrlAndUserName.map(e=>{let{option:t}=e;return{url:t.find(e=>"url"===e["@name"])?.["@value"],username:t.find(e=>"userName"===e["@name"])?.["@value"]}}).filter(e=>e.url)??[],cloneParentDir:t?.find(e=>"cloneParentDir"===e["@name"])?.["@value"]??""}},write:(e,t)=>({...t,option:t.option?.map(t=>"cloneParentDir"===t["@name"]&&e.cloneParentDir?{"@name":"cloneParentDir","@value":e.cloneParentDir}:"visitedUrls"===t["@name"]&&e.visitedUrls?{"@name":"visitedUrls",list:{UrlAndUserName:e.visitedUrls.map(e=>{let{url:t,username:n}=e;return{option:[{"@name":"url","@value":t},{"@name":"userName","@value":n??""}]}})}}:t)??[]})}),dB=(0,ia.R)(dP,e=>e.path("visitedUrls")),dR=(0,ia.R)(dP,e=>e.path("cloneParentDir"));var dN=n("75522"),dF=n("90406");let dL={".idea/vcs.xml":`<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="GitRememberedInputs">
    <option name="visitedUrls">
      <list>
        <UrlAndUserName>
          <option name="url" value="https://github.com/alirezamirian/jui.git"></option>
          <option name="userName" value=""></option>
        </UrlAndUserName>
        <UrlAndUserName>
          <option name="url" value="https://github.com/thurwitz/example-branches.git"></option>
          <option name="userName" value=""></option>
        </UrlAndUserName>
      </list>
    </option>
    <option name="cloneParentDir" value="/workspace"></option>
  </component>
  <component name="VcsDirectoryMappings"></component>
</project>

`};async function dO(e){try{if(!(await r.promises.stat(e)).isDirectory())return console.info(`Already cloned repo was not found. "${e}" is not a directory.`),!1;let t=await r.promises.readdir(e);if(1===t.length&&".git"===t[0])return console.info(`Already cloned repo was not found at "${e}". ".git" folder exists, but it's not successfully unpacked.`),!1}catch(t){return console.info(`Already cloned repo was not found at "${e}".`),!1}return!0}let d_=async()=>{await ej(r.promises,eG.path),await Promise.all(Object.entries(dL).map(async e=>{let[t,n]=e,i=m().join(eG.path,t);!await r.promises.exists(i)&&(await ej(r.promises,m().dirname(i)),await r.promises.writeFile(i,n,"utf-8"))}))},dM=(0,I.zo)(dF.e)`
  min-width: ${e=>{let{minWidth:t}=e;return t?`${t}px`:""}};
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`,dG=e=>{let{children:t,autoCloneSampleRepo:n=!1}=e,[i,o]=(0,g.useState)(null),[a,s]=(0,g.useState)("uninitialized");(0,g.useEffect)(()=>{async function e(e,t){await dO(e)||(s("cloning"),await dK({dir:e,url:t,onProgress:o}))}(async function t(){let t=window.INITIALIZE_APP??d_;try{await t({fs:r,git:f.ZP,path:m(),projectDir:eG.path}),n&&await e(eM.path,eM.url),console.log("demo repo initialized"),s("initialized")}catch(e){console.error("could not initialize the demo repo",e),s("error")}})()},[]);let l=i?.total?i.loaded/i.total:0;switch(a){case"uninitialized":return null;case"initialized":return(0,C.jsx)(C.Fragment,{children:t});case"cloning":return(0,C.jsx)(dM,{minWidth:450,children:(0,C.jsx)(lV.GI.Layout,{header:"Cloning sample git repository",content:(0,C.jsx)("div",{style:{padding:"1rem"},children:(0,C.jsx)(sw.ko,{name:`Cloning repository ${eM.url}`,isIndeterminate:!i,details:l?`${i?.phase}: ${Math.round(100*l)}% ${i?.loaded}/${i?.total}`:i?.phase,"aria-label":"Progress of cloning sample repo",value:i?i.loaded/i.total:0,maxValue:1})})})});case"error":return(0,C.jsx)(dN.a,{type:"error",heading:"Something went wrong!",body:"Could not initialize example app",buttons:(0,C.jsx)(nK.z,{variant:"default",onPress:()=>{window.location.reload()},children:"Reload"})})}};async function dK(e){let{dir:t,url:n,onProgress:i}=e;console.log("cloning repo: "),await (0,f.d9)({fs:r,url:n,http:A.Z,corsProxy:"https://cors.isomorphic-git.org",dir:t,onProgress:i,singleBranch:!0})}dG.__docgenInfo={description:"",methods:[],displayName:"ProjectInitializer",props:{autoCloneSampleRepo:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};var dH=n("28872"),dV=n("88109"),dU=n("75486"),d$=n("15239"),dQ=n("49827"),dq=n("41379");let dz=I.zo.div`
  box-sizing: border-box;
  // not checked if there should be a better substitute for * in the following colors. Maybe "Component"?
  background-color: ${e=>{let{theme:t}=e;return t.color("*.background")}};
  color: ${e=>{let{theme:t}=e;return t.color("*.foreground")}};
  outline: none; // Focus will be reflected in header. No need for outline or any other focus style on the container
  ${dU.s}; // FIXME: OS-dependant style?
`,dW=(0,I.zo)(d$.w)`
  min-width: 120px;
  margin: ${dQ.TU}px 0;
`;async function dY(e){return r.promises.readdir(e).then(async t=>(await Promise.all(t.map(async t=>{let n=m().join(e,t);return{fullPath:n,stat:await r.promises.stat(n)}}))).filter(e=>{let{stat:t}=e;return t.isDirectory()}).map(e=>{let{fullPath:t}=e;return t}))}function dZ(e){let{value:t,onChange:n,defaultValue:r,...i}=e,[o,a]=(0,dV.z)(t,r??"",n),[s,l]=(0,g.useState)(!1),c=(0,g.useRef)(null),d=(0,g.useRef)(null),[u,h]=(0,g.useState)(""),[p,f]=(0,g.useState)([]),A=()=>{j({clientX:(v?.x??0)+function(e){let t=e.selectionStart??e.value.length,n=window.getComputedStyle(e),r=document.createElement("span");r.style.position="absolute",r.style.visibility="hidden",r.style.whiteSpace="pre-wrap",r.style.font=n.font,r.style.fontSize=n.fontSize,r.style.fontWeight=n.fontWeight,r.style.fontFamily=n.fontFamily,r.style.letterSpacing=n.letterSpacing,r.style.border=n.border,r.style.paddingLeft=n.paddingLeft,r.textContent=e.value.substring(0,t),document.body.appendChild(r);let i=r.offsetWidth;return document.body.removeChild(r),i}(c.current),clientY:(v?.y??0)+(v?.height??0)+2}),h(o.slice(0,c.current?.selectionStart??void 0))};(0,g.useEffect)(()=>{s&&A()},[s,o]);let x=(0,dq.D)(s);(0,g.useEffect)(()=>{let e=u.split(m().sep),t=e.slice(0,-1).join(m().sep)||"/",n=e.length>1?e.slice(-1)[0]:"",r=!1;return dY(t).then(e=>{if(r)return;let t=e.map(e=>{let t=m().basename(e);return{fullPath:e,textValue:t}}).filter(e=>{let{textValue:t}=e;return!n||t.toLowerCase().includes(n.toLowerCase())});f(t),t.length>0&&!x&&c.current?.value.indexOf(u)===0&&c.current.setSelectionRange(u.length,c.current.value.length,"backward")}),()=>{r=!0}},[u]);let[y,j]=(0,g.useState)({clientX:0,clientY:0}),v=c.current?.getBoundingClientRect();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(B.DG,{actions:[{id:tx.$.CODE_COMPLETION,title:"Autocomplete path",actionPerformed:()=>{A(),l(!0)}}],children:e=>{let{shortcutHandlerProps:t}=e;return(0,C.jsx)(l5.U,{...i,value:o,onChange:a,inputRef:(0,dH.l)(c,i.inputRef),inputProps:(0,W.d)(i.inputProps??{},t,{onKeyDown:e=>{"Escape"===e.key&&l(!1)},onBlur:()=>{l(!1)}}),addonAfter:(0,C.jsxs)(C.Fragment,{children:[i.addonAfter,(0,C.jsx)(H.a,{tooltip:(0,C.jsx)(V.M,{actionName:"Browse... (\u21E7\u23CE)"}),children:e=>(0,C.jsx)(sl.v,{...e,style:{marginRight:".2rem"},role:"button",onClick:tA,icon:"general/openDisk.svg"})})]})})}}),s&&(0,C.jsx)(Q.Z,{onClose:()=>{l(!1)},origin:y,children:(0,C.jsx)(dz,{children:(0,C.jsx)(dW,{ref:d,focusProxyRef:c,"aria-label":"Directories",shouldFocusOnHover:!0,shouldUseVirtualFocus:!0,autoFocus:"first",onAction:e=>{a(m().join(`${e}`,m().sep))},items:p,children:e=>{let{fullPath:t}=e;return(0,C.jsx)(O.c,{textValue:t,children:(0,C.jsxs)(nj.e,{children:[(0,C.jsx)(M.vq,{icon:X}),m().basename(t)]})},t)}})})})]})}dZ.__docgenInfo={description:"",methods:[],displayName:"PathInputField",props:{value:{required:!1,tsType:{name:"string"},description:""},defaultValue:{required:!1,tsType:{name:"string"},description:""}}};let dJ=nJ({id:rj.GIT_CLONE,title:"Clone...",actionPerformed:async e=>{let{get:t}=e,n=t(eW);n.current?.open(e=>{let{close:t}=e;return C.jsx(d1,{close:t})})}}),dX=nJ({id:"ExampleApp.cloneExampleRepo",title:"Clone another repository...",isSearchable:!1,actionPerformed:e=>{let{get:t}=e,n=t(eW);n.current?.open(e=>{let{close:t}=e;return C.jsx(d1,{close:t,url:"https://github.com/thurwitz/example-branches.git"})})}}),d0=I.zo.div`
  padding: 1rem;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 0.75rem;
`;function d1(e){let{close:t,url:n}=e,[r,i]=(0,g.useState)(n??""),[o,a]=(0,D.KO)(dR),[s,l]=(0,D.KO)(dB),[c,d]=(0,g.useState)(""),[u,h]=(0,g.useState)(!0),[p,f]=(0,g.useState)(!1),A=(0,g.useRef)(null),x=(0,g.useRef)(null),y=function(e){e=d6(d6(e.trim(),"git clone"),"hg clone");try{return new URL(e),null}catch(t){if(d5.test(e))return null}return"Repository URL is a malformed URL"}(r),[j,v]=(0,g.useState)(""),w=function(){let e=i5(),t=(0,D.b9)(te);return(0,eT.lV)((0,g.useCallback)((n,r,i)=>{let{url:o,dir:a,onSuccess:s}=i;e({title:`Cloning source repository ${o}`},{onFinished:s,run:async e=>{let{setIndeterminate:n,setFraction:i,setSecondaryText:s}=e;await dK({dir:a,url:o,onProgress:e=>{if(e.total){let t=e.loaded/e.total;i(t),s(`${e.phase}: ${Math.round(100*t)}% ${e.loaded}/${e.total}`)}else s(e.phase),n(!0)}}).then(()=>{t(e=>e.find(e=>e.dir===a)?e:e.concat({vcs:"Git",dir:a})),r(eD(m().resolve(a,"..")))},e=>{console.log("e",e),tf.value?.show({icon:"Error",title:"Clone failed",body:`Failed to clone git repo "${o} into ${a}: ${e}"`})})}})},[]))}();(0,g.useEffect)(()=>{if(u){let e=r.split(/\/{1,2}/).pop()?.replace(/\.git$/,"")??"";d(e?m().join(o,e):o)}},[o,r,u]);let b=async e=>{e.preventDefault(),f(!0);let n=await d2(c);if(n){v(n),x.current?.focus();return}if(y){A.current?.focus();return}a(m().dirname(c)),l(e=>e.find(e=>e.url===r)?e:e.concat({url:r})),w({url:r,dir:c,onSuccess:()=>{l(e=>e.map(e=>{let{url:t}=e;return t}).includes(r)?e:[...e,{url:r,username:""}])}}),t()};return(0,C.jsx)(n_.Du,{minWidth:600,minHeight:"content",children:(0,C.jsx)(nM.b,{header:"Get from Version Control",content:(0,C.jsx)(dD.O,{children:(0,C.jsx)("form",{id:"clone_form",onSubmit:b,children:(0,C.jsxs)(d0,{children:[(0,C.jsx)(dI.C,{inputRef:A,autoFocus:!0,label:"URL:",value:r,validationState:y&&p?"error":"valid",validationMessage:p&&y,onValueChange:e=>{i(e)},items:s,children:e=>{let{url:t}=e;return(0,C.jsx)(O.c,{children:t},t)}}),(0,C.jsx)(dZ,{inputRef:x,label:"Directory:",value:c,validationState:j&&p?"error":"valid",validationMessage:p&&j,onChange:e=>{d(e),h(!1),v("")}})]})})}),footer:(0,C.jsx)(nM.b.Footer,{right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(nK.z,{onPress:t,children:"Cancel"}),(0,C.jsx)(nK.z,{variant:"default",isDisabled:!c||!r,type:"submit",form:"clone_form",children:"Clone"})]})})})})}async function d2(e){let t=await ev(e);return t?t.isDirectory()?(await r.promises.readdir(e)).length>0?"The directory already exists and is not empty":null:"Destination is not a directory":null}let d5=RegExp("^git@[\\w.-]+:[\\w./-]+\\.git$");function d6(e,t){return e.startsWith(t)?e.slice(t.length):e}async function d4(e){return new Promise(t=>setTimeout(t,e))}let d7=I.zo.div`
  display: flex;
  flex-direction: column;
  height: 100vh;
  min-height: 0;
`,d3=e=>{let{height:t}=e,n=(0,g.useRef)(null),[r,i]=(0,D.KO)(cf),o=(0,D.Dv)(rL),a=(0,D.Dv)(cE.isOpen);return(0,D.Dv)(ez).current=(0,j.U)(),(0,D.Dv)(eW).current=(0,y.S)(),(0,D.Dv)(eY).current=(0,k.i)(),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(rf,{}),(0,C.jsxs)(T.a,{disablePortal:!0,children:[(0,C.jsx)(d9,{}),(0,C.jsx)(ue,{}),(0,C.jsx)(dm.Provider,{value:n,children:(0,C.jsxs)(d7,{style:{height:t},children:[(0,C.jsx)(d8,{children:e=>{let{shortcutHandlerProps:t}=e;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P.u,{ref:n,toolWindowsState:r,onToolWindowStateChange:e=>{i(e)},windows:lL,containerProps:t,children:(0,C.jsx)(t7,{})}),(0,C.jsx)(cc,{})]})}}),a&&(0,C.jsx)(c0,{}),o&&(0,C.jsx)(cg,{})]})})]})]})};function d8(e){let t=[...function(){let e=(0,eT.lV)(dp),t=(0,tD.w)(),n=(0,D.Dv)(c3),r=t({id:nS,title:"New...",description:"Create new class, interface, file or directory",isSearchable:!0,children:[n,(0,D.Dv)(dn)]}),i=t({id:nD,title:"Copy Path/Reference...",menuPresentation:"none",children:[t({id:"CopyFileReference",title:"Copy File Reference",isSearchable:!1,menuPresentation:"section",children:[(0,D.Dv)(ds),(0,D.Dv)(da),(0,D.Dv)(dl)]})]});return[{id:tx.$.GO_TO_ACTION,title:"Find Action",description:"Quickly navigate to action by name",actionPerformed:t=>{e(t,"Actions")}},{id:tx.$.GO_TO_FILE,title:"Go to file",description:"Quickly navigate to file by name",actionPerformed:t=>{e(t,"Files")}},r,i,(0,D.Dv)(du)]}(),...function(){let e=(0,j.U)(),t=(0,y.S)(),n=(0,D.Dv)(dE),r=(0,D.Dv)(dS),i=(0,D.Dv)(dJ),o=(0,D.Dv)(dX);return[...df(),n,i,o,...0===(0,D.Dv)(te).length?[r]:[],{id:rj.GIT_CREATE_NEW_BRANCH,title:"New Branch\u2026",description:"Create new branch starting from the selected commit",icon:(0,C.jsx)(M.vq,{icon:"general/add.svg"}),actionPerformed:()=>{t.open(e=>{let{close:t}=e;return(0,C.jsx)(dw,{close:t})})}},{id:rj.GIT_BRANCHES,title:"Branches\u2026",icon:(0,C.jsx)(M.vq,{icon:"vcs/branch.svg"}),actionPerformed:()=>{e.show(e=>{let{close:t}=e;return(0,C.jsx)(ci,{close:t})})}},{id:rj.GIT_LOG_NAVIGATE_TO_SELECTED_BRANCH,title:"Navigate Log to Selected Branch Head",useShortcutsOf:"SelectIn",icon:(0,C.jsx)(M.vq,{icon:"general/locate.svg"}),actionPerformed:()=>{tA()}}]}(),...function(){let e=i5();return[{id:"AddTestProcessAction",title:"Add Test Process",actionPerformed:()=>{e({title:"Test process",isCancelable:!0},async(e,t)=>{let{setText:n,setSecondaryText:r,setFraction:i}=e;n("Welcome!"),await (0,ef.qf)(function*(){for(let t=0;t<1e3;t++){var e;n((e=t)/10==Math.round(e/10)?"":"Found: "+Math.round(e/20)+"1"),i(t/1e3),yield d4(100),r("Bla bla bla")}})(t)})}}]}()];return(0,C.jsx)(B.DG,{...e,actions:t,useCapture:!0})}function d9(){return tf.value=(0,T.L)(),null}function ue(){return!function(){let e=(0,T.L)(),t=i5();(0,g.useEffect)(()=>{let n=setTimeout(()=>{void 0==ew.get()&&e.showSticky({title:"Switch to IndexedDB filesystem",body:"By default an in-memory filesystem is used to have a faster git clone. But it means all changes will be lost upon refresh. You can switch in the background to a persistence fs implementation which uses IndexedDB to store files.",actions:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l2.g,{onPress:()=>{t({title:"Switching to IndexedDB FS",isCancelable:!0},async(e,t)=>{let{setIndeterminate:n,setText:r}=e;r("Copying ..."),n(!0),await eC({cancelSignal:t,onCopy:e=>{r(`Copying ${m().dirname(e)}`)}}).then(()=>{ew.set("yes")}).catch(()=>{})})},children:"Switch to IndexedDB FS"}),(0,C.jsx)(l2.g,{onPress:()=>ew.set("no"),children:"Don't ask again"})]})})},3e3);return()=>clearTimeout(n)},[])}(),null}d3.__docgenInfo={description:"",methods:[],displayName:"Project",props:{height:{required:!0,tsType:{name:'CSSProperties["height"]',raw:'CSSProperties["height"]'},description:""}}};let ut={ActivateProjectWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit1",modifiers:["Meta"]}}],ActivateCommitWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit0",modifiers:["Meta"]}}],ActivateVersionControlWindow:[{type:"keyboard",firstKeyStroke:{code:"Digit9",modifiers:["Meta"]}}],ActivateTerminalWindow:[{type:"keyboard",firstKeyStroke:{code:"F12",modifiers:["Alt"]}}],[rj.ROLLBACK]:[{type:"keyboard",firstKeyStroke:{code:"KeyZ",modifiers:["Alt","Meta"]}}],[rj.SHOW_DIFF]:[{type:"keyboard",firstKeyStroke:{code:"KeyD",modifiers:["Meta"]}}],[rj.SHELVE_SILENTLY]:[{type:"keyboard",firstKeyStroke:{code:"KeyH",modifiers:["Meta","Shift"]}}],[rj.UNSHELVE_SILENTLY]:[{type:"keyboard",firstKeyStroke:{code:"KeyU",modifiers:["Meta","Alt"]}}],[cM]:[{type:"keyboard",firstKeyStroke:{code:"Tab",modifiers:["Shift"]}}],[cG]:[{type:"keyboard",firstKeyStroke:{code:"Tab"}}],[rj.RENAME_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{code:"F2"}}],[rj.MOVE_TO_ANOTHER_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyM"}}],[rj.SET_DEFAULT_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{modifiers:["Control"],code:"Space"}}],[rj.REMOVE_CHANGELIST]:[{type:"keyboard",firstKeyStroke:{code:"Backspace"}}],[rj.CHECKIN_PROJECT]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyK"}}],[rj.ADD_UNVERSIONED]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"KeyA"}}],[rj.FOCUS_TEXT_FILTER]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyL"}}],[rj.GROUP_BY_DIRECTORY]:[{type:"keyboard",firstKeyStroke:{modifiers:["Control"],code:"KeyP"}}],SafeDelete:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"Backspace"}}],CopyPaths:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyC"}}],[tI]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"KeyV"}}],[nS]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyN"}}],[tk]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"KeyN"}}],[tT.EXPAND_REGION]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"NumpadAdd"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"Equal"}}],[tT.EXPAND_REGION_RECURSIVELY]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"NumpadAdd"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"Equal"}}],[tT.EXPAND_ALL_REGIONS]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"NumpadAdd"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"Equal"}}],...[1,2,3,4,5].reduce((e,t)=>(e[tT[`EXPAND_ALL_TO_LEVEL${t}`]]=[{type:"keyboard",firstKeyStroke:{modifiers:["Alt","Meta"],code:"Multiply"},secondKeyStroke:{code:`Digit${t}`}},{type:"keyboard",firstKeyStroke:{modifiers:["Alt","Meta"],code:"Multiply"},secondKeyStroke:{code:`Numpad${t}`}}],e),{}),[tT.COLLAPSE_REGION]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"Minus"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta"],code:"NumpadSubtract"}}],[tT.COLLAPSE_REGION_RECURSIVELY]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"Minus"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Alt"],code:"NumpadSubtract"}}],[tT.COLLAPSE_ALL_REGIONS]:[{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"Minus"}},{type:"keyboard",firstKeyStroke:{modifiers:["Meta","Shift"],code:"NumpadSubtract"}}]};window.git=f.ZP,window.fs=r,window.path=p,window.http=A.Z;let un=e=>{let{height:t,autoCloneSampleRepo:n}=e;return(0,C.jsx)(S,{children:(0,C.jsx)(eE,{children:(0,C.jsx)(dG,{autoCloneSampleRepo:n,children:(0,C.jsx)(x.ur,{keymap:ut,children:(0,C.jsx)(y.f,{children:(0,C.jsx)(j.q,{children:(0,C.jsx)(d3,{height:t})})})})})})})};un.__docgenInfo={description:"Example app root component. It expects ThemeProvider to be provided based on where it's rendered.",methods:[],displayName:"App",props:{height:{required:!1,tsType:{name:'CSSProperties["height"]',raw:'CSSProperties["height"]'},description:""},autoCloneSampleRepo:{required:!1,tsType:{name:"boolean"},description:""}}};let ur=un},13775:function(e,t,n){var r={"./simpleWorker.js":"57772","./simpleWorker":"57772"};function i(e){return Promise.resolve().then(function(){if(!n.o(r,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n(r[e])})}i.keys=()=>Object.keys(r),i.id="13775",e.exports=i},56755:function(e,t,n){var r={"./treeViewsDndService.js":["61860"],"./textResourceConfiguration":["16576"],"./unicodeTextModelHighlighter.js":["83969"],"./findSectionHeaders":["43631"],"./languageFeaturesService":["99423"],"./model.js":["65041"],"./editorSimpleWorker":["66298"],"./editorBaseApi":["79375"],"./editorWorker":["30363"],"./editorWorkerHost.js":["76679"],"./semanticTokensDto":["21982"],"./semanticTokensDto.js":["21982"],"./semanticTokensStyling.js":["76567"],"./textResourceConfiguration.js":["16576"],"./editorWorker.js":["30363"],"./languagesAssociations":["41356"],"./markerDecorationsService":["1022"],"./languageFeatureDebounce":["69060"],"./model":["65041"],"./resolverService":["91223"],"./languagesRegistry":["33550"],"./markerDecorations.js":["52919"],"./semanticTokensProviderStyling":["45960"],"./semanticTokensProviderStyling.js":["45960"],"./languageService.js":["44718"],"./semanticTokensStylingService":["29922"],"./getIconClasses.js":["75154"],"./languageFeatures.js":["35921"],"./modelService.js":["94657"],"./languagesRegistry.js":["33550"],"./languageFeatures":["35921"],"./markerDecorationsService.js":["1022"],"./textModelSync/textModelSync.impl.js":["13423"],"./languageService":["44718"],"./editorSimpleWorker.js":["66298"],"./markerDecorations":["52919"],"./textModelSync/textModelSync.protocol":["66828","9348"],"./findSectionHeaders.js":["43631"],"./treeSitterParserService":["40143"],"./treeViewsDnd":["55247"],"./languagesAssociations.js":["41356"],"./treeViewsDnd.js":["55247"],"./unicodeTextModelHighlighter":["83969"],"./editorWorkerHost":["76679"],"./textModelSync/textModelSync.impl":["13423"],"./languageFeatureDebounce.js":["69060"],"./editorBaseApi.js":["79375"],"./textModelSync/textModelSync.protocol.js":["66828","9348"],"./languageFeaturesService.js":["99423"],"./getIconClasses":["75154"],"./treeSitterParserService.js":["40143"],"./semanticTokensStylingService.js":["29922"],"./semanticTokensStyling":["76567"],"./treeViewsDndService":["61860"],"./modelService":["94657"],"./resolverService.js":["91223"]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then(function(){return n(i)})}i.keys=()=>Object.keys(r),i.id="56755",e.exports=i},57011:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id="57011",e.exports=t}}]);
//# sourceMappingURL=8032.fe7ed596.js.map