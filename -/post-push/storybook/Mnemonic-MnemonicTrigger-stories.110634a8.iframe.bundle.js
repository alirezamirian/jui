"use strict";(self.webpackChunk_intellij_platform_core=self.webpackChunk_intellij_platform_core||[]).push([[1312],{"./src/Mnemonic/MnemonicTrigger.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Multiple:()=>Multiple,NonTextContent:()=>NonTextContent,PrioritizeWordStart:()=>PrioritizeWordStart,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/styled.ts"),_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/Mnemonic/MnemonicTrigger.tsx");const StyledContainer=_intellij_platform_core__WEBPACK_IMPORTED_MODULE_1__.I4.div`
  color: ${({theme})=>theme.color("*.foreground")};
`,__WEBPACK_DEFAULT_EXPORT__={title:"Components/Mnemonic",component:_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_2__.$,args:{children:"Disconnect",mnemonic:"D",onTriggered:()=>alert("Triggered!")},render:props=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_2__.$,props)),argTypes:{}},Default={},NonTextContent={args:{children:react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_2__.y,null,"Disconnect"))}},PrioritizeWordStart={args:{children:" Include disabled actions",mnemonic:"d"}},Multiple={render:()=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledContainer,{style:{display:"flex",gap:"1rem"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_2__.$,{mnemonic:"C",onTriggered:()=>alert('Triggered "Cancel"')},"Cancel")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_2__.$,{mnemonic:"D",onTriggered:()=>alert('Triggered "Disconnect"')},"Disconnect")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_MnemonicTrigger__WEBPACK_IMPORTED_MODULE_2__.$,{mnemonic:"T",onTriggered:()=>alert('Triggered "Terminate"')},"Terminate")))},__namedExportsOrder=["Default","NonTextContent","PrioritizeWordStart","Multiple"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}},NonTextContent.parameters={...NonTextContent.parameters,docs:{...NonTextContent.parameters?.docs,source:{originalSource:"{\n  args: {\n    children: <span>\n        <MnemonicText>Disconnect</MnemonicText>\n      </span>\n  }\n}",...NonTextContent.parameters?.docs?.source}}},PrioritizeWordStart.parameters={...PrioritizeWordStart.parameters,docs:{...PrioritizeWordStart.parameters?.docs,source:{originalSource:'{\n  args: {\n    children: " Include disabled actions",\n    mnemonic: "d"\n  }\n}',...PrioritizeWordStart.parameters?.docs?.source}}},Multiple.parameters={...Multiple.parameters,docs:{...Multiple.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    return <StyledContainer style={{\n      display: "flex",\n      gap: "1rem"\n    }}>\n        <span>\n          <MnemonicTrigger mnemonic="C" onTriggered={() => alert(\'Triggered "Cancel"\')}>\n            Cancel\n          </MnemonicTrigger>\n        </span>\n        <span>\n          <MnemonicTrigger mnemonic="D" onTriggered={() => alert(\'Triggered "Disconnect"\')}>\n            Disconnect\n          </MnemonicTrigger>\n        </span>\n        <span>\n          <MnemonicTrigger mnemonic="T" onTriggered={() => alert(\'Triggered "Terminate"\')}>\n            Terminate\n          </MnemonicTrigger>\n        </span>\n      </StyledContainer>;\n  }\n}',...Multiple.parameters?.docs?.source}}}},"./src/Mnemonic/MnemonicTrigger.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>MnemonicTrigger,y:()=>MnemonicText});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_intellij_platform_core_utils_useEventCallback__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/useEventCallback.ts");const MnemonicContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({character:null,active:!1,rendered:()=>{}}),MnemonicTrigger=({children,mnemonic,isDisabled,onTriggered:onTriggeredProp=(()=>{})})=>{const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),onTriggered=(0,_intellij_platform_core_utils_useEventCallback__WEBPACK_IMPORTED_MODULE_1__.D)(onTriggeredProp),[active,setActive]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),keydownListener=(0,_intellij_platform_core_utils_useEventCallback__WEBPACK_IMPORTED_MODULE_1__.D)((e=>{if(!isDisabled){if(active&&!e.repeat){const character=e.code.match(/Key([A-Z])/)?.[1];character&&character.toLowerCase()===mnemonic.toLowerCase()&&(e.preventDefault(),onTriggered())}"Alt"===e.key&&ref.current&&function isAccessible(element){return!element.closest("[aria-hidden]")&&null!==element.parentElement&&function isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}(element.parentElement)}(ref.current)&&setActive(!0)}}));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{function onBlur(){setActive(!1)}function keyupListener(e){"Alt"===e.key&&setActive(!1)}return document.addEventListener("keydown",keydownListener),document.addEventListener("keyup",keyupListener),window.addEventListener("blur",onBlur),()=>{document.removeEventListener("keydown",keydownListener),document.removeEventListener("keyup",keyupListener),window.removeEventListener("blur",onBlur)}}),[]);const renderedMnemonicRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)("");return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const timerId=setTimeout((()=>{renderedMnemonicRef.current!==mnemonic&&console.warn(`Mnemonic ${mnemonic} was set but not rendered to the user. \nMake sure the specified character is rendered directly in MnemonicTrigger, or wrapped by MnemonicText inside MnemonicTrigger children. \nElement:`,ref.current?.parentElement)}));return()=>{clearTimeout(timerId)}}),[mnemonic]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MnemonicContext.Provider,{value:{character:mnemonic,active,rendered:()=>{renderedMnemonicRef.current=mnemonic}}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{hidden:!0,ref}),"string"==typeof children?react__WEBPACK_IMPORTED_MODULE_0__.createElement(MnemonicText,null,children):children)};function MnemonicText({children}){const{character,active,rendered}=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MnemonicContext);if(character){const index=[children.match(new RegExp(`^${character}`,"i"))?.index??-1,(children.match(new RegExp(` ${character}`,"i"))?.index??-2)+1,children.toLowerCase().indexOf(character.toLowerCase())].find((index=>index>=0))??-1,found=index>-1;if(found&&rendered(),found&&active)return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,children.slice(0,index),react__WEBPACK_IMPORTED_MODULE_0__.createElement("u",null,children.slice(index,index+1)),children.slice(index+1))}return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,children)}MnemonicTrigger.__docgenInfo={description:"",methods:[],displayName:"MnemonicTrigger",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},mnemonic:{required:!0,tsType:{name:"string"},description:"Character to be used as {@link https://jetbrains.design/intellij/principles/mnemonics/ mnemonic}."},onTriggered:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Called when mnemonic key is pressed with the activator key",defaultValue:{value:"() => {}",computed:!1}},isDisabled:{required:!1,tsType:{name:"boolean"},description:"Whether the mnemonic is disabled. Useful when setting mnemonic on disable-able components, to just pass\nisDisabled prop down to MnemonicTrigger"}}},MnemonicText.__docgenInfo={description:'Used inside MnemonicTrigger children, when the direct child can\'t be a string.\n@example\n```tsx\n<MnemonicTrigger mnemonic="D">\n   <>\n     <MnemonicText>Disconnect</MnemonicText>\n   </>\n</MnemonicTrigger>\n```',methods:[],displayName:"MnemonicText",props:{children:{required:!0,tsType:{name:"string"},description:""}}}},"./src/styled.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AH:()=>css,DP:()=>useTheme,I4:()=>styled});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const styled=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay,useTheme=styled_components__WEBPACK_IMPORTED_MODULE_0__.DP,css=styled_components__WEBPACK_IMPORTED_MODULE_0__.AH;styled_components__WEBPACK_IMPORTED_MODULE_0__.e$},"./src/utils/useEventCallback.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>useEventCallback});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js");function useEventCallback(fn){let ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{ref.current=fn}));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(((...args)=>ref.current?.apply(null,args)),[])}}}]);
//# sourceMappingURL=Mnemonic-MnemonicTrigger-stories.110634a8.iframe.bundle.js.map